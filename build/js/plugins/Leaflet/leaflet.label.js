/*
	Leaflet.label, a plugin that adds labels to markers and vectors for Leaflet powered maps.
	(c) 2012-2013, Jacob Toye, Smartrak

	https://github.com/Leaflet/Leaflet.label
	http://leafletjs.com
	https://github.com/jacobtoye
*/
(function(t,e){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports&&(module.exports=t(require("leaflet"))),e!==void 0&&e.L&&(e.LeafletLabel=t(L))})(function(t){t.labelVersion="0.2.4";var e=t.Class.extend({includes:t.Mixin.Events,options:{className:"",clickable:!1,direction:"right",noHide:!1,offset:[12,-15],opacity:1,zoomAnimation:!0},initialize:function(e,i){t.setOptions(this,e),this._source=i,this._animated=t.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._pane=this.options.pane?e._panes[this.options.pane]:this._source instanceof t.Marker?e._panes.markerPane:e._panes.popupPane,this._container||this._initLayout(),this._pane.appendChild(this._container),this._initInteraction(),this._update(),this.setOpacity(this.options.opacity),e.on("moveend",this._onMoveEnd,this).on("viewreset",this._onViewReset,this),this._animated&&e.on("zoomanim",this._zoomAnimation,this),t.Browser.touch&&!this.options.noHide&&(t.DomEvent.on(this._container,"click",this.close,this),e.on("click",this.close,this))},onRemove:function(t){this._pane.removeChild(this._container),t.off({zoomanim:this._zoomAnimation,moveend:this._onMoveEnd,viewreset:this._onViewReset},this),this._removeInteraction(),this._map=null},setLatLng:function(e){return this._latlng=t.latLng(e),this._map&&this._updatePosition(),this},setContent:function(t){return this._previousContent=this._content,this._content=t,this._updateContent(),this},close:function(){var e=this._map;e&&(t.Browser.touch&&!this.options.noHide&&(t.DomEvent.off(this._container,"click",this.close),e.off("click",this.close,this)),e.removeLayer(this))},updateZIndex:function(t){this._zIndex=t,this._container&&this._zIndex&&(this._container.style.zIndex=t)},setOpacity:function(e){this.options.opacity=e,this._container&&t.DomUtil.setOpacity(this._container,e)},_initLayout:function(){this._container=t.DomUtil.create("div","leaflet-label "+this.options.className+" leaflet-zoom-animated"),this.updateZIndex(this._zIndex)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updatePosition(),this._container.style.visibility="")},_updateContent:function(){this._content&&this._map&&this._prevContent!==this._content&&"string"==typeof this._content&&(this._container.innerHTML=this._content,this._prevContent=this._content,this._labelWidth=this._container.offsetWidth)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},_setPosition:function(e){var i=this._map,n=this._container,o=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(e),a=this.options.direction,l=this._labelWidth,h=t.point(this.options.offset);"right"===a||"auto"===a&&s.x<o.x?(t.DomUtil.addClass(n,"leaflet-label-right"),t.DomUtil.removeClass(n,"leaflet-label-left"),e=e.add(h)):(t.DomUtil.addClass(n,"leaflet-label-left"),t.DomUtil.removeClass(n,"leaflet-label-right"),e=e.add(t.point(-h.x-l,h.y))),t.DomUtil.setPosition(n,e)},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPosition(e)},_onMoveEnd:function(){this._animated&&"auto"!==this.options.direction||this._updatePosition()},_onViewReset:function(t){t&&t.hard&&this._update()},_initInteraction:function(){if(this.options.clickable){var e=this._container,i=["dblclick","mousedown","mouseover","mouseout","contextmenu"];t.DomUtil.addClass(e,"leaflet-clickable"),t.DomEvent.on(e,"click",this._onMouseClick,this);for(var n=0;i.length>n;n++)t.DomEvent.on(e,i[n],this._fireMouseEvent,this)}},_removeInteraction:function(){if(this.options.clickable){var e=this._container,i=["dblclick","mousedown","mouseover","mouseout","contextmenu"];t.DomUtil.removeClass(e,"leaflet-clickable"),t.DomEvent.off(e,"click",this._onMouseClick,this);for(var n=0;i.length>n;n++)t.DomEvent.off(e,i[n],this._fireMouseEvent,this)}},_onMouseClick:function(e){this.hasEventListeners(e.type)&&t.DomEvent.stopPropagation(e),this.fire(e.type,{originalEvent:e})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&t.DomEvent.preventDefault(e),"mousedown"!==e.type?t.DomEvent.stopPropagation(e):t.DomEvent.preventDefault(e)}});return t.BaseMarkerMethods={showLabel:function(){return this.label&&this._map&&(this.label.setLatLng(this._latlng),this._map.showLabel(this.label)),this},hideLabel:function(){return this.label&&this.label.close(),this},setLabelNoHide:function(t){this._labelNoHide!==t&&(this._labelNoHide=t,t?(this._removeLabelRevealHandlers(),this.showLabel()):(this._addLabelRevealHandlers(),this.hideLabel()))},bindLabel:function(i,n){var o=this.options.icon?this.options.icon.options.labelAnchor:this.options.labelAnchor,s=t.point(o)||t.point(0,0);return s=s.add(e.prototype.options.offset),n&&n.offset&&(s=s.add(n.offset)),n=t.Util.extend({offset:s},n),this._labelNoHide=n.noHide,this.label||(this._labelNoHide||this._addLabelRevealHandlers(),this.on("remove",this.hideLabel,this).on("move",this._moveLabel,this).on("add",this._onMarkerAdd,this),this._hasLabelHandlers=!0),this.label=new e(n,this).setContent(i),this},unbindLabel:function(){return this.label&&(this.hideLabel(),this.label=null,this._hasLabelHandlers&&(this._labelNoHide||this._removeLabelRevealHandlers(),this.off("remove",this.hideLabel,this).off("move",this._moveLabel,this).off("add",this._onMarkerAdd,this)),this._hasLabelHandlers=!1),this},updateLabelContent:function(t){this.label&&this.label.setContent(t)},getLabel:function(){return this.label},_onMarkerAdd:function(){this._labelNoHide&&this.showLabel()},_addLabelRevealHandlers:function(){this.on("mouseover",this.showLabel,this).on("mouseout",this.hideLabel,this),t.Browser.touch&&this.on("click",this.showLabel,this)},_removeLabelRevealHandlers:function(){this.off("mouseover",this.showLabel,this).off("mouseout",this.hideLabel,this),t.Browser.touch&&this.off("click",this.showLabel,this)},_moveLabel:function(t){this.label.setLatLng(t.latlng)}},t.Icon.Default.mergeOptions({labelAnchor:new t.Point(9,-20)}),t.Marker.mergeOptions({icon:new t.Icon.Default}),t.Marker.include(t.BaseMarkerMethods),t.Marker.include({_originalUpdateZIndex:t.Marker.prototype._updateZIndex,_updateZIndex:function(t){var e=this._zIndex+t;this._originalUpdateZIndex(t),this.label&&this.label.updateZIndex(e)},_originalSetOpacity:t.Marker.prototype.setOpacity,setOpacity:function(t,e){this.options.labelHasSemiTransparency=e,this._originalSetOpacity(t)},_originalUpdateOpacity:t.Marker.prototype._updateOpacity,_updateOpacity:function(){var t=0===this.options.opacity?0:1;this._originalUpdateOpacity(),this.label&&this.label.setOpacity(this.options.labelHasSemiTransparency?this.options.opacity:t)},_originalSetLatLng:t.Marker.prototype.setLatLng,setLatLng:function(t){return this.label&&!this._labelNoHide&&this.hideLabel(),this._originalSetLatLng(t)}}),t.CircleMarker.mergeOptions({labelAnchor:new t.Point(0,0)}),t.CircleMarker.include(t.BaseMarkerMethods),t.Path.include({bindLabel:function(i,n){return this.label&&this.label.options===n||(this.label=new e(n,this)),this.label.setContent(i),this._showLabelAdded||(this.on("mouseover",this._showLabel,this).on("mousemove",this._moveLabel,this).on("mouseout remove",this._hideLabel,this),t.Browser.touch&&this.on("click",this._showLabel,this),this._showLabelAdded=!0),this},unbindLabel:function(){return this.label&&(this._hideLabel(),this.label=null,this._showLabelAdded=!1,this.off("mouseover",this._showLabel,this).off("mousemove",this._moveLabel,this).off("mouseout remove",this._hideLabel,this)),this},updateLabelContent:function(t){this.label&&this.label.setContent(t)},_showLabel:function(t){this.label.setLatLng(t.latlng),this._map.showLabel(this.label)},_moveLabel:function(t){this.label.setLatLng(t.latlng)},_hideLabel:function(){this.label.close()}}),t.Map.include({showLabel:function(t){return this.addLayer(t)}}),t.FeatureGroup.include({clearLayers:function(){return this.unbindLabel(),this.eachLayer(this.removeLayer,this),this},bindLabel:function(t,e){return this.invoke("bindLabel",t,e)},unbindLabel:function(){return this.invoke("unbindLabel")},updateLabelContent:function(t){this.invoke("updateLabelContent",t)}}),e},window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJwbHVnaW5zL0xlYWZsZXQvbGVhZmxldC5sYWJlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuXHRMZWFmbGV0LmxhYmVsLCBhIHBsdWdpbiB0aGF0IGFkZHMgbGFiZWxzIHRvIG1hcmtlcnMgYW5kIHZlY3RvcnMgZm9yIExlYWZsZXQgcG93ZXJlZCBtYXBzLlxuXHQoYykgMjAxMi0yMDEzLCBKYWNvYiBUb3llLCBTbWFydHJha1xuXG5cdGh0dHBzOi8vZ2l0aHViLmNvbS9MZWFmbGV0L0xlYWZsZXQubGFiZWxcblx0aHR0cDovL2xlYWZsZXRqcy5jb21cblx0aHR0cHM6Ly9naXRodWIuY29tL2phY29idG95ZVxuKi9cbihmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wibGVhZmxldFwiXSx0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmKG1vZHVsZS5leHBvcnRzPXQocmVxdWlyZShcImxlYWZsZXRcIikpKSxlIT09dm9pZCAwJiZlLkwmJihlLkxlYWZsZXRMYWJlbD10KEwpKX0pKGZ1bmN0aW9uKHQpe3QubGFiZWxWZXJzaW9uPVwiMC4yLjRcIjt2YXIgZT10LkNsYXNzLmV4dGVuZCh7aW5jbHVkZXM6dC5NaXhpbi5FdmVudHMsb3B0aW9uczp7Y2xhc3NOYW1lOlwiXCIsY2xpY2thYmxlOiExLGRpcmVjdGlvbjpcInJpZ2h0XCIsbm9IaWRlOiExLG9mZnNldDpbMTIsLTE1XSxvcGFjaXR5OjEsem9vbUFuaW1hdGlvbjohMH0saW5pdGlhbGl6ZTpmdW5jdGlvbihlLGkpe3Quc2V0T3B0aW9ucyh0aGlzLGUpLHRoaXMuX3NvdXJjZT1pLHRoaXMuX2FuaW1hdGVkPXQuQnJvd3Nlci5hbnkzZCYmdGhpcy5vcHRpb25zLnpvb21BbmltYXRpb24sdGhpcy5faXNPcGVuPSExfSxvbkFkZDpmdW5jdGlvbihlKXt0aGlzLl9tYXA9ZSx0aGlzLl9wYW5lPXRoaXMub3B0aW9ucy5wYW5lP2UuX3BhbmVzW3RoaXMub3B0aW9ucy5wYW5lXTp0aGlzLl9zb3VyY2UgaW5zdGFuY2VvZiB0Lk1hcmtlcj9lLl9wYW5lcy5tYXJrZXJQYW5lOmUuX3BhbmVzLnBvcHVwUGFuZSx0aGlzLl9jb250YWluZXJ8fHRoaXMuX2luaXRMYXlvdXQoKSx0aGlzLl9wYW5lLmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lciksdGhpcy5faW5pdEludGVyYWN0aW9uKCksdGhpcy5fdXBkYXRlKCksdGhpcy5zZXRPcGFjaXR5KHRoaXMub3B0aW9ucy5vcGFjaXR5KSxlLm9uKFwibW92ZWVuZFwiLHRoaXMuX29uTW92ZUVuZCx0aGlzKS5vbihcInZpZXdyZXNldFwiLHRoaXMuX29uVmlld1Jlc2V0LHRoaXMpLHRoaXMuX2FuaW1hdGVkJiZlLm9uKFwiem9vbWFuaW1cIix0aGlzLl96b29tQW5pbWF0aW9uLHRoaXMpLHQuQnJvd3Nlci50b3VjaCYmIXRoaXMub3B0aW9ucy5ub0hpZGUmJih0LkRvbUV2ZW50Lm9uKHRoaXMuX2NvbnRhaW5lcixcImNsaWNrXCIsdGhpcy5jbG9zZSx0aGlzKSxlLm9uKFwiY2xpY2tcIix0aGlzLmNsb3NlLHRoaXMpKX0sb25SZW1vdmU6ZnVuY3Rpb24odCl7dGhpcy5fcGFuZS5yZW1vdmVDaGlsZCh0aGlzLl9jb250YWluZXIpLHQub2ZmKHt6b29tYW5pbTp0aGlzLl96b29tQW5pbWF0aW9uLG1vdmVlbmQ6dGhpcy5fb25Nb3ZlRW5kLHZpZXdyZXNldDp0aGlzLl9vblZpZXdSZXNldH0sdGhpcyksdGhpcy5fcmVtb3ZlSW50ZXJhY3Rpb24oKSx0aGlzLl9tYXA9bnVsbH0sc2V0TGF0TG5nOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9sYXRsbmc9dC5sYXRMbmcoZSksdGhpcy5fbWFwJiZ0aGlzLl91cGRhdGVQb3NpdGlvbigpLHRoaXN9LHNldENvbnRlbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3ByZXZpb3VzQ29udGVudD10aGlzLl9jb250ZW50LHRoaXMuX2NvbnRlbnQ9dCx0aGlzLl91cGRhdGVDb250ZW50KCksdGhpc30sY2xvc2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tYXA7ZSYmKHQuQnJvd3Nlci50b3VjaCYmIXRoaXMub3B0aW9ucy5ub0hpZGUmJih0LkRvbUV2ZW50Lm9mZih0aGlzLl9jb250YWluZXIsXCJjbGlja1wiLHRoaXMuY2xvc2UpLGUub2ZmKFwiY2xpY2tcIix0aGlzLmNsb3NlLHRoaXMpKSxlLnJlbW92ZUxheWVyKHRoaXMpKX0sdXBkYXRlWkluZGV4OmZ1bmN0aW9uKHQpe3RoaXMuX3pJbmRleD10LHRoaXMuX2NvbnRhaW5lciYmdGhpcy5fekluZGV4JiYodGhpcy5fY29udGFpbmVyLnN0eWxlLnpJbmRleD10KX0sc2V0T3BhY2l0eTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMub3BhY2l0eT1lLHRoaXMuX2NvbnRhaW5lciYmdC5Eb21VdGlsLnNldE9wYWNpdHkodGhpcy5fY29udGFpbmVyLGUpfSxfaW5pdExheW91dDpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lcj10LkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsXCJsZWFmbGV0LWxhYmVsIFwiK3RoaXMub3B0aW9ucy5jbGFzc05hbWUrXCIgbGVhZmxldC16b29tLWFuaW1hdGVkXCIpLHRoaXMudXBkYXRlWkluZGV4KHRoaXMuX3pJbmRleCl9LF91cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLl9tYXAmJih0aGlzLl9jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLHRoaXMuX3VwZGF0ZUNvbnRlbnQoKSx0aGlzLl91cGRhdGVQb3NpdGlvbigpLHRoaXMuX2NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5PVwiXCIpfSxfdXBkYXRlQ29udGVudDpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJnRoaXMuX21hcCYmdGhpcy5fcHJldkNvbnRlbnQhPT10aGlzLl9jb250ZW50JiZcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5fY29udGVudCYmKHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUw9dGhpcy5fY29udGVudCx0aGlzLl9wcmV2Q29udGVudD10aGlzLl9jb250ZW50LHRoaXMuX2xhYmVsV2lkdGg9dGhpcy5fY29udGFpbmVyLm9mZnNldFdpZHRoKX0sX3VwZGF0ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcpO3RoaXMuX3NldFBvc2l0aW9uKHQpfSxfc2V0UG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5fbWFwLG49dGhpcy5fY29udGFpbmVyLG89aS5sYXRMbmdUb0NvbnRhaW5lclBvaW50KGkuZ2V0Q2VudGVyKCkpLHM9aS5sYXllclBvaW50VG9Db250YWluZXJQb2ludChlKSxhPXRoaXMub3B0aW9ucy5kaXJlY3Rpb24sbD10aGlzLl9sYWJlbFdpZHRoLGg9dC5wb2ludCh0aGlzLm9wdGlvbnMub2Zmc2V0KTtcInJpZ2h0XCI9PT1hfHxcImF1dG9cIj09PWEmJnMueDxvLng/KHQuRG9tVXRpbC5hZGRDbGFzcyhuLFwibGVhZmxldC1sYWJlbC1yaWdodFwiKSx0LkRvbVV0aWwucmVtb3ZlQ2xhc3MobixcImxlYWZsZXQtbGFiZWwtbGVmdFwiKSxlPWUuYWRkKGgpKToodC5Eb21VdGlsLmFkZENsYXNzKG4sXCJsZWFmbGV0LWxhYmVsLWxlZnRcIiksdC5Eb21VdGlsLnJlbW92ZUNsYXNzKG4sXCJsZWFmbGV0LWxhYmVsLXJpZ2h0XCIpLGU9ZS5hZGQodC5wb2ludCgtaC54LWwsaC55KSkpLHQuRG9tVXRpbC5zZXRQb3NpdGlvbihuLGUpfSxfem9vbUFuaW1hdGlvbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tYXAuX2xhdExuZ1RvTmV3TGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcsdC56b29tLHQuY2VudGVyKS5yb3VuZCgpO3RoaXMuX3NldFBvc2l0aW9uKGUpfSxfb25Nb3ZlRW5kOmZ1bmN0aW9uKCl7dGhpcy5fYW5pbWF0ZWQmJlwiYXV0b1wiIT09dGhpcy5vcHRpb25zLmRpcmVjdGlvbnx8dGhpcy5fdXBkYXRlUG9zaXRpb24oKX0sX29uVmlld1Jlc2V0OmZ1bmN0aW9uKHQpe3QmJnQuaGFyZCYmdGhpcy5fdXBkYXRlKCl9LF9pbml0SW50ZXJhY3Rpb246ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuY2xpY2thYmxlKXt2YXIgZT10aGlzLl9jb250YWluZXIsaT1bXCJkYmxjbGlja1wiLFwibW91c2Vkb3duXCIsXCJtb3VzZW92ZXJcIixcIm1vdXNlb3V0XCIsXCJjb250ZXh0bWVudVwiXTt0LkRvbVV0aWwuYWRkQ2xhc3MoZSxcImxlYWZsZXQtY2xpY2thYmxlXCIpLHQuRG9tRXZlbnQub24oZSxcImNsaWNrXCIsdGhpcy5fb25Nb3VzZUNsaWNrLHRoaXMpO2Zvcih2YXIgbj0wO2kubGVuZ3RoPm47bisrKXQuRG9tRXZlbnQub24oZSxpW25dLHRoaXMuX2ZpcmVNb3VzZUV2ZW50LHRoaXMpfX0sX3JlbW92ZUludGVyYWN0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmNsaWNrYWJsZSl7dmFyIGU9dGhpcy5fY29udGFpbmVyLGk9W1wiZGJsY2xpY2tcIixcIm1vdXNlZG93blwiLFwibW91c2VvdmVyXCIsXCJtb3VzZW91dFwiLFwiY29udGV4dG1lbnVcIl07dC5Eb21VdGlsLnJlbW92ZUNsYXNzKGUsXCJsZWFmbGV0LWNsaWNrYWJsZVwiKSx0LkRvbUV2ZW50Lm9mZihlLFwiY2xpY2tcIix0aGlzLl9vbk1vdXNlQ2xpY2ssdGhpcyk7Zm9yKHZhciBuPTA7aS5sZW5ndGg+bjtuKyspdC5Eb21FdmVudC5vZmYoZSxpW25dLHRoaXMuX2ZpcmVNb3VzZUV2ZW50LHRoaXMpfX0sX29uTW91c2VDbGljazpmdW5jdGlvbihlKXt0aGlzLmhhc0V2ZW50TGlzdGVuZXJzKGUudHlwZSkmJnQuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGUpLHRoaXMuZmlyZShlLnR5cGUse29yaWdpbmFsRXZlbnQ6ZX0pfSxfZmlyZU1vdXNlRXZlbnQ6ZnVuY3Rpb24oZSl7dGhpcy5maXJlKGUudHlwZSx7b3JpZ2luYWxFdmVudDplfSksXCJjb250ZXh0bWVudVwiPT09ZS50eXBlJiZ0aGlzLmhhc0V2ZW50TGlzdGVuZXJzKGUudHlwZSkmJnQuRG9tRXZlbnQucHJldmVudERlZmF1bHQoZSksXCJtb3VzZWRvd25cIiE9PWUudHlwZT90LkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihlKTp0LkRvbUV2ZW50LnByZXZlbnREZWZhdWx0KGUpfX0pO3JldHVybiB0LkJhc2VNYXJrZXJNZXRob2RzPXtzaG93TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbCYmdGhpcy5fbWFwJiYodGhpcy5sYWJlbC5zZXRMYXRMbmcodGhpcy5fbGF0bG5nKSx0aGlzLl9tYXAuc2hvd0xhYmVsKHRoaXMubGFiZWwpKSx0aGlzfSxoaWRlTGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbCYmdGhpcy5sYWJlbC5jbG9zZSgpLHRoaXN9LHNldExhYmVsTm9IaWRlOmZ1bmN0aW9uKHQpe3RoaXMuX2xhYmVsTm9IaWRlIT09dCYmKHRoaXMuX2xhYmVsTm9IaWRlPXQsdD8odGhpcy5fcmVtb3ZlTGFiZWxSZXZlYWxIYW5kbGVycygpLHRoaXMuc2hvd0xhYmVsKCkpOih0aGlzLl9hZGRMYWJlbFJldmVhbEhhbmRsZXJzKCksdGhpcy5oaWRlTGFiZWwoKSkpfSxiaW5kTGFiZWw6ZnVuY3Rpb24oaSxuKXt2YXIgbz10aGlzLm9wdGlvbnMuaWNvbj90aGlzLm9wdGlvbnMuaWNvbi5vcHRpb25zLmxhYmVsQW5jaG9yOnRoaXMub3B0aW9ucy5sYWJlbEFuY2hvcixzPXQucG9pbnQobyl8fHQucG9pbnQoMCwwKTtyZXR1cm4gcz1zLmFkZChlLnByb3RvdHlwZS5vcHRpb25zLm9mZnNldCksbiYmbi5vZmZzZXQmJihzPXMuYWRkKG4ub2Zmc2V0KSksbj10LlV0aWwuZXh0ZW5kKHtvZmZzZXQ6c30sbiksdGhpcy5fbGFiZWxOb0hpZGU9bi5ub0hpZGUsdGhpcy5sYWJlbHx8KHRoaXMuX2xhYmVsTm9IaWRlfHx0aGlzLl9hZGRMYWJlbFJldmVhbEhhbmRsZXJzKCksdGhpcy5vbihcInJlbW92ZVwiLHRoaXMuaGlkZUxhYmVsLHRoaXMpLm9uKFwibW92ZVwiLHRoaXMuX21vdmVMYWJlbCx0aGlzKS5vbihcImFkZFwiLHRoaXMuX29uTWFya2VyQWRkLHRoaXMpLHRoaXMuX2hhc0xhYmVsSGFuZGxlcnM9ITApLHRoaXMubGFiZWw9bmV3IGUobix0aGlzKS5zZXRDb250ZW50KGkpLHRoaXN9LHVuYmluZExhYmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFiZWwmJih0aGlzLmhpZGVMYWJlbCgpLHRoaXMubGFiZWw9bnVsbCx0aGlzLl9oYXNMYWJlbEhhbmRsZXJzJiYodGhpcy5fbGFiZWxOb0hpZGV8fHRoaXMuX3JlbW92ZUxhYmVsUmV2ZWFsSGFuZGxlcnMoKSx0aGlzLm9mZihcInJlbW92ZVwiLHRoaXMuaGlkZUxhYmVsLHRoaXMpLm9mZihcIm1vdmVcIix0aGlzLl9tb3ZlTGFiZWwsdGhpcykub2ZmKFwiYWRkXCIsdGhpcy5fb25NYXJrZXJBZGQsdGhpcykpLHRoaXMuX2hhc0xhYmVsSGFuZGxlcnM9ITEpLHRoaXN9LHVwZGF0ZUxhYmVsQ29udGVudDpmdW5jdGlvbih0KXt0aGlzLmxhYmVsJiZ0aGlzLmxhYmVsLnNldENvbnRlbnQodCl9LGdldExhYmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFiZWx9LF9vbk1hcmtlckFkZDpmdW5jdGlvbigpe3RoaXMuX2xhYmVsTm9IaWRlJiZ0aGlzLnNob3dMYWJlbCgpfSxfYWRkTGFiZWxSZXZlYWxIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMub24oXCJtb3VzZW92ZXJcIix0aGlzLnNob3dMYWJlbCx0aGlzKS5vbihcIm1vdXNlb3V0XCIsdGhpcy5oaWRlTGFiZWwsdGhpcyksdC5Ccm93c2VyLnRvdWNoJiZ0aGlzLm9uKFwiY2xpY2tcIix0aGlzLnNob3dMYWJlbCx0aGlzKX0sX3JlbW92ZUxhYmVsUmV2ZWFsSGFuZGxlcnM6ZnVuY3Rpb24oKXt0aGlzLm9mZihcIm1vdXNlb3ZlclwiLHRoaXMuc2hvd0xhYmVsLHRoaXMpLm9mZihcIm1vdXNlb3V0XCIsdGhpcy5oaWRlTGFiZWwsdGhpcyksdC5Ccm93c2VyLnRvdWNoJiZ0aGlzLm9mZihcImNsaWNrXCIsdGhpcy5zaG93TGFiZWwsdGhpcyl9LF9tb3ZlTGFiZWw6ZnVuY3Rpb24odCl7dGhpcy5sYWJlbC5zZXRMYXRMbmcodC5sYXRsbmcpfX0sdC5JY29uLkRlZmF1bHQubWVyZ2VPcHRpb25zKHtsYWJlbEFuY2hvcjpuZXcgdC5Qb2ludCg5LC0yMCl9KSx0Lk1hcmtlci5tZXJnZU9wdGlvbnMoe2ljb246bmV3IHQuSWNvbi5EZWZhdWx0fSksdC5NYXJrZXIuaW5jbHVkZSh0LkJhc2VNYXJrZXJNZXRob2RzKSx0Lk1hcmtlci5pbmNsdWRlKHtfb3JpZ2luYWxVcGRhdGVaSW5kZXg6dC5NYXJrZXIucHJvdG90eXBlLl91cGRhdGVaSW5kZXgsX3VwZGF0ZVpJbmRleDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl96SW5kZXgrdDt0aGlzLl9vcmlnaW5hbFVwZGF0ZVpJbmRleCh0KSx0aGlzLmxhYmVsJiZ0aGlzLmxhYmVsLnVwZGF0ZVpJbmRleChlKX0sX29yaWdpbmFsU2V0T3BhY2l0eTp0Lk1hcmtlci5wcm90b3R5cGUuc2V0T3BhY2l0eSxzZXRPcGFjaXR5OmZ1bmN0aW9uKHQsZSl7dGhpcy5vcHRpb25zLmxhYmVsSGFzU2VtaVRyYW5zcGFyZW5jeT1lLHRoaXMuX29yaWdpbmFsU2V0T3BhY2l0eSh0KX0sX29yaWdpbmFsVXBkYXRlT3BhY2l0eTp0Lk1hcmtlci5wcm90b3R5cGUuX3VwZGF0ZU9wYWNpdHksX3VwZGF0ZU9wYWNpdHk6ZnVuY3Rpb24oKXt2YXIgdD0wPT09dGhpcy5vcHRpb25zLm9wYWNpdHk/MDoxO3RoaXMuX29yaWdpbmFsVXBkYXRlT3BhY2l0eSgpLHRoaXMubGFiZWwmJnRoaXMubGFiZWwuc2V0T3BhY2l0eSh0aGlzLm9wdGlvbnMubGFiZWxIYXNTZW1pVHJhbnNwYXJlbmN5P3RoaXMub3B0aW9ucy5vcGFjaXR5OnQpfSxfb3JpZ2luYWxTZXRMYXRMbmc6dC5NYXJrZXIucHJvdG90eXBlLnNldExhdExuZyxzZXRMYXRMbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGFiZWwmJiF0aGlzLl9sYWJlbE5vSGlkZSYmdGhpcy5oaWRlTGFiZWwoKSx0aGlzLl9vcmlnaW5hbFNldExhdExuZyh0KX19KSx0LkNpcmNsZU1hcmtlci5tZXJnZU9wdGlvbnMoe2xhYmVsQW5jaG9yOm5ldyB0LlBvaW50KDAsMCl9KSx0LkNpcmNsZU1hcmtlci5pbmNsdWRlKHQuQmFzZU1hcmtlck1ldGhvZHMpLHQuUGF0aC5pbmNsdWRlKHtiaW5kTGFiZWw6ZnVuY3Rpb24oaSxuKXtyZXR1cm4gdGhpcy5sYWJlbCYmdGhpcy5sYWJlbC5vcHRpb25zPT09bnx8KHRoaXMubGFiZWw9bmV3IGUobix0aGlzKSksdGhpcy5sYWJlbC5zZXRDb250ZW50KGkpLHRoaXMuX3Nob3dMYWJlbEFkZGVkfHwodGhpcy5vbihcIm1vdXNlb3ZlclwiLHRoaXMuX3Nob3dMYWJlbCx0aGlzKS5vbihcIm1vdXNlbW92ZVwiLHRoaXMuX21vdmVMYWJlbCx0aGlzKS5vbihcIm1vdXNlb3V0IHJlbW92ZVwiLHRoaXMuX2hpZGVMYWJlbCx0aGlzKSx0LkJyb3dzZXIudG91Y2gmJnRoaXMub24oXCJjbGlja1wiLHRoaXMuX3Nob3dMYWJlbCx0aGlzKSx0aGlzLl9zaG93TGFiZWxBZGRlZD0hMCksdGhpc30sdW5iaW5kTGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbCYmKHRoaXMuX2hpZGVMYWJlbCgpLHRoaXMubGFiZWw9bnVsbCx0aGlzLl9zaG93TGFiZWxBZGRlZD0hMSx0aGlzLm9mZihcIm1vdXNlb3ZlclwiLHRoaXMuX3Nob3dMYWJlbCx0aGlzKS5vZmYoXCJtb3VzZW1vdmVcIix0aGlzLl9tb3ZlTGFiZWwsdGhpcykub2ZmKFwibW91c2VvdXQgcmVtb3ZlXCIsdGhpcy5faGlkZUxhYmVsLHRoaXMpKSx0aGlzfSx1cGRhdGVMYWJlbENvbnRlbnQ6ZnVuY3Rpb24odCl7dGhpcy5sYWJlbCYmdGhpcy5sYWJlbC5zZXRDb250ZW50KHQpfSxfc2hvd0xhYmVsOmZ1bmN0aW9uKHQpe3RoaXMubGFiZWwuc2V0TGF0TG5nKHQubGF0bG5nKSx0aGlzLl9tYXAuc2hvd0xhYmVsKHRoaXMubGFiZWwpfSxfbW92ZUxhYmVsOmZ1bmN0aW9uKHQpe3RoaXMubGFiZWwuc2V0TGF0TG5nKHQubGF0bG5nKX0sX2hpZGVMYWJlbDpmdW5jdGlvbigpe3RoaXMubGFiZWwuY2xvc2UoKX19KSx0Lk1hcC5pbmNsdWRlKHtzaG93TGFiZWw6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWRkTGF5ZXIodCl9fSksdC5GZWF0dXJlR3JvdXAuaW5jbHVkZSh7Y2xlYXJMYXllcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmJpbmRMYWJlbCgpLHRoaXMuZWFjaExheWVyKHRoaXMucmVtb3ZlTGF5ZXIsdGhpcyksdGhpc30sYmluZExhYmVsOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaW52b2tlKFwiYmluZExhYmVsXCIsdCxlKX0sdW5iaW5kTGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZva2UoXCJ1bmJpbmRMYWJlbFwiKX0sdXBkYXRlTGFiZWxDb250ZW50OmZ1bmN0aW9uKHQpe3RoaXMuaW52b2tlKFwidXBkYXRlTGFiZWxDb250ZW50XCIsdCl9fSksZX0sd2luZG93KTsiXSwiZmlsZSI6InBsdWdpbnMvTGVhZmxldC9sZWFmbGV0LmxhYmVsLmpzIn0=
