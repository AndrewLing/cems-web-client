define("echarts/chart/bar",["require","./base","zrender/shape/Rectangle","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(e){function t(e,t,n,a,o){i.call(this,e,t,n,a,o),this.refresh(a)}var i=e("./base"),n=e("zrender/shape/Rectangle");e("../component/axis"),e("../component/grid"),e("../component/dataZoom");var a=e("../config");a.bar={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,barMinHeight:0,barGap:"30%",barCategoryGap:"20%",itemStyle:{normal:{barBorderColor:"#fff",barBorderRadius:0,barBorderWidth:0,label:{show:!1}},emphasis:{barBorderColor:"#fff",barBorderRadius:0,barBorderWidth:0,label:{show:!1}}}};var o=e("../util/ecData"),r=e("zrender/tool/util"),s=e("zrender/tool/color");return t.prototype={type:a.CHART_TYPE_BAR,_buildShape:function(){this._buildPosition()},_buildNormal:function(e,t,i,o,r){for(var s,l,h,d,m,c,p,u,V,U,g,y,f=this.series,b=i[0][0],_=f[b],x="horizontal"==r,k=this.component.xAxis,L=this.component.yAxis,v=x?k.getAxis(_.xAxisIndex):L.getAxis(_.yAxisIndex),W=this._mapSize(v,i),w=W.gap,X=W.barGap,I=W.barWidthMap,K=W.barMaxWidthMap,S=W.barWidth,C=W.barMinHeightMap,T=W.interval,E=this.deepQuery([this.ecTheme,a],"island.r"),z=0,A=t;A>z&&null!=v.getNameByIndex(z);z++){x?d=v.getCoordByIndex(z)-w/2:m=v.getCoordByIndex(z)+w/2;for(var M=0,J=i.length;J>M;M++){var F=f[i[M][0]].yAxisIndex||0,O=f[i[M][0]].xAxisIndex||0;s=x?L.getAxis(F):k.getAxis(O),p=c=V=u=s.getCoord(0);for(var P=0,D=i[M].length;D>P;P++)b=i[M][P],_=f[b],g=_.data[z],y=this.getDataFromOption(g,"-"),o[b]=o[b]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},h=Math.min(K[b]||Number.MAX_VALUE,I[b]||S),"-"!==y&&(y>0?(l=P>0?s.getCoordSize(y):x?p-s.getCoord(y):s.getCoord(y)-p,1===D&&C[b]>l&&(l=C[b]),x?(c-=l,m=c):(d=c,c+=l)):0>y?(l=P>0?s.getCoordSize(y):x?s.getCoord(y)-V:V-s.getCoord(y),1===D&&C[b]>l&&(l=C[b]),x?(m=u,u+=l):(u-=l,d=u)):(l=0,x?(c-=l,m=c):(d=c,c+=l)),o[b][z]=x?d+h/2:m-h/2,o[b].min>y&&(o[b].min=y,x?(o[b].minY=m,o[b].minX=o[b][z]):(o[b].minX=d+l,o[b].minY=o[b][z])),o[b].max<y&&(o[b].max=y,x?(o[b].maxY=m,o[b].maxX=o[b][z]):(o[b].maxX=d+l,o[b].maxY=o[b][z])),o[b].sum+=y,o[b].counter++,z%T===0&&(U=this._getBarItem(b,z,v.getNameByIndex(z),d,m-(x?0:h),x?h:l,x?l:h,x?"vertical":"horizontal"),this.shapeList.push(new n(U))));for(var P=0,D=i[M].length;D>P;P++)b=i[M][P],_=f[b],g=_.data[z],y=this.getDataFromOption(g,"-"),h=Math.min(K[b]||Number.MAX_VALUE,I[b]||S),"-"==y&&this.deepQuery([g,_,this.option],"calculable")&&(x?(c-=E,m=c):(d=c,c+=E),U=this._getBarItem(b,z,v.getNameByIndex(z),d,m-(x?0:h),x?h:E,x?E:h,x?"vertical":"horizontal"),U.hoverable=!1,U.draggable=!1,U.style.lineWidth=1,U.style.brushType="stroke",U.style.strokeColor=_.calculableHolderColor||this.ecTheme.calculableHolderColor||a.calculableHolderColor,this.shapeList.push(new n(U)));x?d+=h+X:m-=h+X}}this._calculMarkMapXY(o,i,x?"y":"x")},_buildHorizontal:function(e,t,i,n){return this._buildNormal(e,t,i,n,"horizontal")},_buildVertical:function(e,t,i,n){return this._buildNormal(e,t,i,n,"vertical")},_buildOther:function(e,t,i,a){for(var o=this.series,r=0,s=i.length;s>r;r++)for(var l=0,h=i[r].length;h>l;l++){var d=i[r][l],m=o[d],c=m.xAxisIndex||0,p=this.component.xAxis.getAxis(c),u=p.getCoord(0),V=m.yAxisIndex||0,U=this.component.yAxis.getAxis(V),g=U.getCoord(0);a[d]=a[d]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var y=0,f=m.data.length;f>y;y++){var b=m.data[y],_=this.getDataFromOption(b,"-");if(_ instanceof Array){var x,k,L=p.getCoord(_[0]),v=U.getCoord(_[1]),W=[b,m],w=this.deepQuery(W,"barWidth")||10,X=this.deepQuery(W,"barHeight");null!=X?(x="horizontal",_[0]>0?(w=L-u,L-=w):w=_[0]<0?u-L:0,k=this._getBarItem(d,y,_[0],L,v-X/2,w,X,x)):(x="vertical",_[1]>0?X=g-v:_[1]<0?(X=v-g,v-=X):X=0,k=this._getBarItem(d,y,_[0],L-w/2,v,w,X,x)),this.shapeList.push(new n(k)),L=p.getCoord(_[0]),v=U.getCoord(_[1]),a[d].min0>_[0]&&(a[d].min0=_[0],a[d].minY0=v,a[d].minX0=L),a[d].max0<_[0]&&(a[d].max0=_[0],a[d].maxY0=v,a[d].maxX0=L),a[d].sum0+=_[0],a[d].counter0++,a[d].min1>_[1]&&(a[d].min1=_[1],a[d].minY1=v,a[d].minX1=L),a[d].max1<_[1]&&(a[d].max1=_[1],a[d].maxY1=v,a[d].maxX1=L),a[d].sum1+=_[1],a[d].counter1++}}}this._calculMarkMapXY(a,i,"xy")},_mapSize:function(e,t,i){var n,a,o=this._findSpecialBarSzie(t,i),r=o.barWidthMap,s=o.barMaxWidthMap,l=o.barMinHeightMap,h=o.sBarWidthCounter,d=o.sBarWidthTotal,m=o.barGap,c=o.barCategoryGap,p=1;if(t.length!=h){if(i)n=e.getGap(),m=0,a=+(n/t.length).toFixed(2),0>=a&&(p=Math.floor(t.length/n),a=1);else if(n="string"==typeof c&&c.match(/%$/)?(e.getGap()*(100-parseFloat(c))/100).toFixed(2)-0:e.getGap()-c,"string"==typeof m&&m.match(/%$/)?(m=parseFloat(m)/100,a=+((n-d)/((t.length-1)*m+t.length-h)).toFixed(2),m=a*m):(m=parseFloat(m),a=+((n-d-m*(t.length-1))/(t.length-h)).toFixed(2)),0>=a)return this._mapSize(e,t,!0)}else if(n=h>1?"string"==typeof c&&c.match(/%$/)?+(e.getGap()*(100-parseFloat(c))/100).toFixed(2):e.getGap()-c:d,a=0,m=h>1?+((n-d)/(h-1)).toFixed(2):0,0>m)return this._mapSize(e,t,!0);return this._recheckBarMaxWidth(t,r,s,l,n,a,m,p)},_findSpecialBarSzie:function(e,t){for(var i,n,a,o,r=this.series,s={},l={},h={},d=0,m=0,c=0,p=e.length;p>c;c++)for(var u={barWidth:!1,barMaxWidth:!1},V=0,U=e[c].length;U>V;V++){var g=e[c][V],y=r[g];if(!t){if(u.barWidth)s[g]=i;else if(i=this.query(y,"barWidth"),null!=i){s[g]=i,m+=i,d++,u.barWidth=!0;for(var f=0,b=V;b>f;f++){var _=e[c][f];s[_]=i}}if(u.barMaxWidth)l[g]=n;else if(n=this.query(y,"barMaxWidth"),null!=n){l[g]=n,u.barMaxWidth=!0;for(var f=0,b=V;b>f;f++){var _=e[c][f];l[_]=n}}}h[g]=this.query(y,"barMinHeight"),a=null!=a?a:this.query(y,"barGap"),o=null!=o?o:this.query(y,"barCategoryGap")}return{barWidthMap:s,barMaxWidthMap:l,barMinHeightMap:h,sBarWidth:i,sBarMaxWidth:n,sBarWidthCounter:d,sBarWidthTotal:m,barGap:a,barCategoryGap:o}},_recheckBarMaxWidth:function(e,t,i,n,a,o,r,s){for(var l=0,h=e.length;h>l;l++){var d=e[l][0];i[d]&&i[d]<o&&(a-=o-i[d])}return{barWidthMap:t,barMaxWidthMap:i,barMinHeightMap:n,gap:a,barWidth:o,barGap:r,interval:s}},_getBarItem:function(e,t,i,n,a,r,l,h){var d,m=this.series,c=m[e],p=c.data[t],u=this._sIndex2ColorMap[e],V=[p,c],U=this.deepMerge(V,"itemStyle.normal"),g=this.deepMerge(V,"itemStyle.emphasis"),y=U.barBorderWidth;d={zlevel:this.getZlevelBase(),z:this.getZBase(),clickable:this.deepQuery(V,"clickable"),style:{x:n,y:a,width:r,height:l,brushType:"both",color:this.getItemStyleColor(this.deepQuery(V,"itemStyle.normal.color")||u,e,t,p),radius:U.barBorderRadius,lineWidth:y,strokeColor:U.barBorderColor},highlightStyle:{color:this.getItemStyleColor(this.deepQuery(V,"itemStyle.emphasis.color"),e,t,p),radius:g.barBorderRadius,lineWidth:g.barBorderWidth,strokeColor:g.barBorderColor},_orient:h};var f=d.style;d.highlightStyle.color=d.highlightStyle.color||("string"==typeof f.color?s.lift(f.color,-.3):f.color),f.x=Math.floor(f.x),f.y=Math.floor(f.y),f.height=Math.ceil(f.height),f.width=Math.ceil(f.width),y>0&&f.height>y&&f.width>y?(f.y+=y/2,f.height-=y,f.x+=y/2,f.width-=y):f.brushType="fill",d.highlightStyle.textColor=d.highlightStyle.color,d=this.addLabel(d,c,p,i,h);var b=f.textPosition;if("insideLeft"===b||"insideRight"===b||"insideTop"===b||"insideBottom"===b){var _=5;switch(b){case"insideLeft":f.textX=f.x+_,f.textY=f.y+f.height/2,f.textAlign="left",f.textBaseline="middle";break;case"insideRight":f.textX=f.x+f.width-_,f.textY=f.y+f.height/2,f.textAlign="right",f.textBaseline="middle";break;case"insideTop":f.textX=f.x+f.width/2,f.textY=f.y+_/2,f.textAlign="center",f.textBaseline="top";break;case"insideBottom":f.textX=f.x+f.width/2,f.textY=f.y+f.height-_/2,f.textAlign="center",f.textBaseline="bottom"}f.textPosition="specific",f.textColor=f.textColor||"#fff"}return this.deepQuery([p,c,this.option],"calculable")&&(this.setCalculable(d),d.draggable=!0),o.pack(d,m[e],e,m[e].data[t],t,i),d},getMarkCoord:function(e,t){var i,n,a=this.series[e],o=this.xMarkMap[e],r=this.component.xAxis.getAxis(a.xAxisIndex),s=this.component.yAxis.getAxis(a.yAxisIndex);if(!t.type||"max"!==t.type&&"min"!==t.type&&"average"!==t.type)if(o.isHorizontal){i="string"==typeof t.xAxis&&r.getIndexByName?r.getIndexByName(t.xAxis):t.xAxis||0;var l=o[i];l=null!=l?l:"string"!=typeof t.xAxis&&r.getCoordByIndex?r.getCoordByIndex(t.xAxis||0):r.getCoord(t.xAxis||0),n=[l,s.getCoord(t.yAxis||0)]}else{i="string"==typeof t.yAxis&&s.getIndexByName?s.getIndexByName(t.yAxis):t.yAxis||0;var h=o[i];h=null!=h?h:"string"!=typeof t.yAxis&&s.getCoordByIndex?s.getCoordByIndex(t.yAxis||0):s.getCoord(t.yAxis||0),n=[r.getCoord(t.xAxis||0),h]}else{var d=null!=t.valueIndex?t.valueIndex:null!=o.maxX0?"1":"";n=[o[t.type+"X"+d],o[t.type+"Y"+d],o[t.type+"Line"+d],o[t.type+d]]}return n},refresh:function(e){e&&(this.option=e,this.series=e.series),this.backupShapeList(),this._buildShape()},addDataAnimation:function(e){for(var t=this.series,i={},n=0,a=e.length;a>n;n++)i[e[n][0]]=e[n];for(var r,s,l,h,d,m,c,n=this.shapeList.length-1;n>=0;n--)if(m=o.get(this.shapeList[n],"seriesIndex"),i[m]&&!i[m][3]&&"rectangle"===this.shapeList[n].type){if(c=o.get(this.shapeList[n],"dataIndex"),d=t[m],i[m][2]&&c===d.data.length-1){this.zr.delShape(this.shapeList[n].id);continue}if(!i[m][2]&&0===c){this.zr.delShape(this.shapeList[n].id);continue}"horizontal"===this.shapeList[n]._orient?(h=this.component.yAxis.getAxis(d.yAxisIndex||0).getGap(),l=i[m][2]?-h:h,r=0):(s=this.component.xAxis.getAxis(d.xAxisIndex||0).getGap(),r=i[m][2]?s:-s,l=0),this.shapeList[n].position=[0,0],this.zr.animate(this.shapeList[n].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[r,l]}).start()}}},r.inherits(t,i),e("../chart").define("bar",t),t});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJwbHVnaW5zL2VjaGFydHMvY2hhcnQvYmFyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImRlZmluZShcImVjaGFydHMvY2hhcnQvYmFyXCIsW1wicmVxdWlyZVwiLFwiLi9iYXNlXCIsXCJ6cmVuZGVyL3NoYXBlL1JlY3RhbmdsZVwiLFwiLi4vY29tcG9uZW50L2F4aXNcIixcIi4uL2NvbXBvbmVudC9ncmlkXCIsXCIuLi9jb21wb25lbnQvZGF0YVpvb21cIixcIi4uL2NvbmZpZ1wiLFwiLi4vdXRpbC9lY0RhdGFcIixcInpyZW5kZXIvdG9vbC91dGlsXCIsXCJ6cmVuZGVyL3Rvb2wvY29sb3JcIixcIi4uL2NoYXJ0XCJdLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LG4sYSxvKXtpLmNhbGwodGhpcyxlLHQsbixhLG8pLHRoaXMucmVmcmVzaChhKX12YXIgaT1lKFwiLi9iYXNlXCIpLG49ZShcInpyZW5kZXIvc2hhcGUvUmVjdGFuZ2xlXCIpO2UoXCIuLi9jb21wb25lbnQvYXhpc1wiKSxlKFwiLi4vY29tcG9uZW50L2dyaWRcIiksZShcIi4uL2NvbXBvbmVudC9kYXRhWm9vbVwiKTt2YXIgYT1lKFwiLi4vY29uZmlnXCIpO2EuYmFyPXt6bGV2ZWw6MCx6OjIsY2xpY2thYmxlOiEwLGxlZ2VuZEhvdmVyTGluazohMCx4QXhpc0luZGV4OjAseUF4aXNJbmRleDowLGJhck1pbkhlaWdodDowLGJhckdhcDpcIjMwJVwiLGJhckNhdGVnb3J5R2FwOlwiMjAlXCIsaXRlbVN0eWxlOntub3JtYWw6e2JhckJvcmRlckNvbG9yOlwiI2ZmZlwiLGJhckJvcmRlclJhZGl1czowLGJhckJvcmRlcldpZHRoOjAsbGFiZWw6e3Nob3c6ITF9fSxlbXBoYXNpczp7YmFyQm9yZGVyQ29sb3I6XCIjZmZmXCIsYmFyQm9yZGVyUmFkaXVzOjAsYmFyQm9yZGVyV2lkdGg6MCxsYWJlbDp7c2hvdzohMX19fX07dmFyIG89ZShcIi4uL3V0aWwvZWNEYXRhXCIpLHI9ZShcInpyZW5kZXIvdG9vbC91dGlsXCIpLHM9ZShcInpyZW5kZXIvdG9vbC9jb2xvclwiKTtyZXR1cm4gdC5wcm90b3R5cGU9e3R5cGU6YS5DSEFSVF9UWVBFX0JBUixfYnVpbGRTaGFwZTpmdW5jdGlvbigpe3RoaXMuX2J1aWxkUG9zaXRpb24oKX0sX2J1aWxkTm9ybWFsOmZ1bmN0aW9uKGUsdCxpLG8scil7Zm9yKHZhciBzLGwsaCxkLG0sYyxwLHUsVixVLGcseSxmPXRoaXMuc2VyaWVzLGI9aVswXVswXSxfPWZbYl0seD1cImhvcml6b250YWxcIj09cixrPXRoaXMuY29tcG9uZW50LnhBeGlzLEw9dGhpcy5jb21wb25lbnQueUF4aXMsdj14P2suZ2V0QXhpcyhfLnhBeGlzSW5kZXgpOkwuZ2V0QXhpcyhfLnlBeGlzSW5kZXgpLFc9dGhpcy5fbWFwU2l6ZSh2LGkpLHc9Vy5nYXAsWD1XLmJhckdhcCxJPVcuYmFyV2lkdGhNYXAsSz1XLmJhck1heFdpZHRoTWFwLFM9Vy5iYXJXaWR0aCxDPVcuYmFyTWluSGVpZ2h0TWFwLFQ9Vy5pbnRlcnZhbCxFPXRoaXMuZGVlcFF1ZXJ5KFt0aGlzLmVjVGhlbWUsYV0sXCJpc2xhbmQuclwiKSx6PTAsQT10O0E+eiYmbnVsbCE9di5nZXROYW1lQnlJbmRleCh6KTt6Kyspe3g/ZD12LmdldENvb3JkQnlJbmRleCh6KS13LzI6bT12LmdldENvb3JkQnlJbmRleCh6KSt3LzI7Zm9yKHZhciBNPTAsSj1pLmxlbmd0aDtKPk07TSsrKXt2YXIgRj1mW2lbTV1bMF1dLnlBeGlzSW5kZXh8fDAsTz1mW2lbTV1bMF1dLnhBeGlzSW5kZXh8fDA7cz14P0wuZ2V0QXhpcyhGKTprLmdldEF4aXMoTykscD1jPVY9dT1zLmdldENvb3JkKDApO2Zvcih2YXIgUD0wLEQ9aVtNXS5sZW5ndGg7RD5QO1ArKyliPWlbTV1bUF0sXz1mW2JdLGc9Xy5kYXRhW3pdLHk9dGhpcy5nZXREYXRhRnJvbU9wdGlvbihnLFwiLVwiKSxvW2JdPW9bYl18fHttaW46TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksc3VtOjAsY291bnRlcjowLGF2ZXJhZ2U6MH0saD1NYXRoLm1pbihLW2JdfHxOdW1iZXIuTUFYX1ZBTFVFLElbYl18fFMpLFwiLVwiIT09eSYmKHk+MD8obD1QPjA/cy5nZXRDb29yZFNpemUoeSk6eD9wLXMuZ2V0Q29vcmQoeSk6cy5nZXRDb29yZCh5KS1wLDE9PT1EJiZDW2JdPmwmJihsPUNbYl0pLHg/KGMtPWwsbT1jKTooZD1jLGMrPWwpKTowPnk/KGw9UD4wP3MuZ2V0Q29vcmRTaXplKHkpOng/cy5nZXRDb29yZCh5KS1WOlYtcy5nZXRDb29yZCh5KSwxPT09RCYmQ1tiXT5sJiYobD1DW2JdKSx4PyhtPXUsdSs9bCk6KHUtPWwsZD11KSk6KGw9MCx4PyhjLT1sLG09Yyk6KGQ9YyxjKz1sKSksb1tiXVt6XT14P2QraC8yOm0taC8yLG9bYl0ubWluPnkmJihvW2JdLm1pbj15LHg/KG9bYl0ubWluWT1tLG9bYl0ubWluWD1vW2JdW3pdKToob1tiXS5taW5YPWQrbCxvW2JdLm1pblk9b1tiXVt6XSkpLG9bYl0ubWF4PHkmJihvW2JdLm1heD15LHg/KG9bYl0ubWF4WT1tLG9bYl0ubWF4WD1vW2JdW3pdKToob1tiXS5tYXhYPWQrbCxvW2JdLm1heFk9b1tiXVt6XSkpLG9bYl0uc3VtKz15LG9bYl0uY291bnRlcisrLHolVD09PTAmJihVPXRoaXMuX2dldEJhckl0ZW0oYix6LHYuZ2V0TmFtZUJ5SW5kZXgoeiksZCxtLSh4PzA6aCkseD9oOmwseD9sOmgseD9cInZlcnRpY2FsXCI6XCJob3Jpem9udGFsXCIpLHRoaXMuc2hhcGVMaXN0LnB1c2gobmV3IG4oVSkpKSk7Zm9yKHZhciBQPTAsRD1pW01dLmxlbmd0aDtEPlA7UCsrKWI9aVtNXVtQXSxfPWZbYl0sZz1fLmRhdGFbel0seT10aGlzLmdldERhdGFGcm9tT3B0aW9uKGcsXCItXCIpLGg9TWF0aC5taW4oS1tiXXx8TnVtYmVyLk1BWF9WQUxVRSxJW2JdfHxTKSxcIi1cIj09eSYmdGhpcy5kZWVwUXVlcnkoW2csXyx0aGlzLm9wdGlvbl0sXCJjYWxjdWxhYmxlXCIpJiYoeD8oYy09RSxtPWMpOihkPWMsYys9RSksVT10aGlzLl9nZXRCYXJJdGVtKGIseix2LmdldE5hbWVCeUluZGV4KHopLGQsbS0oeD8wOmgpLHg/aDpFLHg/RTpoLHg/XCJ2ZXJ0aWNhbFwiOlwiaG9yaXpvbnRhbFwiKSxVLmhvdmVyYWJsZT0hMSxVLmRyYWdnYWJsZT0hMSxVLnN0eWxlLmxpbmVXaWR0aD0xLFUuc3R5bGUuYnJ1c2hUeXBlPVwic3Ryb2tlXCIsVS5zdHlsZS5zdHJva2VDb2xvcj1fLmNhbGN1bGFibGVIb2xkZXJDb2xvcnx8dGhpcy5lY1RoZW1lLmNhbGN1bGFibGVIb2xkZXJDb2xvcnx8YS5jYWxjdWxhYmxlSG9sZGVyQ29sb3IsdGhpcy5zaGFwZUxpc3QucHVzaChuZXcgbihVKSkpO3g/ZCs9aCtYOm0tPWgrWH19dGhpcy5fY2FsY3VsTWFya01hcFhZKG8saSx4P1wieVwiOlwieFwiKX0sX2J1aWxkSG9yaXpvbnRhbDpmdW5jdGlvbihlLHQsaSxuKXtyZXR1cm4gdGhpcy5fYnVpbGROb3JtYWwoZSx0LGksbixcImhvcml6b250YWxcIil9LF9idWlsZFZlcnRpY2FsOmZ1bmN0aW9uKGUsdCxpLG4pe3JldHVybiB0aGlzLl9idWlsZE5vcm1hbChlLHQsaSxuLFwidmVydGljYWxcIil9LF9idWlsZE90aGVyOmZ1bmN0aW9uKGUsdCxpLGEpe2Zvcih2YXIgbz10aGlzLnNlcmllcyxyPTAscz1pLmxlbmd0aDtzPnI7cisrKWZvcih2YXIgbD0wLGg9aVtyXS5sZW5ndGg7aD5sO2wrKyl7dmFyIGQ9aVtyXVtsXSxtPW9bZF0sYz1tLnhBeGlzSW5kZXh8fDAscD10aGlzLmNvbXBvbmVudC54QXhpcy5nZXRBeGlzKGMpLHU9cC5nZXRDb29yZCgwKSxWPW0ueUF4aXNJbmRleHx8MCxVPXRoaXMuY29tcG9uZW50LnlBeGlzLmdldEF4aXMoViksZz1VLmdldENvb3JkKDApO2FbZF09YVtkXXx8e21pbjA6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjE6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1heDA6TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDE6TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLHN1bTA6MCxzdW0xOjAsY291bnRlcjA6MCxjb3VudGVyMTowLGF2ZXJhZ2UwOjAsYXZlcmFnZTE6MH07Zm9yKHZhciB5PTAsZj1tLmRhdGEubGVuZ3RoO2Y+eTt5Kyspe3ZhciBiPW0uZGF0YVt5XSxfPXRoaXMuZ2V0RGF0YUZyb21PcHRpb24oYixcIi1cIik7aWYoXyBpbnN0YW5jZW9mIEFycmF5KXt2YXIgeCxrLEw9cC5nZXRDb29yZChfWzBdKSx2PVUuZ2V0Q29vcmQoX1sxXSksVz1bYixtXSx3PXRoaXMuZGVlcFF1ZXJ5KFcsXCJiYXJXaWR0aFwiKXx8MTAsWD10aGlzLmRlZXBRdWVyeShXLFwiYmFySGVpZ2h0XCIpO251bGwhPVg/KHg9XCJob3Jpem9udGFsXCIsX1swXT4wPyh3PUwtdSxMLT13KTp3PV9bMF08MD91LUw6MCxrPXRoaXMuX2dldEJhckl0ZW0oZCx5LF9bMF0sTCx2LVgvMix3LFgseCkpOih4PVwidmVydGljYWxcIixfWzFdPjA/WD1nLXY6X1sxXTwwPyhYPXYtZyx2LT1YKTpYPTAsaz10aGlzLl9nZXRCYXJJdGVtKGQseSxfWzBdLEwtdy8yLHYsdyxYLHgpKSx0aGlzLnNoYXBlTGlzdC5wdXNoKG5ldyBuKGspKSxMPXAuZ2V0Q29vcmQoX1swXSksdj1VLmdldENvb3JkKF9bMV0pLGFbZF0ubWluMD5fWzBdJiYoYVtkXS5taW4wPV9bMF0sYVtkXS5taW5ZMD12LGFbZF0ubWluWDA9TCksYVtkXS5tYXgwPF9bMF0mJihhW2RdLm1heDA9X1swXSxhW2RdLm1heFkwPXYsYVtkXS5tYXhYMD1MKSxhW2RdLnN1bTArPV9bMF0sYVtkXS5jb3VudGVyMCsrLGFbZF0ubWluMT5fWzFdJiYoYVtkXS5taW4xPV9bMV0sYVtkXS5taW5ZMT12LGFbZF0ubWluWDE9TCksYVtkXS5tYXgxPF9bMV0mJihhW2RdLm1heDE9X1sxXSxhW2RdLm1heFkxPXYsYVtkXS5tYXhYMT1MKSxhW2RdLnN1bTErPV9bMV0sYVtkXS5jb3VudGVyMSsrfX19dGhpcy5fY2FsY3VsTWFya01hcFhZKGEsaSxcInh5XCIpfSxfbWFwU2l6ZTpmdW5jdGlvbihlLHQsaSl7dmFyIG4sYSxvPXRoaXMuX2ZpbmRTcGVjaWFsQmFyU3ppZSh0LGkpLHI9by5iYXJXaWR0aE1hcCxzPW8uYmFyTWF4V2lkdGhNYXAsbD1vLmJhck1pbkhlaWdodE1hcCxoPW8uc0JhcldpZHRoQ291bnRlcixkPW8uc0JhcldpZHRoVG90YWwsbT1vLmJhckdhcCxjPW8uYmFyQ2F0ZWdvcnlHYXAscD0xO2lmKHQubGVuZ3RoIT1oKXtpZihpKW49ZS5nZXRHYXAoKSxtPTAsYT0rKG4vdC5sZW5ndGgpLnRvRml4ZWQoMiksMD49YSYmKHA9TWF0aC5mbG9vcih0Lmxlbmd0aC9uKSxhPTEpO2Vsc2UgaWYobj1cInN0cmluZ1wiPT10eXBlb2YgYyYmYy5tYXRjaCgvJSQvKT8oZS5nZXRHYXAoKSooMTAwLXBhcnNlRmxvYXQoYykpLzEwMCkudG9GaXhlZCgyKS0wOmUuZ2V0R2FwKCktYyxcInN0cmluZ1wiPT10eXBlb2YgbSYmbS5tYXRjaCgvJSQvKT8obT1wYXJzZUZsb2F0KG0pLzEwMCxhPSsoKG4tZCkvKCh0Lmxlbmd0aC0xKSptK3QubGVuZ3RoLWgpKS50b0ZpeGVkKDIpLG09YSptKToobT1wYXJzZUZsb2F0KG0pLGE9Kygobi1kLW0qKHQubGVuZ3RoLTEpKS8odC5sZW5ndGgtaCkpLnRvRml4ZWQoMikpLDA+PWEpcmV0dXJuIHRoaXMuX21hcFNpemUoZSx0LCEwKX1lbHNlIGlmKG49aD4xP1wic3RyaW5nXCI9PXR5cGVvZiBjJiZjLm1hdGNoKC8lJC8pPysoZS5nZXRHYXAoKSooMTAwLXBhcnNlRmxvYXQoYykpLzEwMCkudG9GaXhlZCgyKTplLmdldEdhcCgpLWM6ZCxhPTAsbT1oPjE/Kygobi1kKS8oaC0xKSkudG9GaXhlZCgyKTowLDA+bSlyZXR1cm4gdGhpcy5fbWFwU2l6ZShlLHQsITApO3JldHVybiB0aGlzLl9yZWNoZWNrQmFyTWF4V2lkdGgodCxyLHMsbCxuLGEsbSxwKX0sX2ZpbmRTcGVjaWFsQmFyU3ppZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaSxuLGEsbyxyPXRoaXMuc2VyaWVzLHM9e30sbD17fSxoPXt9LGQ9MCxtPTAsYz0wLHA9ZS5sZW5ndGg7cD5jO2MrKylmb3IodmFyIHU9e2JhcldpZHRoOiExLGJhck1heFdpZHRoOiExfSxWPTAsVT1lW2NdLmxlbmd0aDtVPlY7VisrKXt2YXIgZz1lW2NdW1ZdLHk9cltnXTtpZighdCl7aWYodS5iYXJXaWR0aClzW2ddPWk7ZWxzZSBpZihpPXRoaXMucXVlcnkoeSxcImJhcldpZHRoXCIpLG51bGwhPWkpe3NbZ109aSxtKz1pLGQrKyx1LmJhcldpZHRoPSEwO2Zvcih2YXIgZj0wLGI9VjtiPmY7ZisrKXt2YXIgXz1lW2NdW2ZdO3NbX109aX19aWYodS5iYXJNYXhXaWR0aClsW2ddPW47ZWxzZSBpZihuPXRoaXMucXVlcnkoeSxcImJhck1heFdpZHRoXCIpLG51bGwhPW4pe2xbZ109bix1LmJhck1heFdpZHRoPSEwO2Zvcih2YXIgZj0wLGI9VjtiPmY7ZisrKXt2YXIgXz1lW2NdW2ZdO2xbX109bn19fWhbZ109dGhpcy5xdWVyeSh5LFwiYmFyTWluSGVpZ2h0XCIpLGE9bnVsbCE9YT9hOnRoaXMucXVlcnkoeSxcImJhckdhcFwiKSxvPW51bGwhPW8/bzp0aGlzLnF1ZXJ5KHksXCJiYXJDYXRlZ29yeUdhcFwiKX1yZXR1cm57YmFyV2lkdGhNYXA6cyxiYXJNYXhXaWR0aE1hcDpsLGJhck1pbkhlaWdodE1hcDpoLHNCYXJXaWR0aDppLHNCYXJNYXhXaWR0aDpuLHNCYXJXaWR0aENvdW50ZXI6ZCxzQmFyV2lkdGhUb3RhbDptLGJhckdhcDphLGJhckNhdGVnb3J5R2FwOm99fSxfcmVjaGVja0Jhck1heFdpZHRoOmZ1bmN0aW9uKGUsdCxpLG4sYSxvLHIscyl7Zm9yKHZhciBsPTAsaD1lLmxlbmd0aDtoPmw7bCsrKXt2YXIgZD1lW2xdWzBdO2lbZF0mJmlbZF08byYmKGEtPW8taVtkXSl9cmV0dXJue2JhcldpZHRoTWFwOnQsYmFyTWF4V2lkdGhNYXA6aSxiYXJNaW5IZWlnaHRNYXA6bixnYXA6YSxiYXJXaWR0aDpvLGJhckdhcDpyLGludGVydmFsOnN9fSxfZ2V0QmFySXRlbTpmdW5jdGlvbihlLHQsaSxuLGEscixsLGgpe3ZhciBkLG09dGhpcy5zZXJpZXMsYz1tW2VdLHA9Yy5kYXRhW3RdLHU9dGhpcy5fc0luZGV4MkNvbG9yTWFwW2VdLFY9W3AsY10sVT10aGlzLmRlZXBNZXJnZShWLFwiaXRlbVN0eWxlLm5vcm1hbFwiKSxnPXRoaXMuZGVlcE1lcmdlKFYsXCJpdGVtU3R5bGUuZW1waGFzaXNcIikseT1VLmJhckJvcmRlcldpZHRoO2Q9e3psZXZlbDp0aGlzLmdldFpsZXZlbEJhc2UoKSx6OnRoaXMuZ2V0WkJhc2UoKSxjbGlja2FibGU6dGhpcy5kZWVwUXVlcnkoVixcImNsaWNrYWJsZVwiKSxzdHlsZTp7eDpuLHk6YSx3aWR0aDpyLGhlaWdodDpsLGJydXNoVHlwZTpcImJvdGhcIixjb2xvcjp0aGlzLmdldEl0ZW1TdHlsZUNvbG9yKHRoaXMuZGVlcFF1ZXJ5KFYsXCJpdGVtU3R5bGUubm9ybWFsLmNvbG9yXCIpfHx1LGUsdCxwKSxyYWRpdXM6VS5iYXJCb3JkZXJSYWRpdXMsbGluZVdpZHRoOnksc3Ryb2tlQ29sb3I6VS5iYXJCb3JkZXJDb2xvcn0saGlnaGxpZ2h0U3R5bGU6e2NvbG9yOnRoaXMuZ2V0SXRlbVN0eWxlQ29sb3IodGhpcy5kZWVwUXVlcnkoVixcIml0ZW1TdHlsZS5lbXBoYXNpcy5jb2xvclwiKSxlLHQscCkscmFkaXVzOmcuYmFyQm9yZGVyUmFkaXVzLGxpbmVXaWR0aDpnLmJhckJvcmRlcldpZHRoLHN0cm9rZUNvbG9yOmcuYmFyQm9yZGVyQ29sb3J9LF9vcmllbnQ6aH07dmFyIGY9ZC5zdHlsZTtkLmhpZ2hsaWdodFN0eWxlLmNvbG9yPWQuaGlnaGxpZ2h0U3R5bGUuY29sb3J8fChcInN0cmluZ1wiPT10eXBlb2YgZi5jb2xvcj9zLmxpZnQoZi5jb2xvciwtLjMpOmYuY29sb3IpLGYueD1NYXRoLmZsb29yKGYueCksZi55PU1hdGguZmxvb3IoZi55KSxmLmhlaWdodD1NYXRoLmNlaWwoZi5oZWlnaHQpLGYud2lkdGg9TWF0aC5jZWlsKGYud2lkdGgpLHk+MCYmZi5oZWlnaHQ+eSYmZi53aWR0aD55PyhmLnkrPXkvMixmLmhlaWdodC09eSxmLngrPXkvMixmLndpZHRoLT15KTpmLmJydXNoVHlwZT1cImZpbGxcIixkLmhpZ2hsaWdodFN0eWxlLnRleHRDb2xvcj1kLmhpZ2hsaWdodFN0eWxlLmNvbG9yLGQ9dGhpcy5hZGRMYWJlbChkLGMscCxpLGgpO3ZhciBiPWYudGV4dFBvc2l0aW9uO2lmKFwiaW5zaWRlTGVmdFwiPT09Ynx8XCJpbnNpZGVSaWdodFwiPT09Ynx8XCJpbnNpZGVUb3BcIj09PWJ8fFwiaW5zaWRlQm90dG9tXCI9PT1iKXt2YXIgXz01O3N3aXRjaChiKXtjYXNlXCJpbnNpZGVMZWZ0XCI6Zi50ZXh0WD1mLngrXyxmLnRleHRZPWYueStmLmhlaWdodC8yLGYudGV4dEFsaWduPVwibGVmdFwiLGYudGV4dEJhc2VsaW5lPVwibWlkZGxlXCI7YnJlYWs7Y2FzZVwiaW5zaWRlUmlnaHRcIjpmLnRleHRYPWYueCtmLndpZHRoLV8sZi50ZXh0WT1mLnkrZi5oZWlnaHQvMixmLnRleHRBbGlnbj1cInJpZ2h0XCIsZi50ZXh0QmFzZWxpbmU9XCJtaWRkbGVcIjticmVhaztjYXNlXCJpbnNpZGVUb3BcIjpmLnRleHRYPWYueCtmLndpZHRoLzIsZi50ZXh0WT1mLnkrXy8yLGYudGV4dEFsaWduPVwiY2VudGVyXCIsZi50ZXh0QmFzZWxpbmU9XCJ0b3BcIjticmVhaztjYXNlXCJpbnNpZGVCb3R0b21cIjpmLnRleHRYPWYueCtmLndpZHRoLzIsZi50ZXh0WT1mLnkrZi5oZWlnaHQtXy8yLGYudGV4dEFsaWduPVwiY2VudGVyXCIsZi50ZXh0QmFzZWxpbmU9XCJib3R0b21cIn1mLnRleHRQb3NpdGlvbj1cInNwZWNpZmljXCIsZi50ZXh0Q29sb3I9Zi50ZXh0Q29sb3J8fFwiI2ZmZlwifXJldHVybiB0aGlzLmRlZXBRdWVyeShbcCxjLHRoaXMub3B0aW9uXSxcImNhbGN1bGFibGVcIikmJih0aGlzLnNldENhbGN1bGFibGUoZCksZC5kcmFnZ2FibGU9ITApLG8ucGFjayhkLG1bZV0sZSxtW2VdLmRhdGFbdF0sdCxpKSxkfSxnZXRNYXJrQ29vcmQ6ZnVuY3Rpb24oZSx0KXt2YXIgaSxuLGE9dGhpcy5zZXJpZXNbZV0sbz10aGlzLnhNYXJrTWFwW2VdLHI9dGhpcy5jb21wb25lbnQueEF4aXMuZ2V0QXhpcyhhLnhBeGlzSW5kZXgpLHM9dGhpcy5jb21wb25lbnQueUF4aXMuZ2V0QXhpcyhhLnlBeGlzSW5kZXgpO2lmKCF0LnR5cGV8fFwibWF4XCIhPT10LnR5cGUmJlwibWluXCIhPT10LnR5cGUmJlwiYXZlcmFnZVwiIT09dC50eXBlKWlmKG8uaXNIb3Jpem9udGFsKXtpPVwic3RyaW5nXCI9PXR5cGVvZiB0LnhBeGlzJiZyLmdldEluZGV4QnlOYW1lP3IuZ2V0SW5kZXhCeU5hbWUodC54QXhpcyk6dC54QXhpc3x8MDt2YXIgbD1vW2ldO2w9bnVsbCE9bD9sOlwic3RyaW5nXCIhPXR5cGVvZiB0LnhBeGlzJiZyLmdldENvb3JkQnlJbmRleD9yLmdldENvb3JkQnlJbmRleCh0LnhBeGlzfHwwKTpyLmdldENvb3JkKHQueEF4aXN8fDApLG49W2wscy5nZXRDb29yZCh0LnlBeGlzfHwwKV19ZWxzZXtpPVwic3RyaW5nXCI9PXR5cGVvZiB0LnlBeGlzJiZzLmdldEluZGV4QnlOYW1lP3MuZ2V0SW5kZXhCeU5hbWUodC55QXhpcyk6dC55QXhpc3x8MDt2YXIgaD1vW2ldO2g9bnVsbCE9aD9oOlwic3RyaW5nXCIhPXR5cGVvZiB0LnlBeGlzJiZzLmdldENvb3JkQnlJbmRleD9zLmdldENvb3JkQnlJbmRleCh0LnlBeGlzfHwwKTpzLmdldENvb3JkKHQueUF4aXN8fDApLG49W3IuZ2V0Q29vcmQodC54QXhpc3x8MCksaF19ZWxzZXt2YXIgZD1udWxsIT10LnZhbHVlSW5kZXg/dC52YWx1ZUluZGV4Om51bGwhPW8ubWF4WDA/XCIxXCI6XCJcIjtuPVtvW3QudHlwZStcIlhcIitkXSxvW3QudHlwZStcIllcIitkXSxvW3QudHlwZStcIkxpbmVcIitkXSxvW3QudHlwZStkXV19cmV0dXJuIG59LHJlZnJlc2g6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMub3B0aW9uPWUsdGhpcy5zZXJpZXM9ZS5zZXJpZXMpLHRoaXMuYmFja3VwU2hhcGVMaXN0KCksdGhpcy5fYnVpbGRTaGFwZSgpfSxhZGREYXRhQW5pbWF0aW9uOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnNlcmllcyxpPXt9LG49MCxhPWUubGVuZ3RoO2E+bjtuKyspaVtlW25dWzBdXT1lW25dO2Zvcih2YXIgcixzLGwsaCxkLG0sYyxuPXRoaXMuc2hhcGVMaXN0Lmxlbmd0aC0xO24+PTA7bi0tKWlmKG09by5nZXQodGhpcy5zaGFwZUxpc3Rbbl0sXCJzZXJpZXNJbmRleFwiKSxpW21dJiYhaVttXVszXSYmXCJyZWN0YW5nbGVcIj09PXRoaXMuc2hhcGVMaXN0W25dLnR5cGUpe2lmKGM9by5nZXQodGhpcy5zaGFwZUxpc3Rbbl0sXCJkYXRhSW5kZXhcIiksZD10W21dLGlbbV1bMl0mJmM9PT1kLmRhdGEubGVuZ3RoLTEpe3RoaXMuenIuZGVsU2hhcGUodGhpcy5zaGFwZUxpc3Rbbl0uaWQpO2NvbnRpbnVlfWlmKCFpW21dWzJdJiYwPT09Yyl7dGhpcy56ci5kZWxTaGFwZSh0aGlzLnNoYXBlTGlzdFtuXS5pZCk7Y29udGludWV9XCJob3Jpem9udGFsXCI9PT10aGlzLnNoYXBlTGlzdFtuXS5fb3JpZW50PyhoPXRoaXMuY29tcG9uZW50LnlBeGlzLmdldEF4aXMoZC55QXhpc0luZGV4fHwwKS5nZXRHYXAoKSxsPWlbbV1bMl0/LWg6aCxyPTApOihzPXRoaXMuY29tcG9uZW50LnhBeGlzLmdldEF4aXMoZC54QXhpc0luZGV4fHwwKS5nZXRHYXAoKSxyPWlbbV1bMl0/czotcyxsPTApLHRoaXMuc2hhcGVMaXN0W25dLnBvc2l0aW9uPVswLDBdLHRoaXMuenIuYW5pbWF0ZSh0aGlzLnNoYXBlTGlzdFtuXS5pZCxcIlwiKS53aGVuKHRoaXMucXVlcnkodGhpcy5vcHRpb24sXCJhbmltYXRpb25EdXJhdGlvblVwZGF0ZVwiKSx7cG9zaXRpb246W3IsbF19KS5zdGFydCgpfX19LHIuaW5oZXJpdHModCxpKSxlKFwiLi4vY2hhcnRcIikuZGVmaW5lKFwiYmFyXCIsdCksdH0pOyJdLCJmaWxlIjoicGx1Z2lucy9lY2hhcnRzL2NoYXJ0L2Jhci5qcyJ9
