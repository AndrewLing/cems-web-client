define("echarts/chart/force",["require","./base","../data/Graph","../layout/Force","zrender/shape/Line","zrender/shape/BezierCurve","zrender/shape/Image","../util/shape/Icon","../config","../util/ecData","zrender/tool/util","zrender/config","zrender/tool/vector","../chart"],function(e){"use strict";function t(e,t,o,h,d){var c=this;s.call(this,e,t,o,h,d),this.__nodePositionMap={},this._graph=new r(!0),this._layout=new l,this._layout.onupdate=function(){c._step()},this._steps=1,this.ondragstart=function(){i.apply(c,arguments)},this.ondragend=function(){a.apply(c,arguments)},this.ondrop=function(){},this.shapeHandler.ondragstart=function(){c.isDragstart=!0},this.onmousemove=function(){n.apply(c,arguments)},this.refresh(h)}function i(e){if(this.isDragstart&&e.target){var t=e.target;t.fixed=!0,this.isDragstart=!1,this.zr.on(V.EVENT.MOUSEMOVE,this.onmousemove)}}function n(){this._layout.temperature=.8,this._step()}function a(e,t){if(this.isDragend&&e.target){var i=e.target;i.fixed=!1,t.dragIn=!0,t.needRefresh=!1,this.isDragend=!1,this.zr.un(V.EVENT.MOUSEMOVE,this.onmousemove)}}function o(e,t,i){var n=y.create();return n[0]=(Math.random()-.5)*i+e,n[1]=(Math.random()-.5)*i+t,n}var s=e("./base"),r=e("../data/Graph"),l=e("../layout/Force"),h=e("zrender/shape/Line"),d=e("zrender/shape/BezierCurve"),c=e("zrender/shape/Image"),p=e("../util/shape/Icon"),m=e("../config");m.force={zlevel:1,z:2,center:["50%","50%"],size:"100%",preventOverlap:!1,coolDown:.99,minRadius:10,maxRadius:20,ratioScaling:!1,large:!1,useWorker:!1,steps:1,scaling:1,gravity:1,symbol:"circle",symbolSize:0,linkSymbol:null,linkSymbolSize:[10,15],draggable:!0,clickable:!0,roam:!1,itemStyle:{normal:{label:{show:!1,position:"inside"},nodeStyle:{brushType:"both",borderColor:"#5182ab",borderWidth:1},linkStyle:{color:"#5182ab",width:1,type:"line"}},emphasis:{label:{show:!1},nodeStyle:{},linkStyle:{opacity:0}}}};var u=e("../util/ecData"),g=e("zrender/tool/util"),V=e("zrender/config"),y=e("zrender/tool/vector");return t.prototype={constructor:t,type:m.CHART_TYPE_FORCE,_init:function(){var e,t=this.component.legend,i=this.series;this.clear();for(var n=0,a=i.length;a>n;n++){var o=i[n];if(o.type===m.CHART_TYPE_FORCE){if(i[n]=this.reformOption(i[n]),e=i[n].name||"",this.selectedMap[e]=t?t.isSelected(e):!0,!this.selectedMap[e])continue;this.buildMark(n),this._initSerie(o,n);break}}this.animationEffect()},_getNodeCategory:function(e,t){return e.categories&&e.categories[t.category||0]},_getNodeQueryTarget:function(e,t,i){i=i||"normal";var n=this._getNodeCategory(e,t)||{};return[t.itemStyle&&t.itemStyle[i],n&&n.itemStyle&&n.itemStyle[i],e.itemStyle[i].nodeStyle]},_getEdgeQueryTarget:function(e,t,i){return i=i||"normal",[t.itemStyle&&t.itemStyle[i],e.itemStyle[i].linkStyle]},_initSerie:function(e,t){this._temperature=1,this._graph=e.data?this._getSerieGraphFromDataMatrix(e):this._getSerieGraphFromNodeLinks(e),this._buildLinkShapes(e,t),this._buildNodeShapes(e,t);var i=e.roam===!0||"move"===e.roam,n=e.roam===!0||"scale"===e.roam;this.zr.modLayer(this.getZlevelBase(),{panable:i,zoomable:n}),(this.query("markPoint.effect.show")||this.query("markLine.effect.show"))&&this.zr.modLayer(m.EFFECT_ZLEVEL,{panable:i,zoomable:n}),this._initLayout(e),this._step()},_getSerieGraphFromDataMatrix:function(e){for(var t=[],i=0,n=[],a=0;a<e.matrix.length;a++)n[a]=e.matrix[a].slice();for(var o=e.data||e.nodes,a=0;a<o.length;a++){var s={},l=o[a];for(var h in l)"name"===h?s.id=l.name:s[h]=l[h];var d=this._getNodeCategory(e,l),c=d?d.name:l.name;if(this.selectedMap[c]=this.isSelected(c),this.selectedMap[c])t.push(s),i++;else{n.splice(i,1);for(var p=0;p<n.length;p++)n[p].splice(i,1)}}var m=r.fromMatrix(t,n,!0);return m.eachNode(function(e,t){e.layout={size:e.data.value,mass:0},e.rawIndex=t}),m.eachEdge(function(e){e.layout={weight:e.data.weight}}),m},_getSerieGraphFromNodeLinks:function(e){for(var t=new r(!0),i=e.data||e.nodes,n=0,a=i.length;a>n;n++){var o=i[n];if(o&&!o.ignore){var s=this._getNodeCategory(e,o),l=s?s.name:o.name;if(this.selectedMap[l]=this.isSelected(l),this.selectedMap[l]){var h=t.addNode(o.name,o);h.rawIndex=n}}}for(var n=0,a=e.links.length;a>n;n++){var d=e.links[n],c=d.source,p=d.target;"number"==typeof c&&(c=i[c],c&&(c=c.name)),"number"==typeof p&&(p=i[p],p&&(p=p.name));var m=t.addEdge(c,p,d);m&&(m.rawIndex=n)}return t.eachNode(function(e){var t=e.data.value;if(null==t){t=0;for(var i=0;i<e.edges.length;i++)t+=e.edges[i].data.weight||0}e.layout={size:t,mass:0}}),t.eachEdge(function(e){e.layout={weight:null==e.data.weight?1:e.data.weight}}),t},_initLayout:function(e){var t=this._graph,i=t.nodes.length,n=this.query(e,"minRadius"),a=this.query(e,"maxRadius");this._steps=e.steps||1,this._layout.center=this.parseCenter(this.zr,e.center),this._layout.width=this.parsePercent(e.size,this.zr.getWidth()),this._layout.height=this.parsePercent(e.size,this.zr.getHeight()),this._layout.large=e.large,this._layout.scaling=e.scaling,this._layout.ratioScaling=e.ratioScaling,this._layout.gravity=e.gravity,this._layout.temperature=1,this._layout.coolDown=e.coolDown,this._layout.preventNodeEdgeOverlap=e.preventOverlap,this._layout.preventNodeOverlap=e.preventOverlap;for(var s=1/0,r=-1/0,l=0;i>l;l++){var h=t.nodes[l];r=Math.max(h.layout.size,r),s=Math.min(h.layout.size,s)}for(var d=r-s,l=0;i>l;l++){var h=t.nodes[l];d>0?(h.layout.size=(h.layout.size-s)*(a-n)/d+n,h.layout.mass=h.layout.size/a):(h.layout.size=(a-n)/2,h.layout.mass=.5)}for(var l=0;i>l;l++){var h=t.nodes[l];if("undefined"!=typeof this.__nodePositionMap[h.id])h.layout.position=y.create(),y.copy(h.layout.position,this.__nodePositionMap[h.id]);else if("undefined"!=typeof h.data.initial)h.layout.position=y.create(),y.copy(h.layout.position,h.data.initial);else{var c=this._layout.center,p=Math.min(this._layout.width,this._layout.height);h.layout.position=o(c[0],c[1],.8*p)}var m=h.shape.style,u=h.layout.size;m.width=m.width||2*u,m.height=m.height||2*u,m.x=-m.width/2,m.y=-m.height/2,y.copy(h.shape.position,h.layout.position)}i=t.edges.length,r=-1/0;for(var l=0;i>l;l++){var g=t.edges[l];g.layout.weight>r&&(r=g.layout.weight)}for(var l=0;i>l;l++){var g=t.edges[l];g.layout.weight/=r}this._layout.init(t,e.useWorker)},_buildNodeShapes:function(e,t){var i=this._graph,n=this.query(e,"categories");i.eachNode(function(i){var a=this._getNodeCategory(e,i.data),o=[i.data,a,e],s=this._getNodeQueryTarget(e,i.data),r=this._getNodeQueryTarget(e,i.data,"emphasis"),l=new p({style:{x:0,y:0,color:this.deepQuery(s,"color"),brushType:"both",strokeColor:this.deepQuery(s,"strokeColor")||this.deepQuery(s,"borderColor"),lineWidth:this.deepQuery(s,"lineWidth")||this.deepQuery(s,"borderWidth")},highlightStyle:{color:this.deepQuery(r,"color"),strokeColor:this.deepQuery(r,"strokeColor")||this.deepQuery(r,"borderColor"),lineWidth:this.deepQuery(r,"lineWidth")||this.deepQuery(r,"borderWidth")},clickable:e.clickable,zlevel:this.getZlevelBase(),z:this.getZBase()});l.style.color||(l.style.color=this.getColor(a?a.name:i.id)),l.style.iconType=this.deepQuery(o,"symbol"),l.style.width=l.style.height=2*(this.deepQuery(o,"symbolSize")||0),l.style.iconType.match("image")&&(l.style.image=l.style.iconType.replace(new RegExp("^image:\\/\\/"),""),l=new c({style:l.style,highlightStyle:l.highlightStyle,clickable:l.clickable,zlevel:this.getZlevelBase(),z:this.getZBase()})),this.deepQuery(o,"itemStyle.normal.label.show")&&(l.style.text=null==i.data.label?i.id:i.data.label,l.style.textPosition=this.deepQuery(o,"itemStyle.normal.label.position"),l.style.textColor=this.deepQuery(o,"itemStyle.normal.label.textStyle.color"),l.style.textFont=this.getFont(this.deepQuery(o,"itemStyle.normal.label.textStyle")||{})),this.deepQuery(o,"itemStyle.emphasis.label.show")&&(l.highlightStyle.textPosition=this.deepQuery(o,"itemStyle.emphasis.label.position"),l.highlightStyle.textColor=this.deepQuery(o,"itemStyle.emphasis.label.textStyle.color"),l.highlightStyle.textFont=this.getFont(this.deepQuery(o,"itemStyle.emphasis.label.textStyle")||{})),this.deepQuery(o,"draggable")&&(this.setCalculable(l),l.dragEnableTime=0,l.draggable=!0,l.ondragstart=this.shapeHandler.ondragstart,l.ondragover=null);var h="";if("undefined"!=typeof i.category){var a=n[i.category];h=a&&a.name||""}u.pack(l,e,t,i.data,i.rawIndex,i.data.name||"",i.category),this.shapeList.push(l),this.zr.addShape(l),i.shape=l},this)},_buildLinkShapes:function(e,t){for(var i=this._graph,n=i.edges.length,a=0;n>a;a++){var o=i.edges[a],s=o.data,r=o.node1,l=o.node2,c=this._getEdgeQueryTarget(e,s),m=this.deepQuery(c,"type");e.linkSymbol&&"none"!==e.linkSymbol&&(m="line");var V="line"===m?h:d,y=new V({style:{xStart:0,yStart:0,xEnd:0,yEnd:0},clickable:this.query(e,"clickable"),highlightStyle:{},zlevel:this.getZlevelBase(),z:this.getZBase()});if(g.merge(y.style,this.query(e,"itemStyle.normal.linkStyle"),!0),g.merge(y.highlightStyle,this.query(e,"itemStyle.emphasis.linkStyle"),!0),"undefined"!=typeof s.itemStyle&&(s.itemStyle.normal&&g.merge(y.style,s.itemStyle.normal,!0),s.itemStyle.emphasis&&g.merge(y.highlightStyle,s.itemStyle.emphasis,!0)),y.style.lineWidth=y.style.lineWidth||y.style.width,y.style.strokeColor=y.style.strokeColor||y.style.color,y.highlightStyle.lineWidth=y.highlightStyle.lineWidth||y.highlightStyle.width,y.highlightStyle.strokeColor=y.highlightStyle.strokeColor||y.highlightStyle.color,u.pack(y,e,t,o.data,null==o.rawIndex?a:o.rawIndex,o.data.name||r.id+" - "+l.id,r.id,l.id),this.shapeList.push(y),this.zr.addShape(y),o.shape=y,e.linkSymbol&&"none"!==e.linkSymbol){var U=new p({style:{x:-5,y:0,width:e.linkSymbolSize[0],height:e.linkSymbolSize[1],iconType:e.linkSymbol,brushType:"fill",color:y.style.strokeColor},highlightStyle:{brushType:"fill"},position:[0,0],rotation:0});y._symbolShape=U,this.shapeList.push(U),this.zr.addShape(U)}}},_updateLinkShapes:function(){for(var e=y.create(),t=this._graph.edges,i=0,n=t.length;n>i;i++){var a=t[i],o=a.node1.shape,s=a.node2.shape,r=o.position,l=s.position;if(a.shape.style.xStart=r[0],a.shape.style.yStart=r[1],a.shape.style.xEnd=l[0],a.shape.style.yEnd=l[1],"bezier-curve"===a.shape.type&&(a.shape.style.cpX1=(r[0]+l[0])/2-(l[1]-r[1])/4,a.shape.style.cpY1=(r[1]+l[1])/2-(r[0]-l[0])/4),a.shape.modSelf(),a.shape._symbolShape){var h=a.shape._symbolShape;y.copy(h.position,s.position),y.sub(e,o.position,s.position),y.normalize(e,e),y.scaleAndAdd(h.position,h.position,e,s.style.width/2+2);var d=Math.atan2(e[1],e[0]);h.rotation=Math.PI/2-d,h.modSelf()}}},_syncNodePositions:function(){for(var e=this._graph,t=0;t<e.nodes.length;t++){var i=e.nodes[t],n=i.layout.position,a=i.data,o=i.shape,s=o.fixed||a.fixX,r=o.fixed||a.fixY;s===!0?s=1:isNaN(s)&&(s=0),r===!0?r=1:isNaN(r)&&(r=0),o.position[0]+=(n[0]-o.position[0])*(1-s),o.position[1]+=(n[1]-o.position[1])*(1-r),y.copy(n,o.position);var l=a.name;if(l){var h=this.__nodePositionMap[l];h||(h=this.__nodePositionMap[l]=y.create()),y.copy(h,n)}o.modSelf()}},_step:function(){this._syncNodePositions(),this._updateLinkShapes(),this.zr.refreshNextFrame(),this._layout.temperature>.01?this._layout.step(this._steps):this.messageCenter.dispatch(m.EVENT.FORCE_LAYOUT_END,{},{},this.myChart)},refresh:function(e){if(e&&(this.option=e,this.series=this.option.series),this.legend=this.component.legend,this.legend)this.getColor=function(e){return this.legend.getColor(e)},this.isSelected=function(e){return this.legend.isSelected(e)};else{var t={},i=0;this.getColor=function(e){return t[e]?t[e]:(t[e]||(t[e]=this.zr.getColor(i++)),t[e])},this.isSelected=function(){return!0}}this._init()},dispose:function(){this.clear(),this.shapeList=null,this.effectList=null,this._layout.dispose(),this._layout=null,this.__nodePositionMap={}},getPosition:function(){var e=[];return this._graph.eachNode(function(t){t.layout&&e.push({name:t.data.name,position:Array.prototype.slice.call(t.layout.position)})}),e}},g.inherits(t,s),e("../chart").define("force",t),t}),define("echarts/data/Graph",["require","zrender/tool/util"],function(e){var t=e("zrender/tool/util"),i=function(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}};i.prototype.isDirected=function(){return this._directed},i.prototype.addNode=function(e,t){if(this._nodesMap[e])return this._nodesMap[e];var n=new i.Node(e,t);return this.nodes.push(n),this._nodesMap[e]=n,n},i.prototype.getNodeById=function(e){return this._nodesMap[e]},i.prototype.addEdge=function(e,t,n){if("string"==typeof e&&(e=this._nodesMap[e]),"string"==typeof t&&(t=this._nodesMap[t]),e&&t){var a=e.id+"-"+t.id;if(this._edgesMap[a])return this._edgesMap[a];var o=new i.Edge(e,t,n);return this._directed&&(e.outEdges.push(o),t.inEdges.push(o)),e.edges.push(o),e!==t&&t.edges.push(o),this.edges.push(o),this._edgesMap[a]=o,o}},i.prototype.removeEdge=function(e){var i=e.node1,n=e.node2,a=i.id+"-"+n.id;this._directed&&(i.outEdges.splice(t.indexOf(i.outEdges,e),1),n.inEdges.splice(t.indexOf(n.inEdges,e),1)),i.edges.splice(t.indexOf(i.edges,e),1),i!==n&&n.edges.splice(t.indexOf(n.edges,e),1),delete this._edgesMap[a],this.edges.splice(t.indexOf(this.edges,e),1)},i.prototype.getEdge=function(e,t){return"string"!=typeof e&&(e=e.id),"string"!=typeof t&&(t=t.id),this._directed?this._edgesMap[e+"-"+t]:this._edgesMap[e+"-"+t]||this._edgesMap[t+"-"+e]},i.prototype.removeNode=function(e){if("string"!=typeof e||(e=this._nodesMap[e])){delete this._nodesMap[e.id],this.nodes.splice(t.indexOf(this.nodes,e),1);for(var i=0;i<this.edges.length;){var n=this.edges[i];n.node1===e||n.node2===e?this.removeEdge(n):i++}}},i.prototype.filterNode=function(e,t){for(var i=this.nodes.length,n=0;i>n;)e.call(t,this.nodes[n],n)?n++:(this.removeNode(this.nodes[n]),i--)},i.prototype.filterEdge=function(e,t){for(var i=this.edges.length,n=0;i>n;)e.call(t,this.edges[n],n)?n++:(this.removeEdge(this.edges[n]),i--)},i.prototype.eachNode=function(e,t){for(var i=this.nodes.length,n=0;i>n;n++)this.nodes[n]&&e.call(t,this.nodes[n],n)},i.prototype.eachEdge=function(e,t){for(var i=this.edges.length,n=0;i>n;n++)this.edges[n]&&e.call(t,this.edges[n],n)},i.prototype.clear=function(){this.nodes.length=0,this.edges.length=0,this._nodesMap={},this._edgesMap={}},i.prototype.breadthFirstTraverse=function(e,t,i,n){if("string"==typeof t&&(t=this._nodesMap[t]),t){var a="edges";"out"===i?a="outEdges":"in"===i&&(a="inEdges");for(var o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(n,t,null))for(var s=[t];s.length;)for(var r=s.shift(),l=r[a],o=0;o<l.length;o++){var h=l[o],d=h.node1===r?h.node2:h.node1;if(!d.__visited){if(e.call(d,d,r))return;s.push(d),d.__visited=!0}}}},i.prototype.clone=function(){for(var e=new i(this._directed),t=0;t<this.nodes.length;t++)e.addNode(this.nodes[t].id,this.nodes[t].data);for(var t=0;t<this.edges.length;t++){var n=this.edges[t];e.addEdge(n.node1.id,n.node2.id,n.data)}return e};var n=function(e,t){this.id=e,this.data=t||null,this.inEdges=[],this.outEdges=[],this.edges=[]};n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length};var a=function(e,t,i){this.node1=e,this.node2=t,this.data=i||null};return i.Node=n,i.Edge=a,i.fromMatrix=function(e,t,n){if(t&&t.length&&t[0].length===t.length&&e.length===t.length){for(var a=t.length,o=new i(n),s=0;a>s;s++){var r=o.addNode(e[s].id,e[s]);r.data.value=0,n&&(r.data.outValue=r.data.inValue=0)}for(var s=0;a>s;s++)for(var l=0;a>l;l++){var h=t[s][l];n&&(o.nodes[s].data.outValue+=h,o.nodes[l].data.inValue+=h),o.nodes[s].data.value+=h,o.nodes[l].data.value+=h}for(var s=0;a>s;s++)for(var l=s;a>l;l++){var h=t[s][l];if(0!==h){var d=o.nodes[s],c=o.nodes[l],p=o.addEdge(d,c,{});if(p.data.weight=h,s!==l&&n&&t[l][s]){var m=o.addEdge(c,d,{});m.data.weight=t[l][s]}}}return o}},i}),define("echarts/layout/Force",["require","./forceLayoutWorker","zrender/tool/vector"],function(e){function t(){if("undefined"!=typeof Worker&&"undefined"!=typeof Blob)try{var e=new Blob([n.getWorkerCode()]);i=window.URL.createObjectURL(e)}catch(t){i=""}return i}var i,n=e("./forceLayoutWorker"),a=e("zrender/tool/vector"),o=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},s="undefined"==typeof Float32Array?Array:Float32Array,r=function(e){"undefined"==typeof i&&t(),e=e||{},this.width=e.width||500,this.height=e.height||500,this.center=e.center||[this.width/2,this.height/2],this.ratioScaling=e.ratioScaling||!1,this.scaling=e.scaling||1,this.gravity="undefined"!=typeof e.gravity?e.gravity:1,this.large=e.large||!1,this.preventNodeOverlap=e.preventNodeOverlap||!1,this.preventNodeEdgeOverlap=e.preventNodeEdgeOverlap||!1,this.maxSpeedIncrease=e.maxSpeedIncrease||1,this.onupdate=e.onupdate||function(){},this.temperature=e.temperature||1,this.coolDown=e.coolDown||.99,this._layout=null,this._layoutWorker=null;var n=this,a=this._$onupdate;this._$onupdate=function(e){a.call(n,e)}};return r.prototype.updateConfig=function(){var e=this.width,t=this.height,i=Math.min(e,t),n={center:this.center,width:this.ratioScaling?e:i,height:this.ratioScaling?t:i,scaling:this.scaling||1,gravity:this.gravity||1,barnesHutOptimize:this.large,preventNodeOverlap:this.preventNodeOverlap,preventNodeEdgeOverlap:this.preventNodeEdgeOverlap,maxSpeedIncrease:this.maxSpeedIncrease};if(this._layoutWorker)this._layoutWorker.postMessage({cmd:"updateConfig",config:n});else for(var a in n)this._layout[a]=n[a]},r.prototype.init=function(e,t){if(i&&t)try{this._layoutWorker||(this._layoutWorker=new Worker(i),this._layoutWorker.onmessage=this._$onupdate),this._layout=null}catch(a){this._layoutWorker=null,this._layout||(this._layout=new n)}else this._layout||(this._layout=new n),this._layoutWorker&&(this._layoutWorker.terminate(),this._layoutWorker=null);this.temperature=1,this.graph=e;for(var o=e.nodes.length,r=new s(2*o),l=new s(o),h=new s(o),d=0;o>d;d++){var c=e.nodes[d];r[2*d]=c.layout.position[0],r[2*d+1]=c.layout.position[1],l[d]="undefined"==typeof c.layout.mass?1:c.layout.mass,h[d]="undefined"==typeof c.layout.size?1:c.layout.size,c.layout.__index=d}o=e.edges.length;for(var p=new s(2*o),m=new s(o),d=0;o>d;d++){var u=e.edges[d];p[2*d]=u.node1.layout.__index,p[2*d+1]=u.node2.layout.__index,m[d]=u.layout.weight||1}this._layoutWorker?this._layoutWorker.postMessage({cmd:"init",nodesPosition:r,nodesMass:l,nodesSize:h,edges:p,edgesWeight:m}):(this._layout.initNodes(r,l,h),this._layout.initEdges(p,m)),this.updateConfig()},r.prototype.step=function(e){var t=this.graph.nodes;if(this._layoutWorker){for(var i=new s(2*t.length),n=0;n<t.length;n++){var r=t[n];i[2*n]=r.layout.position[0],i[2*n+1]=r.layout.position[1]}this._layoutWorker.postMessage(i.buffer,[i.buffer]),this._layoutWorker.postMessage({cmd:"update",steps:e,temperature:this.temperature,coolDown:this.coolDown});for(var n=0;e>n;n++)this.temperature*=this.coolDown}else{o(this._$onupdate);for(var n=0;n<t.length;n++){var r=t[n];a.copy(this._layout.nodes[n].position,r.layout.position)}for(var n=0;e>n;n++)this._layout.temperature=this.temperature,this._layout.update(),this.temperature*=this.coolDown}},r.prototype._$onupdate=function(e){if(this._layoutWorker){for(var t=new Float32Array(e.data),i=0;i<this.graph.nodes.length;i++){var n=this.graph.nodes[i];n.layout.position[0]=t[2*i],n.layout.position[1]=t[2*i+1]}this.onupdate&&this.onupdate()}else if(this._layout){for(var i=0;i<this.graph.nodes.length;i++){var n=this.graph.nodes[i];a.copy(n.layout.position,this._layout.nodes[i].position)}this.onupdate&&this.onupdate()}},r.prototype.dispose=function(){this._layoutWorker&&this._layoutWorker.terminate(),this._layoutWorker=null,this._layout=null},r}),define("zrender/shape/BezierCurve",["require","./Base","../tool/util"],function(e){"use strict";var t=e("./Base"),i=function(e){this.brushTypeOnly="stroke",this.textPosition="end",t.call(this,e)};return i.prototype={type:"bezier-curve",buildPath:function(e,t){e.moveTo(t.xStart,t.yStart),"undefined"!=typeof t.cpX2&&"undefined"!=typeof t.cpY2?e.bezierCurveTo(t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd):e.quadraticCurveTo(t.cpX1,t.cpY1,t.xEnd,t.yEnd)},getRect:function(e){if(e.__rect)return e.__rect;var t=Math.min(e.xStart,e.xEnd,e.cpX1),i=Math.min(e.yStart,e.yEnd,e.cpY1),n=Math.max(e.xStart,e.xEnd,e.cpX1),a=Math.max(e.yStart,e.yEnd,e.cpY1),o=e.cpX2,s=e.cpY2;"undefined"!=typeof o&&"undefined"!=typeof s&&(t=Math.min(t,o),i=Math.min(i,s),n=Math.max(n,o),a=Math.max(a,s));var r=e.lineWidth||1;return e.__rect={x:t-r,y:i-r,width:n-t+r,height:a-i+r},e.__rect}},e("../tool/util").inherits(i,t),i}),define("echarts/layout/forceLayoutWorker",["require","zrender/tool/vector"],function e(t){"use strict";function i(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new l(4),this.size=0}function n(){this.position=s.create(),this.force=s.create(),this.forcePrev=s.create(),this.speed=s.create(),this.speedPrev=s.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function a(e,t){this.node1=e,this.node2=t,this.weight=1}function o(){this.barnesHutOptimize=!1,this.barnesHutTheta=1.5,this.repulsionByDegree=!1,this.preventNodeOverlap=!1,this.preventNodeEdgeOverlap=!1,this.strongGravity=!0,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.center=[0,0],this.width=500,this.height=500,this.maxSpeedIncrease=1,this.nodes=[],this.edges=[],this.bbox=new l(4),this._rootRegion=new i,this._rootRegion.centerOfMass=s.create(),this._massArr=null,this._k=0}var s,r="undefined"==typeof window&&"undefined"==typeof t;s=r?{create:function(e,t){var i=new Float32Array(2);return i[0]=e||0,i[1]=t||0,i},dist:function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)},len:function(e){var t=e[0],i=e[1];return Math.sqrt(t*t+i*i)},scaleAndAdd:function(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e},scale:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e},add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e},sub:function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},normalize:function(e,t){var i=t[0],n=t[1],a=i*i+n*n;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a),e},negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},set:function(e,t,i){return e[0]=t,e[1]=i,e}}:t("zrender/tool/vector");var l="undefined"==typeof Float32Array?Array:Float32Array;if(i.prototype.beforeUpdate=function(){for(var e=0;e<this.nSubRegions;e++)this.subRegions[e].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},i.prototype.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var e=0;e<this.nSubRegions;e++)this.subRegions[e].afterUpdate()},i.prototype.addNode=function(e){if(0===this.nSubRegions){if(null==this.node)return void(this.node=e);this._addNodeToSubRegion(this.node),this.node=null}this._addNodeToSubRegion(e),this._updateCenterOfMass(e)},i.prototype.findSubRegion=function(e,t){for(var i=0;i<this.nSubRegions;i++){var n=this.subRegions[i];if(n.contain(e,t))return n}},i.prototype.contain=function(e,t){return this.bbox[0]<=e&&this.bbox[2]>=e&&this.bbox[1]<=t&&this.bbox[3]>=t},i.prototype.setBBox=function(e,t,i,n){this.bbox[0]=e,this.bbox[1]=t,this.bbox[2]=i,this.bbox[3]=n,this.size=(i-e+n-t)/2},i.prototype._newSubRegion=function(){var e=this.subRegions[this.nSubRegions];return e||(e=new i,this.subRegions[this.nSubRegions]=e),this.nSubRegions++,e},i.prototype._addNodeToSubRegion=function(e){var t=this.findSubRegion(e.position[0],e.position[1]),i=this.bbox;if(!t){var n=(i[0]+i[2])/2,a=(i[1]+i[3])/2,o=(i[2]-i[0])/2,s=(i[3]-i[1])/2,r=e.position[0]>=n?1:0,l=e.position[1]>=a?1:0,t=this._newSubRegion();t.setBBox(r*o+i[0],l*s+i[1],(r+1)*o+i[0],(l+1)*s+i[1])}t.addNode(e)},i.prototype._updateCenterOfMass=function(e){null==this.centerOfMass&&(this.centerOfMass=s.create());var t=this.centerOfMass[0]*this.mass,i=this.centerOfMass[1]*this.mass;t+=e.position[0]*e.mass,i+=e.position[1]*e.mass,this.mass+=e.mass,this.centerOfMass[0]=t/this.mass,this.centerOfMass[1]=i/this.mass},o.prototype.nodeToNodeRepulsionFactor=function(e,t,i){return i*i*e/t},o.prototype.edgeToNodeRepulsionFactor=function(e,t,i){return i*e/t},o.prototype.attractionFactor=function(e,t,i){return e*t/i},o.prototype.initNodes=function(e,t,i){this.temperature=1;var a=e.length/2;this.nodes.length=0;for(var o="undefined"!=typeof i,s=0;a>s;s++){var r=new n;r.position[0]=e[2*s],r.position[1]=e[2*s+1],r.mass=t[s],o&&(r.size=i[s]),this.nodes.push(r)}this._massArr=t,o&&(this._sizeArr=i)},o.prototype.initEdges=function(e,t){var i=e.length/2;this.edges.length=0;for(var n="undefined"!=typeof t,o=0;i>o;o++){var s=e[2*o],r=e[2*o+1],l=this.nodes[s],h=this.nodes[r];if(l&&h){l.outDegree++,h.inDegree++;var d=new a(l,h);n&&(d.weight=t[o]),this.edges.push(d)}}},o.prototype.update=function(){var e=this.nodes.length;if(this.updateBBox(),this._k=.4*this.scaling*Math.sqrt(this.width*this.height/e),this.barnesHutOptimize){this._rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this._rootRegion.beforeUpdate();for(var t=0;e>t;t++)this._rootRegion.addNode(this.nodes[t]);this._rootRegion.afterUpdate()}else{var i=0,n=this._rootRegion.centerOfMass;s.set(n,0,0);for(var t=0;e>t;t++){var a=this.nodes[t];i+=a.mass,s.scaleAndAdd(n,n,a.position,a.mass)}i>0&&s.scale(n,n,1/i)}this.updateForce(),this.updatePosition()},o.prototype.updateForce=function(){for(var e=this.nodes.length,t=0;e>t;t++){var i=this.nodes[t];s.copy(i.forcePrev,i.force),s.copy(i.speedPrev,i.speed),s.set(i.force,0,0)}this.updateNodeNodeForce(),this.gravity>0&&this.updateGravityForce(),this.updateEdgeForce(),this.preventNodeEdgeOverlap&&this.updateNodeEdgeForce()},o.prototype.updatePosition=function(){for(var e=this.nodes.length,t=s.create(),i=0;e>i;i++){var n=this.nodes[i],a=n.speed;s.scale(n.force,n.force,1/30);var o=s.len(n.force)+.1,r=Math.min(o,500)/o;s.scale(n.force,n.force,r),s.add(a,a,n.force),s.scale(a,a,this.temperature),s.sub(t,a,n.speedPrev);var l=s.len(t);if(l>0){s.scale(t,t,1/l);var h=s.len(n.speedPrev);h>0&&(l=Math.min(l/h,this.maxSpeedIncrease)*h,s.scaleAndAdd(a,n.speedPrev,t,l))}var d=s.len(a),r=Math.min(d,100)/(d+.1);s.scale(a,a,r),s.add(n.position,n.position,a)}},o.prototype.updateNodeNodeForce=function(){for(var e=this.nodes.length,t=0;e>t;t++){var i=this.nodes[t];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this._rootRegion,i);else for(var n=t+1;e>n;n++){var a=this.nodes[n];this.applyNodeToNodeRepulsion(i,a,!1)}}},o.prototype.updateGravityForce=function(){for(var e=0;e<this.nodes.length;e++)this.applyNodeGravity(this.nodes[e])},o.prototype.updateEdgeForce=function(){for(var e=0;e<this.edges.length;e++)this.applyEdgeAttraction(this.edges[e])},o.prototype.updateNodeEdgeForce=function(){for(var e=0;e<this.nodes.length;e++)for(var t=0;t<this.edges.length;t++)this.applyEdgeToNodeRepulsion(this.edges[t],this.nodes[e])},o.prototype.applyRegionToNodeRepulsion=function(){var e=s.create();return function(t,i){if(t.node)this.applyNodeToNodeRepulsion(t.node,i,!0);else{if(0===t.mass&&0===i.mass)return;s.sub(e,i.position,t.centerOfMass);var n=e[0]*e[0]+e[1]*e[1];if(n>this.barnesHutTheta*t.size*t.size){var a=this._k*this._k*(i.mass+t.mass)/(n+1);s.scaleAndAdd(i.force,i.force,e,2*a)}else for(var o=0;o<t.nSubRegions;o++)this.applyRegionToNodeRepulsion(t.subRegions[o],i)}}}(),o.prototype.applyNodeToNodeRepulsion=function(){var e=s.create();return function(t,i,n){if(t!==i&&(0!==t.mass||0!==i.mass)){s.sub(e,t.position,i.position);var a=e[0]*e[0]+e[1]*e[1];if(0!==a){var o,r=t.mass+i.mass,l=Math.sqrt(a);s.scale(e,e,1/l),this.preventNodeOverlap?(l=l-t.size-i.size,l>0?o=this.nodeToNodeRepulsionFactor(r,l,this._k):0>=l&&(o=this._k*this._k*10*r)):o=this.nodeToNodeRepulsionFactor(r,l,this._k),n||s.scaleAndAdd(t.force,t.force,e,2*o),s.scaleAndAdd(i.force,i.force,e,2*-o)}}}}(),o.prototype.applyEdgeAttraction=function(){var e=s.create();return function(t){var i=t.node1,n=t.node2;s.sub(e,i.position,n.position);var a,o=s.len(e);a=0===this.edgeWeightInfluence?1:1==this.edgeWeightInfluence?t.weight:Math.pow(t.weight,this.edgeWeightInfluence);var r;if(!(this.preventOverlap&&(o=o-i.size-n.size,0>=o))){var r=this.attractionFactor(a,o,this._k);s.scaleAndAdd(i.force,i.force,e,-r),s.scaleAndAdd(n.force,n.force,e,r)}}}(),o.prototype.applyNodeGravity=function(){var e=s.create();return function(t){s.sub(e,this.center,t.position),this.width>this.height?e[1]*=this.width/this.height:e[0]*=this.height/this.width;var i=s.len(e)/100;this.strongGravity?s.scaleAndAdd(t.force,t.force,e,i*this.gravity*t.mass):s.scaleAndAdd(t.force,t.force,e,this.gravity*t.mass/(i+1))}}(),o.prototype.applyEdgeToNodeRepulsion=function(){var e=s.create(),t=s.create(),i=s.create();return function(n,a){var o=n.node1,r=n.node2;if(o!==a&&r!==a){s.sub(e,r.position,o.position),s.sub(t,a.position,o.position);var l=s.len(e);s.scale(e,e,1/l);var h=s.dot(e,t);if(!(0>h||h>l)){s.scaleAndAdd(i,o.position,e,h);var d=s.dist(i,a.position)-a.size,c=this.edgeToNodeRepulsionFactor(a.mass,Math.max(d,.1),100);s.sub(e,a.position,i),s.normalize(e,e),s.scaleAndAdd(a.force,a.force,e,c),s.scaleAndAdd(o.force,o.force,e,-c),s.scaleAndAdd(r.force,r.force,e,-c)}}}}(),o.prototype.updateBBox=function(){for(var e=1/0,t=1/0,i=-1/0,n=-1/0,a=0;a<this.nodes.length;a++){var o=this.nodes[a].position;e=Math.min(e,o[0]),t=Math.min(t,o[1]),i=Math.max(i,o[0]),n=Math.max(n,o[1])}this.bbox[0]=e,this.bbox[1]=t,this.bbox[2]=i,this.bbox[3]=n},o.getWorkerCode=function(){var t=e.toString();return t.slice(t.indexOf("{")+1,t.lastIndexOf("return"))},r){var h=null;self.onmessage=function(e){if(e.data instanceof ArrayBuffer){if(!h)return;for(var t=new Float32Array(e.data),i=t.length/2,n=0;i>n;n++){var a=h.nodes[n];a.position[0]=t[2*n],a.position[1]=t[2*n+1]}}else switch(e.data.cmd){case"init":h||(h=new o),h.initNodes(e.data.nodesPosition,e.data.nodesMass,e.data.nodesSize),h.initEdges(e.data.edges,e.data.edgesWeight);break;case"updateConfig":if(h)for(var s in e.data.config)h[s]=e.data.config[s];break;case"update":var r=e.data.steps;if(h){var i=h.nodes.length,t=new Float32Array(2*i);h.temperature=e.data.temperature;for(var n=0;r>n;n++)h.update(),h.temperature*=e.data.coolDown;for(var n=0;i>n;n++){var a=h.nodes[n];t[2*n]=a.position[0],t[2*n+1]=a.position[1]}self.postMessage(t.buffer,[t.buffer])}else{var l=new Float32Array;self.postMessage(l.buffer,[l.buffer])}}}}return o});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJwbHVnaW5zL2VjaGFydHMvY2hhcnQvZm9yY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFwiZWNoYXJ0cy9jaGFydC9mb3JjZVwiLFtcInJlcXVpcmVcIixcIi4vYmFzZVwiLFwiLi4vZGF0YS9HcmFwaFwiLFwiLi4vbGF5b3V0L0ZvcmNlXCIsXCJ6cmVuZGVyL3NoYXBlL0xpbmVcIixcInpyZW5kZXIvc2hhcGUvQmV6aWVyQ3VydmVcIixcInpyZW5kZXIvc2hhcGUvSW1hZ2VcIixcIi4uL3V0aWwvc2hhcGUvSWNvblwiLFwiLi4vY29uZmlnXCIsXCIuLi91dGlsL2VjRGF0YVwiLFwienJlbmRlci90b29sL3V0aWxcIixcInpyZW5kZXIvY29uZmlnXCIsXCJ6cmVuZGVyL3Rvb2wvdmVjdG9yXCIsXCIuLi9jaGFydFwiXSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCxvLGgsZCl7dmFyIGM9dGhpcztzLmNhbGwodGhpcyxlLHQsbyxoLGQpLHRoaXMuX19ub2RlUG9zaXRpb25NYXA9e30sdGhpcy5fZ3JhcGg9bmV3IHIoITApLHRoaXMuX2xheW91dD1uZXcgbCx0aGlzLl9sYXlvdXQub251cGRhdGU9ZnVuY3Rpb24oKXtjLl9zdGVwKCl9LHRoaXMuX3N0ZXBzPTEsdGhpcy5vbmRyYWdzdGFydD1mdW5jdGlvbigpe2kuYXBwbHkoYyxhcmd1bWVudHMpfSx0aGlzLm9uZHJhZ2VuZD1mdW5jdGlvbigpe2EuYXBwbHkoYyxhcmd1bWVudHMpfSx0aGlzLm9uZHJvcD1mdW5jdGlvbigpe30sdGhpcy5zaGFwZUhhbmRsZXIub25kcmFnc3RhcnQ9ZnVuY3Rpb24oKXtjLmlzRHJhZ3N0YXJ0PSEwfSx0aGlzLm9ubW91c2Vtb3ZlPWZ1bmN0aW9uKCl7bi5hcHBseShjLGFyZ3VtZW50cyl9LHRoaXMucmVmcmVzaChoKX1mdW5jdGlvbiBpKGUpe2lmKHRoaXMuaXNEcmFnc3RhcnQmJmUudGFyZ2V0KXt2YXIgdD1lLnRhcmdldDt0LmZpeGVkPSEwLHRoaXMuaXNEcmFnc3RhcnQ9ITEsdGhpcy56ci5vbihWLkVWRU5ULk1PVVNFTU9WRSx0aGlzLm9ubW91c2Vtb3ZlKX19ZnVuY3Rpb24gbigpe3RoaXMuX2xheW91dC50ZW1wZXJhdHVyZT0uOCx0aGlzLl9zdGVwKCl9ZnVuY3Rpb24gYShlLHQpe2lmKHRoaXMuaXNEcmFnZW5kJiZlLnRhcmdldCl7dmFyIGk9ZS50YXJnZXQ7aS5maXhlZD0hMSx0LmRyYWdJbj0hMCx0Lm5lZWRSZWZyZXNoPSExLHRoaXMuaXNEcmFnZW5kPSExLHRoaXMuenIudW4oVi5FVkVOVC5NT1VTRU1PVkUsdGhpcy5vbm1vdXNlbW92ZSl9fWZ1bmN0aW9uIG8oZSx0LGkpe3ZhciBuPXkuY3JlYXRlKCk7cmV0dXJuIG5bMF09KE1hdGgucmFuZG9tKCktLjUpKmkrZSxuWzFdPShNYXRoLnJhbmRvbSgpLS41KSppK3Qsbn12YXIgcz1lKFwiLi9iYXNlXCIpLHI9ZShcIi4uL2RhdGEvR3JhcGhcIiksbD1lKFwiLi4vbGF5b3V0L0ZvcmNlXCIpLGg9ZShcInpyZW5kZXIvc2hhcGUvTGluZVwiKSxkPWUoXCJ6cmVuZGVyL3NoYXBlL0JlemllckN1cnZlXCIpLGM9ZShcInpyZW5kZXIvc2hhcGUvSW1hZ2VcIikscD1lKFwiLi4vdXRpbC9zaGFwZS9JY29uXCIpLG09ZShcIi4uL2NvbmZpZ1wiKTttLmZvcmNlPXt6bGV2ZWw6MSx6OjIsY2VudGVyOltcIjUwJVwiLFwiNTAlXCJdLHNpemU6XCIxMDAlXCIscHJldmVudE92ZXJsYXA6ITEsY29vbERvd246Ljk5LG1pblJhZGl1czoxMCxtYXhSYWRpdXM6MjAscmF0aW9TY2FsaW5nOiExLGxhcmdlOiExLHVzZVdvcmtlcjohMSxzdGVwczoxLHNjYWxpbmc6MSxncmF2aXR5OjEsc3ltYm9sOlwiY2lyY2xlXCIsc3ltYm9sU2l6ZTowLGxpbmtTeW1ib2w6bnVsbCxsaW5rU3ltYm9sU2l6ZTpbMTAsMTVdLGRyYWdnYWJsZTohMCxjbGlja2FibGU6ITAscm9hbTohMSxpdGVtU3R5bGU6e25vcm1hbDp7bGFiZWw6e3Nob3c6ITEscG9zaXRpb246XCJpbnNpZGVcIn0sbm9kZVN0eWxlOnticnVzaFR5cGU6XCJib3RoXCIsYm9yZGVyQ29sb3I6XCIjNTE4MmFiXCIsYm9yZGVyV2lkdGg6MX0sbGlua1N0eWxlOntjb2xvcjpcIiM1MTgyYWJcIix3aWR0aDoxLHR5cGU6XCJsaW5lXCJ9fSxlbXBoYXNpczp7bGFiZWw6e3Nob3c6ITF9LG5vZGVTdHlsZTp7fSxsaW5rU3R5bGU6e29wYWNpdHk6MH19fX07dmFyIHU9ZShcIi4uL3V0aWwvZWNEYXRhXCIpLGc9ZShcInpyZW5kZXIvdG9vbC91dGlsXCIpLFY9ZShcInpyZW5kZXIvY29uZmlnXCIpLHk9ZShcInpyZW5kZXIvdG9vbC92ZWN0b3JcIik7cmV0dXJuIHQucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp0LHR5cGU6bS5DSEFSVF9UWVBFX0ZPUkNFLF9pbml0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmNvbXBvbmVudC5sZWdlbmQsaT10aGlzLnNlcmllczt0aGlzLmNsZWFyKCk7Zm9yKHZhciBuPTAsYT1pLmxlbmd0aDthPm47bisrKXt2YXIgbz1pW25dO2lmKG8udHlwZT09PW0uQ0hBUlRfVFlQRV9GT1JDRSl7aWYoaVtuXT10aGlzLnJlZm9ybU9wdGlvbihpW25dKSxlPWlbbl0ubmFtZXx8XCJcIix0aGlzLnNlbGVjdGVkTWFwW2VdPXQ/dC5pc1NlbGVjdGVkKGUpOiEwLCF0aGlzLnNlbGVjdGVkTWFwW2VdKWNvbnRpbnVlO3RoaXMuYnVpbGRNYXJrKG4pLHRoaXMuX2luaXRTZXJpZShvLG4pO2JyZWFrfX10aGlzLmFuaW1hdGlvbkVmZmVjdCgpfSxfZ2V0Tm9kZUNhdGVnb3J5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY2F0ZWdvcmllcyYmZS5jYXRlZ29yaWVzW3QuY2F0ZWdvcnl8fDBdfSxfZ2V0Tm9kZVF1ZXJ5VGFyZ2V0OmZ1bmN0aW9uKGUsdCxpKXtpPWl8fFwibm9ybWFsXCI7dmFyIG49dGhpcy5fZ2V0Tm9kZUNhdGVnb3J5KGUsdCl8fHt9O3JldHVyblt0Lml0ZW1TdHlsZSYmdC5pdGVtU3R5bGVbaV0sbiYmbi5pdGVtU3R5bGUmJm4uaXRlbVN0eWxlW2ldLGUuaXRlbVN0eWxlW2ldLm5vZGVTdHlsZV19LF9nZXRFZGdlUXVlcnlUYXJnZXQ6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBpPWl8fFwibm9ybWFsXCIsW3QuaXRlbVN0eWxlJiZ0Lml0ZW1TdHlsZVtpXSxlLml0ZW1TdHlsZVtpXS5saW5rU3R5bGVdfSxfaW5pdFNlcmllOmZ1bmN0aW9uKGUsdCl7dGhpcy5fdGVtcGVyYXR1cmU9MSx0aGlzLl9ncmFwaD1lLmRhdGE/dGhpcy5fZ2V0U2VyaWVHcmFwaEZyb21EYXRhTWF0cml4KGUpOnRoaXMuX2dldFNlcmllR3JhcGhGcm9tTm9kZUxpbmtzKGUpLHRoaXMuX2J1aWxkTGlua1NoYXBlcyhlLHQpLHRoaXMuX2J1aWxkTm9kZVNoYXBlcyhlLHQpO3ZhciBpPWUucm9hbT09PSEwfHxcIm1vdmVcIj09PWUucm9hbSxuPWUucm9hbT09PSEwfHxcInNjYWxlXCI9PT1lLnJvYW07dGhpcy56ci5tb2RMYXllcih0aGlzLmdldFpsZXZlbEJhc2UoKSx7cGFuYWJsZTppLHpvb21hYmxlOm59KSwodGhpcy5xdWVyeShcIm1hcmtQb2ludC5lZmZlY3Quc2hvd1wiKXx8dGhpcy5xdWVyeShcIm1hcmtMaW5lLmVmZmVjdC5zaG93XCIpKSYmdGhpcy56ci5tb2RMYXllcihtLkVGRkVDVF9aTEVWRUwse3BhbmFibGU6aSx6b29tYWJsZTpufSksdGhpcy5faW5pdExheW91dChlKSx0aGlzLl9zdGVwKCl9LF9nZXRTZXJpZUdyYXBoRnJvbURhdGFNYXRyaXg6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLGk9MCxuPVtdLGE9MDthPGUubWF0cml4Lmxlbmd0aDthKyspblthXT1lLm1hdHJpeFthXS5zbGljZSgpO2Zvcih2YXIgbz1lLmRhdGF8fGUubm9kZXMsYT0wO2E8by5sZW5ndGg7YSsrKXt2YXIgcz17fSxsPW9bYV07Zm9yKHZhciBoIGluIGwpXCJuYW1lXCI9PT1oP3MuaWQ9bC5uYW1lOnNbaF09bFtoXTt2YXIgZD10aGlzLl9nZXROb2RlQ2F0ZWdvcnkoZSxsKSxjPWQ/ZC5uYW1lOmwubmFtZTtpZih0aGlzLnNlbGVjdGVkTWFwW2NdPXRoaXMuaXNTZWxlY3RlZChjKSx0aGlzLnNlbGVjdGVkTWFwW2NdKXQucHVzaChzKSxpKys7ZWxzZXtuLnNwbGljZShpLDEpO2Zvcih2YXIgcD0wO3A8bi5sZW5ndGg7cCsrKW5bcF0uc3BsaWNlKGksMSl9fXZhciBtPXIuZnJvbU1hdHJpeCh0LG4sITApO3JldHVybiBtLmVhY2hOb2RlKGZ1bmN0aW9uKGUsdCl7ZS5sYXlvdXQ9e3NpemU6ZS5kYXRhLnZhbHVlLG1hc3M6MH0sZS5yYXdJbmRleD10fSksbS5lYWNoRWRnZShmdW5jdGlvbihlKXtlLmxheW91dD17d2VpZ2h0OmUuZGF0YS53ZWlnaHR9fSksbX0sX2dldFNlcmllR3JhcGhGcm9tTm9kZUxpbmtzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgcighMCksaT1lLmRhdGF8fGUubm9kZXMsbj0wLGE9aS5sZW5ndGg7YT5uO24rKyl7dmFyIG89aVtuXTtpZihvJiYhby5pZ25vcmUpe3ZhciBzPXRoaXMuX2dldE5vZGVDYXRlZ29yeShlLG8pLGw9cz9zLm5hbWU6by5uYW1lO2lmKHRoaXMuc2VsZWN0ZWRNYXBbbF09dGhpcy5pc1NlbGVjdGVkKGwpLHRoaXMuc2VsZWN0ZWRNYXBbbF0pe3ZhciBoPXQuYWRkTm9kZShvLm5hbWUsbyk7aC5yYXdJbmRleD1ufX19Zm9yKHZhciBuPTAsYT1lLmxpbmtzLmxlbmd0aDthPm47bisrKXt2YXIgZD1lLmxpbmtzW25dLGM9ZC5zb3VyY2UscD1kLnRhcmdldDtcIm51bWJlclwiPT10eXBlb2YgYyYmKGM9aVtjXSxjJiYoYz1jLm5hbWUpKSxcIm51bWJlclwiPT10eXBlb2YgcCYmKHA9aVtwXSxwJiYocD1wLm5hbWUpKTt2YXIgbT10LmFkZEVkZ2UoYyxwLGQpO20mJihtLnJhd0luZGV4PW4pfXJldHVybiB0LmVhY2hOb2RlKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YS52YWx1ZTtpZihudWxsPT10KXt0PTA7Zm9yKHZhciBpPTA7aTxlLmVkZ2VzLmxlbmd0aDtpKyspdCs9ZS5lZGdlc1tpXS5kYXRhLndlaWdodHx8MH1lLmxheW91dD17c2l6ZTp0LG1hc3M6MH19KSx0LmVhY2hFZGdlKGZ1bmN0aW9uKGUpe2UubGF5b3V0PXt3ZWlnaHQ6bnVsbD09ZS5kYXRhLndlaWdodD8xOmUuZGF0YS53ZWlnaHR9fSksdH0sX2luaXRMYXlvdXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ3JhcGgsaT10Lm5vZGVzLmxlbmd0aCxuPXRoaXMucXVlcnkoZSxcIm1pblJhZGl1c1wiKSxhPXRoaXMucXVlcnkoZSxcIm1heFJhZGl1c1wiKTt0aGlzLl9zdGVwcz1lLnN0ZXBzfHwxLHRoaXMuX2xheW91dC5jZW50ZXI9dGhpcy5wYXJzZUNlbnRlcih0aGlzLnpyLGUuY2VudGVyKSx0aGlzLl9sYXlvdXQud2lkdGg9dGhpcy5wYXJzZVBlcmNlbnQoZS5zaXplLHRoaXMuenIuZ2V0V2lkdGgoKSksdGhpcy5fbGF5b3V0LmhlaWdodD10aGlzLnBhcnNlUGVyY2VudChlLnNpemUsdGhpcy56ci5nZXRIZWlnaHQoKSksdGhpcy5fbGF5b3V0LmxhcmdlPWUubGFyZ2UsdGhpcy5fbGF5b3V0LnNjYWxpbmc9ZS5zY2FsaW5nLHRoaXMuX2xheW91dC5yYXRpb1NjYWxpbmc9ZS5yYXRpb1NjYWxpbmcsdGhpcy5fbGF5b3V0LmdyYXZpdHk9ZS5ncmF2aXR5LHRoaXMuX2xheW91dC50ZW1wZXJhdHVyZT0xLHRoaXMuX2xheW91dC5jb29sRG93bj1lLmNvb2xEb3duLHRoaXMuX2xheW91dC5wcmV2ZW50Tm9kZUVkZ2VPdmVybGFwPWUucHJldmVudE92ZXJsYXAsdGhpcy5fbGF5b3V0LnByZXZlbnROb2RlT3ZlcmxhcD1lLnByZXZlbnRPdmVybGFwO2Zvcih2YXIgcz0xLzAscj0tMS8wLGw9MDtpPmw7bCsrKXt2YXIgaD10Lm5vZGVzW2xdO3I9TWF0aC5tYXgoaC5sYXlvdXQuc2l6ZSxyKSxzPU1hdGgubWluKGgubGF5b3V0LnNpemUscyl9Zm9yKHZhciBkPXItcyxsPTA7aT5sO2wrKyl7dmFyIGg9dC5ub2Rlc1tsXTtkPjA/KGgubGF5b3V0LnNpemU9KGgubGF5b3V0LnNpemUtcykqKGEtbikvZCtuLGgubGF5b3V0Lm1hc3M9aC5sYXlvdXQuc2l6ZS9hKTooaC5sYXlvdXQuc2l6ZT0oYS1uKS8yLGgubGF5b3V0Lm1hc3M9LjUpfWZvcih2YXIgbD0wO2k+bDtsKyspe3ZhciBoPXQubm9kZXNbbF07aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMuX19ub2RlUG9zaXRpb25NYXBbaC5pZF0paC5sYXlvdXQucG9zaXRpb249eS5jcmVhdGUoKSx5LmNvcHkoaC5sYXlvdXQucG9zaXRpb24sdGhpcy5fX25vZGVQb3NpdGlvbk1hcFtoLmlkXSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgaC5kYXRhLmluaXRpYWwpaC5sYXlvdXQucG9zaXRpb249eS5jcmVhdGUoKSx5LmNvcHkoaC5sYXlvdXQucG9zaXRpb24saC5kYXRhLmluaXRpYWwpO2Vsc2V7dmFyIGM9dGhpcy5fbGF5b3V0LmNlbnRlcixwPU1hdGgubWluKHRoaXMuX2xheW91dC53aWR0aCx0aGlzLl9sYXlvdXQuaGVpZ2h0KTtoLmxheW91dC5wb3NpdGlvbj1vKGNbMF0sY1sxXSwuOCpwKX12YXIgbT1oLnNoYXBlLnN0eWxlLHU9aC5sYXlvdXQuc2l6ZTttLndpZHRoPW0ud2lkdGh8fDIqdSxtLmhlaWdodD1tLmhlaWdodHx8Mip1LG0ueD0tbS53aWR0aC8yLG0ueT0tbS5oZWlnaHQvMix5LmNvcHkoaC5zaGFwZS5wb3NpdGlvbixoLmxheW91dC5wb3NpdGlvbil9aT10LmVkZ2VzLmxlbmd0aCxyPS0xLzA7Zm9yKHZhciBsPTA7aT5sO2wrKyl7dmFyIGc9dC5lZGdlc1tsXTtnLmxheW91dC53ZWlnaHQ+ciYmKHI9Zy5sYXlvdXQud2VpZ2h0KX1mb3IodmFyIGw9MDtpPmw7bCsrKXt2YXIgZz10LmVkZ2VzW2xdO2cubGF5b3V0LndlaWdodC89cn10aGlzLl9sYXlvdXQuaW5pdCh0LGUudXNlV29ya2VyKX0sX2J1aWxkTm9kZVNoYXBlczpmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMuX2dyYXBoLG49dGhpcy5xdWVyeShlLFwiY2F0ZWdvcmllc1wiKTtpLmVhY2hOb2RlKGZ1bmN0aW9uKGkpe3ZhciBhPXRoaXMuX2dldE5vZGVDYXRlZ29yeShlLGkuZGF0YSksbz1baS5kYXRhLGEsZV0scz10aGlzLl9nZXROb2RlUXVlcnlUYXJnZXQoZSxpLmRhdGEpLHI9dGhpcy5fZ2V0Tm9kZVF1ZXJ5VGFyZ2V0KGUsaS5kYXRhLFwiZW1waGFzaXNcIiksbD1uZXcgcCh7c3R5bGU6e3g6MCx5OjAsY29sb3I6dGhpcy5kZWVwUXVlcnkocyxcImNvbG9yXCIpLGJydXNoVHlwZTpcImJvdGhcIixzdHJva2VDb2xvcjp0aGlzLmRlZXBRdWVyeShzLFwic3Ryb2tlQ29sb3JcIil8fHRoaXMuZGVlcFF1ZXJ5KHMsXCJib3JkZXJDb2xvclwiKSxsaW5lV2lkdGg6dGhpcy5kZWVwUXVlcnkocyxcImxpbmVXaWR0aFwiKXx8dGhpcy5kZWVwUXVlcnkocyxcImJvcmRlcldpZHRoXCIpfSxoaWdobGlnaHRTdHlsZTp7Y29sb3I6dGhpcy5kZWVwUXVlcnkocixcImNvbG9yXCIpLHN0cm9rZUNvbG9yOnRoaXMuZGVlcFF1ZXJ5KHIsXCJzdHJva2VDb2xvclwiKXx8dGhpcy5kZWVwUXVlcnkocixcImJvcmRlckNvbG9yXCIpLGxpbmVXaWR0aDp0aGlzLmRlZXBRdWVyeShyLFwibGluZVdpZHRoXCIpfHx0aGlzLmRlZXBRdWVyeShyLFwiYm9yZGVyV2lkdGhcIil9LGNsaWNrYWJsZTplLmNsaWNrYWJsZSx6bGV2ZWw6dGhpcy5nZXRabGV2ZWxCYXNlKCksejp0aGlzLmdldFpCYXNlKCl9KTtsLnN0eWxlLmNvbG9yfHwobC5zdHlsZS5jb2xvcj10aGlzLmdldENvbG9yKGE/YS5uYW1lOmkuaWQpKSxsLnN0eWxlLmljb25UeXBlPXRoaXMuZGVlcFF1ZXJ5KG8sXCJzeW1ib2xcIiksbC5zdHlsZS53aWR0aD1sLnN0eWxlLmhlaWdodD0yKih0aGlzLmRlZXBRdWVyeShvLFwic3ltYm9sU2l6ZVwiKXx8MCksbC5zdHlsZS5pY29uVHlwZS5tYXRjaChcImltYWdlXCIpJiYobC5zdHlsZS5pbWFnZT1sLnN0eWxlLmljb25UeXBlLnJlcGxhY2UobmV3IFJlZ0V4cChcIl5pbWFnZTpcXFxcL1xcXFwvXCIpLFwiXCIpLGw9bmV3IGMoe3N0eWxlOmwuc3R5bGUsaGlnaGxpZ2h0U3R5bGU6bC5oaWdobGlnaHRTdHlsZSxjbGlja2FibGU6bC5jbGlja2FibGUsemxldmVsOnRoaXMuZ2V0WmxldmVsQmFzZSgpLHo6dGhpcy5nZXRaQmFzZSgpfSkpLHRoaXMuZGVlcFF1ZXJ5KG8sXCJpdGVtU3R5bGUubm9ybWFsLmxhYmVsLnNob3dcIikmJihsLnN0eWxlLnRleHQ9bnVsbD09aS5kYXRhLmxhYmVsP2kuaWQ6aS5kYXRhLmxhYmVsLGwuc3R5bGUudGV4dFBvc2l0aW9uPXRoaXMuZGVlcFF1ZXJ5KG8sXCJpdGVtU3R5bGUubm9ybWFsLmxhYmVsLnBvc2l0aW9uXCIpLGwuc3R5bGUudGV4dENvbG9yPXRoaXMuZGVlcFF1ZXJ5KG8sXCJpdGVtU3R5bGUubm9ybWFsLmxhYmVsLnRleHRTdHlsZS5jb2xvclwiKSxsLnN0eWxlLnRleHRGb250PXRoaXMuZ2V0Rm9udCh0aGlzLmRlZXBRdWVyeShvLFwiaXRlbVN0eWxlLm5vcm1hbC5sYWJlbC50ZXh0U3R5bGVcIil8fHt9KSksdGhpcy5kZWVwUXVlcnkobyxcIml0ZW1TdHlsZS5lbXBoYXNpcy5sYWJlbC5zaG93XCIpJiYobC5oaWdobGlnaHRTdHlsZS50ZXh0UG9zaXRpb249dGhpcy5kZWVwUXVlcnkobyxcIml0ZW1TdHlsZS5lbXBoYXNpcy5sYWJlbC5wb3NpdGlvblwiKSxsLmhpZ2hsaWdodFN0eWxlLnRleHRDb2xvcj10aGlzLmRlZXBRdWVyeShvLFwiaXRlbVN0eWxlLmVtcGhhc2lzLmxhYmVsLnRleHRTdHlsZS5jb2xvclwiKSxsLmhpZ2hsaWdodFN0eWxlLnRleHRGb250PXRoaXMuZ2V0Rm9udCh0aGlzLmRlZXBRdWVyeShvLFwiaXRlbVN0eWxlLmVtcGhhc2lzLmxhYmVsLnRleHRTdHlsZVwiKXx8e30pKSx0aGlzLmRlZXBRdWVyeShvLFwiZHJhZ2dhYmxlXCIpJiYodGhpcy5zZXRDYWxjdWxhYmxlKGwpLGwuZHJhZ0VuYWJsZVRpbWU9MCxsLmRyYWdnYWJsZT0hMCxsLm9uZHJhZ3N0YXJ0PXRoaXMuc2hhcGVIYW5kbGVyLm9uZHJhZ3N0YXJ0LGwub25kcmFnb3Zlcj1udWxsKTt2YXIgaD1cIlwiO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBpLmNhdGVnb3J5KXt2YXIgYT1uW2kuY2F0ZWdvcnldO2g9YSYmYS5uYW1lfHxcIlwifXUucGFjayhsLGUsdCxpLmRhdGEsaS5yYXdJbmRleCxpLmRhdGEubmFtZXx8XCJcIixpLmNhdGVnb3J5KSx0aGlzLnNoYXBlTGlzdC5wdXNoKGwpLHRoaXMuenIuYWRkU2hhcGUobCksaS5zaGFwZT1sfSx0aGlzKX0sX2J1aWxkTGlua1NoYXBlczpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT10aGlzLl9ncmFwaCxuPWkuZWRnZXMubGVuZ3RoLGE9MDtuPmE7YSsrKXt2YXIgbz1pLmVkZ2VzW2FdLHM9by5kYXRhLHI9by5ub2RlMSxsPW8ubm9kZTIsYz10aGlzLl9nZXRFZGdlUXVlcnlUYXJnZXQoZSxzKSxtPXRoaXMuZGVlcFF1ZXJ5KGMsXCJ0eXBlXCIpO2UubGlua1N5bWJvbCYmXCJub25lXCIhPT1lLmxpbmtTeW1ib2wmJihtPVwibGluZVwiKTt2YXIgVj1cImxpbmVcIj09PW0/aDpkLHk9bmV3IFYoe3N0eWxlOnt4U3RhcnQ6MCx5U3RhcnQ6MCx4RW5kOjAseUVuZDowfSxjbGlja2FibGU6dGhpcy5xdWVyeShlLFwiY2xpY2thYmxlXCIpLGhpZ2hsaWdodFN0eWxlOnt9LHpsZXZlbDp0aGlzLmdldFpsZXZlbEJhc2UoKSx6OnRoaXMuZ2V0WkJhc2UoKX0pO2lmKGcubWVyZ2UoeS5zdHlsZSx0aGlzLnF1ZXJ5KGUsXCJpdGVtU3R5bGUubm9ybWFsLmxpbmtTdHlsZVwiKSwhMCksZy5tZXJnZSh5LmhpZ2hsaWdodFN0eWxlLHRoaXMucXVlcnkoZSxcIml0ZW1TdHlsZS5lbXBoYXNpcy5saW5rU3R5bGVcIiksITApLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzLml0ZW1TdHlsZSYmKHMuaXRlbVN0eWxlLm5vcm1hbCYmZy5tZXJnZSh5LnN0eWxlLHMuaXRlbVN0eWxlLm5vcm1hbCwhMCkscy5pdGVtU3R5bGUuZW1waGFzaXMmJmcubWVyZ2UoeS5oaWdobGlnaHRTdHlsZSxzLml0ZW1TdHlsZS5lbXBoYXNpcywhMCkpLHkuc3R5bGUubGluZVdpZHRoPXkuc3R5bGUubGluZVdpZHRofHx5LnN0eWxlLndpZHRoLHkuc3R5bGUuc3Ryb2tlQ29sb3I9eS5zdHlsZS5zdHJva2VDb2xvcnx8eS5zdHlsZS5jb2xvcix5LmhpZ2hsaWdodFN0eWxlLmxpbmVXaWR0aD15LmhpZ2hsaWdodFN0eWxlLmxpbmVXaWR0aHx8eS5oaWdobGlnaHRTdHlsZS53aWR0aCx5LmhpZ2hsaWdodFN0eWxlLnN0cm9rZUNvbG9yPXkuaGlnaGxpZ2h0U3R5bGUuc3Ryb2tlQ29sb3J8fHkuaGlnaGxpZ2h0U3R5bGUuY29sb3IsdS5wYWNrKHksZSx0LG8uZGF0YSxudWxsPT1vLnJhd0luZGV4P2E6by5yYXdJbmRleCxvLmRhdGEubmFtZXx8ci5pZCtcIiAtIFwiK2wuaWQsci5pZCxsLmlkKSx0aGlzLnNoYXBlTGlzdC5wdXNoKHkpLHRoaXMuenIuYWRkU2hhcGUoeSksby5zaGFwZT15LGUubGlua1N5bWJvbCYmXCJub25lXCIhPT1lLmxpbmtTeW1ib2wpe3ZhciBVPW5ldyBwKHtzdHlsZTp7eDotNSx5OjAsd2lkdGg6ZS5saW5rU3ltYm9sU2l6ZVswXSxoZWlnaHQ6ZS5saW5rU3ltYm9sU2l6ZVsxXSxpY29uVHlwZTplLmxpbmtTeW1ib2wsYnJ1c2hUeXBlOlwiZmlsbFwiLGNvbG9yOnkuc3R5bGUuc3Ryb2tlQ29sb3J9LGhpZ2hsaWdodFN0eWxlOnticnVzaFR5cGU6XCJmaWxsXCJ9LHBvc2l0aW9uOlswLDBdLHJvdGF0aW9uOjB9KTt5Ll9zeW1ib2xTaGFwZT1VLHRoaXMuc2hhcGVMaXN0LnB1c2goVSksdGhpcy56ci5hZGRTaGFwZShVKX19fSxfdXBkYXRlTGlua1NoYXBlczpmdW5jdGlvbigpe2Zvcih2YXIgZT15LmNyZWF0ZSgpLHQ9dGhpcy5fZ3JhcGguZWRnZXMsaT0wLG49dC5sZW5ndGg7bj5pO2krKyl7dmFyIGE9dFtpXSxvPWEubm9kZTEuc2hhcGUscz1hLm5vZGUyLnNoYXBlLHI9by5wb3NpdGlvbixsPXMucG9zaXRpb247aWYoYS5zaGFwZS5zdHlsZS54U3RhcnQ9clswXSxhLnNoYXBlLnN0eWxlLnlTdGFydD1yWzFdLGEuc2hhcGUuc3R5bGUueEVuZD1sWzBdLGEuc2hhcGUuc3R5bGUueUVuZD1sWzFdLFwiYmV6aWVyLWN1cnZlXCI9PT1hLnNoYXBlLnR5cGUmJihhLnNoYXBlLnN0eWxlLmNwWDE9KHJbMF0rbFswXSkvMi0obFsxXS1yWzFdKS80LGEuc2hhcGUuc3R5bGUuY3BZMT0oclsxXStsWzFdKS8yLShyWzBdLWxbMF0pLzQpLGEuc2hhcGUubW9kU2VsZigpLGEuc2hhcGUuX3N5bWJvbFNoYXBlKXt2YXIgaD1hLnNoYXBlLl9zeW1ib2xTaGFwZTt5LmNvcHkoaC5wb3NpdGlvbixzLnBvc2l0aW9uKSx5LnN1YihlLG8ucG9zaXRpb24scy5wb3NpdGlvbikseS5ub3JtYWxpemUoZSxlKSx5LnNjYWxlQW5kQWRkKGgucG9zaXRpb24saC5wb3NpdGlvbixlLHMuc3R5bGUud2lkdGgvMisyKTt2YXIgZD1NYXRoLmF0YW4yKGVbMV0sZVswXSk7aC5yb3RhdGlvbj1NYXRoLlBJLzItZCxoLm1vZFNlbGYoKX19fSxfc3luY05vZGVQb3NpdGlvbnM6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5fZ3JhcGgsdD0wO3Q8ZS5ub2Rlcy5sZW5ndGg7dCsrKXt2YXIgaT1lLm5vZGVzW3RdLG49aS5sYXlvdXQucG9zaXRpb24sYT1pLmRhdGEsbz1pLnNoYXBlLHM9by5maXhlZHx8YS5maXhYLHI9by5maXhlZHx8YS5maXhZO3M9PT0hMD9zPTE6aXNOYU4ocykmJihzPTApLHI9PT0hMD9yPTE6aXNOYU4ocikmJihyPTApLG8ucG9zaXRpb25bMF0rPShuWzBdLW8ucG9zaXRpb25bMF0pKigxLXMpLG8ucG9zaXRpb25bMV0rPShuWzFdLW8ucG9zaXRpb25bMV0pKigxLXIpLHkuY29weShuLG8ucG9zaXRpb24pO3ZhciBsPWEubmFtZTtpZihsKXt2YXIgaD10aGlzLl9fbm9kZVBvc2l0aW9uTWFwW2xdO2h8fChoPXRoaXMuX19ub2RlUG9zaXRpb25NYXBbbF09eS5jcmVhdGUoKSkseS5jb3B5KGgsbil9by5tb2RTZWxmKCl9fSxfc3RlcDpmdW5jdGlvbigpe3RoaXMuX3N5bmNOb2RlUG9zaXRpb25zKCksdGhpcy5fdXBkYXRlTGlua1NoYXBlcygpLHRoaXMuenIucmVmcmVzaE5leHRGcmFtZSgpLHRoaXMuX2xheW91dC50ZW1wZXJhdHVyZT4uMDE/dGhpcy5fbGF5b3V0LnN0ZXAodGhpcy5fc3RlcHMpOnRoaXMubWVzc2FnZUNlbnRlci5kaXNwYXRjaChtLkVWRU5ULkZPUkNFX0xBWU9VVF9FTkQse30se30sdGhpcy5teUNoYXJ0KX0scmVmcmVzaDpmdW5jdGlvbihlKXtpZihlJiYodGhpcy5vcHRpb249ZSx0aGlzLnNlcmllcz10aGlzLm9wdGlvbi5zZXJpZXMpLHRoaXMubGVnZW5kPXRoaXMuY29tcG9uZW50LmxlZ2VuZCx0aGlzLmxlZ2VuZCl0aGlzLmdldENvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxlZ2VuZC5nZXRDb2xvcihlKX0sdGhpcy5pc1NlbGVjdGVkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxlZ2VuZC5pc1NlbGVjdGVkKGUpfTtlbHNle3ZhciB0PXt9LGk9MDt0aGlzLmdldENvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0W2VdP3RbZV06KHRbZV18fCh0W2VdPXRoaXMuenIuZ2V0Q29sb3IoaSsrKSksdFtlXSl9LHRoaXMuaXNTZWxlY3RlZD1mdW5jdGlvbigpe3JldHVybiEwfX10aGlzLl9pbml0KCl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCksdGhpcy5zaGFwZUxpc3Q9bnVsbCx0aGlzLmVmZmVjdExpc3Q9bnVsbCx0aGlzLl9sYXlvdXQuZGlzcG9zZSgpLHRoaXMuX2xheW91dD1udWxsLHRoaXMuX19ub2RlUG9zaXRpb25NYXA9e319LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIHRoaXMuX2dyYXBoLmVhY2hOb2RlKGZ1bmN0aW9uKHQpe3QubGF5b3V0JiZlLnB1c2goe25hbWU6dC5kYXRhLm5hbWUscG9zaXRpb246QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodC5sYXlvdXQucG9zaXRpb24pfSl9KSxlfX0sZy5pbmhlcml0cyh0LHMpLGUoXCIuLi9jaGFydFwiKS5kZWZpbmUoXCJmb3JjZVwiLHQpLHR9KSxkZWZpbmUoXCJlY2hhcnRzL2RhdGEvR3JhcGhcIixbXCJyZXF1aXJlXCIsXCJ6cmVuZGVyL3Rvb2wvdXRpbFwiXSxmdW5jdGlvbihlKXt2YXIgdD1lKFwienJlbmRlci90b29sL3V0aWxcIiksaT1mdW5jdGlvbihlKXt0aGlzLl9kaXJlY3RlZD1lfHwhMSx0aGlzLm5vZGVzPVtdLHRoaXMuZWRnZXM9W10sdGhpcy5fbm9kZXNNYXA9e30sdGhpcy5fZWRnZXNNYXA9e319O2kucHJvdG90eXBlLmlzRGlyZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlyZWN0ZWR9LGkucHJvdG90eXBlLmFkZE5vZGU9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9ub2Rlc01hcFtlXSlyZXR1cm4gdGhpcy5fbm9kZXNNYXBbZV07dmFyIG49bmV3IGkuTm9kZShlLHQpO3JldHVybiB0aGlzLm5vZGVzLnB1c2gobiksdGhpcy5fbm9kZXNNYXBbZV09bixufSxpLnByb3RvdHlwZS5nZXROb2RlQnlJZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbm9kZXNNYXBbZV19LGkucHJvdG90eXBlLmFkZEVkZ2U9ZnVuY3Rpb24oZSx0LG4pe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT10aGlzLl9ub2Rlc01hcFtlXSksXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXRoaXMuX25vZGVzTWFwW3RdKSxlJiZ0KXt2YXIgYT1lLmlkK1wiLVwiK3QuaWQ7aWYodGhpcy5fZWRnZXNNYXBbYV0pcmV0dXJuIHRoaXMuX2VkZ2VzTWFwW2FdO3ZhciBvPW5ldyBpLkVkZ2UoZSx0LG4pO3JldHVybiB0aGlzLl9kaXJlY3RlZCYmKGUub3V0RWRnZXMucHVzaChvKSx0LmluRWRnZXMucHVzaChvKSksZS5lZGdlcy5wdXNoKG8pLGUhPT10JiZ0LmVkZ2VzLnB1c2gobyksdGhpcy5lZGdlcy5wdXNoKG8pLHRoaXMuX2VkZ2VzTWFwW2FdPW8sb319LGkucHJvdG90eXBlLnJlbW92ZUVkZ2U9ZnVuY3Rpb24oZSl7dmFyIGk9ZS5ub2RlMSxuPWUubm9kZTIsYT1pLmlkK1wiLVwiK24uaWQ7dGhpcy5fZGlyZWN0ZWQmJihpLm91dEVkZ2VzLnNwbGljZSh0LmluZGV4T2YoaS5vdXRFZGdlcyxlKSwxKSxuLmluRWRnZXMuc3BsaWNlKHQuaW5kZXhPZihuLmluRWRnZXMsZSksMSkpLGkuZWRnZXMuc3BsaWNlKHQuaW5kZXhPZihpLmVkZ2VzLGUpLDEpLGkhPT1uJiZuLmVkZ2VzLnNwbGljZSh0LmluZGV4T2Yobi5lZGdlcyxlKSwxKSxkZWxldGUgdGhpcy5fZWRnZXNNYXBbYV0sdGhpcy5lZGdlcy5zcGxpY2UodC5pbmRleE9mKHRoaXMuZWRnZXMsZSksMSl9LGkucHJvdG90eXBlLmdldEVkZ2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZSYmKGU9ZS5pZCksXCJzdHJpbmdcIiE9dHlwZW9mIHQmJih0PXQuaWQpLHRoaXMuX2RpcmVjdGVkP3RoaXMuX2VkZ2VzTWFwW2UrXCItXCIrdF06dGhpcy5fZWRnZXNNYXBbZStcIi1cIit0XXx8dGhpcy5fZWRnZXNNYXBbdCtcIi1cIitlXX0saS5wcm90b3R5cGUucmVtb3ZlTm9kZT1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8KGU9dGhpcy5fbm9kZXNNYXBbZV0pKXtkZWxldGUgdGhpcy5fbm9kZXNNYXBbZS5pZF0sdGhpcy5ub2Rlcy5zcGxpY2UodC5pbmRleE9mKHRoaXMubm9kZXMsZSksMSk7Zm9yKHZhciBpPTA7aTx0aGlzLmVkZ2VzLmxlbmd0aDspe3ZhciBuPXRoaXMuZWRnZXNbaV07bi5ub2RlMT09PWV8fG4ubm9kZTI9PT1lP3RoaXMucmVtb3ZlRWRnZShuKTppKyt9fX0saS5wcm90b3R5cGUuZmlsdGVyTm9kZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgaT10aGlzLm5vZGVzLmxlbmd0aCxuPTA7aT5uOyllLmNhbGwodCx0aGlzLm5vZGVzW25dLG4pP24rKzoodGhpcy5yZW1vdmVOb2RlKHRoaXMubm9kZXNbbl0pLGktLSl9LGkucHJvdG90eXBlLmZpbHRlckVkZ2U9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9dGhpcy5lZGdlcy5sZW5ndGgsbj0wO2k+bjspZS5jYWxsKHQsdGhpcy5lZGdlc1tuXSxuKT9uKys6KHRoaXMucmVtb3ZlRWRnZSh0aGlzLmVkZ2VzW25dKSxpLS0pfSxpLnByb3RvdHlwZS5lYWNoTm9kZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgaT10aGlzLm5vZGVzLmxlbmd0aCxuPTA7aT5uO24rKyl0aGlzLm5vZGVzW25dJiZlLmNhbGwodCx0aGlzLm5vZGVzW25dLG4pfSxpLnByb3RvdHlwZS5lYWNoRWRnZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgaT10aGlzLmVkZ2VzLmxlbmd0aCxuPTA7aT5uO24rKyl0aGlzLmVkZ2VzW25dJiZlLmNhbGwodCx0aGlzLmVkZ2VzW25dLG4pfSxpLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMubm9kZXMubGVuZ3RoPTAsdGhpcy5lZGdlcy5sZW5ndGg9MCx0aGlzLl9ub2Rlc01hcD17fSx0aGlzLl9lZGdlc01hcD17fX0saS5wcm90b3R5cGUuYnJlYWR0aEZpcnN0VHJhdmVyc2U9ZnVuY3Rpb24oZSx0LGksbil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXRoaXMuX25vZGVzTWFwW3RdKSx0KXt2YXIgYT1cImVkZ2VzXCI7XCJvdXRcIj09PWk/YT1cIm91dEVkZ2VzXCI6XCJpblwiPT09aSYmKGE9XCJpbkVkZ2VzXCIpO2Zvcih2YXIgbz0wO288dGhpcy5ub2Rlcy5sZW5ndGg7bysrKXRoaXMubm9kZXNbb10uX192aXNpdGVkPSExO2lmKCFlLmNhbGwobix0LG51bGwpKWZvcih2YXIgcz1bdF07cy5sZW5ndGg7KWZvcih2YXIgcj1zLnNoaWZ0KCksbD1yW2FdLG89MDtvPGwubGVuZ3RoO28rKyl7dmFyIGg9bFtvXSxkPWgubm9kZTE9PT1yP2gubm9kZTI6aC5ub2RlMTtpZighZC5fX3Zpc2l0ZWQpe2lmKGUuY2FsbChkLGQscikpcmV0dXJuO3MucHVzaChkKSxkLl9fdmlzaXRlZD0hMH19fX0saS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9bmV3IGkodGhpcy5fZGlyZWN0ZWQpLHQ9MDt0PHRoaXMubm9kZXMubGVuZ3RoO3QrKyllLmFkZE5vZGUodGhpcy5ub2Rlc1t0XS5pZCx0aGlzLm5vZGVzW3RdLmRhdGEpO2Zvcih2YXIgdD0wO3Q8dGhpcy5lZGdlcy5sZW5ndGg7dCsrKXt2YXIgbj10aGlzLmVkZ2VzW3RdO2UuYWRkRWRnZShuLm5vZGUxLmlkLG4ubm9kZTIuaWQsbi5kYXRhKX1yZXR1cm4gZX07dmFyIG49ZnVuY3Rpb24oZSx0KXt0aGlzLmlkPWUsdGhpcy5kYXRhPXR8fG51bGwsdGhpcy5pbkVkZ2VzPVtdLHRoaXMub3V0RWRnZXM9W10sdGhpcy5lZGdlcz1bXX07bi5wcm90b3R5cGUuZGVncmVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZXMubGVuZ3RofSxuLnByb3RvdHlwZS5pbkRlZ3JlZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluRWRnZXMubGVuZ3RofSxuLnByb3RvdHlwZS5vdXREZWdyZWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRFZGdlcy5sZW5ndGh9O3ZhciBhPWZ1bmN0aW9uKGUsdCxpKXt0aGlzLm5vZGUxPWUsdGhpcy5ub2RlMj10LHRoaXMuZGF0YT1pfHxudWxsfTtyZXR1cm4gaS5Ob2RlPW4saS5FZGdlPWEsaS5mcm9tTWF0cml4PWZ1bmN0aW9uKGUsdCxuKXtpZih0JiZ0Lmxlbmd0aCYmdFswXS5sZW5ndGg9PT10Lmxlbmd0aCYmZS5sZW5ndGg9PT10Lmxlbmd0aCl7Zm9yKHZhciBhPXQubGVuZ3RoLG89bmV3IGkobikscz0wO2E+cztzKyspe3ZhciByPW8uYWRkTm9kZShlW3NdLmlkLGVbc10pO3IuZGF0YS52YWx1ZT0wLG4mJihyLmRhdGEub3V0VmFsdWU9ci5kYXRhLmluVmFsdWU9MCl9Zm9yKHZhciBzPTA7YT5zO3MrKylmb3IodmFyIGw9MDthPmw7bCsrKXt2YXIgaD10W3NdW2xdO24mJihvLm5vZGVzW3NdLmRhdGEub3V0VmFsdWUrPWgsby5ub2Rlc1tsXS5kYXRhLmluVmFsdWUrPWgpLG8ubm9kZXNbc10uZGF0YS52YWx1ZSs9aCxvLm5vZGVzW2xdLmRhdGEudmFsdWUrPWh9Zm9yKHZhciBzPTA7YT5zO3MrKylmb3IodmFyIGw9czthPmw7bCsrKXt2YXIgaD10W3NdW2xdO2lmKDAhPT1oKXt2YXIgZD1vLm5vZGVzW3NdLGM9by5ub2Rlc1tsXSxwPW8uYWRkRWRnZShkLGMse30pO2lmKHAuZGF0YS53ZWlnaHQ9aCxzIT09bCYmbiYmdFtsXVtzXSl7dmFyIG09by5hZGRFZGdlKGMsZCx7fSk7bS5kYXRhLndlaWdodD10W2xdW3NdfX19cmV0dXJuIG99fSxpfSksZGVmaW5lKFwiZWNoYXJ0cy9sYXlvdXQvRm9yY2VcIixbXCJyZXF1aXJlXCIsXCIuL2ZvcmNlTGF5b3V0V29ya2VyXCIsXCJ6cmVuZGVyL3Rvb2wvdmVjdG9yXCJdLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgV29ya2VyJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgQmxvYil0cnl7dmFyIGU9bmV3IEJsb2IoW24uZ2V0V29ya2VyQ29kZSgpXSk7aT13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChlKX1jYXRjaCh0KXtpPVwiXCJ9cmV0dXJuIGl9dmFyIGksbj1lKFwiLi9mb3JjZUxheW91dFdvcmtlclwiKSxhPWUoXCJ6cmVuZGVyL3Rvb2wvdmVjdG9yXCIpLG89d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMTYpfSxzPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBGbG9hdDMyQXJyYXk/QXJyYXk6RmxvYXQzMkFycmF5LHI9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGkmJnQoKSxlPWV8fHt9LHRoaXMud2lkdGg9ZS53aWR0aHx8NTAwLHRoaXMuaGVpZ2h0PWUuaGVpZ2h0fHw1MDAsdGhpcy5jZW50ZXI9ZS5jZW50ZXJ8fFt0aGlzLndpZHRoLzIsdGhpcy5oZWlnaHQvMl0sdGhpcy5yYXRpb1NjYWxpbmc9ZS5yYXRpb1NjYWxpbmd8fCExLHRoaXMuc2NhbGluZz1lLnNjYWxpbmd8fDEsdGhpcy5ncmF2aXR5PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlLmdyYXZpdHk/ZS5ncmF2aXR5OjEsdGhpcy5sYXJnZT1lLmxhcmdlfHwhMSx0aGlzLnByZXZlbnROb2RlT3ZlcmxhcD1lLnByZXZlbnROb2RlT3ZlcmxhcHx8ITEsdGhpcy5wcmV2ZW50Tm9kZUVkZ2VPdmVybGFwPWUucHJldmVudE5vZGVFZGdlT3ZlcmxhcHx8ITEsdGhpcy5tYXhTcGVlZEluY3JlYXNlPWUubWF4U3BlZWRJbmNyZWFzZXx8MSx0aGlzLm9udXBkYXRlPWUub251cGRhdGV8fGZ1bmN0aW9uKCl7fSx0aGlzLnRlbXBlcmF0dXJlPWUudGVtcGVyYXR1cmV8fDEsdGhpcy5jb29sRG93bj1lLmNvb2xEb3dufHwuOTksdGhpcy5fbGF5b3V0PW51bGwsdGhpcy5fbGF5b3V0V29ya2VyPW51bGw7dmFyIG49dGhpcyxhPXRoaXMuXyRvbnVwZGF0ZTt0aGlzLl8kb251cGRhdGU9ZnVuY3Rpb24oZSl7YS5jYWxsKG4sZSl9fTtyZXR1cm4gci5wcm90b3R5cGUudXBkYXRlQ29uZmlnPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy53aWR0aCx0PXRoaXMuaGVpZ2h0LGk9TWF0aC5taW4oZSx0KSxuPXtjZW50ZXI6dGhpcy5jZW50ZXIsd2lkdGg6dGhpcy5yYXRpb1NjYWxpbmc/ZTppLGhlaWdodDp0aGlzLnJhdGlvU2NhbGluZz90Omksc2NhbGluZzp0aGlzLnNjYWxpbmd8fDEsZ3Jhdml0eTp0aGlzLmdyYXZpdHl8fDEsYmFybmVzSHV0T3B0aW1pemU6dGhpcy5sYXJnZSxwcmV2ZW50Tm9kZU92ZXJsYXA6dGhpcy5wcmV2ZW50Tm9kZU92ZXJsYXAscHJldmVudE5vZGVFZGdlT3ZlcmxhcDp0aGlzLnByZXZlbnROb2RlRWRnZU92ZXJsYXAsbWF4U3BlZWRJbmNyZWFzZTp0aGlzLm1heFNwZWVkSW5jcmVhc2V9O2lmKHRoaXMuX2xheW91dFdvcmtlcil0aGlzLl9sYXlvdXRXb3JrZXIucG9zdE1lc3NhZ2Uoe2NtZDpcInVwZGF0ZUNvbmZpZ1wiLGNvbmZpZzpufSk7ZWxzZSBmb3IodmFyIGEgaW4gbil0aGlzLl9sYXlvdXRbYV09blthXX0sci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihlLHQpe2lmKGkmJnQpdHJ5e3RoaXMuX2xheW91dFdvcmtlcnx8KHRoaXMuX2xheW91dFdvcmtlcj1uZXcgV29ya2VyKGkpLHRoaXMuX2xheW91dFdvcmtlci5vbm1lc3NhZ2U9dGhpcy5fJG9udXBkYXRlKSx0aGlzLl9sYXlvdXQ9bnVsbH1jYXRjaChhKXt0aGlzLl9sYXlvdXRXb3JrZXI9bnVsbCx0aGlzLl9sYXlvdXR8fCh0aGlzLl9sYXlvdXQ9bmV3IG4pfWVsc2UgdGhpcy5fbGF5b3V0fHwodGhpcy5fbGF5b3V0PW5ldyBuKSx0aGlzLl9sYXlvdXRXb3JrZXImJih0aGlzLl9sYXlvdXRXb3JrZXIudGVybWluYXRlKCksdGhpcy5fbGF5b3V0V29ya2VyPW51bGwpO3RoaXMudGVtcGVyYXR1cmU9MSx0aGlzLmdyYXBoPWU7Zm9yKHZhciBvPWUubm9kZXMubGVuZ3RoLHI9bmV3IHMoMipvKSxsPW5ldyBzKG8pLGg9bmV3IHMobyksZD0wO28+ZDtkKyspe3ZhciBjPWUubm9kZXNbZF07clsyKmRdPWMubGF5b3V0LnBvc2l0aW9uWzBdLHJbMipkKzFdPWMubGF5b3V0LnBvc2l0aW9uWzFdLGxbZF09XCJ1bmRlZmluZWRcIj09dHlwZW9mIGMubGF5b3V0Lm1hc3M/MTpjLmxheW91dC5tYXNzLGhbZF09XCJ1bmRlZmluZWRcIj09dHlwZW9mIGMubGF5b3V0LnNpemU/MTpjLmxheW91dC5zaXplLGMubGF5b3V0Ll9faW5kZXg9ZH1vPWUuZWRnZXMubGVuZ3RoO2Zvcih2YXIgcD1uZXcgcygyKm8pLG09bmV3IHMobyksZD0wO28+ZDtkKyspe3ZhciB1PWUuZWRnZXNbZF07cFsyKmRdPXUubm9kZTEubGF5b3V0Ll9faW5kZXgscFsyKmQrMV09dS5ub2RlMi5sYXlvdXQuX19pbmRleCxtW2RdPXUubGF5b3V0LndlaWdodHx8MX10aGlzLl9sYXlvdXRXb3JrZXI/dGhpcy5fbGF5b3V0V29ya2VyLnBvc3RNZXNzYWdlKHtjbWQ6XCJpbml0XCIsbm9kZXNQb3NpdGlvbjpyLG5vZGVzTWFzczpsLG5vZGVzU2l6ZTpoLGVkZ2VzOnAsZWRnZXNXZWlnaHQ6bX0pOih0aGlzLl9sYXlvdXQuaW5pdE5vZGVzKHIsbCxoKSx0aGlzLl9sYXlvdXQuaW5pdEVkZ2VzKHAsbSkpLHRoaXMudXBkYXRlQ29uZmlnKCl9LHIucHJvdG90eXBlLnN0ZXA9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ncmFwaC5ub2RlcztpZih0aGlzLl9sYXlvdXRXb3JrZXIpe2Zvcih2YXIgaT1uZXcgcygyKnQubGVuZ3RoKSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07aVsyKm5dPXIubGF5b3V0LnBvc2l0aW9uWzBdLGlbMipuKzFdPXIubGF5b3V0LnBvc2l0aW9uWzFdfXRoaXMuX2xheW91dFdvcmtlci5wb3N0TWVzc2FnZShpLmJ1ZmZlcixbaS5idWZmZXJdKSx0aGlzLl9sYXlvdXRXb3JrZXIucG9zdE1lc3NhZ2Uoe2NtZDpcInVwZGF0ZVwiLHN0ZXBzOmUsdGVtcGVyYXR1cmU6dGhpcy50ZW1wZXJhdHVyZSxjb29sRG93bjp0aGlzLmNvb2xEb3dufSk7Zm9yKHZhciBuPTA7ZT5uO24rKyl0aGlzLnRlbXBlcmF0dXJlKj10aGlzLmNvb2xEb3dufWVsc2V7byh0aGlzLl8kb251cGRhdGUpO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO2EuY29weSh0aGlzLl9sYXlvdXQubm9kZXNbbl0ucG9zaXRpb24sci5sYXlvdXQucG9zaXRpb24pfWZvcih2YXIgbj0wO2U+bjtuKyspdGhpcy5fbGF5b3V0LnRlbXBlcmF0dXJlPXRoaXMudGVtcGVyYXR1cmUsdGhpcy5fbGF5b3V0LnVwZGF0ZSgpLHRoaXMudGVtcGVyYXR1cmUqPXRoaXMuY29vbERvd259fSxyLnByb3RvdHlwZS5fJG9udXBkYXRlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2xheW91dFdvcmtlcil7Zm9yKHZhciB0PW5ldyBGbG9hdDMyQXJyYXkoZS5kYXRhKSxpPTA7aTx0aGlzLmdyYXBoLm5vZGVzLmxlbmd0aDtpKyspe3ZhciBuPXRoaXMuZ3JhcGgubm9kZXNbaV07bi5sYXlvdXQucG9zaXRpb25bMF09dFsyKmldLG4ubGF5b3V0LnBvc2l0aW9uWzFdPXRbMippKzFdfXRoaXMub251cGRhdGUmJnRoaXMub251cGRhdGUoKX1lbHNlIGlmKHRoaXMuX2xheW91dCl7Zm9yKHZhciBpPTA7aTx0aGlzLmdyYXBoLm5vZGVzLmxlbmd0aDtpKyspe3ZhciBuPXRoaXMuZ3JhcGgubm9kZXNbaV07YS5jb3B5KG4ubGF5b3V0LnBvc2l0aW9uLHRoaXMuX2xheW91dC5ub2Rlc1tpXS5wb3NpdGlvbil9dGhpcy5vbnVwZGF0ZSYmdGhpcy5vbnVwZGF0ZSgpfX0sci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2xheW91dFdvcmtlciYmdGhpcy5fbGF5b3V0V29ya2VyLnRlcm1pbmF0ZSgpLHRoaXMuX2xheW91dFdvcmtlcj1udWxsLHRoaXMuX2xheW91dD1udWxsfSxyfSksZGVmaW5lKFwienJlbmRlci9zaGFwZS9CZXppZXJDdXJ2ZVwiLFtcInJlcXVpcmVcIixcIi4vQmFzZVwiLFwiLi4vdG9vbC91dGlsXCJdLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciB0PWUoXCIuL0Jhc2VcIiksaT1mdW5jdGlvbihlKXt0aGlzLmJydXNoVHlwZU9ubHk9XCJzdHJva2VcIix0aGlzLnRleHRQb3NpdGlvbj1cImVuZFwiLHQuY2FsbCh0aGlzLGUpfTtyZXR1cm4gaS5wcm90b3R5cGU9e3R5cGU6XCJiZXppZXItY3VydmVcIixidWlsZFBhdGg6ZnVuY3Rpb24oZSx0KXtlLm1vdmVUbyh0LnhTdGFydCx0LnlTdGFydCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQuY3BYMiYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQuY3BZMj9lLmJlemllckN1cnZlVG8odC5jcFgxLHQuY3BZMSx0LmNwWDIsdC5jcFkyLHQueEVuZCx0LnlFbmQpOmUucXVhZHJhdGljQ3VydmVUbyh0LmNwWDEsdC5jcFkxLHQueEVuZCx0LnlFbmQpfSxnZXRSZWN0OmZ1bmN0aW9uKGUpe2lmKGUuX19yZWN0KXJldHVybiBlLl9fcmVjdDt2YXIgdD1NYXRoLm1pbihlLnhTdGFydCxlLnhFbmQsZS5jcFgxKSxpPU1hdGgubWluKGUueVN0YXJ0LGUueUVuZCxlLmNwWTEpLG49TWF0aC5tYXgoZS54U3RhcnQsZS54RW5kLGUuY3BYMSksYT1NYXRoLm1heChlLnlTdGFydCxlLnlFbmQsZS5jcFkxKSxvPWUuY3BYMixzPWUuY3BZMjtcInVuZGVmaW5lZFwiIT10eXBlb2YgbyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHMmJih0PU1hdGgubWluKHQsbyksaT1NYXRoLm1pbihpLHMpLG49TWF0aC5tYXgobixvKSxhPU1hdGgubWF4KGEscykpO3ZhciByPWUubGluZVdpZHRofHwxO3JldHVybiBlLl9fcmVjdD17eDp0LXIseTppLXIsd2lkdGg6bi10K3IsaGVpZ2h0OmEtaStyfSxlLl9fcmVjdH19LGUoXCIuLi90b29sL3V0aWxcIikuaW5oZXJpdHMoaSx0KSxpfSksZGVmaW5lKFwiZWNoYXJ0cy9sYXlvdXQvZm9yY2VMYXlvdXRXb3JrZXJcIixbXCJyZXF1aXJlXCIsXCJ6cmVuZGVyL3Rvb2wvdmVjdG9yXCJdLGZ1bmN0aW9uIGUodCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSgpe3RoaXMuc3ViUmVnaW9ucz1bXSx0aGlzLm5TdWJSZWdpb25zPTAsdGhpcy5ub2RlPW51bGwsdGhpcy5tYXNzPTAsdGhpcy5jZW50ZXJPZk1hc3M9bnVsbCx0aGlzLmJib3g9bmV3IGwoNCksdGhpcy5zaXplPTB9ZnVuY3Rpb24gbigpe3RoaXMucG9zaXRpb249cy5jcmVhdGUoKSx0aGlzLmZvcmNlPXMuY3JlYXRlKCksdGhpcy5mb3JjZVByZXY9cy5jcmVhdGUoKSx0aGlzLnNwZWVkPXMuY3JlYXRlKCksdGhpcy5zcGVlZFByZXY9cy5jcmVhdGUoKSx0aGlzLm1hc3M9MSx0aGlzLmluRGVncmVlPTAsdGhpcy5vdXREZWdyZWU9MH1mdW5jdGlvbiBhKGUsdCl7dGhpcy5ub2RlMT1lLHRoaXMubm9kZTI9dCx0aGlzLndlaWdodD0xfWZ1bmN0aW9uIG8oKXt0aGlzLmJhcm5lc0h1dE9wdGltaXplPSExLHRoaXMuYmFybmVzSHV0VGhldGE9MS41LHRoaXMucmVwdWxzaW9uQnlEZWdyZWU9ITEsdGhpcy5wcmV2ZW50Tm9kZU92ZXJsYXA9ITEsdGhpcy5wcmV2ZW50Tm9kZUVkZ2VPdmVybGFwPSExLHRoaXMuc3Ryb25nR3Jhdml0eT0hMCx0aGlzLmdyYXZpdHk9MSx0aGlzLnNjYWxpbmc9MSx0aGlzLmVkZ2VXZWlnaHRJbmZsdWVuY2U9MSx0aGlzLmNlbnRlcj1bMCwwXSx0aGlzLndpZHRoPTUwMCx0aGlzLmhlaWdodD01MDAsdGhpcy5tYXhTcGVlZEluY3JlYXNlPTEsdGhpcy5ub2Rlcz1bXSx0aGlzLmVkZ2VzPVtdLHRoaXMuYmJveD1uZXcgbCg0KSx0aGlzLl9yb290UmVnaW9uPW5ldyBpLHRoaXMuX3Jvb3RSZWdpb24uY2VudGVyT2ZNYXNzPXMuY3JlYXRlKCksdGhpcy5fbWFzc0Fycj1udWxsLHRoaXMuX2s9MH12YXIgcyxyPVwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCI9PXR5cGVvZiB0O3M9cj97Y3JlYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIGk9bmV3IEZsb2F0MzJBcnJheSgyKTtyZXR1cm4gaVswXT1lfHwwLGlbMV09dHx8MCxpfSxkaXN0OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dFswXS1lWzBdLG49dFsxXS1lWzFdO3JldHVybiBNYXRoLnNxcnQoaSppK24qbil9LGxlbjpmdW5jdGlvbihlKXt2YXIgdD1lWzBdLGk9ZVsxXTtyZXR1cm4gTWF0aC5zcXJ0KHQqdCtpKmkpfSxzY2FsZUFuZEFkZDpmdW5jdGlvbihlLHQsaSxuKXtyZXR1cm4gZVswXT10WzBdK2lbMF0qbixlWzFdPXRbMV0raVsxXSpuLGV9LHNjYWxlOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gZVswXT10WzBdKmksZVsxXT10WzFdKmksZX0sYWRkOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gZVswXT10WzBdK2lbMF0sZVsxXT10WzFdK2lbMV0sZX0sc3ViOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gZVswXT10WzBdLWlbMF0sZVsxXT10WzFdLWlbMV0sZX0sZG90OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbMF0qdFswXStlWzFdKnRbMV19LG5vcm1hbGl6ZTpmdW5jdGlvbihlLHQpe3ZhciBpPXRbMF0sbj10WzFdLGE9aSppK24qbjtyZXR1cm4gYT4wJiYoYT0xL01hdGguc3FydChhKSxlWzBdPXRbMF0qYSxlWzFdPXRbMV0qYSksZX0sbmVnYXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbMF09LXRbMF0sZVsxXT0tdFsxXSxlfSxjb3B5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbMF09dFswXSxlWzFdPXRbMV0sZX0sc2V0OmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gZVswXT10LGVbMV09aSxlfX06dChcInpyZW5kZXIvdG9vbC92ZWN0b3JcIik7dmFyIGw9XCJ1bmRlZmluZWRcIj09dHlwZW9mIEZsb2F0MzJBcnJheT9BcnJheTpGbG9hdDMyQXJyYXk7aWYoaS5wcm90b3R5cGUuYmVmb3JlVXBkYXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5TdWJSZWdpb25zO2UrKyl0aGlzLnN1YlJlZ2lvbnNbZV0uYmVmb3JlVXBkYXRlKCk7dGhpcy5tYXNzPTAsdGhpcy5jZW50ZXJPZk1hc3MmJih0aGlzLmNlbnRlck9mTWFzc1swXT0wLHRoaXMuY2VudGVyT2ZNYXNzWzFdPTApLHRoaXMublN1YlJlZ2lvbnM9MCx0aGlzLm5vZGU9bnVsbH0saS5wcm90b3R5cGUuYWZ0ZXJVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLnN1YlJlZ2lvbnMubGVuZ3RoPXRoaXMublN1YlJlZ2lvbnM7Zm9yKHZhciBlPTA7ZTx0aGlzLm5TdWJSZWdpb25zO2UrKyl0aGlzLnN1YlJlZ2lvbnNbZV0uYWZ0ZXJVcGRhdGUoKX0saS5wcm90b3R5cGUuYWRkTm9kZT1mdW5jdGlvbihlKXtpZigwPT09dGhpcy5uU3ViUmVnaW9ucyl7aWYobnVsbD09dGhpcy5ub2RlKXJldHVybiB2b2lkKHRoaXMubm9kZT1lKTt0aGlzLl9hZGROb2RlVG9TdWJSZWdpb24odGhpcy5ub2RlKSx0aGlzLm5vZGU9bnVsbH10aGlzLl9hZGROb2RlVG9TdWJSZWdpb24oZSksdGhpcy5fdXBkYXRlQ2VudGVyT2ZNYXNzKGUpfSxpLnByb3RvdHlwZS5maW5kU3ViUmVnaW9uPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPTA7aTx0aGlzLm5TdWJSZWdpb25zO2krKyl7dmFyIG49dGhpcy5zdWJSZWdpb25zW2ldO2lmKG4uY29udGFpbihlLHQpKXJldHVybiBufX0saS5wcm90b3R5cGUuY29udGFpbj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmJib3hbMF08PWUmJnRoaXMuYmJveFsyXT49ZSYmdGhpcy5iYm94WzFdPD10JiZ0aGlzLmJib3hbM10+PXR9LGkucHJvdG90eXBlLnNldEJCb3g9ZnVuY3Rpb24oZSx0LGksbil7dGhpcy5iYm94WzBdPWUsdGhpcy5iYm94WzFdPXQsdGhpcy5iYm94WzJdPWksdGhpcy5iYm94WzNdPW4sdGhpcy5zaXplPShpLWUrbi10KS8yfSxpLnByb3RvdHlwZS5fbmV3U3ViUmVnaW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdWJSZWdpb25zW3RoaXMublN1YlJlZ2lvbnNdO3JldHVybiBlfHwoZT1uZXcgaSx0aGlzLnN1YlJlZ2lvbnNbdGhpcy5uU3ViUmVnaW9uc109ZSksdGhpcy5uU3ViUmVnaW9ucysrLGV9LGkucHJvdG90eXBlLl9hZGROb2RlVG9TdWJSZWdpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5maW5kU3ViUmVnaW9uKGUucG9zaXRpb25bMF0sZS5wb3NpdGlvblsxXSksaT10aGlzLmJib3g7aWYoIXQpe3ZhciBuPShpWzBdK2lbMl0pLzIsYT0oaVsxXStpWzNdKS8yLG89KGlbMl0taVswXSkvMixzPShpWzNdLWlbMV0pLzIscj1lLnBvc2l0aW9uWzBdPj1uPzE6MCxsPWUucG9zaXRpb25bMV0+PWE/MTowLHQ9dGhpcy5fbmV3U3ViUmVnaW9uKCk7dC5zZXRCQm94KHIqbytpWzBdLGwqcytpWzFdLChyKzEpKm8raVswXSwobCsxKSpzK2lbMV0pfXQuYWRkTm9kZShlKX0saS5wcm90b3R5cGUuX3VwZGF0ZUNlbnRlck9mTWFzcz1mdW5jdGlvbihlKXtudWxsPT10aGlzLmNlbnRlck9mTWFzcyYmKHRoaXMuY2VudGVyT2ZNYXNzPXMuY3JlYXRlKCkpO3ZhciB0PXRoaXMuY2VudGVyT2ZNYXNzWzBdKnRoaXMubWFzcyxpPXRoaXMuY2VudGVyT2ZNYXNzWzFdKnRoaXMubWFzczt0Kz1lLnBvc2l0aW9uWzBdKmUubWFzcyxpKz1lLnBvc2l0aW9uWzFdKmUubWFzcyx0aGlzLm1hc3MrPWUubWFzcyx0aGlzLmNlbnRlck9mTWFzc1swXT10L3RoaXMubWFzcyx0aGlzLmNlbnRlck9mTWFzc1sxXT1pL3RoaXMubWFzc30sby5wcm90b3R5cGUubm9kZVRvTm9kZVJlcHVsc2lvbkZhY3Rvcj1mdW5jdGlvbihlLHQsaSl7cmV0dXJuIGkqaSplL3R9LG8ucHJvdG90eXBlLmVkZ2VUb05vZGVSZXB1bHNpb25GYWN0b3I9ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBpKmUvdH0sby5wcm90b3R5cGUuYXR0cmFjdGlvbkZhY3Rvcj1mdW5jdGlvbihlLHQsaSl7cmV0dXJuIGUqdC9pfSxvLnByb3RvdHlwZS5pbml0Tm9kZXM9ZnVuY3Rpb24oZSx0LGkpe3RoaXMudGVtcGVyYXR1cmU9MTt2YXIgYT1lLmxlbmd0aC8yO3RoaXMubm9kZXMubGVuZ3RoPTA7Zm9yKHZhciBvPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBpLHM9MDthPnM7cysrKXt2YXIgcj1uZXcgbjtyLnBvc2l0aW9uWzBdPWVbMipzXSxyLnBvc2l0aW9uWzFdPWVbMipzKzFdLHIubWFzcz10W3NdLG8mJihyLnNpemU9aVtzXSksdGhpcy5ub2Rlcy5wdXNoKHIpfXRoaXMuX21hc3NBcnI9dCxvJiYodGhpcy5fc2l6ZUFycj1pKX0sby5wcm90b3R5cGUuaW5pdEVkZ2VzPWZ1bmN0aW9uKGUsdCl7dmFyIGk9ZS5sZW5ndGgvMjt0aGlzLmVkZ2VzLmxlbmd0aD0wO2Zvcih2YXIgbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgdCxvPTA7aT5vO28rKyl7dmFyIHM9ZVsyKm9dLHI9ZVsyKm8rMV0sbD10aGlzLm5vZGVzW3NdLGg9dGhpcy5ub2Rlc1tyXTtpZihsJiZoKXtsLm91dERlZ3JlZSsrLGguaW5EZWdyZWUrKzt2YXIgZD1uZXcgYShsLGgpO24mJihkLndlaWdodD10W29dKSx0aGlzLmVkZ2VzLnB1c2goZCl9fX0sby5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ub2Rlcy5sZW5ndGg7aWYodGhpcy51cGRhdGVCQm94KCksdGhpcy5faz0uNCp0aGlzLnNjYWxpbmcqTWF0aC5zcXJ0KHRoaXMud2lkdGgqdGhpcy5oZWlnaHQvZSksdGhpcy5iYXJuZXNIdXRPcHRpbWl6ZSl7dGhpcy5fcm9vdFJlZ2lvbi5zZXRCQm94KHRoaXMuYmJveFswXSx0aGlzLmJib3hbMV0sdGhpcy5iYm94WzJdLHRoaXMuYmJveFszXSksdGhpcy5fcm9vdFJlZ2lvbi5iZWZvcmVVcGRhdGUoKTtmb3IodmFyIHQ9MDtlPnQ7dCsrKXRoaXMuX3Jvb3RSZWdpb24uYWRkTm9kZSh0aGlzLm5vZGVzW3RdKTt0aGlzLl9yb290UmVnaW9uLmFmdGVyVXBkYXRlKCl9ZWxzZXt2YXIgaT0wLG49dGhpcy5fcm9vdFJlZ2lvbi5jZW50ZXJPZk1hc3M7cy5zZXQobiwwLDApO2Zvcih2YXIgdD0wO2U+dDt0Kyspe3ZhciBhPXRoaXMubm9kZXNbdF07aSs9YS5tYXNzLHMuc2NhbGVBbmRBZGQobixuLGEucG9zaXRpb24sYS5tYXNzKX1pPjAmJnMuc2NhbGUobixuLDEvaSl9dGhpcy51cGRhdGVGb3JjZSgpLHRoaXMudXBkYXRlUG9zaXRpb24oKX0sby5wcm90b3R5cGUudXBkYXRlRm9yY2U9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5ub2Rlcy5sZW5ndGgsdD0wO2U+dDt0Kyspe3ZhciBpPXRoaXMubm9kZXNbdF07cy5jb3B5KGkuZm9yY2VQcmV2LGkuZm9yY2UpLHMuY29weShpLnNwZWVkUHJldixpLnNwZWVkKSxzLnNldChpLmZvcmNlLDAsMCl9dGhpcy51cGRhdGVOb2RlTm9kZUZvcmNlKCksdGhpcy5ncmF2aXR5PjAmJnRoaXMudXBkYXRlR3Jhdml0eUZvcmNlKCksdGhpcy51cGRhdGVFZGdlRm9yY2UoKSx0aGlzLnByZXZlbnROb2RlRWRnZU92ZXJsYXAmJnRoaXMudXBkYXRlTm9kZUVkZ2VGb3JjZSgpfSxvLnByb3RvdHlwZS51cGRhdGVQb3NpdGlvbj1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLm5vZGVzLmxlbmd0aCx0PXMuY3JlYXRlKCksaT0wO2U+aTtpKyspe3ZhciBuPXRoaXMubm9kZXNbaV0sYT1uLnNwZWVkO3Muc2NhbGUobi5mb3JjZSxuLmZvcmNlLDEvMzApO3ZhciBvPXMubGVuKG4uZm9yY2UpKy4xLHI9TWF0aC5taW4obyw1MDApL287cy5zY2FsZShuLmZvcmNlLG4uZm9yY2Uscikscy5hZGQoYSxhLG4uZm9yY2UpLHMuc2NhbGUoYSxhLHRoaXMudGVtcGVyYXR1cmUpLHMuc3ViKHQsYSxuLnNwZWVkUHJldik7dmFyIGw9cy5sZW4odCk7aWYobD4wKXtzLnNjYWxlKHQsdCwxL2wpO3ZhciBoPXMubGVuKG4uc3BlZWRQcmV2KTtoPjAmJihsPU1hdGgubWluKGwvaCx0aGlzLm1heFNwZWVkSW5jcmVhc2UpKmgscy5zY2FsZUFuZEFkZChhLG4uc3BlZWRQcmV2LHQsbCkpfXZhciBkPXMubGVuKGEpLHI9TWF0aC5taW4oZCwxMDApLyhkKy4xKTtzLnNjYWxlKGEsYSxyKSxzLmFkZChuLnBvc2l0aW9uLG4ucG9zaXRpb24sYSl9fSxvLnByb3RvdHlwZS51cGRhdGVOb2RlTm9kZUZvcmNlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMubm9kZXMubGVuZ3RoLHQ9MDtlPnQ7dCsrKXt2YXIgaT10aGlzLm5vZGVzW3RdO2lmKHRoaXMuYmFybmVzSHV0T3B0aW1pemUpdGhpcy5hcHBseVJlZ2lvblRvTm9kZVJlcHVsc2lvbih0aGlzLl9yb290UmVnaW9uLGkpO2Vsc2UgZm9yKHZhciBuPXQrMTtlPm47bisrKXt2YXIgYT10aGlzLm5vZGVzW25dO3RoaXMuYXBwbHlOb2RlVG9Ob2RlUmVwdWxzaW9uKGksYSwhMSl9fX0sby5wcm90b3R5cGUudXBkYXRlR3Jhdml0eUZvcmNlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5vZGVzLmxlbmd0aDtlKyspdGhpcy5hcHBseU5vZGVHcmF2aXR5KHRoaXMubm9kZXNbZV0pfSxvLnByb3RvdHlwZS51cGRhdGVFZGdlRm9yY2U9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMuZWRnZXMubGVuZ3RoO2UrKyl0aGlzLmFwcGx5RWRnZUF0dHJhY3Rpb24odGhpcy5lZGdlc1tlXSl9LG8ucHJvdG90eXBlLnVwZGF0ZU5vZGVFZGdlRm9yY2U9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMubm9kZXMubGVuZ3RoO2UrKylmb3IodmFyIHQ9MDt0PHRoaXMuZWRnZXMubGVuZ3RoO3QrKyl0aGlzLmFwcGx5RWRnZVRvTm9kZVJlcHVsc2lvbih0aGlzLmVkZ2VzW3RdLHRoaXMubm9kZXNbZV0pfSxvLnByb3RvdHlwZS5hcHBseVJlZ2lvblRvTm9kZVJlcHVsc2lvbj1mdW5jdGlvbigpe3ZhciBlPXMuY3JlYXRlKCk7cmV0dXJuIGZ1bmN0aW9uKHQsaSl7aWYodC5ub2RlKXRoaXMuYXBwbHlOb2RlVG9Ob2RlUmVwdWxzaW9uKHQubm9kZSxpLCEwKTtlbHNle2lmKDA9PT10Lm1hc3MmJjA9PT1pLm1hc3MpcmV0dXJuO3Muc3ViKGUsaS5wb3NpdGlvbix0LmNlbnRlck9mTWFzcyk7dmFyIG49ZVswXSplWzBdK2VbMV0qZVsxXTtpZihuPnRoaXMuYmFybmVzSHV0VGhldGEqdC5zaXplKnQuc2l6ZSl7dmFyIGE9dGhpcy5fayp0aGlzLl9rKihpLm1hc3MrdC5tYXNzKS8obisxKTtzLnNjYWxlQW5kQWRkKGkuZm9yY2UsaS5mb3JjZSxlLDIqYSl9ZWxzZSBmb3IodmFyIG89MDtvPHQublN1YlJlZ2lvbnM7bysrKXRoaXMuYXBwbHlSZWdpb25Ub05vZGVSZXB1bHNpb24odC5zdWJSZWdpb25zW29dLGkpfX19KCksby5wcm90b3R5cGUuYXBwbHlOb2RlVG9Ob2RlUmVwdWxzaW9uPWZ1bmN0aW9uKCl7dmFyIGU9cy5jcmVhdGUoKTtyZXR1cm4gZnVuY3Rpb24odCxpLG4pe2lmKHQhPT1pJiYoMCE9PXQubWFzc3x8MCE9PWkubWFzcykpe3Muc3ViKGUsdC5wb3NpdGlvbixpLnBvc2l0aW9uKTt2YXIgYT1lWzBdKmVbMF0rZVsxXSplWzFdO2lmKDAhPT1hKXt2YXIgbyxyPXQubWFzcytpLm1hc3MsbD1NYXRoLnNxcnQoYSk7cy5zY2FsZShlLGUsMS9sKSx0aGlzLnByZXZlbnROb2RlT3ZlcmxhcD8obD1sLXQuc2l6ZS1pLnNpemUsbD4wP289dGhpcy5ub2RlVG9Ob2RlUmVwdWxzaW9uRmFjdG9yKHIsbCx0aGlzLl9rKTowPj1sJiYobz10aGlzLl9rKnRoaXMuX2sqMTAqcikpOm89dGhpcy5ub2RlVG9Ob2RlUmVwdWxzaW9uRmFjdG9yKHIsbCx0aGlzLl9rKSxufHxzLnNjYWxlQW5kQWRkKHQuZm9yY2UsdC5mb3JjZSxlLDIqbykscy5zY2FsZUFuZEFkZChpLmZvcmNlLGkuZm9yY2UsZSwyKi1vKX19fX0oKSxvLnByb3RvdHlwZS5hcHBseUVkZ2VBdHRyYWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9cy5jcmVhdGUoKTtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGk9dC5ub2RlMSxuPXQubm9kZTI7cy5zdWIoZSxpLnBvc2l0aW9uLG4ucG9zaXRpb24pO3ZhciBhLG89cy5sZW4oZSk7YT0wPT09dGhpcy5lZGdlV2VpZ2h0SW5mbHVlbmNlPzE6MT09dGhpcy5lZGdlV2VpZ2h0SW5mbHVlbmNlP3Qud2VpZ2h0Ok1hdGgucG93KHQud2VpZ2h0LHRoaXMuZWRnZVdlaWdodEluZmx1ZW5jZSk7dmFyIHI7aWYoISh0aGlzLnByZXZlbnRPdmVybGFwJiYobz1vLWkuc2l6ZS1uLnNpemUsMD49bykpKXt2YXIgcj10aGlzLmF0dHJhY3Rpb25GYWN0b3IoYSxvLHRoaXMuX2spO3Muc2NhbGVBbmRBZGQoaS5mb3JjZSxpLmZvcmNlLGUsLXIpLHMuc2NhbGVBbmRBZGQobi5mb3JjZSxuLmZvcmNlLGUscil9fX0oKSxvLnByb3RvdHlwZS5hcHBseU5vZGVHcmF2aXR5PWZ1bmN0aW9uKCl7dmFyIGU9cy5jcmVhdGUoKTtyZXR1cm4gZnVuY3Rpb24odCl7cy5zdWIoZSx0aGlzLmNlbnRlcix0LnBvc2l0aW9uKSx0aGlzLndpZHRoPnRoaXMuaGVpZ2h0P2VbMV0qPXRoaXMud2lkdGgvdGhpcy5oZWlnaHQ6ZVswXSo9dGhpcy5oZWlnaHQvdGhpcy53aWR0aDt2YXIgaT1zLmxlbihlKS8xMDA7dGhpcy5zdHJvbmdHcmF2aXR5P3Muc2NhbGVBbmRBZGQodC5mb3JjZSx0LmZvcmNlLGUsaSp0aGlzLmdyYXZpdHkqdC5tYXNzKTpzLnNjYWxlQW5kQWRkKHQuZm9yY2UsdC5mb3JjZSxlLHRoaXMuZ3Jhdml0eSp0Lm1hc3MvKGkrMSkpfX0oKSxvLnByb3RvdHlwZS5hcHBseUVkZ2VUb05vZGVSZXB1bHNpb249ZnVuY3Rpb24oKXt2YXIgZT1zLmNyZWF0ZSgpLHQ9cy5jcmVhdGUoKSxpPXMuY3JlYXRlKCk7cmV0dXJuIGZ1bmN0aW9uKG4sYSl7dmFyIG89bi5ub2RlMSxyPW4ubm9kZTI7aWYobyE9PWEmJnIhPT1hKXtzLnN1YihlLHIucG9zaXRpb24sby5wb3NpdGlvbikscy5zdWIodCxhLnBvc2l0aW9uLG8ucG9zaXRpb24pO3ZhciBsPXMubGVuKGUpO3Muc2NhbGUoZSxlLDEvbCk7dmFyIGg9cy5kb3QoZSx0KTtpZighKDA+aHx8aD5sKSl7cy5zY2FsZUFuZEFkZChpLG8ucG9zaXRpb24sZSxoKTt2YXIgZD1zLmRpc3QoaSxhLnBvc2l0aW9uKS1hLnNpemUsYz10aGlzLmVkZ2VUb05vZGVSZXB1bHNpb25GYWN0b3IoYS5tYXNzLE1hdGgubWF4KGQsLjEpLDEwMCk7cy5zdWIoZSxhLnBvc2l0aW9uLGkpLHMubm9ybWFsaXplKGUsZSkscy5zY2FsZUFuZEFkZChhLmZvcmNlLGEuZm9yY2UsZSxjKSxzLnNjYWxlQW5kQWRkKG8uZm9yY2Usby5mb3JjZSxlLC1jKSxzLnNjYWxlQW5kQWRkKHIuZm9yY2Usci5mb3JjZSxlLC1jKX19fX0oKSxvLnByb3RvdHlwZS51cGRhdGVCQm94PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTEvMCx0PTEvMCxpPS0xLzAsbj0tMS8wLGE9MDthPHRoaXMubm9kZXMubGVuZ3RoO2ErKyl7dmFyIG89dGhpcy5ub2Rlc1thXS5wb3NpdGlvbjtlPU1hdGgubWluKGUsb1swXSksdD1NYXRoLm1pbih0LG9bMV0pLGk9TWF0aC5tYXgoaSxvWzBdKSxuPU1hdGgubWF4KG4sb1sxXSl9dGhpcy5iYm94WzBdPWUsdGhpcy5iYm94WzFdPXQsdGhpcy5iYm94WzJdPWksdGhpcy5iYm94WzNdPW59LG8uZ2V0V29ya2VyQ29kZT1mdW5jdGlvbigpe3ZhciB0PWUudG9TdHJpbmcoKTtyZXR1cm4gdC5zbGljZSh0LmluZGV4T2YoXCJ7XCIpKzEsdC5sYXN0SW5kZXhPZihcInJldHVyblwiKSl9LHIpe3ZhciBoPW51bGw7c2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7aWYoZS5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpe2lmKCFoKXJldHVybjtmb3IodmFyIHQ9bmV3IEZsb2F0MzJBcnJheShlLmRhdGEpLGk9dC5sZW5ndGgvMixuPTA7aT5uO24rKyl7dmFyIGE9aC5ub2Rlc1tuXTthLnBvc2l0aW9uWzBdPXRbMipuXSxhLnBvc2l0aW9uWzFdPXRbMipuKzFdfX1lbHNlIHN3aXRjaChlLmRhdGEuY21kKXtjYXNlXCJpbml0XCI6aHx8KGg9bmV3IG8pLGguaW5pdE5vZGVzKGUuZGF0YS5ub2Rlc1Bvc2l0aW9uLGUuZGF0YS5ub2Rlc01hc3MsZS5kYXRhLm5vZGVzU2l6ZSksaC5pbml0RWRnZXMoZS5kYXRhLmVkZ2VzLGUuZGF0YS5lZGdlc1dlaWdodCk7YnJlYWs7Y2FzZVwidXBkYXRlQ29uZmlnXCI6aWYoaClmb3IodmFyIHMgaW4gZS5kYXRhLmNvbmZpZyloW3NdPWUuZGF0YS5jb25maWdbc107YnJlYWs7Y2FzZVwidXBkYXRlXCI6dmFyIHI9ZS5kYXRhLnN0ZXBzO2lmKGgpe3ZhciBpPWgubm9kZXMubGVuZ3RoLHQ9bmV3IEZsb2F0MzJBcnJheSgyKmkpO2gudGVtcGVyYXR1cmU9ZS5kYXRhLnRlbXBlcmF0dXJlO2Zvcih2YXIgbj0wO3I+bjtuKyspaC51cGRhdGUoKSxoLnRlbXBlcmF0dXJlKj1lLmRhdGEuY29vbERvd247Zm9yKHZhciBuPTA7aT5uO24rKyl7dmFyIGE9aC5ub2Rlc1tuXTt0WzIqbl09YS5wb3NpdGlvblswXSx0WzIqbisxXT1hLnBvc2l0aW9uWzFdfXNlbGYucG9zdE1lc3NhZ2UodC5idWZmZXIsW3QuYnVmZmVyXSl9ZWxzZXt2YXIgbD1uZXcgRmxvYXQzMkFycmF5O3NlbGYucG9zdE1lc3NhZ2UobC5idWZmZXIsW2wuYnVmZmVyXSl9fX19cmV0dXJuIG99KTsiXSwiZmlsZSI6InBsdWdpbnMvZWNoYXJ0cy9jaGFydC9mb3JjZS5qcyJ9
