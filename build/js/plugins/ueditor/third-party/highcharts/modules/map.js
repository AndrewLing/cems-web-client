/*
 Map plugin v0.1 for Highcharts

 (c) 2011-2013 Torstein HÃ¸nsi

 License: www.highcharts.com/license
*/
(function(g){function x(a,b,c){for(var d=4,e=[];d--;)e[d]=Math.round(b.rgba[d]+(a.rgba[d]-b.rgba[d])*(1-c));return"rgba("+e.join(",")+")"}var r=g.Axis,y=g.Chart,s=g.Point,z=g.Pointer,l=g.each,v=g.extend,p=g.merge,n=g.pick,A=g.numberFormat,B=g.getOptions(),k=g.seriesTypes,q=B.plotOptions,t=g.wrap,u=g.Color,w=function(){};B.mapNavigation={buttonOptions:{align:"right",verticalAlign:"bottom",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(0.5)},
text:"+",y:-32},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:0}}};g.splitPath=function(a){var b,a=a.replace(/([A-Za-z])/g," $1 "),a=a.replace(/^\s*/,"").replace(/\s*$/,""),a=a.split(/[ ,]+/);for(b=0;b<a.length;b++)/[a-zA-Z]/.test(a[b])||(a[b]=parseFloat(a[b]));return a};g.maps={};t(r.prototype,"getSeriesExtremes",function(a){var b=this.isXAxis,c,d,e=[];l(this.series,function(a,b){if(a.useMapGeometry)e[b]=a.xData,a.xData=[]});a.call(this);c=n(this.dataMin,Number.MAX_VALUE);d=n(this.dataMax,
Number.MIN_VALUE);l(this.series,function(a,i){if(a.useMapGeometry)c=Math.min(c,a[b?"minX":"minY"]),d=Math.max(d,a[b?"maxX":"maxY"]),a.xData=e[i]});this.dataMin=c;this.dataMax=d});t(r.prototype,"setAxisTranslation",function(a){var b=this.chart,c=b.plotWidth/b.plotHeight,d=this.isXAxis,e=b.xAxis[0];a.call(this);if(b.options.chart.type==="map"&&!d&&e.transA!==void 0)this.transA=e.transA=Math.min(this.transA,e.transA),a=(e.max-e.min)/(this.max-this.min),e=a>c?this:e,c=(e.max-e.min)*e.transA,e.minPixelPadding=
(e.len-c)/2});t(y.prototype,"render",function(a){var b=this,c=b.options.mapNavigation;a.call(b);b.renderMapNavigation();c.zoomOnDoubleClick&&g.addEvent(b.container,"dblclick",function(a){b.pointer.onContainerDblClick(a)});c.zoomOnMouseWheel&&g.addEvent(b.container,document.onmousewheel===void 0?"DOMMouseScroll":"mousewheel",function(a){b.pointer.onContainerMouseWheel(a)})});v(z.prototype,{onContainerDblClick:function(a){var b=this.chart,a=this.normalize(a);b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-
b.plotTop)&&b.mapZoom(0.5,b.xAxis[0].toValue(a.chartX),b.yAxis[0].toValue(a.chartY))},onContainerMouseWheel:function(a){var b=this.chart,c,a=this.normalize(a);c=a.detail||-(a.wheelDelta/120);b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)&&b.mapZoom(c>0?2:0.5,b.xAxis[0].toValue(a.chartX),b.yAxis[0].toValue(a.chartY))}});t(z.prototype,"init",function(a,b,c){a.call(this,b,c);if(c.mapNavigation.enableTouchZoom)this.pinchX=this.pinchHor=this.pinchY=this.pinchVert=!0});v(y.prototype,{renderMapNavigation:function(){var a=
this,b=this.options.mapNavigation,c=b.buttons,d,e,f,i=function(){this.handler.call(a)};if(b.enableButtons)for(d in c)if(c.hasOwnProperty(d))f=p(b.buttonOptions,c[d]),e=a.renderer.button(f.text,0,0,i).attr({width:f.width,height:f.height}).css(f.style).add(),e.handler=f.onclick,e.align(v(f,{width:e.width,height:e.height}),null,"spacingBox")},fitToBox:function(a,b){l([["x","width"],["y","height"]],function(c){var d=c[0],c=c[1];a[d]+a[c]>b[d]+b[c]&&(a[c]>b[c]?(a[c]=b[c],a[d]=b[d]):a[d]=b[d]+b[c]-a[c]);
a[c]>b[c]&&(a[c]=b[c]);a[d]<b[d]&&(a[d]=b[d])});return a},mapZoom:function(a,b,c){if(!this.isMapZooming){var d=this,e=d.xAxis[0],f=e.max-e.min,i=n(b,e.min+f/2),b=f*a,f=d.yAxis[0],h=f.max-f.min,c=n(c,f.min+h/2);a*=h;i-=b/2;h=c-a/2;c=n(d.options.chart.animation,!0);b=d.fitToBox({x:i,y:h,width:b,height:a},{x:e.dataMin,y:f.dataMin,width:e.dataMax-e.dataMin,height:f.dataMax-f.dataMin});e.setExtremes(b.x,b.x+b.width,!1);f.setExtremes(b.y,b.y+b.height,!1);if(e=c?c.duration||500:0)d.isMapZooming=!0,setTimeout(function(){d.isMapZooming=
!1},e);d.redraw()}}});q.map=p(q.scatter,{animation:!1,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,dataLabels:{verticalAlign:"middle"},turboThreshold:0,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.y}<br/>"},states:{normal:{animation:!0}}});r=g.extendClass(s,{applyOptions:function(a,b){var c=s.prototype.applyOptions.call(this,a,b);if(c.path&&typeof c.path==="string")c.path=c.options.path=g.splitPath(c.path);return c},onMouseOver:function(){clearTimeout(this.colorInterval);
s.prototype.onMouseOver.call(this)},onMouseOut:function(){var a=this,b=+new Date,c=u(a.options.color),d=u(a.pointAttr.hover.fill),e=a.series.options.states.normal.animation,f=e&&(e.duration||500);if(f&&c.rgba.length===4&&d.rgba.length===4)delete a.pointAttr[""].fill,clearTimeout(a.colorInterval),a.colorInterval=setInterval(function(){var e=(new Date-b)/f,h=a.graphic;e>1&&(e=1);h&&h.attr("fill",x(d,c,e));e>=1&&clearTimeout(a.colorInterval)},13);s.prototype.onMouseOut.call(a)}});k.map=g.extendClass(k.scatter,
{type:"map",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},colorKey:"y",pointClass:r,trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:w,supportsDrilldown:!0,getExtremesFromAll:!0,useMapGeometry:!0,init:function(a){var b=this,c=a.options.legend.valueDecimals,d=[],e,f,i,h,j,o,m;o=a.options.legend.layout==="horizontal";g.Series.prototype.init.apply(this,arguments);j=b.options.colorRange;if(h=b.options.valueRanges)l(h,function(a){f=a.from;i=a.to;e=
"";f===void 0?e="< ":i===void 0&&(e="> ");f!==void 0&&(e+=A(f,c));f!==void 0&&i!==void 0&&(e+=" - ");i!==void 0&&(e+=A(i,c));d.push(g.extend({chart:b.chart,name:e,options:{},drawLegendSymbol:k.area.prototype.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}},a))}),b.legendItems=d;else if(j)f=j.from,i=j.to,h=j.fromLabel,j=j.toLabel,m=o?[0,0,1,0]:[0,1,0,0],o||(o=h,h=j,j=o),o={linearGradient:{x1:m[0],y1:m[1],x2:m[2],y2:m[3]},stops:[[0,f],[1,i]]},d=[{chart:b.chart,options:{},fromLabel:h,
toLabel:j,color:o,drawLegendSymbol:this.drawLegendSymbolGradient,visible:!0,setState:function(){},setVisible:function(){}}],b.legendItems=d},drawLegendSymbol:k.area.prototype.drawLegendSymbol,drawLegendSymbolGradient:function(a,b){var c=a.options.symbolPadding,d=n(a.options.padding,8),e,f,i=this.chart.renderer.fontMetrics(a.options.itemStyle.fontSize).h,h=a.options.layout==="horizontal",j;j=n(a.options.rectangleLength,200);h?(e=-(c/2),f=0):(e=-j+a.baseline-c/2,f=d+i);b.fromText=this.chart.renderer.text(b.fromLabel,
f,e).attr({zIndex:2}).add(b.legendGroup);f=b.fromText.getBBox();b.legendSymbol=this.chart.renderer.rect(h?f.x+f.width+c:f.x-i-c,f.y,h?j:i,h?i:j,2).attr({zIndex:1}).add(b.legendGroup);j=b.legendSymbol.getBBox();b.toText=this.chart.renderer.text(b.toLabel,j.x+j.width+c,h?e:j.y+j.height-c).attr({zIndex:2}).add(b.legendGroup);e=b.toText.getBBox();h?(a.offsetWidth=f.width+j.width+e.width+c*2+d,a.itemY=i+d):(a.offsetWidth=Math.max(f.width,e.width)+c+j.width+d,a.itemY=j.height+d,a.itemX=c)},getBox:function(a){var b=
Number.MIN_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MAX_VALUE;l(a||this.options.data,function(a){for(var i=a.path,h=i.length,j=!1,g=Number.MIN_VALUE,m=Number.MAX_VALUE,k=Number.MIN_VALUE,l=Number.MAX_VALUE;h--;)typeof i[h]==="number"&&!isNaN(i[h])&&(j?(g=Math.max(g,i[h]),m=Math.min(m,i[h])):(k=Math.max(k,i[h]),l=Math.min(l,i[h])),j=!j);a._maxX=g;a._minX=m;a._maxY=k;a._minY=l;b=Math.max(b,g);c=Math.min(c,m);d=Math.max(d,k);e=Math.min(e,l)});this.minY=e;this.maxY=d;this.minX=c;this.maxX=
b},translatePath:function(a){var b=!1,c=this.xAxis,d=this.yAxis,e,a=[].concat(a);for(e=a.length;e--;)typeof a[e]==="number"&&(a[e]=b?Math.round(c.translate(a[e])):Math.round(d.len-d.translate(a[e])),b=!b);return a},setData:function(){g.Series.prototype.setData.apply(this,arguments);this.getBox()},translate:function(){var a=this,b=Number.MAX_VALUE,c=Number.MIN_VALUE;a.generatePoints();l(a.data,function(d){d.shapeType="path";d.shapeArgs={d:a.translatePath(d.path)};if(typeof d.y==="number")if(d.y>c)c=
d.y;else if(d.y<b)b=d.y});a.translateColors(b,c)},translateColors:function(a,b){var c=this.options,d=c.valueRanges,e=c.colorRange,f=this.colorKey,i,h;e&&(i=u(e.from),h=u(e.to));l(this.data,function(g){var k=g[f],m,l,n;if(d)for(n=d.length;n--;){if(m=d[n],i=m.from,h=m.to,(i===void 0||k>=i)&&(h===void 0||k<=h)){l=m.color;break}}else e&&k!==void 0&&(m=1-(b-k)/(b-a),l=k===null?c.nullColor:x(i,h,m));if(l)g.color=null,g.options.color=l})},drawGraph:w,drawDataLabels:w,drawPoints:function(){var a=this.xAxis,
b=this.yAxis,c=this.colorKey;l(this.data,function(a){a.plotY=1;if(a[c]===null)a[c]=0,a.isNull=!0});k.column.prototype.drawPoints.apply(this);l(this.data,function(d){var e=d.dataLabels,f=a.toPixels(d._minX,!0),g=a.toPixels(d._maxX,!0),h=b.toPixels(d._minY,!0),j=b.toPixels(d._maxY,!0);d.plotX=Math.round(f+(g-f)*n(e&&e.anchorX,0.5));d.plotY=Math.round(h+(j-h)*n(e&&e.anchorY,0.5));d.isNull&&(d[c]=null)});g.Series.prototype.drawDataLabels.call(this)},animateDrilldown:function(a){var b=this.chart.plotBox,
c=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],d=c.bBox,e=this.chart.options.drilldown.animation;if(!a)a=Math.min(d.width/b.width,d.height/b.height),c.shapeArgs={scaleX:a,scaleY:a,translateX:d.x,translateY:d.y},l(this.points,function(a){a.graphic.attr(c.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},e)}),delete this.animate},animateDrillupFrom:function(a){k.column.prototype.animateDrillupFrom.call(this,a)},animateDrillupTo:function(a){k.column.prototype.animateDrillupTo.call(this,
a)}});q.mapline=p(q.map,{lineWidth:1,backgroundColor:"none"});k.mapline=g.extendClass(k.map,{type:"mapline",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth",fill:"backgroundColor"},drawLegendSymbol:k.line.prototype.drawLegendSymbol});q.mappoint=p(q.scatter,{dataLabels:{enabled:!0,format:"{point.name}",color:"black",style:{textShadow:"0 0 5px white"}}});k.mappoint=g.extendClass(k.scatter,{type:"mappoint"});g.Map=function(a,b){var c={endOnTick:!1,gridLineWidth:0,labels:{enabled:!1},lineWidth:0,
minPadding:0,maxPadding:0,startOnTick:!1,tickWidth:0,title:null},d;d=a.series;a.series=null;a=p({chart:{type:"map",panning:"xy"},xAxis:c,yAxis:p(c,{reversed:!0})},a,{chart:{inverted:!1}});a.series=d;return new g.Chart(a,b)}})(Highcharts);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJwbHVnaW5zL3VlZGl0b3IvdGhpcmQtcGFydHkvaGlnaGNoYXJ0cy9tb2R1bGVzL21hcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuIE1hcCBwbHVnaW4gdjAuMSBmb3IgSGlnaGNoYXJ0c1xuXG4gKGMpIDIwMTEtMjAxMyBUb3JzdGVpbiBIw7huc2lcblxuIExpY2Vuc2U6IHd3dy5oaWdoY2hhcnRzLmNvbS9saWNlbnNlXG4qL1xuKGZ1bmN0aW9uKGcpe2Z1bmN0aW9uIHgoYSxiLGMpe2Zvcih2YXIgZD00LGU9W107ZC0tOyllW2RdPU1hdGgucm91bmQoYi5yZ2JhW2RdKyhhLnJnYmFbZF0tYi5yZ2JhW2RdKSooMS1jKSk7cmV0dXJuXCJyZ2JhKFwiK2Uuam9pbihcIixcIikrXCIpXCJ9dmFyIHI9Zy5BeGlzLHk9Zy5DaGFydCxzPWcuUG9pbnQsej1nLlBvaW50ZXIsbD1nLmVhY2gsdj1nLmV4dGVuZCxwPWcubWVyZ2Usbj1nLnBpY2ssQT1nLm51bWJlckZvcm1hdCxCPWcuZ2V0T3B0aW9ucygpLGs9Zy5zZXJpZXNUeXBlcyxxPUIucGxvdE9wdGlvbnMsdD1nLndyYXAsdT1nLkNvbG9yLHc9ZnVuY3Rpb24oKXt9O0IubWFwTmF2aWdhdGlvbj17YnV0dG9uT3B0aW9uczp7YWxpZ246XCJyaWdodFwiLHZlcnRpY2FsQWxpZ246XCJib3R0b21cIix4OjAsd2lkdGg6MTgsaGVpZ2h0OjE4LHN0eWxlOntmb250U2l6ZTpcIjE1cHhcIixmb250V2VpZ2h0OlwiYm9sZFwiLHRleHRBbGlnbjpcImNlbnRlclwifX0sYnV0dG9uczp7em9vbUluOntvbmNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5tYXBab29tKDAuNSl9LFxudGV4dDpcIitcIix5Oi0zMn0sem9vbU91dDp7b25jbGljazpmdW5jdGlvbigpe3RoaXMubWFwWm9vbSgyKX0sdGV4dDpcIi1cIix5OjB9fX07Zy5zcGxpdFBhdGg9ZnVuY3Rpb24oYSl7dmFyIGIsYT1hLnJlcGxhY2UoLyhbQS1aYS16XSkvZyxcIiAkMSBcIiksYT1hLnJlcGxhY2UoL15cXHMqLyxcIlwiKS5yZXBsYWNlKC9cXHMqJC8sXCJcIiksYT1hLnNwbGl0KC9bICxdKy8pO2ZvcihiPTA7YjxhLmxlbmd0aDtiKyspL1thLXpBLVpdLy50ZXN0KGFbYl0pfHwoYVtiXT1wYXJzZUZsb2F0KGFbYl0pKTtyZXR1cm4gYX07Zy5tYXBzPXt9O3Qoci5wcm90b3R5cGUsXCJnZXRTZXJpZXNFeHRyZW1lc1wiLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaXNYQXhpcyxjLGQsZT1bXTtsKHRoaXMuc2VyaWVzLGZ1bmN0aW9uKGEsYil7aWYoYS51c2VNYXBHZW9tZXRyeSllW2JdPWEueERhdGEsYS54RGF0YT1bXX0pO2EuY2FsbCh0aGlzKTtjPW4odGhpcy5kYXRhTWluLE51bWJlci5NQVhfVkFMVUUpO2Q9bih0aGlzLmRhdGFNYXgsXG5OdW1iZXIuTUlOX1ZBTFVFKTtsKHRoaXMuc2VyaWVzLGZ1bmN0aW9uKGEsaSl7aWYoYS51c2VNYXBHZW9tZXRyeSljPU1hdGgubWluKGMsYVtiP1wibWluWFwiOlwibWluWVwiXSksZD1NYXRoLm1heChkLGFbYj9cIm1heFhcIjpcIm1heFlcIl0pLGEueERhdGE9ZVtpXX0pO3RoaXMuZGF0YU1pbj1jO3RoaXMuZGF0YU1heD1kfSk7dChyLnByb3RvdHlwZSxcInNldEF4aXNUcmFuc2xhdGlvblwiLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hhcnQsYz1iLnBsb3RXaWR0aC9iLnBsb3RIZWlnaHQsZD10aGlzLmlzWEF4aXMsZT1iLnhBeGlzWzBdO2EuY2FsbCh0aGlzKTtpZihiLm9wdGlvbnMuY2hhcnQudHlwZT09PVwibWFwXCImJiFkJiZlLnRyYW5zQSE9PXZvaWQgMCl0aGlzLnRyYW5zQT1lLnRyYW5zQT1NYXRoLm1pbih0aGlzLnRyYW5zQSxlLnRyYW5zQSksYT0oZS5tYXgtZS5taW4pLyh0aGlzLm1heC10aGlzLm1pbiksZT1hPmM/dGhpczplLGM9KGUubWF4LWUubWluKSplLnRyYW5zQSxlLm1pblBpeGVsUGFkZGluZz1cbihlLmxlbi1jKS8yfSk7dCh5LnByb3RvdHlwZSxcInJlbmRlclwiLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLm9wdGlvbnMubWFwTmF2aWdhdGlvbjthLmNhbGwoYik7Yi5yZW5kZXJNYXBOYXZpZ2F0aW9uKCk7Yy56b29tT25Eb3VibGVDbGljayYmZy5hZGRFdmVudChiLmNvbnRhaW5lcixcImRibGNsaWNrXCIsZnVuY3Rpb24oYSl7Yi5wb2ludGVyLm9uQ29udGFpbmVyRGJsQ2xpY2soYSl9KTtjLnpvb21Pbk1vdXNlV2hlZWwmJmcuYWRkRXZlbnQoYi5jb250YWluZXIsZG9jdW1lbnQub25tb3VzZXdoZWVsPT09dm9pZCAwP1wiRE9NTW91c2VTY3JvbGxcIjpcIm1vdXNld2hlZWxcIixmdW5jdGlvbihhKXtiLnBvaW50ZXIub25Db250YWluZXJNb3VzZVdoZWVsKGEpfSl9KTt2KHoucHJvdG90eXBlLHtvbkNvbnRhaW5lckRibENsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hhcnQsYT10aGlzLm5vcm1hbGl6ZShhKTtiLmlzSW5zaWRlUGxvdChhLmNoYXJ0WC1iLnBsb3RMZWZ0LGEuY2hhcnRZLVxuYi5wbG90VG9wKSYmYi5tYXBab29tKDAuNSxiLnhBeGlzWzBdLnRvVmFsdWUoYS5jaGFydFgpLGIueUF4aXNbMF0udG9WYWx1ZShhLmNoYXJ0WSkpfSxvbkNvbnRhaW5lck1vdXNlV2hlZWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGFydCxjLGE9dGhpcy5ub3JtYWxpemUoYSk7Yz1hLmRldGFpbHx8LShhLndoZWVsRGVsdGEvMTIwKTtiLmlzSW5zaWRlUGxvdChhLmNoYXJ0WC1iLnBsb3RMZWZ0LGEuY2hhcnRZLWIucGxvdFRvcCkmJmIubWFwWm9vbShjPjA/MjowLjUsYi54QXhpc1swXS50b1ZhbHVlKGEuY2hhcnRYKSxiLnlBeGlzWzBdLnRvVmFsdWUoYS5jaGFydFkpKX19KTt0KHoucHJvdG90eXBlLFwiaW5pdFwiLGZ1bmN0aW9uKGEsYixjKXthLmNhbGwodGhpcyxiLGMpO2lmKGMubWFwTmF2aWdhdGlvbi5lbmFibGVUb3VjaFpvb20pdGhpcy5waW5jaFg9dGhpcy5waW5jaEhvcj10aGlzLnBpbmNoWT10aGlzLnBpbmNoVmVydD0hMH0pO3YoeS5wcm90b3R5cGUse3JlbmRlck1hcE5hdmlnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMsYj10aGlzLm9wdGlvbnMubWFwTmF2aWdhdGlvbixjPWIuYnV0dG9ucyxkLGUsZixpPWZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyLmNhbGwoYSl9O2lmKGIuZW5hYmxlQnV0dG9ucylmb3IoZCBpbiBjKWlmKGMuaGFzT3duUHJvcGVydHkoZCkpZj1wKGIuYnV0dG9uT3B0aW9ucyxjW2RdKSxlPWEucmVuZGVyZXIuYnV0dG9uKGYudGV4dCwwLDAsaSkuYXR0cih7d2lkdGg6Zi53aWR0aCxoZWlnaHQ6Zi5oZWlnaHR9KS5jc3MoZi5zdHlsZSkuYWRkKCksZS5oYW5kbGVyPWYub25jbGljayxlLmFsaWduKHYoZix7d2lkdGg6ZS53aWR0aCxoZWlnaHQ6ZS5oZWlnaHR9KSxudWxsLFwic3BhY2luZ0JveFwiKX0sZml0VG9Cb3g6ZnVuY3Rpb24oYSxiKXtsKFtbXCJ4XCIsXCJ3aWR0aFwiXSxbXCJ5XCIsXCJoZWlnaHRcIl1dLGZ1bmN0aW9uKGMpe3ZhciBkPWNbMF0sYz1jWzFdO2FbZF0rYVtjXT5iW2RdK2JbY10mJihhW2NdPmJbY10/KGFbY109YltjXSxhW2RdPWJbZF0pOmFbZF09YltkXStiW2NdLWFbY10pO1xuYVtjXT5iW2NdJiYoYVtjXT1iW2NdKTthW2RdPGJbZF0mJihhW2RdPWJbZF0pfSk7cmV0dXJuIGF9LG1hcFpvb206ZnVuY3Rpb24oYSxiLGMpe2lmKCF0aGlzLmlzTWFwWm9vbWluZyl7dmFyIGQ9dGhpcyxlPWQueEF4aXNbMF0sZj1lLm1heC1lLm1pbixpPW4oYixlLm1pbitmLzIpLGI9ZiphLGY9ZC55QXhpc1swXSxoPWYubWF4LWYubWluLGM9bihjLGYubWluK2gvMik7YSo9aDtpLT1iLzI7aD1jLWEvMjtjPW4oZC5vcHRpb25zLmNoYXJ0LmFuaW1hdGlvbiwhMCk7Yj1kLmZpdFRvQm94KHt4OmkseTpoLHdpZHRoOmIsaGVpZ2h0OmF9LHt4OmUuZGF0YU1pbix5OmYuZGF0YU1pbix3aWR0aDplLmRhdGFNYXgtZS5kYXRhTWluLGhlaWdodDpmLmRhdGFNYXgtZi5kYXRhTWlufSk7ZS5zZXRFeHRyZW1lcyhiLngsYi54K2Iud2lkdGgsITEpO2Yuc2V0RXh0cmVtZXMoYi55LGIueStiLmhlaWdodCwhMSk7aWYoZT1jP2MuZHVyYXRpb258fDUwMDowKWQuaXNNYXBab29taW5nPSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkLmlzTWFwWm9vbWluZz1cbiExfSxlKTtkLnJlZHJhdygpfX19KTtxLm1hcD1wKHEuc2NhdHRlcix7YW5pbWF0aW9uOiExLG51bGxDb2xvcjpcIiNGOEY4RjhcIixib3JkZXJDb2xvcjpcInNpbHZlclwiLGJvcmRlcldpZHRoOjEsbWFya2VyOm51bGwsc3RpY2t5VHJhY2tpbmc6ITEsZGF0YUxhYmVsczp7dmVydGljYWxBbGlnbjpcIm1pZGRsZVwifSx0dXJib1RocmVzaG9sZDowLHRvb2x0aXA6e2ZvbGxvd1BvaW50ZXI6ITAscG9pbnRGb3JtYXQ6XCJ7cG9pbnQubmFtZX06IHtwb2ludC55fTxici8+XCJ9LHN0YXRlczp7bm9ybWFsOnthbmltYXRpb246ITB9fX0pO3I9Zy5leHRlbmRDbGFzcyhzLHthcHBseU9wdGlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1zLnByb3RvdHlwZS5hcHBseU9wdGlvbnMuY2FsbCh0aGlzLGEsYik7aWYoYy5wYXRoJiZ0eXBlb2YgYy5wYXRoPT09XCJzdHJpbmdcIiljLnBhdGg9Yy5vcHRpb25zLnBhdGg9Zy5zcGxpdFBhdGgoYy5wYXRoKTtyZXR1cm4gY30sb25Nb3VzZU92ZXI6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5jb2xvckludGVydmFsKTtcbnMucHJvdG90eXBlLm9uTW91c2VPdmVyLmNhbGwodGhpcyl9LG9uTW91c2VPdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9K25ldyBEYXRlLGM9dShhLm9wdGlvbnMuY29sb3IpLGQ9dShhLnBvaW50QXR0ci5ob3Zlci5maWxsKSxlPWEuc2VyaWVzLm9wdGlvbnMuc3RhdGVzLm5vcm1hbC5hbmltYXRpb24sZj1lJiYoZS5kdXJhdGlvbnx8NTAwKTtpZihmJiZjLnJnYmEubGVuZ3RoPT09NCYmZC5yZ2JhLmxlbmd0aD09PTQpZGVsZXRlIGEucG9pbnRBdHRyW1wiXCJdLmZpbGwsY2xlYXJUaW1lb3V0KGEuY29sb3JJbnRlcnZhbCksYS5jb2xvckludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIGU9KG5ldyBEYXRlLWIpL2YsaD1hLmdyYXBoaWM7ZT4xJiYoZT0xKTtoJiZoLmF0dHIoXCJmaWxsXCIseChkLGMsZSkpO2U+PTEmJmNsZWFyVGltZW91dChhLmNvbG9ySW50ZXJ2YWwpfSwxMyk7cy5wcm90b3R5cGUub25Nb3VzZU91dC5jYWxsKGEpfX0pO2subWFwPWcuZXh0ZW5kQ2xhc3Moay5zY2F0dGVyLFxue3R5cGU6XCJtYXBcIixwb2ludEF0dHJUb09wdGlvbnM6e3N0cm9rZTpcImJvcmRlckNvbG9yXCIsXCJzdHJva2Utd2lkdGhcIjpcImJvcmRlcldpZHRoXCIsZmlsbDpcImNvbG9yXCJ9LGNvbG9yS2V5OlwieVwiLHBvaW50Q2xhc3M6cix0cmFja2VyR3JvdXBzOltcImdyb3VwXCIsXCJtYXJrZXJHcm91cFwiLFwiZGF0YUxhYmVsc0dyb3VwXCJdLGdldFN5bWJvbDp3LHN1cHBvcnRzRHJpbGxkb3duOiEwLGdldEV4dHJlbWVzRnJvbUFsbDohMCx1c2VNYXBHZW9tZXRyeTohMCxpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1hLm9wdGlvbnMubGVnZW5kLnZhbHVlRGVjaW1hbHMsZD1bXSxlLGYsaSxoLGosbyxtO289YS5vcHRpb25zLmxlZ2VuZC5sYXlvdXQ9PT1cImhvcml6b250YWxcIjtnLlNlcmllcy5wcm90b3R5cGUuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aj1iLm9wdGlvbnMuY29sb3JSYW5nZTtpZihoPWIub3B0aW9ucy52YWx1ZVJhbmdlcylsKGgsZnVuY3Rpb24oYSl7Zj1hLmZyb207aT1hLnRvO2U9XG5cIlwiO2Y9PT12b2lkIDA/ZT1cIjwgXCI6aT09PXZvaWQgMCYmKGU9XCI+IFwiKTtmIT09dm9pZCAwJiYoZSs9QShmLGMpKTtmIT09dm9pZCAwJiZpIT09dm9pZCAwJiYoZSs9XCIgLSBcIik7aSE9PXZvaWQgMCYmKGUrPUEoaSxjKSk7ZC5wdXNoKGcuZXh0ZW5kKHtjaGFydDpiLmNoYXJ0LG5hbWU6ZSxvcHRpb25zOnt9LGRyYXdMZWdlbmRTeW1ib2w6ay5hcmVhLnByb3RvdHlwZS5kcmF3TGVnZW5kU3ltYm9sLHZpc2libGU6ITAsc2V0U3RhdGU6ZnVuY3Rpb24oKXt9LHNldFZpc2libGU6ZnVuY3Rpb24oKXt9fSxhKSl9KSxiLmxlZ2VuZEl0ZW1zPWQ7ZWxzZSBpZihqKWY9ai5mcm9tLGk9ai50byxoPWouZnJvbUxhYmVsLGo9ai50b0xhYmVsLG09bz9bMCwwLDEsMF06WzAsMSwwLDBdLG98fChvPWgsaD1qLGo9byksbz17bGluZWFyR3JhZGllbnQ6e3gxOm1bMF0seTE6bVsxXSx4MjptWzJdLHkyOm1bM119LHN0b3BzOltbMCxmXSxbMSxpXV19LGQ9W3tjaGFydDpiLmNoYXJ0LG9wdGlvbnM6e30sZnJvbUxhYmVsOmgsXG50b0xhYmVsOmosY29sb3I6byxkcmF3TGVnZW5kU3ltYm9sOnRoaXMuZHJhd0xlZ2VuZFN5bWJvbEdyYWRpZW50LHZpc2libGU6ITAsc2V0U3RhdGU6ZnVuY3Rpb24oKXt9LHNldFZpc2libGU6ZnVuY3Rpb24oKXt9fV0sYi5sZWdlbmRJdGVtcz1kfSxkcmF3TGVnZW5kU3ltYm9sOmsuYXJlYS5wcm90b3R5cGUuZHJhd0xlZ2VuZFN5bWJvbCxkcmF3TGVnZW5kU3ltYm9sR3JhZGllbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLm9wdGlvbnMuc3ltYm9sUGFkZGluZyxkPW4oYS5vcHRpb25zLnBhZGRpbmcsOCksZSxmLGk9dGhpcy5jaGFydC5yZW5kZXJlci5mb250TWV0cmljcyhhLm9wdGlvbnMuaXRlbVN0eWxlLmZvbnRTaXplKS5oLGg9YS5vcHRpb25zLmxheW91dD09PVwiaG9yaXpvbnRhbFwiLGo7aj1uKGEub3B0aW9ucy5yZWN0YW5nbGVMZW5ndGgsMjAwKTtoPyhlPS0oYy8yKSxmPTApOihlPS1qK2EuYmFzZWxpbmUtYy8yLGY9ZCtpKTtiLmZyb21UZXh0PXRoaXMuY2hhcnQucmVuZGVyZXIudGV4dChiLmZyb21MYWJlbCxcbmYsZSkuYXR0cih7ekluZGV4OjJ9KS5hZGQoYi5sZWdlbmRHcm91cCk7Zj1iLmZyb21UZXh0LmdldEJCb3goKTtiLmxlZ2VuZFN5bWJvbD10aGlzLmNoYXJ0LnJlbmRlcmVyLnJlY3QoaD9mLngrZi53aWR0aCtjOmYueC1pLWMsZi55LGg/ajppLGg/aTpqLDIpLmF0dHIoe3pJbmRleDoxfSkuYWRkKGIubGVnZW5kR3JvdXApO2o9Yi5sZWdlbmRTeW1ib2wuZ2V0QkJveCgpO2IudG9UZXh0PXRoaXMuY2hhcnQucmVuZGVyZXIudGV4dChiLnRvTGFiZWwsai54K2oud2lkdGgrYyxoP2U6ai55K2ouaGVpZ2h0LWMpLmF0dHIoe3pJbmRleDoyfSkuYWRkKGIubGVnZW5kR3JvdXApO2U9Yi50b1RleHQuZ2V0QkJveCgpO2g/KGEub2Zmc2V0V2lkdGg9Zi53aWR0aCtqLndpZHRoK2Uud2lkdGgrYyoyK2QsYS5pdGVtWT1pK2QpOihhLm9mZnNldFdpZHRoPU1hdGgubWF4KGYud2lkdGgsZS53aWR0aCkrYytqLndpZHRoK2QsYS5pdGVtWT1qLmhlaWdodCtkLGEuaXRlbVg9Yyl9LGdldEJveDpmdW5jdGlvbihhKXt2YXIgYj1cbk51bWJlci5NSU5fVkFMVUUsYz1OdW1iZXIuTUFYX1ZBTFVFLGQ9TnVtYmVyLk1JTl9WQUxVRSxlPU51bWJlci5NQVhfVkFMVUU7bChhfHx0aGlzLm9wdGlvbnMuZGF0YSxmdW5jdGlvbihhKXtmb3IodmFyIGk9YS5wYXRoLGg9aS5sZW5ndGgsaj0hMSxnPU51bWJlci5NSU5fVkFMVUUsbT1OdW1iZXIuTUFYX1ZBTFVFLGs9TnVtYmVyLk1JTl9WQUxVRSxsPU51bWJlci5NQVhfVkFMVUU7aC0tOyl0eXBlb2YgaVtoXT09PVwibnVtYmVyXCImJiFpc05hTihpW2hdKSYmKGo/KGc9TWF0aC5tYXgoZyxpW2hdKSxtPU1hdGgubWluKG0saVtoXSkpOihrPU1hdGgubWF4KGssaVtoXSksbD1NYXRoLm1pbihsLGlbaF0pKSxqPSFqKTthLl9tYXhYPWc7YS5fbWluWD1tO2EuX21heFk9azthLl9taW5ZPWw7Yj1NYXRoLm1heChiLGcpO2M9TWF0aC5taW4oYyxtKTtkPU1hdGgubWF4KGQsayk7ZT1NYXRoLm1pbihlLGwpfSk7dGhpcy5taW5ZPWU7dGhpcy5tYXhZPWQ7dGhpcy5taW5YPWM7dGhpcy5tYXhYPVxuYn0sdHJhbnNsYXRlUGF0aDpmdW5jdGlvbihhKXt2YXIgYj0hMSxjPXRoaXMueEF4aXMsZD10aGlzLnlBeGlzLGUsYT1bXS5jb25jYXQoYSk7Zm9yKGU9YS5sZW5ndGg7ZS0tOyl0eXBlb2YgYVtlXT09PVwibnVtYmVyXCImJihhW2VdPWI/TWF0aC5yb3VuZChjLnRyYW5zbGF0ZShhW2VdKSk6TWF0aC5yb3VuZChkLmxlbi1kLnRyYW5zbGF0ZShhW2VdKSksYj0hYik7cmV0dXJuIGF9LHNldERhdGE6ZnVuY3Rpb24oKXtnLlNlcmllcy5wcm90b3R5cGUuc2V0RGF0YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5nZXRCb3goKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPU51bWJlci5NQVhfVkFMVUUsYz1OdW1iZXIuTUlOX1ZBTFVFO2EuZ2VuZXJhdGVQb2ludHMoKTtsKGEuZGF0YSxmdW5jdGlvbihkKXtkLnNoYXBlVHlwZT1cInBhdGhcIjtkLnNoYXBlQXJncz17ZDphLnRyYW5zbGF0ZVBhdGgoZC5wYXRoKX07aWYodHlwZW9mIGQueT09PVwibnVtYmVyXCIpaWYoZC55PmMpYz1cbmQueTtlbHNlIGlmKGQueTxiKWI9ZC55fSk7YS50cmFuc2xhdGVDb2xvcnMoYixjKX0sdHJhbnNsYXRlQ29sb3JzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5vcHRpb25zLGQ9Yy52YWx1ZVJhbmdlcyxlPWMuY29sb3JSYW5nZSxmPXRoaXMuY29sb3JLZXksaSxoO2UmJihpPXUoZS5mcm9tKSxoPXUoZS50bykpO2wodGhpcy5kYXRhLGZ1bmN0aW9uKGcpe3ZhciBrPWdbZl0sbSxsLG47aWYoZClmb3Iobj1kLmxlbmd0aDtuLS07KXtpZihtPWRbbl0saT1tLmZyb20saD1tLnRvLChpPT09dm9pZCAwfHxrPj1pKSYmKGg9PT12b2lkIDB8fGs8PWgpKXtsPW0uY29sb3I7YnJlYWt9fWVsc2UgZSYmayE9PXZvaWQgMCYmKG09MS0oYi1rKS8oYi1hKSxsPWs9PT1udWxsP2MubnVsbENvbG9yOngoaSxoLG0pKTtpZihsKWcuY29sb3I9bnVsbCxnLm9wdGlvbnMuY29sb3I9bH0pfSxkcmF3R3JhcGg6dyxkcmF3RGF0YUxhYmVsczp3LGRyYXdQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnhBeGlzLFxuYj10aGlzLnlBeGlzLGM9dGhpcy5jb2xvcktleTtsKHRoaXMuZGF0YSxmdW5jdGlvbihhKXthLnBsb3RZPTE7aWYoYVtjXT09PW51bGwpYVtjXT0wLGEuaXNOdWxsPSEwfSk7ay5jb2x1bW4ucHJvdG90eXBlLmRyYXdQb2ludHMuYXBwbHkodGhpcyk7bCh0aGlzLmRhdGEsZnVuY3Rpb24oZCl7dmFyIGU9ZC5kYXRhTGFiZWxzLGY9YS50b1BpeGVscyhkLl9taW5YLCEwKSxnPWEudG9QaXhlbHMoZC5fbWF4WCwhMCksaD1iLnRvUGl4ZWxzKGQuX21pblksITApLGo9Yi50b1BpeGVscyhkLl9tYXhZLCEwKTtkLnBsb3RYPU1hdGgucm91bmQoZisoZy1mKSpuKGUmJmUuYW5jaG9yWCwwLjUpKTtkLnBsb3RZPU1hdGgucm91bmQoaCsoai1oKSpuKGUmJmUuYW5jaG9yWSwwLjUpKTtkLmlzTnVsbCYmKGRbY109bnVsbCl9KTtnLlNlcmllcy5wcm90b3R5cGUuZHJhd0RhdGFMYWJlbHMuY2FsbCh0aGlzKX0sYW5pbWF0ZURyaWxsZG93bjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LnBsb3RCb3gsXG5jPXRoaXMuY2hhcnQuZHJpbGxkb3duTGV2ZWxzW3RoaXMuY2hhcnQuZHJpbGxkb3duTGV2ZWxzLmxlbmd0aC0xXSxkPWMuYkJveCxlPXRoaXMuY2hhcnQub3B0aW9ucy5kcmlsbGRvd24uYW5pbWF0aW9uO2lmKCFhKWE9TWF0aC5taW4oZC53aWR0aC9iLndpZHRoLGQuaGVpZ2h0L2IuaGVpZ2h0KSxjLnNoYXBlQXJncz17c2NhbGVYOmEsc2NhbGVZOmEsdHJhbnNsYXRlWDpkLngsdHJhbnNsYXRlWTpkLnl9LGwodGhpcy5wb2ludHMsZnVuY3Rpb24oYSl7YS5ncmFwaGljLmF0dHIoYy5zaGFwZUFyZ3MpLmFuaW1hdGUoe3NjYWxlWDoxLHNjYWxlWToxLHRyYW5zbGF0ZVg6MCx0cmFuc2xhdGVZOjB9LGUpfSksZGVsZXRlIHRoaXMuYW5pbWF0ZX0sYW5pbWF0ZURyaWxsdXBGcm9tOmZ1bmN0aW9uKGEpe2suY29sdW1uLnByb3RvdHlwZS5hbmltYXRlRHJpbGx1cEZyb20uY2FsbCh0aGlzLGEpfSxhbmltYXRlRHJpbGx1cFRvOmZ1bmN0aW9uKGEpe2suY29sdW1uLnByb3RvdHlwZS5hbmltYXRlRHJpbGx1cFRvLmNhbGwodGhpcyxcbmEpfX0pO3EubWFwbGluZT1wKHEubWFwLHtsaW5lV2lkdGg6MSxiYWNrZ3JvdW5kQ29sb3I6XCJub25lXCJ9KTtrLm1hcGxpbmU9Zy5leHRlbmRDbGFzcyhrLm1hcCx7dHlwZTpcIm1hcGxpbmVcIixwb2ludEF0dHJUb09wdGlvbnM6e3N0cm9rZTpcImNvbG9yXCIsXCJzdHJva2Utd2lkdGhcIjpcImxpbmVXaWR0aFwiLGZpbGw6XCJiYWNrZ3JvdW5kQ29sb3JcIn0sZHJhd0xlZ2VuZFN5bWJvbDprLmxpbmUucHJvdG90eXBlLmRyYXdMZWdlbmRTeW1ib2x9KTtxLm1hcHBvaW50PXAocS5zY2F0dGVyLHtkYXRhTGFiZWxzOntlbmFibGVkOiEwLGZvcm1hdDpcIntwb2ludC5uYW1lfVwiLGNvbG9yOlwiYmxhY2tcIixzdHlsZTp7dGV4dFNoYWRvdzpcIjAgMCA1cHggd2hpdGVcIn19fSk7ay5tYXBwb2ludD1nLmV4dGVuZENsYXNzKGsuc2NhdHRlcix7dHlwZTpcIm1hcHBvaW50XCJ9KTtnLk1hcD1mdW5jdGlvbihhLGIpe3ZhciBjPXtlbmRPblRpY2s6ITEsZ3JpZExpbmVXaWR0aDowLGxhYmVsczp7ZW5hYmxlZDohMX0sbGluZVdpZHRoOjAsXG5taW5QYWRkaW5nOjAsbWF4UGFkZGluZzowLHN0YXJ0T25UaWNrOiExLHRpY2tXaWR0aDowLHRpdGxlOm51bGx9LGQ7ZD1hLnNlcmllczthLnNlcmllcz1udWxsO2E9cCh7Y2hhcnQ6e3R5cGU6XCJtYXBcIixwYW5uaW5nOlwieHlcIn0seEF4aXM6Yyx5QXhpczpwKGMse3JldmVyc2VkOiEwfSl9LGEse2NoYXJ0OntpbnZlcnRlZDohMX19KTthLnNlcmllcz1kO3JldHVybiBuZXcgZy5DaGFydChhLGIpfX0pKEhpZ2hjaGFydHMpO1xuIl0sImZpbGUiOiJwbHVnaW5zL3VlZGl0b3IvdGhpcmQtcGFydHkvaGlnaGNoYXJ0cy9tb2R1bGVzL21hcC5qcyJ9
