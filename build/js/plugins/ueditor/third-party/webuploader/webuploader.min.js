/* WebUploader 0.1.2 */!function(a,b){var c,d={},e=function(a,b){var c,d,e;if("string"==typeof a)return h(a);for(c=[],d=a.length,e=0;d>e;e++)c.push(h(a[e]));return b.apply(null,c)},f=function(a,b,c){2===arguments.length&&(c=b,b=null),e(b||[],function(){g(a,c,arguments)})},g=function(a,b,c){var f,g={exports:b};"function"==typeof b&&(c.length||(c=[e,g.exports,g]),f=b.apply(null,c),void 0!==f&&(g.exports=f)),d[a]=g.exports},h=function(b){var c=d[b]||a[b];if(!c)throw new Error("`"+b+"` is undefined");return c},i=function(a){var b,c,e,f,g,h;h=function(a){return a&&a.charAt(0).toUpperCase()+a.substr(1)};for(b in d)if(c=a,d.hasOwnProperty(b)){for(e=b.split("/"),g=h(e.pop());f=h(e.shift());)c[f]=c[f]||{},c=c[f];c[g]=d[b]}},j=b(a,f,e);i(j),"object"==typeof module&&"object"==typeof module.exports?module.exports=j:"function"==typeof define&&define.amd?define([],j):(c=a.WebUploader,a.WebUploader=j,a.WebUploader.noConflict=function(){a.WebUploader=c})}(this,function(a,b,c){return b("dollar-third",[],function(){return a.jQuery||a.Zepto}),b("dollar",["dollar-third"],function(a){return a}),b("promise-third",["dollar"],function(a){return{Deferred:a.Deferred,when:a.when,isPromise:function(a){return a&&"function"==typeof a.then}}}),b("promise",["promise-third"],function(a){return a}),b("base",["dollar","promise"],function(b,c){function d(a){return function(){return h.apply(a,arguments)}}function e(a,b){return function(){return a.apply(b,arguments)}}function f(a){var b;return Object.create?Object.create(a):(b=function(){},b.prototype=a,new b)}var g=function(){},h=Function.call;return{version:"0.1.2",$:b,Deferred:c.Deferred,isPromise:c.isPromise,when:c.when,browser:function(a){var b={},c=a.match(/WebKit\/([\d.]+)/),d=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),e=a.match(/MSIE\s([\d\.]+)/)||a.match(/(?:trident)(?:.*rv:([\w.]+))?/i),f=a.match(/Firefox\/([\d.]+)/),g=a.match(/Safari\/([\d.]+)/),h=a.match(/OPR\/([\d.]+)/);return c&&(b.webkit=parseFloat(c[1])),d&&(b.chrome=parseFloat(d[1])),e&&(b.ie=parseFloat(e[1])),f&&(b.firefox=parseFloat(f[1])),g&&(b.safari=parseFloat(g[1])),h&&(b.opera=parseFloat(h[1])),b}(navigator.userAgent),os:function(a){var b={},c=a.match(/(?:Android);?[\s\/]+([\d.]+)?/),d=a.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return c&&(b.android=parseFloat(c[1])),d&&(b.ios=parseFloat(d[1].replace(/_/g,"."))),b}(navigator.userAgent),inherits:function(a,c,d){var e;return"function"==typeof c?(e=c,c=null):e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)},b.extend(!0,e,a,d||{}),e.__super__=a.prototype,e.prototype=f(a.prototype),c&&b.extend(!0,e.prototype,c),e},noop:g,bindFn:e,log:function(){return a.console?e(console.log,console):g}(),nextTick:function(){return function(a){setTimeout(a,1)}}(),slice:d([].slice),guid:function(){var a=0;return function(b){for(var c=(+new Date).toString(32),d=0;5>d;d++)c+=Math.floor(65535*Math.random()).toString(32);return(b||"wu_")+c+(a++).toString(32)}}(),formatSize:function(a,b,c){var d;for(c=c||["B","K","M","G","TB"];(d=c.shift())&&a>1024;)a/=1024;return("B"===d?a:a.toFixed(b||2))+d}}}),b("mediator",["base"],function(a){function b(a,b,c,d){return f.grep(a,function(a){return!(!a||b&&a.e!==b||c&&a.cb!==c&&a.cb._cb!==c||d&&a.ctx!==d)})}function c(a,b,c){f.each((a||"").split(h),function(a,d){c(d,b)})}function d(a,b){for(var c,d=!1,e=-1,f=a.length;++e<f;)if(c=a[e],c.cb.apply(c.ctx2,b)===!1){d=!0;break}return!d}var e,f=a.$,g=[].slice,h=/\s+/;return e={on:function(a,b,d){var e,f=this;return b?(e=this._events||(this._events=[]),c(a,b,function(a,b){var c={e:a};c.cb=b,c.ctx=d,c.ctx2=d||f,c.id=e.length,e.push(c)}),this):this},once:function(a,b,d){var e=this;return b?(c(a,b,function(a,b){var c=function(){return e.off(a,c),b.apply(d||e,arguments)};c._cb=b,e.on(a,c,d)}),e):e},off:function(a,d,e){var g=this._events;return g?a||d||e?(c(a,d,function(a,c){f.each(b(g,a,c,e),function(){delete g[this.id]})}),this):(this._events=[],this):this},trigger:function(a){var c,e,f;return this._events&&a?(c=g.call(arguments,1),e=b(this._events,a),f=b(this._events,"all"),d(e,c)&&d(f,arguments)):this}},f.extend({installTo:function(a){return f.extend(a,e)}},e)}),b("uploader",["base","mediator"],function(a,b){function c(a){this.options=d.extend(!0,{},c.options,a),this._init(this.options)}var d=a.$;return c.options={},b.installTo(c.prototype),d.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",getDimension:"get-dimension",addButton:"add-btn",getRuntimeType:"get-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(a,b){c.prototype[a]=function(){return this.request(b,arguments)}}),d.extend(c.prototype,{state:"pending",_init:function(a){var b=this;b.request("init",a,function(){b.state="ready",b.trigger("ready")})},option:function(a,b){var c=this.options;return arguments.length>1?void(d.isPlainObject(b)&&d.isPlainObject(c[a])?d.extend(c[a],b):c[a]=b):a?c[a]:c},getStats:function(){var a=this.request("get-stats");return{successNum:a.numOfSuccess,cancelNum:a.numOfCancel,invalidNum:a.numOfInvalid,uploadFailNum:a.numOfUploadFailed,queueNum:a.numOfQueue}},trigger:function(a){var c=[].slice.call(arguments,1),e=this.options,f="on"+a.substring(0,1).toUpperCase()+a.substring(1);return b.trigger.apply(this,arguments)===!1||d.isFunction(e[f])&&e[f].apply(this,c)===!1||d.isFunction(this[f])&&this[f].apply(this,c)===!1||b.trigger.apply(b,[this,a].concat(c))===!1?!1:!0},request:a.noop}),a.create=c.create=function(a){return new c(a)},a.Uploader=c,c}),b("runtime/runtime",["base","mediator"],function(a,b){function c(b){this.options=d.extend({container:document.body},b),this.uid=a.guid("rt_")}var d=a.$,e={},f=function(a){for(var b in a)if(a.hasOwnProperty(b))return b;return null};return d.extend(c.prototype,{getContainer:function(){var a,b,c=this.options;return this._container?this._container:(a=d(c.container||document.body),b=d(document.createElement("div")),b.attr("id","rt_"+this.uid),b.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),a.append(b),a.addClass("webuploader-container"),this._container=b,b)},init:a.noop,exec:a.noop,destroy:function(){this._container&&this._container.parentNode.removeChild(this.__container),this.off()}}),c.orders="html5,flash",c.addRuntime=function(a,b){e[a]=b},c.hasRuntime=function(a){return!!(a?e[a]:f(e))},c.create=function(a,b){var g,h;if(b=b||c.orders,d.each(b.split(/\s*,\s*/g),function(){return e[this]?(g=this,!1):void 0}),g=g||f(e),!g)throw new Error("Runtime Error");return h=new e[g](a)},b.installTo(c.prototype),c}),b("runtime/client",["base","mediator","runtime/runtime"],function(a,b,c){function d(b,d){var f,g=a.Deferred();this.uid=a.guid("client_"),this.runtimeReady=function(a){return g.done(a)},this.connectRuntime=function(b,h){if(f)throw new Error("already connected!");return g.done(h),"string"==typeof b&&e.get(b)&&(f=e.get(b)),f=f||e.get(null,d),f?(a.$.extend(f.options,b),f.__promise.then(g.resolve),f.__client++):(f=c.create(b,b.runtimeOrder),f.__promise=g.promise(),f.once("ready",g.resolve),f.init(),e.add(f),f.__client=1),d&&(f.__standalone=d),f},this.getRuntime=function(){return f},this.disconnectRuntime=function(){f&&(f.__client--,f.__client<=0&&(e.remove(f),delete f.__promise,f.destroy()),f=null)},this.exec=function(){if(f){var c=a.slice(arguments);return b&&c.unshift(b),f.exec.apply(this,c)}},this.getRuid=function(){return f&&f.uid},this.destroy=function(a){return function(){a&&a.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var e;return e=function(){var a={};return{add:function(b){a[b.uid]=b},get:function(b,c){var d;if(b)return a[b];for(d in a)if(!c||!a[d].__standalone)return a[d];return null},remove:function(b){delete a[b.uid]}}}(),b.installTo(d.prototype),d}),b("lib/dnd",["base","mediator","runtime/client"],function(a,b,c){function d(a){a=this.options=e.extend({},d.options,a),a.container=e(a.container),a.container.length&&c.call(this,"DragAndDrop")}var e=a.$;return d.options={accept:null,disableGlobalDnd:!1},a.inherits(c,{constructor:d,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init"),a.trigger("ready")})},destroy:function(){this.disconnectRuntime()}}),b.installTo(d.prototype),d}),b("widgets/widget",["base","uploader"],function(a,b){function c(a){if(!a)return!1;var b=a.length,c=e.type(a);return 1===a.nodeType&&b?!0:"array"===c||"function"!==c&&"string"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){this.owner=a,this.options=a.options}var e=a.$,f=b.prototype._init,g={},h=[];return e.extend(d.prototype,{init:a.noop,invoke:function(a,b){var c=this.responseMap;return c&&a in c&&c[a]in this&&e.isFunction(this[c[a]])?this[c[a]].apply(this,b):g},request:function(){return this.owner.request.apply(this.owner,arguments)}}),e.extend(b.prototype,{_init:function(){var a=this,b=a._widgets=[];return e.each(h,function(c,d){b.push(new d(a))}),f.apply(a,arguments)},request:function(b,d,e){var f,h,i,j,k=0,l=this._widgets,m=l.length,n=[],o=[];for(d=c(d)?d:[d];m>k;k++)f=l[k],h=f.invoke(b,d),h!==g&&(a.isPromise(h)?o.push(h):n.push(h));return e||o.length?(i=a.when.apply(a,o),j=i.pipe?"pipe":"then",i[j](function(){var b=a.Deferred(),c=arguments;return setTimeout(function(){b.resolve.apply(b,c)},1),b.promise()})[j](e||a.noop)):n[0]}}),b.register=d.register=function(b,c){var f,g={init:"init"};return 1===arguments.length?(c=b,c.responseMap=g):c.responseMap=e.extend(g,b),f=a.inherits(d,c),h.push(f),f},d}),b("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(a,b,c){var d=a.$;return b.options.dnd="",b.register({init:function(b){if(b.dnd&&"html5"===this.request("predict-runtime-type")){var e,f=this,g=a.Deferred(),h=d.extend({},{disableGlobalDnd:b.disableGlobalDnd,container:b.dnd,accept:b.accept});return e=new c(h),e.once("ready",g.resolve),e.on("drop",function(a){f.request("add-file",[a])}),e.on("accept",function(a){return f.owner.trigger("dndAccept",a)}),e.init(),g.promise()}}})}),b("lib/filepaste",["base","mediator","runtime/client"],function(a,b,c){function d(a){a=this.options=e.extend({},a),a.container=e(a.container||document.body),c.call(this,"FilePaste")}var e=a.$;return a.inherits(c,{constructor:d,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init"),a.trigger("ready")})},destroy:function(){this.exec("destroy"),this.disconnectRuntime(),this.off()}}),b.installTo(d.prototype),d}),b("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(a,b,c){var d=a.$;return b.register({init:function(b){if(b.paste&&"html5"===this.request("predict-runtime-type")){var e,f=this,g=a.Deferred(),h=d.extend({},{container:b.paste,accept:b.accept});return e=new c(h),e.once("ready",g.resolve),e.on("paste",function(a){f.owner.request("add-file",[a])}),e.init(),g.promise()}}})}),b("lib/blob",["base","runtime/client"],function(a,b){function c(a,c){var d=this;d.source=c,d.ruid=a,b.call(d,"Blob"),this.uid=c.uid||this.uid,this.type=c.type||"",this.size=c.size||0,a&&d.connectRuntime(a)}return a.inherits(b,{constructor:c,slice:function(a,b){return this.exec("slice",a,b)},getSource:function(){return this.source}}),c}),b("lib/file",["base","lib/blob"],function(a,b){function c(a,c){var f;b.apply(this,arguments),this.name=c.name||"untitled"+d++,f=e.exec(c.name)?RegExp.$1.toLowerCase():"",!f&&this.type&&(f=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(this.type)?RegExp.$1.toLowerCase():"",this.name+="."+f),!this.type&&~"jpg,jpeg,png,gif,bmp".indexOf(f)&&(this.type="image/"+("jpg"===f?"jpeg":f)),this.ext=f,this.lastModifiedDate=c.lastModifiedDate||(new Date).toLocaleString()}var d=1,e=/\.([^.]+)$/;return a.inherits(b,c)}),b("lib/filepicker",["base","runtime/client","lib/file"],function(b,c,d){function e(a){if(a=this.options=f.extend({},e.options,a),a.container=f(a.id),!a.container.length)throw new Error("按钮指定错误");a.innerHTML=a.innerHTML||a.label||a.container.html()||"",a.button=f(a.button||document.createElement("div")),a.button.html(a.innerHTML),a.container.html(a.button),c.call(this,"FilePicker",!0)}var f=b.$;return e.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},b.inherits(c,{constructor:e,init:function(){var b=this,c=b.options,e=c.button;e.addClass("webuploader-pick"),b.on("all",function(a){var g;switch(a){case"mouseenter":e.addClass("webuploader-pick-hover");break;case"mouseleave":e.removeClass("webuploader-pick-hover");break;case"change":g=b.exec("getFiles"),b.trigger("select",f.map(g,function(a){return a=new d(b.getRuid(),a),a._refer=c.container,a}),c.container)}}),b.connectRuntime(c,function(){b.refresh(),b.exec("init",c),b.trigger("ready")}),f(a).on("resize",function(){b.refresh()})},refresh:function(){var a=this.getRuntime().getContainer(),b=this.options.button,c=b.outerWidth?b.outerWidth():b.width(),d=b.outerHeight?b.outerHeight():b.height(),e=b.offset();c&&d&&a.css({bottom:"auto",right:"auto",width:c+"px",height:d+"px"}).offset(e)},enable:function(){var a=this.options.button;a.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var a=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),a.addClass("webuploader-pick-disable")},destroy:function(){this.runtime&&(this.exec("destroy"),this.disconnectRuntime())}}),e}),b("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(a,b,c){var d=a.$;return d.extend(b.options,{pick:null,accept:null}),b.register({"add-btn":"addButton",refresh:"refresh",disable:"disable",enable:"enable"},{init:function(a){return this.pickers=[],a.pick&&this.addButton(a.pick)},refresh:function(){d.each(this.pickers,function(){this.refresh()})},addButton:function(b){var e,f,g,h=this,i=h.options,j=i.accept;if(b)return g=a.Deferred(),d.isPlainObject(b)||(b={id:b}),e=d.extend({},b,{accept:d.isPlainObject(j)?[j]:j,swf:i.swf,runtimeOrder:i.runtimeOrder}),f=new c(e),f.once("ready",g.resolve),f.on("select",function(a){h.owner.request("add-file",[a])}),f.init(),this.pickers.push(f),g.promise()},disable:function(){d.each(this.pickers,function(){this.disable()})},enable:function(){d.each(this.pickers,function(){this.enable()})}})}),b("lib/image",["base","runtime/client","lib/blob"],function(a,b,c){function d(a){this.options=e.extend({},d.options,a),b.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var e=a.$;return d.options={quality:90,crop:!1,preserveHeaders:!0,allowMagnify:!0},a.inherits(b,{constructor:d,info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._meta=a,this):this._meta},loadFromBlob:function(a){var b=this,c=a.getRuid();this.connectRuntime(c,function(){b.exec("init",b.options),b.exec("loadFromBlob",a)})},resize:function(){var b=a.slice(arguments);return this.exec.apply(this,["resize"].concat(b))},getAsDataUrl:function(a){return this.exec("getAsDataUrl",a)},getAsBlob:function(a){var b=this.exec("getAsBlob",a);return new c(this.getRuid(),b)}}),d}),b("widgets/image",["base","uploader","lib/image","widgets/widget"],function(a,b,c){var d,e=a.$;return d=function(a){var b=0,c=[],d=function(){for(var d;c.length&&a>b;)d=c.shift(),b+=d[0],d[1]()};return function(a,e,f){c.push([e,f]),a.once("destroy",function(){b-=e,setTimeout(d,1)}),setTimeout(d,1)}}(5242880),e.extend(b.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),b.register({"make-thumb":"makeThumb","before-send-file":"compressImage"},{makeThumb:function(a,b,f,g){var h,i;return a=this.request("get-file",a),a.type.match(/^image/)?(h=e.extend({},this.options.thumb),e.isPlainObject(f)&&(h=e.extend(h,f),f=null),f=f||h.width,g=g||h.height,i=new c(h),i.once("load",function(){a._info=a._info||i.info(),a._meta=a._meta||i.meta(),i.resize(f,g)}),i.once("complete",function(){b(!1,i.getAsDataUrl(h.type)),i.destroy()}),i.once("error",function(){b(!0),i.destroy()}),void d(i,a.source.size,function(){a._info&&i.info(a._info),a._meta&&i.meta(a._meta),i.loadFromBlob(a.source)})):void b(!0)},compressImage:function(b){var d,f,g=this.options.compress||this.options.resize,h=g&&g.compressSize||307200;return b=this.request("get-file",b),!g||!~"image/jpeg,image/jpg".indexOf(b.type)||b.size<h||b._compressed?void 0:(g=e.extend({},g),f=a.Deferred(),d=new c(g),f.always(function(){d.destroy(),d=null}),d.once("error",f.reject),d.once("load",function(){b._info=b._info||d.info(),b._meta=b._meta||d.meta(),d.resize(g.width,g.height)}),d.once("complete",function(){var a,c;try{a=d.getAsBlob(g.type),c=b.size,a.size<c&&(b.source=a,b.size=a.size,b.trigger("resize",a.size,c)),b._compressed=!0,f.resolve()}catch(e){f.resolve()}}),b._info&&d.info(b._info),b._meta&&d.meta(b._meta),d.loadFromBlob(b.source),f.promise())}})}),b("file",["base","mediator"],function(a,b){function c(){return f+g++}function d(a){this.name=a.name||"Untitled",this.size=a.size||0,this.type=a.type||"application",this.lastModifiedDate=a.lastModifiedDate||1*new Date,this.id=c(),this.ext=h.exec(this.name)?RegExp.$1:"",this.statusText="",i[this.id]=d.Status.INITED,this.source=a,this.loaded=0,this.on("error",function(a){this.setStatus(d.Status.ERROR,a)})}var e=a.$,f="WU_FILE_",g=0,h=/\.([^.]+)$/,i={};return e.extend(d.prototype,{setStatus:function(a,b){var c=i[this.id];"undefined"!=typeof b&&(this.statusText=b),a!==c&&(i[this.id]=a,this.trigger("statuschange",a,c))},getStatus:function(){return i[this.id]},getSource:function(){return this.source},destory:function(){delete i[this.id]}}),b.installTo(d.prototype),d.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},d}),b("queue",["base","mediator","file"],function(a,b,c){function d(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0},this._queue=[],this._map={}}var e=a.$,f=c.Status;return e.extend(d.prototype,{append:function(a){return this._queue.push(a),this._fileAdded(a),this},prepend:function(a){return this._queue.unshift(a),this._fileAdded(a),this},getFile:function(a){return"string"!=typeof a?a:this._map[a]},fetch:function(a){var b,c,d=this._queue.length;for(a=a||f.QUEUED,b=0;d>b;b++)if(c=this._queue[b],a===c.getStatus())return c;return null},sort:function(a){"function"==typeof a&&this._queue.sort(a)},getFiles:function(){for(var a,b=[].slice.call(arguments,0),c=[],d=0,f=this._queue.length;f>d;d++)a=this._queue[d],(!b.length||~e.inArray(a.getStatus(),b))&&c.push(a);return c},_fileAdded:function(a){var b=this,c=this._map[a.id];c||(this._map[a.id]=a,a.on("statuschange",function(a,c){b._onFileStatusChange(a,c)})),a.setStatus(f.QUEUED)},_onFileStatusChange:function(a,b){var c=this.stats;switch(b){case f.PROGRESS:c.numOfProgress--;break;case f.QUEUED:c.numOfQueue--;break;case f.ERROR:c.numOfUploadFailed--;break;case f.INVALID:c.numOfInvalid--}switch(a){case f.QUEUED:c.numOfQueue++;break;case f.PROGRESS:c.numOfProgress++;break;case f.ERROR:c.numOfUploadFailed++;break;case f.COMPLETE:c.numOfSuccess++;break;case f.CANCELLED:c.numOfCancel++;break;case f.INVALID:c.numOfInvalid++}}}),b.installTo(d.prototype),d}),b("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(a,b,c,d,e,f){var g=a.$,h=/\.\w+$/,i=d.Status;return b.register({"sort-files":"sortFiles","add-file":"addFiles","get-file":"getFile","fetch-file":"fetchFile","get-stats":"getStats","get-files":"getFiles","remove-file":"removeFile",retry:"retry",reset:"reset","accept-file":"acceptFile"},{init:function(b){var d,e,h,i,j,k,l,m=this;if(g.isPlainObject(b.accept)&&(b.accept=[b.accept]),b.accept){for(j=[],h=0,e=b.accept.length;e>h;h++)i=b.accept[h].extensions,i&&j.push(i);j.length&&(k="\\."+j.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),m.accept=new RegExp(k,"i")}return m.queue=new c,m.stats=m.queue.stats,"html5"===this.request("predict-runtime-type")?(d=a.Deferred(),l=new f("Placeholder"),l.connectRuntime({runtimeOrder:"html5"},function(){m._ruid=l.getRuid(),d.resolve()}),d.promise()):void 0},_wrapFile:function(a){if(!(a instanceof d)){if(!(a instanceof e)){if(!this._ruid)throw new Error("Can't add external files.");a=new e(this._ruid,a)}a=new d(a)}return a},acceptFile:function(a){var b=!a||a.size<6||this.accept&&h.exec(a.name)&&!this.accept.test(a.name);return!b},_addFile:function(a){var b=this;return a=b._wrapFile(a),b.owner.trigger("beforeFileQueued",a)?b.acceptFile(a)?(b.queue.append(a),b.owner.trigger("fileQueued",a),a):void b.owner.trigger("error","Q_TYPE_DENIED",a):void 0},getFile:function(a){return this.queue.getFile(a)},addFiles:function(a){var b=this;a.length||(a=[a]),a=g.map(a,function(a){return b._addFile(a)}),b.owner.trigger("filesQueued",a),b.options.auto&&b.request("start-upload")},getStats:function(){return this.stats},removeFile:function(a){var b=this;a=a.id?a:b.queue.getFile(a),a.setStatus(i.CANCELLED),b.owner.trigger("fileDequeued",a)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(a,b){var c,d,e,f=this;if(a)return a=a.id?a:f.queue.getFile(a),a.setStatus(i.QUEUED),void(b||f.request("start-upload"));for(c=f.queue.getFiles(i.ERROR),d=0,e=c.length;e>d;d++)a=c[d],a.setStatus(i.QUEUED);f.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.queue=new c,this.stats=this.queue.stats}})}),b("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(a,b){return a.support=function(){return b.hasRuntime.apply(b,arguments)},a.register({"predict-runtime-type":"predictRuntmeType"},{init:function(){if(!this.predictRuntmeType())throw Error("Runtime Error")},predictRuntmeType:function(){var a,c,d=this.options.runtimeOrder||b.orders,e=this.type;if(!e)for(d=d.split(/\s*,\s*/g),a=0,c=d.length;c>a;a++)if(b.hasRuntime(d[a])){this.type=e=d[a];break}return e}})}),b("lib/transport",["base","runtime/client","mediator"],function(a,b,c){function d(a){var c=this;a=c.options=e.extend(!0,{},d.options,a||{}),b.call(this,"Transport"),this._blob=null,this._formData=a.formData||{},this._headers=a.headers||{},this.on("progress",this._timeout),this.on("load error",function(){c.trigger("progress",1),clearTimeout(c._timer)})}var e=a.$;return d.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},e.extend(d.prototype,{appendBlob:function(a,b,c){var d=this,e=d.options;d.getRuid()&&d.disconnectRuntime(),d.connectRuntime(b.ruid,function(){d.exec("init")}),d._blob=b,e.fileVal=a||e.fileVal,e.filename=c||e.filename},append:function(a,b){"object"==typeof a?e.extend(this._formData,a):this._formData[a]=b},setRequestHeader:function(a,b){"object"==typeof a?e.extend(this._headers,a):this._headers[a]=b},send:function(a){this.exec("send",a),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var a=this,b=a.options.timeout;b&&(clearTimeout(a._timer),a._timer=setTimeout(function(){a.abort(),a.trigger("error","timeout")},b))}}),c.installTo(d.prototype),d}),b("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(a,b,c,d){function e(a,b){for(var c,d=[],e=a.source,f=e.size,g=b?Math.ceil(f/b):1,h=0,i=0;g>i;)c=Math.min(b,f-h),d.push({file:a,start:h,end:b?h+c:f,total:f,chunks:g,chunk:i++}),h+=c;return a.blocks=d.concat(),a.remaning=d.length,{file:a,has:function(){return!!d.length},fetch:function(){return d.shift()}}}var f=a.$,g=a.isPromise,h=c.Status;f.extend(b.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:null}),b.register({"start-upload":"start","stop-upload":"stop","skip-file":"skipFile","is-in-progress":"isInProgress"},{init:function(){var b=this.owner;this.runing=!1,this.pool=[],this.pending=[],this.remaning=0,this.__tick=a.bindFn(this._tick,this),b.on("uploadComplete",function(a){a.blocks&&f.each(a.blocks,function(a,b){b.transport&&(b.transport.abort(),b.transport.destroy()),delete b.transport}),delete a.blocks,delete a.remaning})},start:function(){var b=this;f.each(b.request("get-files",h.INVALID),function(){b.request("remove-file",this)}),b.runing||(b.runing=!0,f.each(b.pool,function(a,c){var d=c.file;d.getStatus()===h.INTERRUPT&&(d.setStatus(h.PROGRESS),b._trigged=!1,c.transport&&c.transport.send())}),b._trigged=!1,b.owner.trigger("startUpload"),a.nextTick(b.__tick))},stop:function(a){var b=this;b.runing!==!1&&(b.runing=!1,a&&f.each(b.pool,function(a,b){b.transport&&b.transport.abort(),b.file.setStatus(h.INTERRUPT)}),b.owner.trigger("stopUpload"))},isInProgress:function(){return!!this.runing},getStats:function(){return this.request("get-stats")},skipFile:function(a,b){a=this.request("get-file",a),a.setStatus(b||h.COMPLETE),a.skipped=!0,a.blocks&&f.each(a.blocks,function(a,b){var c=b.transport;c&&(c.abort(),c.destroy(),delete b.transport)}),this.owner.trigger("uploadSkip",a)},_tick:function(){var b,c,d=this,e=d.options;return d._promise?d._promise.always(d.__tick):void(d.pool.length<e.threads&&(c=d._nextBlock())?(d._trigged=!1,b=function(b){d._promise=null,b&&b.file&&d._startSend(b),a.nextTick(d.__tick)},d._promise=g(c)?c.always(b):b(c)):d.remaning||d.getStats().numOfQueue||(d.runing=!1,d._trigged||a.nextTick(function(){d.owner.trigger("uploadFinished")}),d._trigged=!0))},_nextBlock:function(){var a,b,c=this,d=c._act,f=c.options;return d&&d.has()&&d.file.getStatus()===h.PROGRESS?(f.prepareNextFile&&!c.pending.length&&c._prepareNextFile(),d.fetch()):c.runing?(!c.pending.length&&c.getStats().numOfQueue&&c._prepareNextFile(),a=c.pending.shift(),b=function(a){return a?(d=e(a,f.chunked?f.chunkSize:0),c._act=d,d.fetch()):null},g(a)?a[a.pipe?"pipe":"then"](b):b(a)):void 0},_prepareNextFile:function(){var a,b=this,c=b.request("fetch-file"),d=b.pending;c&&(a=b.request("before-send-file",c,function(){return c.getStatus()===h.QUEUED?(b.owner.trigger("uploadStart",c),c.setStatus(h.PROGRESS),c):b._finishFile(c)}),a.done(function(){var b=f.inArray(a,d);~b&&d.splice(b,1,c)}),a.fail(function(a){c.setStatus(h.ERROR,a),b.owner.trigger("uploadError",c,a),b.owner.trigger("uploadComplete",c)}),d.push(a))},_popBlock:function(a){var b=f.inArray(a,this.pool);this.pool.splice(b,1),a.file.remaning--,this.remaning--},_startSend:function(b){var c,d=this,e=b.file;d.pool.push(b),d.remaning++,b.blob=1===b.chunks?e.source:e.source.slice(b.start,b.end),c=d.request("before-send",b,function(){e.getStatus()===h.PROGRESS?d._doSend(b):(d._popBlock(b),a.nextTick(d.__tick))}),c.fail(function(){1===e.remaning?d._finishFile(e).always(function(){b.percentage=1,d._popBlock(b),d.owner.trigger("uploadComplete",e),a.nextTick(d.__tick)}):(b.percentage=1,d._popBlock(b),a.nextTick(d.__tick))})},_doSend:function(b){var c,e,g=this,i=g.owner,j=g.options,k=b.file,l=new d(j),m=f.extend({},j.formData),n=f.extend({},j.headers);b.transport=l,l.on("destroy",function(){delete b.transport,g._popBlock(b),a.nextTick(g.__tick)}),l.on("progress",function(a){var c=0,d=0;c=b.percentage=a,b.chunks>1&&(f.each(k.blocks,function(a,b){d+=(b.percentage||0)*(b.end-b.start)}),c=d/k.size),i.trigger("uploadProgress",k,c||0)}),c=function(a){var c;return e=l.getResponseAsJson()||{},e._raw=l.getResponse(),c=function(b){a=b},i.trigger("uploadAccept",b,e,c)||(a=a||"server"),a},l.on("error",function(a,d){b.retried=b.retried||0,b.chunks>1&&~"http,abort".indexOf(a)&&b.retried<j.chunkRetry?(b.retried++,l.send()):(d||"server"!==a||(a=c(a)),k.setStatus(h.ERROR,a),i.trigger("uploadError",k,a),i.trigger("uploadComplete",k))}),l.on("load",function(){var a;return(a=c())?void l.trigger("error",a,!0):void(1===k.remaning?g._finishFile(k,e):l.destroy())}),m=f.extend(m,{id:k.id,name:k.name,type:k.type,lastModifiedDate:k.lastModifiedDate,size:k.size}),b.chunks>1&&f.extend(m,{chunks:b.chunks,chunk:b.chunk}),i.trigger("uploadBeforeSend",b,m,n),l.appendBlob(j.fileVal,b.blob,k.name),l.append(m),l.setRequestHeader(n),l.send()},_finishFile:function(a,b,c){var d=this.owner;return d.request("after-send-file",arguments,function(){a.setStatus(h.COMPLETE),d.trigger("uploadSuccess",a,b,c)}).fail(function(b){a.getStatus()===h.PROGRESS&&a.setStatus(h.ERROR,b),d.trigger("uploadError",a,b)}).always(function(){d.trigger("uploadComplete",a)})}})}),b("widgets/validator",["base","uploader","file","widgets/widget"],function(a,b,c){var d,e=a.$,f={};return d={addValidator:function(a,b){f[a]=b},removeValidator:function(a){delete f[a]}},b.register({init:function(){var a=this;e.each(f,function(){this.call(a.owner)})}}),d.addValidator("fileNumLimit",function(){var a=this,b=a.options,c=0,d=b.fileNumLimit>>0,e=!0;d&&(a.on("beforeFileQueued",function(a){return c>=d&&e&&(e=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",d,a),setTimeout(function(){e=!0},1)),c>=d?!1:!0}),a.on("fileQueued",function(){c++}),a.on("fileDequeued",function(){c--}),a.on("uploadFinished",function(){c=0}))}),d.addValidator("fileSizeLimit",function(){var a=this,b=a.options,c=0,d=b.fileSizeLimit>>0,e=!0;d&&(a.on("beforeFileQueued",function(a){var b=c+a.size>d;return b&&e&&(e=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",d,a),setTimeout(function(){e=!0},1)),b?!1:!0}),a.on("fileQueued",function(a){c+=a.size}),a.on("fileDequeued",function(a){c-=a.size}),a.on("uploadFinished",function(){c=0}))}),d.addValidator("fileSingleSizeLimit",function(){var a=this,b=a.options,d=b.fileSingleSizeLimit;d&&a.on("beforeFileQueued",function(a){return a.size>d?(a.setStatus(c.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",a),!1):void 0})}),d.addValidator("duplicate",function(){function a(a){for(var b,c=0,d=0,e=a.length;e>d;d++)b=a.charCodeAt(d),c=b+(c<<6)+(c<<16)-c;return c}var b=this,c=b.options,d={};c.duplicate||(b.on("beforeFileQueued",function(b){var c=b.__hash||(b.__hash=a(b.name+b.size+b.lastModifiedDate));return d[c]?(this.trigger("error","F_DUPLICATE",b),!1):void 0}),b.on("fileQueued",function(a){var b=a.__hash;b&&(d[b]=!0)}),b.on("fileDequeued",function(a){var b=a.__hash;b&&delete d[b]}))}),d}),b("runtime/compbase",[],function(){function a(a,b){this.owner=a,this.options=a.options,this.getRuntime=function(){return b},this.getRuid=function(){return b.uid},this.trigger=function(){return a.trigger.apply(a,arguments)}}return a}),b("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(b,c,d){function e(){var a={},d=this,e=this.destory;c.apply(d,arguments),d.type=f,d.exec=function(c,e){var f,h=this,i=h.uid,j=b.slice(arguments,2);return g[c]&&(f=a[i]=a[i]||new g[c](h,d),f[e])?f[e].apply(f,j):void 0},d.destory=function(){return e&&e.apply(this,arguments)}}var f="html5",g={};return b.inherits(c,{constructor:e,init:function(){var a=this;setTimeout(function(){a.trigger("ready")},1)}}),e.register=function(a,c){var e=g[a]=b.inherits(d,c);return e},a.Blob&&a.FileReader&&a.DataView&&c.addRuntime(f,e),e}),b("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(a,b){return a.register("Blob",{slice:function(a,c){var d=this.owner.source,e=d.slice||d.webkitSlice||d.mozSlice;return d=e.call(d,a,c),new b(this.getRuid(),d)}})}),b("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(a,b,c){var d=a.$,e="webuploader-dnd-";return b.register("DragAndDrop",{init:function(){var b=this.elem=this.options.container;this.dragEnterHandler=a.bindFn(this._dragEnterHandler,this),this.dragOverHandler=a.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=a.bindFn(this._dragLeaveHandler,this),this.dropHandler=a.bindFn(this._dropHandler,this),this.dndOver=!1,b.on("dragenter",this.dragEnterHandler),b.on("dragover",this.dragOverHandler),b.on("dragleave",this.dragLeaveHandler),b.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(d(document).on("dragover",this.dragOverHandler),d(document).on("drop",this.dropHandler))
},_dragEnterHandler:function(a){var b,c=this,d=c._denied||!1;return a=a.originalEvent||a,c.dndOver||(c.dndOver=!0,b=a.dataTransfer.items,b&&b.length&&(c._denied=d=!c.trigger("accept",b)),c.elem.addClass(e+"over"),c.elem[d?"addClass":"removeClass"](e+"denied")),a.dataTransfer.dropEffect=d?"none":"copy",!1},_dragOverHandler:function(a){var b=this.elem.parent().get(0);return b&&!d.contains(b,a.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,a),!1)},_dragLeaveHandler:function(){var a,b=this;return a=function(){b.dndOver=!1,b.elem.removeClass(e+"over "+e+"denied")},clearTimeout(b._leaveTimer),b._leaveTimer=setTimeout(a,100),!1},_dropHandler:function(a){var b=this,f=b.getRuid(),g=b.elem.parent().get(0);return g&&!d.contains(g,a.currentTarget)?!1:(b._getTansferFiles(a,function(a){b.trigger("drop",d.map(a,function(a){return new c(f,a)}))}),b.dndOver=!1,b.elem.removeClass(e+"over"),!1)},_getTansferFiles:function(b,c){var d,e,f,g,h,i,j,k,l=[],m=[];for(b=b.originalEvent||b,f=b.dataTransfer,d=f.items,e=f.files,k=!(!d||!d[0].webkitGetAsEntry),i=0,j=e.length;j>i;i++)g=e[i],h=d&&d[i],k&&h.webkitGetAsEntry().isDirectory?m.push(this._traverseDirectoryTree(h.webkitGetAsEntry(),l)):l.push(g);a.when.apply(a,m).done(function(){l.length&&c(l)})},_traverseDirectoryTree:function(b,c){var d=a.Deferred(),e=this;return b.isFile?b.file(function(a){c.push(a),d.resolve()}):b.isDirectory&&b.createReader().readEntries(function(b){var f,g=b.length,h=[],i=[];for(f=0;g>f;f++)h.push(e._traverseDirectoryTree(b[f],i));a.when.apply(a,h).then(function(){c.push.apply(c,i),d.resolve()},d.reject)}),d.promise()},destroy:function(){var a=this.elem;a.off("dragenter",this.dragEnterHandler),a.off("dragover",this.dragEnterHandler),a.off("dragleave",this.dragLeaveHandler),a.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(d(document).off("dragover",this.dragOverHandler),d(document).off("drop",this.dropHandler))}})}),b("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(a,b,c){return b.register("FilePaste",{init:function(){var b,c,d,e,f=this.options,g=this.elem=f.container,h=".*";if(f.accept){for(b=[],c=0,d=f.accept.length;d>c;c++)e=f.accept[c].mimeTypes,e&&b.push(e);b.length&&(h=b.join(","),h=h.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=h=new RegExp(h,"i"),this.hander=a.bindFn(this._pasteHander,this),g.on("paste",this.hander)},_pasteHander:function(a){var b,d,e,f,g,h=[],i=this.getRuid();for(a=a.originalEvent||a,b=a.clipboardData.items,f=0,g=b.length;g>f;f++)d=b[f],"file"===d.kind&&(e=d.getAsFile())&&h.push(new c(i,e));h.length&&(a.preventDefault(),a.stopPropagation(),this.trigger("paste",h))},destroy:function(){this.elem.off("paste",this.hander)}})}),b("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(a,b){var c=a.$;return b.register("FilePicker",{init:function(){var a,b,d,e,f=this.getRuntime().getContainer(),g=this,h=g.owner,i=g.options,j=c(document.createElement("label")),k=c(document.createElement("input"));if(k.attr("type","file"),k.attr("name",i.name),k.addClass("webuploader-element-invisible"),j.on("click",function(){k.trigger("click")}),j.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),i.multiple&&k.attr("multiple","multiple"),i.accept&&i.accept.length>0){for(a=[],b=0,d=i.accept.length;d>b;b++)a.push(i.accept[b].mimeTypes);k.attr("accept",a.join(","))}f.append(k),f.append(j),e=function(a){h.trigger(a.type)},k.on("change",function(a){var b,d=arguments.callee;g.files=a.target.files,b=this.cloneNode(!0),this.parentNode.replaceChild(b,this),k.off(),k=c(b).on("change",d).on("mouseenter mouseleave",e),h.trigger("change")}),j.on("mouseenter mouseleave",e)},getFiles:function(){return this.files},destroy:function(){}})}),b("runtime/html5/util",["base"],function(b){var c=a.createObjectURL&&a||a.URL&&URL.revokeObjectURL&&URL||a.webkitURL,d=b.noop,e=d;return c&&(d=function(){return c.createObjectURL.apply(c,arguments)},e=function(){return c.revokeObjectURL.apply(c,arguments)}),{createObjectURL:d,revokeObjectURL:e,dataURL2Blob:function(a){var b,c,d,e,f,g;for(g=a.split(","),b=~g[0].indexOf("base64")?atob(g[1]):decodeURIComponent(g[1]),d=new ArrayBuffer(b.length),c=new Uint8Array(d),e=0;e<b.length;e++)c[e]=b.charCodeAt(e);return f=g[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(d,f)},dataURL2ArrayBuffer:function(a){var b,c,d,e;for(e=a.split(","),b=~e[0].indexOf("base64")?atob(e[1]):decodeURIComponent(e[1]),c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return c.buffer},arrayBufferToBlob:function(b,c){var d,e=a.BlobBuilder||a.WebKitBlobBuilder;return e?(d=new e,d.append(b),d.getBlob(c)):new Blob([b],c?{type:c}:{})},canvasToDataUrl:function(a,b,c){return a.toDataURL(b,c/100)},parseMeta:function(a,b){b(!1,{})},updateImageHead:function(a){return a}}}),b("runtime/html5/imagemeta",["runtime/html5/util"],function(a){var b;return b={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(a,b){var c=this,d=new FileReader;d.onload=function(){b(!1,c._parse(this.result)),d=d.onload=d.onerror=null},d.onerror=function(a){b(a.message),d=d.onload=d.onerror=null},a=a.slice(0,c.maxMetaDataSize),d.readAsArrayBuffer(a.getSource())},_parse:function(a,c){if(!(a.byteLength<6)){var d,e,f,g,h=new DataView(a),i=2,j=h.byteLength-4,k=i,l={};if(65496===h.getUint16(0)){for(;j>i&&(d=h.getUint16(i),d>=65504&&65519>=d||65534===d)&&(e=h.getUint16(i+2)+2,!(i+e>h.byteLength));){if(f=b.parsers[d],!c&&f)for(g=0;g<f.length;g+=1)f[g].call(b,h,i,e,l);i+=e,k=i}k>6&&(l.imageHead=a.slice?a.slice(2,k):new Uint8Array(a).subarray(2,k))}return l}},updateImageHead:function(a,b){var c,d,e,f=this._parse(a,!0);return e=2,f.imageHead&&(e=2+f.imageHead.byteLength),d=a.slice?a.slice(e):new Uint8Array(a).subarray(e),c=new Uint8Array(b.byteLength+2+d.byteLength),c[0]=255,c[1]=216,c.set(new Uint8Array(b),2),c.set(new Uint8Array(d),b.byteLength+2),c.buffer}},a.parseMeta=function(){return b.parse.apply(b,arguments)},a.updateImageHead=function(){return b.updateImageHead.apply(b,arguments)},b}),b("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(a,b){var c={};return c.ExifMap=function(){return this},c.ExifMap.prototype.map={Orientation:274},c.ExifMap.prototype.get=function(a){return this[a]||this[this.map[a]]},c.exifTagTypes={1:{getValue:function(a,b){return a.getUint8(b)},size:1},2:{getValue:function(a,b){return String.fromCharCode(a.getUint8(b))},size:1,ascii:!0},3:{getValue:function(a,b,c){return a.getUint16(b,c)},size:2},4:{getValue:function(a,b,c){return a.getUint32(b,c)},size:4},5:{getValue:function(a,b,c){return a.getUint32(b,c)/a.getUint32(b+4,c)},size:8},9:{getValue:function(a,b,c){return a.getInt32(b,c)},size:4},10:{getValue:function(a,b,c){return a.getInt32(b,c)/a.getInt32(b+4,c)},size:8}},c.exifTagTypes[7]=c.exifTagTypes[1],c.getExifValue=function(b,d,e,f,g,h){var i,j,k,l,m,n,o=c.exifTagTypes[f];if(!o)return void a.log("Invalid Exif data: Invalid tag type.");if(i=o.size*g,j=i>4?d+b.getUint32(e+8,h):e+8,j+i>b.byteLength)return void a.log("Invalid Exif data: Invalid data offset.");if(1===g)return o.getValue(b,j,h);for(k=[],l=0;g>l;l+=1)k[l]=o.getValue(b,j+l*o.size,h);if(o.ascii){for(m="",l=0;l<k.length&&(n=k[l],"\x00"!==n);l+=1)m+=n;return m}return k},c.parseExifTag=function(a,b,d,e,f){var g=a.getUint16(d,e);f.exif[g]=c.getExifValue(a,b,d,a.getUint16(d+2,e),a.getUint32(d+4,e),e)},c.parseExifTags=function(b,c,d,e,f){var g,h,i;if(d+6>b.byteLength)return void a.log("Invalid Exif data: Invalid directory offset.");if(g=b.getUint16(d,e),h=d+2+12*g,h+4>b.byteLength)return void a.log("Invalid Exif data: Invalid directory size.");for(i=0;g>i;i+=1)this.parseExifTag(b,c,d+2+12*i,e,f);return b.getUint32(h,e)},c.parseExifData=function(b,d,e,f){var g,h,i=d+10;if(1165519206===b.getUint32(d+4)){if(i+8>b.byteLength)return void a.log("Invalid Exif data: Invalid segment size.");if(0!==b.getUint16(d+8))return void a.log("Invalid Exif data: Missing byte alignment offset.");switch(b.getUint16(i)){case 18761:g=!0;break;case 19789:g=!1;break;default:return void a.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==b.getUint16(i+2,g))return void a.log("Invalid Exif data: Missing TIFF marker.");h=b.getUint32(i+4,g),f.exif=new c.ExifMap,h=c.parseExifTags(b,i,i+h,g,f)}},b.parsers[65505].push(c.parseExifData),c}),b("runtime/html5/jpegencoder",[],function(){function a(a){function b(a){for(var b=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],c=0;64>c;c++){var d=y((b[c]*a+50)/100);1>d?d=1:d>255&&(d=255),z[P[c]]=d}for(var e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],f=0;64>f;f++){var g=y((e[f]*a+50)/100);1>g?g=1:g>255&&(g=255),A[P[f]]=g}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],i=0,j=0;8>j;j++)for(var k=0;8>k;k++)B[i]=1/(z[P[i]]*h[j]*h[k]*8),C[i]=1/(A[P[i]]*h[j]*h[k]*8),i++}function c(a,b){for(var c=0,d=0,e=new Array,f=1;16>=f;f++){for(var g=1;g<=a[f];g++)e[b[d]]=[],e[b[d]][0]=c,e[b[d]][1]=f,d++,c++;c*=2}return e}function d(){t=c(Q,R),u=c(U,V),v=c(S,T),w=c(W,X)}function e(){for(var a=1,b=2,c=1;15>=c;c++){for(var d=a;b>d;d++)E[32767+d]=c,D[32767+d]=[],D[32767+d][1]=c,D[32767+d][0]=d;for(var e=-(b-1);-a>=e;e++)E[32767+e]=c,D[32767+e]=[],D[32767+e][1]=c,D[32767+e][0]=b-1+e;a<<=1,b<<=1}}function f(){for(var a=0;256>a;a++)O[a]=19595*a,O[a+256>>0]=38470*a,O[a+512>>0]=7471*a+32768,O[a+768>>0]=-11059*a,O[a+1024>>0]=-21709*a,O[a+1280>>0]=32768*a+8421375,O[a+1536>>0]=-27439*a,O[a+1792>>0]=-5329*a}function g(a){for(var b=a[0],c=a[1]-1;c>=0;)b&1<<c&&(I|=1<<J),c--,J--,0>J&&(255==I?(h(255),h(0)):h(I),J=7,I=0)}function h(a){H.push(N[a])}function i(a){h(a>>8&255),h(255&a)}function j(a,b){var c,d,e,f,g,h,i,j,k,l=0,m=8,n=64;for(k=0;m>k;++k){c=a[l],d=a[l+1],e=a[l+2],f=a[l+3],g=a[l+4],h=a[l+5],i=a[l+6],j=a[l+7];var o=c+j,p=c-j,q=d+i,r=d-i,s=e+h,t=e-h,u=f+g,v=f-g,w=o+u,x=o-u,y=q+s,z=q-s;a[l]=w+y,a[l+4]=w-y;var A=.707106781*(z+x);a[l+2]=x+A,a[l+6]=x-A,w=v+t,y=t+r,z=r+p;var B=.382683433*(w-z),C=.5411961*w+B,D=1.306562965*z+B,E=.707106781*y,G=p+E,H=p-E;a[l+5]=H+C,a[l+3]=H-C,a[l+1]=G+D,a[l+7]=G-D,l+=8}for(l=0,k=0;m>k;++k){c=a[l],d=a[l+8],e=a[l+16],f=a[l+24],g=a[l+32],h=a[l+40],i=a[l+48],j=a[l+56];var I=c+j,J=c-j,K=d+i,L=d-i,M=e+h,N=e-h,O=f+g,P=f-g,Q=I+O,R=I-O,S=K+M,T=K-M;a[l]=Q+S,a[l+32]=Q-S;var U=.707106781*(T+R);a[l+16]=R+U,a[l+48]=R-U,Q=P+N,S=N+L,T=L+J;var V=.382683433*(Q-T),W=.5411961*Q+V,X=1.306562965*T+V,Y=.707106781*S,Z=J+Y,$=J-Y;a[l+40]=$+W,a[l+24]=$-W,a[l+8]=Z+X,a[l+56]=Z-X,l++}var _;for(k=0;n>k;++k)_=a[k]*b[k],F[k]=_>0?_+.5|0:_-.5|0;return F}function k(){i(65504),i(16),h(74),h(70),h(73),h(70),h(0),h(1),h(1),h(0),i(1),i(1),h(0),h(0)}function l(a,b){i(65472),i(17),h(8),i(b),i(a),h(3),h(1),h(17),h(0),h(2),h(17),h(1),h(3),h(17),h(1)}function m(){i(65499),i(132),h(0);for(var a=0;64>a;a++)h(z[a]);h(1);for(var b=0;64>b;b++)h(A[b])}function n(){i(65476),i(418),h(0);for(var a=0;16>a;a++)h(Q[a+1]);for(var b=0;11>=b;b++)h(R[b]);h(16);for(var c=0;16>c;c++)h(S[c+1]);for(var d=0;161>=d;d++)h(T[d]);h(1);for(var e=0;16>e;e++)h(U[e+1]);for(var f=0;11>=f;f++)h(V[f]);h(17);for(var g=0;16>g;g++)h(W[g+1]);for(var j=0;161>=j;j++)h(X[j])}function o(){i(65498),i(12),h(3),h(1),h(0),h(2),h(17),h(3),h(17),h(0),h(63),h(0)}function p(a,b,c,d,e){for(var f,h=e[0],i=e[240],k=16,l=63,m=64,n=j(a,b),o=0;m>o;++o)G[P[o]]=n[o];var p=G[0]-c;c=G[0],0==p?g(d[0]):(f=32767+p,g(d[E[f]]),g(D[f]));for(var q=63;q>0&&0==G[q];q--);if(0==q)return g(h),c;for(var r,s=1;q>=s;){for(var t=s;0==G[s]&&q>=s;++s);var u=s-t;if(u>=k){r=u>>4;for(var v=1;r>=v;++v)g(i);u=15&u}f=32767+G[s],g(e[(u<<4)+E[f]]),g(D[f]),s++}return q!=l&&g(h),c}function q(){for(var a=String.fromCharCode,b=0;256>b;b++)N[b]=a(b)}function r(a){if(0>=a&&(a=1),a>100&&(a=100),x!=a){var c=0;c=Math.floor(50>a?5e3/a:200-2*a),b(c),x=a}}function s(){a||(a=50),q(),d(),e(),f(),r(a)}var t,u,v,w,x,y=(Math.round,Math.floor),z=new Array(64),A=new Array(64),B=new Array(64),C=new Array(64),D=new Array(65535),E=new Array(65535),F=new Array(64),G=new Array(64),H=[],I=0,J=7,K=new Array(64),L=new Array(64),M=new Array(64),N=new Array(256),O=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(a,b){b&&r(b),H=new Array,I=0,J=7,i(65496),k(),m(),l(a.width,a.height),n(),o();var c=0,d=0,e=0;I=0,J=7,this.encode.displayName="_encode_";for(var f,h,j,q,s,x,y,z,A,D=a.data,E=a.width,F=a.height,G=4*E,N=0;F>N;){for(f=0;G>f;){for(s=G*N+f,x=s,y=-1,z=0,A=0;64>A;A++)z=A>>3,y=4*(7&A),x=s+z*G+y,N+z>=F&&(x-=G*(N+1+z-F)),f+y>=G&&(x-=f+y-G+4),h=D[x++],j=D[x++],q=D[x++],K[A]=(O[h]+O[j+256>>0]+O[q+512>>0]>>16)-128,L[A]=(O[h+768>>0]+O[j+1024>>0]+O[q+1280>>0]>>16)-128,M[A]=(O[h+1280>>0]+O[j+1536>>0]+O[q+1792>>0]>>16)-128;c=p(K,B,c,t,v),d=p(L,C,d,u,w),e=p(M,C,e,u,w),f+=32}N+=8}if(J>=0){var P=[];P[1]=J+1,P[0]=(1<<J+1)-1,g(P)}i(65497);var Q="data:image/jpeg;base64,"+btoa(H.join(""));return H=[],Q},s()}return a.encode=function(b,c){var d=new a(c);return d.encode(b)},a}),b("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(a,b,c){var d,e=a.canvasToDataUrl;a.canvasToDataUrl=function(a,f,g){var h,i,j,k,l;return c.os.android?("image/jpeg"===f&&"undefined"==typeof d&&(k=e.apply(null,arguments),l=k.split(","),k=~l[0].indexOf("base64")?atob(l[1]):decodeURIComponent(l[1]),k=k.substring(0,2),d=255===k.charCodeAt(0)&&216===k.charCodeAt(1)),"image/jpeg"!==f||d?e.apply(null,arguments):(i=a.width,j=a.height,h=a.getContext("2d"),b.encode(h.getImageData(0,0,i,j),g))):e.apply(null,arguments)}}),b("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(a,b,c){var d="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return b.register("Image",{modified:!1,init:function(){var a=this,b=new Image;b.onload=function(){a._info={type:a.type,width:this.width,height:this.height},a._metas||"image/jpeg"!==a.type?a.owner.trigger("load"):c.parseMeta(a._blob,function(b,c){a._metas=c,a.owner.trigger("load")})},b.onerror=function(){a.owner.trigger("error")},a._img=b},loadFromBlob:function(a){var b=this,d=b._img;b._blob=a,b.type=a.type,d.src=c.createObjectURL(a.getSource()),b.owner.once("load",function(){c.revokeObjectURL(d.src)})},resize:function(a,b){var c=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,c,a,b),this._blob=null,this.modified=!0,this.owner.trigger("complete")},getAsBlob:function(a){var b,d=this._blob,e=this.options;if(a=a||this.type,this.modified||this.type!==a){if(b=this._canvas,"image/jpeg"===a){if(d=c.canvasToDataUrl(b,"image/jpeg",e.quality),e.preserveHeaders&&this._metas&&this._metas.imageHead)return d=c.dataURL2ArrayBuffer(d),d=c.updateImageHead(d,this._metas.imageHead),d=c.arrayBufferToBlob(d,a)}else d=c.canvasToDataUrl(b,a);d=c.dataURL2Blob(d)}return d},getAsDataUrl:function(a){var b=this.options;return a=a||this.type,"image/jpeg"===a?c.canvasToDataUrl(this._canvas,a,b.quality):this._canvas.toDataURL(a)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._meta=a,this):this._meta},destroy:function(){var a=this._canvas;this._img.onload=null,a&&(a.getContext("2d").clearRect(0,0,a.width,a.height),a.width=a.height=0,this._canvas=null),this._img.src=d,this._img=this._blob=null},_resize:function(a,b,c,d){var e,f,g,h,i,j=this.options,k=a.width,l=a.height,m=this.getOrientation();~[5,6,7,8].indexOf(m)&&(c^=d,d^=c,c^=d),e=Math[j.crop?"max":"min"](c/k,d/l),j.allowMagnify||(e=Math.min(1,e)),f=k*e,g=l*e,j.crop?(b.width=c,b.height=d):(b.width=f,b.height=g),h=(b.width-f)/2,i=(b.height-g)/2,j.preserveHeaders||this._rotate2Orientaion(b,m),this._renderImageToCanvas(b,a,h,i,f,g)},_rotate2Orientaion:function(a,b){var c=a.width,d=a.height,e=a.getContext("2d");switch(b){case 5:case 6:case 7:case 8:a.width=d,a.height=c}switch(b){case 2:e.translate(c,0),e.scale(-1,1);break;case 3:e.translate(c,d),e.rotate(Math.PI);break;case 4:e.translate(0,d),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-d);break;case 7:e.rotate(.5*Math.PI),e.translate(c,-d),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-c,0)}},_renderImageToCanvas:function(){function b(a,b,c){var d,e,f,g=document.createElement("canvas"),h=g.getContext("2d"),i=0,j=c,k=c;for(g.width=1,g.height=c,h.drawImage(a,0,0),d=h.getImageData(0,0,1,c).data;k>i;)e=d[4*(k-1)+3],0===e?j=k:i=k,k=j+i>>1;return f=k/c,0===f?1:f}function c(a){var b,c,d=a.naturalWidth,e=a.naturalHeight;return d*e>1048576?(b=document.createElement("canvas"),b.width=b.height=1,c=b.getContext("2d"),c.drawImage(a,-d+1,0),0===c.getImageData(0,0,1,1).data[3]):!1}return a.os.ios?a.os.ios>=7?function(a,c,d,e,f,g){var h=c.naturalWidth,i=c.naturalHeight,j=b(c,h,i);return a.getContext("2d").drawImage(c,0,0,h*j,i*j,d,e,f,g)}:function(a,d,e,f,g,h){var i,j,k,l,m,n,o,p=d.naturalWidth,q=d.naturalHeight,r=a.getContext("2d"),s=c(d),t="image/jpeg"===this.type,u=1024,v=0,w=0;for(s&&(p/=2,q/=2),r.save(),i=document.createElement("canvas"),i.width=i.height=u,j=i.getContext("2d"),k=t?b(d,p,q):1,l=Math.ceil(u*g/p),m=Math.ceil(u*h/q/k);q>v;){for(n=0,o=0;p>n;)j.clearRect(0,0,u,u),j.drawImage(d,-n,-v),r.drawImage(i,0,0,u,u,e+o,f+w,l,m),n+=u,o+=l;v+=u,w+=m}r.restore(),i=j=null}:function(a,b,c,d,e,f){a.getContext("2d").drawImage(b,c,d,e,f)}}()})}),b("runtime/html5/transport",["base","runtime/html5/runtime"],function(a,b){var c=a.noop,d=a.$;return b.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var b,c,e,f=this.owner,g=this.options,h=this._initAjax(),i=f._blob,j=g.server;g.sendAsBinary?(j+=(/\?/.test(j)?"&":"?")+d.param(f._formData),c=i.getSource()):(b=new FormData,d.each(f._formData,function(a,c){b.append(a,c)}),b.append(g.fileVal,i.getSource(),g.filename||f._formData.name||"")),g.withCredentials&&"withCredentials"in h?(h.open(g.method,j,!0),h.withCredentials=!0):h.open(g.method,j),this._setRequestHeader(h,g.headers),c?(h.overrideMimeType("application/octet-stream"),a.os.android?(e=new FileReader,e.onload=function(){h.send(this.result),e=e.onload=null},e.readAsArrayBuffer(c)):h.send(c)):h.send(b)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var a=this._xhr;a&&(a.upload.onprogress=c,a.onreadystatechange=c,a.abort(),this._xhr=a=null)},destroy:function(){this.abort()},_initAjax:function(){var a=this,b=new XMLHttpRequest,d=this.options;return!d.withCredentials||"withCredentials"in b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest),b.upload.onprogress=function(b){var c=0;return b.lengthComputable&&(c=b.loaded/b.total),a.trigger("progress",c)},b.onreadystatechange=function(){return 4===b.readyState?(b.upload.onprogress=c,b.onreadystatechange=c,a._xhr=null,a._status=b.status,b.status>=200&&b.status<300?(a._response=b.responseText,a.trigger("load")):b.status>=500&&b.status<600?(a._response=b.responseText,a.trigger("error","server")):a.trigger("error",a._status?"http":"abort")):void 0},a._xhr=b,b},_setRequestHeader:function(a,b){d.each(b,function(b,c){a.setRequestHeader(b,c)})},_parseJson:function(a){var b;try{b=JSON.parse(a)}catch(c){b={}}return b}})}),b("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(b,c,d){function e(){var a;try{a=navigator.plugins["Shockwave Flash"],a=a.description}catch(b){try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(c){a="0.0"}}return a=a.match(/\d+/g),parseFloat(a[0]+"."+a[1],10)}function f(){function d(a,b){var c,d,e=a.type||a;c=e.split("::"),d=c[0],e=c[1],"Ready"===e&&d===j.uid?j.trigger("ready"):f[d]&&f[d].trigger(e.toLowerCase(),a,b)}var e={},f={},g=this.destory,j=this,k=b.guid("webuploader_");c.apply(j,arguments),j.type=h,j.exec=function(a,c){var d,g=this,h=g.uid,k=b.slice(arguments,2);return f[h]=g,i[a]&&(e[h]||(e[h]=new i[a](g,j)),d=e[h],d[c])?d[c].apply(d,k):j.flashExec.apply(g,arguments)},a[k]=function(){var a=arguments;setTimeout(function(){d.apply(null,a)},1)},this.jsreciver=k,this.destory=function(){return g&&g.apply(this,arguments)},this.flashExec=function(a,c){var d=j.getFlash(),e=b.slice(arguments,2);return d.exec(this.uid,a,c,e)}}var g=b.$,h="flash",i={};return b.inherits(c,{constructor:f,init:function(){var a,c=this.getContainer(),d=this.options;c.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),a='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+d.swf+'" ',b.browser.ie&&(a+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),a+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+d.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',c.html(a)},getFlash:function(){return this._flash?this._flash:(this._flash=g("#"+this.uid).get(0),this._flash)}}),f.register=function(a,c){return c=i[a]=b.inherits(d,g.extend({flashExec:function(){var a=this.owner,b=this.getRuntime();return b.flashExec.apply(a,arguments)}},c))},e()>=11.4&&c.addRuntime(h,f),f}),b("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(a,b){var c=a.$;return b.register("FilePicker",{init:function(a){var b,d,e=c.extend({},a);for(b=e.accept&&e.accept.length,d=0;b>d;d++)e.accept[d].title||(e.accept[d].title="Files");delete e.button,delete e.container,this.flashExec("FilePicker","init",e)},destroy:function(){}})}),b("runtime/flash/image",["runtime/flash/runtime"],function(a){return a.register("Image",{loadFromBlob:function(a){var b=this.owner;b.info()&&this.flashExec("Image","info",b.info()),b.meta()&&this.flashExec("Image","meta",b.meta()),this.flashExec("Image","loadFromBlob",a.uid)}})}),b("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(a,b,c){var d=a.$;return b.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var a,b=this.owner,c=this.options,e=this._initAjax(),f=b._blob,g=c.server;e.connectRuntime(f.ruid),c.sendAsBinary?(g+=(/\?/.test(g)?"&":"?")+d.param(b._formData),a=f.uid):(d.each(b._formData,function(a,b){e.exec("append",a,b)}),e.exec("appendBlob",c.fileVal,f.uid,c.filename||b._formData.name||"")),this._setRequestHeader(e,c.headers),e.exec("send",{method:c.method,url:g},a)},getStatus:function(){return this._status},getResponse:function(){return this._response},getResponseAsJson:function(){return this._responseJson},abort:function(){var a=this._xhr;a&&(a.exec("abort"),a.destroy(),this._xhr=a=null)},destroy:function(){this.abort()},_initAjax:function(){var a=this,b=new c("XMLHttpRequest");return b.on("uploadprogress progress",function(b){return a.trigger("progress",b.loaded/b.total)}),b.on("load",function(){var c=b.exec("getStatus"),d="";return b.off(),a._xhr=null,c>=200&&300>c?(a._response=b.exec("getResponse"),a._responseJson=b.exec("getResponseAsJson")):c>=500&&600>c?(a._response=b.exec("getResponse"),a._responseJson=b.exec("getResponseAsJson"),d="server"):d="http",b.destroy(),b=null,d?a.trigger("error",d):a.trigger("load")}),b.on("error",function(){b.off(),a._xhr=null,a.trigger("error","http")}),a._xhr=b,b},_setRequestHeader:function(a,b){d.each(b,function(b,c){a.exec("setRequestHeader",b,c)})}})}),b("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport"],function(a){return a}),b("webuploader",["preset/all"],function(a){return a}),c("webuploader")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJwbHVnaW5zL3VlZGl0b3IvdGhpcmQtcGFydHkvd2VidXBsb2FkZXIvd2VidXBsb2FkZXIubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIFdlYlVwbG9hZGVyIDAuMS4yICovIWZ1bmN0aW9uKGEsYil7dmFyIGMsZD17fSxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhKXJldHVybiBoKGEpO2ZvcihjPVtdLGQ9YS5sZW5ndGgsZT0wO2Q+ZTtlKyspYy5wdXNoKGgoYVtlXSkpO3JldHVybiBiLmFwcGx5KG51bGwsYyl9LGY9ZnVuY3Rpb24oYSxiLGMpezI9PT1hcmd1bWVudHMubGVuZ3RoJiYoYz1iLGI9bnVsbCksZShifHxbXSxmdW5jdGlvbigpe2coYSxjLGFyZ3VtZW50cyl9KX0sZz1mdW5jdGlvbihhLGIsYyl7dmFyIGYsZz17ZXhwb3J0czpifTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBiJiYoYy5sZW5ndGh8fChjPVtlLGcuZXhwb3J0cyxnXSksZj1iLmFwcGx5KG51bGwsYyksdm9pZCAwIT09ZiYmKGcuZXhwb3J0cz1mKSksZFthXT1nLmV4cG9ydHN9LGg9ZnVuY3Rpb24oYil7dmFyIGM9ZFtiXXx8YVtiXTtpZighYyl0aHJvdyBuZXcgRXJyb3IoXCJgXCIrYitcImAgaXMgdW5kZWZpbmVkXCIpO3JldHVybiBjfSxpPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxmLGcsaDtoPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc3Vic3RyKDEpfTtmb3IoYiBpbiBkKWlmKGM9YSxkLmhhc093blByb3BlcnR5KGIpKXtmb3IoZT1iLnNwbGl0KFwiL1wiKSxnPWgoZS5wb3AoKSk7Zj1oKGUuc2hpZnQoKSk7KWNbZl09Y1tmXXx8e30sYz1jW2ZdO2NbZ109ZFtiXX19LGo9YihhLGYsZSk7aShqKSxcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ajpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGopOihjPWEuV2ViVXBsb2FkZXIsYS5XZWJVcGxvYWRlcj1qLGEuV2ViVXBsb2FkZXIubm9Db25mbGljdD1mdW5jdGlvbigpe2EuV2ViVXBsb2FkZXI9Y30pfSh0aGlzLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYihcImRvbGxhci10aGlyZFwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGEualF1ZXJ5fHxhLlplcHRvfSksYihcImRvbGxhclwiLFtcImRvbGxhci10aGlyZFwiXSxmdW5jdGlvbihhKXtyZXR1cm4gYX0pLGIoXCJwcm9taXNlLXRoaXJkXCIsW1wiZG9sbGFyXCJdLGZ1bmN0aW9uKGEpe3JldHVybntEZWZlcnJlZDphLkRlZmVycmVkLHdoZW46YS53aGVuLGlzUHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS50aGVufX19KSxiKFwicHJvbWlzZVwiLFtcInByb21pc2UtdGhpcmRcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGF9KSxiKFwiYmFzZVwiLFtcImRvbGxhclwiLFwicHJvbWlzZVwiXSxmdW5jdGlvbihiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGguYXBwbHkoYSxhcmd1bWVudHMpfX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBmKGEpe3ZhciBiO3JldHVybiBPYmplY3QuY3JlYXRlP09iamVjdC5jcmVhdGUoYSk6KGI9ZnVuY3Rpb24oKXt9LGIucHJvdG90eXBlPWEsbmV3IGIpfXZhciBnPWZ1bmN0aW9uKCl7fSxoPUZ1bmN0aW9uLmNhbGw7cmV0dXJue3ZlcnNpb246XCIwLjEuMlwiLCQ6YixEZWZlcnJlZDpjLkRlZmVycmVkLGlzUHJvbWlzZTpjLmlzUHJvbWlzZSx3aGVuOmMud2hlbixicm93c2VyOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9YS5tYXRjaCgvV2ViS2l0XFwvKFtcXGQuXSspLyksZD1hLm1hdGNoKC9DaHJvbWVcXC8oW1xcZC5dKykvKXx8YS5tYXRjaCgvQ3JpT1NcXC8oW1xcZC5dKykvKSxlPWEubWF0Y2goL01TSUVcXHMoW1xcZFxcLl0rKS8pfHxhLm1hdGNoKC8oPzp0cmlkZW50KSg/Oi4qcnY6KFtcXHcuXSspKT8vaSksZj1hLm1hdGNoKC9GaXJlZm94XFwvKFtcXGQuXSspLyksZz1hLm1hdGNoKC9TYWZhcmlcXC8oW1xcZC5dKykvKSxoPWEubWF0Y2goL09QUlxcLyhbXFxkLl0rKS8pO3JldHVybiBjJiYoYi53ZWJraXQ9cGFyc2VGbG9hdChjWzFdKSksZCYmKGIuY2hyb21lPXBhcnNlRmxvYXQoZFsxXSkpLGUmJihiLmllPXBhcnNlRmxvYXQoZVsxXSkpLGYmJihiLmZpcmVmb3g9cGFyc2VGbG9hdChmWzFdKSksZyYmKGIuc2FmYXJpPXBhcnNlRmxvYXQoZ1sxXSkpLGgmJihiLm9wZXJhPXBhcnNlRmxvYXQoaFsxXSkpLGJ9KG5hdmlnYXRvci51c2VyQWdlbnQpLG9zOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9YS5tYXRjaCgvKD86QW5kcm9pZCk7P1tcXHNcXC9dKyhbXFxkLl0rKT8vKSxkPWEubWF0Y2goLyg/OmlQYWR8aVBvZHxpUGhvbmUpLipPU1xccyhbXFxkX10rKS8pO3JldHVybiBjJiYoYi5hbmRyb2lkPXBhcnNlRmxvYXQoY1sxXSkpLGQmJihiLmlvcz1wYXJzZUZsb2F0KGRbMV0ucmVwbGFjZSgvXy9nLFwiLlwiKSkpLGJ9KG5hdmlnYXRvci51c2VyQWdlbnQpLGluaGVyaXRzOmZ1bmN0aW9uKGEsYyxkKXt2YXIgZTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBjPyhlPWMsYz1udWxsKTplPWMmJmMuaGFzT3duUHJvcGVydHkoXCJjb25zdHJ1Y3RvclwiKT9jLmNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxiLmV4dGVuZCghMCxlLGEsZHx8e30pLGUuX19zdXBlcl9fPWEucHJvdG90eXBlLGUucHJvdG90eXBlPWYoYS5wcm90b3R5cGUpLGMmJmIuZXh0ZW5kKCEwLGUucHJvdG90eXBlLGMpLGV9LG5vb3A6ZyxiaW5kRm46ZSxsb2c6ZnVuY3Rpb24oKXtyZXR1cm4gYS5jb25zb2xlP2UoY29uc29sZS5sb2csY29uc29sZSk6Z30oKSxuZXh0VGljazpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtzZXRUaW1lb3V0KGEsMSl9fSgpLHNsaWNlOmQoW10uc2xpY2UpLGd1aWQ6ZnVuY3Rpb24oKXt2YXIgYT0wO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9KCtuZXcgRGF0ZSkudG9TdHJpbmcoMzIpLGQ9MDs1PmQ7ZCsrKWMrPU1hdGguZmxvb3IoNjU1MzUqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzIpO3JldHVybihifHxcInd1X1wiKStjKyhhKyspLnRvU3RyaW5nKDMyKX19KCksZm9ybWF0U2l6ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7Zm9yKGM9Y3x8W1wiQlwiLFwiS1wiLFwiTVwiLFwiR1wiLFwiVEJcIl07KGQ9Yy5zaGlmdCgpKSYmYT4xMDI0OylhLz0xMDI0O3JldHVybihcIkJcIj09PWQ/YTphLnRvRml4ZWQoYnx8MikpK2R9fX0pLGIoXCJtZWRpYXRvclwiLFtcImJhc2VcIl0sZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyxkKXtyZXR1cm4gZi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuISghYXx8YiYmYS5lIT09Ynx8YyYmYS5jYiE9PWMmJmEuY2IuX2NiIT09Y3x8ZCYmYS5jdHghPT1kKX0pfWZ1bmN0aW9uIGMoYSxiLGMpe2YuZWFjaCgoYXx8XCJcIikuc3BsaXQoaCksZnVuY3Rpb24oYSxkKXtjKGQsYil9KX1mdW5jdGlvbiBkKGEsYil7Zm9yKHZhciBjLGQ9ITEsZT0tMSxmPWEubGVuZ3RoOysrZTxmOylpZihjPWFbZV0sYy5jYi5hcHBseShjLmN0eDIsYik9PT0hMSl7ZD0hMDticmVha31yZXR1cm4hZH12YXIgZSxmPWEuJCxnPVtdLnNsaWNlLGg9L1xccysvO3JldHVybiBlPXtvbjpmdW5jdGlvbihhLGIsZCl7dmFyIGUsZj10aGlzO3JldHVybiBiPyhlPXRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz1bXSksYyhhLGIsZnVuY3Rpb24oYSxiKXt2YXIgYz17ZTphfTtjLmNiPWIsYy5jdHg9ZCxjLmN0eDI9ZHx8ZixjLmlkPWUubGVuZ3RoLGUucHVzaChjKX0pLHRoaXMpOnRoaXN9LG9uY2U6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPXRoaXM7cmV0dXJuIGI/KGMoYSxiLGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXtyZXR1cm4gZS5vZmYoYSxjKSxiLmFwcGx5KGR8fGUsYXJndW1lbnRzKX07Yy5fY2I9YixlLm9uKGEsYyxkKX0pLGUpOmV9LG9mZjpmdW5jdGlvbihhLGQsZSl7dmFyIGc9dGhpcy5fZXZlbnRzO3JldHVybiBnP2F8fGR8fGU/KGMoYSxkLGZ1bmN0aW9uKGEsYyl7Zi5lYWNoKGIoZyxhLGMsZSksZnVuY3Rpb24oKXtkZWxldGUgZ1t0aGlzLmlkXX0pfSksdGhpcyk6KHRoaXMuX2V2ZW50cz1bXSx0aGlzKTp0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKGEpe3ZhciBjLGUsZjtyZXR1cm4gdGhpcy5fZXZlbnRzJiZhPyhjPWcuY2FsbChhcmd1bWVudHMsMSksZT1iKHRoaXMuX2V2ZW50cyxhKSxmPWIodGhpcy5fZXZlbnRzLFwiYWxsXCIpLGQoZSxjKSYmZChmLGFyZ3VtZW50cykpOnRoaXN9fSxmLmV4dGVuZCh7aW5zdGFsbFRvOmZ1bmN0aW9uKGEpe3JldHVybiBmLmV4dGVuZChhLGUpfX0sZSl9KSxiKFwidXBsb2FkZXJcIixbXCJiYXNlXCIsXCJtZWRpYXRvclwiXSxmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7dGhpcy5vcHRpb25zPWQuZXh0ZW5kKCEwLHt9LGMub3B0aW9ucyxhKSx0aGlzLl9pbml0KHRoaXMub3B0aW9ucyl9dmFyIGQ9YS4kO3JldHVybiBjLm9wdGlvbnM9e30sYi5pbnN0YWxsVG8oYy5wcm90b3R5cGUpLGQuZWFjaCh7dXBsb2FkOlwic3RhcnQtdXBsb2FkXCIsc3RvcDpcInN0b3AtdXBsb2FkXCIsZ2V0RmlsZTpcImdldC1maWxlXCIsZ2V0RmlsZXM6XCJnZXQtZmlsZXNcIixhZGRGaWxlOlwiYWRkLWZpbGVcIixhZGRGaWxlczpcImFkZC1maWxlXCIsc29ydDpcInNvcnQtZmlsZXNcIixyZW1vdmVGaWxlOlwicmVtb3ZlLWZpbGVcIixza2lwRmlsZTpcInNraXAtZmlsZVwiLHJldHJ5OlwicmV0cnlcIixpc0luUHJvZ3Jlc3M6XCJpcy1pbi1wcm9ncmVzc1wiLG1ha2VUaHVtYjpcIm1ha2UtdGh1bWJcIixnZXREaW1lbnNpb246XCJnZXQtZGltZW5zaW9uXCIsYWRkQnV0dG9uOlwiYWRkLWJ0blwiLGdldFJ1bnRpbWVUeXBlOlwiZ2V0LXJ1bnRpbWUtdHlwZVwiLHJlZnJlc2g6XCJyZWZyZXNoXCIsZGlzYWJsZTpcImRpc2FibGVcIixlbmFibGU6XCJlbmFibGVcIixyZXNldDpcInJlc2V0XCJ9LGZ1bmN0aW9uKGEsYil7Yy5wcm90b3R5cGVbYV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KGIsYXJndW1lbnRzKX19KSxkLmV4dGVuZChjLnByb3RvdHlwZSx7c3RhdGU6XCJwZW5kaW5nXCIsX2luaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLnJlcXVlc3QoXCJpbml0XCIsYSxmdW5jdGlvbigpe2Iuc3RhdGU9XCJyZWFkeVwiLGIudHJpZ2dlcihcInJlYWR5XCIpfSl9LG9wdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMub3B0aW9ucztyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4xP3ZvaWQoZC5pc1BsYWluT2JqZWN0KGIpJiZkLmlzUGxhaW5PYmplY3QoY1thXSk/ZC5leHRlbmQoY1thXSxiKTpjW2FdPWIpOmE/Y1thXTpjfSxnZXRTdGF0czpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVxdWVzdChcImdldC1zdGF0c1wiKTtyZXR1cm57c3VjY2Vzc051bTphLm51bU9mU3VjY2VzcyxjYW5jZWxOdW06YS5udW1PZkNhbmNlbCxpbnZhbGlkTnVtOmEubnVtT2ZJbnZhbGlkLHVwbG9hZEZhaWxOdW06YS5udW1PZlVwbG9hZEZhaWxlZCxxdWV1ZU51bTphLm51bU9mUXVldWV9fSx0cmlnZ2VyOmZ1bmN0aW9uKGEpe3ZhciBjPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGU9dGhpcy5vcHRpb25zLGY9XCJvblwiK2Euc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKSthLnN1YnN0cmluZygxKTtyZXR1cm4gYi50cmlnZ2VyLmFwcGx5KHRoaXMsYXJndW1lbnRzKT09PSExfHxkLmlzRnVuY3Rpb24oZVtmXSkmJmVbZl0uYXBwbHkodGhpcyxjKT09PSExfHxkLmlzRnVuY3Rpb24odGhpc1tmXSkmJnRoaXNbZl0uYXBwbHkodGhpcyxjKT09PSExfHxiLnRyaWdnZXIuYXBwbHkoYixbdGhpcyxhXS5jb25jYXQoYykpPT09ITE/ITE6ITB9LHJlcXVlc3Q6YS5ub29wfSksYS5jcmVhdGU9Yy5jcmVhdGU9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBjKGEpfSxhLlVwbG9hZGVyPWMsY30pLGIoXCJydW50aW1lL3J1bnRpbWVcIixbXCJiYXNlXCIsXCJtZWRpYXRvclwiXSxmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYil7dGhpcy5vcHRpb25zPWQuZXh0ZW5kKHtjb250YWluZXI6ZG9jdW1lbnQuYm9keX0sYiksdGhpcy51aWQ9YS5ndWlkKFwicnRfXCIpfXZhciBkPWEuJCxlPXt9LGY9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShiKSlyZXR1cm4gYjtyZXR1cm4gbnVsbH07cmV0dXJuIGQuZXh0ZW5kKGMucHJvdG90eXBlLHtnZXRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgYSxiLGM9dGhpcy5vcHRpb25zO3JldHVybiB0aGlzLl9jb250YWluZXI/dGhpcy5fY29udGFpbmVyOihhPWQoYy5jb250YWluZXJ8fGRvY3VtZW50LmJvZHkpLGI9ZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxiLmF0dHIoXCJpZFwiLFwicnRfXCIrdGhpcy51aWQpLGIuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiMHB4XCIsbGVmdDpcIjBweFwiLHdpZHRoOlwiMXB4XCIsaGVpZ2h0OlwiMXB4XCIsb3ZlcmZsb3c6XCJoaWRkZW5cIn0pLGEuYXBwZW5kKGIpLGEuYWRkQ2xhc3MoXCJ3ZWJ1cGxvYWRlci1jb250YWluZXJcIiksdGhpcy5fY29udGFpbmVyPWIsYil9LGluaXQ6YS5ub29wLGV4ZWM6YS5ub29wLGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXImJnRoaXMuX2NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX19jb250YWluZXIpLHRoaXMub2ZmKCl9fSksYy5vcmRlcnM9XCJodG1sNSxmbGFzaFwiLGMuYWRkUnVudGltZT1mdW5jdGlvbihhLGIpe2VbYV09Yn0sYy5oYXNSdW50aW1lPWZ1bmN0aW9uKGEpe3JldHVybiEhKGE/ZVthXTpmKGUpKX0sYy5jcmVhdGU9ZnVuY3Rpb24oYSxiKXt2YXIgZyxoO2lmKGI9Ynx8Yy5vcmRlcnMsZC5lYWNoKGIuc3BsaXQoL1xccyosXFxzKi9nKSxmdW5jdGlvbigpe3JldHVybiBlW3RoaXNdPyhnPXRoaXMsITEpOnZvaWQgMH0pLGc9Z3x8ZihlKSwhZyl0aHJvdyBuZXcgRXJyb3IoXCJSdW50aW1lIEVycm9yXCIpO3JldHVybiBoPW5ldyBlW2ddKGEpfSxiLmluc3RhbGxUbyhjLnByb3RvdHlwZSksY30pLGIoXCJydW50aW1lL2NsaWVudFwiLFtcImJhc2VcIixcIm1lZGlhdG9yXCIsXCJydW50aW1lL3J1bnRpbWVcIl0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYixkKXt2YXIgZixnPWEuRGVmZXJyZWQoKTt0aGlzLnVpZD1hLmd1aWQoXCJjbGllbnRfXCIpLHRoaXMucnVudGltZVJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBnLmRvbmUoYSl9LHRoaXMuY29ubmVjdFJ1bnRpbWU9ZnVuY3Rpb24oYixoKXtpZihmKXRocm93IG5ldyBFcnJvcihcImFscmVhZHkgY29ubmVjdGVkIVwiKTtyZXR1cm4gZy5kb25lKGgpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlLmdldChiKSYmKGY9ZS5nZXQoYikpLGY9Znx8ZS5nZXQobnVsbCxkKSxmPyhhLiQuZXh0ZW5kKGYub3B0aW9ucyxiKSxmLl9fcHJvbWlzZS50aGVuKGcucmVzb2x2ZSksZi5fX2NsaWVudCsrKTooZj1jLmNyZWF0ZShiLGIucnVudGltZU9yZGVyKSxmLl9fcHJvbWlzZT1nLnByb21pc2UoKSxmLm9uY2UoXCJyZWFkeVwiLGcucmVzb2x2ZSksZi5pbml0KCksZS5hZGQoZiksZi5fX2NsaWVudD0xKSxkJiYoZi5fX3N0YW5kYWxvbmU9ZCksZn0sdGhpcy5nZXRSdW50aW1lPWZ1bmN0aW9uKCl7cmV0dXJuIGZ9LHRoaXMuZGlzY29ubmVjdFJ1bnRpbWU9ZnVuY3Rpb24oKXtmJiYoZi5fX2NsaWVudC0tLGYuX19jbGllbnQ8PTAmJihlLnJlbW92ZShmKSxkZWxldGUgZi5fX3Byb21pc2UsZi5kZXN0cm95KCkpLGY9bnVsbCl9LHRoaXMuZXhlYz1mdW5jdGlvbigpe2lmKGYpe3ZhciBjPWEuc2xpY2UoYXJndW1lbnRzKTtyZXR1cm4gYiYmYy51bnNoaWZ0KGIpLGYuZXhlYy5hcHBseSh0aGlzLGMpfX0sdGhpcy5nZXRSdWlkPWZ1bmN0aW9uKCl7cmV0dXJuIGYmJmYudWlkfSx0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7YSYmYS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy50cmlnZ2VyKFwiZGVzdHJveVwiKSx0aGlzLm9mZigpLHRoaXMuZXhlYyhcImRlc3Ryb3lcIiksdGhpcy5kaXNjb25uZWN0UnVudGltZSgpfX0odGhpcy5kZXN0cm95KX12YXIgZTtyZXR1cm4gZT1mdW5jdGlvbigpe3ZhciBhPXt9O3JldHVybnthZGQ6ZnVuY3Rpb24oYil7YVtiLnVpZF09Yn0sZ2V0OmZ1bmN0aW9uKGIsYyl7dmFyIGQ7aWYoYilyZXR1cm4gYVtiXTtmb3IoZCBpbiBhKWlmKCFjfHwhYVtkXS5fX3N0YW5kYWxvbmUpcmV0dXJuIGFbZF07cmV0dXJuIG51bGx9LHJlbW92ZTpmdW5jdGlvbihiKXtkZWxldGUgYVtiLnVpZF19fX0oKSxiLmluc3RhbGxUbyhkLnByb3RvdHlwZSksZH0pLGIoXCJsaWIvZG5kXCIsW1wiYmFzZVwiLFwibWVkaWF0b3JcIixcInJ1bnRpbWUvY2xpZW50XCJdLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe2E9dGhpcy5vcHRpb25zPWUuZXh0ZW5kKHt9LGQub3B0aW9ucyxhKSxhLmNvbnRhaW5lcj1lKGEuY29udGFpbmVyKSxhLmNvbnRhaW5lci5sZW5ndGgmJmMuY2FsbCh0aGlzLFwiRHJhZ0FuZERyb3BcIil9dmFyIGU9YS4kO3JldHVybiBkLm9wdGlvbnM9e2FjY2VwdDpudWxsLGRpc2FibGVHbG9iYWxEbmQ6ITF9LGEuaW5oZXJpdHMoYyx7Y29uc3RydWN0b3I6ZCxpbml0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNvbm5lY3RSdW50aW1lKGEub3B0aW9ucyxmdW5jdGlvbigpe2EuZXhlYyhcImluaXRcIiksYS50cmlnZ2VyKFwicmVhZHlcIil9KX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGlzY29ubmVjdFJ1bnRpbWUoKX19KSxiLmluc3RhbGxUbyhkLnByb3RvdHlwZSksZH0pLGIoXCJ3aWRnZXRzL3dpZGdldFwiLFtcImJhc2VcIixcInVwbG9hZGVyXCJdLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtpZighYSlyZXR1cm4hMTt2YXIgYj1hLmxlbmd0aCxjPWUudHlwZShhKTtyZXR1cm4gMT09PWEubm9kZVR5cGUmJmI/ITA6XCJhcnJheVwiPT09Y3x8XCJmdW5jdGlvblwiIT09YyYmXCJzdHJpbmdcIiE9PWMmJigwPT09Ynx8XCJudW1iZXJcIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGEpfWZ1bmN0aW9uIGQoYSl7dGhpcy5vd25lcj1hLHRoaXMub3B0aW9ucz1hLm9wdGlvbnN9dmFyIGU9YS4kLGY9Yi5wcm90b3R5cGUuX2luaXQsZz17fSxoPVtdO3JldHVybiBlLmV4dGVuZChkLnByb3RvdHlwZSx7aW5pdDphLm5vb3AsaW52b2tlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZXNwb25zZU1hcDtyZXR1cm4gYyYmYSBpbiBjJiZjW2FdaW4gdGhpcyYmZS5pc0Z1bmN0aW9uKHRoaXNbY1thXV0pP3RoaXNbY1thXV0uYXBwbHkodGhpcyxiKTpnfSxyZXF1ZXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXIucmVxdWVzdC5hcHBseSh0aGlzLm93bmVyLGFyZ3VtZW50cyl9fSksZS5leHRlbmQoYi5wcm90b3R5cGUse19pbml0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuX3dpZGdldHM9W107cmV0dXJuIGUuZWFjaChoLGZ1bmN0aW9uKGMsZCl7Yi5wdXNoKG5ldyBkKGEpKX0pLGYuYXBwbHkoYSxhcmd1bWVudHMpfSxyZXF1ZXN0OmZ1bmN0aW9uKGIsZCxlKXt2YXIgZixoLGksaixrPTAsbD10aGlzLl93aWRnZXRzLG09bC5sZW5ndGgsbj1bXSxvPVtdO2ZvcihkPWMoZCk/ZDpbZF07bT5rO2srKylmPWxba10saD1mLmludm9rZShiLGQpLGghPT1nJiYoYS5pc1Byb21pc2UoaCk/by5wdXNoKGgpOm4ucHVzaChoKSk7cmV0dXJuIGV8fG8ubGVuZ3RoPyhpPWEud2hlbi5hcHBseShhLG8pLGo9aS5waXBlP1wicGlwZVwiOlwidGhlblwiLGlbal0oZnVuY3Rpb24oKXt2YXIgYj1hLkRlZmVycmVkKCksYz1hcmd1bWVudHM7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLnJlc29sdmUuYXBwbHkoYixjKX0sMSksYi5wcm9taXNlKCl9KVtqXShlfHxhLm5vb3ApKTpuWzBdfX0pLGIucmVnaXN0ZXI9ZC5yZWdpc3Rlcj1mdW5jdGlvbihiLGMpe3ZhciBmLGc9e2luaXQ6XCJpbml0XCJ9O3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD8oYz1iLGMucmVzcG9uc2VNYXA9Zyk6Yy5yZXNwb25zZU1hcD1lLmV4dGVuZChnLGIpLGY9YS5pbmhlcml0cyhkLGMpLGgucHVzaChmKSxmfSxkfSksYihcIndpZGdldHMvZmlsZWRuZFwiLFtcImJhc2VcIixcInVwbG9hZGVyXCIsXCJsaWIvZG5kXCIsXCJ3aWRnZXRzL3dpZGdldFwiXSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS4kO3JldHVybiBiLm9wdGlvbnMuZG5kPVwiXCIsYi5yZWdpc3Rlcih7aW5pdDpmdW5jdGlvbihiKXtpZihiLmRuZCYmXCJodG1sNVwiPT09dGhpcy5yZXF1ZXN0KFwicHJlZGljdC1ydW50aW1lLXR5cGVcIikpe3ZhciBlLGY9dGhpcyxnPWEuRGVmZXJyZWQoKSxoPWQuZXh0ZW5kKHt9LHtkaXNhYmxlR2xvYmFsRG5kOmIuZGlzYWJsZUdsb2JhbERuZCxjb250YWluZXI6Yi5kbmQsYWNjZXB0OmIuYWNjZXB0fSk7cmV0dXJuIGU9bmV3IGMoaCksZS5vbmNlKFwicmVhZHlcIixnLnJlc29sdmUpLGUub24oXCJkcm9wXCIsZnVuY3Rpb24oYSl7Zi5yZXF1ZXN0KFwiYWRkLWZpbGVcIixbYV0pfSksZS5vbihcImFjY2VwdFwiLGZ1bmN0aW9uKGEpe3JldHVybiBmLm93bmVyLnRyaWdnZXIoXCJkbmRBY2NlcHRcIixhKX0pLGUuaW5pdCgpLGcucHJvbWlzZSgpfX19KX0pLGIoXCJsaWIvZmlsZXBhc3RlXCIsW1wiYmFzZVwiLFwibWVkaWF0b3JcIixcInJ1bnRpbWUvY2xpZW50XCJdLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe2E9dGhpcy5vcHRpb25zPWUuZXh0ZW5kKHt9LGEpLGEuY29udGFpbmVyPWUoYS5jb250YWluZXJ8fGRvY3VtZW50LmJvZHkpLGMuY2FsbCh0aGlzLFwiRmlsZVBhc3RlXCIpfXZhciBlPWEuJDtyZXR1cm4gYS5pbmhlcml0cyhjLHtjb25zdHJ1Y3RvcjpkLGluaXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY29ubmVjdFJ1bnRpbWUoYS5vcHRpb25zLGZ1bmN0aW9uKCl7YS5leGVjKFwiaW5pdFwiKSxhLnRyaWdnZXIoXCJyZWFkeVwiKX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5leGVjKFwiZGVzdHJveVwiKSx0aGlzLmRpc2Nvbm5lY3RSdW50aW1lKCksdGhpcy5vZmYoKX19KSxiLmluc3RhbGxUbyhkLnByb3RvdHlwZSksZH0pLGIoXCJ3aWRnZXRzL2ZpbGVwYXN0ZVwiLFtcImJhc2VcIixcInVwbG9hZGVyXCIsXCJsaWIvZmlsZXBhc3RlXCIsXCJ3aWRnZXRzL3dpZGdldFwiXSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS4kO3JldHVybiBiLnJlZ2lzdGVyKHtpbml0OmZ1bmN0aW9uKGIpe2lmKGIucGFzdGUmJlwiaHRtbDVcIj09PXRoaXMucmVxdWVzdChcInByZWRpY3QtcnVudGltZS10eXBlXCIpKXt2YXIgZSxmPXRoaXMsZz1hLkRlZmVycmVkKCksaD1kLmV4dGVuZCh7fSx7Y29udGFpbmVyOmIucGFzdGUsYWNjZXB0OmIuYWNjZXB0fSk7cmV0dXJuIGU9bmV3IGMoaCksZS5vbmNlKFwicmVhZHlcIixnLnJlc29sdmUpLGUub24oXCJwYXN0ZVwiLGZ1bmN0aW9uKGEpe2Yub3duZXIucmVxdWVzdChcImFkZC1maWxlXCIsW2FdKX0pLGUuaW5pdCgpLGcucHJvbWlzZSgpfX19KX0pLGIoXCJsaWIvYmxvYlwiLFtcImJhc2VcIixcInJ1bnRpbWUvY2xpZW50XCJdLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGMpe3ZhciBkPXRoaXM7ZC5zb3VyY2U9YyxkLnJ1aWQ9YSxiLmNhbGwoZCxcIkJsb2JcIiksdGhpcy51aWQ9Yy51aWR8fHRoaXMudWlkLHRoaXMudHlwZT1jLnR5cGV8fFwiXCIsdGhpcy5zaXplPWMuc2l6ZXx8MCxhJiZkLmNvbm5lY3RSdW50aW1lKGEpfXJldHVybiBhLmluaGVyaXRzKGIse2NvbnN0cnVjdG9yOmMsc2xpY2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5leGVjKFwic2xpY2VcIixhLGIpfSxnZXRTb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb3VyY2V9fSksY30pLGIoXCJsaWIvZmlsZVwiLFtcImJhc2VcIixcImxpYi9ibG9iXCJdLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGMpe3ZhciBmO2IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMubmFtZT1jLm5hbWV8fFwidW50aXRsZWRcIitkKyssZj1lLmV4ZWMoYy5uYW1lKT9SZWdFeHAuJDEudG9Mb3dlckNhc2UoKTpcIlwiLCFmJiZ0aGlzLnR5cGUmJihmPS9cXC8oanBnfGpwZWd8cG5nfGdpZnxibXApJC9pLmV4ZWModGhpcy50eXBlKT9SZWdFeHAuJDEudG9Mb3dlckNhc2UoKTpcIlwiLHRoaXMubmFtZSs9XCIuXCIrZiksIXRoaXMudHlwZSYmflwianBnLGpwZWcscG5nLGdpZixibXBcIi5pbmRleE9mKGYpJiYodGhpcy50eXBlPVwiaW1hZ2UvXCIrKFwianBnXCI9PT1mP1wianBlZ1wiOmYpKSx0aGlzLmV4dD1mLHRoaXMubGFzdE1vZGlmaWVkRGF0ZT1jLmxhc3RNb2RpZmllZERhdGV8fChuZXcgRGF0ZSkudG9Mb2NhbGVTdHJpbmcoKX12YXIgZD0xLGU9L1xcLihbXi5dKykkLztyZXR1cm4gYS5pbmhlcml0cyhiLGMpfSksYihcImxpYi9maWxlcGlja2VyXCIsW1wiYmFzZVwiLFwicnVudGltZS9jbGllbnRcIixcImxpYi9maWxlXCJdLGZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKGEpe2lmKGE9dGhpcy5vcHRpb25zPWYuZXh0ZW5kKHt9LGUub3B0aW9ucyxhKSxhLmNvbnRhaW5lcj1mKGEuaWQpLCFhLmNvbnRhaW5lci5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwi5oyJ6ZKu5oyH5a6a6ZSZ6K+vXCIpO2EuaW5uZXJIVE1MPWEuaW5uZXJIVE1MfHxhLmxhYmVsfHxhLmNvbnRhaW5lci5odG1sKCl8fFwiXCIsYS5idXR0b249ZihhLmJ1dHRvbnx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSksYS5idXR0b24uaHRtbChhLmlubmVySFRNTCksYS5jb250YWluZXIuaHRtbChhLmJ1dHRvbiksYy5jYWxsKHRoaXMsXCJGaWxlUGlja2VyXCIsITApfXZhciBmPWIuJDtyZXR1cm4gZS5vcHRpb25zPXtidXR0b246bnVsbCxjb250YWluZXI6bnVsbCxsYWJlbDpudWxsLGlubmVySFRNTDpudWxsLG11bHRpcGxlOiEwLGFjY2VwdDpudWxsLG5hbWU6XCJmaWxlXCJ9LGIuaW5oZXJpdHMoYyx7Y29uc3RydWN0b3I6ZSxpbml0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWIub3B0aW9ucyxlPWMuYnV0dG9uO2UuYWRkQ2xhc3MoXCJ3ZWJ1cGxvYWRlci1waWNrXCIpLGIub24oXCJhbGxcIixmdW5jdGlvbihhKXt2YXIgZztzd2l0Y2goYSl7Y2FzZVwibW91c2VlbnRlclwiOmUuYWRkQ2xhc3MoXCJ3ZWJ1cGxvYWRlci1waWNrLWhvdmVyXCIpO2JyZWFrO2Nhc2VcIm1vdXNlbGVhdmVcIjplLnJlbW92ZUNsYXNzKFwid2VidXBsb2FkZXItcGljay1ob3ZlclwiKTticmVhaztjYXNlXCJjaGFuZ2VcIjpnPWIuZXhlYyhcImdldEZpbGVzXCIpLGIudHJpZ2dlcihcInNlbGVjdFwiLGYubWFwKGcsZnVuY3Rpb24oYSl7cmV0dXJuIGE9bmV3IGQoYi5nZXRSdWlkKCksYSksYS5fcmVmZXI9Yy5jb250YWluZXIsYX0pLGMuY29udGFpbmVyKX19KSxiLmNvbm5lY3RSdW50aW1lKGMsZnVuY3Rpb24oKXtiLnJlZnJlc2goKSxiLmV4ZWMoXCJpbml0XCIsYyksYi50cmlnZ2VyKFwicmVhZHlcIil9KSxmKGEpLm9uKFwicmVzaXplXCIsZnVuY3Rpb24oKXtiLnJlZnJlc2goKX0pfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRSdW50aW1lKCkuZ2V0Q29udGFpbmVyKCksYj10aGlzLm9wdGlvbnMuYnV0dG9uLGM9Yi5vdXRlcldpZHRoP2Iub3V0ZXJXaWR0aCgpOmIud2lkdGgoKSxkPWIub3V0ZXJIZWlnaHQ/Yi5vdXRlckhlaWdodCgpOmIuaGVpZ2h0KCksZT1iLm9mZnNldCgpO2MmJmQmJmEuY3NzKHtib3R0b206XCJhdXRvXCIscmlnaHQ6XCJhdXRvXCIsd2lkdGg6YytcInB4XCIsaGVpZ2h0OmQrXCJweFwifSkub2Zmc2V0KGUpfSxlbmFibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuYnV0dG9uO2EucmVtb3ZlQ2xhc3MoXCJ3ZWJ1cGxvYWRlci1waWNrLWRpc2FibGVcIiksdGhpcy5yZWZyZXNoKCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuYnV0dG9uO3RoaXMuZ2V0UnVudGltZSgpLmdldENvbnRhaW5lcigpLmNzcyh7dG9wOlwiLTk5OTk5cHhcIn0pLGEuYWRkQ2xhc3MoXCJ3ZWJ1cGxvYWRlci1waWNrLWRpc2FibGVcIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnJ1bnRpbWUmJih0aGlzLmV4ZWMoXCJkZXN0cm95XCIpLHRoaXMuZGlzY29ubmVjdFJ1bnRpbWUoKSl9fSksZX0pLGIoXCJ3aWRnZXRzL2ZpbGVwaWNrZXJcIixbXCJiYXNlXCIsXCJ1cGxvYWRlclwiLFwibGliL2ZpbGVwaWNrZXJcIixcIndpZGdldHMvd2lkZ2V0XCJdLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLiQ7cmV0dXJuIGQuZXh0ZW5kKGIub3B0aW9ucyx7cGljazpudWxsLGFjY2VwdDpudWxsfSksYi5yZWdpc3Rlcih7XCJhZGQtYnRuXCI6XCJhZGRCdXR0b25cIixyZWZyZXNoOlwicmVmcmVzaFwiLGRpc2FibGU6XCJkaXNhYmxlXCIsZW5hYmxlOlwiZW5hYmxlXCJ9LHtpbml0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnBpY2tlcnM9W10sYS5waWNrJiZ0aGlzLmFkZEJ1dHRvbihhLnBpY2spfSxyZWZyZXNoOmZ1bmN0aW9uKCl7ZC5lYWNoKHRoaXMucGlja2VycyxmdW5jdGlvbigpe3RoaXMucmVmcmVzaCgpfSl9LGFkZEJ1dHRvbjpmdW5jdGlvbihiKXt2YXIgZSxmLGcsaD10aGlzLGk9aC5vcHRpb25zLGo9aS5hY2NlcHQ7aWYoYilyZXR1cm4gZz1hLkRlZmVycmVkKCksZC5pc1BsYWluT2JqZWN0KGIpfHwoYj17aWQ6Yn0pLGU9ZC5leHRlbmQoe30sYix7YWNjZXB0OmQuaXNQbGFpbk9iamVjdChqKT9bal06aixzd2Y6aS5zd2YscnVudGltZU9yZGVyOmkucnVudGltZU9yZGVyfSksZj1uZXcgYyhlKSxmLm9uY2UoXCJyZWFkeVwiLGcucmVzb2x2ZSksZi5vbihcInNlbGVjdFwiLGZ1bmN0aW9uKGEpe2gub3duZXIucmVxdWVzdChcImFkZC1maWxlXCIsW2FdKX0pLGYuaW5pdCgpLHRoaXMucGlja2Vycy5wdXNoKGYpLGcucHJvbWlzZSgpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7ZC5lYWNoKHRoaXMucGlja2VycyxmdW5jdGlvbigpe3RoaXMuZGlzYWJsZSgpfSl9LGVuYWJsZTpmdW5jdGlvbigpe2QuZWFjaCh0aGlzLnBpY2tlcnMsZnVuY3Rpb24oKXt0aGlzLmVuYWJsZSgpfSl9fSl9KSxiKFwibGliL2ltYWdlXCIsW1wiYmFzZVwiLFwicnVudGltZS9jbGllbnRcIixcImxpYi9ibG9iXCJdLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3RoaXMub3B0aW9ucz1lLmV4dGVuZCh7fSxkLm9wdGlvbnMsYSksYi5jYWxsKHRoaXMsXCJJbWFnZVwiKSx0aGlzLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7dGhpcy5faW5mbz10aGlzLmV4ZWMoXCJpbmZvXCIpLHRoaXMuX21ldGE9dGhpcy5leGVjKFwibWV0YVwiKX0pfXZhciBlPWEuJDtyZXR1cm4gZC5vcHRpb25zPXtxdWFsaXR5OjkwLGNyb3A6ITEscHJlc2VydmVIZWFkZXJzOiEwLGFsbG93TWFnbmlmeTohMH0sYS5pbmhlcml0cyhiLHtjb25zdHJ1Y3RvcjpkLGluZm86ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KHRoaXMuX2luZm89YSx0aGlzKTp0aGlzLl9pbmZvfSxtZXRhOmZ1bmN0aW9uKGEpe3JldHVybiBhPyh0aGlzLl9tZXRhPWEsdGhpcyk6dGhpcy5fbWV0YX0sbG9hZEZyb21CbG9iOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1hLmdldFJ1aWQoKTt0aGlzLmNvbm5lY3RSdW50aW1lKGMsZnVuY3Rpb24oKXtiLmV4ZWMoXCJpbml0XCIsYi5vcHRpb25zKSxiLmV4ZWMoXCJsb2FkRnJvbUJsb2JcIixhKX0pfSxyZXNpemU6ZnVuY3Rpb24oKXt2YXIgYj1hLnNsaWNlKGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuZXhlYy5hcHBseSh0aGlzLFtcInJlc2l6ZVwiXS5jb25jYXQoYikpfSxnZXRBc0RhdGFVcmw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZXhlYyhcImdldEFzRGF0YVVybFwiLGEpfSxnZXRBc0Jsb2I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5leGVjKFwiZ2V0QXNCbG9iXCIsYSk7cmV0dXJuIG5ldyBjKHRoaXMuZ2V0UnVpZCgpLGIpfX0pLGR9KSxiKFwid2lkZ2V0cy9pbWFnZVwiLFtcImJhc2VcIixcInVwbG9hZGVyXCIsXCJsaWIvaW1hZ2VcIixcIndpZGdldHMvd2lkZ2V0XCJdLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPWEuJDtyZXR1cm4gZD1mdW5jdGlvbihhKXt2YXIgYj0wLGM9W10sZD1mdW5jdGlvbigpe2Zvcih2YXIgZDtjLmxlbmd0aCYmYT5iOylkPWMuc2hpZnQoKSxiKz1kWzBdLGRbMV0oKX07cmV0dXJuIGZ1bmN0aW9uKGEsZSxmKXtjLnB1c2goW2UsZl0pLGEub25jZShcImRlc3Ryb3lcIixmdW5jdGlvbigpe2ItPWUsc2V0VGltZW91dChkLDEpfSksc2V0VGltZW91dChkLDEpfX0oNTI0Mjg4MCksZS5leHRlbmQoYi5vcHRpb25zLHt0aHVtYjp7d2lkdGg6MTEwLGhlaWdodDoxMTAscXVhbGl0eTo3MCxhbGxvd01hZ25pZnk6ITAsY3JvcDohMCxwcmVzZXJ2ZUhlYWRlcnM6ITEsdHlwZTpcImltYWdlL2pwZWdcIn0sY29tcHJlc3M6e3dpZHRoOjE2MDAsaGVpZ2h0OjE2MDAscXVhbGl0eTo5MCxhbGxvd01hZ25pZnk6ITEsY3JvcDohMSxwcmVzZXJ2ZUhlYWRlcnM6ITB9fSksYi5yZWdpc3Rlcih7XCJtYWtlLXRodW1iXCI6XCJtYWtlVGh1bWJcIixcImJlZm9yZS1zZW5kLWZpbGVcIjpcImNvbXByZXNzSW1hZ2VcIn0se21ha2VUaHVtYjpmdW5jdGlvbihhLGIsZixnKXt2YXIgaCxpO3JldHVybiBhPXRoaXMucmVxdWVzdChcImdldC1maWxlXCIsYSksYS50eXBlLm1hdGNoKC9eaW1hZ2UvKT8oaD1lLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMudGh1bWIpLGUuaXNQbGFpbk9iamVjdChmKSYmKGg9ZS5leHRlbmQoaCxmKSxmPW51bGwpLGY9Znx8aC53aWR0aCxnPWd8fGguaGVpZ2h0LGk9bmV3IGMoaCksaS5vbmNlKFwibG9hZFwiLGZ1bmN0aW9uKCl7YS5faW5mbz1hLl9pbmZvfHxpLmluZm8oKSxhLl9tZXRhPWEuX21ldGF8fGkubWV0YSgpLGkucmVzaXplKGYsZyl9KSxpLm9uY2UoXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7YighMSxpLmdldEFzRGF0YVVybChoLnR5cGUpKSxpLmRlc3Ryb3koKX0pLGkub25jZShcImVycm9yXCIsZnVuY3Rpb24oKXtiKCEwKSxpLmRlc3Ryb3koKX0pLHZvaWQgZChpLGEuc291cmNlLnNpemUsZnVuY3Rpb24oKXthLl9pbmZvJiZpLmluZm8oYS5faW5mbyksYS5fbWV0YSYmaS5tZXRhKGEuX21ldGEpLGkubG9hZEZyb21CbG9iKGEuc291cmNlKX0pKTp2b2lkIGIoITApfSxjb21wcmVzc0ltYWdlOmZ1bmN0aW9uKGIpe3ZhciBkLGYsZz10aGlzLm9wdGlvbnMuY29tcHJlc3N8fHRoaXMub3B0aW9ucy5yZXNpemUsaD1nJiZnLmNvbXByZXNzU2l6ZXx8MzA3MjAwO3JldHVybiBiPXRoaXMucmVxdWVzdChcImdldC1maWxlXCIsYiksIWd8fCF+XCJpbWFnZS9qcGVnLGltYWdlL2pwZ1wiLmluZGV4T2YoYi50eXBlKXx8Yi5zaXplPGh8fGIuX2NvbXByZXNzZWQ/dm9pZCAwOihnPWUuZXh0ZW5kKHt9LGcpLGY9YS5EZWZlcnJlZCgpLGQ9bmV3IGMoZyksZi5hbHdheXMoZnVuY3Rpb24oKXtkLmRlc3Ryb3koKSxkPW51bGx9KSxkLm9uY2UoXCJlcnJvclwiLGYucmVqZWN0KSxkLm9uY2UoXCJsb2FkXCIsZnVuY3Rpb24oKXtiLl9pbmZvPWIuX2luZm98fGQuaW5mbygpLGIuX21ldGE9Yi5fbWV0YXx8ZC5tZXRhKCksZC5yZXNpemUoZy53aWR0aCxnLmhlaWdodCl9KSxkLm9uY2UoXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7dmFyIGEsYzt0cnl7YT1kLmdldEFzQmxvYihnLnR5cGUpLGM9Yi5zaXplLGEuc2l6ZTxjJiYoYi5zb3VyY2U9YSxiLnNpemU9YS5zaXplLGIudHJpZ2dlcihcInJlc2l6ZVwiLGEuc2l6ZSxjKSksYi5fY29tcHJlc3NlZD0hMCxmLnJlc29sdmUoKX1jYXRjaChlKXtmLnJlc29sdmUoKX19KSxiLl9pbmZvJiZkLmluZm8oYi5faW5mbyksYi5fbWV0YSYmZC5tZXRhKGIuX21ldGEpLGQubG9hZEZyb21CbG9iKGIuc291cmNlKSxmLnByb21pc2UoKSl9fSl9KSxiKFwiZmlsZVwiLFtcImJhc2VcIixcIm1lZGlhdG9yXCJdLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe3JldHVybiBmK2crK31mdW5jdGlvbiBkKGEpe3RoaXMubmFtZT1hLm5hbWV8fFwiVW50aXRsZWRcIix0aGlzLnNpemU9YS5zaXplfHwwLHRoaXMudHlwZT1hLnR5cGV8fFwiYXBwbGljYXRpb25cIix0aGlzLmxhc3RNb2RpZmllZERhdGU9YS5sYXN0TW9kaWZpZWREYXRlfHwxKm5ldyBEYXRlLHRoaXMuaWQ9YygpLHRoaXMuZXh0PWguZXhlYyh0aGlzLm5hbWUpP1JlZ0V4cC4kMTpcIlwiLHRoaXMuc3RhdHVzVGV4dD1cIlwiLGlbdGhpcy5pZF09ZC5TdGF0dXMuSU5JVEVELHRoaXMuc291cmNlPWEsdGhpcy5sb2FkZWQ9MCx0aGlzLm9uKFwiZXJyb3JcIixmdW5jdGlvbihhKXt0aGlzLnNldFN0YXR1cyhkLlN0YXR1cy5FUlJPUixhKX0pfXZhciBlPWEuJCxmPVwiV1VfRklMRV9cIixnPTAsaD0vXFwuKFteLl0rKSQvLGk9e307cmV0dXJuIGUuZXh0ZW5kKGQucHJvdG90eXBlLHtzZXRTdGF0dXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1pW3RoaXMuaWRdO1widW5kZWZpbmVkXCIhPXR5cGVvZiBiJiYodGhpcy5zdGF0dXNUZXh0PWIpLGEhPT1jJiYoaVt0aGlzLmlkXT1hLHRoaXMudHJpZ2dlcihcInN0YXR1c2NoYW5nZVwiLGEsYykpfSxnZXRTdGF0dXM6ZnVuY3Rpb24oKXtyZXR1cm4gaVt0aGlzLmlkXX0sZ2V0U291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlfSxkZXN0b3J5OmZ1bmN0aW9uKCl7ZGVsZXRlIGlbdGhpcy5pZF19fSksYi5pbnN0YWxsVG8oZC5wcm90b3R5cGUpLGQuU3RhdHVzPXtJTklURUQ6XCJpbml0ZWRcIixRVUVVRUQ6XCJxdWV1ZWRcIixQUk9HUkVTUzpcInByb2dyZXNzXCIsRVJST1I6XCJlcnJvclwiLENPTVBMRVRFOlwiY29tcGxldGVcIixDQU5DRUxMRUQ6XCJjYW5jZWxsZWRcIixJTlRFUlJVUFQ6XCJpbnRlcnJ1cHRcIixJTlZBTElEOlwiaW52YWxpZFwifSxkfSksYihcInF1ZXVlXCIsW1wiYmFzZVwiLFwibWVkaWF0b3JcIixcImZpbGVcIl0sZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXt0aGlzLnN0YXRzPXtudW1PZlF1ZXVlOjAsbnVtT2ZTdWNjZXNzOjAsbnVtT2ZDYW5jZWw6MCxudW1PZlByb2dyZXNzOjAsbnVtT2ZVcGxvYWRGYWlsZWQ6MCxudW1PZkludmFsaWQ6MH0sdGhpcy5fcXVldWU9W10sdGhpcy5fbWFwPXt9fXZhciBlPWEuJCxmPWMuU3RhdHVzO3JldHVybiBlLmV4dGVuZChkLnByb3RvdHlwZSx7YXBwZW5kOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9xdWV1ZS5wdXNoKGEpLHRoaXMuX2ZpbGVBZGRlZChhKSx0aGlzfSxwcmVwZW5kOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9xdWV1ZS51bnNoaWZ0KGEpLHRoaXMuX2ZpbGVBZGRlZChhKSx0aGlzfSxnZXRGaWxlOmZ1bmN0aW9uKGEpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhP2E6dGhpcy5fbWFwW2FdfSxmZXRjaDpmdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5fcXVldWUubGVuZ3RoO2ZvcihhPWF8fGYuUVVFVUVELGI9MDtkPmI7YisrKWlmKGM9dGhpcy5fcXVldWVbYl0sYT09PWMuZ2V0U3RhdHVzKCkpcmV0dXJuIGM7cmV0dXJuIG51bGx9LHNvcnQ6ZnVuY3Rpb24oYSl7XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmdGhpcy5fcXVldWUuc29ydChhKX0sZ2V0RmlsZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSxjPVtdLGQ9MCxmPXRoaXMuX3F1ZXVlLmxlbmd0aDtmPmQ7ZCsrKWE9dGhpcy5fcXVldWVbZF0sKCFiLmxlbmd0aHx8fmUuaW5BcnJheShhLmdldFN0YXR1cygpLGIpKSYmYy5wdXNoKGEpO3JldHVybiBjfSxfZmlsZUFkZGVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz10aGlzLl9tYXBbYS5pZF07Y3x8KHRoaXMuX21hcFthLmlkXT1hLGEub24oXCJzdGF0dXNjaGFuZ2VcIixmdW5jdGlvbihhLGMpe2IuX29uRmlsZVN0YXR1c0NoYW5nZShhLGMpfSkpLGEuc2V0U3RhdHVzKGYuUVVFVUVEKX0sX29uRmlsZVN0YXR1c0NoYW5nZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc3RhdHM7c3dpdGNoKGIpe2Nhc2UgZi5QUk9HUkVTUzpjLm51bU9mUHJvZ3Jlc3MtLTticmVhaztjYXNlIGYuUVVFVUVEOmMubnVtT2ZRdWV1ZS0tO2JyZWFrO2Nhc2UgZi5FUlJPUjpjLm51bU9mVXBsb2FkRmFpbGVkLS07YnJlYWs7Y2FzZSBmLklOVkFMSUQ6Yy5udW1PZkludmFsaWQtLX1zd2l0Y2goYSl7Y2FzZSBmLlFVRVVFRDpjLm51bU9mUXVldWUrKzticmVhaztjYXNlIGYuUFJPR1JFU1M6Yy5udW1PZlByb2dyZXNzKys7YnJlYWs7Y2FzZSBmLkVSUk9SOmMubnVtT2ZVcGxvYWRGYWlsZWQrKzticmVhaztjYXNlIGYuQ09NUExFVEU6Yy5udW1PZlN1Y2Nlc3MrKzticmVhaztjYXNlIGYuQ0FOQ0VMTEVEOmMubnVtT2ZDYW5jZWwrKzticmVhaztjYXNlIGYuSU5WQUxJRDpjLm51bU9mSW52YWxpZCsrfX19KSxiLmluc3RhbGxUbyhkLnByb3RvdHlwZSksZH0pLGIoXCJ3aWRnZXRzL3F1ZXVlXCIsW1wiYmFzZVwiLFwidXBsb2FkZXJcIixcInF1ZXVlXCIsXCJmaWxlXCIsXCJsaWIvZmlsZVwiLFwicnVudGltZS9jbGllbnRcIixcIndpZGdldHMvd2lkZ2V0XCJdLGZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz1hLiQsaD0vXFwuXFx3KyQvLGk9ZC5TdGF0dXM7cmV0dXJuIGIucmVnaXN0ZXIoe1wic29ydC1maWxlc1wiOlwic29ydEZpbGVzXCIsXCJhZGQtZmlsZVwiOlwiYWRkRmlsZXNcIixcImdldC1maWxlXCI6XCJnZXRGaWxlXCIsXCJmZXRjaC1maWxlXCI6XCJmZXRjaEZpbGVcIixcImdldC1zdGF0c1wiOlwiZ2V0U3RhdHNcIixcImdldC1maWxlc1wiOlwiZ2V0RmlsZXNcIixcInJlbW92ZS1maWxlXCI6XCJyZW1vdmVGaWxlXCIscmV0cnk6XCJyZXRyeVwiLHJlc2V0OlwicmVzZXRcIixcImFjY2VwdC1maWxlXCI6XCJhY2NlcHRGaWxlXCJ9LHtpbml0OmZ1bmN0aW9uKGIpe3ZhciBkLGUsaCxpLGosayxsLG09dGhpcztpZihnLmlzUGxhaW5PYmplY3QoYi5hY2NlcHQpJiYoYi5hY2NlcHQ9W2IuYWNjZXB0XSksYi5hY2NlcHQpe2ZvcihqPVtdLGg9MCxlPWIuYWNjZXB0Lmxlbmd0aDtlPmg7aCsrKWk9Yi5hY2NlcHRbaF0uZXh0ZW5zaW9ucyxpJiZqLnB1c2goaSk7ai5sZW5ndGgmJihrPVwiXFxcXC5cIitqLmpvaW4oXCIsXCIpLnJlcGxhY2UoLywvZyxcIiR8XFxcXC5cIikucmVwbGFjZSgvXFwqL2csXCIuKlwiKStcIiRcIiksbS5hY2NlcHQ9bmV3IFJlZ0V4cChrLFwiaVwiKX1yZXR1cm4gbS5xdWV1ZT1uZXcgYyxtLnN0YXRzPW0ucXVldWUuc3RhdHMsXCJodG1sNVwiPT09dGhpcy5yZXF1ZXN0KFwicHJlZGljdC1ydW50aW1lLXR5cGVcIik/KGQ9YS5EZWZlcnJlZCgpLGw9bmV3IGYoXCJQbGFjZWhvbGRlclwiKSxsLmNvbm5lY3RSdW50aW1lKHtydW50aW1lT3JkZXI6XCJodG1sNVwifSxmdW5jdGlvbigpe20uX3J1aWQ9bC5nZXRSdWlkKCksZC5yZXNvbHZlKCl9KSxkLnByb21pc2UoKSk6dm9pZCAwfSxfd3JhcEZpbGU6ZnVuY3Rpb24oYSl7aWYoIShhIGluc3RhbmNlb2YgZCkpe2lmKCEoYSBpbnN0YW5jZW9mIGUpKXtpZighdGhpcy5fcnVpZCl0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBhZGQgZXh0ZXJuYWwgZmlsZXMuXCIpO2E9bmV3IGUodGhpcy5fcnVpZCxhKX1hPW5ldyBkKGEpfXJldHVybiBhfSxhY2NlcHRGaWxlOmZ1bmN0aW9uKGEpe3ZhciBiPSFhfHxhLnNpemU8Nnx8dGhpcy5hY2NlcHQmJmguZXhlYyhhLm5hbWUpJiYhdGhpcy5hY2NlcHQudGVzdChhLm5hbWUpO3JldHVybiFifSxfYWRkRmlsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBhPWIuX3dyYXBGaWxlKGEpLGIub3duZXIudHJpZ2dlcihcImJlZm9yZUZpbGVRdWV1ZWRcIixhKT9iLmFjY2VwdEZpbGUoYSk/KGIucXVldWUuYXBwZW5kKGEpLGIub3duZXIudHJpZ2dlcihcImZpbGVRdWV1ZWRcIixhKSxhKTp2b2lkIGIub3duZXIudHJpZ2dlcihcImVycm9yXCIsXCJRX1RZUEVfREVOSUVEXCIsYSk6dm9pZCAwfSxnZXRGaWxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlLmdldEZpbGUoYSl9LGFkZEZpbGVzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YS5sZW5ndGh8fChhPVthXSksYT1nLm1hcChhLGZ1bmN0aW9uKGEpe3JldHVybiBiLl9hZGRGaWxlKGEpfSksYi5vd25lci50cmlnZ2VyKFwiZmlsZXNRdWV1ZWRcIixhKSxiLm9wdGlvbnMuYXV0byYmYi5yZXF1ZXN0KFwic3RhcnQtdXBsb2FkXCIpfSxnZXRTdGF0czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRzfSxyZW1vdmVGaWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YT1hLmlkP2E6Yi5xdWV1ZS5nZXRGaWxlKGEpLGEuc2V0U3RhdHVzKGkuQ0FOQ0VMTEVEKSxiLm93bmVyLnRyaWdnZXIoXCJmaWxlRGVxdWV1ZWRcIixhKX0sZ2V0RmlsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWV1ZS5nZXRGaWxlcy5hcHBseSh0aGlzLnF1ZXVlLGFyZ3VtZW50cyl9LGZldGNoRmlsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXVlLmZldGNoLmFwcGx5KHRoaXMucXVldWUsYXJndW1lbnRzKX0scmV0cnk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzO2lmKGEpcmV0dXJuIGE9YS5pZD9hOmYucXVldWUuZ2V0RmlsZShhKSxhLnNldFN0YXR1cyhpLlFVRVVFRCksdm9pZChifHxmLnJlcXVlc3QoXCJzdGFydC11cGxvYWRcIikpO2ZvcihjPWYucXVldWUuZ2V0RmlsZXMoaS5FUlJPUiksZD0wLGU9Yy5sZW5ndGg7ZT5kO2QrKylhPWNbZF0sYS5zZXRTdGF0dXMoaS5RVUVVRUQpO2YucmVxdWVzdChcInN0YXJ0LXVwbG9hZFwiKX0sc29ydEZpbGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVldWUuc29ydC5hcHBseSh0aGlzLnF1ZXVlLGFyZ3VtZW50cyl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5xdWV1ZT1uZXcgYyx0aGlzLnN0YXRzPXRoaXMucXVldWUuc3RhdHN9fSl9KSxiKFwid2lkZ2V0cy9ydW50aW1lXCIsW1widXBsb2FkZXJcIixcInJ1bnRpbWUvcnVudGltZVwiLFwid2lkZ2V0cy93aWRnZXRcIl0sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5zdXBwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIGIuaGFzUnVudGltZS5hcHBseShiLGFyZ3VtZW50cyl9LGEucmVnaXN0ZXIoe1wicHJlZGljdC1ydW50aW1lLXR5cGVcIjpcInByZWRpY3RSdW50bWVUeXBlXCJ9LHtpbml0OmZ1bmN0aW9uKCl7aWYoIXRoaXMucHJlZGljdFJ1bnRtZVR5cGUoKSl0aHJvdyBFcnJvcihcIlJ1bnRpbWUgRXJyb3JcIil9LHByZWRpY3RSdW50bWVUeXBlOmZ1bmN0aW9uKCl7dmFyIGEsYyxkPXRoaXMub3B0aW9ucy5ydW50aW1lT3JkZXJ8fGIub3JkZXJzLGU9dGhpcy50eXBlO2lmKCFlKWZvcihkPWQuc3BsaXQoL1xccyosXFxzKi9nKSxhPTAsYz1kLmxlbmd0aDtjPmE7YSsrKWlmKGIuaGFzUnVudGltZShkW2FdKSl7dGhpcy50eXBlPWU9ZFthXTticmVha31yZXR1cm4gZX19KX0pLGIoXCJsaWIvdHJhbnNwb3J0XCIsW1wiYmFzZVwiLFwicnVudGltZS9jbGllbnRcIixcIm1lZGlhdG9yXCJdLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3ZhciBjPXRoaXM7YT1jLm9wdGlvbnM9ZS5leHRlbmQoITAse30sZC5vcHRpb25zLGF8fHt9KSxiLmNhbGwodGhpcyxcIlRyYW5zcG9ydFwiKSx0aGlzLl9ibG9iPW51bGwsdGhpcy5fZm9ybURhdGE9YS5mb3JtRGF0YXx8e30sdGhpcy5faGVhZGVycz1hLmhlYWRlcnN8fHt9LHRoaXMub24oXCJwcm9ncmVzc1wiLHRoaXMuX3RpbWVvdXQpLHRoaXMub24oXCJsb2FkIGVycm9yXCIsZnVuY3Rpb24oKXtjLnRyaWdnZXIoXCJwcm9ncmVzc1wiLDEpLGNsZWFyVGltZW91dChjLl90aW1lcil9KX12YXIgZT1hLiQ7cmV0dXJuIGQub3B0aW9ucz17c2VydmVyOlwiXCIsbWV0aG9kOlwiUE9TVFwiLHdpdGhDcmVkZW50aWFsczohMSxmaWxlVmFsOlwiZmlsZVwiLHRpbWVvdXQ6MTJlNCxmb3JtRGF0YTp7fSxoZWFkZXJzOnt9LHNlbmRBc0JpbmFyeTohMX0sZS5leHRlbmQoZC5wcm90b3R5cGUse2FwcGVuZEJsb2I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT1kLm9wdGlvbnM7ZC5nZXRSdWlkKCkmJmQuZGlzY29ubmVjdFJ1bnRpbWUoKSxkLmNvbm5lY3RSdW50aW1lKGIucnVpZCxmdW5jdGlvbigpe2QuZXhlYyhcImluaXRcIil9KSxkLl9ibG9iPWIsZS5maWxlVmFsPWF8fGUuZmlsZVZhbCxlLmZpbGVuYW1lPWN8fGUuZmlsZW5hbWV9LGFwcGVuZDpmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBhP2UuZXh0ZW5kKHRoaXMuX2Zvcm1EYXRhLGEpOnRoaXMuX2Zvcm1EYXRhW2FdPWJ9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgYT9lLmV4dGVuZCh0aGlzLl9oZWFkZXJzLGEpOnRoaXMuX2hlYWRlcnNbYV09Yn0sc2VuZDpmdW5jdGlvbihhKXt0aGlzLmV4ZWMoXCJzZW5kXCIsYSksdGhpcy5fdGltZW91dCgpfSxhYm9ydDpmdW5jdGlvbigpe3JldHVybiBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpLHRoaXMuZXhlYyhcImFib3J0XCIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKFwiZGVzdHJveVwiKSx0aGlzLm9mZigpLHRoaXMuZXhlYyhcImRlc3Ryb3lcIiksdGhpcy5kaXNjb25uZWN0UnVudGltZSgpfSxnZXRSZXNwb25zZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4ZWMoXCJnZXRSZXNwb25zZVwiKX0sZ2V0UmVzcG9uc2VBc0pzb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leGVjKFwiZ2V0UmVzcG9uc2VBc0pzb25cIil9LGdldFN0YXR1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4ZWMoXCJnZXRTdGF0dXNcIil9LF90aW1lb3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub3B0aW9ucy50aW1lb3V0O2ImJihjbGVhclRpbWVvdXQoYS5fdGltZXIpLGEuX3RpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmFib3J0KCksYS50cmlnZ2VyKFwiZXJyb3JcIixcInRpbWVvdXRcIil9LGIpKX19KSxjLmluc3RhbGxUbyhkLnByb3RvdHlwZSksZH0pLGIoXCJ3aWRnZXRzL3VwbG9hZFwiLFtcImJhc2VcIixcInVwbG9hZGVyXCIsXCJmaWxlXCIsXCJsaWIvdHJhbnNwb3J0XCIsXCJ3aWRnZXRzL3dpZGdldFwiXSxmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGEsYil7Zm9yKHZhciBjLGQ9W10sZT1hLnNvdXJjZSxmPWUuc2l6ZSxnPWI/TWF0aC5jZWlsKGYvYik6MSxoPTAsaT0wO2c+aTspYz1NYXRoLm1pbihiLGYtaCksZC5wdXNoKHtmaWxlOmEsc3RhcnQ6aCxlbmQ6Yj9oK2M6Zix0b3RhbDpmLGNodW5rczpnLGNodW5rOmkrK30pLGgrPWM7cmV0dXJuIGEuYmxvY2tzPWQuY29uY2F0KCksYS5yZW1hbmluZz1kLmxlbmd0aCx7ZmlsZTphLGhhczpmdW5jdGlvbigpe3JldHVybiEhZC5sZW5ndGh9LGZldGNoOmZ1bmN0aW9uKCl7cmV0dXJuIGQuc2hpZnQoKX19fXZhciBmPWEuJCxnPWEuaXNQcm9taXNlLGg9Yy5TdGF0dXM7Zi5leHRlbmQoYi5vcHRpb25zLHtwcmVwYXJlTmV4dEZpbGU6ITEsY2h1bmtlZDohMSxjaHVua1NpemU6NTI0Mjg4MCxjaHVua1JldHJ5OjIsdGhyZWFkczozLGZvcm1EYXRhOm51bGx9KSxiLnJlZ2lzdGVyKHtcInN0YXJ0LXVwbG9hZFwiOlwic3RhcnRcIixcInN0b3AtdXBsb2FkXCI6XCJzdG9wXCIsXCJza2lwLWZpbGVcIjpcInNraXBGaWxlXCIsXCJpcy1pbi1wcm9ncmVzc1wiOlwiaXNJblByb2dyZXNzXCJ9LHtpbml0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5vd25lcjt0aGlzLnJ1bmluZz0hMSx0aGlzLnBvb2w9W10sdGhpcy5wZW5kaW5nPVtdLHRoaXMucmVtYW5pbmc9MCx0aGlzLl9fdGljaz1hLmJpbmRGbih0aGlzLl90aWNrLHRoaXMpLGIub24oXCJ1cGxvYWRDb21wbGV0ZVwiLGZ1bmN0aW9uKGEpe2EuYmxvY2tzJiZmLmVhY2goYS5ibG9ja3MsZnVuY3Rpb24oYSxiKXtiLnRyYW5zcG9ydCYmKGIudHJhbnNwb3J0LmFib3J0KCksYi50cmFuc3BvcnQuZGVzdHJveSgpKSxkZWxldGUgYi50cmFuc3BvcnR9KSxkZWxldGUgYS5ibG9ja3MsZGVsZXRlIGEucmVtYW5pbmd9KX0sc3RhcnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzO2YuZWFjaChiLnJlcXVlc3QoXCJnZXQtZmlsZXNcIixoLklOVkFMSUQpLGZ1bmN0aW9uKCl7Yi5yZXF1ZXN0KFwicmVtb3ZlLWZpbGVcIix0aGlzKX0pLGIucnVuaW5nfHwoYi5ydW5pbmc9ITAsZi5lYWNoKGIucG9vbCxmdW5jdGlvbihhLGMpe3ZhciBkPWMuZmlsZTtkLmdldFN0YXR1cygpPT09aC5JTlRFUlJVUFQmJihkLnNldFN0YXR1cyhoLlBST0dSRVNTKSxiLl90cmlnZ2VkPSExLGMudHJhbnNwb3J0JiZjLnRyYW5zcG9ydC5zZW5kKCkpfSksYi5fdHJpZ2dlZD0hMSxiLm93bmVyLnRyaWdnZXIoXCJzdGFydFVwbG9hZFwiKSxhLm5leHRUaWNrKGIuX190aWNrKSl9LHN0b3A6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLnJ1bmluZyE9PSExJiYoYi5ydW5pbmc9ITEsYSYmZi5lYWNoKGIucG9vbCxmdW5jdGlvbihhLGIpe2IudHJhbnNwb3J0JiZiLnRyYW5zcG9ydC5hYm9ydCgpLGIuZmlsZS5zZXRTdGF0dXMoaC5JTlRFUlJVUFQpfSksYi5vd25lci50cmlnZ2VyKFwic3RvcFVwbG9hZFwiKSl9LGlzSW5Qcm9ncmVzczpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5ydW5pbmd9LGdldFN0YXRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVxdWVzdChcImdldC1zdGF0c1wiKX0sc2tpcEZpbGU6ZnVuY3Rpb24oYSxiKXthPXRoaXMucmVxdWVzdChcImdldC1maWxlXCIsYSksYS5zZXRTdGF0dXMoYnx8aC5DT01QTEVURSksYS5za2lwcGVkPSEwLGEuYmxvY2tzJiZmLmVhY2goYS5ibG9ja3MsZnVuY3Rpb24oYSxiKXt2YXIgYz1iLnRyYW5zcG9ydDtjJiYoYy5hYm9ydCgpLGMuZGVzdHJveSgpLGRlbGV0ZSBiLnRyYW5zcG9ydCl9KSx0aGlzLm93bmVyLnRyaWdnZXIoXCJ1cGxvYWRTa2lwXCIsYSl9LF90aWNrOmZ1bmN0aW9uKCl7dmFyIGIsYyxkPXRoaXMsZT1kLm9wdGlvbnM7cmV0dXJuIGQuX3Byb21pc2U/ZC5fcHJvbWlzZS5hbHdheXMoZC5fX3RpY2spOnZvaWQoZC5wb29sLmxlbmd0aDxlLnRocmVhZHMmJihjPWQuX25leHRCbG9jaygpKT8oZC5fdHJpZ2dlZD0hMSxiPWZ1bmN0aW9uKGIpe2QuX3Byb21pc2U9bnVsbCxiJiZiLmZpbGUmJmQuX3N0YXJ0U2VuZChiKSxhLm5leHRUaWNrKGQuX190aWNrKX0sZC5fcHJvbWlzZT1nKGMpP2MuYWx3YXlzKGIpOmIoYykpOmQucmVtYW5pbmd8fGQuZ2V0U3RhdHMoKS5udW1PZlF1ZXVlfHwoZC5ydW5pbmc9ITEsZC5fdHJpZ2dlZHx8YS5uZXh0VGljayhmdW5jdGlvbigpe2Qub3duZXIudHJpZ2dlcihcInVwbG9hZEZpbmlzaGVkXCIpfSksZC5fdHJpZ2dlZD0hMCkpfSxfbmV4dEJsb2NrOmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMsZD1jLl9hY3QsZj1jLm9wdGlvbnM7cmV0dXJuIGQmJmQuaGFzKCkmJmQuZmlsZS5nZXRTdGF0dXMoKT09PWguUFJPR1JFU1M/KGYucHJlcGFyZU5leHRGaWxlJiYhYy5wZW5kaW5nLmxlbmd0aCYmYy5fcHJlcGFyZU5leHRGaWxlKCksZC5mZXRjaCgpKTpjLnJ1bmluZz8oIWMucGVuZGluZy5sZW5ndGgmJmMuZ2V0U3RhdHMoKS5udW1PZlF1ZXVlJiZjLl9wcmVwYXJlTmV4dEZpbGUoKSxhPWMucGVuZGluZy5zaGlmdCgpLGI9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KGQ9ZShhLGYuY2h1bmtlZD9mLmNodW5rU2l6ZTowKSxjLl9hY3Q9ZCxkLmZldGNoKCkpOm51bGx9LGcoYSk/YVthLnBpcGU/XCJwaXBlXCI6XCJ0aGVuXCJdKGIpOmIoYSkpOnZvaWQgMH0sX3ByZXBhcmVOZXh0RmlsZTpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcyxjPWIucmVxdWVzdChcImZldGNoLWZpbGVcIiksZD1iLnBlbmRpbmc7YyYmKGE9Yi5yZXF1ZXN0KFwiYmVmb3JlLXNlbmQtZmlsZVwiLGMsZnVuY3Rpb24oKXtyZXR1cm4gYy5nZXRTdGF0dXMoKT09PWguUVVFVUVEPyhiLm93bmVyLnRyaWdnZXIoXCJ1cGxvYWRTdGFydFwiLGMpLGMuc2V0U3RhdHVzKGguUFJPR1JFU1MpLGMpOmIuX2ZpbmlzaEZpbGUoYyl9KSxhLmRvbmUoZnVuY3Rpb24oKXt2YXIgYj1mLmluQXJyYXkoYSxkKTt+YiYmZC5zcGxpY2UoYiwxLGMpfSksYS5mYWlsKGZ1bmN0aW9uKGEpe2Muc2V0U3RhdHVzKGguRVJST1IsYSksYi5vd25lci50cmlnZ2VyKFwidXBsb2FkRXJyb3JcIixjLGEpLGIub3duZXIudHJpZ2dlcihcInVwbG9hZENvbXBsZXRlXCIsYyl9KSxkLnB1c2goYSkpfSxfcG9wQmxvY2s6ZnVuY3Rpb24oYSl7dmFyIGI9Zi5pbkFycmF5KGEsdGhpcy5wb29sKTt0aGlzLnBvb2wuc3BsaWNlKGIsMSksYS5maWxlLnJlbWFuaW5nLS0sdGhpcy5yZW1hbmluZy0tfSxfc3RhcnRTZW5kOmZ1bmN0aW9uKGIpe3ZhciBjLGQ9dGhpcyxlPWIuZmlsZTtkLnBvb2wucHVzaChiKSxkLnJlbWFuaW5nKyssYi5ibG9iPTE9PT1iLmNodW5rcz9lLnNvdXJjZTplLnNvdXJjZS5zbGljZShiLnN0YXJ0LGIuZW5kKSxjPWQucmVxdWVzdChcImJlZm9yZS1zZW5kXCIsYixmdW5jdGlvbigpe2UuZ2V0U3RhdHVzKCk9PT1oLlBST0dSRVNTP2QuX2RvU2VuZChiKTooZC5fcG9wQmxvY2soYiksYS5uZXh0VGljayhkLl9fdGljaykpfSksYy5mYWlsKGZ1bmN0aW9uKCl7MT09PWUucmVtYW5pbmc/ZC5fZmluaXNoRmlsZShlKS5hbHdheXMoZnVuY3Rpb24oKXtiLnBlcmNlbnRhZ2U9MSxkLl9wb3BCbG9jayhiKSxkLm93bmVyLnRyaWdnZXIoXCJ1cGxvYWRDb21wbGV0ZVwiLGUpLGEubmV4dFRpY2soZC5fX3RpY2spfSk6KGIucGVyY2VudGFnZT0xLGQuX3BvcEJsb2NrKGIpLGEubmV4dFRpY2soZC5fX3RpY2spKX0pfSxfZG9TZW5kOmZ1bmN0aW9uKGIpe3ZhciBjLGUsZz10aGlzLGk9Zy5vd25lcixqPWcub3B0aW9ucyxrPWIuZmlsZSxsPW5ldyBkKGopLG09Zi5leHRlbmQoe30sai5mb3JtRGF0YSksbj1mLmV4dGVuZCh7fSxqLmhlYWRlcnMpO2IudHJhbnNwb3J0PWwsbC5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe2RlbGV0ZSBiLnRyYW5zcG9ydCxnLl9wb3BCbG9jayhiKSxhLm5leHRUaWNrKGcuX190aWNrKX0pLGwub24oXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGEpe3ZhciBjPTAsZD0wO2M9Yi5wZXJjZW50YWdlPWEsYi5jaHVua3M+MSYmKGYuZWFjaChrLmJsb2NrcyxmdW5jdGlvbihhLGIpe2QrPShiLnBlcmNlbnRhZ2V8fDApKihiLmVuZC1iLnN0YXJ0KX0pLGM9ZC9rLnNpemUpLGkudHJpZ2dlcihcInVwbG9hZFByb2dyZXNzXCIsayxjfHwwKX0pLGM9ZnVuY3Rpb24oYSl7dmFyIGM7cmV0dXJuIGU9bC5nZXRSZXNwb25zZUFzSnNvbigpfHx7fSxlLl9yYXc9bC5nZXRSZXNwb25zZSgpLGM9ZnVuY3Rpb24oYil7YT1ifSxpLnRyaWdnZXIoXCJ1cGxvYWRBY2NlcHRcIixiLGUsYyl8fChhPWF8fFwic2VydmVyXCIpLGF9LGwub24oXCJlcnJvclwiLGZ1bmN0aW9uKGEsZCl7Yi5yZXRyaWVkPWIucmV0cmllZHx8MCxiLmNodW5rcz4xJiZ+XCJodHRwLGFib3J0XCIuaW5kZXhPZihhKSYmYi5yZXRyaWVkPGouY2h1bmtSZXRyeT8oYi5yZXRyaWVkKyssbC5zZW5kKCkpOihkfHxcInNlcnZlclwiIT09YXx8KGE9YyhhKSksay5zZXRTdGF0dXMoaC5FUlJPUixhKSxpLnRyaWdnZXIoXCJ1cGxvYWRFcnJvclwiLGssYSksaS50cmlnZ2VyKFwidXBsb2FkQ29tcGxldGVcIixrKSl9KSxsLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuKGE9YygpKT92b2lkIGwudHJpZ2dlcihcImVycm9yXCIsYSwhMCk6dm9pZCgxPT09ay5yZW1hbmluZz9nLl9maW5pc2hGaWxlKGssZSk6bC5kZXN0cm95KCkpfSksbT1mLmV4dGVuZChtLHtpZDprLmlkLG5hbWU6ay5uYW1lLHR5cGU6ay50eXBlLGxhc3RNb2RpZmllZERhdGU6ay5sYXN0TW9kaWZpZWREYXRlLHNpemU6ay5zaXplfSksYi5jaHVua3M+MSYmZi5leHRlbmQobSx7Y2h1bmtzOmIuY2h1bmtzLGNodW5rOmIuY2h1bmt9KSxpLnRyaWdnZXIoXCJ1cGxvYWRCZWZvcmVTZW5kXCIsYixtLG4pLGwuYXBwZW5kQmxvYihqLmZpbGVWYWwsYi5ibG9iLGsubmFtZSksbC5hcHBlbmQobSksbC5zZXRSZXF1ZXN0SGVhZGVyKG4pLGwuc2VuZCgpfSxfZmluaXNoRmlsZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5vd25lcjtyZXR1cm4gZC5yZXF1ZXN0KFwiYWZ0ZXItc2VuZC1maWxlXCIsYXJndW1lbnRzLGZ1bmN0aW9uKCl7YS5zZXRTdGF0dXMoaC5DT01QTEVURSksZC50cmlnZ2VyKFwidXBsb2FkU3VjY2Vzc1wiLGEsYixjKX0pLmZhaWwoZnVuY3Rpb24oYil7YS5nZXRTdGF0dXMoKT09PWguUFJPR1JFU1MmJmEuc2V0U3RhdHVzKGguRVJST1IsYiksZC50cmlnZ2VyKFwidXBsb2FkRXJyb3JcIixhLGIpfSkuYWx3YXlzKGZ1bmN0aW9uKCl7ZC50cmlnZ2VyKFwidXBsb2FkQ29tcGxldGVcIixhKX0pfX0pfSksYihcIndpZGdldHMvdmFsaWRhdG9yXCIsW1wiYmFzZVwiLFwidXBsb2FkZXJcIixcImZpbGVcIixcIndpZGdldHMvd2lkZ2V0XCJdLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPWEuJCxmPXt9O3JldHVybiBkPXthZGRWYWxpZGF0b3I6ZnVuY3Rpb24oYSxiKXtmW2FdPWJ9LHJlbW92ZVZhbGlkYXRvcjpmdW5jdGlvbihhKXtkZWxldGUgZlthXX19LGIucmVnaXN0ZXIoe2luaXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2UuZWFjaChmLGZ1bmN0aW9uKCl7dGhpcy5jYWxsKGEub3duZXIpfSl9fSksZC5hZGRWYWxpZGF0b3IoXCJmaWxlTnVtTGltaXRcIixmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLm9wdGlvbnMsYz0wLGQ9Yi5maWxlTnVtTGltaXQ+PjAsZT0hMDtkJiYoYS5vbihcImJlZm9yZUZpbGVRdWV1ZWRcIixmdW5jdGlvbihhKXtyZXR1cm4gYz49ZCYmZSYmKGU9ITEsdGhpcy50cmlnZ2VyKFwiZXJyb3JcIixcIlFfRVhDRUVEX05VTV9MSU1JVFwiLGQsYSksc2V0VGltZW91dChmdW5jdGlvbigpe2U9ITB9LDEpKSxjPj1kPyExOiEwfSksYS5vbihcImZpbGVRdWV1ZWRcIixmdW5jdGlvbigpe2MrK30pLGEub24oXCJmaWxlRGVxdWV1ZWRcIixmdW5jdGlvbigpe2MtLX0pLGEub24oXCJ1cGxvYWRGaW5pc2hlZFwiLGZ1bmN0aW9uKCl7Yz0wfSkpfSksZC5hZGRWYWxpZGF0b3IoXCJmaWxlU2l6ZUxpbWl0XCIsZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vcHRpb25zLGM9MCxkPWIuZmlsZVNpemVMaW1pdD4+MCxlPSEwO2QmJihhLm9uKFwiYmVmb3JlRmlsZVF1ZXVlZFwiLGZ1bmN0aW9uKGEpe3ZhciBiPWMrYS5zaXplPmQ7cmV0dXJuIGImJmUmJihlPSExLHRoaXMudHJpZ2dlcihcImVycm9yXCIsXCJRX0VYQ0VFRF9TSVpFX0xJTUlUXCIsZCxhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZT0hMH0sMSkpLGI/ITE6ITB9KSxhLm9uKFwiZmlsZVF1ZXVlZFwiLGZ1bmN0aW9uKGEpe2MrPWEuc2l6ZX0pLGEub24oXCJmaWxlRGVxdWV1ZWRcIixmdW5jdGlvbihhKXtjLT1hLnNpemV9KSxhLm9uKFwidXBsb2FkRmluaXNoZWRcIixmdW5jdGlvbigpe2M9MH0pKX0pLGQuYWRkVmFsaWRhdG9yKFwiZmlsZVNpbmdsZVNpemVMaW1pdFwiLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub3B0aW9ucyxkPWIuZmlsZVNpbmdsZVNpemVMaW1pdDtkJiZhLm9uKFwiYmVmb3JlRmlsZVF1ZXVlZFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLnNpemU+ZD8oYS5zZXRTdGF0dXMoYy5TdGF0dXMuSU5WQUxJRCxcImV4Y2VlZF9zaXplXCIpLHRoaXMudHJpZ2dlcihcImVycm9yXCIsXCJGX0VYQ0VFRF9TSVpFXCIsYSksITEpOnZvaWQgMH0pfSksZC5hZGRWYWxpZGF0b3IoXCJkdXBsaWNhdGVcIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7Zm9yKHZhciBiLGM9MCxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWI9YS5jaGFyQ29kZUF0KGQpLGM9YisoYzw8NikrKGM8PDE2KS1jO3JldHVybiBjfXZhciBiPXRoaXMsYz1iLm9wdGlvbnMsZD17fTtjLmR1cGxpY2F0ZXx8KGIub24oXCJiZWZvcmVGaWxlUXVldWVkXCIsZnVuY3Rpb24oYil7dmFyIGM9Yi5fX2hhc2h8fChiLl9faGFzaD1hKGIubmFtZStiLnNpemUrYi5sYXN0TW9kaWZpZWREYXRlKSk7cmV0dXJuIGRbY10/KHRoaXMudHJpZ2dlcihcImVycm9yXCIsXCJGX0RVUExJQ0FURVwiLGIpLCExKTp2b2lkIDB9KSxiLm9uKFwiZmlsZVF1ZXVlZFwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuX19oYXNoO2ImJihkW2JdPSEwKX0pLGIub24oXCJmaWxlRGVxdWV1ZWRcIixmdW5jdGlvbihhKXt2YXIgYj1hLl9faGFzaDtiJiZkZWxldGUgZFtiXX0pKX0pLGR9KSxiKFwicnVudGltZS9jb21wYmFzZVwiLFtdLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3RoaXMub3duZXI9YSx0aGlzLm9wdGlvbnM9YS5vcHRpb25zLHRoaXMuZ2V0UnVudGltZT1mdW5jdGlvbigpe3JldHVybiBifSx0aGlzLmdldFJ1aWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYi51aWR9LHRoaXMudHJpZ2dlcj1mdW5jdGlvbigpe3JldHVybiBhLnRyaWdnZXIuYXBwbHkoYSxhcmd1bWVudHMpfX1yZXR1cm4gYX0pLGIoXCJydW50aW1lL2h0bWw1L3J1bnRpbWVcIixbXCJiYXNlXCIsXCJydW50aW1lL3J1bnRpbWVcIixcInJ1bnRpbWUvY29tcGJhc2VcIl0sZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoKXt2YXIgYT17fSxkPXRoaXMsZT10aGlzLmRlc3Rvcnk7Yy5hcHBseShkLGFyZ3VtZW50cyksZC50eXBlPWYsZC5leGVjPWZ1bmN0aW9uKGMsZSl7dmFyIGYsaD10aGlzLGk9aC51aWQsaj1iLnNsaWNlKGFyZ3VtZW50cywyKTtyZXR1cm4gZ1tjXSYmKGY9YVtpXT1hW2ldfHxuZXcgZ1tjXShoLGQpLGZbZV0pP2ZbZV0uYXBwbHkoZixqKTp2b2lkIDB9LGQuZGVzdG9yeT1mdW5jdGlvbigpe3JldHVybiBlJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19dmFyIGY9XCJodG1sNVwiLGc9e307cmV0dXJuIGIuaW5oZXJpdHMoYyx7Y29uc3RydWN0b3I6ZSxpbml0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS50cmlnZ2VyKFwicmVhZHlcIil9LDEpfX0pLGUucmVnaXN0ZXI9ZnVuY3Rpb24oYSxjKXt2YXIgZT1nW2FdPWIuaW5oZXJpdHMoZCxjKTtyZXR1cm4gZX0sYS5CbG9iJiZhLkZpbGVSZWFkZXImJmEuRGF0YVZpZXcmJmMuYWRkUnVudGltZShmLGUpLGV9KSxiKFwicnVudGltZS9odG1sNS9ibG9iXCIsW1wicnVudGltZS9odG1sNS9ydW50aW1lXCIsXCJsaWIvYmxvYlwiXSxmdW5jdGlvbihhLGIpe3JldHVybiBhLnJlZ2lzdGVyKFwiQmxvYlwiLHtzbGljZTpmdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMub3duZXIuc291cmNlLGU9ZC5zbGljZXx8ZC53ZWJraXRTbGljZXx8ZC5tb3pTbGljZTtyZXR1cm4gZD1lLmNhbGwoZCxhLGMpLG5ldyBiKHRoaXMuZ2V0UnVpZCgpLGQpfX0pfSksYihcInJ1bnRpbWUvaHRtbDUvZG5kXCIsW1wiYmFzZVwiLFwicnVudGltZS9odG1sNS9ydW50aW1lXCIsXCJsaWIvZmlsZVwiXSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS4kLGU9XCJ3ZWJ1cGxvYWRlci1kbmQtXCI7cmV0dXJuIGIucmVnaXN0ZXIoXCJEcmFnQW5kRHJvcFwiLHtpbml0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5lbGVtPXRoaXMub3B0aW9ucy5jb250YWluZXI7dGhpcy5kcmFnRW50ZXJIYW5kbGVyPWEuYmluZEZuKHRoaXMuX2RyYWdFbnRlckhhbmRsZXIsdGhpcyksdGhpcy5kcmFnT3ZlckhhbmRsZXI9YS5iaW5kRm4odGhpcy5fZHJhZ092ZXJIYW5kbGVyLHRoaXMpLHRoaXMuZHJhZ0xlYXZlSGFuZGxlcj1hLmJpbmRGbih0aGlzLl9kcmFnTGVhdmVIYW5kbGVyLHRoaXMpLHRoaXMuZHJvcEhhbmRsZXI9YS5iaW5kRm4odGhpcy5fZHJvcEhhbmRsZXIsdGhpcyksdGhpcy5kbmRPdmVyPSExLGIub24oXCJkcmFnZW50ZXJcIix0aGlzLmRyYWdFbnRlckhhbmRsZXIpLGIub24oXCJkcmFnb3ZlclwiLHRoaXMuZHJhZ092ZXJIYW5kbGVyKSxiLm9uKFwiZHJhZ2xlYXZlXCIsdGhpcy5kcmFnTGVhdmVIYW5kbGVyKSxiLm9uKFwiZHJvcFwiLHRoaXMuZHJvcEhhbmRsZXIpLHRoaXMub3B0aW9ucy5kaXNhYmxlR2xvYmFsRG5kJiYoZChkb2N1bWVudCkub24oXCJkcmFnb3ZlclwiLHRoaXMuZHJhZ092ZXJIYW5kbGVyKSxkKGRvY3VtZW50KS5vbihcImRyb3BcIix0aGlzLmRyb3BIYW5kbGVyKSlcbn0sX2RyYWdFbnRlckhhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLGQ9Yy5fZGVuaWVkfHwhMTtyZXR1cm4gYT1hLm9yaWdpbmFsRXZlbnR8fGEsYy5kbmRPdmVyfHwoYy5kbmRPdmVyPSEwLGI9YS5kYXRhVHJhbnNmZXIuaXRlbXMsYiYmYi5sZW5ndGgmJihjLl9kZW5pZWQ9ZD0hYy50cmlnZ2VyKFwiYWNjZXB0XCIsYikpLGMuZWxlbS5hZGRDbGFzcyhlK1wib3ZlclwiKSxjLmVsZW1bZD9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShlK1wiZGVuaWVkXCIpKSxhLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0PWQ/XCJub25lXCI6XCJjb3B5XCIsITF9LF9kcmFnT3ZlckhhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtLnBhcmVudCgpLmdldCgwKTtyZXR1cm4gYiYmIWQuY29udGFpbnMoYixhLmN1cnJlbnRUYXJnZXQpPyExOihjbGVhclRpbWVvdXQodGhpcy5fbGVhdmVUaW1lciksdGhpcy5fZHJhZ0VudGVySGFuZGxlci5jYWxsKHRoaXMsYSksITEpfSxfZHJhZ0xlYXZlSGFuZGxlcjpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcztyZXR1cm4gYT1mdW5jdGlvbigpe2IuZG5kT3Zlcj0hMSxiLmVsZW0ucmVtb3ZlQ2xhc3MoZStcIm92ZXIgXCIrZStcImRlbmllZFwiKX0sY2xlYXJUaW1lb3V0KGIuX2xlYXZlVGltZXIpLGIuX2xlYXZlVGltZXI9c2V0VGltZW91dChhLDEwMCksITF9LF9kcm9wSGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGY9Yi5nZXRSdWlkKCksZz1iLmVsZW0ucGFyZW50KCkuZ2V0KDApO3JldHVybiBnJiYhZC5jb250YWlucyhnLGEuY3VycmVudFRhcmdldCk/ITE6KGIuX2dldFRhbnNmZXJGaWxlcyhhLGZ1bmN0aW9uKGEpe2IudHJpZ2dlcihcImRyb3BcIixkLm1hcChhLGZ1bmN0aW9uKGEpe3JldHVybiBuZXcgYyhmLGEpfSkpfSksYi5kbmRPdmVyPSExLGIuZWxlbS5yZW1vdmVDbGFzcyhlK1wib3ZlclwiKSwhMSl9LF9nZXRUYW5zZmVyRmlsZXM6ZnVuY3Rpb24oYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9W10sbT1bXTtmb3IoYj1iLm9yaWdpbmFsRXZlbnR8fGIsZj1iLmRhdGFUcmFuc2ZlcixkPWYuaXRlbXMsZT1mLmZpbGVzLGs9ISghZHx8IWRbMF0ud2Via2l0R2V0QXNFbnRyeSksaT0wLGo9ZS5sZW5ndGg7aj5pO2krKylnPWVbaV0saD1kJiZkW2ldLGsmJmgud2Via2l0R2V0QXNFbnRyeSgpLmlzRGlyZWN0b3J5P20ucHVzaCh0aGlzLl90cmF2ZXJzZURpcmVjdG9yeVRyZWUoaC53ZWJraXRHZXRBc0VudHJ5KCksbCkpOmwucHVzaChnKTthLndoZW4uYXBwbHkoYSxtKS5kb25lKGZ1bmN0aW9uKCl7bC5sZW5ndGgmJmMobCl9KX0sX3RyYXZlcnNlRGlyZWN0b3J5VHJlZTpmdW5jdGlvbihiLGMpe3ZhciBkPWEuRGVmZXJyZWQoKSxlPXRoaXM7cmV0dXJuIGIuaXNGaWxlP2IuZmlsZShmdW5jdGlvbihhKXtjLnB1c2goYSksZC5yZXNvbHZlKCl9KTpiLmlzRGlyZWN0b3J5JiZiLmNyZWF0ZVJlYWRlcigpLnJlYWRFbnRyaWVzKGZ1bmN0aW9uKGIpe3ZhciBmLGc9Yi5sZW5ndGgsaD1bXSxpPVtdO2ZvcihmPTA7Zz5mO2YrKyloLnB1c2goZS5fdHJhdmVyc2VEaXJlY3RvcnlUcmVlKGJbZl0saSkpO2Eud2hlbi5hcHBseShhLGgpLnRoZW4oZnVuY3Rpb24oKXtjLnB1c2guYXBwbHkoYyxpKSxkLnJlc29sdmUoKX0sZC5yZWplY3QpfSksZC5wcm9taXNlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW07YS5vZmYoXCJkcmFnZW50ZXJcIix0aGlzLmRyYWdFbnRlckhhbmRsZXIpLGEub2ZmKFwiZHJhZ292ZXJcIix0aGlzLmRyYWdFbnRlckhhbmRsZXIpLGEub2ZmKFwiZHJhZ2xlYXZlXCIsdGhpcy5kcmFnTGVhdmVIYW5kbGVyKSxhLm9mZihcImRyb3BcIix0aGlzLmRyb3BIYW5kbGVyKSx0aGlzLm9wdGlvbnMuZGlzYWJsZUdsb2JhbERuZCYmKGQoZG9jdW1lbnQpLm9mZihcImRyYWdvdmVyXCIsdGhpcy5kcmFnT3ZlckhhbmRsZXIpLGQoZG9jdW1lbnQpLm9mZihcImRyb3BcIix0aGlzLmRyb3BIYW5kbGVyKSl9fSl9KSxiKFwicnVudGltZS9odG1sNS9maWxlcGFzdGVcIixbXCJiYXNlXCIsXCJydW50aW1lL2h0bWw1L3J1bnRpbWVcIixcImxpYi9maWxlXCJdLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYi5yZWdpc3RlcihcIkZpbGVQYXN0ZVwiLHtpbml0OmZ1bmN0aW9uKCl7dmFyIGIsYyxkLGUsZj10aGlzLm9wdGlvbnMsZz10aGlzLmVsZW09Zi5jb250YWluZXIsaD1cIi4qXCI7aWYoZi5hY2NlcHQpe2ZvcihiPVtdLGM9MCxkPWYuYWNjZXB0Lmxlbmd0aDtkPmM7YysrKWU9Zi5hY2NlcHRbY10ubWltZVR5cGVzLGUmJmIucHVzaChlKTtiLmxlbmd0aCYmKGg9Yi5qb2luKFwiLFwiKSxoPWgucmVwbGFjZSgvLC9nLFwifFwiKS5yZXBsYWNlKC9cXCovZyxcIi4qXCIpKX10aGlzLmFjY2VwdD1oPW5ldyBSZWdFeHAoaCxcImlcIiksdGhpcy5oYW5kZXI9YS5iaW5kRm4odGhpcy5fcGFzdGVIYW5kZXIsdGhpcyksZy5vbihcInBhc3RlXCIsdGhpcy5oYW5kZXIpfSxfcGFzdGVIYW5kZXI6ZnVuY3Rpb24oYSl7dmFyIGIsZCxlLGYsZyxoPVtdLGk9dGhpcy5nZXRSdWlkKCk7Zm9yKGE9YS5vcmlnaW5hbEV2ZW50fHxhLGI9YS5jbGlwYm9hcmREYXRhLml0ZW1zLGY9MCxnPWIubGVuZ3RoO2c+ZjtmKyspZD1iW2ZdLFwiZmlsZVwiPT09ZC5raW5kJiYoZT1kLmdldEFzRmlsZSgpKSYmaC5wdXNoKG5ldyBjKGksZSkpO2gubGVuZ3RoJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy50cmlnZ2VyKFwicGFzdGVcIixoKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW0ub2ZmKFwicGFzdGVcIix0aGlzLmhhbmRlcil9fSl9KSxiKFwicnVudGltZS9odG1sNS9maWxlcGlja2VyXCIsW1wiYmFzZVwiLFwicnVudGltZS9odG1sNS9ydW50aW1lXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9YS4kO3JldHVybiBiLnJlZ2lzdGVyKFwiRmlsZVBpY2tlclwiLHtpbml0OmZ1bmN0aW9uKCl7dmFyIGEsYixkLGUsZj10aGlzLmdldFJ1bnRpbWUoKS5nZXRDb250YWluZXIoKSxnPXRoaXMsaD1nLm93bmVyLGk9Zy5vcHRpb25zLGo9Yyhkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIikpLGs9Yyhkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIikpO2lmKGsuYXR0cihcInR5cGVcIixcImZpbGVcIiksay5hdHRyKFwibmFtZVwiLGkubmFtZSksay5hZGRDbGFzcyhcIndlYnVwbG9hZGVyLWVsZW1lbnQtaW52aXNpYmxlXCIpLGoub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ay50cmlnZ2VyKFwiY2xpY2tcIil9KSxqLmNzcyh7b3BhY2l0eTowLHdpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIixkaXNwbGF5OlwiYmxvY2tcIixjdXJzb3I6XCJwb2ludGVyXCIsYmFja2dyb3VuZDpcIiNmZmZmZmZcIn0pLGkubXVsdGlwbGUmJmsuYXR0cihcIm11bHRpcGxlXCIsXCJtdWx0aXBsZVwiKSxpLmFjY2VwdCYmaS5hY2NlcHQubGVuZ3RoPjApe2ZvcihhPVtdLGI9MCxkPWkuYWNjZXB0Lmxlbmd0aDtkPmI7YisrKWEucHVzaChpLmFjY2VwdFtiXS5taW1lVHlwZXMpO2suYXR0cihcImFjY2VwdFwiLGEuam9pbihcIixcIikpfWYuYXBwZW5kKGspLGYuYXBwZW5kKGopLGU9ZnVuY3Rpb24oYSl7aC50cmlnZ2VyKGEudHlwZSl9LGsub24oXCJjaGFuZ2VcIixmdW5jdGlvbihhKXt2YXIgYixkPWFyZ3VtZW50cy5jYWxsZWU7Zy5maWxlcz1hLnRhcmdldC5maWxlcyxiPXRoaXMuY2xvbmVOb2RlKCEwKSx0aGlzLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGIsdGhpcyksay5vZmYoKSxrPWMoYikub24oXCJjaGFuZ2VcIixkKS5vbihcIm1vdXNlZW50ZXIgbW91c2VsZWF2ZVwiLGUpLGgudHJpZ2dlcihcImNoYW5nZVwiKX0pLGoub24oXCJtb3VzZWVudGVyIG1vdXNlbGVhdmVcIixlKX0sZ2V0RmlsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxlc30sZGVzdHJveTpmdW5jdGlvbigpe319KX0pLGIoXCJydW50aW1lL2h0bWw1L3V0aWxcIixbXCJiYXNlXCJdLGZ1bmN0aW9uKGIpe3ZhciBjPWEuY3JlYXRlT2JqZWN0VVJMJiZhfHxhLlVSTCYmVVJMLnJldm9rZU9iamVjdFVSTCYmVVJMfHxhLndlYmtpdFVSTCxkPWIubm9vcCxlPWQ7cmV0dXJuIGMmJihkPWZ1bmN0aW9uKCl7cmV0dXJuIGMuY3JlYXRlT2JqZWN0VVJMLmFwcGx5KGMsYXJndW1lbnRzKX0sZT1mdW5jdGlvbigpe3JldHVybiBjLnJldm9rZU9iamVjdFVSTC5hcHBseShjLGFyZ3VtZW50cyl9KSx7Y3JlYXRlT2JqZWN0VVJMOmQscmV2b2tlT2JqZWN0VVJMOmUsZGF0YVVSTDJCbG9iOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZztmb3IoZz1hLnNwbGl0KFwiLFwiKSxiPX5nWzBdLmluZGV4T2YoXCJiYXNlNjRcIik/YXRvYihnWzFdKTpkZWNvZGVVUklDb21wb25lbnQoZ1sxXSksZD1uZXcgQXJyYXlCdWZmZXIoYi5sZW5ndGgpLGM9bmV3IFVpbnQ4QXJyYXkoZCksZT0wO2U8Yi5sZW5ndGg7ZSsrKWNbZV09Yi5jaGFyQ29kZUF0KGUpO3JldHVybiBmPWdbMF0uc3BsaXQoXCI6XCIpWzFdLnNwbGl0KFwiO1wiKVswXSx0aGlzLmFycmF5QnVmZmVyVG9CbG9iKGQsZil9LGRhdGFVUkwyQXJyYXlCdWZmZXI6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU7Zm9yKGU9YS5zcGxpdChcIixcIiksYj1+ZVswXS5pbmRleE9mKFwiYmFzZTY0XCIpP2F0b2IoZVsxXSk6ZGVjb2RlVVJJQ29tcG9uZW50KGVbMV0pLGM9bmV3IFVpbnQ4QXJyYXkoYi5sZW5ndGgpLGQ9MDtkPGIubGVuZ3RoO2QrKyljW2RdPWIuY2hhckNvZGVBdChkKTtyZXR1cm4gYy5idWZmZXJ9LGFycmF5QnVmZmVyVG9CbG9iOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZT1hLkJsb2JCdWlsZGVyfHxhLldlYktpdEJsb2JCdWlsZGVyO3JldHVybiBlPyhkPW5ldyBlLGQuYXBwZW5kKGIpLGQuZ2V0QmxvYihjKSk6bmV3IEJsb2IoW2JdLGM/e3R5cGU6Y306e30pfSxjYW52YXNUb0RhdGFVcmw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnRvRGF0YVVSTChiLGMvMTAwKX0scGFyc2VNZXRhOmZ1bmN0aW9uKGEsYil7YighMSx7fSl9LHVwZGF0ZUltYWdlSGVhZDpmdW5jdGlvbihhKXtyZXR1cm4gYX19fSksYihcInJ1bnRpbWUvaHRtbDUvaW1hZ2VtZXRhXCIsW1wicnVudGltZS9odG1sNS91dGlsXCJdLGZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBiPXtwYXJzZXJzOns2NTUwNTpbXX0sbWF4TWV0YURhdGFTaXplOjI2MjE0NCxwYXJzZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1uZXcgRmlsZVJlYWRlcjtkLm9ubG9hZD1mdW5jdGlvbigpe2IoITEsYy5fcGFyc2UodGhpcy5yZXN1bHQpKSxkPWQub25sb2FkPWQub25lcnJvcj1udWxsfSxkLm9uZXJyb3I9ZnVuY3Rpb24oYSl7YihhLm1lc3NhZ2UpLGQ9ZC5vbmxvYWQ9ZC5vbmVycm9yPW51bGx9LGE9YS5zbGljZSgwLGMubWF4TWV0YURhdGFTaXplKSxkLnJlYWRBc0FycmF5QnVmZmVyKGEuZ2V0U291cmNlKCkpfSxfcGFyc2U6ZnVuY3Rpb24oYSxjKXtpZighKGEuYnl0ZUxlbmd0aDw2KSl7dmFyIGQsZSxmLGcsaD1uZXcgRGF0YVZpZXcoYSksaT0yLGo9aC5ieXRlTGVuZ3RoLTQsaz1pLGw9e307aWYoNjU0OTY9PT1oLmdldFVpbnQxNigwKSl7Zm9yKDtqPmkmJihkPWguZ2V0VWludDE2KGkpLGQ+PTY1NTA0JiY2NTUxOT49ZHx8NjU1MzQ9PT1kKSYmKGU9aC5nZXRVaW50MTYoaSsyKSsyLCEoaStlPmguYnl0ZUxlbmd0aCkpOyl7aWYoZj1iLnBhcnNlcnNbZF0sIWMmJmYpZm9yKGc9MDtnPGYubGVuZ3RoO2crPTEpZltnXS5jYWxsKGIsaCxpLGUsbCk7aSs9ZSxrPWl9az42JiYobC5pbWFnZUhlYWQ9YS5zbGljZT9hLnNsaWNlKDIsayk6bmV3IFVpbnQ4QXJyYXkoYSkuc3ViYXJyYXkoMixrKSl9cmV0dXJuIGx9fSx1cGRhdGVJbWFnZUhlYWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzLl9wYXJzZShhLCEwKTtyZXR1cm4gZT0yLGYuaW1hZ2VIZWFkJiYoZT0yK2YuaW1hZ2VIZWFkLmJ5dGVMZW5ndGgpLGQ9YS5zbGljZT9hLnNsaWNlKGUpOm5ldyBVaW50OEFycmF5KGEpLnN1YmFycmF5KGUpLGM9bmV3IFVpbnQ4QXJyYXkoYi5ieXRlTGVuZ3RoKzIrZC5ieXRlTGVuZ3RoKSxjWzBdPTI1NSxjWzFdPTIxNixjLnNldChuZXcgVWludDhBcnJheShiKSwyKSxjLnNldChuZXcgVWludDhBcnJheShkKSxiLmJ5dGVMZW5ndGgrMiksYy5idWZmZXJ9fSxhLnBhcnNlTWV0YT1mdW5jdGlvbigpe3JldHVybiBiLnBhcnNlLmFwcGx5KGIsYXJndW1lbnRzKX0sYS51cGRhdGVJbWFnZUhlYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYi51cGRhdGVJbWFnZUhlYWQuYXBwbHkoYixhcmd1bWVudHMpfSxifSksYihcInJ1bnRpbWUvaHRtbDUvaW1hZ2VtZXRhL2V4aWZcIixbXCJiYXNlXCIsXCJydW50aW1lL2h0bWw1L2ltYWdlbWV0YVwiXSxmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3JldHVybiBjLkV4aWZNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sYy5FeGlmTWFwLnByb3RvdHlwZS5tYXA9e09yaWVudGF0aW9uOjI3NH0sYy5FeGlmTWFwLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV18fHRoaXNbdGhpcy5tYXBbYV1dfSxjLmV4aWZUYWdUeXBlcz17MTp7Z2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5nZXRVaW50OChiKX0sc2l6ZToxfSwyOntnZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGEuZ2V0VWludDgoYikpfSxzaXplOjEsYXNjaWk6ITB9LDM6e2dldFZhbHVlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5nZXRVaW50MTYoYixjKX0sc2l6ZToyfSw0OntnZXRWYWx1ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEuZ2V0VWludDMyKGIsYyl9LHNpemU6NH0sNTp7Z2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLmdldFVpbnQzMihiLGMpL2EuZ2V0VWludDMyKGIrNCxjKX0sc2l6ZTo4fSw5OntnZXRWYWx1ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEuZ2V0SW50MzIoYixjKX0sc2l6ZTo0fSwxMDp7Z2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLmdldEludDMyKGIsYykvYS5nZXRJbnQzMihiKzQsYyl9LHNpemU6OH19LGMuZXhpZlRhZ1R5cGVzWzddPWMuZXhpZlRhZ1R5cGVzWzFdLGMuZ2V0RXhpZlZhbHVlPWZ1bmN0aW9uKGIsZCxlLGYsZyxoKXt2YXIgaSxqLGssbCxtLG4sbz1jLmV4aWZUYWdUeXBlc1tmXTtpZighbylyZXR1cm4gdm9pZCBhLmxvZyhcIkludmFsaWQgRXhpZiBkYXRhOiBJbnZhbGlkIHRhZyB0eXBlLlwiKTtpZihpPW8uc2l6ZSpnLGo9aT40P2QrYi5nZXRVaW50MzIoZSs4LGgpOmUrOCxqK2k+Yi5ieXRlTGVuZ3RoKXJldHVybiB2b2lkIGEubG9nKFwiSW52YWxpZCBFeGlmIGRhdGE6IEludmFsaWQgZGF0YSBvZmZzZXQuXCIpO2lmKDE9PT1nKXJldHVybiBvLmdldFZhbHVlKGIsaixoKTtmb3Ioaz1bXSxsPTA7Zz5sO2wrPTEpa1tsXT1vLmdldFZhbHVlKGIsaitsKm8uc2l6ZSxoKTtpZihvLmFzY2lpKXtmb3IobT1cIlwiLGw9MDtsPGsubGVuZ3RoJiYobj1rW2xdLFwiXFx4MDBcIiE9PW4pO2wrPTEpbSs9bjtyZXR1cm4gbX1yZXR1cm4ga30sYy5wYXJzZUV4aWZUYWc9ZnVuY3Rpb24oYSxiLGQsZSxmKXt2YXIgZz1hLmdldFVpbnQxNihkLGUpO2YuZXhpZltnXT1jLmdldEV4aWZWYWx1ZShhLGIsZCxhLmdldFVpbnQxNihkKzIsZSksYS5nZXRVaW50MzIoZCs0LGUpLGUpfSxjLnBhcnNlRXhpZlRhZ3M9ZnVuY3Rpb24oYixjLGQsZSxmKXt2YXIgZyxoLGk7aWYoZCs2PmIuYnl0ZUxlbmd0aClyZXR1cm4gdm9pZCBhLmxvZyhcIkludmFsaWQgRXhpZiBkYXRhOiBJbnZhbGlkIGRpcmVjdG9yeSBvZmZzZXQuXCIpO2lmKGc9Yi5nZXRVaW50MTYoZCxlKSxoPWQrMisxMipnLGgrND5iLmJ5dGVMZW5ndGgpcmV0dXJuIHZvaWQgYS5sb2coXCJJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCBkaXJlY3Rvcnkgc2l6ZS5cIik7Zm9yKGk9MDtnPmk7aSs9MSl0aGlzLnBhcnNlRXhpZlRhZyhiLGMsZCsyKzEyKmksZSxmKTtyZXR1cm4gYi5nZXRVaW50MzIoaCxlKX0sYy5wYXJzZUV4aWZEYXRhPWZ1bmN0aW9uKGIsZCxlLGYpe3ZhciBnLGgsaT1kKzEwO2lmKDExNjU1MTkyMDY9PT1iLmdldFVpbnQzMihkKzQpKXtpZihpKzg+Yi5ieXRlTGVuZ3RoKXJldHVybiB2b2lkIGEubG9nKFwiSW52YWxpZCBFeGlmIGRhdGE6IEludmFsaWQgc2VnbWVudCBzaXplLlwiKTtpZigwIT09Yi5nZXRVaW50MTYoZCs4KSlyZXR1cm4gdm9pZCBhLmxvZyhcIkludmFsaWQgRXhpZiBkYXRhOiBNaXNzaW5nIGJ5dGUgYWxpZ25tZW50IG9mZnNldC5cIik7c3dpdGNoKGIuZ2V0VWludDE2KGkpKXtjYXNlIDE4NzYxOmc9ITA7YnJlYWs7Y2FzZSAxOTc4OTpnPSExO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIHZvaWQgYS5sb2coXCJJbnZhbGlkIEV4aWYgZGF0YTogSW52YWxpZCBieXRlIGFsaWdubWVudCBtYXJrZXIuXCIpfWlmKDQyIT09Yi5nZXRVaW50MTYoaSsyLGcpKXJldHVybiB2b2lkIGEubG9nKFwiSW52YWxpZCBFeGlmIGRhdGE6IE1pc3NpbmcgVElGRiBtYXJrZXIuXCIpO2g9Yi5nZXRVaW50MzIoaSs0LGcpLGYuZXhpZj1uZXcgYy5FeGlmTWFwLGg9Yy5wYXJzZUV4aWZUYWdzKGIsaSxpK2gsZyxmKX19LGIucGFyc2Vyc1s2NTUwNV0ucHVzaChjLnBhcnNlRXhpZkRhdGEpLGN9KSxiKFwicnVudGltZS9odG1sNS9qcGVnZW5jb2RlclwiLFtdLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYj1bMTYsMTEsMTAsMTYsMjQsNDAsNTEsNjEsMTIsMTIsMTQsMTksMjYsNTgsNjAsNTUsMTQsMTMsMTYsMjQsNDAsNTcsNjksNTYsMTQsMTcsMjIsMjksNTEsODcsODAsNjIsMTgsMjIsMzcsNTYsNjgsMTA5LDEwMyw3NywyNCwzNSw1NSw2NCw4MSwxMDQsMTEzLDkyLDQ5LDY0LDc4LDg3LDEwMywxMjEsMTIwLDEwMSw3Miw5Miw5NSw5OCwxMTIsMTAwLDEwMyw5OV0sYz0wOzY0PmM7YysrKXt2YXIgZD15KChiW2NdKmErNTApLzEwMCk7MT5kP2Q9MTpkPjI1NSYmKGQ9MjU1KSx6W1BbY11dPWR9Zm9yKHZhciBlPVsxNywxOCwyNCw0Nyw5OSw5OSw5OSw5OSwxOCwyMSwyNiw2Niw5OSw5OSw5OSw5OSwyNCwyNiw1Niw5OSw5OSw5OSw5OSw5OSw0Nyw2Niw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OSw5OV0sZj0wOzY0PmY7ZisrKXt2YXIgZz15KChlW2ZdKmErNTApLzEwMCk7MT5nP2c9MTpnPjI1NSYmKGc9MjU1KSxBW1BbZl1dPWd9Zm9yKHZhciBoPVsxLDEuMzg3MDM5ODQ1LDEuMzA2NTYyOTY1LDEuMTc1ODc1NjAyLDEsLjc4NTY5NDk1OCwuNTQxMTk2MSwuMjc1ODk5Mzc5XSxpPTAsaj0wOzg+ajtqKyspZm9yKHZhciBrPTA7OD5rO2srKylCW2ldPTEvKHpbUFtpXV0qaFtqXSpoW2tdKjgpLENbaV09MS8oQVtQW2ldXSpoW2pdKmhba10qOCksaSsrfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGM9MCxkPTAsZT1uZXcgQXJyYXksZj0xOzE2Pj1mO2YrKyl7Zm9yKHZhciBnPTE7Zzw9YVtmXTtnKyspZVtiW2RdXT1bXSxlW2JbZF1dWzBdPWMsZVtiW2RdXVsxXT1mLGQrKyxjKys7Yyo9Mn1yZXR1cm4gZX1mdW5jdGlvbiBkKCl7dD1jKFEsUiksdT1jKFUsViksdj1jKFMsVCksdz1jKFcsWCl9ZnVuY3Rpb24gZSgpe2Zvcih2YXIgYT0xLGI9MixjPTE7MTU+PWM7YysrKXtmb3IodmFyIGQ9YTtiPmQ7ZCsrKUVbMzI3NjcrZF09YyxEWzMyNzY3K2RdPVtdLERbMzI3NjcrZF1bMV09YyxEWzMyNzY3K2RdWzBdPWQ7Zm9yKHZhciBlPS0oYi0xKTstYT49ZTtlKyspRVszMjc2NytlXT1jLERbMzI3NjcrZV09W10sRFszMjc2NytlXVsxXT1jLERbMzI3NjcrZV1bMF09Yi0xK2U7YTw8PTEsYjw8PTF9fWZ1bmN0aW9uIGYoKXtmb3IodmFyIGE9MDsyNTY+YTthKyspT1thXT0xOTU5NSphLE9bYSsyNTY+PjBdPTM4NDcwKmEsT1thKzUxMj4+MF09NzQ3MSphKzMyNzY4LE9bYSs3Njg+PjBdPS0xMTA1OSphLE9bYSsxMDI0Pj4wXT0tMjE3MDkqYSxPW2ErMTI4MD4+MF09MzI3NjgqYSs4NDIxMzc1LE9bYSsxNTM2Pj4wXT0tMjc0MzkqYSxPW2ErMTc5Mj4+MF09LTUzMjkqYX1mdW5jdGlvbiBnKGEpe2Zvcih2YXIgYj1hWzBdLGM9YVsxXS0xO2M+PTA7KWImMTw8YyYmKEl8PTE8PEopLGMtLSxKLS0sMD5KJiYoMjU1PT1JPyhoKDI1NSksaCgwKSk6aChJKSxKPTcsST0wKX1mdW5jdGlvbiBoKGEpe0gucHVzaChOW2FdKX1mdW5jdGlvbiBpKGEpe2goYT4+OCYyNTUpLGgoMjU1JmEpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqLGssbD0wLG09OCxuPTY0O2ZvcihrPTA7bT5rOysrayl7Yz1hW2xdLGQ9YVtsKzFdLGU9YVtsKzJdLGY9YVtsKzNdLGc9YVtsKzRdLGg9YVtsKzVdLGk9YVtsKzZdLGo9YVtsKzddO3ZhciBvPWMraixwPWMtaixxPWQraSxyPWQtaSxzPWUraCx0PWUtaCx1PWYrZyx2PWYtZyx3PW8rdSx4PW8tdSx5PXErcyx6PXEtczthW2xdPXcreSxhW2wrNF09dy15O3ZhciBBPS43MDcxMDY3ODEqKHoreCk7YVtsKzJdPXgrQSxhW2wrNl09eC1BLHc9dit0LHk9dCtyLHo9citwO3ZhciBCPS4zODI2ODM0MzMqKHcteiksQz0uNTQxMTk2MSp3K0IsRD0xLjMwNjU2Mjk2NSp6K0IsRT0uNzA3MTA2NzgxKnksRz1wK0UsSD1wLUU7YVtsKzVdPUgrQyxhW2wrM109SC1DLGFbbCsxXT1HK0QsYVtsKzddPUctRCxsKz04fWZvcihsPTAsaz0wO20+azsrK2spe2M9YVtsXSxkPWFbbCs4XSxlPWFbbCsxNl0sZj1hW2wrMjRdLGc9YVtsKzMyXSxoPWFbbCs0MF0saT1hW2wrNDhdLGo9YVtsKzU2XTt2YXIgST1jK2osSj1jLWosSz1kK2ksTD1kLWksTT1lK2gsTj1lLWgsTz1mK2csUD1mLWcsUT1JK08sUj1JLU8sUz1LK00sVD1LLU07YVtsXT1RK1MsYVtsKzMyXT1RLVM7dmFyIFU9LjcwNzEwNjc4MSooVCtSKTthW2wrMTZdPVIrVSxhW2wrNDhdPVItVSxRPVArTixTPU4rTCxUPUwrSjt2YXIgVj0uMzgyNjgzNDMzKihRLVQpLFc9LjU0MTE5NjEqUStWLFg9MS4zMDY1NjI5NjUqVCtWLFk9LjcwNzEwNjc4MSpTLFo9SitZLCQ9Si1ZO2FbbCs0MF09JCtXLGFbbCsyNF09JC1XLGFbbCs4XT1aK1gsYVtsKzU2XT1aLVgsbCsrfXZhciBfO2ZvcihrPTA7bj5rOysraylfPWFba10qYltrXSxGW2tdPV8+MD9fKy41fDA6Xy0uNXwwO3JldHVybiBGfWZ1bmN0aW9uIGsoKXtpKDY1NTA0KSxpKDE2KSxoKDc0KSxoKDcwKSxoKDczKSxoKDcwKSxoKDApLGgoMSksaCgxKSxoKDApLGkoMSksaSgxKSxoKDApLGgoMCl9ZnVuY3Rpb24gbChhLGIpe2koNjU0NzIpLGkoMTcpLGgoOCksaShiKSxpKGEpLGgoMyksaCgxKSxoKDE3KSxoKDApLGgoMiksaCgxNyksaCgxKSxoKDMpLGgoMTcpLGgoMSl9ZnVuY3Rpb24gbSgpe2koNjU0OTkpLGkoMTMyKSxoKDApO2Zvcih2YXIgYT0wOzY0PmE7YSsrKWgoelthXSk7aCgxKTtmb3IodmFyIGI9MDs2ND5iO2IrKyloKEFbYl0pfWZ1bmN0aW9uIG4oKXtpKDY1NDc2KSxpKDQxOCksaCgwKTtmb3IodmFyIGE9MDsxNj5hO2ErKyloKFFbYSsxXSk7Zm9yKHZhciBiPTA7MTE+PWI7YisrKWgoUltiXSk7aCgxNik7Zm9yKHZhciBjPTA7MTY+YztjKyspaChTW2MrMV0pO2Zvcih2YXIgZD0wOzE2MT49ZDtkKyspaChUW2RdKTtoKDEpO2Zvcih2YXIgZT0wOzE2PmU7ZSsrKWgoVVtlKzFdKTtmb3IodmFyIGY9MDsxMT49ZjtmKyspaChWW2ZdKTtoKDE3KTtmb3IodmFyIGc9MDsxNj5nO2crKyloKFdbZysxXSk7Zm9yKHZhciBqPTA7MTYxPj1qO2orKyloKFhbal0pfWZ1bmN0aW9uIG8oKXtpKDY1NDk4KSxpKDEyKSxoKDMpLGgoMSksaCgwKSxoKDIpLGgoMTcpLGgoMyksaCgxNyksaCgwKSxoKDYzKSxoKDApfWZ1bmN0aW9uIHAoYSxiLGMsZCxlKXtmb3IodmFyIGYsaD1lWzBdLGk9ZVsyNDBdLGs9MTYsbD02MyxtPTY0LG49aihhLGIpLG89MDttPm87KytvKUdbUFtvXV09bltvXTt2YXIgcD1HWzBdLWM7Yz1HWzBdLDA9PXA/ZyhkWzBdKTooZj0zMjc2NytwLGcoZFtFW2ZdXSksZyhEW2ZdKSk7Zm9yKHZhciBxPTYzO3E+MCYmMD09R1txXTtxLS0pO2lmKDA9PXEpcmV0dXJuIGcoaCksYztmb3IodmFyIHIscz0xO3E+PXM7KXtmb3IodmFyIHQ9czswPT1HW3NdJiZxPj1zOysrcyk7dmFyIHU9cy10O2lmKHU+PWspe3I9dT4+NDtmb3IodmFyIHY9MTtyPj12OysrdilnKGkpO3U9MTUmdX1mPTMyNzY3K0dbc10sZyhlWyh1PDw0KStFW2ZdXSksZyhEW2ZdKSxzKyt9cmV0dXJuIHEhPWwmJmcoaCksY31mdW5jdGlvbiBxKCl7Zm9yKHZhciBhPVN0cmluZy5mcm9tQ2hhckNvZGUsYj0wOzI1Nj5iO2IrKylOW2JdPWEoYil9ZnVuY3Rpb24gcihhKXtpZigwPj1hJiYoYT0xKSxhPjEwMCYmKGE9MTAwKSx4IT1hKXt2YXIgYz0wO2M9TWF0aC5mbG9vcig1MD5hPzVlMy9hOjIwMC0yKmEpLGIoYykseD1hfX1mdW5jdGlvbiBzKCl7YXx8KGE9NTApLHEoKSxkKCksZSgpLGYoKSxyKGEpfXZhciB0LHUsdix3LHgseT0oTWF0aC5yb3VuZCxNYXRoLmZsb29yKSx6PW5ldyBBcnJheSg2NCksQT1uZXcgQXJyYXkoNjQpLEI9bmV3IEFycmF5KDY0KSxDPW5ldyBBcnJheSg2NCksRD1uZXcgQXJyYXkoNjU1MzUpLEU9bmV3IEFycmF5KDY1NTM1KSxGPW5ldyBBcnJheSg2NCksRz1uZXcgQXJyYXkoNjQpLEg9W10sST0wLEo9NyxLPW5ldyBBcnJheSg2NCksTD1uZXcgQXJyYXkoNjQpLE09bmV3IEFycmF5KDY0KSxOPW5ldyBBcnJheSgyNTYpLE89bmV3IEFycmF5KDIwNDgpLFA9WzAsMSw1LDYsMTQsMTUsMjcsMjgsMiw0LDcsMTMsMTYsMjYsMjksNDIsMyw4LDEyLDE3LDI1LDMwLDQxLDQzLDksMTEsMTgsMjQsMzEsNDAsNDQsNTMsMTAsMTksMjMsMzIsMzksNDUsNTIsNTQsMjAsMjIsMzMsMzgsNDYsNTEsNTUsNjAsMjEsMzQsMzcsNDcsNTAsNTYsNTksNjEsMzUsMzYsNDgsNDksNTcsNTgsNjIsNjNdLFE9WzAsMCwxLDUsMSwxLDEsMSwxLDEsMCwwLDAsMCwwLDAsMF0sUj1bMCwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMV0sUz1bMCwwLDIsMSwzLDMsMiw0LDMsNSw1LDQsNCwwLDAsMSwxMjVdLFQ9WzEsMiwzLDAsNCwxNyw1LDE4LDMzLDQ5LDY1LDYsMTksODEsOTcsNywzNCwxMTMsMjAsNTAsMTI5LDE0NSwxNjEsOCwzNSw2NiwxNzcsMTkzLDIxLDgyLDIwOSwyNDAsMzYsNTEsOTgsMTE0LDEzMCw5LDEwLDIyLDIzLDI0LDI1LDI2LDM3LDM4LDM5LDQwLDQxLDQyLDUyLDUzLDU0LDU1LDU2LDU3LDU4LDY3LDY4LDY5LDcwLDcxLDcyLDczLDc0LDgzLDg0LDg1LDg2LDg3LDg4LDg5LDkwLDk5LDEwMCwxMDEsMTAyLDEwMywxMDQsMTA1LDEwNiwxMTUsMTE2LDExNywxMTgsMTE5LDEyMCwxMjEsMTIyLDEzMSwxMzIsMTMzLDEzNCwxMzUsMTM2LDEzNywxMzgsMTQ2LDE0NywxNDgsMTQ5LDE1MCwxNTEsMTUyLDE1MywxNTQsMTYyLDE2MywxNjQsMTY1LDE2NiwxNjcsMTY4LDE2OSwxNzAsMTc4LDE3OSwxODAsMTgxLDE4MiwxODMsMTg0LDE4NSwxODYsMTk0LDE5NSwxOTYsMTk3LDE5OCwxOTksMjAwLDIwMSwyMDIsMjEwLDIxMSwyMTIsMjEzLDIxNCwyMTUsMjE2LDIxNywyMTgsMjI1LDIyNiwyMjcsMjI4LDIyOSwyMzAsMjMxLDIzMiwyMzMsMjM0LDI0MSwyNDIsMjQzLDI0NCwyNDUsMjQ2LDI0NywyNDgsMjQ5LDI1MF0sVT1bMCwwLDMsMSwxLDEsMSwxLDEsMSwxLDEsMCwwLDAsMCwwXSxWPVswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExXSxXPVswLDAsMiwxLDIsNCw0LDMsNCw3LDUsNCw0LDAsMSwyLDExOV0sWD1bMCwxLDIsMywxNyw0LDUsMzMsNDksNiwxOCw2NSw4MSw3LDk3LDExMywxOSwzNCw1MCwxMjksOCwyMCw2NiwxNDUsMTYxLDE3NywxOTMsOSwzNSw1MSw4MiwyNDAsMjEsOTgsMTE0LDIwOSwxMCwyMiwzNiw1MiwyMjUsMzcsMjQxLDIzLDI0LDI1LDI2LDM4LDM5LDQwLDQxLDQyLDUzLDU0LDU1LDU2LDU3LDU4LDY3LDY4LDY5LDcwLDcxLDcyLDczLDc0LDgzLDg0LDg1LDg2LDg3LDg4LDg5LDkwLDk5LDEwMCwxMDEsMTAyLDEwMywxMDQsMTA1LDEwNiwxMTUsMTE2LDExNywxMTgsMTE5LDEyMCwxMjEsMTIyLDEzMCwxMzEsMTMyLDEzMywxMzQsMTM1LDEzNiwxMzcsMTM4LDE0NiwxNDcsMTQ4LDE0OSwxNTAsMTUxLDE1MiwxNTMsMTU0LDE2MiwxNjMsMTY0LDE2NSwxNjYsMTY3LDE2OCwxNjksMTcwLDE3OCwxNzksMTgwLDE4MSwxODIsMTgzLDE4NCwxODUsMTg2LDE5NCwxOTUsMTk2LDE5NywxOTgsMTk5LDIwMCwyMDEsMjAyLDIxMCwyMTEsMjEyLDIxMywyMTQsMjE1LDIxNiwyMTcsMjE4LDIyNiwyMjcsMjI4LDIyOSwyMzAsMjMxLDIzMiwyMzMsMjM0LDI0MiwyNDMsMjQ0LDI0NSwyNDYsMjQ3LDI0OCwyNDksMjUwXTt0aGlzLmVuY29kZT1mdW5jdGlvbihhLGIpe2ImJnIoYiksSD1uZXcgQXJyYXksST0wLEo9NyxpKDY1NDk2KSxrKCksbSgpLGwoYS53aWR0aCxhLmhlaWdodCksbigpLG8oKTt2YXIgYz0wLGQ9MCxlPTA7ST0wLEo9Nyx0aGlzLmVuY29kZS5kaXNwbGF5TmFtZT1cIl9lbmNvZGVfXCI7Zm9yKHZhciBmLGgsaixxLHMseCx5LHosQSxEPWEuZGF0YSxFPWEud2lkdGgsRj1hLmhlaWdodCxHPTQqRSxOPTA7Rj5OOyl7Zm9yKGY9MDtHPmY7KXtmb3Iocz1HKk4rZix4PXMseT0tMSx6PTAsQT0wOzY0PkE7QSsrKXo9QT4+Myx5PTQqKDcmQSkseD1zK3oqRyt5LE4rej49RiYmKHgtPUcqKE4rMSt6LUYpKSxmK3k+PUcmJih4LT1mK3ktRys0KSxoPURbeCsrXSxqPURbeCsrXSxxPURbeCsrXSxLW0FdPShPW2hdK09baisyNTY+PjBdK09bcSs1MTI+PjBdPj4xNiktMTI4LExbQV09KE9baCs3Njg+PjBdK09baisxMDI0Pj4wXStPW3ErMTI4MD4+MF0+PjE2KS0xMjgsTVtBXT0oT1toKzEyODA+PjBdK09baisxNTM2Pj4wXStPW3ErMTc5Mj4+MF0+PjE2KS0xMjg7Yz1wKEssQixjLHQsdiksZD1wKEwsQyxkLHUsdyksZT1wKE0sQyxlLHUsdyksZis9MzJ9Tis9OH1pZihKPj0wKXt2YXIgUD1bXTtQWzFdPUorMSxQWzBdPSgxPDxKKzEpLTEsZyhQKX1pKDY1NDk3KTt2YXIgUT1cImRhdGE6aW1hZ2UvanBlZztiYXNlNjQsXCIrYnRvYShILmpvaW4oXCJcIikpO3JldHVybiBIPVtdLFF9LHMoKX1yZXR1cm4gYS5lbmNvZGU9ZnVuY3Rpb24oYixjKXt2YXIgZD1uZXcgYShjKTtyZXR1cm4gZC5lbmNvZGUoYil9LGF9KSxiKFwicnVudGltZS9odG1sNS9hbmRyb2lkcGF0Y2hcIixbXCJydW50aW1lL2h0bWw1L3V0aWxcIixcInJ1bnRpbWUvaHRtbDUvanBlZ2VuY29kZXJcIixcImJhc2VcIl0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9YS5jYW52YXNUb0RhdGFVcmw7YS5jYW52YXNUb0RhdGFVcmw9ZnVuY3Rpb24oYSxmLGcpe3ZhciBoLGksaixrLGw7cmV0dXJuIGMub3MuYW5kcm9pZD8oXCJpbWFnZS9qcGVnXCI9PT1mJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgZCYmKGs9ZS5hcHBseShudWxsLGFyZ3VtZW50cyksbD1rLnNwbGl0KFwiLFwiKSxrPX5sWzBdLmluZGV4T2YoXCJiYXNlNjRcIik/YXRvYihsWzFdKTpkZWNvZGVVUklDb21wb25lbnQobFsxXSksaz1rLnN1YnN0cmluZygwLDIpLGQ9MjU1PT09ay5jaGFyQ29kZUF0KDApJiYyMTY9PT1rLmNoYXJDb2RlQXQoMSkpLFwiaW1hZ2UvanBlZ1wiIT09Znx8ZD9lLmFwcGx5KG51bGwsYXJndW1lbnRzKTooaT1hLndpZHRoLGo9YS5oZWlnaHQsaD1hLmdldENvbnRleHQoXCIyZFwiKSxiLmVuY29kZShoLmdldEltYWdlRGF0YSgwLDAsaSxqKSxnKSkpOmUuYXBwbHkobnVsbCxhcmd1bWVudHMpfX0pLGIoXCJydW50aW1lL2h0bWw1L2ltYWdlXCIsW1wiYmFzZVwiLFwicnVudGltZS9odG1sNS9ydW50aW1lXCIsXCJydW50aW1lL2h0bWw1L3V0aWxcIl0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBRC9BQ3dBQUFBQUFRQUJBQUFDQURzJTNEXCI7cmV0dXJuIGIucmVnaXN0ZXIoXCJJbWFnZVwiLHttb2RpZmllZDohMSxpbml0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPW5ldyBJbWFnZTtiLm9ubG9hZD1mdW5jdGlvbigpe2EuX2luZm89e3R5cGU6YS50eXBlLHdpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0fSxhLl9tZXRhc3x8XCJpbWFnZS9qcGVnXCIhPT1hLnR5cGU/YS5vd25lci50cmlnZ2VyKFwibG9hZFwiKTpjLnBhcnNlTWV0YShhLl9ibG9iLGZ1bmN0aW9uKGIsYyl7YS5fbWV0YXM9YyxhLm93bmVyLnRyaWdnZXIoXCJsb2FkXCIpfSl9LGIub25lcnJvcj1mdW5jdGlvbigpe2Eub3duZXIudHJpZ2dlcihcImVycm9yXCIpfSxhLl9pbWc9Yn0sbG9hZEZyb21CbG9iOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsZD1iLl9pbWc7Yi5fYmxvYj1hLGIudHlwZT1hLnR5cGUsZC5zcmM9Yy5jcmVhdGVPYmplY3RVUkwoYS5nZXRTb3VyY2UoKSksYi5vd25lci5vbmNlKFwibG9hZFwiLGZ1bmN0aW9uKCl7Yy5yZXZva2VPYmplY3RVUkwoZC5zcmMpfSl9LHJlc2l6ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX2NhbnZhc3x8KHRoaXMuX2NhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKTt0aGlzLl9yZXNpemUodGhpcy5faW1nLGMsYSxiKSx0aGlzLl9ibG9iPW51bGwsdGhpcy5tb2RpZmllZD0hMCx0aGlzLm93bmVyLnRyaWdnZXIoXCJjb21wbGV0ZVwiKX0sZ2V0QXNCbG9iOmZ1bmN0aW9uKGEpe3ZhciBiLGQ9dGhpcy5fYmxvYixlPXRoaXMub3B0aW9ucztpZihhPWF8fHRoaXMudHlwZSx0aGlzLm1vZGlmaWVkfHx0aGlzLnR5cGUhPT1hKXtpZihiPXRoaXMuX2NhbnZhcyxcImltYWdlL2pwZWdcIj09PWEpe2lmKGQ9Yy5jYW52YXNUb0RhdGFVcmwoYixcImltYWdlL2pwZWdcIixlLnF1YWxpdHkpLGUucHJlc2VydmVIZWFkZXJzJiZ0aGlzLl9tZXRhcyYmdGhpcy5fbWV0YXMuaW1hZ2VIZWFkKXJldHVybiBkPWMuZGF0YVVSTDJBcnJheUJ1ZmZlcihkKSxkPWMudXBkYXRlSW1hZ2VIZWFkKGQsdGhpcy5fbWV0YXMuaW1hZ2VIZWFkKSxkPWMuYXJyYXlCdWZmZXJUb0Jsb2IoZCxhKX1lbHNlIGQ9Yy5jYW52YXNUb0RhdGFVcmwoYixhKTtkPWMuZGF0YVVSTDJCbG9iKGQpfXJldHVybiBkfSxnZXRBc0RhdGFVcmw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO3JldHVybiBhPWF8fHRoaXMudHlwZSxcImltYWdlL2pwZWdcIj09PWE/Yy5jYW52YXNUb0RhdGFVcmwodGhpcy5fY2FudmFzLGEsYi5xdWFsaXR5KTp0aGlzLl9jYW52YXMudG9EYXRhVVJMKGEpfSxnZXRPcmllbnRhdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXRhcyYmdGhpcy5fbWV0YXMuZXhpZiYmdGhpcy5fbWV0YXMuZXhpZi5nZXQoXCJPcmllbnRhdGlvblwiKXx8MX0saW5mbzpmdW5jdGlvbihhKXtyZXR1cm4gYT8odGhpcy5faW5mbz1hLHRoaXMpOnRoaXMuX2luZm99LG1ldGE6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KHRoaXMuX21ldGE9YSx0aGlzKTp0aGlzLl9tZXRhfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY2FudmFzO3RoaXMuX2ltZy5vbmxvYWQ9bnVsbCxhJiYoYS5nZXRDb250ZXh0KFwiMmRcIikuY2xlYXJSZWN0KDAsMCxhLndpZHRoLGEuaGVpZ2h0KSxhLndpZHRoPWEuaGVpZ2h0PTAsdGhpcy5fY2FudmFzPW51bGwpLHRoaXMuX2ltZy5zcmM9ZCx0aGlzLl9pbWc9dGhpcy5fYmxvYj1udWxsfSxfcmVzaXplOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj10aGlzLm9wdGlvbnMsaz1hLndpZHRoLGw9YS5oZWlnaHQsbT10aGlzLmdldE9yaWVudGF0aW9uKCk7fls1LDYsNyw4XS5pbmRleE9mKG0pJiYoY149ZCxkXj1jLGNePWQpLGU9TWF0aFtqLmNyb3A/XCJtYXhcIjpcIm1pblwiXShjL2ssZC9sKSxqLmFsbG93TWFnbmlmeXx8KGU9TWF0aC5taW4oMSxlKSksZj1rKmUsZz1sKmUsai5jcm9wPyhiLndpZHRoPWMsYi5oZWlnaHQ9ZCk6KGIud2lkdGg9ZixiLmhlaWdodD1nKSxoPShiLndpZHRoLWYpLzIsaT0oYi5oZWlnaHQtZykvMixqLnByZXNlcnZlSGVhZGVyc3x8dGhpcy5fcm90YXRlMk9yaWVudGFpb24oYixtKSx0aGlzLl9yZW5kZXJJbWFnZVRvQ2FudmFzKGIsYSxoLGksZixnKX0sX3JvdGF0ZTJPcmllbnRhaW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS53aWR0aCxkPWEuaGVpZ2h0LGU9YS5nZXRDb250ZXh0KFwiMmRcIik7c3dpdGNoKGIpe2Nhc2UgNTpjYXNlIDY6Y2FzZSA3OmNhc2UgODphLndpZHRoPWQsYS5oZWlnaHQ9Y31zd2l0Y2goYil7Y2FzZSAyOmUudHJhbnNsYXRlKGMsMCksZS5zY2FsZSgtMSwxKTticmVhaztjYXNlIDM6ZS50cmFuc2xhdGUoYyxkKSxlLnJvdGF0ZShNYXRoLlBJKTticmVhaztjYXNlIDQ6ZS50cmFuc2xhdGUoMCxkKSxlLnNjYWxlKDEsLTEpO2JyZWFrO2Nhc2UgNTplLnJvdGF0ZSguNSpNYXRoLlBJKSxlLnNjYWxlKDEsLTEpO2JyZWFrO2Nhc2UgNjplLnJvdGF0ZSguNSpNYXRoLlBJKSxlLnRyYW5zbGF0ZSgwLC1kKTticmVhaztjYXNlIDc6ZS5yb3RhdGUoLjUqTWF0aC5QSSksZS50cmFuc2xhdGUoYywtZCksZS5zY2FsZSgtMSwxKTticmVhaztjYXNlIDg6ZS5yb3RhdGUoLS41Kk1hdGguUEkpLGUudHJhbnNsYXRlKC1jLDApfX0sX3JlbmRlckltYWdlVG9DYW52YXM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZCxlLGYsZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGg9Zy5nZXRDb250ZXh0KFwiMmRcIiksaT0wLGo9YyxrPWM7Zm9yKGcud2lkdGg9MSxnLmhlaWdodD1jLGguZHJhd0ltYWdlKGEsMCwwKSxkPWguZ2V0SW1hZ2VEYXRhKDAsMCwxLGMpLmRhdGE7az5pOyllPWRbNCooay0xKSszXSwwPT09ZT9qPWs6aT1rLGs9aitpPj4xO3JldHVybiBmPWsvYywwPT09Zj8xOmZ9ZnVuY3Rpb24gYyhhKXt2YXIgYixjLGQ9YS5uYXR1cmFsV2lkdGgsZT1hLm5hdHVyYWxIZWlnaHQ7cmV0dXJuIGQqZT4xMDQ4NTc2PyhiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksYi53aWR0aD1iLmhlaWdodD0xLGM9Yi5nZXRDb250ZXh0KFwiMmRcIiksYy5kcmF3SW1hZ2UoYSwtZCsxLDApLDA9PT1jLmdldEltYWdlRGF0YSgwLDAsMSwxKS5kYXRhWzNdKTohMX1yZXR1cm4gYS5vcy5pb3M/YS5vcy5pb3M+PTc/ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe3ZhciBoPWMubmF0dXJhbFdpZHRoLGk9Yy5uYXR1cmFsSGVpZ2h0LGo9YihjLGgsaSk7cmV0dXJuIGEuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShjLDAsMCxoKmosaSpqLGQsZSxmLGcpfTpmdW5jdGlvbihhLGQsZSxmLGcsaCl7dmFyIGksaixrLGwsbSxuLG8scD1kLm5hdHVyYWxXaWR0aCxxPWQubmF0dXJhbEhlaWdodCxyPWEuZ2V0Q29udGV4dChcIjJkXCIpLHM9YyhkKSx0PVwiaW1hZ2UvanBlZ1wiPT09dGhpcy50eXBlLHU9MTAyNCx2PTAsdz0wO2ZvcihzJiYocC89MixxLz0yKSxyLnNhdmUoKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksaS53aWR0aD1pLmhlaWdodD11LGo9aS5nZXRDb250ZXh0KFwiMmRcIiksaz10P2IoZCxwLHEpOjEsbD1NYXRoLmNlaWwodSpnL3ApLG09TWF0aC5jZWlsKHUqaC9xL2spO3E+djspe2ZvcihuPTAsbz0wO3A+bjspai5jbGVhclJlY3QoMCwwLHUsdSksai5kcmF3SW1hZ2UoZCwtbiwtdiksci5kcmF3SW1hZ2UoaSwwLDAsdSx1LGUrbyxmK3csbCxtKSxuKz11LG8rPWw7dis9dSx3Kz1tfXIucmVzdG9yZSgpLGk9aj1udWxsfTpmdW5jdGlvbihhLGIsYyxkLGUsZil7YS5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKGIsYyxkLGUsZil9fSgpfSl9KSxiKFwicnVudGltZS9odG1sNS90cmFuc3BvcnRcIixbXCJiYXNlXCIsXCJydW50aW1lL2h0bWw1L3J1bnRpbWVcIl0sZnVuY3Rpb24oYSxiKXt2YXIgYz1hLm5vb3AsZD1hLiQ7cmV0dXJuIGIucmVnaXN0ZXIoXCJUcmFuc3BvcnRcIix7aW5pdDpmdW5jdGlvbigpe3RoaXMuX3N0YXR1cz0wLHRoaXMuX3Jlc3BvbnNlPW51bGx9LHNlbmQ6ZnVuY3Rpb24oKXt2YXIgYixjLGUsZj10aGlzLm93bmVyLGc9dGhpcy5vcHRpb25zLGg9dGhpcy5faW5pdEFqYXgoKSxpPWYuX2Jsb2Isaj1nLnNlcnZlcjtnLnNlbmRBc0JpbmFyeT8oais9KC9cXD8vLnRlc3Qoaik/XCImXCI6XCI/XCIpK2QucGFyYW0oZi5fZm9ybURhdGEpLGM9aS5nZXRTb3VyY2UoKSk6KGI9bmV3IEZvcm1EYXRhLGQuZWFjaChmLl9mb3JtRGF0YSxmdW5jdGlvbihhLGMpe2IuYXBwZW5kKGEsYyl9KSxiLmFwcGVuZChnLmZpbGVWYWwsaS5nZXRTb3VyY2UoKSxnLmZpbGVuYW1lfHxmLl9mb3JtRGF0YS5uYW1lfHxcIlwiKSksZy53aXRoQ3JlZGVudGlhbHMmJlwid2l0aENyZWRlbnRpYWxzXCJpbiBoPyhoLm9wZW4oZy5tZXRob2QsaiwhMCksaC53aXRoQ3JlZGVudGlhbHM9ITApOmgub3BlbihnLm1ldGhvZCxqKSx0aGlzLl9zZXRSZXF1ZXN0SGVhZGVyKGgsZy5oZWFkZXJzKSxjPyhoLm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIiksYS5vcy5hbmRyb2lkPyhlPW5ldyBGaWxlUmVhZGVyLGUub25sb2FkPWZ1bmN0aW9uKCl7aC5zZW5kKHRoaXMucmVzdWx0KSxlPWUub25sb2FkPW51bGx9LGUucmVhZEFzQXJyYXlCdWZmZXIoYykpOmguc2VuZChjKSk6aC5zZW5kKGIpfSxnZXRSZXNwb25zZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXNwb25zZX0sZ2V0UmVzcG9uc2VBc0pzb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFyc2VKc29uKHRoaXMuX3Jlc3BvbnNlKX0sZ2V0U3RhdHVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c30sYWJvcnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl94aHI7YSYmKGEudXBsb2FkLm9ucHJvZ3Jlc3M9YyxhLm9ucmVhZHlzdGF0ZWNoYW5nZT1jLGEuYWJvcnQoKSx0aGlzLl94aHI9YT1udWxsKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYWJvcnQoKX0sX2luaXRBamF4OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPW5ldyBYTUxIdHRwUmVxdWVzdCxkPXRoaXMub3B0aW9ucztyZXR1cm4hZC53aXRoQ3JlZGVudGlhbHN8fFwid2l0aENyZWRlbnRpYWxzXCJpbiBifHxcInVuZGVmaW5lZFwiPT10eXBlb2YgWERvbWFpblJlcXVlc3R8fChiPW5ldyBYRG9tYWluUmVxdWVzdCksYi51cGxvYWQub25wcm9ncmVzcz1mdW5jdGlvbihiKXt2YXIgYz0wO3JldHVybiBiLmxlbmd0aENvbXB1dGFibGUmJihjPWIubG9hZGVkL2IudG90YWwpLGEudHJpZ2dlcihcInByb2dyZXNzXCIsYyl9LGIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIDQ9PT1iLnJlYWR5U3RhdGU/KGIudXBsb2FkLm9ucHJvZ3Jlc3M9YyxiLm9ucmVhZHlzdGF0ZWNoYW5nZT1jLGEuX3hocj1udWxsLGEuX3N0YXR1cz1iLnN0YXR1cyxiLnN0YXR1cz49MjAwJiZiLnN0YXR1czwzMDA/KGEuX3Jlc3BvbnNlPWIucmVzcG9uc2VUZXh0LGEudHJpZ2dlcihcImxvYWRcIikpOmIuc3RhdHVzPj01MDAmJmIuc3RhdHVzPDYwMD8oYS5fcmVzcG9uc2U9Yi5yZXNwb25zZVRleHQsYS50cmlnZ2VyKFwiZXJyb3JcIixcInNlcnZlclwiKSk6YS50cmlnZ2VyKFwiZXJyb3JcIixhLl9zdGF0dXM/XCJodHRwXCI6XCJhYm9ydFwiKSk6dm9pZCAwfSxhLl94aHI9YixifSxfc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe2QuZWFjaChiLGZ1bmN0aW9uKGIsYyl7YS5zZXRSZXF1ZXN0SGVhZGVyKGIsYyl9KX0sX3BhcnNlSnNvbjpmdW5jdGlvbihhKXt2YXIgYjt0cnl7Yj1KU09OLnBhcnNlKGEpfWNhdGNoKGMpe2I9e319cmV0dXJuIGJ9fSl9KSxiKFwicnVudGltZS9mbGFzaC9ydW50aW1lXCIsW1wiYmFzZVwiLFwicnVudGltZS9ydW50aW1lXCIsXCJydW50aW1lL2NvbXBiYXNlXCJdLGZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKCl7dmFyIGE7dHJ5e2E9bmF2aWdhdG9yLnBsdWdpbnNbXCJTaG9ja3dhdmUgRmxhc2hcIl0sYT1hLmRlc2NyaXB0aW9ufWNhdGNoKGIpe3RyeXthPW5ldyBBY3RpdmVYT2JqZWN0KFwiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2hcIikuR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKX1jYXRjaChjKXthPVwiMC4wXCJ9fXJldHVybiBhPWEubWF0Y2goL1xcZCsvZykscGFyc2VGbG9hdChhWzBdK1wiLlwiK2FbMV0sMTApfWZ1bmN0aW9uIGYoKXtmdW5jdGlvbiBkKGEsYil7dmFyIGMsZCxlPWEudHlwZXx8YTtjPWUuc3BsaXQoXCI6OlwiKSxkPWNbMF0sZT1jWzFdLFwiUmVhZHlcIj09PWUmJmQ9PT1qLnVpZD9qLnRyaWdnZXIoXCJyZWFkeVwiKTpmW2RdJiZmW2RdLnRyaWdnZXIoZS50b0xvd2VyQ2FzZSgpLGEsYil9dmFyIGU9e30sZj17fSxnPXRoaXMuZGVzdG9yeSxqPXRoaXMsaz1iLmd1aWQoXCJ3ZWJ1cGxvYWRlcl9cIik7Yy5hcHBseShqLGFyZ3VtZW50cyksai50eXBlPWgsai5leGVjPWZ1bmN0aW9uKGEsYyl7dmFyIGQsZz10aGlzLGg9Zy51aWQsaz1iLnNsaWNlKGFyZ3VtZW50cywyKTtyZXR1cm4gZltoXT1nLGlbYV0mJihlW2hdfHwoZVtoXT1uZXcgaVthXShnLGopKSxkPWVbaF0sZFtjXSk/ZFtjXS5hcHBseShkLGspOmouZmxhc2hFeGVjLmFwcGx5KGcsYXJndW1lbnRzKX0sYVtrXT1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC5hcHBseShudWxsLGEpfSwxKX0sdGhpcy5qc3JlY2l2ZXI9ayx0aGlzLmRlc3Rvcnk9ZnVuY3Rpb24oKXtyZXR1cm4gZyYmZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHRoaXMuZmxhc2hFeGVjPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9ai5nZXRGbGFzaCgpLGU9Yi5zbGljZShhcmd1bWVudHMsMik7cmV0dXJuIGQuZXhlYyh0aGlzLnVpZCxhLGMsZSl9fXZhciBnPWIuJCxoPVwiZmxhc2hcIixpPXt9O3JldHVybiBiLmluaGVyaXRzKGMse2NvbnN0cnVjdG9yOmYsaW5pdDpmdW5jdGlvbigpe3ZhciBhLGM9dGhpcy5nZXRDb250YWluZXIoKSxkPXRoaXMub3B0aW9ucztjLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcIi04cHhcIixsZWZ0OlwiLThweFwiLHdpZHRoOlwiOXB4XCIsaGVpZ2h0OlwiOXB4XCIsb3ZlcmZsb3c6XCJoaWRkZW5cIn0pLGE9JzxvYmplY3QgaWQ9XCInK3RoaXMudWlkKydcIiB0eXBlPVwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIiBkYXRhPVwiJytkLnN3ZisnXCIgJyxiLmJyb3dzZXIuaWUmJihhKz0nY2xhc3NpZD1cImNsc2lkOmQyN2NkYjZlLWFlNmQtMTFjZi05NmI4LTQ0NDU1MzU0MDAwMFwiICcpLGErPSd3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgc3R5bGU9XCJvdXRsaW5lOjBcIj48cGFyYW0gbmFtZT1cIm1vdmllXCIgdmFsdWU9XCInK2Quc3dmKydcIiAvPjxwYXJhbSBuYW1lPVwiZmxhc2h2YXJzXCIgdmFsdWU9XCJ1aWQ9Jyt0aGlzLnVpZCtcIiZqc3JlY2l2ZXI9XCIrdGhpcy5qc3JlY2l2ZXIrJ1wiIC8+PHBhcmFtIG5hbWU9XCJ3bW9kZVwiIHZhbHVlPVwidHJhbnNwYXJlbnRcIiAvPjxwYXJhbSBuYW1lPVwiYWxsb3dzY3JpcHRhY2Nlc3NcIiB2YWx1ZT1cImFsd2F5c1wiIC8+PC9vYmplY3Q+JyxjLmh0bWwoYSl9LGdldEZsYXNoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZsYXNoP3RoaXMuX2ZsYXNoOih0aGlzLl9mbGFzaD1nKFwiI1wiK3RoaXMudWlkKS5nZXQoMCksdGhpcy5fZmxhc2gpfX0pLGYucmVnaXN0ZXI9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz1pW2FdPWIuaW5oZXJpdHMoZCxnLmV4dGVuZCh7Zmxhc2hFeGVjOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vd25lcixiPXRoaXMuZ2V0UnVudGltZSgpO3JldHVybiBiLmZsYXNoRXhlYy5hcHBseShhLGFyZ3VtZW50cyl9fSxjKSl9LGUoKT49MTEuNCYmYy5hZGRSdW50aW1lKGgsZiksZn0pLGIoXCJydW50aW1lL2ZsYXNoL2ZpbGVwaWNrZXJcIixbXCJiYXNlXCIsXCJydW50aW1lL2ZsYXNoL3J1bnRpbWVcIl0sZnVuY3Rpb24oYSxiKXt2YXIgYz1hLiQ7cmV0dXJuIGIucmVnaXN0ZXIoXCJGaWxlUGlja2VyXCIse2luaXQ6ZnVuY3Rpb24oYSl7dmFyIGIsZCxlPWMuZXh0ZW5kKHt9LGEpO2ZvcihiPWUuYWNjZXB0JiZlLmFjY2VwdC5sZW5ndGgsZD0wO2I+ZDtkKyspZS5hY2NlcHRbZF0udGl0bGV8fChlLmFjY2VwdFtkXS50aXRsZT1cIkZpbGVzXCIpO2RlbGV0ZSBlLmJ1dHRvbixkZWxldGUgZS5jb250YWluZXIsdGhpcy5mbGFzaEV4ZWMoXCJGaWxlUGlja2VyXCIsXCJpbml0XCIsZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt9fSl9KSxiKFwicnVudGltZS9mbGFzaC9pbWFnZVwiLFtcInJ1bnRpbWUvZmxhc2gvcnVudGltZVwiXSxmdW5jdGlvbihhKXtyZXR1cm4gYS5yZWdpc3RlcihcIkltYWdlXCIse2xvYWRGcm9tQmxvYjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm93bmVyO2IuaW5mbygpJiZ0aGlzLmZsYXNoRXhlYyhcIkltYWdlXCIsXCJpbmZvXCIsYi5pbmZvKCkpLGIubWV0YSgpJiZ0aGlzLmZsYXNoRXhlYyhcIkltYWdlXCIsXCJtZXRhXCIsYi5tZXRhKCkpLHRoaXMuZmxhc2hFeGVjKFwiSW1hZ2VcIixcImxvYWRGcm9tQmxvYlwiLGEudWlkKX19KX0pLGIoXCJydW50aW1lL2ZsYXNoL3RyYW5zcG9ydFwiLFtcImJhc2VcIixcInJ1bnRpbWUvZmxhc2gvcnVudGltZVwiLFwicnVudGltZS9jbGllbnRcIl0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuJDtyZXR1cm4gYi5yZWdpc3RlcihcIlRyYW5zcG9ydFwiLHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5fc3RhdHVzPTAsdGhpcy5fcmVzcG9uc2U9bnVsbCx0aGlzLl9yZXNwb25zZUpzb249bnVsbH0sc2VuZDpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5vd25lcixjPXRoaXMub3B0aW9ucyxlPXRoaXMuX2luaXRBamF4KCksZj1iLl9ibG9iLGc9Yy5zZXJ2ZXI7ZS5jb25uZWN0UnVudGltZShmLnJ1aWQpLGMuc2VuZEFzQmluYXJ5PyhnKz0oL1xcPy8udGVzdChnKT9cIiZcIjpcIj9cIikrZC5wYXJhbShiLl9mb3JtRGF0YSksYT1mLnVpZCk6KGQuZWFjaChiLl9mb3JtRGF0YSxmdW5jdGlvbihhLGIpe2UuZXhlYyhcImFwcGVuZFwiLGEsYil9KSxlLmV4ZWMoXCJhcHBlbmRCbG9iXCIsYy5maWxlVmFsLGYudWlkLGMuZmlsZW5hbWV8fGIuX2Zvcm1EYXRhLm5hbWV8fFwiXCIpKSx0aGlzLl9zZXRSZXF1ZXN0SGVhZGVyKGUsYy5oZWFkZXJzKSxlLmV4ZWMoXCJzZW5kXCIse21ldGhvZDpjLm1ldGhvZCx1cmw6Z30sYSl9LGdldFN0YXR1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXN9LGdldFJlc3BvbnNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jlc3BvbnNlfSxnZXRSZXNwb25zZUFzSnNvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXNwb25zZUpzb259LGFib3J0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5feGhyO2EmJihhLmV4ZWMoXCJhYm9ydFwiKSxhLmRlc3Ryb3koKSx0aGlzLl94aHI9YT1udWxsKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYWJvcnQoKX0sX2luaXRBamF4OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPW5ldyBjKFwiWE1MSHR0cFJlcXVlc3RcIik7cmV0dXJuIGIub24oXCJ1cGxvYWRwcm9ncmVzcyBwcm9ncmVzc1wiLGZ1bmN0aW9uKGIpe3JldHVybiBhLnRyaWdnZXIoXCJwcm9ncmVzc1wiLGIubG9hZGVkL2IudG90YWwpfSksYi5vbihcImxvYWRcIixmdW5jdGlvbigpe3ZhciBjPWIuZXhlYyhcImdldFN0YXR1c1wiKSxkPVwiXCI7cmV0dXJuIGIub2ZmKCksYS5feGhyPW51bGwsYz49MjAwJiYzMDA+Yz8oYS5fcmVzcG9uc2U9Yi5leGVjKFwiZ2V0UmVzcG9uc2VcIiksYS5fcmVzcG9uc2VKc29uPWIuZXhlYyhcImdldFJlc3BvbnNlQXNKc29uXCIpKTpjPj01MDAmJjYwMD5jPyhhLl9yZXNwb25zZT1iLmV4ZWMoXCJnZXRSZXNwb25zZVwiKSxhLl9yZXNwb25zZUpzb249Yi5leGVjKFwiZ2V0UmVzcG9uc2VBc0pzb25cIiksZD1cInNlcnZlclwiKTpkPVwiaHR0cFwiLGIuZGVzdHJveSgpLGI9bnVsbCxkP2EudHJpZ2dlcihcImVycm9yXCIsZCk6YS50cmlnZ2VyKFwibG9hZFwiKX0pLGIub24oXCJlcnJvclwiLGZ1bmN0aW9uKCl7Yi5vZmYoKSxhLl94aHI9bnVsbCxhLnRyaWdnZXIoXCJlcnJvclwiLFwiaHR0cFwiKX0pLGEuX3hocj1iLGJ9LF9zZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7ZC5lYWNoKGIsZnVuY3Rpb24oYixjKXthLmV4ZWMoXCJzZXRSZXF1ZXN0SGVhZGVyXCIsYixjKX0pfX0pfSksYihcInByZXNldC9hbGxcIixbXCJiYXNlXCIsXCJ3aWRnZXRzL2ZpbGVkbmRcIixcIndpZGdldHMvZmlsZXBhc3RlXCIsXCJ3aWRnZXRzL2ZpbGVwaWNrZXJcIixcIndpZGdldHMvaW1hZ2VcIixcIndpZGdldHMvcXVldWVcIixcIndpZGdldHMvcnVudGltZVwiLFwid2lkZ2V0cy91cGxvYWRcIixcIndpZGdldHMvdmFsaWRhdG9yXCIsXCJydW50aW1lL2h0bWw1L2Jsb2JcIixcInJ1bnRpbWUvaHRtbDUvZG5kXCIsXCJydW50aW1lL2h0bWw1L2ZpbGVwYXN0ZVwiLFwicnVudGltZS9odG1sNS9maWxlcGlja2VyXCIsXCJydW50aW1lL2h0bWw1L2ltYWdlbWV0YS9leGlmXCIsXCJydW50aW1lL2h0bWw1L2FuZHJvaWRwYXRjaFwiLFwicnVudGltZS9odG1sNS9pbWFnZVwiLFwicnVudGltZS9odG1sNS90cmFuc3BvcnRcIixcInJ1bnRpbWUvZmxhc2gvZmlsZXBpY2tlclwiLFwicnVudGltZS9mbGFzaC9pbWFnZVwiLFwicnVudGltZS9mbGFzaC90cmFuc3BvcnRcIl0sZnVuY3Rpb24oYSl7cmV0dXJuIGF9KSxiKFwid2VidXBsb2FkZXJcIixbXCJwcmVzZXQvYWxsXCJdLGZ1bmN0aW9uKGEpe3JldHVybiBhfSksYyhcIndlYnVwbG9hZGVyXCIpfSk7Il0sImZpbGUiOiJwbHVnaW5zL3VlZGl0b3IvdGhpcmQtcGFydHkvd2VidXBsb2FkZXIvd2VidXBsb2FkZXIubWluLmpzIn0=
