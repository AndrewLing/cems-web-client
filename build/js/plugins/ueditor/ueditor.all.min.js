/*!
 * UEditor
 * version: ueditor
 * build: Wed Aug 10 2016 11:06:16 GMT+0800 (CST)
 */

!function(){function getListener(a,b,c){var d;return b=b.toLowerCase(),(d=a.__allListeners||c&&(a.__allListeners={}))&&(d[b]||c&&(d[b]=[]))}function getDomNode(a,b,c,d,e,f){var g,h=d&&a[b];for(!h&&(h=a[c]);!h&&(g=(g||a).parentNode);){if("BODY"==g.tagName||f&&!f(g))return null;h=g[c]}return h&&e&&!e(h)?getDomNode(h,b,c,!1,e):h}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,window.UE=baidu.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE._customizeUI={},UE.version="1.4.3";var dom=UE.dom={},browser=UE.browser=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(a),opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,mac:a.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera&&!c.ie;var d=0;if(c.ie){var e=a.match(/(?:msie\s([\w.]+))/),f=a.match(/(?:trident.*rv:([\w.]+))/);d=e&&f&&e[1]&&f[1]?Math.max(1*e[1],1*f[1]):e&&e[1]?1*e[1]:f&&f[1]?1*f[1]:0,c.ie11Compat=11==document.documentMode,c.ie9Compat=9==document.documentMode,c.ie8=!!document.documentMode,c.ie8Compat=8==document.documentMode,c.ie7Compat=7==d&&!document.documentMode||7==document.documentMode,c.ie6Compat=d<7||c.quirks,c.ie9above=d>8,c.ie9below=d<9,c.ie11above=d>10,c.ie11below=d<11}if(c.gecko){var g=a.match(/rv:([\d\.]+)/);g&&(g=g[1].split("."),d=1e4*g[0]+100*(g[1]||0)+1*(g[2]||0))}return/chrome\/(\d+\.\d)/i.test(a)&&(c.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)&&(c.safari=+(RegExp.$1||RegExp.$2)),c.opera&&(d=parseFloat(b.version())),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),c.version=d,c.isCompatible=!c.mobile&&(c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1),c}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UE.utils={each:function(a,b,c){if(null!=a)if(a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a)===!1)return!1}else for(var f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],f,a)===!1)return!1},makeInstance:function(a){var b=new Function;return b.prototype=a,a=new b,b.prototype=null,a},extend:function(a,b,c){if(b)for(var d in b)c&&a.hasOwnProperty(d)||(a[d]=b[d]);return a},extend2:function(a){for(var b=arguments,c=1;c<b.length;c++){var d=b[c];for(var e in d)a.hasOwnProperty(e)||(a[e]=d[e])}return a},inherits:function(a,b){var c=a.prototype,d=utils.makeInstance(b.prototype);return utils.extend(d,c,!0),a.prototype=d,d.constructor=a},bind:function(a,b){return function(){return a.apply(b,arguments)}},defer:function(a,b,c){var d;return function(){c&&clearTimeout(d),d=setTimeout(a,b)}},indexOf:function(a,b,c){var d=-1;return c=this.isNumber(c)?c:0,this.each(a,function(a,e){if(e>=c&&a===b)return d=e,!1}),d},removeItem:function(a,b){for(var c=0,d=a.length;c<d;c++)a[c]===b&&(a.splice(c,1),c--)},trim:function(a){return a.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(a){if(!a)return{};a=utils.isArray(a)?a:a.split(",");for(var b,c=0,d={};b=a[c++];)d[b.toUpperCase()]=d[b]=1;return d},unhtml:function(a,b){return a?a.replace(b||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(a,b){return b?a:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},unhtmlForUrl:function(a,b){return a?a.replace(b||/[<">']/g,function(a){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},html:function(a){return a?a.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(a){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[a]}):""},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b={"float":void 0!=a.cssFloat?"cssFloat":void 0!=a.styleFloat?"styleFloat":"float"};return function(a){return b[a]||(b[a]=a.toLowerCase().replace(/-./g,function(a){return a.charAt(1).toUpperCase()}))}}(),loadFile:function(){function a(a,c){try{for(var d,e=0;d=b[e++];)if(d.doc===a&&d.url==(c.src||c.href))return d}catch(f){return null}}var b=[];return function(c,d,e){var f=a(c,d);if(f)return void(f.ready?e&&e():f.funs.push(e));if(b.push({doc:c,url:d.src||d.href,funs:[e]}),!c.body){var g=[];for(var h in d)"tag"!=h&&g.push(h+'="'+d[h]+'"');return void c.write("<"+d.tag+" "+g.join(" ")+" ></"+d.tag+">")}if(!d.id||!c.getElementById(d.id)){var i=c.createElement(d.tag);delete d.tag;for(var h in d)i.setAttribute(h,d[h]);i.onload=i.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(f=a(c,d),f.funs.length>0){f.ready=1;for(var b;b=f.funs.pop();)b()}i.onload=i.onreadystatechange=null}},i.onerror=function(){throw Error("The load "+(d.href||d.src)+" fails,check the url settings of file ueditor.config.js ")},c.getElementsByTagName("head")[0].appendChild(i)}}}(),isEmptyObject:function(a){if(null==a)return!0;if(this.isArray(a)||this.isString(a))return 0===a.length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},fixColor:function(a,b){if(/color/i.test(a)&&/rgba?/.test(b)){var c=b.split(",");if(c.length>3)return"";b="#";for(var d,e=0;d=c[e++];)d=parseInt(d.replace(/[^\d]/gi,""),10).toString(16),b+=1==d.length?"0"+d:d;b=b.toUpperCase()}return b},optCss:function(a){function b(a,b){if(!a)return"";var c=a.top,d=a.bottom,e=a.left,f=a.right,g="";if(c&&e&&d&&f)g+=";"+b+":"+(c==d&&d==e&&e==f?c:c==d&&e==f?c+" "+e:e==f?c+" "+e+" "+d:c+" "+f+" "+d+" "+e)+";";else for(var h in a)g+=";"+b+"-"+h+":"+a[h]+";";return g}var c,d;return a=a.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(a,b,e,f){if(1==f.split(" ").length)switch(b){case"padding":return!c&&(c={}),c[e]=f,"";case"margin":return!d&&(d={}),d[e]=f,"";case"border":return"initial"==f?"":a}return a}),a+=b(c,"padding")+b(d,"margin"),a.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(a,b){return b?b+";;":";"})},clone:function(a,b){var c;b=b||{};for(var d in a)a.hasOwnProperty(d)&&(c=a[d],"object"==typeof c?(b[d]=utils.isArray(c)?[]:{},utils.clone(a[d],b[d])):b[d]=c);return b},transUnitToPx:function(a){if(!/(pt|cm)/.test(a))return a;var b;switch(a.replace(/([\d.]+)(\w+)/,function(c,d,e){a=d,b=e}),b){case"cm":a=25*parseFloat(a);break;case"pt":a=Math.round(96*parseFloat(a)/72)}return a+(a?"px":"")},domReady:function(){function a(a){a.isReady=!0;for(var c;c=b.pop();c());}var b=[];return function(c,d){d=d||window;var e=d.document;c&&b.push(c),"complete"===e.readyState?a(e):(e.isReady&&a(e),browser.ie&&11!=browser.version?(!function(){if(!e.isReady){try{e.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a(e)}}(),d.attachEvent("onload",function(){a(e)})):(e.addEventListener("DOMContentLoaded",function(){e.removeEventListener("DOMContentLoaded",arguments.callee,!1),a(e)},!1),d.addEventListener("load",function(){a(e)},!1)))}}(),cssRule:browser.ie&&11!=browser.version?function(a,b,c){var d,e;if(void 0===b||b&&b.nodeType&&9==b.nodeType){if(c=b&&b.nodeType&&9==b.nodeType?b:c||document,d=c.indexList||(c.indexList={}),e=d[a],void 0!==e)return c.styleSheets[e].cssText}else{if(c=c||document,d=c.indexList||(c.indexList={}),e=d[a],""===b)return void 0!==e&&(c.styleSheets[e].cssText="",delete d[a],!0);void 0!==e?sheetStyle=c.styleSheets[e]:(sheetStyle=c.createStyleSheet("",e=c.styleSheets.length),d[a]=e),sheetStyle.cssText=b}}:function(a,b,c){var d;return void 0===b||b&&b.nodeType&&9==b.nodeType?(c=b&&b.nodeType&&9==b.nodeType?b:c||document,d=c.getElementById(a),d?d.innerHTML:void 0):(c=c||document,d=c.getElementById(a),""===b?!!d&&(d.parentNode.removeChild(d),!0):void(d?d.innerHTML=b:(d=c.createElement("style"),d.id=a,d.innerHTML=b,c.getElementsByTagName("head")[0].appendChild(d))))},sort:function(a,b){b=b||function(a,b){return a.localeCompare(b)};for(var c=0,d=a.length;c<d;c++)for(var e=c,f=a.length;e<f;e++)if(b(a[c],a[e])>0){var g=a[c];a[c]=a[e],a[e]=g}return a},serializeParam:function(a){var b=[];for(var c in a)if("method"!=c&&"timeout"!=c&&"async"!=c)if("function"!=(typeof a[c]).toLowerCase()&&"object"!=(typeof a[c]).toLowerCase())b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));else if(utils.isArray(a[c]))for(var d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"[]="+encodeURIComponent(a[c][d]));return b.join("&")},formatUrl:function(a){var b=a.replace(/&&/g,"&");return b=b.replace(/\?&/g,"?"),b=b.replace(/&$/g,""),b=b.replace(/&#/g,"#"),b=b.replace(/&+/g,"&")},isCrossDomainUrl:function(a){var b=document.createElement("a");return b.href=a,browser.ie&&(b.href=b.href),!(b.protocol==location.protocol&&b.hostname==location.hostname&&(b.port==location.port||"80"==b.port&&""==location.port||""==b.port&&"80"==location.port))},clearEmptyAttrs:function(a){for(var b in a)""===a[b]&&delete a[b];return a},str2json:function(a){return utils.isString(a)?window.JSON?JSON.parse(a):new Function("return "+utils.trim(a||""))():null},json2str:function(){function a(a){return/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/["\\\x00-\x1f]/g,function(a){var b=e[a];return b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})),'"'+a+'"'}function b(a){var b,c,d,e=["["],f=a.length;for(c=0;c<f;c++)switch(d=a[c],typeof d){case"undefined":case"function":case"unknown":break;default:b&&e.push(","),e.push(utils.json2str(d)),b=1}return e.push("]"),e.join("")}function c(a){return a<10?"0"+a:a}function d(a){return'"'+a.getFullYear()+"-"+c(a.getMonth()+1)+"-"+c(a.getDate())+"T"+c(a.getHours())+":"+c(a.getMinutes())+":"+c(a.getSeconds())+'"'}if(window.JSON)return JSON.stringify;var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(c){switch(typeof c){case"undefined":return"undefined";case"number":return isFinite(c)?String(c):"null";case"string":return a(c);case"boolean":return String(c);default:if(null===c)return"null";if(utils.isArray(c))return b(c);if(utils.isDate(c))return d(c);var e,f,g=["{"],h=utils.json2str;for(var i in c)if(Object.prototype.hasOwnProperty.call(c,i))switch(f=c[i],typeof f){case"undefined":case"unknown":case"function":break;default:e&&g.push(","),e=1,g.push(h(i)+":"+h(f))}return g.push("}"),g.join("")}}}()};utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(a){UE.utils["is"+a]=function(b){return Object.prototype.toString.apply(b)=="[object "+a+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(a,b){a=utils.trim(a).split(/\s+/);for(var c,d=0;c=a[d++];)getListener(this,c,!0).push(b)},on:function(a,b){return this.addListener(a,b)},off:function(a,b){return this.removeListener(a,b)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(a,b){a=utils.trim(a).split(/\s+/);for(var c,d=0;c=a[d++];)utils.removeItem(getListener(this,c)||[],b)},fireEvent:function(){var a=arguments[0];a=utils.trim(a).split(" ");for(var b,c=0;b=a[c++];){var d,e,f,g=getListener(this,b);if(g)for(f=g.length;f--;)if(g[f]){if(e=g[f].apply(this,arguments),e===!0)return e;void 0!==e&&(d=e)}(e=this["on"+b.toLowerCase()])&&(d=e.apply(this,arguments))}return d}};var dtd=dom.dtd=function(){function a(a){for(var b in a)a[b.toUpperCase()]=a[b];return a}var b=utils.extend2,c=a({isindex:1,fieldset:1}),d=a({input:1,button:1,select:1,textarea:1,label:1}),e=b(a({a:1}),d),f=b({iframe:1},e),g=a({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),h=a({ins:1,del:1,script:1,style:1}),i=b(a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),h),j=b(a({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),i),k=b(a({p:1}),j),l=b(a({iframe:1}),j,d),m=a({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),n=b(a({a:0}),l),o=a({tr:1}),p=a({"#":1}),q=b(a({param:1}),m),r=b(a({form:1}),c,f,g,k),s=a({li:1,ol:1,ul:1}),t=a({style:1,script:1}),u=a({base:1,link:1,meta:1,title:1}),v=b(u,t),w=a({head:1,body:1}),x=a({html:1}),y=a({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),z=a({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return a({$nonBodyContent:b(x,w,u),$block:y,$inline:n,$inlineWithA:b(a({a:1}),n),$body:b(a({script:1,style:1}),y),$cdata:a({script:1,style:1}),$empty:z,$nonChild:a({iframe:1,textarea:1}),$listItem:a({dd:1,dt:1,li:1}),$list:a({ul:1,ol:1,dl:1}),$isNotEmpty:a({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:a({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:a({p:1,div:1}),$tableContent:a({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:a({pre:1,script:1,style:1,textarea:1}),html:w,head:v,style:p,script:p,body:r,base:{},link:{},meta:{},title:p,col:{},tr:a({td:1,th:1}),img:{},embed:{},colgroup:a({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:r,td:r,br:{},th:r,center:r,kbd:n,button:b(k,g),basefont:{},h5:n,h4:n,samp:n,h6:n,ol:s,h1:n,h3:n,option:p,h2:n,form:b(c,f,g,k),select:a({optgroup:1,option:1}),font:n,ins:n,menu:s,abbr:n,label:n,table:a({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:n,tfoot:o,cite:n,li:r,input:{},iframe:r,strong:n,textarea:p,noframes:r,big:n,small:n,span:a({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:n,dt:n,sub:n,optgroup:a({option:1}),param:{},bdo:n,"var":n,div:r,object:q,sup:n,dd:r,strike:n,area:{},dir:s,map:b(a({area:1,form:1,p:1}),c,h,g),applet:q,dl:a({dt:1,dd:1}),del:n,isindex:{},fieldset:b(a({legend:1}),m),thead:o,ul:s,acronym:n,b:n,a:b(a({a:1}),l),blockquote:b(a({td:1,tr:1,tbody:1,li:1}),r),caption:n,i:n,u:n,tbody:o,s:n,address:b(f,k),tt:n,legend:n,q:n,pre:b(i,e),p:b(a({a:1}),n),em:n,dfn:n})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&"6"==browser.version?"\ufeff":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(a,b){if(a===b)return 0;var c,d=[a],e=[b];for(c=a;c=c.parentNode;){if(c===b)return 10;d.push(c)}for(c=b;c=c.parentNode;){if(c===a)return 20;e.push(c)}if(d.reverse(),e.reverse(),d[0]!==e[0])return 1;for(var f=-1;f++,d[f]===e[f];);for(a=d[f],b=e[f];a=a.nextSibling;)if(a===b)return 4;return 2},getNodeIndex:function(a,b){for(var c=a,d=0;c=c.previousSibling;)b&&3==c.nodeType?c.nodeType!=c.nextSibling.nodeType&&d++:d++;return d},inDoc:function(a,b){return 10==domUtils.getPosition(a,b)},findParent:function(a,b,c){if(a&&!domUtils.isBody(a))for(a=c?a:a.parentNode;a;){if(!b||b(a)||domUtils.isBody(a))return b&&!b(a)&&domUtils.isBody(a)?null:a;a=a.parentNode}return null},findParentByTagName:function(a,b,c,d){return b=utils.listToMap(utils.isArray(b)?b:[b]),domUtils.findParent(a,function(a){return b[a.tagName]&&!(d&&d(a))},c)},findParents:function(a,b,c,d){for(var e=b&&(c&&c(a)||!c)?[a]:[];a=domUtils.findParent(a,c);)e.push(a);return d?e:e.reverse()},insertAfter:function(a,b){return a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)},remove:function(a,b){var c,d=a.parentNode;if(d){if(b&&a.hasChildNodes())for(;c=a.firstChild;)d.insertBefore(c,a);d.removeChild(a)}return a},getNextDomNode:function(a,b,c,d){return getDomNode(a,"firstChild","nextSibling",b,c,d)},getPreDomNode:function(a,b,c,d){return getDomNode(a,"lastChild","previousSibling",b,c,d)},isBookmarkNode:function(a){return 1==a.nodeType&&a.id&&/^_baidu_bookmark_/i.test(a.id)},getWindow:function(a){var b=a.ownerDocument||a;return b.defaultView||b.parentWindow},getCommonAncestor:function(a,b){if(a===b)return a;for(var c=[a],d=[b],e=a,f=-1;e=e.parentNode;){if(e===b)return e;c.push(e)}for(e=b;e=e.parentNode;){if(e===a)return e;d.push(e)}for(c.reverse(),d.reverse();f++,c[f]===d[f];);return 0==f?null:c[f-1]},clearEmptySibling:function(a,b,c){function d(a,b){for(var c;a&&!domUtils.isBookmarkNode(a)&&(domUtils.isEmptyInlineElement(a)||!new RegExp("[^\t\n\r"+domUtils.fillChar+"]").test(a.nodeValue));)c=a[b],domUtils.remove(a),a=c}!b&&d(a.nextSibling,"nextSibling"),!c&&d(a.previousSibling,"previousSibling")},split:function(a,b){var c=a.ownerDocument;if(browser.ie&&b==a.nodeValue.length){var d=c.createTextNode("");return domUtils.insertAfter(a,d)}var e=a.splitText(b);if(browser.ie8){var f=c.createTextNode("");domUtils.insertAfter(e,f),domUtils.remove(f)}return e},isWhitespace:function(a){return!new RegExp("[^ \t\n\r"+domUtils.fillChar+"]").test(a.nodeValue)},getXY:function(a){for(var b=0,c=0;a.offsetParent;)c+=a.offsetTop,b+=a.offsetLeft,a=a.offsetParent;return{x:b,y:c}},on:function(a,b,c){var d=utils.isArray(b)?b:utils.trim(b).split(/\s+/),e=d.length;if(e)for(;e--;)if(b=d[e],a.addEventListener)a.addEventListener(b,c,!1);else{c._d||(c._d={els:[]});var f=b+c.toString(),g=utils.indexOf(c._d.els,a);c._d[f]&&g!=-1||(g==-1&&c._d.els.push(a),c._d[f]||(c._d[f]=function(a){return c.call(a.srcElement,a||window.event)}),a.attachEvent("on"+b,c._d[f]))}a=null},un:function(a,b,c){var d=utils.isArray(b)?b:utils.trim(b).split(/\s+/),e=d.length;if(e)for(;e--;)if(b=d[e],a.removeEventListener)a.removeEventListener(b,c,!1);else{var f=b+c.toString();try{a.detachEvent("on"+b,c._d?c._d[f]:c)}catch(g){}if(c._d&&c._d[f]){var h=utils.indexOf(c._d.els,a);h!=-1&&c._d.els.splice(h,1),0==c._d.els.length&&delete c._d[f]}}},isSameElement:function(a,b){if(a.tagName!=b.tagName)return!1;var c=a.attributes,d=b.attributes;if(!ie&&c.length!=d.length)return!1;for(var e,f,g=0,h=0,i=0;e=c[i++];){if("style"==e.nodeName){if(e.specified&&g++,domUtils.isSameStyle(a,b))continue;return!1}if(ie){if(!e.specified)continue;g++,f=d.getNamedItem(e.nodeName)}else f=b.attributes[e.nodeName];if(!f.specified||e.nodeValue!=f.nodeValue)return!1}if(ie){for(i=0;f=d[i++];)f.specified&&h++;if(g!=h)return!1}return!0},isSameStyle:function(a,b){var c=a.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),d=b.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){if(c=a.style,d=b.style,c.length!=d.length)return!1;for(var e in c)if(!/^(\d+|csstext)$/i.test(e)&&c[e]!=d[e])return!1;return!0}if(!c||!d)return c==d;if(c=c.split(";"),d=d.split(";"),c.length!=d.length)return!1;for(var f,g=0;f=c[g++];)if(utils.indexOf(d,f)==-1)return!1;return!0},isBlockElm:function(a){return 1==a.nodeType&&(dtd.$block[a.tagName]||styleBlock[domUtils.getComputedStyle(a,"display")])&&!dtd.$nonChild[a.tagName]},isBody:function(a){return a&&1==a.nodeType&&"body"==a.tagName.toLowerCase()},breakParent:function(a,b){var c,d,e,f=a,g=a;do{for(f=f.parentNode,d?(c=f.cloneNode(!1),c.appendChild(d),d=c,c=f.cloneNode(!1),c.appendChild(e),e=c):(d=f.cloneNode(!1),e=d.cloneNode(!1));c=g.previousSibling;)d.insertBefore(c,d.firstChild);for(;c=g.nextSibling;)e.appendChild(c);g=f}while(b!==f);return c=b.parentNode,c.insertBefore(d,b),c.insertBefore(e,b),c.insertBefore(a,e),domUtils.remove(b),a},isEmptyInlineElement:function(a){if(1!=a.nodeType||!dtd.$removeEmpty[a.tagName])return 0;for(a=a.firstChild;a;){if(domUtils.isBookmarkNode(a))return 0;if(1==a.nodeType&&!domUtils.isEmptyInlineElement(a)||3==a.nodeType&&!domUtils.isWhitespace(a))return 0;a=a.nextSibling}return 1},trimWhiteTextNode:function(a){function b(b){for(var c;(c=a[b])&&3==c.nodeType&&domUtils.isWhitespace(c);)a.removeChild(c)}b("firstChild"),b("lastChild")},mergeChild:function(a,b,c){for(var d,e=domUtils.getElementsByTagName(a,a.tagName.toLowerCase()),f=0;d=e[f++];)if(d.parentNode&&!domUtils.isBookmarkNode(d))if("span"!=d.tagName.toLowerCase())domUtils.isSameElement(a,d)&&domUtils.remove(d,!0);else{if(a===d.parentNode&&(domUtils.trimWhiteTextNode(a),1==a.childNodes.length)){a.style.cssText=d.style.cssText+";"+a.style.cssText,domUtils.remove(d,!0);continue}if(d.style.cssText=a.style.cssText+";"+d.style.cssText,c){var g=c.style;if(g){g=g.split(";");for(var h,i=0;h=g[i++];)d.style[utils.cssStyleToDomStyle(h.split(":")[0])]=h.split(":")[1]}}domUtils.isSameStyle(d,a)&&domUtils.remove(d,!0)}},getElementsByTagName:function(a,b,c){if(c&&utils.isString(c)){var d=c;c=function(a){return domUtils.hasClass(a,d)}}b=utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var e,f=[],g=0;e=b[g++];)for(var h,i=a.getElementsByTagName(e),j=0;h=i[j++];)c&&!c(h)||f.push(h);return f},mergeToParent:function(a){for(var b=a.parentNode;b&&dtd.$removeEmpty[b.tagName];){if(b.tagName==a.tagName||"A"==b.tagName){if(domUtils.trimWhiteTextNode(b),"SPAN"==b.tagName&&!domUtils.isSameStyle(b,a)||"A"==b.tagName&&"SPAN"==a.tagName){if(b.childNodes.length>1||b!==a.parentNode){a.style.cssText=b.style.cssText+";"+a.style.cssText,b=b.parentNode;continue}b.style.cssText+=";"+a.style.cssText,"A"==b.tagName&&(b.style.textDecoration="underline")}if("A"!=b.tagName){b===a.parentNode&&domUtils.remove(a,!0);break}}b=b.parentNode}},mergeSibling:function(a,b,c){function d(a,b,c){var d;if((d=c[a])&&!domUtils.isBookmarkNode(d)&&1==d.nodeType&&domUtils.isSameElement(c,d)){for(;d.firstChild;)"firstChild"==b?c.insertBefore(d.lastChild,c.firstChild):c.appendChild(d.firstChild);domUtils.remove(d)}}!b&&d("previousSibling","firstChild",a),!c&&d("nextSibling","lastChild",a)},unSelectable:ie&&browser.ie9below||browser.opera?function(a){a.onselectstart=function(){return!1},a.onclick=a.onkeyup=a.onkeydown=function(){return!1},a.unselectable="on",a.setAttribute("unselectable","on");for(var b,c=0;b=a.all[c++];)switch(b.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:b.unselectable="on",a.setAttribute("unselectable","on")}}:function(a){a.style.MozUserSelect=a.style.webkitUserSelect=a.style.msUserSelect=a.style.KhtmlUserSelect="none"},removeAttributes:function(a,b){b=utils.isArray(b)?b:utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c,d=0;c=b[d++];){switch(c=attrFix[c]||c){case"className":a[c]="";break;case"style":a.style.cssText="";var e=a.getAttributeNode("style");!browser.ie&&e&&a.removeAttributeNode(e)}a.removeAttribute(c)}},createElement:function(a,b,c){return domUtils.setAttributes(a.createElement(b),c)},setAttributes:function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];switch(c){case"class":a.className=d;break;case"style":a.style.cssText=a.style.cssText+";"+d;break;case"innerHTML":a[c]=d;break;case"value":a.value=d;break;default:a.setAttribute(attrFix[c]||c,d)}}return a},getComputedStyle:function(a,b){var c="width height top left";if(c.indexOf(b)>-1)return a["offset"+b.replace(/^\w/,function(a){return a.toUpperCase()})]+"px";if(3==a.nodeType&&(a=a.parentNode),browser.ie&&browser.version<9&&"font-size"==b&&!a.style.fontSize&&!dtd.$empty[a.tagName]&&!dtd.$nonChild[a.tagName]){var d=a.ownerDocument.createElement("span");d.style.cssText="padding:0;border:0;font-family:simsun;",d.innerHTML=".",a.appendChild(d);var e=d.offsetHeight;return a.removeChild(d),d=null,e+"px"}try{var f=domUtils.getStyle(a,b)||(window.getComputedStyle?domUtils.getWindow(a).getComputedStyle(a,"").getPropertyValue(b):(a.currentStyle||a.style)[utils.cssStyleToDomStyle(b)])}catch(g){return""}return utils.transUnitToPx(utils.fixColor(b,f))},removeClasses:function(a,b){b=utils.isArray(b)?b:utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c,d=0,e=a.className;c=b[d++];)e=e.replace(new RegExp("\\b"+c+"\\b"),"");e=utils.trim(e).replace(/[ ]{2,}/g," "),e?a.className=e:domUtils.removeAttributes(a,["class"])},addClass:function(a,b){if(a){b=utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c,d=0,e=a.className;c=b[d++];)new RegExp("\\b"+c+"\\b").test(e)||(e+=" "+c);a.className=utils.trim(e)}},hasClass:function(a,b){if(utils.isRegExp(b))return b.test(a.className);b=utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c,d=0,e=a.className;c=b[d++];)if(!new RegExp("\\b"+c+"\\b","i").test(e))return!1;return d-1==b.length},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},removeStyle:function(a,b){browser.ie?("color"==b&&(b="(^|;)"+b),a.style.cssText=a.style.cssText.replace(new RegExp(b+"[^:]*:[^;]+;?","ig"),"")):a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(utils.cssStyleToDomStyle(b)),a.style.cssText||domUtils.removeAttributes(a,["style"])},getStyle:function(a,b){var c=a.style[utils.cssStyleToDomStyle(b)];return utils.fixColor(b,c)},setStyle:function(a,b,c){a.style[utils.cssStyleToDomStyle(b)]=c,utils.trim(a.style.cssText)||this.removeAttributes(a,"style")},setStyles:function(a,b){for(var c in b)b.hasOwnProperty(c)&&domUtils.setStyle(a,c,b[c])},removeDirtyAttr:function(a){for(var b,c=0,d=a.getElementsByTagName("*");b=d[c++];)b.removeAttribute("_moz_dirty");a.removeAttribute("_moz_dirty")},getChildCount:function(a,b){var c=0,d=a.firstChild;for(b=b||function(){return 1};d;)b(d)&&c++,d=d.nextSibling;return c},isEmptyNode:function(a){return!a.firstChild||0==domUtils.getChildCount(a,function(a){return!domUtils.isBr(a)&&!domUtils.isBookmarkNode(a)&&!domUtils.isWhitespace(a)})},clearSelectedArr:function(a){for(var b;b=a.pop();)domUtils.removeAttributes(b,["class"])},scrollToView:function(a,b,c){var d=function(){var a=b.document,c="CSS1Compat"==a.compatMode;return{width:(c?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(c?a.documentElement.clientHeight:a.body.clientHeight)||0}},e=function(a){if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}},f=d().height,g=f*-1+c;g+=a.offsetHeight||0;var h=domUtils.getXY(a);g+=h.y;var i=e(b).y;(g>i||g<i-f)&&b.scrollTo(0,g+(g<0?-20:20))},isBr:function(a){return 1==a.nodeType&&"BR"==a.tagName},isFillChar:function(a,b){if(3!=a.nodeType)return!1;var c=a.nodeValue;return b?new RegExp("^"+domUtils.fillChar).test(c):!c.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(a){var b,c=a.cloneRange(),d=0,e=c.startContainer;if(1==e.nodeType&&e.childNodes[c.startOffset]){e=e.childNodes[c.startOffset];for(var f=e.previousSibling;f&&domUtils.isFillChar(f);)e=f,f=f.previousSibling}for(this.isFillChar(e,!0)&&1==c.startOffset&&(c.setStartBefore(e),e=c.startContainer);e&&domUtils.isFillChar(e);)b=e,e=e.previousSibling;for(b&&(c.setStartBefore(b),e=c.startContainer),1==e.nodeType&&domUtils.isEmptyNode(e)&&1==c.startOffset&&c.setStart(e,0).collapse(!0);!c.startOffset;){if(e=c.startContainer,domUtils.isBlockElm(e)||domUtils.isBody(e)){d=1;break}var g,f=c.startContainer.previousSibling;if(f){for(;f&&domUtils.isFillChar(f);)g=f,f=f.previousSibling;g?c.setStartBefore(g):c.setStartBefore(c.startContainer)}else c.setStartBefore(c.startContainer)}return d&&!domUtils.isBody(c.startContainer)?1:0},isEmptyBlock:function(a,b){if(1!=a.nodeType)return 0;if(b=b||new RegExp("[  \t\r\n"+domUtils.fillChar+"]","g"),a[browser.ie?"innerText":"textContent"].replace(b,"").length>0)return 0;for(var c in dtd.$isNotEmpty)if(a.getElementsByTagName(c).length)return 0;return 1},setViewportOffset:function(a,b){var c=0|parseInt(a.style.left),d=0|parseInt(a.style.top),e=a.getBoundingClientRect(),f=b.left-e.left,g=b.top-e.top;f&&(a.style.left=c+f+"px"),g&&(a.style.top=d+g+"px")},fillNode:function(a,b){var c=browser.ie?a.createTextNode(domUtils.fillChar):a.createElement("br");b.innerHTML="",b.appendChild(c)},moveChild:function(a,b,c){for(;a.firstChild;)c&&b.firstChild?b.insertBefore(a.lastChild,b.firstChild):b.appendChild(a.firstChild)},hasNoAttributes:function(a){return browser.ie?/^<\w+\s*?>/.test(a.outerHTML):0==a.attributes.length},isCustomeNode:function(a){return 1==a.nodeType&&a.getAttribute("_ue_custom_node_")},isTagNode:function(a,b){return 1==a.nodeType&&new RegExp("\\b"+a.tagName+"\\b","i").test(b)},filterNodeList:function(a,b,c){var d=[];if(!utils.isFunction(b)){var e=b;b=function(a){return utils.indexOf(utils.isArray(e)?e:e.split(" "),a.tagName.toLowerCase())!=-1}}return utils.each(a,function(a){b(a)&&d.push(a)}),0==d.length?null:1!=d.length&&c?d:d[0]},isInNodeEndBoundary:function(a,b){var c=a.startContainer;if(3==c.nodeType&&a.startOffset!=c.nodeValue.length)return 0;if(1==c.nodeType&&a.startOffset!=c.childNodes.length)return 0;for(;c!==b;){if(c.nextSibling)return 0;c=c.parentNode}return 1},isBoundaryNode:function(a,b){for(var c;!domUtils.isBody(a);)if(c=a,a=a.parentNode,c!==a[b])return!1;return!0},fillHtml:browser.ie11below?"&nbsp;":"<br/>"},fillCharReg=new RegExp(domUtils.fillChar,"g");!function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer===a.endContainer&&a.startOffset==a.endOffset}function b(a){return!a.collapsed&&1==a.startContainer.nodeType&&a.startContainer===a.endContainer&&a.endOffset-a.startOffset==1}function c(b,c,d,e){return 1==c.nodeType&&(dtd.$empty[c.tagName]||dtd.$nonChild[c.tagName])&&(d=domUtils.getNodeIndex(c)+(b?0:1),c=c.parentNode),b?(e.startContainer=c,e.startOffset=d,e.endContainer||e.collapse(!0)):(e.endContainer=c,e.endOffset=d,e.startContainer||e.collapse(!1)),a(e),e}function d(a,b){var c,d,e=a.startContainer,f=a.endContainer,g=a.startOffset,h=a.endOffset,i=a.document,j=i.createDocumentFragment();if(1==e.nodeType&&(e=e.childNodes[g]||(c=e.appendChild(i.createTextNode("")))),1==f.nodeType&&(f=f.childNodes[h]||(d=f.appendChild(i.createTextNode("")))),e===f&&3==e.nodeType)return j.appendChild(i.createTextNode(e.substringData(g,h-g))),b&&(e.deleteData(g,h-g),a.collapse(!0)),j;for(var k,l,m=j,n=domUtils.findParents(e,!0),o=domUtils.findParents(f,!0),p=0;n[p]==o[p];)p++;for(var q,r=p;q=n[r];r++){for(k=q.nextSibling,q==e?c||(3==a.startContainer.nodeType?(m.appendChild(i.createTextNode(e.nodeValue.slice(g))),b&&e.deleteData(g,e.nodeValue.length-g)):m.appendChild(b?e:e.cloneNode(!0))):(l=q.cloneNode(!1),m.appendChild(l));k&&k!==f&&k!==o[r];)q=k.nextSibling,m.appendChild(b?k:k.cloneNode(!0)),k=q;m=l}m=j,n[p]||(m.appendChild(n[p-1].cloneNode(!1)),m=m.firstChild);for(var s,r=p;s=o[r];r++){if(k=s.previousSibling,s==f?d||3!=a.endContainer.nodeType||(m.appendChild(i.createTextNode(f.substringData(0,h))),b&&f.deleteData(0,h)):(l=s.cloneNode(!1),m.appendChild(l)),r!=p||!n[p])for(;k&&k!==e;)s=k.previousSibling,m.insertBefore(b?k:k.cloneNode(!0),m.firstChild),k=s;m=l}return b&&a.setStartBefore(o[p]?n[p]?o[p]:n[p-1]:o[p-1]).collapse(!0),c&&domUtils.remove(c),d&&domUtils.remove(d),j}function e(a,b){try{if(g&&domUtils.inDoc(g,a))if(g.nodeValue.replace(fillCharReg,"").length)g.nodeValue=g.nodeValue.replace(fillCharReg,"");else{var c=g.parentNode;for(domUtils.remove(g);c&&domUtils.isEmptyInlineElement(c)&&(browser.safari?!(domUtils.getPosition(c,b)&domUtils.POSITION_CONTAINS):!c.contains(b));)g=c.parentNode,domUtils.remove(c),c=g}}catch(d){}
}function f(a,b){var c;for(a=a[b];a&&domUtils.isFillChar(a);)c=a[b],domUtils.remove(a),a=c}var g,h=0,i=domUtils.fillChar,j=dom.Range=function(a){var b=this;b.startContainer=b.startOffset=b.endContainer=b.endOffset=null,b.document=a,b.collapsed=!0};j.prototype={cloneContents:function(){return this.collapsed?null:d(this,0)},deleteContents:function(){var a;return this.collapsed||d(this,1),browser.webkit&&(a=this.startContainer,3!=a.nodeType||a.nodeValue.length||(this.setStartBefore(a).collapse(!0),domUtils.remove(a))),this},extractContents:function(){return this.collapsed?null:d(this,2)},setStart:function(a,b){return c(!0,a,b,this)},setEnd:function(a,b){return c(!1,a,b,this)},setStartAfter:function(a){return this.setStart(a.parentNode,domUtils.getNodeIndex(a)+1)},setStartBefore:function(a){return this.setStart(a.parentNode,domUtils.getNodeIndex(a))},setEndAfter:function(a){return this.setEnd(a.parentNode,domUtils.getNodeIndex(a)+1)},setEndBefore:function(a){return this.setEnd(a.parentNode,domUtils.getNodeIndex(a))},setStartAtFirst:function(a){return this.setStart(a,0)},setStartAtLast:function(a){return this.setStart(a,3==a.nodeType?a.nodeValue.length:a.childNodes.length)},setEndAtFirst:function(a){return this.setEnd(a,0)},setEndAtLast:function(a){return this.setEnd(a,3==a.nodeType?a.nodeValue.length:a.childNodes.length)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){return this.setStart(a,0).setEndAtLast(a)},cloneRange:function(){var a=this;return new j(a.document).setStart(a.startContainer,a.startOffset).setEnd(a.endContainer,a.endOffset)},collapse:function(a){var b=this;return a?(b.endContainer=b.startContainer,b.endOffset=b.startOffset):(b.startContainer=b.endContainer,b.startOffset=b.endOffset),b.collapsed=!0,b},shrinkBoundary:function(a){function b(a){return 1==a.nodeType&&!domUtils.isBookmarkNode(a)&&!dtd.$empty[a.tagName]&&!dtd.$nonChild[a.tagName]}for(var c,d=this,e=d.collapsed;1==d.startContainer.nodeType&&(c=d.startContainer.childNodes[d.startOffset])&&b(c);)d.setStart(c,0);if(e)return d.collapse(!0);if(!a)for(;1==d.endContainer.nodeType&&d.endOffset>0&&(c=d.endContainer.childNodes[d.endOffset-1])&&b(c);)d.setEnd(c,c.childNodes.length);return d},getCommonAncestor:function(a,c){var d=this,e=d.startContainer,f=d.endContainer;return e===f?a&&b(this)&&(e=e.childNodes[d.startOffset],1==e.nodeType)?e:c&&3==e.nodeType?e.parentNode:e:domUtils.getCommonAncestor(e,f)},trimBoundary:function(a){this.txtToElmBoundary();var b=this.startContainer,c=this.startOffset,d=this.collapsed,e=this.endContainer;if(3==b.nodeType){if(0==c)this.setStartBefore(b);else if(c>=b.nodeValue.length)this.setStartAfter(b);else{var f=domUtils.split(b,c);b===e?this.setEnd(f,this.endOffset-c):b.parentNode===e&&(this.endOffset+=1),this.setStartBefore(f)}if(d)return this.collapse(!0)}return a||(c=this.endOffset,e=this.endContainer,3==e.nodeType&&(0==c?this.setEndBefore(e):(c<e.nodeValue.length&&domUtils.split(e,c),this.setEndAfter(e)))),this},txtToElmBoundary:function(a){function b(a,b){var c=a[b+"Container"],d=a[b+"Offset"];3==c.nodeType&&(d?d>=c.nodeValue.length&&a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](c):a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](c))}return!a&&this.collapsed||(b(this,"start"),b(this,"end")),this},insertNode:function(a){var b=a,c=1;11==a.nodeType&&(b=a.firstChild,c=a.childNodes.length),this.trimBoundary(!0);var d=this.startContainer,e=this.startOffset,f=d.childNodes[e];return f?d.insertBefore(a,f):d.appendChild(a),b.parentNode===this.endContainer&&(this.endOffset=this.endOffset+c),this.setStartBefore(b)},setCursor:function(a,b){return this.collapse(!a).select(b)},createBookmark:function(a,b){var c,d=this.document.createElement("span");return d.style.cssText="display:none;line-height:0px;",d.appendChild(this.document.createTextNode("‍")),d.id="_baidu_bookmark_start_"+(b?"":h++),this.collapsed||(c=d.cloneNode(!0),c.id="_baidu_bookmark_end_"+(b?"":h++)),this.insertNode(d),c&&this.collapse().insertNode(c).setEndBefore(c),this.setStartAfter(d),{start:a?d.id:d,end:c?a?c.id:c:null,id:a}},moveToBookmark:function(a){var b=a.id?this.document.getElementById(a.start):a.start,c=a.end&&a.id?this.document.getElementById(a.end):a.end;return this.setStartBefore(b),domUtils.remove(b),c?(this.setEndBefore(c),domUtils.remove(c)):this.collapse(!0),this},enlarge:function(a,b){var c,d,e=domUtils.isBody,f=this.document.createTextNode("");if(a){for(d=this.startContainer,1==d.nodeType?d.childNodes[this.startOffset]?c=d=d.childNodes[this.startOffset]:(d.appendChild(f),c=d=f):c=d;;){if(domUtils.isBlockElm(d)){for(d=c;(c=d.previousSibling)&&!domUtils.isBlockElm(c);)d=c;this.setStartBefore(d);break}c=d,d=d.parentNode}for(d=this.endContainer,1==d.nodeType?((c=d.childNodes[this.endOffset])?d.insertBefore(f,c):d.appendChild(f),c=d=f):c=d;;){if(domUtils.isBlockElm(d)){for(d=c;(c=d.nextSibling)&&!domUtils.isBlockElm(c);)d=c;this.setEndAfter(d);break}c=d,d=d.parentNode}f.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(f)}if(!this.collapsed){for(;!(0!=this.startOffset||b&&b(this.startContainer)||e(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||b&&b(this.endContainer)||e(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(a){for(;!domUtils.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!a)for(;!domUtils.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(a,b,c){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(a){return 1==a.nodeType&&domUtils.isBlockElm(a)}).adjustmentBoundary();for(var d,e,f=this.createBookmark(),g=f.end,h=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase():!domUtils.isWhitespace(a)},i=domUtils.getNextDomNode(f.start,!1,h),j=this.cloneRange();i&&domUtils.getPosition(i,g)&domUtils.POSITION_PRECEDING;)if(3==i.nodeType||dtd[a][i.tagName]){for(j.setStartBefore(i),d=i;d&&(3==d.nodeType||dtd[a][d.tagName])&&d!==g;)e=d,d=domUtils.getNextDomNode(d,1==d.nodeType,null,function(b){return dtd[a][b.tagName]});var k,l=j.setEndAfter(e).extractContents();if(c&&c.length>0){var m,n;n=m=c[0].cloneNode(!1);for(var o,p=1;o=c[p++];)m.appendChild(o.cloneNode(!1)),m=m.firstChild;k=m}else k=j.document.createElement(a);b&&domUtils.setAttributes(k,b),k.appendChild(l),j.insertNode(c?n:k);var q;if("span"==a&&b.style&&/text\-decoration/.test(b.style)&&(q=domUtils.findParentByTagName(k,"a",!0))?(domUtils.setAttributes(q,b),domUtils.remove(k,!0),k=q):(domUtils.mergeSibling(k),domUtils.clearEmptySibling(k)),domUtils.mergeChild(k,b),i=domUtils.getNextDomNode(k,!1,h),domUtils.mergeToParent(k),d===g)break}else i=domUtils.getNextDomNode(i,!0,h);return this.moveToBookmark(f)},removeInlineStyle:function(a){if(this.collapsed)return this;a=utils.isArray(a)?a:[a],this.shrinkBoundary().adjustmentBoundary();for(var b=this.startContainer,c=this.endContainer;;){if(1==b.nodeType){if(utils.indexOf(a,b.tagName.toLowerCase())>-1)break;if("body"==b.tagName.toLowerCase()){b=null;break}}b=b.parentNode}for(;;){if(1==c.nodeType){if(utils.indexOf(a,c.tagName.toLowerCase())>-1)break;if("body"==c.tagName.toLowerCase()){c=null;break}}c=c.parentNode}var d,e,f=this.createBookmark();b&&(e=this.cloneRange().setEndBefore(f.start).setStartBefore(b),d=e.extractContents(),e.insertNode(d),domUtils.clearEmptySibling(b,!0),b.parentNode.insertBefore(f.start,b)),c&&(e=this.cloneRange().setStartAfter(f.end).setEndAfter(c),d=e.extractContents(),e.insertNode(d),domUtils.clearEmptySibling(c,!1,!0),c.parentNode.insertBefore(f.end,c.nextSibling));for(var g,h=domUtils.getNextDomNode(f.start,!1,function(a){return 1==a.nodeType});h&&h!==f.end;)g=domUtils.getNextDomNode(h,!0,function(a){return 1==a.nodeType}),utils.indexOf(a,h.tagName.toLowerCase())>-1&&domUtils.remove(h,!0),h=g;return this.moveToBookmark(f)},getClosedNode:function(){var a;if(!this.collapsed){var c=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(b(c)){var d=c.startContainer.childNodes[c.startOffset];d&&1==d.nodeType&&(dtd.$empty[d.tagName]||dtd.$nonChild[d.tagName])&&(a=d)}}return a},select:browser.ie?function(a,b){var c;this.collapsed||this.shrinkBoundary();var d=this.getClosedNode();if(d&&!b){try{c=this.document.body.createControlRange(),c.addElement(d),c.select()}catch(h){}return this}var j,k=this.createBookmark(),l=k.start;if(c=this.document.body.createTextRange(),c.moveToElementText(l),c.moveStart("character",1),this.collapsed){if(!a&&3!=this.startContainer.nodeType){var m=this.document.createTextNode(i),n=this.document.createElement("span");n.appendChild(this.document.createTextNode(i)),l.parentNode.insertBefore(n,l),l.parentNode.insertBefore(m,l),e(this.document,m),g=m,f(n,"previousSibling"),f(l,"nextSibling"),c.moveStart("character",-1),c.collapse(!0)}}else{var o=this.document.body.createTextRange();j=k.end,o.moveToElementText(j),c.setEndPoint("EndToEnd",o)}this.moveToBookmark(k),n&&domUtils.remove(n);try{c.select()}catch(h){}return this}:function(a){function b(a){function b(b,c,d){3==b.nodeType&&b.nodeValue.length<c&&(a[d+"Offset"]=b.nodeValue.length)}b(a.startContainer,a.startOffset,"start"),b(a.endContainer,a.endOffset,"end")}var c,d=domUtils.getWindow(this.document),h=d.getSelection();if(browser.gecko?this.document.body.focus():d.focus(),h){if(h.removeAllRanges(),this.collapsed&&!a){var j=this.startContainer,k=j;1==j.nodeType&&(k=j.childNodes[this.startOffset]),3==j.nodeType&&this.startOffset||(k?k.previousSibling&&3==k.previousSibling.nodeType:j.lastChild&&3==j.lastChild.nodeType)||(c=this.document.createTextNode(i),this.insertNode(c),e(this.document,c),f(c,"previousSibling"),f(c,"nextSibling"),g=c,this.setStart(c,browser.webkit?1:0).collapse(!0))}var l=this.document.createRange();if(this.collapsed&&browser.opera&&1==this.startContainer.nodeType){var k=this.startContainer.childNodes[this.startOffset];if(k){for(;k&&domUtils.isBlockElm(k)&&1==k.nodeType&&k.childNodes[0];)k=k.childNodes[0];k&&this.setStartBefore(k).collapse(!0)}else k=this.startContainer.lastChild,k&&domUtils.isBr(k)&&this.setStartBefore(k).collapse(!0)}b(this),l.setStart(this.startContainer,this.startOffset),l.setEnd(this.endContainer,this.endOffset),h.addRange(l)}return this},scrollToView:function(a,b){a=a?window:domUtils.getWindow(this.document);var c=this,d=c.document.createElement("span");return d.innerHTML="&nbsp;",c.cloneRange().insertNode(d),domUtils.scrollToView(d,a,b),domUtils.remove(d),c},inFillChar:function(){var a=this.startContainer;return!(!this.collapsed||3!=a.nodeType||a.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1!=a.nodeValue.length)},createAddress:function(a,b){function c(a){for(var c,d=a?e.startContainer:e.endContainer,f=domUtils.findParents(d,!0,function(a){return!domUtils.isBody(a)}),g=[],h=0;c=f[h++];)g.push(domUtils.getNodeIndex(c,b));var i=0;if(b)if(3==d.nodeType){for(var j=d.previousSibling;j&&3==j.nodeType;)i+=j.nodeValue.replace(fillCharReg,"").length,j=j.previousSibling;i+=a?e.startOffset:e.endOffset}else if(d=d.childNodes[a?e.startOffset:e.endOffset])i=domUtils.getNodeIndex(d,b);else{d=a?e.startContainer:e.endContainer;for(var k=d.firstChild;k;)if(domUtils.isFillChar(k))k=k.nextSibling;else if(i++,3==k.nodeType)for(;k&&3==k.nodeType;)k=k.nextSibling;else k=k.nextSibling}else i=a?domUtils.isFillChar(d)?0:e.startOffset:e.endOffset;return i<0&&(i=0),g.push(i),g}var d={},e=this;return d.startAddress=c(!0),a||(d.endAddress=e.collapsed?[].concat(d.startAddress):c()),d},moveToAddress:function(a,b){function c(a,b){for(var c,e,f,g=d.document.body,h=0,i=a.length;h<i;h++)if(f=a[h],c=g,g=g.childNodes[f],!g){e=f;break}b?g?d.setStartBefore(g):d.setStart(c,e):g?d.setEndBefore(g):d.setEnd(c,e)}var d=this;return c(a.startAddress,!0),!b&&a.endAddress&&c(a.endAddress),d},equals:function(a){for(var b in this)if(this.hasOwnProperty(b)&&this[b]!==a[b])return!1;return!0},traversal:function(a,b){if(this.collapsed)return this;for(var c=this.createBookmark(),d=c.end,e=domUtils.getNextDomNode(c.start,!1,b);e&&e!==d&&domUtils.getPosition(e,d)&domUtils.POSITION_PRECEDING;){var f=domUtils.getNextDomNode(e,!1,b);a(e),e=f}return this.moveToBookmark(c)}}}(),function(){function a(a,b){var c=domUtils.getNodeIndex;a=a.duplicate(),a.collapse(b);var d=a.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};for(var e,f,g=d.children,h=a.duplicate(),i=0,j=g.length-1,k=-1;i<=j;){k=Math.floor((i+j)/2),e=g[k],h.moveToElementText(e);var l=h.compareEndPoints("StartToStart",a);if(l>0)j=k-1;else{if(!(l<0))return{container:d,offset:c(e)};i=k+1}}if(k==-1){if(h.moveToElementText(d),h.setEndPoint("StartToStart",a),f=h.text.replace(/(\r\n|\r)/g,"\n").length,g=d.childNodes,!f)return e=g[g.length-1],{container:e,offset:e.nodeValue.length};for(var m=g.length;f>0;)f-=g[--m].nodeValue.length;return{container:g[m],offset:-f}}if(h.collapse(l>0),h.setEndPoint(l>0?"StartToStart":"EndToStart",a),f=h.text.replace(/(\r\n|\r)/g,"\n").length,!f)return dtd.$empty[e.tagName]||dtd.$nonChild[e.tagName]?{container:d,offset:c(e)+(l>0?0:1)}:{container:e,offset:l>0?0:e.childNodes.length};for(;f>0;)try{var n=e;e=e[l>0?"previousSibling":"nextSibling"],f-=e.nodeValue.length}catch(o){return{container:d,offset:c(n)}}return{container:e,offset:l>0?-f:e.nodeValue.length+f}}function b(b,c){if(b.item)c.selectNode(b.item(0));else{var d=a(b,!0);c.setStart(d.container,d.offset),0!=b.compareEndPoints("StartToEnd",b)&&(d=a(b,!1),c.setEnd(d.container,d.offset))}return c}function c(a){var b;try{b=a.getNative().createRange()}catch(c){return null}var d=b.item?b.item(0):b.parentElement();return(d.ownerDocument||d)===a.document?b:null}var d=dom.Selection=function(a){var b,d=this;d.document=a,browser.ie9below&&(b=domUtils.getWindow(a).frameElement,domUtils.on(b,"beforedeactivate",function(){d._bakIERange=d.getIERange()}),domUtils.on(b,"activate",function(){try{!c(d)&&d._bakIERange&&d._bakIERange.select()}catch(a){}d._bakIERange=null})),b=a=null};d.prototype={rangeInBody:function(a,b){var c=browser.ie9below||b?a.item?a.item():a.parentElement():a.startContainer;return c===this.document.body||domUtils.inDoc(c,this.document)},getNative:function(){var a=this.document;try{return a?browser.ie9below?a.selection:domUtils.getWindow(a).getSelection():null}catch(b){return null}},getIERange:function(){var a=c(this);return!a&&this._bakIERange?this._bakIERange:a},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var a=this.getStart();return a?domUtils.findParents(a,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var a=c(this);return!(!a||!this.rangeInBody(a))}return!!this.getNative().rangeCount}catch(b){return!1}},getRange:function(){function a(a){for(var b=c.document.body.firstChild,d=a.collapsed;b&&b.firstChild;)a.setStart(b,0),b=b.firstChild;a.startContainer||a.setStart(c.document.body,0),d&&a.collapse(!0)}var c=this;if(null!=c._cachedRange)return this._cachedRange;var d=new baidu.editor.dom.Range(c.document);if(browser.ie9below){var e=c.getIERange();if(e)try{b(e,d)}catch(f){a(d)}else a(d)}else{var g=c.getNative();if(g&&g.rangeCount){var h=g.getRangeAt(0),i=g.getRangeAt(g.rangeCount-1);d.setStart(h.startContainer,h.startOffset).setEnd(i.endContainer,i.endOffset),d.collapsed&&domUtils.isBody(d.startContainer)&&!d.startOffset&&a(d)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;a(d)}}return this._bakRange=d},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var a,b,c,d,e=browser.ie9below?this.getIERange():this.getRange();if(browser.ie9below){if(!e)return this.document.body.firstChild;if(e.item)return e.item(0);for(a=e.duplicate(),a.text.length>0&&a.moveStart("character",1),a.collapse(1),b=a.parentElement(),d=c=e.parentElement();c=c.parentNode;)if(c==b){b=d;break}}else if(e.shrinkBoundary(),b=e.startContainer,1==b.nodeType&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,e.startOffset)]),3==b.nodeType)return b.parentNode;return b},getText:function(){var a,b;return this.isFocus()&&(a=this.getNative())?(b=browser.ie9below?a.createRange():a.getRangeAt(0),browser.ie9below?b.text:b.toString()):""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}}(),function(){function a(a,b){var c;if(b.textarea)if(utils.isString(b.textarea)){for(var d,e=0,f=domUtils.getElementsByTagName(a,"textarea");d=f[e++];)if(d.id=="ueditor_textarea_"+b.options.textarea){c=d;break}}else c=b.textarea;c||(a.appendChild(c=domUtils.createElement(document,"textarea",{name:b.options.textarea,id:"ueditor_textarea_"+b.options.textarea,style:"display:none"})),b.textarea=c),!c.getAttribute("name")&&c.setAttribute("name",b.options.textarea),c.value=b.hasContents()?b.options.allHtmlEnabled?b.getAllHtml():b.getContent(null,null,!0):""}function b(a){for(var b in a)return b}function c(a){a.langIsReady=!0,a.fireEvent("langReady")}var d,e=0,f=UE.Editor=function(a){var d=this;d.uid=e++,EventBase.call(d),d.commands={},d.options=utils.extend(utils.clone(a||{}),UEDITOR_CONFIG,!0),d.shortcutkeys={},d.inputRules=[],d.outputRules=[],d.setOpt(f.defaultOptions(d)),d.loadServerConfig(),utils.isEmptyObject(UE.I18N)?utils.loadFile(document,{src:d.options.langPath+d.options.lang+"/"+d.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(d),c(d)}):(d.options.lang=b(UE.I18N),UE.plugin.load(d),c(d)),UE.instants["ueditorInstant"+d.uid]=d};f.prototype={registerCommand:function(a,b){this.commands[a]=b},ready:function(a){var b=this;a&&(b.isReady?a.apply(b):b.addListener("ready",a))},setOpt:function(a,b){var c={};utils.isString(a)?c[a]=b:c=a,utils.extend(this.options,c,!0)},getOpt:function(a){return this.options[a]},destroy:function(){var a=this;a.fireEvent("destroy");var b=a.container.parentNode,c=a.textarea;c?c.style.display="":(c=document.createElement("textarea"),b.parentNode.insertBefore(c,b)),c.style.width=a.iframe.offsetWidth+"px",c.style.height=a.iframe.offsetHeight+"px",c.value=a.getContent(),c.id=a.key,b.innerHTML="",domUtils.remove(b);var d=a.key;for(var e in a)a.hasOwnProperty(e)&&delete this[e];UE.delEditor(d)},render:function(a){var b=this,c=b.options,d=function(b){return parseInt(domUtils.getComputedStyle(a,b))};if(utils.isString(a)&&(a=document.getElementById(a)),a){c.initialFrameWidth?c.minFrameWidth=c.initialFrameWidth:c.minFrameWidth=c.initialFrameWidth=a.offsetWidth,c.initialFrameHeight?c.minFrameHeight=c.initialFrameHeight:c.initialFrameHeight=c.minFrameHeight=a.offsetHeight,a.style.width=/%$/.test(c.initialFrameWidth)?"100%":c.initialFrameWidth-d("padding-left")-d("padding-right")+"px",a.style.height=/%$/.test(c.initialFrameHeight)?"100%":c.initialFrameHeight-d("padding-top")-d("padding-bottom")+"px",a.style.zIndex=c.zIndex;var e=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>"+(c.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(c.iframeCssUrl)+"'/>":"")+(c.initialStyle?"<style>"+c.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+b.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>";a.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+b.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(c.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+e+'");document.close();}())'})),a.style.overflow="hidden",setTimeout(function(){/%$/.test(c.initialFrameWidth)&&(c.minFrameWidth=c.initialFrameWidth=a.offsetWidth),/%$/.test(c.initialFrameHeight)&&(c.minFrameHeight=c.initialFrameHeight=a.offsetHeight,a.style.height=c.initialFrameHeight+"px")})}},_setup:function(b){var c=this,d=c.options;ie?(b.body.disabled=!0,b.body.contentEditable=!0,b.body.disabled=!1):b.body.contentEditable=!0,b.body.spellcheck=!1,c.document=b,c.window=b.defaultView||b.parentWindow,c.iframe=c.window.frameElement,c.body=b.body,c.selection=new dom.Selection(b);var e;browser.gecko&&(e=this.selection.getNative())&&e.removeAllRanges(),this._initEvents();for(var f=this.iframe.parentNode;!domUtils.isBody(f);f=f.parentNode)if("FORM"==f.tagName){c.form=f,c.options.autoSyncData?domUtils.on(c.window,"blur",function(){a(f,c)}):domUtils.on(f,"submit",function(){a(this,c)});break}if(d.initialContent)if(d.autoClearinitialContent){var g=c.execCommand;c.execCommand=function(){return c.fireEvent("firstBeforeExecCommand"),g.apply(c,arguments)},this._setDefaultContent(d.initialContent)}else this.setContent(d.initialContent,!1,!0);domUtils.isEmptyNode(c.body)&&(c.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),d.focus&&setTimeout(function(){c.focus(c.options.focusInEnd),!c.options.autoClearinitialContent&&c._selectionChange()},0),c.container||(c.container=this.iframe.parentNode),d.fullscreen&&c.ui&&c.ui.setFullScreen(!0);try{c.document.execCommand("2D-position",!1,!1)}catch(h){}try{c.document.execCommand("enableInlineTableEditing",!1,!1)}catch(h){}try{c.document.execCommand("enableObjectResizing",!1,!1)}catch(h){}c._bindshortcutKeys(),c.isReady=1,c.fireEvent("ready"),d.onready&&d.onready.call(c),browser.ie9below||domUtils.on(c.window,["blur","focus"],function(a){if("blur"==a.type){c._bakRange=c.selection.getRange();try{c._bakNativeRange=c.selection.getNative().getRangeAt(0),c.selection.getNative().removeAllRanges()}catch(a){c._bakNativeRange=null}}else try{c._bakRange&&c._bakRange.select()}catch(a){}}),browser.gecko&&browser.version<=10902&&(c.body.contentEditable=!1,setTimeout(function(){c.body.contentEditable=!0},100),setInterval(function(){c.body.style.height=c.iframe.offsetHeight-20+"px"},100)),!d.isShow&&c.setHide(),d.readonly&&c.setDisabled()},sync:function(b){var c=this,d=b?document.getElementById(b):domUtils.findParent(c.iframe.parentNode,function(a){return"FORM"==a.tagName},!0);d&&a(d,c)},setHeight:function(a,b){a!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=a+"px"),!b&&(this.options.minFrameHeight=this.options.initialFrameHeight=a),this.body.style.height=a+"px",!b&&this.trigger("setHeight")},addshortcutkey:function(a,b){var c={};b?c[a]=b:c=a,utils.extend(this.shortcutkeys,c)},_bindshortcutKeys:function(){var a=this,b=this.shortcutkeys;a.addListener("keydown",function(c,d){var e=d.keyCode||d.which;for(var f in b)for(var g,h=b[f].split(","),i=0;g=h[i++];){g=g.split(":");var j=g[0],k=g[1];(/^(ctrl)(\+shift)?\+(\d+)$/.test(j.toLowerCase())||/^(\d+)$/.test(j))&&(("ctrl"==RegExp.$1?d.ctrlKey||d.metaKey:0)&&(""!=RegExp.$2?d[RegExp.$2.slice(1)+"Key"]:1)&&e==RegExp.$3||e==RegExp.$1)&&(a.queryCommandState(f,k)!=-1&&a.execCommand(f,k),domUtils.preventDefault(d))}})},getContent:function(a,b,c,d,e){var f=this;if(a&&utils.isFunction(a)&&(b=a,a=""),b?!b():!this.hasContents())return"";f.fireEvent("beforegetcontent");var g=UE.htmlparser(f.body.innerHTML,d);return f.filterOutputRule(g),f.fireEvent("aftergetcontent",a,g),g.toHtml(e)},getAllHtml:function(){var a=this,b=[];if(a.fireEvent("getAllHtml",b),browser.ie&&browser.version>8){var c="";utils.each(a.document.styleSheets,function(a){c+=a.href?'<link rel="stylesheet" type="text/css" href="'+a.href+'" />':"<style>"+a.cssText+"</style>"}),utils.each(a.document.getElementsByTagName("script"),function(a){c+=a.outerHTML})}return"<html><head>"+(a.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+a.options.charset+'"/>':"")+(c||a.document.getElementsByTagName("head")[0].innerHTML)+b.join("\n")+"</head><body "+(ie&&browser.version<9?'class="view"':"")+">"+a.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var a=new RegExp(domUtils.fillChar,"g"),b=this.body.innerHTML.replace(/[\n\r]/g,"");return b=b.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>\/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(a,b,c){return dtd.$block[c]?"\n":b?b:""}),b.replace(a,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var a=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(a,"").replace(/\u00a0/g," ")},setContent:function(b,c,d){function e(a){return"DIV"==a.tagName&&a.getAttribute("cdata_tag")}var f=this;f.fireEvent("beforesetcontent",b);var g=UE.htmlparser(b);if(f.filterInputRule(g),b=g.toHtml(),f.body.innerHTML=(c?f.body.innerHTML:"")+b,"p"==f.options.enterTag){var h,i=this.body.firstChild;if(!i||1==i.nodeType&&(dtd.$cdata[i.tagName]||e(i)||domUtils.isCustomeNode(i))&&i===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var j=f.document.createElement("p");i;){for(;i&&(3==i.nodeType||1==i.nodeType&&dtd.p[i.tagName]&&!dtd.$cdata[i.tagName]);)h=i.nextSibling,j.appendChild(i),i=h;if(j.firstChild){if(!i){f.body.appendChild(j);break}i.parentNode.insertBefore(j,i),j=f.document.createElement("p")}i=i.nextSibling}}f.fireEvent("aftersetcontent"),f.fireEvent("contentchange"),!d&&f._selectionChange(),f._bakRange=f._bakIERange=f._bakNativeRange=null;var k;browser.gecko&&(k=this.selection.getNative())&&k.removeAllRanges(),f.options.autoSyncData&&f.form&&a(f.form,f)},focus:function(a){try{var b=this,c=b.selection.getRange();if(a){var d=b.body.lastChild;d&&1==d.nodeType&&!dtd.$empty[d.tagName]&&(domUtils.isEmptyBlock(d)?c.setStartAtFirst(d):c.setStartAtLast(d),c.collapse(!0)),c.setCursor(!0)}else{if(!c.collapsed&&domUtils.isBody(c.startContainer)&&0==c.startOffset){var d=b.body.firstChild;d&&1==d.nodeType&&!dtd.$empty[d.tagName]&&c.setStartAtFirst(d).collapse(!0)}c.select(!0)}this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var a=this.selection.getNative();if(a.empty&&browser.ie){var b=document.body.createTextRange();b.moveToElementText(document.body),b.collapse(!0),b.select(),a.empty()}else a.removeAllRanges()},_initEvents:function(){var a=this,b=a.document,c=a.window;a._proxyDomEvent=utils.bind(a._proxyDomEvent,a),domUtils.on(b,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],a._proxyDomEvent),domUtils.on(c,["focus","blur"],a._proxyDomEvent),domUtils.on(a.body,"drop",function(b){browser.gecko&&b.stopPropagation&&b.stopPropagation(),a.fireEvent("contentchange")}),domUtils.on(b,["mouseup","keydown"],function(b){"keydown"==b.type&&(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)||2!=b.button&&a._selectionChange(250,b)})},_proxyDomEvent:function(a){return this.fireEvent("before"+a.type.replace(/^on/,"").toLowerCase())!==!1&&(this.fireEvent(a.type.replace(/^on/,""),a)!==!1&&this.fireEvent("after"+a.type.replace(/^on/,"").toLowerCase()))},_selectionChange:function(a,b){var c,e,f=this,g=!1;if(browser.ie&&browser.version<9&&b&&"mouseup"==b.type){var h=this.selection.getRange();h.collapsed||(g=!0,c=b.clientX,e=b.clientY)}clearTimeout(d),d=setTimeout(function(){if(f.selection&&f.selection.getNative()){var a;if(g&&"None"==f.selection.getNative().type){a=f.document.body.createTextRange();try{a.moveToPoint(c,e)}catch(d){a=null}}var h;a&&(h=f.selection.getIERange,f.selection.getIERange=function(){return a}),f.selection.cache(),h&&(f.selection.getIERange=h),f.selection._cachedRange&&f.selection._cachedStartElement&&(f.fireEvent("beforeselectionchange"),f.fireEvent("selectionchange",!!b),f.fireEvent("afterselectionchange"),f.selection.clear())}},a||50)},_callCmdFn:function(a,b){var c,d,e=b[0].toLowerCase();return c=this.commands[e]||UE.commands[e],d=c&&c[a],c&&d||"queryCommandState"!=a?d?d.apply(this,b):void 0:0},execCommand:function(a){a=a.toLowerCase();var b,c=this,d=c.commands[a]||UE.commands[a];return d&&d.execCommand?(d.notNeedUndo||c.__hasEnterExecCommand?(b=this._callCmdFn("execCommand",arguments),!c.__hasEnterExecCommand&&!d.ignoreContentChange&&!c._ignoreContentChange&&c.fireEvent("contentchange")):(c.__hasEnterExecCommand=!0,c.queryCommandState.apply(c,arguments)!=-1&&(c.fireEvent("saveScene"),c.fireEvent.apply(c,["beforeexeccommand",a].concat(arguments)),b=this._callCmdFn("execCommand",arguments),c.fireEvent.apply(c,["afterexeccommand",a].concat(arguments)),c.fireEvent("saveScene")),c.__hasEnterExecCommand=!1),!c.__hasEnterExecCommand&&!d.ignoreContentChange&&!c._ignoreContentChange&&c._selectionChange(),b):null},queryCommandState:function(a){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(a){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(a){if(a)for(var b,c=0;b=a[c++];)if(this.document.getElementsByTagName(b).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;for(a=["div"],c=0;b=a[c++];)for(var d,e=domUtils.getElementsByTagName(this.document,b),f=0;d=e[f++];)if(domUtils.isCustomeNode(d))return!0;return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var a,b=this;if("false"==b.body.contentEditable){b.body.contentEditable=!0,a=b.selection.getRange();try{a.moveToBookmark(b.lastBk),delete b.lastBk}catch(c){a.setStartAtFirst(b.body).collapse(!0)}a.select(!0),b.bkqueryCommandState&&(b.queryCommandState=b.bkqueryCommandState,delete b.bkqueryCommandState),b.bkqueryCommandValue&&(b.queryCommandValue=b.bkqueryCommandValue,delete b.bkqueryCommandValue),b.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(a){var b=this;a=a?utils.isArray(a)?a:[a]:[],"true"==b.body.contentEditable&&(b.lastBk||(b.lastBk=b.selection.getRange().createBookmark(!0)),b.body.contentEditable=!1,b.bkqueryCommandState=b.queryCommandState,b.bkqueryCommandValue=b.queryCommandValue,b.queryCommandState=function(c){return utils.indexOf(a,c)!=-1?b.bkqueryCommandState.apply(b,arguments):-1},b.queryCommandValue=function(c){return utils.indexOf(a,c)!=-1?b.bkqueryCommandValue.apply(b,arguments):null},b.fireEvent("selectionchange"))},disable:function(a){return this.setDisabled(a)},_setDefaultContent:function(){function a(){var b=this;b.document.getElementById("initContent")&&(b.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",b.removeListener("firstBeforeExecCommand focus",a),setTimeout(function(){b.focus(),b._selectionChange()},0))}return function(b){var c=this;c.body.innerHTML='<p id="initContent">'+b+"</p>",c.addListener("firstBeforeExecCommand focus",a)}}(),setShow:function(){var a=this,b=a.selection.getRange();if("none"==a.container.style.display){try{b.moveToBookmark(a.lastBk),delete a.lastBk}catch(c){b.setStartAtFirst(a.body).collapse(!0)}setTimeout(function(){b.select(!0)},100),a.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){
var a=this;a.lastBk||(a.lastBk=a.selection.getRange().createBookmark(!0)),a.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(a){var b=UE.I18N[this.options.lang];if(!b)throw Error("not import language file");a=(a||"").split(".");for(var c,d=0;(c=a[d++])&&(b=b[c],b););return b},getContentLength:function(a,b){var c=this.getContent(!1,!1,!0).length;if(a){b=(b||[]).concat(["hr","img","iframe"]),c=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var d,e=0;d=b[e++];)c+=this.document.getElementsByTagName(d).length}return c},addInputRule:function(a){this.inputRules.push(a)},filterInputRule:function(a){for(var b,c=0;b=this.inputRules[c++];)b.call(this,a)},addOutputRule:function(a){this.outputRules.push(a)},filterOutputRule:function(a){for(var b,c=0;b=this.outputRules[c++];)b.call(this,a)},getActionUrl:function(a){var b=this.getOpt(a)||a,c=this.getOpt("imageUrl"),d=this.getOpt("serverUrl");return!d&&c&&(d=c.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),d?(d=d+(d.indexOf("?")==-1?"?":"&")+"action="+(b||""),utils.formatUrl(d)):""}},utils.inherits(f,EventBase)}(),UE.Editor.defaultOptions=function(a){var b=a.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:b+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:b+"lang/",theme:"default",themePath:b+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){UE.Editor.prototype.loadServerConfig=function(){function showErrorMsg(a){console&&console.error(a)}var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=!1,configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config),me.fireEvent("serverConfigLoaded"),me._serverConfigLoaded=!0}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){var a=this;return a._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(a){if(a&&utils.isFunction(a)){var b=this,c=function(){a.apply(b,arguments),b.removeListener("serverConfigLoaded",c)};b.isServerConfigLoaded()?a.call(b,"serverConfigLoaded"):b.addListener("serverConfigLoaded",c)}}}(),UE.ajax=function(){function a(a){var b=[];for(var c in a)if("method"!=c&&"timeout"!=c&&"async"!=c&&"dataType"!=c&&"callback"!=c&&void 0!=a[c]&&null!=a[c])if("function"!=(typeof a[c]).toLowerCase()&&"object"!=(typeof a[c]).toLowerCase())b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));else if(utils.isArray(a[c]))for(var d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"[]="+encodeURIComponent(a[c][d]));return b.join("&")}function b(b,c){var d=f(),e=!1,g={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};if("object"==typeof b&&(c=b,b=c.url),d&&b){var h=c?utils.extend(g,c):g,i=a(h);utils.isEmptyObject(h.data)||(i+=(i?"&":"")+a(h.data));var j=setTimeout(function(){4!=d.readyState&&(e=!0,d.abort(),clearTimeout(j))},h.timeout),k=h.method.toUpperCase(),l=b+(b.indexOf("?")==-1?"?":"&")+("POST"==k?"":i+"&noCache="+ +new Date);d.open(k,l,h.async),d.onreadystatechange=function(){4==d.readyState&&(e||200!=d.status?h.onerror(d):h.onsuccess(d))},"POST"==k?(d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(i)):d.send(null)}}function c(b,c){function d(a,b,c){a.setAttribute("type","text/javascript"),a.setAttribute("defer","defer"),c&&a.setAttribute("charset",c),a.setAttribute("src",b),document.getElementsByTagName("head")[0].appendChild(a)}function e(a){return function(){try{if(a)k.onerror&&k.onerror();else try{clearTimeout(g),i.apply(window,arguments)}catch(b){}}catch(c){k.onerror&&k.onerror.call(window,c)}finally{k.oncomplete&&k.oncomplete.apply(window,arguments),j.parentNode&&j.parentNode.removeChild(j),window[f]=null;try{delete window[f]}catch(b){}}}}var f,g,h,i=c.onsuccess||function(){},j=document.createElement("SCRIPT"),k=c||{},l=k.charset,m=k.jsonp||"callback",n=k.timeOut||0,o=new RegExp("(\\?|&)"+m+"=([^&]*)");utils.isFunction(i)?(f="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36),window[f]=e(0)):utils.isString(i)?f=i:(h=o.exec(b))&&(f=h[2]),b=b.replace(o,"$1"+m+"="+f),b.search(o)<0&&(b+=(b.indexOf("?")<0?"?":"&")+m+"="+f);var p=a(c);utils.isEmptyObject(c.data)||(p+=(p?"&":"")+a(c.data)),p&&(b=b.replace(/\?/,"?"+p+"&")),j.onerror=e(1),n&&(g=setTimeout(e(1),n)),d(j,b,l)}var d="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),d="ActiveXObject('Msxml2.XMLHTTP')"}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP"),d="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}var f=new Function("return new "+d);return{request:function(a,d){d&&"jsonp"==d.dataType?c(a,d):b(a,d)},getJSONP:function(a,b,d){var e={data:b,oncomplete:d};c(a,e)}}}();var filterWord=UE.filterWord=function(){function a(a){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(a)}function b(a){return a=a.replace(/[\d.]+\w+/g,function(a){return utils.transUnitToPx(a)})}function c(a){return a.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(a){if(browser.opera)return"";try{if(/Bitmap/i.test(a))return"";var c=a.match(/width:([ \d.]*p[tx])/i)[1],d=a.match(/height:([ \d.]*p[tx])/i)[1],e=a.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+b(c)+'" height="'+b(d)+'" src="'+e+'" />'}catch(f){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(a,b,c,d){return"class"==b&&"MsoListParagraph"==d?a:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(a,b,c){return c.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(a,c,d,e){for(var f,g=[],h=e.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(a){return utils.transUnitToPx(a)}).split(/;\s*/g),i=0;f=h[i];i++){var j,k,l=f.split(":");if(2==l.length){if(j=l[0].toLowerCase(),k=l[1].toLowerCase(),/^(background)\w*/.test(j)&&0==k.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(j)&&/^0\w+$/.test(k))continue;switch(j){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(c)||(g[i]=j.replace(/^mso-|-alt$/g,"")+":"+b(k));continue;case"horiz-align":g[i]="text-align:"+k;continue;case"vert-align":g[i]="vertical-align:"+k;continue;case"font-color":case"mso-foreground":g[i]="color:"+k;continue;case"mso-background":case"mso-highlight":g[i]="background:"+k;continue;case"mso-default-height":g[i]="min-height:"+b(k);continue;case"mso-default-width":g[i]="min-width:"+b(k);continue;case"mso-padding-between-alt":g[i]="border-collapse:separate;border-spacing:"+b(k);continue;case"text-line-through":"single"!=k&&"double"!=k||(g[i]="text-decoration:line-through");continue;case"mso-zero-height":"yes"==k&&(g[i]="display:none");continue;case"margin":if(!/[1-9]/.test(k))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(j)||/text\-indent|padding|margin/.test(j)&&/\-[\d.]+/.test(k))continue;g[i]=j+":"+l[1]}}return c+(g.length?' style="'+g.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(b){return a(b)?c(b):b}}();!function(){function a(a,b,c){return a.push(n),b+(c?1:-1)}function b(a,b){for(var c=0;c<b;c++)a.push(m)}function c(g,h,i,j){switch(g.type){case"root":for(var k,l=0;k=g.children[l++];)i&&"element"==k.type&&!dtd.$inlineWithA[k.tagName]&&l>1&&(a(h,j,!0),b(h,j)),c(k,h,i,j);break;case"text":d(g,h);break;case"element":e(g,h,i,j);break;case"comment":f(g,h,i)}return h}function d(a,b){"pre"==a.parentNode.tagName?b.push(a.data):b.push(l[a.parentNode.tagName]?utils.html(a.data):a.data.replace(/[ ]{2}/g," &nbsp;"))}function e(d,e,f,g){var h="";if(d.attrs){h=[];var i=d.attrs;for(var j in i)h.push(j+(void 0!==i[j]?'="'+(k[j]?utils.html(i[j]).replace(/["]/g,function(a){return"&quot;"}):utils.unhtml(i[j]))+'"':""));h=h.join(" ")}if(e.push("<"+d.tagName+(h?" "+h:"")+(dtd.$empty[d.tagName]?"/":"")+">"),f&&!dtd.$inlineWithA[d.tagName]&&"pre"!=d.tagName&&d.children&&d.children.length&&(g=a(e,g,!0),b(e,g)),d.children&&d.children.length)for(var l,m=0;l=d.children[m++];)f&&"element"==l.type&&!dtd.$inlineWithA[l.tagName]&&m>1&&(a(e,g),b(e,g)),c(l,e,f,g);dtd.$empty[d.tagName]||(f&&!dtd.$inlineWithA[d.tagName]&&"pre"!=d.tagName&&d.children&&d.children.length&&(g=a(e,g),b(e,g)),e.push("</"+d.tagName+">"))}function f(a,b){b.push("<!--"+a.data+"-->")}function g(a,b){var c;if("element"==a.type&&a.getAttr("id")==b)return a;if(a.children&&a.children.length)for(var d,e=0;d=a.children[e++];)if(c=g(d,b))return c}function h(a,b,c){if("element"==a.type&&a.tagName==b&&c.push(a),a.children&&a.children.length)for(var d,e=0;d=a.children[e++];)h(d,b,c)}function i(a,b){if(a.children&&a.children.length)for(var c,d=0;c=a.children[d];)i(c,b),c.parentNode&&(c.children&&c.children.length&&b(c),c.parentNode&&d++);else b(a)}var j=UE.uNode=function(a){this.type=a.type,this.data=a.data,this.tagName=a.tagName,this.parentNode=a.parentNode,this.attrs=a.attrs||{},this.children=a.children},k={href:1,src:1,_src:1,_href:1,cdata_data:1},l={style:1,script:1},m="    ",n="\n";j.createElement=function(a){return/[<>]/.test(a)?UE.htmlparser(a).children[0]:new j({type:"element",children:[],tagName:a})},j.createText=function(a,b){return new UE.uNode({type:"text",data:b?a:utils.unhtml(a||"")})},j.prototype={toHtml:function(a){var b=[];return c(this,b,a,0),b.join("")},innerHTML:function(a){if("element"!=this.type||dtd.$empty[this.tagName])return this;if(utils.isString(a)){if(this.children)for(var b,c=0;b=this.children[c++];)b.parentNode=null;this.children=[];for(var b,d=UE.htmlparser(a),c=0;b=d.children[c++];)this.children.push(b),b.parentNode=this;return this}var d=new UE.uNode({type:"root",children:this.children});return d.toHtml()},innerText:function(a,b){if("element"!=this.type||dtd.$empty[this.tagName])return this;if(a){if(this.children)for(var c,d=0;c=this.children[d++];)c.parentNode=null;return this.children=[],this.appendChild(j.createText(a,b)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var a,b=this.parentNode,c=0;a=b.children[c];c++)if(a===this)return 0==c?null:b.children[c-1]},nextSibling:function(){for(var a,b=this.parentNode,c=0;a=b.children[c++];)if(a===this)return b.children[c]},replaceChild:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var c,d=0;c=this.children[d];d++)if(c===b)return this.children.splice(d,1,a),b.parentNode=null,a.parentNode=this,a}},appendChild:function(a){if("root"==this.type||"element"==this.type&&!dtd.$empty[this.tagName]){this.children||(this.children=[]),a.parentNode&&a.parentNode.removeChild(a);for(var b,c=0;b=this.children[c];c++)if(b===a){this.children.splice(c,1);break}return this.children.push(a),a.parentNode=this,a}},insertBefore:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var c,d=0;c=this.children[d];d++)if(c===b)return this.children.splice(d,0,a),a.parentNode=this,a}},insertAfter:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var c,d=0;c=this.children[d];d++)if(c===b)return this.children.splice(d+1,0,a),a.parentNode=this,a}},removeChild:function(a,b){if(this.children)for(var c,d=0;c=this.children[d];d++)if(c===a){if(this.children.splice(d,1),c.parentNode=null,b&&c.children&&c.children.length)for(var e,f=0;e=c.children[f];f++)this.children.splice(d+f,0,e),e.parentNode=this;return c}},getAttr:function(a){return this.attrs&&this.attrs[a.toLowerCase()]},setAttr:function(a,b){if(!a)return void delete this.attrs;if(this.attrs||(this.attrs={}),utils.isObject(a))for(var c in a)a[c]?this.attrs[c.toLowerCase()]=a[c]:delete this.attrs[c];else b?this.attrs[a.toLowerCase()]=b:delete this.attrs[a]},getIndex:function(){for(var a,b=this.parentNode,c=0;a=b.children[c];c++)if(a===this)return c;return-1},getNodeById:function(a){var b;if(this.children&&this.children.length)for(var c,d=0;c=this.children[d++];)if(b=g(c,a))return b},getNodesByTagName:function(a){a=utils.trim(a).replace(/[ ]{2,}/g," ").split(" ");var b=[],c=this;return utils.each(a,function(a){if(c.children&&c.children.length)for(var d,e=0;d=c.children[e++];)h(d,a,b)}),b},getStyle:function(a){var b=this.getAttr("style");if(!b)return"";var c=new RegExp("(^|;)\\s*"+a+":([^;]+)","i"),d=b.match(c);return d&&d[0]?d[2]:""},setStyle:function(a,b){function c(a,b){var c=new RegExp("(^|;)\\s*"+a+":([^;]+;?)","gi");d=d.replace(c,"$1"),b&&(d=a+":"+utils.unhtml(b)+";"+d)}var d=this.getAttr("style");if(d||(d=""),utils.isObject(a))for(var e in a)c(e,a[e]);else c(a,b);this.setAttr("style",utils.trim(d))},traversal:function(a){return this.children&&this.children.length&&i(this,a),this}}}();var htmlparser=UE.htmlparser=function(a,b){function c(a,b){if(m[a.tagName]){var c=k.createElement(m[a.tagName]);a.appendChild(c),c.appendChild(k.createText(b)),a=c}else a.appendChild(k.createText(b))}function d(a,b,c){var e;if(e=l[b]){for(var f,h=a;"root"!=h.type;){if(utils.isArray(e)?utils.indexOf(e,h.tagName)!=-1:e==h.tagName){a=h,f=!0;break}h=h.parentNode}f||(a=d(a,utils.isArray(e)?e[0]:e))}var i=new k({parentNode:a,type:"element",tagName:b.toLowerCase(),children:dtd.$empty[b]?null:[]});if(c){for(var m,n={};m=g.exec(c);)n[m[1].toLowerCase()]=j[m[1].toLowerCase()]?m[2]||m[3]||m[4]:utils.unhtml(m[2]||m[3]||m[4]);i.attrs=n}return a.children.push(i),dtd.$empty[b]?a:i}function e(a,b){a.children.push(new k({type:"comment",data:b,parentNode:a}))}var f=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,g=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,h={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};a=a.replace(new RegExp(domUtils.fillChar,"g"),""),b||(a=a.replace(new RegExp("[\\r\\t\\n"+(b?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(b?"":" ")+"]*","g"),function(a,c){return c&&h[c.toLowerCase()]?a.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):a.replace(new RegExp("^[\\r\\n"+(b?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(b?"":" ")+"]+$"),"")}));for(var i,j={href:1,src:1},k=UE.uNode,l={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},m={ol:"li",ul:"li"},n=0,o=0,p=new k({type:"root",children:[]}),q=p;i=f.exec(a);){n=i.index;try{if(n>o&&c(q,a.slice(o,n)),i[3])dtd.$cdata[q.tagName]?c(q,i[0]):q=d(q,i[3].toLowerCase(),i[4]);else if(i[1]){if("root"!=q.type)if(dtd.$cdata[q.tagName]&&!dtd.$cdata[i[1]])c(q,i[0]);else{for(var r=q;"element"==q.type&&q.tagName!=i[1].toLowerCase();)if(q=q.parentNode,"root"==q.type)throw q=r,"break";q=q.parentNode}}else i[2]&&e(q,i[2])}catch(s){}o=f.lastIndex}return o<a.length&&c(q,a.slice(o)),p},filterNode=UE.filterNode=function(){function a(b,c){switch(b.type){case"text":break;case"element":var d;if(d=c[b.tagName])if("-"===d)b.parentNode.removeChild(b);else if(utils.isFunction(d)){var e=b.parentNode,f=b.getIndex();if(d(b),b.parentNode){if(b.children)for(var g,h=0;g=b.children[h];)a(g,c),g.parentNode&&h++}else for(var g,h=f;g=e.children[h];)a(g,c),g.parentNode&&h++}else{var i=d.$;if(i&&b.attrs){var j,k={};for(var l in i){if(j=b.getAttr(l),"style"==l&&utils.isArray(i[l])){var m=[];utils.each(i[l],function(a){var c;(c=b.getStyle(a))&&m.push(a+":"+c)}),j=m.join(";")}j&&(k[l]=j)}b.attrs=k}if(b.children)for(var g,h=0;g=b.children[h];)a(g,c),g.parentNode&&h++}else if(dtd.$cdata[b.tagName])b.parentNode.removeChild(b);else{var e=b.parentNode,f=b.getIndex();b.parentNode.removeChild(b,!0);for(var g,h=f;g=e.children[h];)a(g,c),g.parentNode&&h++}break;case"comment":b.parentNode.removeChild(b)}}return function(b,c){if(utils.isEmptyObject(c))return b;var d;(d=c["-"])&&utils.each(d.split(" "),function(a){c[a]="-"});for(var e,f=0;e=b.children[f];)a(e,c),e.parentNode&&f++;return b}}();UE.plugin=function(){var a={};return{register:function(b,c,d,e){d&&utils.isFunction(d)&&(e=d,d=null),a[b]={optionName:d||b,execFn:c,afterDisabled:e}},load:function(b){utils.each(a,function(a){var c=a.execFn.call(b);b.options[a.optionName]!==!1?c&&utils.each(c,function(a,c){switch(c.toLowerCase()){case"shortcutkey":b.addshortcutkey(a);break;case"bindevents":utils.each(a,function(a,c){b.addListener(c,a)});break;case"bindmultievents":utils.each(utils.isArray(a)?a:[a],function(a){var c=utils.trim(a.type).split(/\s+/);utils.each(c,function(c){b.addListener(c,a.handler)})});break;case"commands":utils.each(a,function(a,c){b.commands[c]=a});break;case"outputrule":b.addOutputRule(a);break;case"inputrule":b.addInputRule(a);break;case"defaultoptions":b.setOpt(a)}}):a.afterDisabled&&a.afterDisabled.call(b)}),utils.each(UE.plugins,function(a){a.call(b)})},run:function(b,c){var d=a[b];d&&d.exeFn.call(c)}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},LocalStorage=UE.LocalStorage=function(){function a(){var a=document.createElement("div");return a.style.display="none",a.addBehavior?(a.addBehavior("#default#userdata"),{getItem:function(b){var d=null;try{document.body.appendChild(a),a.load(c),d=a.getAttribute(b),document.body.removeChild(a)}catch(e){}return d},setItem:function(b,d){document.body.appendChild(a),a.setAttribute(b,d),a.save(c),document.body.removeChild(a)},removeItem:function(b){document.body.appendChild(a),a.removeAttribute(b),a.save(c),document.body.removeChild(a)}}):null}var b=window.localStorage||a()||null,c="localStorage";return{saveLocalData:function(a,c){return!(!b||!c)&&(b.setItem(a,c),!0)},getLocalData:function(a){return b?b.getItem(a):null},removeItem:function(a){b&&b.removeItem(a)}}}();!function(){var a="ueditor_preference";UE.Editor.prototype.setPreferences=function(b,c){var d={};utils.isString(b)?d[b]=c:d=b;var e=LocalStorage.getLocalData(a);e&&(e=utils.str2json(e))?utils.extend(e,d):e=d,e&&LocalStorage.saveLocalData(a,utils.json2str(e))},UE.Editor.prototype.getPreferences=function(b){var c=LocalStorage.getLocalData(a);return c&&(c=utils.str2json(c))?b?c[b]:c:null},UE.Editor.prototype.removePreferences=function(b){var c=LocalStorage.getLocalData(a);c&&(c=utils.str2json(c))&&(c[b]=void 0,delete c[b]),c&&LocalStorage.saveLocalData(a,utils.json2str(c))}}(),UE.plugins.defaultfilter=function(){var a=this;a.setOpt({allowDivTransToP:!0,disabledTableInTable:!0}),a.addInputRule(function(b){function c(a){for(;a&&"element"==a.type;){if("td"==a.tagName)return!0;a=a.parentNode}return!1}var d,e=this.options.allowDivTransToP;b.traversal(function(b){if("element"==b.type){if(!dtd.$cdata[b.tagName]&&a.options.autoClearEmptyNode&&dtd.$inline[b.tagName]&&!dtd.$empty[b.tagName]&&(!b.attrs||utils.isEmptyObject(b.attrs)))return void(b.firstChild()?"span"!=b.tagName||b.attrs&&!utils.isEmptyObject(b.attrs)||b.parentNode.removeChild(b,!0):b.parentNode.removeChild(b));switch(b.tagName){case"style":case"script":b.setAttr({cdata_tag:b.tagName,cdata_data:b.innerHTML()||"",_ue_custom_node_:"true"}),b.tagName="div",b.innerHTML("");break;case"a":(d=b.getAttr("href"))&&b.setAttr("_href",d);break;case"img":if((d=b.getAttr("src"))&&/^data:/.test(d)){b.parentNode.removeChild(b);break}b.setAttr("_src",b.getAttr("src"));break;case"span":browser.webkit&&(d=b.getStyle("white-space"))&&/nowrap|normal/.test(d)&&(b.setStyle("white-space",""),a.options.autoClearEmptyNode&&utils.isEmptyObject(b.attrs)&&b.parentNode.removeChild(b,!0)),d=b.getAttr("id"),d&&/^_baidu_bookmark_/i.test(d)&&b.parentNode.removeChild(b);break;case"p":(d=b.getAttr("align"))&&(b.setAttr("align"),b.setStyle("text-align",d)),utils.each(b.children,function(a){if("element"==a.type&&"p"==a.tagName){var c=a.nextSibling();b.parentNode.insertAfter(a,b);for(var d=a;c;){var e=c.nextSibling();b.parentNode.insertAfter(c,d),d=c,c=e}return!1}}),b.firstChild()||b.innerHTML(browser.ie?"&nbsp;":"<br/>");break;case"div":if(b.getAttr("cdata_tag"))break;if(d=b.getAttr("class"),d&&/^line number\d+/.test(d))break;if(!e)break;for(var f,g=UE.uNode.createElement("p");f=b.firstChild();)"text"!=f.type&&UE.dom.dtd.$block[f.tagName]?g.firstChild()?(b.parentNode.insertBefore(g,b),g=UE.uNode.createElement("p")):b.parentNode.insertBefore(f,b):g.appendChild(f);g.firstChild()&&b.parentNode.insertBefore(g,b),b.parentNode.removeChild(b);break;case"dl":b.tagName="ul";break;case"dt":case"dd":b.tagName="li";break;case"li":var h=b.getAttr("class");h&&/list\-/.test(h)||b.setAttr();var i=b.getNodesByTagName("ol ul");UE.utils.each(i,function(a){b.parentNode.insertAfter(a,b)});break;case"td":case"th":case"caption":b.children&&b.children.length||b.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":a.options.disabledTableInTable&&c(b)&&(b.parentNode.insertBefore(UE.uNode.createText(b.innerText()),b),b.parentNode.removeChild(b))}}})}),a.addOutputRule(function(b){var c;b.traversal(function(b){if("element"==b.type){if(a.options.autoClearEmptyNode&&dtd.$inline[b.tagName]&&!dtd.$empty[b.tagName]&&(!b.attrs||utils.isEmptyObject(b.attrs)))return void(b.firstChild()?"span"!=b.tagName||b.attrs&&!utils.isEmptyObject(b.attrs)||b.parentNode.removeChild(b,!0):b.parentNode.removeChild(b));switch(b.tagName){case"div":(c=b.getAttr("cdata_tag"))&&(b.tagName=c,b.appendChild(UE.uNode.createText(b.getAttr("cdata_data"))),b.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""}));break;case"a":(c=b.getAttr("_href"))&&b.setAttr({href:utils.html(c),_href:""});break;case"span":c=b.getAttr("id"),c&&/^_baidu_bookmark_/i.test(c)&&b.parentNode.removeChild(b);break;case"img":(c=b.getAttr("_src"))&&b.setAttr({src:b.getAttr("_src"),_src:""})}}})})},UE.commands.inserthtml={execCommand:function(a,b,c){var d,e,f=this;if(b&&f.fireEvent("beforeinserthtml",b)!==!0){if(d=f.selection.getRange(),e=d.document.createElement("div"),e.style.display="inline",!c){var g=UE.htmlparser(b);f.options.filterRules&&UE.filterNode(g,f.options.filterRules),f.filterInputRule(g),b=g.toHtml()}if(e.innerHTML=utils.trim(b),!d.collapsed){var h=d.startContainer;if(domUtils.isFillChar(h)&&d.setStartBefore(h),h=d.endContainer,domUtils.isFillChar(h)&&d.setEndAfter(h),d.txtToElmBoundary(),d.endContainer&&1==d.endContainer.nodeType&&(h=d.endContainer.childNodes[d.endOffset],h&&domUtils.isBr(h)&&d.setEndAfter(h)),0==d.startOffset&&(h=d.startContainer,domUtils.isBoundaryNode(h,"firstChild")&&(h=d.endContainer,d.endOffset==(3==h.nodeType?h.nodeValue.length:h.childNodes.length)&&domUtils.isBoundaryNode(h,"lastChild")&&(f.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",d.setStart(f.body.firstChild,0).collapse(!0)))),!d.collapsed&&d.deleteContents(),1==d.startContainer.nodeType){var i,j=d.startContainer.childNodes[d.startOffset];if(j&&domUtils.isBlockElm(j)&&(i=j.previousSibling)&&domUtils.isBlockElm(i)){for(d.setEnd(i,i.childNodes.length).collapse();j.firstChild;)i.appendChild(j.firstChild);domUtils.remove(j)}}}var j,k,i,l,m,n=0;d.inFillChar()&&(j=d.startContainer,domUtils.isFillChar(j)?(d.setStartBefore(j).collapse(!0),domUtils.remove(j)):domUtils.isFillChar(j,!0)&&(j.nodeValue=j.nodeValue.replace(fillCharReg,""),d.startOffset--,d.collapsed&&d.collapse(!0)));var o=domUtils.findParentByTagName(d.startContainer,"li",!0);if(o){for(var p,q;j=e.firstChild;){for(;j&&(3==j.nodeType||!domUtils.isBlockElm(j)||"HR"==j.tagName);)p=j.nextSibling,d.insertNode(j).collapse(),q=j,j=p;if(j)if(/^(ol|ul)$/i.test(j.tagName)){for(;j.firstChild;)q=j.firstChild,domUtils.insertAfter(o,j.firstChild),o=o.nextSibling;domUtils.remove(j)}else{var r;p=j.nextSibling,r=f.document.createElement("li"),domUtils.insertAfter(o,r),r.appendChild(j),q=j,j=p,o=r}}o=domUtils.findParentByTagName(d.startContainer,"li",!0),domUtils.isEmptyBlock(o)&&domUtils.remove(o),q&&d.setStartAfter(q).collapse(!0).select(!0)}else{for(;j=e.firstChild;){if(n){for(var s=f.document.createElement("p");j&&(3==j.nodeType||!dtd.$block[j.tagName]);)m=j.nextSibling,s.appendChild(j),j=m;s.firstChild&&(j=s)}if(d.insertNode(j),m=j.nextSibling,!n&&j.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(j)&&(k=domUtils.findParent(j,function(a){return domUtils.isBlockElm(a)}),k&&"body"!=k.tagName.toLowerCase()&&(!dtd[k.tagName][j.nodeName]||j.parentNode!==k))){if(dtd[k.tagName][j.nodeName])for(l=j.parentNode;l!==k;)i=l,l=l.parentNode;else i=k;domUtils.breakParent(j,i||l);var i=j.previousSibling;domUtils.trimWhiteTextNode(i),i.childNodes.length||domUtils.remove(i),!browser.ie&&(p=j.nextSibling)&&domUtils.isBlockElm(p)&&p.lastChild&&!domUtils.isBr(p.lastChild)&&p.appendChild(f.document.createElement("br")),n=1}var p=j.nextSibling;if(!e.firstChild&&p&&domUtils.isBlockElm(p)){d.setStart(p,0).collapse(!0);break}d.setEndAfter(j).collapse()}if(j=d.startContainer,m&&domUtils.isBr(m)&&domUtils.remove(m),domUtils.isBlockElm(j)&&domUtils.isEmptyNode(j))if(m=j.nextSibling)domUtils.remove(j),1==m.nodeType&&dtd.$block[m.tagName]&&d.setStart(m,0).collapse(!0).shrinkBoundary();else try{j.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(t){d.setStartBefore(j),domUtils.remove(j)}try{d.select(!0)}catch(t){}}setTimeout(function(){d=f.selection.getRange(),d.scrollToView(f.autoHeightEnabled,f.autoHeightEnabled?domUtils.getXY(f.iframe).y:0),f.fireEvent("afterinserthtml",b)},200)}}},UE.plugins.autotypeset=function(){function a(a,b){return a&&3!=a.nodeType?domUtils.isBr(a)?1:a&&a.parentNode&&l[a.tagName.toLowerCase()]?g&&g.contains(a)||a.getAttribute("pagebreak")?0:b?!domUtils.isEmptyBlock(a):domUtils.isEmptyBlock(a,new RegExp("[\\s"+domUtils.fillChar+"]","g")):void 0:0}function b(a){a.style.cssText||(domUtils.removeAttributes(a,["style"]),"span"==a.tagName.toLowerCase()&&domUtils.hasNoAttributes(a)&&domUtils.remove(a,!0))}function c(c,f){var h,l=this;if(f){if(!i.pasteFilter)return;h=l.document.createElement("div"),h.innerHTML=f.html}else h=l.document.body;for(var m,n=domUtils.getElementsByTagName(h,"*"),o=0;m=n[o++];)if(l.fireEvent("excludeNodeinautotype",m)!==!0){if(i.clearFontSize&&m.style.fontSize&&(domUtils.removeStyle(m,"font-size"),b(m)),i.clearFontFamily&&m.style.fontFamily&&(domUtils.removeStyle(m,"font-family"),b(m)),a(m)){if(i.mergeEmptyline)for(var p,q=m.nextSibling,r=domUtils.isBr(m);a(q)&&(p=q,q=p.nextSibling,!r||q&&(!q||domUtils.isBr(q)));)domUtils.remove(p);if(i.removeEmptyline&&domUtils.inDoc(m,h)&&!k[m.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(m)&&(q=m.nextSibling,q&&!domUtils.isBr(q)))continue;domUtils.remove(m);continue}}if(a(m,!0)&&"SPAN"!=m.tagName&&(i.indent&&(m.style.textIndent=i.indentValue),i.textAlign&&(m.style.textAlign=i.textAlign)),i.removeClass&&m.className&&!j[m.className.toLowerCase()]){if(g&&g.contains(m))continue;domUtils.removeAttributes(m,["class"])}if(i.imageBlockLine&&"img"==m.tagName.toLowerCase()&&!m.getAttribute("emotion"))if(f){var s=m;switch(i.imageBlockLine){case"left":case"right":case"none":for(var p,t,q,u=s.parentNode;dtd.$inline[u.tagName]||"A"==u.tagName;)u=u.parentNode;if(p=u,"P"==p.tagName&&"center"==domUtils.getStyle(p,"text-align")&&!domUtils.isBody(p)&&1==domUtils.getChildCount(p,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)}))if(t=p.previousSibling,q=p.nextSibling,t&&q&&1==t.nodeType&&1==q.nodeType&&t.tagName==q.tagName&&domUtils.isBlockElm(t)){for(t.appendChild(p.firstChild);q.firstChild;)t.appendChild(q.firstChild);domUtils.remove(p),domUtils.remove(q)}else domUtils.setStyle(p,"text-align","");domUtils.setStyle(s,"float",i.imageBlockLine);break;case"center":if("center"!=l.queryCommandValue("imagefloat")){for(u=s.parentNode,domUtils.setStyle(s,"float","none"),p=s;u&&1==domUtils.getChildCount(u,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)})&&(dtd.$inline[u.tagName]||"A"==u.tagName);)p=u,u=u.parentNode;var v=l.document.createElement("p");domUtils.setAttributes(v,{style:"text-align:center"}),p.parentNode.insertBefore(v,p),v.appendChild(p),domUtils.setStyle(p,"float","")}}}else{var w=l.selection.getRange();w.selectNode(m).select(),l.execCommand("imagefloat",i.imageBlockLine)}i.removeEmptyNode&&i.removeTagNames[m.tagName.toLowerCase()]&&domUtils.hasNoAttributes(m)&&domUtils.isEmptyBlock(m)&&domUtils.remove(m)}if(i.tobdc){var x=UE.htmlparser(h.innerHTML);x.traversal(function(a){"text"==a.type&&(a.data=e(a.data))}),h.innerHTML=x.toHtml()}if(i.bdc2sb){var x=UE.htmlparser(h.innerHTML);x.traversal(function(a){"text"==a.type&&(a.data=d(a.data))}),h.innerHTML=x.toHtml()}f&&(f.html=h.innerHTML)}function d(a){for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);b+=d>=65281&&d<=65373?String.fromCharCode(a.charCodeAt(c)-65248):12288==d?String.fromCharCode(a.charCodeAt(c)-12288+32):a.charAt(c)}return b}function e(a){a=utils.html(a);for(var b="",c=0;c<a.length;c++)b+=32==a.charCodeAt(c)?String.fromCharCode(12288):a.charCodeAt(c)<127?String.fromCharCode(a.charCodeAt(c)+65248):a.charAt(c);return b}function f(){var a=h.getPreferences("autotypeset");utils.extend(h.options.autotypeset,a)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var g,h=this,i=h.options.autotypeset,j={selectTdClass:1,pagebreak:1,anchorclass:1},k={li:1},l={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1};i&&(f(),i.pasteFilter&&h.addListener("beforepaste",c),h.commands.autotypeset={execCommand:function(){h.removeListener("beforepaste",c),i.pasteFilter&&h.addListener("beforepaste",c),c.call(h)}})},UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var a=this,b=domUtils.findParentByTagName(a.iframe,"form",!1);if(b){if(a.fireEvent("beforesubmit")===!1)return;a.sync(),b.submit()}}}}}}),UE.plugin.register("background",function(){function a(a){var b={},c=a.split(";");return utils.each(c,function(a){var c=a.indexOf(":"),d=utils.trim(a.substr(0,c)).toLowerCase();d&&(b[d]=utils.trim(a.substr(c+1)||""))}),b}function b(a){if(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+":"+a[c]+"; ");utils.cssRule(e,b.length?"body{"+b.join("")+"}":"",d.document)}else utils.cssRule(e,"",d.document)}var c,d=this,e="editor_background",f=new RegExp("body[\\s]*\\{(.+)\\}","i"),g=d.hasContents;return d.hasContents=function(){return!!d.queryCommandValue("background")||g.apply(d,arguments)},{bindEvents:{getAllHtml:function(a,b){var c=this.body,e=domUtils.getComputedStyle(c,"background-image"),f="";
f=e.indexOf(d.options.imagePath)>0?e.substring(e.indexOf(d.options.imagePath),e.length-1).replace(/"|\(|\)/gi,""):"none"!=e?e.replace(/url\("?|"?\)/gi,""):"";var g='<style type="text/css">body{',h={"background-color":domUtils.getComputedStyle(c,"background-color")||"#ffffff","background-image":f?"url("+f+")":"","background-repeat":domUtils.getComputedStyle(c,"background-repeat")||"","background-position":browser.ie?domUtils.getComputedStyle(c,"background-position-x")+" "+domUtils.getComputedStyle(c,"background-position-y"):domUtils.getComputedStyle(c,"background-position"),height:domUtils.getComputedStyle(c,"height")};for(var i in h)h.hasOwnProperty(i)&&(g+=i+":"+h[i]+"; ");g+="}</style> ",b.push(g)},aftersetcontent:function(){0==c&&b()}},inputRule:function(d){c=!1,utils.each(d.getNodesByTagName("p"),function(d){var e=d.getAttr("data-background");e&&(c=!0,b(a(e)),d.parentNode.removeChild(d))})},outputRule:function(a){var b=this,c=(utils.cssRule(e,b.document)||"").replace(/[\n\r]+/g,"").match(f);c&&a.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(c[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))},commands:{background:{execCommand:function(a,c){b(c)},queryCommandValue:function(){var b=this,c=(utils.cssRule(e,b.document)||"").replace(/[\n\r]+/g,"").match(f);return c?a(c[1]):null},notNeedUndo:!0}}}}),UE.commands.imagefloat={execCommand:function(a,b){var c=this,d=c.selection.getRange();if(!d.collapsed){var e=d.getClosedNode();if(e&&"IMG"==e.tagName)switch(b){case"left":case"right":case"none":for(var f,g,h,i=e.parentNode;dtd.$inline[i.tagName]||"A"==i.tagName;)i=i.parentNode;if(f=i,"P"==f.tagName&&"center"==domUtils.getStyle(f,"text-align")){if(!domUtils.isBody(f)&&1==domUtils.getChildCount(f,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)}))if(g=f.previousSibling,h=f.nextSibling,g&&h&&1==g.nodeType&&1==h.nodeType&&g.tagName==h.tagName&&domUtils.isBlockElm(g)){for(g.appendChild(f.firstChild);h.firstChild;)g.appendChild(h.firstChild);domUtils.remove(f),domUtils.remove(h)}else domUtils.setStyle(f,"text-align","");d.selectNode(e).select()}domUtils.setStyle(e,"float","none"==b?"":b),"none"==b&&domUtils.removeAttributes(e,"align");break;case"center":if("center"!=c.queryCommandValue("imagefloat")){for(i=e.parentNode,domUtils.setStyle(e,"float",""),domUtils.removeAttributes(e,"align"),f=e;i&&1==domUtils.getChildCount(i,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)})&&(dtd.$inline[i.tagName]||"A"==i.tagName);)f=i,i=i.parentNode;d.setStartBefore(f).setCursor(!1),i=c.document.createElement("div"),i.appendChild(f),domUtils.setStyle(f,"float",""),c.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+i.innerHTML+"</p>"),f=c.document.getElementById("_img_parent_tmp"),f.removeAttribute("id"),f=f.firstChild,d.selectNode(f).select(),h=f.parentNode.nextSibling,h&&domUtils.isEmptyNode(h)&&domUtils.remove(h)}}}},queryCommandValue:function(){var a,b,c=this.selection.getRange();return c.collapsed?"none":(a=c.getClosedNode(),a&&1==a.nodeType&&"IMG"==a.tagName?(b=domUtils.getComputedStyle(a,"float")||a.getAttribute("align"),"none"==b&&(b="center"==domUtils.getComputedStyle(a.parentNode,"text-align")?"center":b),{left:1,right:1,center:1}[b]?b:"none"):"none")},queryCommandState:function(){var a,b=this.selection.getRange();return b.collapsed?-1:(a=b.getClosedNode(),a&&1==a.nodeType&&"IMG"==a.tagName?0:-1)}},UE.commands.insertimage={execCommand:function(a,b){function c(a){utils.each("width,height,border,hspace,vspace".split(","),function(b){a[b]&&(a[b]=parseInt(a[b],10)||0)}),utils.each("src,_src".split(","),function(b){a[b]&&(a[b]=utils.unhtmlForUrl(a[b]))}),utils.each("title,alt".split(","),function(b){a[b]&&(a[b]=utils.unhtml(a[b]))})}if(b=utils.isArray(b)?b:[b],b.length){var d=this,e=d.selection.getRange(),f=e.getClosedNode();if(d.fireEvent("beforeinsertimage",b)!==!0){if(!f||!/img/i.test(f.tagName)||"edui-faked-video"==f.className&&f.className.indexOf("edui-upload-video")==-1||f.getAttribute("word_img")){var g,h=[],i="";if(g=b[0],1==b.length)c(g),i='<img src="'+g.src+'" '+(g._src?' _src="'+g._src+'" ':"")+(g.width?'width="'+g.width+'" ':"")+(g.height?' height="'+g.height+'" ':"")+("left"==g.floatStyle||"right"==g.floatStyle?' style="float:'+g.floatStyle+';"':"")+(g.title&&""!=g.title?' title="'+g.title+'"':"")+(g.border&&"0"!=g.border?' border="'+g.border+'"':"")+(g.alt&&""!=g.alt?' alt="'+g.alt+'"':"")+(g.hspace&&"0"!=g.hspace?' hspace = "'+g.hspace+'"':"")+(g.vspace&&"0"!=g.vspace?' vspace = "'+g.vspace+'"':"")+"/>","center"==g.floatStyle&&(i='<p style="text-align: center">'+i+"</p>"),h.push(i);else for(var j=0;g=b[j++];)c(g),i="<p "+("center"==g.floatStyle?'style="text-align: center" ':"")+'><img src="'+g.src+'" '+(g.width?'width="'+g.width+'" ':"")+(g._src?' _src="'+g._src+'" ':"")+(g.height?' height="'+g.height+'" ':"")+' style="'+(g.floatStyle&&"center"!=g.floatStyle?"float:"+g.floatStyle+";":"")+(g.border||"")+'" '+(g.title?' title="'+g.title+'"':"")+" /></p>",h.push(i);d.execCommand("insertHtml",h.join(""))}else{var k=b.shift(),l=k.floatStyle;delete k.floatStyle,domUtils.setAttributes(f,k),d.execCommand("imagefloat",l),b.length>0&&(e.setStartAfter(f).setCursor(!1,!0),d.execCommand("insertimage",b))}d.fireEvent("afterinsertimage",b)}}}},UE.plugins.justify=function(){var a=domUtils.isBlockElm,b={left:1,right:1,center:1,justify:1},c=function(b,c){var d=b.createBookmark(),e=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase()&&!domUtils.isBookmarkNode(a):!domUtils.isWhitespace(a)};b.enlarge(!0);for(var f,g=b.createBookmark(),h=domUtils.getNextDomNode(g.start,!1,e),i=b.cloneRange();h&&!(domUtils.getPosition(h,g.end)&domUtils.POSITION_FOLLOWING);)if(3!=h.nodeType&&a(h))h=domUtils.getNextDomNode(h,!0,e);else{for(i.setStartBefore(h);h&&h!==g.end&&!a(h);)f=h,h=domUtils.getNextDomNode(h,!1,null,function(b){return!a(b)});i.setEndAfter(f);var j=i.getCommonAncestor();if(!domUtils.isBody(j)&&a(j))domUtils.setStyles(j,utils.isString(c)?{"text-align":c}:c),h=j;else{var k=b.document.createElement("p");domUtils.setStyles(k,utils.isString(c)?{"text-align":c}:c);var l=i.extractContents();k.appendChild(l),i.insertNode(k),h=k}h=domUtils.getNextDomNode(h,!1,e)}return b.moveToBookmark(g).moveToBookmark(d)};UE.commands.justify={execCommand:function(a,b){var d,e=this.selection.getRange();return e.collapsed&&(d=this.document.createTextNode("p"),e.insertNode(d)),c(e,b),d&&(e.setStartBefore(d).collapse(!0),domUtils.remove(d)),e.select(),!0},queryCommandValue:function(){var a=this.selection.getStart(),c=domUtils.getComputedStyle(a,"text-align");return b[c]?c:"left"},queryCommandState:function(){var a=this.selection.getStart(),b=a&&domUtils.findParentByTagName(a,["td","th","caption"],!0);return b?-1:0}}},UE.plugins.font=function(){function a(a){for(var b;(b=a.parentNode)&&"SPAN"==b.tagName&&1==domUtils.getChildCount(b,function(a){return!domUtils.isBookmarkNode(a)&&!domUtils.isBr(a)});)b.style.cssText+=a.style.cssText,domUtils.remove(a,!0),a=b}function b(a,b,c){if(g[b]&&(a.adjustmentBoundary(),!a.collapsed&&1==a.startContainer.nodeType)){var d=a.startContainer.childNodes[a.startOffset];if(d&&domUtils.isTagNode(d,"span")){var e=a.createBookmark();utils.each(domUtils.getElementsByTagName(d,"span"),function(a){a.parentNode&&!domUtils.isBookmarkNode(a)&&("backcolor"==b&&domUtils.getComputedStyle(a,"background-color").toLowerCase()===c||(domUtils.removeStyle(a,g[b]),0==a.style.cssText.replace(/^\s+$/,"").length&&domUtils.remove(a,!0)))}),a.moveToBookmark(e)}}}function c(c,d,e){var f,g=c.collapsed,h=c.createBookmark();if(g)for(f=h.start.parentNode;dtd.$inline[f.tagName];)f=f.parentNode;else f=domUtils.getCommonAncestor(h.start,h.end);utils.each(domUtils.getElementsByTagName(f,"span"),function(b){if(b.parentNode&&!domUtils.isBookmarkNode(b)){if(/\s*border\s*:\s*none;?\s*/i.test(b.style.cssText))return void(/^\s*border\s*:\s*none;?\s*$/.test(b.style.cssText)?domUtils.remove(b,!0):domUtils.removeStyle(b,"border"));if(/border/i.test(b.style.cssText)&&"SPAN"==b.parentNode.tagName&&/border/i.test(b.parentNode.style.cssText)&&(b.style.cssText=b.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")),"fontborder"!=d||"none"!=e)for(var c=b.nextSibling;c&&1==c.nodeType&&"SPAN"==c.tagName;)if(domUtils.isBookmarkNode(c)&&"fontborder"==d)b.appendChild(c),c=b.nextSibling;else{if(c.style.cssText==b.style.cssText&&(domUtils.moveChild(c,b),domUtils.remove(c)),b.nextSibling===c)break;c=b.nextSibling}if(a(b),browser.ie&&browser.version>8){var f=domUtils.findParent(b,function(a){return"SPAN"==a.tagName&&/background-color/.test(a.style.cssText)});f&&!/background-color/.test(b.style.cssText)&&(b.style.backgroundColor=f.style.backgroundColor)}}}),c.moveToBookmark(h),b(c,d,e)}var d=this,e={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},f={underline:1,strikethrough:1,fontborder:1},g={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};d.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),d.addInputRule(function(a){utils.each(a.getNodesByTagName("u s del font strike"),function(a){if("font"==a.tagName){var b=[];for(var c in a.attrs)switch(c){case"size":b.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[a.attrs[c]]||a.attrs[c])+"px");break;case"color":b.push("color:"+a.attrs[c]);break;case"face":b.push("font-family:"+a.attrs[c]);break;case"style":b.push(a.attrs[c])}a.attrs={style:b.join(";")}}else{var d="u"==a.tagName?"underline":"line-through";a.attrs={style:(a.getAttr("style")||"")+"text-decoration:"+d+";"}}a.tagName="span"})});for(var h in e)!function(a,b){UE.commands[a]={execCommand:function(d,e){e=e||(this.queryCommandState(d)?"none":"underline"==d?"underline":"fontborder"==d?"1px solid #000":"line-through");var g,h=this,i=this.selection.getRange();if("default"==e)i.collapsed&&(g=h.document.createTextNode("font"),i.insertNode(g).select()),h.execCommand("removeFormat","span,a",b),g&&(i.setStartBefore(g).collapse(!0),domUtils.remove(g)),c(i,d,e),i.select();else if(i.collapsed){var j=domUtils.findParentByTagName(i.startContainer,"span",!0);if(g=h.document.createTextNode("font"),!j||j.children.length||j[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){if(i.insertNode(g),i.selectNode(g).select(),j=i.document.createElement("span"),f[a]){if(domUtils.findParentByTagName(g,"a",!0))return i.setStartBefore(g).setCursor(),void domUtils.remove(g);h.execCommand("removeFormat","span,a",b)}if(j.style.cssText=b+":"+e,g.parentNode.insertBefore(j,g),!browser.ie||browser.ie&&9==browser.version)for(var k=j.parentNode;!domUtils.isBlockElm(k);)"SPAN"==k.tagName&&(j.style.cssText=k.style.cssText+";"+j.style.cssText),k=k.parentNode;opera?setTimeout(function(){i.setStart(j,0).collapse(!0),c(i,d,e),i.select()}):(i.setStart(j,0).collapse(!0),c(i,d,e),i.select())}else i.insertNode(g),f[a]&&(i.selectNode(g).select(),h.execCommand("removeFormat","span,a",b,null),j=domUtils.findParentByTagName(g,"span",!0),i.setStartBefore(g)),j&&(j.style.cssText+=";"+b+":"+e),i.collapse(!0).select();domUtils.remove(g)}else f[a]&&h.queryCommandValue(a)&&h.execCommand("removeFormat","span,a",b),i=h.selection.getRange(),i.applyInlineStyle("span",{style:b+":"+e}),c(i,d,e),i.select();return!0},queryCommandValue:function(a){var c=this.selection.getStart();if("underline"==a||"strikethrough"==a){for(var d,e=c;e&&!domUtils.isBlockElm(e)&&!domUtils.isBody(e);){if(1==e.nodeType&&(d=domUtils.getComputedStyle(e,b),"none"!=d))return d;e=e.parentNode}return"none"}if("fontborder"==a){for(var f,g=c;g&&dtd.$inline[g.tagName];){if((f=domUtils.getComputedStyle(g,"border"))&&/1px/.test(f)&&/solid/.test(f))return f;g=g.parentNode}return""}if("FontSize"==a){var h=domUtils.getComputedStyle(c,b),g=/^([\d\.]+)(\w+)$/.exec(h);return g?Math.floor(g[1])+g[2]:h}return domUtils.getComputedStyle(c,b)},queryCommandState:function(a){if(!f[a])return 0;var b=this.queryCommandValue(a);return"fontborder"==a?/1px/.test(b)&&/solid/.test(b):"underline"==a?/underline/.test(b):/line\-through/.test(b)}}}(h,e[h])},UE.plugins.link=function(){function a(a){var b=a.startContainer,c=a.endContainer;(b=domUtils.findParentByTagName(b,"a",!0))&&a.setStartBefore(b),(c=domUtils.findParentByTagName(c,"a",!0))&&a.setEndAfter(c)}function b(b,c,d){var e=b.cloneRange(),f=d.queryCommandValue("link");a(b=b.adjustmentBoundary());var g=b.startContainer;if(1==g.nodeType&&f&&(g=g.childNodes[b.startOffset],g&&1==g.nodeType&&"A"==g.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(g[browser.ie?"innerText":"textContent"])&&(g[browser.ie?"innerText":"textContent"]=utils.html(c.textValue||c.href))),e.collapsed&&!f||(b.removeInlineStyle("a"),e=b.cloneRange()),e.collapsed){var h=b.document.createElement("a"),i="";c.textValue?(i=utils.html(c.textValue),delete c.textValue):i=utils.html(c.href),domUtils.setAttributes(h,c),g=domUtils.findParentByTagName(e.startContainer,"a",!0),g&&domUtils.isInNodeEndBoundary(e,g)&&b.setStartAfter(g).collapse(!0),h[browser.ie?"innerText":"textContent"]=i,b.insertNode(h).selectNode(h)}else b.applyInlineStyle("a",c)}UE.commands.unlink={execCommand:function(){var b,c=this.selection.getRange();c.collapsed&&!domUtils.findParentByTagName(c.startContainer,"a",!0)||(b=c.createBookmark(),a(c),c.removeInlineStyle("a").moveToBookmark(b).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},UE.commands.link={execCommand:function(a,c){var d;c._href&&(c._href=utils.unhtml(c._href,/[<">]/g)),c.href&&(c.href=utils.unhtml(c.href,/[<">]/g)),c.textValue&&(c.textValue=utils.unhtml(c.textValue,/[<">]/g)),b(d=this.selection.getRange(),c,this),d.collapse().select(!0)},queryCommandValue:function(){var a,b=this.selection.getRange();if(!b.collapsed){b.shrinkBoundary();var c=3!=b.startContainer.nodeType&&b.startContainer.childNodes[b.startOffset]?b.startContainer.childNodes[b.startOffset]:b.startContainer,d=3==b.endContainer.nodeType||0==b.endOffset?b.endContainer:b.endContainer.childNodes[b.endOffset-1],e=b.getCommonAncestor();if(a=domUtils.findParentByTagName(e,"a",!0),!a&&1==e.nodeType)for(var f,g,h,i=e.getElementsByTagName("a"),j=0;h=i[j++];)if(f=domUtils.getPosition(h,c),g=domUtils.getPosition(h,d),(f&domUtils.POSITION_FOLLOWING||f&domUtils.POSITION_CONTAINS)&&(g&domUtils.POSITION_PRECEDING||g&domUtils.POSITION_CONTAINS)){a=h;break}return a}if(a=b.startContainer,a=1==a.nodeType?a:a.parentNode,a&&(a=domUtils.findParentByTagName(a,"a",!0))&&!domUtils.isInNodeEndBoundary(b,a))return a},queryCommandState:function(){var a=this.selection.getRange().getClosedNode(),b=a&&("edui-faked-video"==a.className||a.className.indexOf("edui-upload-video")!=-1);return b?-1:0}}},UE.plugins.insertframe=function(){function a(){b._iframe&&delete b._iframe}var b=this;b.addListener("selectionchange",function(){a()})},UE.commands.scrawl={queryCommandState:function(){return browser.ie&&browser.version<=8?-1:0}},UE.plugins.removeformat=function(){var a=this;a.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),a.commands.removeformat={execCommand:function(a,b,c,d,e){function f(a){if(3==a.nodeType||"span"!=a.tagName.toLowerCase())return 0;if(browser.ie){var b=a.attributes;if(b.length){for(var c=0,d=b.length;c<d;c++)if(b[c].specified)return 0;return 1}}return!a.attributes.length}function g(a){var b=a.createBookmark();if(a.collapsed&&a.enlarge(!0),!e){var d=domUtils.findParentByTagName(a.startContainer,"a",!0);d&&a.setStartBefore(d),d=domUtils.findParentByTagName(a.endContainer,"a",!0),d&&a.setEndAfter(d)}for(h=a.createBookmark(),p=h.start;(i=p.parentNode)&&!domUtils.isBlockElm(i);)domUtils.breakParent(p,i),domUtils.clearEmptySibling(p);if(h.end){for(p=h.end;(i=p.parentNode)&&!domUtils.isBlockElm(i);)domUtils.breakParent(p,i),domUtils.clearEmptySibling(p);for(var g,l=domUtils.getNextDomNode(h.start,!1,m);l&&l!=h.end;)g=domUtils.getNextDomNode(l,!0,m),dtd.$empty[l.tagName.toLowerCase()]||domUtils.isBookmarkNode(l)||(j.test(l.tagName)?c?(domUtils.removeStyle(l,c),f(l)&&"text-decoration"!=c&&domUtils.remove(l,!0)):domUtils.remove(l,!0):dtd.$tableContent[l.tagName]||dtd.$list[l.tagName]||(domUtils.removeAttributes(l,k),f(l)&&domUtils.remove(l,!0))),l=g}var n=h.start.parentNode;!domUtils.isBlockElm(n)||dtd.$tableContent[n.tagName]||dtd.$list[n.tagName]||domUtils.removeAttributes(n,k),n=h.end.parentNode,h.end&&domUtils.isBlockElm(n)&&!dtd.$tableContent[n.tagName]&&!dtd.$list[n.tagName]&&domUtils.removeAttributes(n,k),a.moveToBookmark(h).moveToBookmark(b);for(var o,p=a.startContainer,q=a.collapsed;1==p.nodeType&&domUtils.isEmptyNode(p)&&dtd.$removeEmpty[p.tagName];)o=p.parentNode,a.setStartBefore(p),a.startContainer===a.endContainer&&a.endOffset--,domUtils.remove(p),p=o;if(!q)for(p=a.endContainer;1==p.nodeType&&domUtils.isEmptyNode(p)&&dtd.$removeEmpty[p.tagName];)o=p.parentNode,a.setEndBefore(p),domUtils.remove(p),p=o}var h,i,j=new RegExp("^(?:"+(b||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),k=c?[]:(d||this.options.removeFormatAttributes).split(","),l=new dom.Range(this.document),m=function(a){return 1==a.nodeType};l=this.selection.getRange(),g(l),l.select()}}},UE.plugins.blockquote=function(){function a(a){return domUtils.filterNodeList(a.selection.getStartElementPath(),"blockquote")}var b=this;b.commands.blockquote={execCommand:function(b,c){var d=this.selection.getRange(),e=a(this),f=dtd.blockquote,g=d.createBookmark();if(e){var h=d.startContainer,i=domUtils.isBlockElm(h)?h:domUtils.findParent(h,function(a){return domUtils.isBlockElm(a)}),j=d.endContainer,k=domUtils.isBlockElm(j)?j:domUtils.findParent(j,function(a){return domUtils.isBlockElm(a)});i=domUtils.findParentByTagName(i,"li",!0)||i,k=domUtils.findParentByTagName(k,"li",!0)||k,"LI"==i.tagName||"TD"==i.tagName||i===e||domUtils.isBody(i)?domUtils.remove(e,!0):domUtils.breakParent(i,e),i!==k&&(e=domUtils.findParentByTagName(k,"blockquote"),e&&("LI"==k.tagName||"TD"==k.tagName||domUtils.isBody(k)?e.parentNode&&domUtils.remove(e,!0):domUtils.breakParent(k,e)));for(var l,m=domUtils.getElementsByTagName(this.document,"blockquote"),n=0;l=m[n++];)l.childNodes.length?domUtils.getPosition(l,i)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(l,k)&domUtils.POSITION_PRECEDING&&domUtils.remove(l,!0):domUtils.remove(l)}else{for(var o=d.cloneRange(),p=1==o.startContainer.nodeType?o.startContainer:o.startContainer.parentNode,q=p,r=1;;){if(domUtils.isBody(p)){q!==p?d.collapsed?(o.selectNode(q),r=0):o.setStartBefore(q):o.setStart(p,0);break}if(!f[p.tagName]){d.collapsed?o.selectNode(q):o.setStartBefore(q);break}q=p,p=p.parentNode}if(r)for(q=p=p=1==o.endContainer.nodeType?o.endContainer:o.endContainer.parentNode;;){if(domUtils.isBody(p)){q!==p?o.setEndAfter(q):o.setEnd(p,p.childNodes.length);break}if(!f[p.tagName]){o.setEndAfter(q);break}q=p,p=p.parentNode}p=d.document.createElement("blockquote"),domUtils.setAttributes(p,c),p.appendChild(o.extractContents()),o.insertNode(p);for(var s,t=domUtils.getElementsByTagName(p,"blockquote"),n=0;s=t[n++];)s.parentNode&&domUtils.remove(s,!0)}d.moveToBookmark(g).select()},queryCommandState:function(){return a(this)?1:0}}},UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(a){var b=this,c=b.selection.getRange();if(c.collapsed)return c;for(var d=c.createBookmark(),e=d.end,f=function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)},g=domUtils.getNextDomNode(d.start,!1,f);g&&domUtils.getPosition(g,e)&domUtils.POSITION_PRECEDING&&(3==g.nodeType&&(g.nodeValue=g.nodeValue["touppercase"==a?"toUpperCase":"toLowerCase"]()),g=domUtils.getNextDomNode(g,!0,f),g!==e););c.moveToBookmark(d).select()}},UE.commands.indent={execCommand:function(){var a=this,b=a.queryCommandState("indent")?"0em":a.options.indentValue||"2em";a.execCommand("Paragraph","p",{style:"text-indent:"+b})},queryCommandState:function(){var a=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return a&&a.style.textIndent&&parseInt(a.style.textIndent)?1:0}},UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1},UE.commands.preview={execCommand:function(){var a=window.open("","_blank",""),b=a.document;b.open(),b.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"></script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)</script></head><body><div>"+this.getContent(null,null,!0)+"</div></body></html>"),b.close()},notNeedUndo:1},UE.plugins.selectall=function(){var a=this;a.commands.selectall={execCommand:function(){var a=this,b=a.body,c=a.selection.getRange();c.selectNodeContents(b),domUtils.isEmptyBlock(b)&&(browser.opera&&b.firstChild&&1==b.firstChild.nodeType&&c.setStartAtFirst(b.firstChild),c.collapse(!0)),c.select(!0)},notNeedUndo:1},a.addshortcutkey({selectAll:"ctrl+65"})},UE.plugins.paragraph=function(){var a=this,b=domUtils.isBlockElm,c=["TD","LI","PRE"],d=function(a,d,e,f){var g,h=a.createBookmark(),i=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase()&&!domUtils.isBookmarkNode(a):!domUtils.isWhitespace(a)};a.enlarge(!0);for(var j,k=a.createBookmark(),l=domUtils.getNextDomNode(k.start,!1,i),m=a.cloneRange();l&&!(domUtils.getPosition(l,k.end)&domUtils.POSITION_FOLLOWING);)if(3!=l.nodeType&&b(l))l=domUtils.getNextDomNode(l,!0,i);else{for(m.setStartBefore(l);l&&l!==k.end&&!b(l);)j=l,l=domUtils.getNextDomNode(l,!1,null,function(a){return!b(a)});m.setEndAfter(j),g=a.document.createElement(d),e&&(domUtils.setAttributes(g,e),f&&"customstyle"==f&&e.style&&(g.style.cssText=e.style)),g.appendChild(m.extractContents()),domUtils.isEmptyNode(g)&&domUtils.fillChar(a.document,g),m.insertNode(g);var n=g.parentNode;b(n)&&!domUtils.isBody(g.parentNode)&&utils.indexOf(c,n.tagName)==-1&&(f&&"customstyle"==f||(n.getAttribute("dir")&&g.setAttribute("dir",n.getAttribute("dir")),n.style.cssText&&(g.style.cssText=n.style.cssText+";"+g.style.cssText),n.style.textAlign&&!g.style.textAlign&&(g.style.textAlign=n.style.textAlign),n.style.textIndent&&!g.style.textIndent&&(g.style.textIndent=n.style.textIndent),n.style.padding&&!g.style.padding&&(g.style.padding=n.style.padding)),e&&/h\d/i.test(n.tagName)&&!/h\d/i.test(g.tagName)?(domUtils.setAttributes(n,e),f&&"customstyle"==f&&e.style&&(n.style.cssText=e.style),domUtils.remove(g,!0),g=n):domUtils.remove(g.parentNode,!0)),l=utils.indexOf(c,n.tagName)!=-1?n:g,l=domUtils.getNextDomNode(l,!1,i)}return a.moveToBookmark(k).moveToBookmark(h)};a.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),a.commands.paragraph={execCommand:function(a,b,c,e){var f=this.selection.getRange();if(f.collapsed){var g=this.document.createTextNode("p");if(f.insertNode(g),browser.ie){var h=g.previousSibling;h&&domUtils.isWhitespace(h)&&domUtils.remove(h),h=g.nextSibling,h&&domUtils.isWhitespace(h)&&domUtils.remove(h)}}if(f=d(f,b,c,e),g&&(f.setStartBefore(g).collapse(!0),pN=g.parentNode,domUtils.remove(g),domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)&&domUtils.fillNode(this.document,pN)),browser.gecko&&f.collapsed&&1==f.startContainer.nodeType){var i=f.startContainer.childNodes[f.startOffset];i&&1==i.nodeType&&i.tagName.toLowerCase()==b&&f.setStart(i,0).collapse(!0)}return f.select(),!0},queryCommandValue:function(){var a=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return a?a.tagName.toLowerCase():""}}},function(){var a=domUtils.isBlockElm,b=function(a){return domUtils.filterNodeList(a.selection.getStartElementPath(),function(a){return a&&1==a.nodeType&&a.getAttribute("dir")})},c=function(c,d,e){var f,g=function(a){return 1==a.nodeType?!domUtils.isBookmarkNode(a):!domUtils.isWhitespace(a)},h=b(d);if(h&&c.collapsed)return h.setAttribute("dir",e),c;f=c.createBookmark(),c.enlarge(!0);for(var i,j=c.createBookmark(),k=domUtils.getNextDomNode(j.start,!1,g),l=c.cloneRange();k&&!(domUtils.getPosition(k,j.end)&domUtils.POSITION_FOLLOWING);)if(3!=k.nodeType&&a(k))k=domUtils.getNextDomNode(k,!0,g);else{for(l.setStartBefore(k);k&&k!==j.end&&!a(k);)i=k,k=domUtils.getNextDomNode(k,!1,null,function(b){return!a(b)});l.setEndAfter(i);var m=l.getCommonAncestor();if(!domUtils.isBody(m)&&a(m))m.setAttribute("dir",e),k=m;else{var n=c.document.createElement("p");n.setAttribute("dir",e);var o=l.extractContents();n.appendChild(o),l.insertNode(n),k=n}k=domUtils.getNextDomNode(k,!1,g)}return c.moveToBookmark(j).moveToBookmark(f)};UE.commands.directionality={execCommand:function(a,b){var d=this.selection.getRange();if(d.collapsed){var e=this.document.createTextNode("d");d.insertNode(e)}return c(d,this,b),e&&(d.setStartBefore(e).collapse(!0),domUtils.remove(e)),d.select(),!0},queryCommandValue:function(){var a=b(this);return a?a.getAttribute("dir"):"ltr"}}}(),UE.plugins.horizontal=function(){var a=this;a.commands.horizontal={execCommand:function(a){var b=this;if(b.queryCommandState(a)!==-1){b.execCommand("insertHtml","<hr>");var c=b.selection.getRange(),d=c.startContainer;if(1==d.nodeType&&!d.childNodes[c.startOffset]){var e;(e=d.childNodes[c.startOffset-1])&&1==e.nodeType&&"HR"==e.tagName&&("p"==b.options.enterTag?(e=b.document.createElement("p"),c.insertNode(e),c.setStart(e,0).setCursor()):(e=b.document.createElement("br"),c.insertNode(e),c.setStartBefore(e).setCursor()))}return!0}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}},a.addListener("delkeydown",function(a,b){var c=this.selection.getRange();if(c.txtToElmBoundary(!0),domUtils.isStartInblock(c)){var d=c.startContainer,e=d.previousSibling;if(e&&domUtils.isTagNode(e,"hr"))return domUtils.remove(e),c.select(),domUtils.preventDefault(b),!0}})},UE.commands.time=UE.commands.date={execCommand:function(a,b){function c(a,b){var c=("0"+a.getHours()).slice(-2),d=("0"+a.getMinutes()).slice(-2),e=("0"+a.getSeconds()).slice(-2);return b=b||"hh:ii:ss",b.replace(/hh/gi,c).replace(/ii/gi,d).replace(/ss/gi,e)}function d(a,b){var c=("000"+a.getFullYear()).slice(-4),d=c.slice(-2),e=("0"+(a.getMonth()+1)).slice(-2),f=("0"+a.getDate()).slice(-2);return b=b||"yyyy-mm-dd",b.replace(/yyyy/gi,c).replace(/yy/gi,d).replace(/mm/gi,e).replace(/dd/gi,f)}var e=new Date;this.execCommand("insertHtml","time"==a?c(e,b):d(e,b))}},UE.plugins.rowspacing=function(){var a=this;a.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]}),a.commands.rowspacing={execCommand:function(a,b,c){return this.execCommand("paragraph","p",{style:"margin-"+c+":"+b+"px"}),!0},queryCommandValue:function(a,b){var c,d=domUtils.filterNodeList(this.selection.getStartElementPath(),function(a){return domUtils.isBlockElm(a)});return d?(c=domUtils.getComputedStyle(d,"margin-"+b).replace(/[^\d]/g,""),c?c:0):0}}},UE.plugins.lineheight=function(){var a=this;a.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]}),a.commands.lineheight={execCommand:function(a,b){return this.execCommand("paragraph","p",{style:"line-height:"+("1"==b?"normal":b+"em")}),!0},queryCommandValue:function(){var a=domUtils.filterNodeList(this.selection.getStartElementPath(),function(a){return domUtils.isBlockElm(a)});if(a){var b=domUtils.getComputedStyle(a,"line-height");return"normal"==b?1:b.replace(/[^\d.]*/gi,"")}}}},UE.plugins.insertcode=function(){var a=this;a.ready(function(){utils.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",a.document)}),a.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"}),a.commands.insertcode={execCommand:function(a,b){var c=this,d=c.selection.getRange(),e=domUtils.findParentByTagName(d.startContainer,"pre",!0);if(e)e.className="brush:"+b+";toolbar:false;";else{var f="";if(d.collapsed)f=browser.ie&&browser.ie11below?browser.version<=8?"&nbsp;":"":"<br/>";else{var g=d.extractContents(),h=c.document.createElement("div");h.appendChild(g),utils.each(UE.filterNode(UE.htmlparser(h.innerHTML.replace(/[\r\t]/g,"")),c.options.filterTxtRules).children,function(a){if(browser.ie&&browser.ie11below&&browser.version>8)"element"==a.type?"br"==a.tagName?f+="\n":dtd.$empty[a.tagName]||(utils.each(a.children,function(b){"element"==b.type?"br"==b.tagName?f+="\n":dtd.$empty[a.tagName]||(f+=b.innerText()):f+=b.data}),/\n$/.test(f)||(f+="\n")):f+=a.data+"\n",!a.nextSibling()&&/\n$/.test(f)&&(f=f.replace(/\n$/,""));else if(browser.ie&&browser.ie11below)"element"==a.type?"br"==a.tagName?f+="<br>":dtd.$empty[a.tagName]||(utils.each(a.children,function(b){"element"==b.type?"br"==b.tagName?f+="<br>":dtd.$empty[a.tagName]||(f+=b.innerText()):f+=b.data}),/br>$/.test(f)||(f+="<br>")):f+=a.data+"<br>",!a.nextSibling()&&/<br>$/.test(f)&&(f=f.replace(/<br>$/,""));else if(f+="element"==a.type?dtd.$empty[a.tagName]?"":a.innerText():a.data,!/br\/?\s*>$/.test(f)){if(!a.nextSibling())return;f+="<br>"}})}c.execCommand("inserthtml",'<pre id="coder"class="brush:'+b+';toolbar:false">'+f+"</pre>",!0),e=c.document.getElementById("coder"),domUtils.removeAttributes(e,"id");var i=e.previousSibling;i&&(3==i.nodeType&&1==i.nodeValue.length&&browser.ie&&6==browser.version||domUtils.isEmptyBlock(i))&&domUtils.remove(i);var d=c.selection.getRange();domUtils.isEmptyBlock(e)?d.setStart(e,0).setCursor(!1,!0):d.selectNodeContents(e).select()}},queryCommandValue:function(){var a=this.selection.getStartElementPath(),b="";return utils.each(a,function(a){if("PRE"==a.nodeName){var c=a.className.match(/brush:([^;]+)/);return b=c&&c[1]?c[1]:"",!1}}),b}},a.addInputRule(function(a){utils.each(a.getNodesByTagName("pre"),function(a){var b=a.getNodesByTagName("br");if(b.length)return void(browser.ie&&browser.ie11below&&browser.version>8&&utils.each(b,function(a){var b=UE.uNode.createText("\n");a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a)}));if(!(browser.ie&&browser.ie11below&&browser.version>8)){var c=a.innerText().split(/\n/);a.innerHTML(""),utils.each(c,function(b){b.length&&a.appendChild(UE.uNode.createText(b)),a.appendChild(UE.uNode.createElement("br"))})}})}),a.addOutputRule(function(a){utils.each(a.getNodesByTagName("pre"),function(a){var b="";utils.each(a.children,function(a){b+="text"==a.type?a.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,""):"br"==a.tagName?"\n":dtd.$empty[a.tagName]?a.innerText():""}),a.innerText(b.replace(/(&nbsp;|\n)+$/,""))})}),a.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};a.queryCommandState;a.queryCommandState=function(a){var b=this;return!b.notNeedCodeQuery[a.toLowerCase()]&&b.selection&&b.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)},a.addListener("beforeenterkeydown",function(){var b=a.selection.getRange(),c=domUtils.findParentByTagName(b.startContainer,"pre",!0);if(c){if(a.fireEvent("saveScene"),b.collapsed||b.deleteContents(),!browser.ie||browser.ie9above){var c,d=a.document.createElement("br");b.insertNode(d).setStartAfter(d).collapse(!0);var e=d.nextSibling;e||browser.ie&&!(browser.version>10)?b.setStartAfter(d):b.insertNode(d.cloneNode(!1)),
c=d.previousSibling;for(var f;c;)if(f=c,c=c.previousSibling,!c||"BR"==c.nodeName){c=f;break}if(c){for(var g="";c&&"BR"!=c.nodeName&&new RegExp("^[\\s"+domUtils.fillChar+"]*$").test(c.nodeValue);)g+=c.nodeValue,c=c.nextSibling;if("BR"!=c.nodeName){var h=c.nodeValue.match(new RegExp("^([\\s"+domUtils.fillChar+"]+)"));h&&h[1]&&(g+=h[1])}g&&(g=a.document.createTextNode(g),b.insertNode(g).setStartAfter(g))}b.collapse(!0).select(!0)}else if(browser.version>8){var i=a.document.createTextNode("\n"),j=b.startContainer;if(0==b.startOffset){var k=j.previousSibling;if(k){b.insertNode(i);var l=a.document.createTextNode(" ");b.setStartAfter(i).insertNode(l).setStart(l,0).collapse(!0).select(!0)}}else{b.insertNode(i).setStartAfter(i);var l=a.document.createTextNode(" ");j=b.startContainer.childNodes[b.startOffset],j&&!/^\n/.test(j.nodeValue)&&b.setStartBefore(i),b.insertNode(l).setStart(l,0).collapse(!0).select(!0)}}else{var d=a.document.createElement("br");b.insertNode(d),b.insertNode(a.document.createTextNode(domUtils.fillChar)),b.setStartAfter(d),c=d.previousSibling;for(var f;c;)if(f=c,c=c.previousSibling,!c||"BR"==c.nodeName){c=f;break}if(c){for(var g="";c&&"BR"!=c.nodeName&&new RegExp("^[ "+domUtils.fillChar+"]*$").test(c.nodeValue);)g+=c.nodeValue,c=c.nextSibling;if("BR"!=c.nodeName){var h=c.nodeValue.match(new RegExp("^([ "+domUtils.fillChar+"]+)"));h&&h[1]&&(g+=h[1])}g=a.document.createTextNode(g),b.insertNode(g).setStartAfter(g)}b.collapse(!0).select()}return a.fireEvent("saveScene"),!0}}),a.addListener("tabkeydown",function(b,c){var d=a.selection.getRange(),e=domUtils.findParentByTagName(d.startContainer,"pre",!0);if(e){if(a.fireEvent("saveScene"),c.shiftKey);else if(d.collapsed){var f=a.document.createTextNode("    ");d.insertNode(f).setStartAfter(f).collapse(!0).select(!0)}else{for(var g=d.createBookmark(),h=g.start.previousSibling;h;){if(e.firstChild===h&&!domUtils.isBr(h)){e.insertBefore(a.document.createTextNode("    "),h);break}if(domUtils.isBr(h)){e.insertBefore(a.document.createTextNode("    "),h.nextSibling);break}h=h.previousSibling}var i=g.end;for(h=g.start.nextSibling,e.firstChild===g.start&&e.insertBefore(a.document.createTextNode("    "),h.nextSibling);h&&h!==i;){if(domUtils.isBr(h)&&h.nextSibling){if(h.nextSibling===i)break;e.insertBefore(a.document.createTextNode("    "),h.nextSibling)}h=h.nextSibling}d.moveToBookmark(g).select()}return a.fireEvent("saveScene"),!0}}),a.addListener("beforeinserthtml",function(a,b){var c=this,d=c.selection.getRange(),e=domUtils.findParentByTagName(d.startContainer,"pre",!0);if(e){d.collapsed||d.deleteContents();var f="";if(browser.ie&&browser.version>8){utils.each(UE.filterNode(UE.htmlparser(b),c.options.filterTxtRules).children,function(a){"element"==a.type?"br"==a.tagName?f+="\n":dtd.$empty[a.tagName]||(utils.each(a.children,function(b){"element"==b.type?"br"==b.tagName?f+="\n":dtd.$empty[a.tagName]||(f+=b.innerText()):f+=b.data}),/\n$/.test(f)||(f+="\n")):f+=a.data+"\n",!a.nextSibling()&&/\n$/.test(f)&&(f=f.replace(/\n$/,""))});var g=c.document.createTextNode(utils.html(f.replace(/&nbsp;/g," ")));d.insertNode(g).selectNode(g).select()}else{var h=c.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(b),c.options.filterTxtRules).children,function(a){"element"==a.type?"br"==a.tagName?h.appendChild(c.document.createElement("br")):dtd.$empty[a.tagName]||(utils.each(a.children,function(b){"element"==b.type?"br"==b.tagName?h.appendChild(c.document.createElement("br")):dtd.$empty[a.tagName]||h.appendChild(c.document.createTextNode(utils.html(b.innerText().replace(/&nbsp;/g," ")))):h.appendChild(c.document.createTextNode(utils.html(b.data.replace(/&nbsp;/g," "))))}),"BR"!=h.lastChild.nodeName&&h.appendChild(c.document.createElement("br"))):h.appendChild(c.document.createTextNode(utils.html(a.data.replace(/&nbsp;/g," ")))),a.nextSibling()||"BR"!=h.lastChild.nodeName||h.removeChild(h.lastChild)}),d.insertNode(h).select()}return!0}}),a.addListener("keydown",function(a,b){var c=this,d=b.keyCode||b.which;if(40==d){var e,f=c.selection.getRange(),g=f.startContainer;if(f.collapsed&&(e=domUtils.findParentByTagName(f.startContainer,"pre",!0))&&!e.nextSibling){for(var h=e.lastChild;h&&"BR"==h.nodeName;)h=h.previousSibling;(h===g||f.startContainer===e&&f.startOffset==e.childNodes.length)&&(c.execCommand("insertparagraph"),domUtils.preventDefault(b))}}}),a.addListener("delkeydown",function(b,c){var d=this.selection.getRange();d.txtToElmBoundary(!0);var e=d.startContainer;if(domUtils.isTagNode(e,"pre")&&d.collapsed&&domUtils.isStartInblock(d)){var f=a.document.createElement("p");return domUtils.fillNode(a.document,f),e.parentNode.insertBefore(f,e),domUtils.remove(e),d.setStart(f,0).setCursor(!1,!0),domUtils.preventDefault(c),!0}})},UE.commands.cleardoc={execCommand:function(a){var b=this,c=b.options.enterTag,d=b.selection.getRange();"br"==c?(b.body.innerHTML="<br/>",d.setStart(b.body,0).setCursor()):(b.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",d.setStart(b.body.firstChild,0).setCursor(!1,!0)),setTimeout(function(){b.fireEvent("clearDoc")},0)}},UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(a){utils.each(a.getNodesByTagName("img"),function(a){var b;(b=a.getAttr("anchorname"))&&(a.tagName="a",a.setAttr({anchorname:"",name:b,"class":""}))})},inputRule:function(a){utils.each(a.getNodesByTagName("a"),function(a){var b;(b=a.getAttr("name"))&&!a.getAttr("href")&&(a.tagName="img",a.setAttr({anchorname:a.getAttr("name"),"class":"anchorclass"}),a.setAttr("name"))})},commands:{anchor:{execCommand:function(a,b){var c=this.selection.getRange(),d=c.getClosedNode();if(d&&d.getAttribute("anchorname"))b?d.setAttribute("anchorname",b):(c.setStartBefore(d).setCursor(),domUtils.remove(d));else if(b){var e=this.document.createElement("img");c.collapse(!0),domUtils.setAttributes(e,{anchorname:b,"class":"anchorclass"}),c.insertNode(e).setStartAfter(e).setCursor(!1,!0)}}}}}}),UE.plugins.wordcount=function(){var a=this;a.setOpt("wordCount",!0),a.addListener("contentchange",function(){a.fireEvent("wordcount")});var b;a.addListener("ready",function(){var a=this;domUtils.on(a.body,"keyup",function(c){var d=c.keyCode||c.which,e={16:1,18:1,20:1,37:1,38:1,39:1,40:1};d in e||(clearTimeout(b),b=setTimeout(function(){a.fireEvent("wordcount")},200))})})},UE.plugins.pagebreak=function(){function a(a){if(domUtils.isEmptyBlock(a)){for(var b,d=a.firstChild;d&&1==d.nodeType&&domUtils.isEmptyBlock(d);)b=d,d=d.firstChild;!b&&(b=a),domUtils.fillNode(c.document,b)}}function b(a){return a&&1==a.nodeType&&"HR"==a.tagName&&"pagebreak"==a.className}var c=this,d=["td"];c.setOpt("pageBreakTag","_ueditor_page_break_tag_"),c.ready(function(){utils.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",c.document)}),c.addInputRule(function(a){a.traversal(function(a){if("text"==a.type&&a.data==c.options.pageBreakTag){var b=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a)}})}),c.addOutputRule(function(a){utils.each(a.getNodesByTagName("hr"),function(a){if("pagebreak"==a.getAttr("class")){var b=UE.uNode.createText(c.options.pageBreakTag);a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a)}})}),c.commands.pagebreak={execCommand:function(){var e=c.selection.getRange(),f=c.document.createElement("hr");domUtils.setAttributes(f,{"class":"pagebreak",noshade:"noshade",size:"5"}),domUtils.unSelectable(f);var g,h=domUtils.findParentByTagName(e.startContainer,d,!0),i=[];if(h)switch(h.tagName){case"TD":if(g=h.parentNode,g.previousSibling)g.parentNode.insertBefore(f,g),i=domUtils.findParents(f);else{var j=domUtils.findParentByTagName(g,"table");j.parentNode.insertBefore(f,j),i=domUtils.findParents(f,!0)}g=i[1],f!==g&&domUtils.breakParent(f,g),c.fireEvent("afteradjusttable",c.document)}else{if(!e.collapsed){e.deleteContents();for(var k=e.startContainer;!domUtils.isBody(k)&&domUtils.isBlockElm(k)&&domUtils.isEmptyNode(k);)e.setStartBefore(k).collapse(!0),domUtils.remove(k),k=e.startContainer}e.insertNode(f);for(var l,g=f.parentNode;!domUtils.isBody(g);)domUtils.breakParent(f,g),l=f.nextSibling,l&&domUtils.isEmptyBlock(l)&&domUtils.remove(l),g=f.parentNode;l=f.nextSibling;var m=f.previousSibling;if(b(m)?domUtils.remove(m):m&&a(m),l)b(l)?domUtils.remove(l):a(l),e.setEndAfter(f).collapse(!1);else{var n=c.document.createElement("p");f.parentNode.appendChild(n),domUtils.fillNode(c.document,n),e.setStart(n,0).collapse(!0)}e.select(!0)}}}},UE.plugin.register("wordimage",function(){var a=this,b=[];return{commands:{wordimage:{execCommand:function(){for(var b,c=domUtils.getElementsByTagName(a.body,"img"),d=[],e=0;b=c[e++];){var f=b.getAttribute("word_img");f&&d.push(f)}return d},queryCommandState:function(){b=domUtils.getElementsByTagName(a.body,"img");for(var c,d=0;c=b[d++];)if(c.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(b){utils.each(b.getNodesByTagName("img"),function(b){var c=b.attrs,d=parseInt(c.width)<128||parseInt(c.height)<43,e=a.options,f=e.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";c.src&&/^(?:(file:\/+))/.test(c.src)&&b.setAttr({width:c.width,height:c.height,alt:c.alt,word_img:c.src,src:f,style:"background:url("+(d?e.themePath+e.theme+"/images/word.gif":e.langPath+e.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}}),UE.plugins.dragdrop=function(){var a=this;a.ready(function(){domUtils.on(this.body,"dragend",function(){var b=a.selection.getRange(),c=b.getClosedNode()||a.selection.getStart();if(c&&"IMG"==c.tagName){for(var d,e=c.previousSibling;(d=c.nextSibling)&&1==d.nodeType&&"SPAN"==d.tagName&&!d.firstChild;)domUtils.remove(d);(!e||1!=e.nodeType||domUtils.isEmptyBlock(e))&&e||d&&(!d||domUtils.isEmptyBlock(d))||(e&&"P"==e.tagName&&!domUtils.isEmptyBlock(e)?(e.appendChild(c),domUtils.moveChild(d,e),domUtils.remove(d)):d&&"P"==d.tagName&&!domUtils.isEmptyBlock(d)&&d.insertBefore(c,d.firstChild),e&&"P"==e.tagName&&domUtils.isEmptyBlock(e)&&domUtils.remove(e),d&&"P"==d.tagName&&domUtils.isEmptyBlock(d)&&domUtils.remove(d),b.selectNode(c).select(),a.fireEvent("saveScene"))}})}),a.addListener("keyup",function(b,c){var d=c.keyCode||c.which;if(13==d){var e,f=a.selection.getRange();(e=domUtils.findParentByTagName(f.startContainer,"p",!0))&&"center"==domUtils.getComputedStyle(e,"text-align")&&domUtils.removeStyle(e,"text-align")}})},UE.plugins.undo=function(){function a(a,b){if(a.length!=b.length)return 0;for(var c=0,d=a.length;c<d;c++)if(a[c]!=b[c])return 0;return 1}function b(b,c){return b.collapsed!=c.collapsed?0:a(b.startAddress,c.startAddress)&&a(b.endAddress,c.endAddress)?1:0}function c(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&1==this.list.length)return void this.reset();for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}},this.restore=function(){var a=this.editor,b=this.list[this.index],c=UE.htmlparser(b.content.replace(h,""));a.options.autoClearEmptyNode=!1,a.filterInputRule(c),a.options.autoClearEmptyNode=j,a.document.body.innerHTML=c.toHtml(),a.fireEvent("afterscencerestore"),browser.ie&&utils.each(domUtils.getElementsByTagName(a.document,"td th caption p"),function(b){domUtils.isEmptyNode(b)&&domUtils.fillNode(a.document,b)});try{var d=new dom.Range(a.document).moveToAddress(b.address);d.select(i[d.startContainer.nodeName.toLowerCase()])}catch(e){}this.update(),this.clearKey(),a.fireEvent("reset",!0)},this.getScene=function(){var a=this.editor,b=a.selection.getRange(),c=b.createAddress(!1,!0);a.fireEvent("beforegetscene");var d=UE.htmlparser(a.body.innerHTML);a.options.autoClearEmptyNode=!1,a.filterOutputRule(d),a.options.autoClearEmptyNode=j;var e=d.toHtml();return a.fireEvent("aftergetscene"),{address:c,content:e}},this.save=function(a,c){clearTimeout(d);var g=this.getScene(c),h=this.list[this.index];h&&h.content!=g.content&&e.trigger("contentchange"),h&&h.content==g.content&&(a?1:b(h.address,g.address))||(this.list=this.list.slice(0,this.index+1),this.list.push(g),this.list.length>f&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1]},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){m=0,k=null}}var d,e=this,f=e.options.maxUndoCount||20,g=e.options.maxInputCount||20,h=new RegExp(domUtils.fillChar+"|</hr>","gi"),i={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},j=e.options.autoClearEmptyNode;e.undoManger=new c,e.undoManger.editor=e,e.addListener("saveScene",function(){var a=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,a)}),e.addListener("reset",function(a,b){b||this.undoManger.reset()}),e.commands.redo=e.commands.undo={execCommand:function(a){this.undoManger[a]()},queryCommandState:function(a){return this.undoManger["has"+("undo"==a.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var k,l={16:1,17:1,18:1,37:1,38:1,39:1,40:1},m=0,n=!1;e.addListener("ready",function(){domUtils.on(this.body,"compositionstart",function(){n=!0}),domUtils.on(this.body,"compositionend",function(){n=!1})}),e.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var o=!0;e.addListener("keydown",function(a,b){function c(a){a.undoManger.save(!1,!0),a.fireEvent("selectionchange")}var e=this,f=b.keyCode||b.which;if(!(l[f]||b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)){if(n)return;if(!e.selection.getRange().collapsed)return e.undoManger.save(!1,!0),void(o=!1);0==e.undoManger.list.length&&e.undoManger.save(!0),clearTimeout(d),d=setTimeout(function(){if(n)var a=setInterval(function(){n||(c(e),clearInterval(a))},300);else c(e)},200),k=f,m++,m>=g&&c(e)}}),e.addListener("keyup",function(a,b){var c=b.keyCode||b.which;if(!(l[c]||b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)){if(n)return;o||(this.undoManger.save(!1,!0),o=!0)}}),e.stopCmdUndo=function(){e.__hasEnterExecCommand=!0},e.startCmdUndo=function(){e.__hasEnterExecCommand=!1}},UE.plugin.register("copy",function(){function a(){ZeroClipboard.config({debug:!1,swfPath:b.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var a=b.zeroclipboard=new ZeroClipboard;a.on("copy",function(a){var c=a.client,d=b.selection.getRange(),e=document.createElement("div");e.appendChild(d.cloneContents()),c.setText(e.innerText||e.textContent),c.setHtml(e.innerHTML),d.select()}),a.on("mouseover mouseout",function(a){var b=a.target;"mouseover"==a.type?domUtils.addClass(b,"edui-state-hover"):"mouseout"==a.type&&domUtils.removeClasses(b,"edui-state-hover")}),a.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}var b=this;return{bindEvents:{ready:function(){browser.ie||(window.ZeroClipboard?a():utils.loadFile(document,{src:b.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){a()}))}},commands:{copy:{execCommand:function(a){b.document.execCommand("copy")||alert(b.getLang("copymsg"))}}}}}),UE.plugins.paste=function(){function a(a){var b=this.document;if(!b.getElementById("baidu_pastebin")){var c=this.selection.getRange(),d=c.createBookmark(),e=b.createElement("div");e.id="baidu_pastebin",browser.webkit&&e.appendChild(b.createTextNode(domUtils.fillChar+domUtils.fillChar)),b.body.appendChild(e),d.start.style.display="",e.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(d.start).y+"px",c.selectNodeContents(e).select(!0),setTimeout(function(){if(browser.webkit)for(var f,g=0,h=b.querySelectorAll("#baidu_pastebin");f=h[g++];){if(!domUtils.isEmptyNode(f)){e=f;break}domUtils.remove(f)}try{e.parentNode.removeChild(e)}catch(i){}c.moveToBookmark(d).select(!0),a(e)},0)}}function b(a){return a.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(a,b,c,d){return c=c.toLowerCase(),{img:1}[c]?a:(d=d.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(a,b,c){return{src:1,href:1,name:1}[b.toLowerCase()]?b+"="+c+" ":""}),{span:1,div:1}[c]?"":"<"+b+c+" "+utils.trim(d)+">")})}function c(a){var c;if(a.firstChild){for(var h,i=domUtils.getElementsByTagName(a,"span"),j=0;h=i[j++];)"_baidu_cut_start"!=h.id&&"_baidu_cut_end"!=h.id||domUtils.remove(h);if(browser.webkit){for(var k,l=a.querySelectorAll("div br"),j=0;k=l[j++];){var m=k.parentNode;"DIV"==m.tagName&&1==m.childNodes.length&&(m.innerHTML="<p><br/></p>",domUtils.remove(m))}for(var n,o=a.querySelectorAll("#baidu_pastebin"),j=0;n=o[j++];){var p=d.document.createElement("p");for(n.parentNode.insertBefore(p,n);n.firstChild;)p.appendChild(n.firstChild);domUtils.remove(n)}for(var q,r=a.querySelectorAll("meta"),j=0;q=r[j++];)domUtils.remove(q);var l=a.querySelectorAll("br");for(j=0;q=l[j++];)/^apple-/i.test(q.className)&&domUtils.remove(q)}if(browser.gecko){var s=a.querySelectorAll("[_moz_dirty]");for(j=0;q=s[j++];)q.removeAttribute("_moz_dirty")}if(!browser.ie)for(var q,t=a.querySelectorAll("span.Apple-style-span"),j=0;q=t[j++];)domUtils.remove(q,!0);c=a.innerHTML,c=UE.filterWord(c);var u=UE.htmlparser(c);if(d.options.filterRules&&UE.filterNode(u,d.options.filterRules),d.filterInputRule(u),browser.webkit){var v=u.lastChild();v&&"element"==v.type&&"br"==v.tagName&&u.removeChild(v),utils.each(d.body.querySelectorAll("div"),function(a){domUtils.isEmptyBlock(a)&&domUtils.remove(a,!0)})}if(c={html:u.toHtml()},d.fireEvent("beforepaste",c,u),!c.html)return;u=UE.htmlparser(c.html,!0),1===d.queryCommandState("pasteplain")?d.execCommand("insertHtml",UE.filterNode(u,d.options.filterTxtRules).toHtml(),!0):(UE.filterNode(u,d.options.filterTxtRules),e=u.toHtml(),f=c.html,g=d.selection.getRange().createAddress(!0),d.execCommand("insertHtml",d.getOpt("retainOnlyLabelPasted")===!0?b(f):f,!0)),d.fireEvent("afterpaste",c)}}var d=this;d.setOpt({retainOnlyLabelPasted:!1});var e,f,g;d.addListener("pasteTransfer",function(a,c){if(g&&e&&f&&e!=f){var h=d.selection.getRange();if(h.moveToAddress(g,!0),!h.collapsed){for(;!domUtils.isBody(h.startContainer);){var i=h.startContainer;if(1==i.nodeType){if(i=i.childNodes[h.startOffset],!i){h.setStartBefore(h.startContainer);continue}var j=i.previousSibling;j&&3==j.nodeType&&new RegExp("^[\n\r\t "+domUtils.fillChar+"]*$").test(j.nodeValue)&&h.setStartBefore(j)}if(0!=h.startOffset)break;h.setStartBefore(h.startContainer)}for(;!domUtils.isBody(h.endContainer);){var k=h.endContainer;if(1==k.nodeType){if(k=k.childNodes[h.endOffset],!k){h.setEndAfter(h.endContainer);continue}var l=k.nextSibling;l&&3==l.nodeType&&new RegExp("^[\n\r\t"+domUtils.fillChar+"]*$").test(l.nodeValue)&&h.setEndAfter(l)}if(h.endOffset!=h.endContainer[3==h.endContainer.nodeType?"nodeValue":"childNodes"].length)break;h.setEndAfter(h.endContainer)}}h.deleteContents(),h.select(!0),d.__hasEnterExecCommand=!0;var m=f;2===c?m=b(m):c&&(m=e),d.execCommand("inserthtml",m,!0),d.__hasEnterExecCommand=!1;for(var n=d.selection.getRange();!domUtils.isBody(n.startContainer)&&!n.startOffset&&n.startContainer[3==n.startContainer.nodeType?"nodeValue":"childNodes"].length;)n.setStartBefore(n.startContainer);var o=n.createAddress(!0);g.endAddress=o.startAddress}}),d.addListener("ready",function(){domUtils.on(d.body,"cut",function(){var a=d.selection.getRange();!a.collapsed&&d.undoManger&&d.undoManger.save()}),domUtils.on(d.body,browser.ie||browser.opera?"keydown":"paste",function(b){(!browser.ie&&!browser.opera||(b.ctrlKey||b.metaKey)&&"86"==b.keyCode)&&a.call(d,function(a){c(a)})})}),d.commands.paste={execCommand:function(b){browser.ie?(a.call(d,function(a){c(a)}),d.document.execCommand("paste")):alert(d.getLang("pastemsg"))}}},UE.plugins.pasteplain=function(){var a=this;a.setOpt({pasteplain:!1,filterTxtRules:function(){function a(a){a.tagName="p",a.setStyle()}function b(a){a.parentNode.removeChild(a,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(a){for(var b,c=UE.uNode.createElement("p");b=a.firstChild();)"text"!=b.type&&UE.dom.dtd.$block[b.tagName]?c.firstChild()?(a.parentNode.insertBefore(c,a),c=UE.uNode.createElement("p")):a.parentNode.insertBefore(b,a):c.appendChild(b);c.firstChild()&&a.parentNode.insertBefore(c,a),a.parentNode.removeChild(a)},ol:b,ul:b,dl:b,dt:b,dd:b,li:b,caption:a,th:a,tr:a,h1:a,h2:a,h3:a,h4:a,h5:a,h6:a,td:function(a){var b=!!a.innerText();b&&a.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),a),a.parentNode.removeChild(a,a.innerText())}}}()});var b=a.options.pasteplain;a.commands.pasteplain={queryCommandState:function(){return b?1:0},execCommand:function(){b=0|!b},notNeedUndo:1}},UE.plugins.list=function(){function a(a){var b=[];for(var c in a)b.push(c);return b}function b(a){var b=a.className;return domUtils.hasClass(a,/custom_/)?b.match(/custom_(\w+)/)[1]:domUtils.getStyle(a,"list-style-type")}function c(a,c){utils.each(domUtils.getElementsByTagName(a,"ol ul"),function(f){if(domUtils.inDoc(f,a)){var g=f.parentNode;if(g.tagName==f.tagName){var h=b(f)||("OL"==f.tagName?"decimal":"disc"),i=b(g)||("OL"==g.tagName?"decimal":"disc");if(h==i){var l=utils.indexOf(k[f.tagName],h);l=l+1==k[f.tagName].length?0:l+1,e(f,k[f.tagName][l])}}var m=0,n=2;domUtils.hasClass(f,/custom_/)?/[ou]l/i.test(g.tagName)&&domUtils.hasClass(g,/custom_/)||(n=1):/[ou]l/i.test(g.tagName)&&domUtils.hasClass(g,/custom_/)&&(n=3);var o=domUtils.getStyle(f,"list-style-type");o&&(f.style.cssText="list-style-type:"+o),f.className=utils.trim(f.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+n,utils.each(domUtils.getElementsByTagName(f,"li"),function(a){if(a.style.cssText&&(a.style.cssText=""),!a.firstChild)return void domUtils.remove(a);if(a.parentNode===f){if(m++,domUtils.hasClass(f,/custom_/)){var c=1,d=b(f);if("OL"==f.tagName){if(d)switch(d){case"cn":case"cn1":case"cn2":m>10&&(m%10==0||m>10&&m<20)?c=2:m>20&&(c=3);break;case"num2":m>9&&(c=2)}a.className="list-"+j[d]+m+" list-"+d+"-paddingleft-"+c}else a.className="list-"+j[d]+" list-"+d+"-paddingleft"}else a.className=a.className.replace(/list-[\w\-]+/gi,"");var e=a.getAttribute("class");null===e||e.replace(/\s/g,"")||domUtils.removeAttributes(a,"class")}}),!c&&d(f,f.tagName.toLowerCase(),b(f)||domUtils.getStyle(f,"list-style-type"),!0)}})}function d(a,d,e,f){var g=a.nextSibling;g&&1==g.nodeType&&g.tagName.toLowerCase()==d&&(b(g)||domUtils.getStyle(g,"list-style-type")||("ol"==d?"decimal":"disc"))==e&&(domUtils.moveChild(g,a),0==g.childNodes.length&&domUtils.remove(g)),g&&domUtils.isFillChar(g)&&domUtils.remove(g);var h=a.previousSibling;h&&1==h.nodeType&&h.tagName.toLowerCase()==d&&(b(h)||domUtils.getStyle(h,"list-style-type")||("ol"==d?"decimal":"disc"))==e&&domUtils.moveChild(a,h),h&&domUtils.isFillChar(h)&&domUtils.remove(h),!f&&domUtils.isEmptyBlock(a)&&domUtils.remove(a),b(a)&&c(a.ownerDocument,!0)}function e(a,b){j[b]&&(a.className="custom_"+b);try{domUtils.setStyle(a,"list-style-type",b)}catch(c){}}function f(a){var b=a.previousSibling;b&&domUtils.isEmptyBlock(b)&&domUtils.remove(b),b=a.nextSibling,b&&domUtils.isEmptyBlock(b)&&domUtils.remove(b)}function g(a){for(;a&&!domUtils.isBody(a);){if("TABLE"==a.nodeName)return null;if("LI"==a.nodeName)return a;a=a.parentNode}}var h=this,i={TD:1,PRE:1,BLOCKQUOTE:1},j={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};h.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var k={OL:a(h.options.insertorderedlist),UL:a(h.options.insertunorderedlist)},l=h.options.listiconpath;for(var m in j)h.options.insertorderedlist.hasOwnProperty(m)||h.options.insertunorderedlist.hasOwnProperty(m)||delete j[m];h.ready(function(){var a=[];for(var b in j){if("dash"==b||"dot"==b)a.push("li.list-"+j[b]+"{background-image:url("+l+j[b]+".gif)}"),a.push("ul.custom_"+b+"{list-style:none;}ul.custom_"+b+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var c=0;c<99;c++)a.push("li.list-"+j[b]+c+"{background-image:url("+l+"list-"+j[b]+c+".gif)}");a.push("ol.custom_"+b+"{list-style:none;}ol.custom_"+b+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(b){case"cn":a.push("li.list-"+b+"-paddingleft-1{padding-left:25px}"),a.push("li.list-"+b+"-paddingleft-2{padding-left:40px}"),a.push("li.list-"+b+"-paddingleft-3{padding-left:55px}");break;case"cn1":a.push("li.list-"+b+"-paddingleft-1{padding-left:30px}"),a.push("li.list-"+b+"-paddingleft-2{padding-left:40px}"),a.push("li.list-"+b+"-paddingleft-3{padding-left:55px}");break;case"cn2":a.push("li.list-"+b+"-paddingleft-1{padding-left:40px}"),a.push("li.list-"+b+"-paddingleft-2{padding-left:55px}"),a.push("li.list-"+b+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":a.push("li.list-"+b+"-paddingleft-1{padding-left:25px}");break;case"num2":a.push("li.list-"+b+"-paddingleft-1{padding-left:35px}"),a.push("li.list-"+b+"-paddingleft-2{padding-left:40px}");break;case"dash":a.push("li.list-"+b+"-paddingleft{padding-left:35px}");break;case"dot":a.push("li.list-"+b+"-paddingleft{padding-left:20px}")}}a.push(".list-paddingleft-1{padding-left:0}"),a.push(".list-paddingleft-2{padding-left:"+h.options.listDefaultPaddingLeft+"px}"),a.push(".list-paddingleft-3{padding-left:"+2*h.options.listDefaultPaddingLeft+"px}"),utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+a.join("\n"),h.document)}),h.ready(function(){domUtils.on(h.body,"cut",function(){setTimeout(function(){var a,b=h.selection.getRange();if(!b.collapsed&&(a=domUtils.findParentByTagName(b.startContainer,"li",!0))&&!a.nextSibling&&domUtils.isEmptyBlock(a)){var c,d=a.parentNode;if(c=d.previousSibling)domUtils.remove(d),b.setStartAtLast(c).collapse(!0),b.select(!0);else if(c=d.nextSibling)domUtils.remove(d),b.setStartAtFirst(c).collapse(!0),b.select(!0);else{var e=h.document.createElement("p");domUtils.fillNode(h.document,e),d.parentNode.insertBefore(e,d),domUtils.remove(d),b.setStart(e,0).collapse(!0),b.select(!0)}}})})}),h.addListener("beforepaste",function(a,c){var d,e=this,f=e.selection.getRange(),g=UE.htmlparser(c.html,!0);if(d=domUtils.findParentByTagName(f.startContainer,"li",!0)){var h=d.parentNode,i="OL"==h.tagName?"ul":"ol";utils.each(g.getNodesByTagName(i),function(c){if(c.tagName=h.tagName,c.setAttr(),c.parentNode===g)a=b(h)||("OL"==h.tagName?"decimal":"disc");else{var d=c.parentNode.getAttr("class");a=d&&/custom_/.test(d)?d.match(/custom_(\w+)/)[1]:c.parentNode.getStyle("list-style-type"),a||(a="OL"==h.tagName?"decimal":"disc")}var e=utils.indexOf(k[h.tagName],a);c.parentNode!==g&&(e=e+1==k[h.tagName].length?0:e+1);var f=k[h.tagName][e];j[f]?c.setAttr("class","custom_"+f):c.setStyle("list-style-type",f)})}c.html=g.toHtml()}),h.getOpt("disablePInList")===!0&&h.addOutputRule(function(a){utils.each(a.getNodesByTagName("li"),function(a){var b=[],c=0;utils.each(a.children,function(d){if("p"==d.tagName){for(var e;e=d.children.pop();)b.splice(c,0,e),e.parentNode=a,lastNode=e;if(e=b[b.length-1],!e||"element"!=e.type||"br"!=e.tagName){var f=UE.uNode.createElement("br");f.parentNode=a,b.push(f)}c=b.length}}),b.length&&(a.children=b)})}),h.addInputRule(function(a){function b(a,b){var e=b.firstChild();if(e&&"element"==e.type&&"span"==e.tagName&&/Wingdings|Symbol/.test(e.getStyle("font-family"))){for(var f in d)if(d[f]==e.data)return f;return"disc"}for(var f in c)if(c[f].test(a))return f}if(utils.each(a.getNodesByTagName("li"),function(a){for(var b,c=UE.uNode.createElement("p"),d=0;b=a.children[d];)"text"==b.type||dtd.p[b.tagName]?c.appendChild(b):c.firstChild()?(a.insertBefore(c,b),c=UE.uNode.createElement("p"),d+=2):d++;(c.firstChild()&&!c.parentNode||!a.firstChild())&&a.appendChild(c),c.firstChild()||c.innerHTML(browser.ie?"&nbsp;":"<br/>");var e=a.firstChild(),f=e.lastChild();f&&"text"==f.type&&/^\s*$/.test(f.data)&&e.removeChild(f)}),h.options.autoTransWordToList){var c={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},d={square:"n"};utils.each(a.getNodesByTagName("p"),function(a){function d(a,b,d){if("ol"==a.tagName)if(browser.ie){var e=b.firstChild();"element"==e.type&&"span"==e.tagName&&c[d].test(e.innerText())&&b.removeChild(e)}else b.innerHTML(b.innerHTML().replace(c[d],""));else b.removeChild(b.firstChild());var f=UE.uNode.createElement("li");f.appendChild(b),a.appendChild(f)}if("MsoListParagraph"==a.getAttr("class")){a.setStyle("margin",""),a.setStyle("margin-left",""),a.setAttr("class","");var e,f=a,g=a;if("li"!=a.parentNode.tagName&&(e=b(a.innerText(),a))){var i=UE.uNode.createElement(h.options.insertorderedlist.hasOwnProperty(e)?"ol":"ul");for(j[e]?i.setAttr("class","custom_"+e):i.setStyle("list-style-type",e);a&&"li"!=a.parentNode.tagName&&b(a.innerText(),a);)f=a.nextSibling(),f||a.parentNode.insertBefore(i,a),d(i,a,e),a=f;!i.parentNode&&a&&a.parentNode&&a.parentNode.insertBefore(i,a)}var k=g.firstChild();k&&"element"==k.type&&"span"==k.tagName&&/^\s*(&nbsp;)+\s*$/.test(k.innerText())&&k.parentNode.removeChild(k)}})}}),h.addListener("contentchange",function(){c(h.document)}),h.addListener("keydown",function(a,b){function c(){b.preventDefault?b.preventDefault():b.returnValue=!1,h.fireEvent("contentchange"),h.undoManger&&h.undoManger.save()}function d(a,b){for(;a&&!domUtils.isBody(a);){if(b(a))return null;if(1==a.nodeType&&/[ou]l/i.test(a.tagName))return a;a=a.parentNode}return null}var e=b.keyCode||b.which;if(13==e&&!b.shiftKey){var g=h.selection.getRange(),i=domUtils.findParent(g.startContainer,function(a){return domUtils.isBlockElm(a)},!0),j=domUtils.findParentByTagName(g.startContainer,"li",!0);if(i&&"PRE"!=i.tagName&&!j){var k=i.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");/^\s*1\s*\.[^\d]/.test(k)&&(i.innerHTML=k.replace(/^\s*1\s*\./,""),g.setStartAtLast(i).collapse(!0).select(),h.__hasEnterExecCommand=!0,h.execCommand("insertorderedlist"),h.__hasEnterExecCommand=!1)}var l=h.selection.getRange(),m=d(l.startContainer,function(a){return"TABLE"==a.tagName}),n=l.collapsed?m:d(l.endContainer,function(a){return"TABLE"==a.tagName});if(m&&n&&m===n){if(!l.collapsed){if(m=domUtils.findParentByTagName(l.startContainer,"li",!0),n=domUtils.findParentByTagName(l.endContainer,"li",!0),!m||!n||m!==n){var o=l.cloneRange(),p=o.collapse(!1).createBookmark();l.deleteContents(),o.moveToBookmark(p);var j=domUtils.findParentByTagName(o.startContainer,"li",!0);return f(j),o.select(),void c()}if(l.deleteContents(),j=domUtils.findParentByTagName(l.startContainer,"li",!0),j&&domUtils.isEmptyBlock(j))return v=j.previousSibling,next=j.nextSibling,s=h.document.createElement("p"),domUtils.fillNode(h.document,s),q=j.parentNode,v&&next?(l.setStart(next,0).collapse(!0).select(!0),domUtils.remove(j)):((v||next)&&v?j.parentNode.parentNode.insertBefore(s,q.nextSibling):q.parentNode.insertBefore(s,q),domUtils.remove(j),q.firstChild||domUtils.remove(q),l.setStart(s,0).setCursor()),void c()}if(j=domUtils.findParentByTagName(l.startContainer,"li",!0)){
if(domUtils.isEmptyBlock(j)){p=l.createBookmark();var q=j.parentNode;if(j!==q.lastChild?(domUtils.breakParent(j,q),f(j)):(q.parentNode.insertBefore(j,q.nextSibling),domUtils.isEmptyNode(q)&&domUtils.remove(q)),!dtd.$list[j.parentNode.tagName])if(domUtils.isBlockElm(j.firstChild))domUtils.remove(j,!0);else{for(s=h.document.createElement("p"),j.parentNode.insertBefore(s,j);j.firstChild;)s.appendChild(j.firstChild);domUtils.remove(j)}l.moveToBookmark(p).select()}else{var r=j.firstChild;if(!r||!domUtils.isBlockElm(r)){var s=h.document.createElement("p");for(!j.firstChild&&domUtils.fillNode(h.document,s);j.firstChild;)s.appendChild(j.firstChild);j.appendChild(s),r=s}var t=h.document.createElement("span");l.insertNode(t),domUtils.breakParent(t,j);var u=t.nextSibling;r=u.firstChild,r||(s=h.document.createElement("p"),domUtils.fillNode(h.document,s),u.appendChild(s),r=s),domUtils.isEmptyNode(r)&&(r.innerHTML="",domUtils.fillNode(h.document,r)),l.setStart(r,0).collapse(!0).shrinkBoundary().select(),domUtils.remove(t);var v=u.previousSibling;v&&domUtils.isEmptyBlock(v)&&(v.innerHTML="<p></p>",domUtils.fillNode(h.document,v.firstChild))}c()}}}if(8==e&&(l=h.selection.getRange(),l.collapsed&&domUtils.isStartInblock(l)&&(o=l.cloneRange().trimBoundary(),j=domUtils.findParentByTagName(l.startContainer,"li",!0),j&&domUtils.isStartInblock(o)))){if(m=domUtils.findParentByTagName(l.startContainer,"p",!0),m&&m!==j.firstChild){var q=domUtils.findParentByTagName(m,["ol","ul"]);return domUtils.breakParent(m,q),f(m),h.fireEvent("contentchange"),l.setStart(m,0).setCursor(!1,!0),h.fireEvent("saveScene"),void domUtils.preventDefault(b)}if(j&&(v=j.previousSibling)){if(46==e&&j.childNodes.length)return;if(dtd.$list[v.tagName]&&(v=v.lastChild),h.undoManger&&h.undoManger.save(),r=j.firstChild,domUtils.isBlockElm(r))if(domUtils.isEmptyNode(r))for(v.appendChild(r),l.setStart(r,0).setCursor(!1,!0);j.firstChild;)v.appendChild(j.firstChild);else t=h.document.createElement("span"),l.insertNode(t),domUtils.isEmptyBlock(v)&&(v.innerHTML=""),domUtils.moveChild(j,v),l.setStartBefore(t).collapse(!0).select(!0),domUtils.remove(t);else if(domUtils.isEmptyNode(j)){var s=h.document.createElement("p");v.appendChild(s),l.setStart(s,0).setCursor()}else for(l.setEnd(v,v.childNodes.length).collapse().select(!0);j.firstChild;)v.appendChild(j.firstChild);return domUtils.remove(j),h.fireEvent("contentchange"),h.fireEvent("saveScene"),void domUtils.preventDefault(b)}if(j&&!j.previousSibling){var q=j.parentNode,p=l.createBookmark();if(domUtils.isTagNode(q.parentNode,"ol ul"))q.parentNode.insertBefore(j,q),domUtils.isEmptyNode(q)&&domUtils.remove(q);else{for(;j.firstChild;)q.parentNode.insertBefore(j.firstChild,q);domUtils.remove(j),domUtils.isEmptyNode(q)&&domUtils.remove(q)}return l.moveToBookmark(p).setCursor(!1,!0),h.fireEvent("contentchange"),h.fireEvent("saveScene"),void domUtils.preventDefault(b)}}}),h.addListener("keyup",function(a,c){var e=c.keyCode||c.which;if(8==e){var f,g=h.selection.getRange();(f=domUtils.findParentByTagName(g.startContainer,["ol","ul"],!0))&&d(f,f.tagName.toLowerCase(),b(f)||domUtils.getComputedStyle(f,"list-style-type"),!0)}}),h.addListener("tabkeydown",function(){function a(a){if(h.options.maxListLevel!=-1){for(var b=a.parentNode,c=0;/[ou]l/i.test(b.tagName);)c++,b=b.parentNode;if(c>=h.options.maxListLevel)return!0}}var c=h.selection.getRange(),f=domUtils.findParentByTagName(c.startContainer,"li",!0);if(f){var g;if(!c.collapsed){h.fireEvent("saveScene"),g=c.createBookmark();for(var i,j,l=0,m=domUtils.findParents(f);j=m[l++];)if(domUtils.isTagNode(j,"ol ul")){i=j;break}var n=f;if(g.end)for(;n&&!(domUtils.getPosition(n,g.end)&domUtils.POSITION_FOLLOWING);)if(a(n))n=domUtils.getNextDomNode(n,!1,null,function(a){return a!==i});else{var o=n.parentNode,p=h.document.createElement(o.tagName),q=utils.indexOf(k[p.tagName],b(o)||domUtils.getComputedStyle(o,"list-style-type")),r=q+1==k[p.tagName].length?0:q+1,s=k[p.tagName][r];for(e(p,s),o.insertBefore(p,n);n&&!(domUtils.getPosition(n,g.end)&domUtils.POSITION_FOLLOWING);){if(f=n.nextSibling,p.appendChild(n),!f||domUtils.isTagNode(f,"ol ul")){if(f)for(;(f=f.firstChild)&&"LI"!=f.tagName;);else f=domUtils.getNextDomNode(n,!1,null,function(a){return a!==i});break}n=f}d(p,p.tagName.toLowerCase(),s),n=f}return h.fireEvent("contentchange"),c.moveToBookmark(g).select(),!0}if(a(f))return!0;var o=f.parentNode,p=h.document.createElement(o.tagName),q=utils.indexOf(k[p.tagName],b(o)||domUtils.getComputedStyle(o,"list-style-type"));q=q+1==k[p.tagName].length?0:q+1;var s=k[p.tagName][q];if(e(p,s),domUtils.isStartInblock(c))return h.fireEvent("saveScene"),g=c.createBookmark(),o.insertBefore(p,f),p.appendChild(f),d(p,p.tagName.toLowerCase(),s),h.fireEvent("contentchange"),c.moveToBookmark(g).select(!0),!0}}),h.commands.insertorderedlist=h.commands.insertunorderedlist={execCommand:function(a,c){c||(c="insertorderedlist"==a.toLowerCase()?"decimal":"disc");var f=this,h=this.selection.getRange(),j=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase():!domUtils.isWhitespace(a)},k="insertorderedlist"==a.toLowerCase()?"ol":"ul",l=f.document.createDocumentFragment();h.adjustmentBoundary().shrinkBoundary();var m,n,o,p,q=h.createBookmark(!0),r=g(f.document.getElementById(q.start)),s=0,t=g(f.document.getElementById(q.end)),u=0;if(r||t){if(r&&(m=r.parentNode),q.end||(t=r),t&&(n=t.parentNode),m===n){for(;r!==t;){if(p=r,r=r.nextSibling,!domUtils.isBlockElm(p.firstChild)){for(var v=f.document.createElement("p");p.firstChild;)v.appendChild(p.firstChild);p.appendChild(v)}l.appendChild(p)}if(p=f.document.createElement("span"),m.insertBefore(p,t),!domUtils.isBlockElm(t.firstChild)){for(v=f.document.createElement("p");t.firstChild;)v.appendChild(t.firstChild);t.appendChild(v)}l.appendChild(t),domUtils.breakParent(p,m),domUtils.isEmptyNode(p.previousSibling)&&domUtils.remove(p.previousSibling),domUtils.isEmptyNode(p.nextSibling)&&domUtils.remove(p.nextSibling);var w=b(m)||domUtils.getComputedStyle(m,"list-style-type")||("insertorderedlist"==a.toLowerCase()?"decimal":"disc");if(m.tagName.toLowerCase()==k&&w==c){for(var x,y=0,z=f.document.createDocumentFragment();x=l.firstChild;)if(domUtils.isTagNode(x,"ol ul"))z.appendChild(x);else for(;x.firstChild;)z.appendChild(x.firstChild),domUtils.remove(x);p.parentNode.insertBefore(z,p)}else o=f.document.createElement(k),e(o,c),o.appendChild(l),p.parentNode.insertBefore(o,p);return domUtils.remove(p),o&&d(o,k,c),void h.moveToBookmark(q).select()}if(r){for(;r;){if(p=r.nextSibling,domUtils.isTagNode(r,"ol ul"))l.appendChild(r);else{for(var A=f.document.createDocumentFragment(),B=0;r.firstChild;)domUtils.isBlockElm(r.firstChild)&&(B=1),A.appendChild(r.firstChild);if(B)l.appendChild(A);else{var C=f.document.createElement("p");C.appendChild(A),l.appendChild(C)}domUtils.remove(r)}r=p}m.parentNode.insertBefore(l,m.nextSibling),domUtils.isEmptyNode(m)?(h.setStartBefore(m),domUtils.remove(m)):h.setStartAfter(m),s=1}if(t&&domUtils.inDoc(n,f.document)){for(r=n.firstChild;r&&r!==t;){if(p=r.nextSibling,domUtils.isTagNode(r,"ol ul"))l.appendChild(r);else{for(A=f.document.createDocumentFragment(),B=0;r.firstChild;)domUtils.isBlockElm(r.firstChild)&&(B=1),A.appendChild(r.firstChild);B?l.appendChild(A):(C=f.document.createElement("p"),C.appendChild(A),l.appendChild(C)),domUtils.remove(r)}r=p}var D=domUtils.createElement(f.document,"div",{tmpDiv:1});domUtils.moveChild(t,D),l.appendChild(D),domUtils.remove(t),n.parentNode.insertBefore(l,n),h.setEndBefore(n),domUtils.isEmptyNode(n)&&domUtils.remove(n),u=1}}s||h.setStartBefore(f.document.getElementById(q.start)),q.end&&!u&&h.setEndAfter(f.document.getElementById(q.end)),h.enlarge(!0,function(a){return i[a.tagName]}),l=f.document.createDocumentFragment();for(var E,F=h.createBookmark(),G=domUtils.getNextDomNode(F.start,!1,j),H=h.cloneRange(),I=domUtils.isBlockElm;G&&G!==F.end&&domUtils.getPosition(G,F.end)&domUtils.POSITION_PRECEDING;)if(3==G.nodeType||dtd.li[G.tagName]){if(1==G.nodeType&&dtd.$list[G.tagName]){for(;G.firstChild;)l.appendChild(G.firstChild);E=domUtils.getNextDomNode(G,!1,j),domUtils.remove(G),G=E;continue}for(E=G,H.setStartBefore(G);G&&G!==F.end&&(!I(G)||domUtils.isBookmarkNode(G));)E=G,G=domUtils.getNextDomNode(G,!1,null,function(a){return!i[a.tagName]});G&&I(G)&&(p=domUtils.getNextDomNode(E,!1,j),p&&domUtils.isBookmarkNode(p)&&(G=domUtils.getNextDomNode(p,!1,j),E=p)),H.setEndAfter(E),G=domUtils.getNextDomNode(E,!1,j);var J=h.document.createElement("li");if(J.appendChild(H.extractContents()),domUtils.isEmptyNode(J)){for(var E=h.document.createElement("p");J.firstChild;)E.appendChild(J.firstChild);J.appendChild(E)}l.appendChild(J)}else G=domUtils.getNextDomNode(G,!0,j);h.moveToBookmark(F).collapse(!0),o=f.document.createElement(k),e(o,c),o.appendChild(l),h.insertNode(o),d(o,k,c);for(var x,y=0,K=domUtils.getElementsByTagName(o,"div");x=K[y++];)x.getAttribute("tmpDiv")&&domUtils.remove(x,!0);h.moveToBookmark(q).select()},queryCommandState:function(a){for(var b,c="insertorderedlist"==a.toLowerCase()?"ol":"ul",d=this.selection.getStartElementPath(),e=0;b=d[e++];){if("TABLE"==b.nodeName)return 0;if(c==b.nodeName.toLowerCase())return 1}return 0},queryCommandValue:function(a){for(var c,d,e="insertorderedlist"==a.toLowerCase()?"ol":"ul",f=this.selection.getStartElementPath(),g=0;d=f[g++];){if("TABLE"==d.nodeName){c=null;break}if(e==d.nodeName.toLowerCase()){c=d;break}}return c?b(c)||domUtils.getComputedStyle(c,"list-style-type"):null}}},function(){var a={textarea:function(a,b){var c=b.ownerDocument.createElement("textarea");return c.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;",browser.ie&&browser.version<8&&(c.style.width=b.offsetWidth+"px",c.style.height=b.offsetHeight+"px",b.onresize=function(){c.style.width=b.offsetWidth+"px",c.style.height=b.offsetHeight+"px"}),b.appendChild(c),{setContent:function(a){c.value=a},getContent:function(){return c.value},select:function(){var a;browser.ie?(a=c.createTextRange(),a.collapse(!0),a.select()):(c.setSelectionRange(0,0),c.focus())},dispose:function(){b.removeChild(c),b.onresize=null,c=null,b=null}}},codemirror:function(a,b){var c=window.CodeMirror(b,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),d=c.getWrapperElement();return d.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',c.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;",c.refresh(),{getCodeMirror:function(){return c},setContent:function(a){c.setValue(a)},getContent:function(){return c.getValue()},select:function(){c.focus()},dispose:function(){b.removeChild(d),d=null,c=null}}}};UE.plugins.source=function(){function b(b){return a["codemirror"==f.sourceEditor&&window.CodeMirror?"codemirror":"textarea"](e,b)}var c,d,e=this,f=this.options,g=!1;f.sourceEditor=browser.ie?"textarea":f.sourceEditor||"codemirror",e.setOpt({sourceEditorFirst:!1});var h,i,j;e.commands.source={execCommand:function(){if(g=!g){j=e.selection.getRange().createAddress(!1,!0),e.undoManger&&e.undoManger.save(!0),browser.gecko&&(e.body.contentEditable=!1),h=e.iframe.style.cssText,e.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;",e.fireEvent("beforegetcontent");var a=UE.htmlparser(e.body.innerHTML);e.filterOutputRule(a),a.traversal(function(a){if("element"==a.type)switch(a.tagName){case"td":case"th":case"caption":a.children&&1==a.children.length&&"br"==a.firstChild().tagName&&a.removeChild(a.firstChild());break;case"pre":a.innerText(a.innerText().replace(/&nbsp;/g," "))}}),e.fireEvent("aftergetcontent");var f=a.toHtml(!0);c=b(e.iframe.parentNode),c.setContent(f),d=e.setContent,e.setContent=function(a){var b=UE.htmlparser(a);e.filterInputRule(b),a=b.toHtml(),c.setContent(a)},setTimeout(function(){c.select(),e.addListener("fullscreenchanged",function(){try{c.getCodeMirror().refresh()}catch(a){}})}),i=e.getContent,e.getContent=function(){return c.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"}}else{e.iframe.style.cssText=h;var k=c.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";k=k.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(a,b){return b&&!dtd.$inlineWithA[b.toLowerCase()]?a.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):a.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),e.setContent=d,e.setContent(k),c.dispose(),c=null,e.getContent=i;var l=e.body.firstChild;if(l||(e.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",l=e.body.firstChild),e.undoManger&&e.undoManger.save(!0),browser.gecko){var m=document.createElement("input");m.style.cssText="position:absolute;left:0;top:-32768px",document.body.appendChild(m),e.body.contentEditable=!1,setTimeout(function(){domUtils.setViewportOffset(m,{left:-32768,top:0}),m.focus(),setTimeout(function(){e.body.contentEditable=!0,e.selection.getRange().moveToAddress(j).select(!0),domUtils.remove(m)})})}else try{e.selection.getRange().moveToAddress(j).select(!0)}catch(n){}}this.fireEvent("sourcemodechanged",g)},queryCommandState:function(){return 0|g},notNeedUndo:1};var k=e.queryCommandState;e.queryCommandState=function(a){return a=a.toLowerCase(),g?a in{source:1,fullscreen:1}?1:-1:k.apply(this,arguments)},"codemirror"==f.sourceEditor&&e.addListener("ready",function(){utils.loadFile(document,{src:f.codeMirrorJsUrl||f.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){f.sourceEditorFirst&&setTimeout(function(){e.execCommand("source")},0)}),utils.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:f.codeMirrorCssUrl||f.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}(),UE.plugins.enterkey=function(){var a,b=this,c=b.options.enterTag;b.addListener("keyup",function(c,d){var e=d.keyCode||d.which;if(13==e){var f,g=b.selection.getRange(),h=g.startContainer;if(browser.ie)b.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(a)){if(browser.gecko){var i=domUtils.findParentByTagName(h,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],!0);i||(b.document.execCommand("formatBlock",!1,"<p>"),f=1)}else if(1==h.nodeType){var j,k=b.document.createTextNode("");if(g.insertNode(k),j=domUtils.findParentByTagName(k,"div",!0)){for(var l=b.document.createElement("p");j.firstChild;)l.appendChild(j.firstChild);j.parentNode.insertBefore(l,j),domUtils.remove(j),g.setStartBefore(k).setCursor(),f=1}domUtils.remove(k)}b.undoManger&&f&&b.undoManger.save()}browser.opera&&g.select()}}}),b.addListener("keydown",function(d,e){var f=e.keyCode||e.which;if(13==f){if(b.fireEvent("beforeenterkeydown"))return void domUtils.preventDefault(e);b.fireEvent("saveScene",!0,!0),a="";var g=b.selection.getRange();if(!g.collapsed){var h=g.startContainer,i=g.endContainer,j=domUtils.findParentByTagName(h,"td",!0),k=domUtils.findParentByTagName(i,"td",!0);if(j&&k&&j!==k||!j&&k||j&&!k)return void(e.preventDefault?e.preventDefault():e.returnValue=!1)}if("p"==c)browser.ie||(h=domUtils.findParentByTagName(g.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],!0),h||browser.opera?(a=h.tagName,"p"==h.tagName.toLowerCase()&&browser.gecko&&domUtils.removeDirtyAttr(h)):(b.document.execCommand("formatBlock",!1,"<p>"),browser.gecko&&(g=b.selection.getRange(),h=domUtils.findParentByTagName(g.startContainer,"p",!0),h&&domUtils.removeDirtyAttr(h))));else if(e.preventDefault?e.preventDefault():e.returnValue=!1,g.collapsed){m=g.document.createElement("br"),g.insertNode(m);var l=m.parentNode;l.lastChild===m?(m.parentNode.insertBefore(m.cloneNode(!0),m),g.setStartBefore(m)):g.setStartAfter(m),g.setCursor()}else if(g.deleteContents(),h=g.startContainer,1==h.nodeType&&(h=h.childNodes[g.startOffset])){for(;1==h.nodeType;){if(dtd.$empty[h.tagName])return g.setStartBefore(h).setCursor(),b.undoManger&&b.undoManger.save(),!1;if(!h.firstChild){var m=g.document.createElement("br");return h.appendChild(m),g.setStart(h,0).setCursor(),b.undoManger&&b.undoManger.save(),!1}h=h.firstChild}h===g.startContainer.childNodes[g.startOffset]?(m=g.document.createElement("br"),g.insertNode(m).setCursor()):g.setStart(h,0).setCursor()}else m=g.document.createElement("br"),g.insertNode(m).setStartAfter(m).setCursor()}})},UE.plugins.keystrokes=function(){var a=this,b=!0;a.addListener("keydown",function(c,d){var e=d.keyCode||d.which,f=a.selection.getRange();if(!f.collapsed&&!(d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)&&(e>=65&&e<=90||e>=48&&e<=57||e>=96&&e<=111||{13:1,8:1,46:1}[e])){var g=f.startContainer;if(domUtils.isFillChar(g)&&f.setStartBefore(g),g=f.endContainer,domUtils.isFillChar(g)&&f.setEndAfter(g),f.txtToElmBoundary(),f.endContainer&&1==f.endContainer.nodeType&&(g=f.endContainer.childNodes[f.endOffset],g&&domUtils.isBr(g)&&f.setEndAfter(g)),0==f.startOffset&&(g=f.startContainer,domUtils.isBoundaryNode(g,"firstChild")&&(g=f.endContainer,f.endOffset==(3==g.nodeType?g.nodeValue.length:g.childNodes.length)&&domUtils.isBoundaryNode(g,"lastChild"))))return a.fireEvent("saveScene"),a.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",f.setStart(a.body.firstChild,0).setCursor(!1,!0),void a._selectionChange()}if(e==keymap.Backspace){if(f=a.selection.getRange(),b=f.collapsed,a.fireEvent("delkeydown",d))return;var h,i;if(f.collapsed&&f.inFillChar()&&(h=f.startContainer,domUtils.isFillChar(h)?(f.setStartBefore(h).shrinkBoundary(!0).collapse(!0),domUtils.remove(h)):(h.nodeValue=h.nodeValue.replace(new RegExp("^"+domUtils.fillChar),""),f.startOffset--,f.collapse(!0).select(!0))),h=f.getClosedNode())return a.fireEvent("saveScene"),f.setStartBefore(h),domUtils.remove(h),f.setCursor(),a.fireEvent("saveScene"),void domUtils.preventDefault(d);if(!browser.ie&&(h=domUtils.findParentByTagName(f.startContainer,"table",!0),i=domUtils.findParentByTagName(f.endContainer,"table",!0),h&&!i||!h&&i||h!==i))return void d.preventDefault()}if(e==keymap.Tab){var j={ol:1,ul:1,table:1};if(a.fireEvent("tabkeydown",d))return void domUtils.preventDefault(d);var k=a.selection.getRange();a.fireEvent("saveScene");for(var l=0,m="",n=a.options.tabSize||4,o=a.options.tabNode||"&nbsp;";l<n;l++)m+=o;var p=a.document.createElement("span");if(p.innerHTML=m+domUtils.fillChar,k.collapsed)k.insertNode(p.cloneNode(!0).firstChild).setCursor(!0);else{var q=function(a){return domUtils.isBlockElm(a)&&!j[a.tagName.toLowerCase()]};if(h=domUtils.findParent(k.startContainer,q,!0),i=domUtils.findParent(k.endContainer,q,!0),h&&i&&h===i)k.deleteContents(),k.insertNode(p.cloneNode(!0).firstChild).setCursor(!0);else{var r=k.createBookmark();k.enlarge(!0);for(var s=k.createBookmark(),t=domUtils.getNextDomNode(s.start,!1,q);t&&!(domUtils.getPosition(t,s.end)&domUtils.POSITION_FOLLOWING);)t.insertBefore(p.cloneNode(!0).firstChild,t.firstChild),t=domUtils.getNextDomNode(t,!1,q);k.moveToBookmark(s).moveToBookmark(r).select()}}domUtils.preventDefault(d)}if(browser.gecko&&46==e&&(k=a.selection.getRange(),k.collapsed&&(h=k.startContainer,domUtils.isEmptyBlock(h)))){for(var u=h.parentNode;1==domUtils.getChildCount(u)&&!domUtils.isBody(u);)h=u,u=u.parentNode;return void(h===u.lastChild&&d.preventDefault())}}),a.addListener("keyup",function(a,c){var d,e=c.keyCode||c.which,f=this;if(e==keymap.Backspace){if(f.fireEvent("delkeyup"))return;if(d=f.selection.getRange(),d.collapsed){var g,h=["h1","h2","h3","h4","h5","h6"];if((g=domUtils.findParentByTagName(d.startContainer,h,!0))&&domUtils.isEmptyBlock(g)){var i=g.previousSibling;if(i&&"TABLE"!=i.nodeName)return domUtils.remove(g),void d.setStartAtLast(i).setCursor(!1,!0);var j=g.nextSibling;if(j&&"TABLE"!=j.nodeName)return domUtils.remove(g),void d.setStartAtFirst(j).setCursor(!1,!0)}if(domUtils.isBody(d.startContainer)){var g=domUtils.createElement(f.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});d.insertNode(g).setStart(g,0).setCursor(!1,!0)}}if(!b&&(3==d.startContainer.nodeType||1==d.startContainer.nodeType&&domUtils.isEmptyBlock(d.startContainer)))if(browser.ie){var k=d.document.createElement("span");d.insertNode(k).setStartBefore(k).collapse(!0),d.select(),domUtils.remove(k)}else d.select()}})},UE.plugins.fiximgclick=function(){function a(){this.editor=null,this.resizer=null,this.cover=null,this.doc=document,this.prePos={x:0,y:0},this.startPos={x:0,y:0}}var b=!1;return function(){var c=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];a.prototype={init:function(a){var b=this;b.editor=a,b.startPos=this.prePos={x:0,y:0},b.dragId=-1;var c=[],d=b.cover=document.createElement("div"),e=b.resizer=document.createElement("div");for(d.id=b.editor.ui.id+"_imagescale_cover",d.style.cssText="position:absolute;display:none;z-index:"+b.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;",domUtils.on(d,"mousedown click",function(){b.hide()}),i=0;i<8;i++)c.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');e.id=b.editor.ui.id+"_imagescale",e.className="edui-editor-imagescale",e.innerHTML=c.join(""),e.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+b.editor.options.zIndex+";",b.editor.ui.getDom().appendChild(d),b.editor.ui.getDom().appendChild(e),b.initStyle(),b.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var a=this;a.startPos.x=a.startPos.y=0,a.isDraging=!1},_eventHandler:function(a){var c=this;switch(a.type){case"mousedown":var d,d=a.target||a.srcElement;d.className.indexOf("edui-editor-imagescale-hand")!=-1&&c.dragId==-1&&(c.dragId=d.className.slice(-1),c.startPos.x=c.prePos.x=a.clientX,c.startPos.y=c.prePos.y=a.clientY,domUtils.on(c.doc,"mousemove",c.proxy(c._eventHandler,c)));break;case"mousemove":c.dragId!=-1&&(c.updateContainerStyle(c.dragId,{x:a.clientX-c.prePos.x,y:a.clientY-c.prePos.y}),c.prePos.x=a.clientX,c.prePos.y=a.clientY,b=!0,c.updateTargetElement());break;case"mouseup":c.dragId!=-1&&(c.updateContainerStyle(c.dragId,{x:a.clientX-c.prePos.x,y:a.clientY-c.prePos.y}),c.updateTargetElement(),c.target.parentNode&&c.attachTo(c.target),c.dragId=-1),domUtils.un(c.doc,"mousemove",c.proxy(c._eventHandler,c)),b&&(b=!1,c.editor.fireEvent("contentchange"))}},updateTargetElement:function(){var a=this;domUtils.setStyles(a.target,{width:a.resizer.style.width,height:a.resizer.style.height}),a.target.width=parseInt(a.resizer.style.width),a.target.height=parseInt(a.resizer.style.height),a.attachTo(a.target)},updateContainerStyle:function(a,b){var d,e=this,f=e.resizer;0!=c[a][0]&&(d=parseInt(f.style.left)+b.x,f.style.left=e._validScaledProp("left",d)+"px"),0!=c[a][1]&&(d=parseInt(f.style.top)+b.y,f.style.top=e._validScaledProp("top",d)+"px"),0!=c[a][2]&&(d=f.clientWidth+c[a][2]*b.x,f.style.width=e._validScaledProp("width",d)+"px"),0!=c[a][3]&&(d=f.clientHeight+c[a][3]*b.y,f.style.height=e._validScaledProp("height",d)+"px")},_validScaledProp:function(a,b){var c=this.resizer,d=document;switch(b=isNaN(b)?0:b,a){case"left":return b<0?0:b+c.clientWidth>d.clientWidth?d.clientWidth-c.clientWidth:b;case"top":return b<0?0:b+c.clientHeight>d.clientHeight?d.clientHeight-c.clientHeight:b;case"width":return b<=0?1:b+c.offsetLeft>d.clientWidth?d.clientWidth-c.offsetLeft:b;case"height":return b<=0?1:b+c.offsetTop>d.clientHeight?d.clientHeight-c.offsetTop:b}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var a=this,b=domUtils.getXY(a.editor.ui.getDom()),c=domUtils.getXY(a.editor.iframe);domUtils.setStyles(a.cover,{width:a.editor.iframe.offsetWidth+"px",height:a.editor.iframe.offsetHeight+"px",top:c.y-b.y+"px",left:c.x-b.x+"px",position:"absolute",display:""})},show:function(a){var b=this;b.resizer.style.display="block",a&&b.attachTo(a),domUtils.on(this.resizer,"mousedown",b.proxy(b._eventHandler,b)),domUtils.on(b.doc,"mouseup",b.proxy(b._eventHandler,b)),b.showCover(),b.editor.fireEvent("afterscaleshow",b),b.editor.fireEvent("saveScene")},hide:function(){var a=this;a.hideCover(),a.resizer.style.display="none",domUtils.un(a.resizer,"mousedown",a.proxy(a._eventHandler,a)),domUtils.un(a.doc,"mouseup",a.proxy(a._eventHandler,a)),a.editor.fireEvent("afterscalehide",a)},proxy:function(a,b){return function(c){return a.apply(b||this,arguments)}},attachTo:function(a){var b=this,c=b.target=a,d=this.resizer,e=domUtils.getXY(c),f=domUtils.getXY(b.editor.iframe),g=domUtils.getXY(d.parentNode);domUtils.setStyles(d,{width:c.width+"px",height:c.height+"px",left:f.x+e.x-b.editor.document.body.scrollLeft-g.x-parseInt(d.style.borderLeftWidth)+"px",top:f.y+e.y-b.editor.document.body.scrollTop-g.y-parseInt(d.style.borderTopWidth)+"px"})}}}(),function(){var b,c=this;c.setOpt("imageScaleEnabled",!0),!browser.ie&&c.options.imageScaleEnabled&&c.addListener("click",function(d,e){var f=c.selection.getRange(),g=f.getClosedNode();if(g&&"IMG"==g.tagName&&"false"!=c.body.contentEditable){if(g.className.indexOf("edui-faked-music")!=-1||g.getAttribute("anchorname")||domUtils.hasClass(g,"loadingclass")||domUtils.hasClass(g,"loaderrorclass"))return;if(!b){b=new a,b.init(c),c.ui.getDom().appendChild(b.resizer);var h,i=function(a){b.hide(),b.target&&c.selection.getRange().selectNode(b.target).select()},j=function(a){var b=a.target||a.srcElement;!b||void 0!==b.className&&b.className.indexOf("edui-editor-imagescale")!=-1||i(a)};c.addListener("afterscaleshow",function(a){c.addListener("beforekeydown",i),c.addListener("beforemousedown",j),domUtils.on(document,"keydown",i),domUtils.on(document,"mousedown",j),c.selection.getNative().removeAllRanges()}),c.addListener("afterscalehide",function(a){c.removeListener("beforekeydown",i),c.removeListener("beforemousedown",j),domUtils.un(document,"keydown",i),domUtils.un(document,"mousedown",j);var d=b.target;d.parentNode&&c.selection.getRange().selectNode(d).select()}),domUtils.on(b.resizer,"mousedown",function(a){c.selection.getNative().removeAllRanges();var d=a.target||a.srcElement;d&&d.className.indexOf("edui-editor-imagescale-hand")==-1&&(h=setTimeout(function(){b.hide(),b.target&&c.selection.getRange().selectNode(d).select()},200))}),domUtils.on(b.resizer,"mouseup",function(a){var b=a.target||a.srcElement;b&&b.className.indexOf("edui-editor-imagescale-hand")==-1&&clearTimeout(h)})}b.show(g)}else b&&"none"!=b.resizer.style.display&&b.hide()}),browser.webkit&&c.addListener("click",function(a,b){if("IMG"==b.target.tagName&&"false"!=c.body.contentEditable){var d=new dom.Range(c.document);d.selectNode(b.target).select()}})}}(),UE.plugin.register("autolink",function(){var a=0;return browser.ie?{}:{bindEvents:{reset:function(){a=0},keydown:function(a,b){var c=this,d=b.keyCode||b.which;if(32==d||13==d){for(var e,f,g=c.selection.getNative(),h=g.getRangeAt(0).cloneRange(),i=h.startContainer;1==i.nodeType&&h.startOffset>0&&(i=h.startContainer.childNodes[h.startOffset-1]);)h.setStart(i,1==i.nodeType?i.childNodes.length:i.nodeValue.length),h.collapse(!0),i=h.startContainer;do{if(0==h.startOffset){for(i=h.startContainer.previousSibling;i&&1==i.nodeType;)i=i.lastChild;if(!i||domUtils.isFillChar(i))break;e=i.nodeValue.length}else i=h.startContainer,e=h.startOffset;h.setStart(i,e-1),f=h.toString().charCodeAt(0)}while(160!=f&&32!=f);if(h.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;h.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(h.toString());)try{h.setStart(h.startContainer,h.startOffset+1)}catch(j){for(var i=h.startContainer;!(next=i.nextSibling);){if(domUtils.isBody(i))return;i=i.parentNode}h.setStart(next,0)}if(domUtils.findParentByTagName(h.startContainer,"a",!0))return;var k,l=c.document.createElement("a"),m=c.document.createTextNode(" ");c.undoManger&&c.undoManger.save(),l.appendChild(h.extractContents()),l.href=l.innerHTML=l.innerHTML.replace(/<[^>]+>/g,""),k=l.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),""),k=/^(?:https?:\/\/)/gi.test(k)?k:"http://"+k,l.setAttribute("_src",utils.html(k)),l.href=utils.html(k),h.insertNode(l),l.parentNode.insertBefore(m,l.nextSibling),h.setStart(m,0),h.collapse(!0),g.removeAllRanges(),g.addRange(h),c.undoManger&&c.undoManger.save()}}}}}},function(){function a(a){if(3==a.nodeType)return null;if("A"==a.nodeName)return a;for(var b=a.lastChild;b;){if("A"==b.nodeName)return b;if(3==b.nodeType){if(domUtils.isWhitespace(b)){b=b.previousSibling;continue}return null}b=b.lastChild}}var b={37:1,38:1,39:1,40:1,13:1,32:1};browser.ie&&this.addListener("keyup",function(c,d){var e=this,f=d.keyCode;if(b[f]){var g=e.selection.getRange(),h=g.startContainer;if(13==f){for(;h&&!domUtils.isBody(h)&&!domUtils.isBlockElm(h);)h=h.parentNode;if(h&&!domUtils.isBody(h)&&"P"==h.nodeName){var i=h.previousSibling;if(i&&1==i.nodeType){var i=a(i);i&&!i.getAttribute("_href")&&domUtils.remove(i,!0)}}}else if(32==f)3==h.nodeType&&/^\s$/.test(h.nodeValue)&&(h=h.previousSibling,h&&"A"==h.nodeName&&!h.getAttribute("_href")&&domUtils.remove(h,!0));else if(h=domUtils.findParentByTagName(h,"a",!0),h&&!h.getAttribute("_href")){var j=g.createBookmark();domUtils.remove(h,!0),g.moveToBookmark(j).select(!0)}}})}),UE.plugins.autoheight=function(){function a(){var a=this;clearTimeout(e),f||(!a.queryCommandState||a.queryCommandState&&1!=a.queryCommandState("source"))&&(e=setTimeout(function(){for(var b=a.body.lastChild;b&&1!=b.nodeType;)b=b.previousSibling;b&&1==b.nodeType&&(b.style.clear="both",d=Math.max(domUtils.getXY(b).y+b.offsetHeight+25,Math.max(h.minFrameHeight,h.initialFrameHeight)),d!=g&&(d!==parseInt(a.iframe.parentNode.style.height)&&(a.iframe.parentNode.style.height=d+"px"),a.body.style.height=d+"px",g=d),domUtils.removeStyle(b,"clear"))},50))}var b=this;if(b.autoHeightEnabled=b.options.autoHeightEnabled!==!1,b.autoHeightEnabled){var c,d,e,f,g=0,h=b.options;b.addListener("fullscreenchanged",function(a,b){f=b}),b.addListener("destroy",function(){b.removeListener("contentchange afterinserthtml keyup mouseup",a)}),b.enableAutoHeight=function(){var b=this;if(b.autoHeightEnabled){var d=b.document;b.autoHeightEnabled=!0,c=d.body.style.overflowY,d.body.style.overflowY="hidden",b.addListener("contentchange afterinserthtml keyup mouseup",a),setTimeout(function(){a.call(b)},browser.gecko?100:0),b.fireEvent("autoheightchanged",b.autoHeightEnabled)}},b.disableAutoHeight=function(){b.body.style.overflowY=c||"",b.removeListener("contentchange",a),b.removeListener("keyup",a),b.removeListener("mouseup",a),b.autoHeightEnabled=!1,b.fireEvent("autoheightchanged",b.autoHeightEnabled)},b.on("setHeight",function(){b.disableAutoHeight()}),b.addListener("ready",function(){b.enableAutoHeight();var c;domUtils.on(browser.ie?b.body:b.document,browser.webkit?"dragover":"drop",function(){clearTimeout(c),c=setTimeout(function(){a.call(b)},100)});var d;window.onscroll=function(){
null===d?d=this.scrollY:0==this.scrollY&&0!=d&&(b.window.scrollTo(0,0),d=null)}})}},UE.plugins.autofloat=function(){function a(){return UE.ui?1:(alert(g.autofloatMsg),0)}function b(){var a=document.body.style;a.backgroundImage='url("about:blank")',a.backgroundAttachment="fixed"}function c(){var a=domUtils.getXY(k),b=domUtils.getComputedStyle(k,"position"),c=domUtils.getComputedStyle(k,"left");k.style.width=k.offsetWidth+"px",k.style.zIndex=1*f.options.zIndex+1,k.parentNode.insertBefore(q,k),o||p&&browser.ie?("absolute"!=k.style.position&&(k.style.position="absolute"),k.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-l+i+"px"):(browser.ie7Compat&&r&&(r=!1,k.style.left=domUtils.getXY(k).x-document.documentElement.getBoundingClientRect().left+2+"px"),"fixed"!=k.style.position&&(k.style.position="fixed",k.style.top=i+"px",("absolute"==b||"relative"==b)&&parseFloat(c)&&(k.style.left=a.x+"px")))}function d(){r=!0,q.parentNode&&q.parentNode.removeChild(q),k.style.cssText=j}function e(){var a=m(f.container),b=f.options.toolbarTopOffset||0;a.top<0&&a.bottom-k.offsetHeight>b?c():d()}var f=this,g=f.getLang();f.setOpt({topOffset:0});var h=f.options.autoFloatEnabled!==!1,i=f.options.topOffset;if(h){var j,k,l,m,n=UE.ui.uiUtils,o=browser.ie&&browser.version<=6,p=browser.quirks,q=document.createElement("div"),r=!0,s=utils.defer(function(){e()},browser.ie?200:100,!0);f.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],e),f.removeListener("keydown",s)}),f.addListener("ready",function(){if(a(f)){if(!f.ui)return;m=n.getClientRect,k=f.ui.getDom("toolbarbox"),l=m(k).top,j=k.style.cssText,q.style.height=k.offsetHeight+"px",o&&b(),domUtils.on(window,["scroll","resize"],e),f.addListener("keydown",s),f.addListener("beforefullscreenchange",function(a,b){b&&d()}),f.addListener("fullscreenchanged",function(a,b){b||e()}),f.addListener("sourcemodechanged",function(a,b){setTimeout(function(){e()},0)}),f.addListener("clearDoc",function(){setTimeout(function(){e()},0)})}})}},UE.plugins.video=function(){function a(a,b,d,e,f,g,h){a=utils.unhtmlForUrl(a),f=utils.unhtml(f),g=utils.unhtml(g),b=parseInt(b,10)||0,d=parseInt(d,10)||0;var i;switch(h){case"image":i="<img "+(e?'id="'+e+'"':"")+' width="'+b+'" height="'+d+'" _url="'+a+'" class="'+g.replace(/\bvideo-js\b/,"")+'" src="'+c.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+c.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(f?"float:"+f+";":"")+'" />';break;case"embed":i='<embed type="application/x-shockwave-flash" class="'+g+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+utils.html(a)+'" width="'+b+'" height="'+d+'"'+(f?' style="float:'+f+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var j=a.substr(a.lastIndexOf(".")+1);"ogv"==j&&(j="ogg"),i="<video"+(e?' id="'+e+'"':"")+' class="'+g+' video-js" '+(f?' style="float:'+f+'"':"")+' controls preload="none" width="'+b+'" height="'+d+'" src="'+a+'" data-setup="{}"><source src="'+a+'" type="video/'+j+'" /></video>'}return i}function b(b,c){utils.each(b.getNodesByTagName(c?"img":"embed video"),function(b){var d=b.getAttr("class");if(d&&d.indexOf("edui-faked-video")!=-1){var e=a(c?b.getAttr("_url"):b.getAttr("src"),b.getAttr("width"),b.getAttr("height"),null,b.getStyle("float")||"",d,c?"embed":"image");b.parentNode.replaceChild(UE.uNode.createElement(e),b)}if(d&&d.indexOf("edui-upload-video")!=-1){var e=a(c?b.getAttr("_url"):b.getAttr("src"),b.getAttr("width"),b.getAttr("height"),null,b.getStyle("float")||"",d,c?"video":"image");b.parentNode.replaceChild(UE.uNode.createElement(e),b)}})}var c=this;c.addOutputRule(function(a){b(a,!0)}),c.addInputRule(function(a){b(a)}),c.commands.insertvideo={execCommand:function(b,d,e){d=utils.isArray(d)?d:[d];for(var f,g,h=[],i="tmpVedio",j=0,k=d.length;j<k;j++)g=d[j],f="upload"==e?"edui-upload-video video-js vjs-default-skin":"edui-faked-video",h.push(a(g.url,g.width||420,g.height||280,i+j,null,f,"image"));c.execCommand("inserthtml",h.join(""),!0);for(var l=this.selection.getRange(),j=0,k=d.length;j<k;j++){var m=this.document.getElementById("tmpVedio"+j);domUtils.removeAttributes(m,"id"),l.selectNode(m).select(),c.execCommand("imagefloat",d[j].align)}},queryCommandState:function(){var a=c.selection.getRange().getClosedNode(),b=a&&("edui-faked-video"==a.className||a.className.indexOf("edui-upload-video")!=-1);return b?1:0}}},function(){function a(a){}var b=UE.UETable=function(a){this.table=a,this.indexTable=[],this.selectedTds=[],this.cellsRange={},this.update(a)};b.removeSelectedClass=function(a){utils.each(a,function(a){domUtils.removeClasses(a,"selectTdClass")})},b.addSelectedClass=function(a){utils.each(a,function(a){domUtils.addClass(a,"selectTdClass")})},b.isEmptyBlock=function(a){var b=new RegExp(domUtils.fillChar,"g");if(a[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(b,"").length>0)return 0;for(var c in dtd.$isNotEmpty)if(dtd.$isNotEmpty.hasOwnProperty(c)&&a.getElementsByTagName(c).length)return 0;return 1},b.getWidth=function(a){return a?parseInt(domUtils.getComputedStyle(a,"width"),10):0},b.getTableCellAlignState=function(a){!utils.isArray(a)&&(a=[a]);var b={},c=["align","valign"],d=null,e=!0;return utils.each(a,function(a){return utils.each(c,function(c){if(d=a.getAttribute(c),!b[c]&&d)b[c]=d;else if(!b[c]||d!==b[c])return e=!1,!1}),e}),e?b:null},b.getTableItemsByRange=function(a){var b=a.selection.getStart();b&&b.id&&0===b.id.indexOf("_baidu_bookmark_start_")&&b.nextSibling&&(b=b.nextSibling);var c=b&&domUtils.findParentByTagName(b,["td","th"],!0),d=c&&c.parentNode,e=b&&domUtils.findParentByTagName(b,"caption",!0),f=e?e.parentNode:d&&d.parentNode.parentNode;return{cell:c,tr:d,table:f,caption:e}},b.getUETableBySelected=function(a){var c=b.getTableItemsByRange(a).table;return c&&c.ueTable&&c.ueTable.selectedTds.length?c.ueTable:null},b.getDefaultValue=function(a,b){var c,d,e,f,g={thin:"0px",medium:"1px",thick:"2px"};if(b)return h=b.getElementsByTagName("td")[0],f=domUtils.getComputedStyle(b,"border-left-width"),c=parseInt(g[f]||f,10),f=domUtils.getComputedStyle(h,"padding-left"),d=parseInt(g[f]||f,10),f=domUtils.getComputedStyle(h,"border-left-width"),e=parseInt(g[f]||f,10),{tableBorder:c,tdPadding:d,tdBorder:e};b=a.document.createElement("table"),b.insertRow(0).insertCell(0).innerHTML="xxx",a.body.appendChild(b);var h=b.getElementsByTagName("td")[0];return f=domUtils.getComputedStyle(b,"border-left-width"),c=parseInt(g[f]||f,10),f=domUtils.getComputedStyle(h,"padding-left"),d=parseInt(g[f]||f,10),f=domUtils.getComputedStyle(h,"border-left-width"),e=parseInt(g[f]||f,10),domUtils.remove(b),{tableBorder:c,tdPadding:d,tdBorder:e}},b.getUETable=function(a){var c=a.tagName.toLowerCase();return a="td"==c||"th"==c||"caption"==c?domUtils.findParentByTagName(a,"table",!0):a,a.ueTable||(a.ueTable=new b(a)),a.ueTable},b.cloneCell=function(a,b,c){if(!a||utils.isString(a))return this.table.ownerDocument.createElement(a||"td");var d=domUtils.hasClass(a,"selectTdClass");d&&domUtils.removeClasses(a,"selectTdClass");var e=a.cloneNode(!0);return b&&(e.rowSpan=e.colSpan=1),!c&&domUtils.removeAttributes(e,"width height"),!c&&domUtils.removeAttributes(e,"style"),e.style.borderLeftStyle="",e.style.borderTopStyle="",e.style.borderLeftColor=a.style.borderRightColor,e.style.borderLeftWidth=a.style.borderRightWidth,e.style.borderTopColor=a.style.borderBottomColor,e.style.borderTopWidth=a.style.borderBottomWidth,d&&domUtils.addClass(a,"selectTdClass"),e},b.prototype={getMaxRows:function(){for(var a,b=this.table.rows,c=1,d=0;a=b[d];d++){for(var e,f=1,g=0;e=a.cells[g++];)f=Math.max(e.rowSpan||1,f);c=Math.max(f+d,c)}return c},getMaxCols:function(){for(var a,b=this.table.rows,c=0,d={},e=0;a=b[e];e++){for(var f,g=0,h=0;f=a.cells[h++];)if(g+=f.colSpan||1,f.rowSpan&&f.rowSpan>1)for(var i=1;i<f.rowSpan;i++)d["row_"+(e+i)]?d["row_"+(e+i)]++:d["row_"+(e+i)]=f.colSpan||1;g+=d["row_"+e]||0,c=Math.max(g,c)}return c},getCellColIndex:function(a){},getHSideCell:function(b,c){try{var d,e,f=this.getCellInfo(b),g=this.selectedTds.length,h=this.cellsRange;return!c&&(g?!h.beginColIndex:!f.colIndex)||c&&(g?h.endColIndex==this.colsNum-1:f.colIndex==this.colsNum-1)?null:(d=g?h.beginRowIndex:f.rowIndex,e=c?g?h.endColIndex+1:f.colIndex+1:g?h.beginColIndex-1:f.colIndex<1?0:f.colIndex-1,this.getCell(this.indexTable[d][e].rowIndex,this.indexTable[d][e].cellIndex))}catch(i){a(i)}},getTabNextCell:function(a,b){var c,d=this.getCellInfo(a),e=b||d.rowIndex,f=d.colIndex+1+(d.colSpan-1);try{c=this.getCell(this.indexTable[e][f].rowIndex,this.indexTable[e][f].cellIndex)}catch(g){try{e=1*e+1,f=0,c=this.getCell(this.indexTable[e][f].rowIndex,this.indexTable[e][f].cellIndex)}catch(g){}}return c},getVSideCell:function(b,c,d){try{var e,f,g=this.getCellInfo(b),h=this.selectedTds.length&&!d,i=this.cellsRange;return!c&&0==g.rowIndex||c&&(h?i.endRowIndex==this.rowsNum-1:g.rowIndex+g.rowSpan>this.rowsNum-1)?null:(e=c?h?i.endRowIndex+1:g.rowIndex+g.rowSpan:h?i.beginRowIndex-1:g.rowIndex-1,f=h?i.beginColIndex:g.colIndex,this.getCell(this.indexTable[e][f].rowIndex,this.indexTable[e][f].cellIndex))}catch(j){a(j)}},getSameEndPosCells:function(b,c){try{for(var d="x"===c.toLowerCase(),e=domUtils.getXY(b)[d?"x":"y"]+b["offset"+(d?"Width":"Height")],f=this.table.rows,g=null,h=[],i=0;i<this.rowsNum;i++){g=f[i].cells;for(var j,k=0;j=g[k++];){var l=domUtils.getXY(j)[d?"x":"y"]+j["offset"+(d?"Width":"Height")];if(l>e&&d)break;if((b==j||e==l)&&(1==j[d?"colSpan":"rowSpan"]&&h.push(j),d))break}}return h}catch(m){a(m)}},setCellContent:function(a,b){a.innerHTML=b||(browser.ie?domUtils.fillChar:"<br />")},cloneCell:b.cloneCell,getSameStartPosXCells:function(b){try{for(var c,d=domUtils.getXY(b).x+b.offsetWidth,e=this.table.rows,f=[],g=0;g<this.rowsNum;g++){c=e[g].cells;for(var h,i=0;h=c[i++];){var j=domUtils.getXY(h).x;if(j>d)break;if(j==d&&1==h.colSpan){f.push(h);break}}}return f}catch(k){a(k)}},update:function(a){this.table=a||this.table,this.selectedTds=[],this.cellsRange={},this.indexTable=[];for(var b=this.table.rows,c=this.getMaxRows(),d=c-b.length,e=this.getMaxCols();d--;)this.table.insertRow(b.length);this.rowsNum=c,this.colsNum=e;for(var f=0,g=b.length;f<g;f++)this.indexTable[f]=new Array(e);for(var h,i=0;h=b[i];i++)for(var j,k=0,l=h.cells;j=l[k];k++){j.rowSpan>c&&(j.rowSpan=c);for(var m=k,n=j.rowSpan||1,o=j.colSpan||1;this.indexTable[i][m];)m++;for(var p=0;p<n;p++)for(var q=0;q<o;q++)this.indexTable[i+p][m+q]={rowIndex:i,cellIndex:k,colIndex:m,rowSpan:n,colSpan:o}}for(p=0;p<c;p++)for(q=0;q<e;q++)void 0===this.indexTable[p][q]&&(h=b[p],j=h.cells[h.cells.length-1],j=j?j.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(j),1!==j.colSpan&&(j.colSpan=1),1!==j.rowSpan&&(j.rowSpan=1),h.appendChild(j),this.indexTable[p][q]={rowIndex:p,cellIndex:j.cellIndex,colIndex:q,rowSpan:1,colSpan:1});var r=domUtils.getElementsByTagName(this.table,"td"),s=[];if(utils.each(r,function(a){domUtils.hasClass(a,"selectTdClass")&&s.push(a)}),s.length){var t=s[0],u=s[s.length-1],v=this.getCellInfo(t),w=this.getCellInfo(u);this.selectedTds=s,this.cellsRange={beginRowIndex:v.rowIndex,beginColIndex:v.colIndex,endRowIndex:w.rowIndex+w.rowSpan-1,endColIndex:w.colIndex+w.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],"firstRow")){domUtils.addClass(this.table.rows[0],"firstRow");for(var f=1;f<this.table.rows.length;f++)domUtils.removeClasses(this.table.rows[f],"firstRow")}},getCellInfo:function(a){if(a)for(var b=a.cellIndex,c=a.parentNode.rowIndex,d=this.indexTable[c],e=this.colsNum,f=b;f<e;f++){var g=d[f];if(g.rowIndex===c&&g.cellIndex===b)return g}},getCell:function(a,b){return a<this.rowsNum&&this.table.rows[a].cells[b]||null},deleteCell:function(a,b){b="number"==typeof b?b:a.parentNode.rowIndex;var c=this.table.rows[b];c.deleteCell(a.cellIndex)},getCellsRange:function(a,b){function c(a,b,e,f){var g,h,i,j=a,k=b,l=e,m=f;if(a>0)for(h=b;h<f;h++)g=d.indexTable[a][h],i=g.rowIndex,i<a&&(j=Math.min(i,j));if(f<d.colsNum)for(i=a;i<e;i++)g=d.indexTable[i][f],h=g.colIndex+g.colSpan-1,h>f&&(m=Math.max(h,m));if(e<d.rowsNum)for(h=b;h<f;h++)g=d.indexTable[e][h],i=g.rowIndex+g.rowSpan-1,i>e&&(l=Math.max(i,l));if(b>0)for(i=a;i<e;i++)g=d.indexTable[i][b],h=g.colIndex,h<b&&(k=Math.min(g.colIndex,k));return j!=a||k!=b||l!=e||m!=f?c(j,k,l,m):{beginRowIndex:a,beginColIndex:b,endRowIndex:e,endColIndex:f}}try{var d=this,e=d.getCellInfo(a);if(a===b)return{beginRowIndex:e.rowIndex,beginColIndex:e.colIndex,endRowIndex:e.rowIndex+e.rowSpan-1,endColIndex:e.colIndex+e.colSpan-1};var f=d.getCellInfo(b),g=Math.min(e.rowIndex,f.rowIndex),h=Math.min(e.colIndex,f.colIndex),i=Math.max(e.rowIndex+e.rowSpan-1,f.rowIndex+f.rowSpan-1),j=Math.max(e.colIndex+e.colSpan-1,f.colIndex+f.colSpan-1);return c(g,h,i,j)}catch(k){}},getCells:function(a){this.clearSelected();for(var b,c,d,e=a.beginRowIndex,f=a.beginColIndex,g=a.endRowIndex,h=a.endColIndex,i={},j=[],k=e;k<=g;k++)for(var l=f;l<=h;l++){b=this.indexTable[k][l],c=b.rowIndex,d=b.colIndex;var m=c+"|"+d;if(!i[m]){if(i[m]=1,c<k||d<l||c+b.rowSpan-1>g||d+b.colSpan-1>h)return null;j.push(this.getCell(c,b.cellIndex))}}return j},clearSelected:function(){b.removeSelectedClass(this.selectedTds),this.selectedTds=[],this.cellsRange={}},setSelected:function(a){var c=this.getCells(a);b.addSelectedClass(c),this.selectedTds=c,this.cellsRange=a},isFullRow:function(){var a=this.cellsRange;return a.endColIndex-a.beginColIndex+1==this.colsNum},isFullCol:function(){var a=this.cellsRange,b=this.table,c=b.getElementsByTagName("th"),d=a.endRowIndex-a.beginRowIndex+1;return c.length?d==this.rowsNum||d==this.rowsNum-1:d==this.rowsNum},getNextCell:function(b,c,d){try{var e,f,g=this.getCellInfo(b),h=this.selectedTds.length&&!d,i=this.cellsRange;return!c&&0==g.rowIndex||c&&(h?i.endRowIndex==this.rowsNum-1:g.rowIndex+g.rowSpan>this.rowsNum-1)?null:(e=c?h?i.endRowIndex+1:g.rowIndex+g.rowSpan:h?i.beginRowIndex-1:g.rowIndex-1,f=h?i.beginColIndex:g.colIndex,this.getCell(this.indexTable[e][f].rowIndex,this.indexTable[e][f].cellIndex))}catch(j){a(j)}},getPreviewCell:function(b,c){try{var d,e,f=this.getCellInfo(b),g=this.selectedTds.length,h=this.cellsRange;return!c&&(g?!h.beginColIndex:!f.colIndex)||c&&(g?h.endColIndex==this.colsNum-1:f.rowIndex>this.colsNum-1)?null:(d=c?g?h.beginRowIndex:f.rowIndex<1?0:f.rowIndex-1:g?h.beginRowIndex:f.rowIndex,e=c?g?h.endColIndex+1:f.colIndex:g?h.beginColIndex-1:f.colIndex<1?0:f.colIndex-1,this.getCell(this.indexTable[d][e].rowIndex,this.indexTable[d][e].cellIndex))}catch(i){a(i)}},moveContent:function(a,c){if(!b.isEmptyBlock(c)){if(b.isEmptyBlock(a))return void(a.innerHTML=c.innerHTML);var d=a.lastChild;for(3!=d.nodeType&&dtd.$block[d.tagName]||a.appendChild(a.ownerDocument.createElement("br"));d=c.firstChild;)a.appendChild(d)}},mergeRight:function(a){var b=this.getCellInfo(a),c=b.colIndex+b.colSpan,d=this.indexTable[b.rowIndex][c],e=this.getCell(d.rowIndex,d.cellIndex);a.colSpan=b.colSpan+d.colSpan,a.removeAttribute("width"),this.moveContent(a,e),this.deleteCell(e,d.rowIndex),this.update()},mergeDown:function(a){var b=this.getCellInfo(a),c=b.rowIndex+b.rowSpan,d=this.indexTable[c][b.colIndex],e=this.getCell(d.rowIndex,d.cellIndex);a.rowSpan=b.rowSpan+d.rowSpan,a.removeAttribute("height"),this.moveContent(a,e),this.deleteCell(e,d.rowIndex),this.update()},mergeRange:function(){var a=this.cellsRange,b=this.getCell(a.beginRowIndex,this.indexTable[a.beginRowIndex][a.beginColIndex].cellIndex);if("TH"==b.tagName&&a.endRowIndex!==a.beginRowIndex){var c=this.indexTable,d=this.getCellInfo(b);b=this.getCell(1,c[1][d.colIndex].cellIndex),a=this.getCellsRange(b,this.getCell(c[this.rowsNum-1][d.colIndex].rowIndex,c[this.rowsNum-1][d.colIndex].cellIndex))}for(var e,f=this.getCells(a),g=0;e=f[g++];)e!==b&&(this.moveContent(b,e),this.deleteCell(e));if(b.rowSpan=a.endRowIndex-a.beginRowIndex+1,b.rowSpan>1&&b.removeAttribute("height"),b.colSpan=a.endColIndex-a.beginColIndex+1,b.colSpan>1&&b.removeAttribute("width"),b.rowSpan==this.rowsNum&&1!=b.colSpan&&(b.colSpan=1),b.colSpan==this.colsNum&&1!=b.rowSpan){var h=b.parentNode.rowIndex;if(this.table.deleteRow)for(var g=h+1,i=h+1,j=b.rowSpan;g<j;g++)this.table.deleteRow(i);else for(var g=0,j=b.rowSpan-1;g<j;g++){var k=this.table.rows[h+1];k.parentNode.removeChild(k)}b.rowSpan=1}this.update()},insertRow:function(a,b){function c(a,b,c){if(0==a){var d=c.nextSibling||c.previousSibling,e=d.cells[a];"TH"==e.tagName&&(e=b.ownerDocument.createElement("th"),e.appendChild(b.firstChild),c.insertBefore(e,b),domUtils.remove(b))}else if("TH"==b.tagName){var f=b.ownerDocument.createElement("td");f.appendChild(b.firstChild),c.insertBefore(f,b),domUtils.remove(b)}}var d,e=this.colsNum,f=this.table,g=f.insertRow(a),h="string"==typeof b&&"TH"==b.toUpperCase();if(0==a||a==this.rowsNum)for(var i=0;i<e;i++)d=this.cloneCell(b,!0),this.setCellContent(d),d.getAttribute("vAlign")&&d.setAttribute("vAlign",d.getAttribute("vAlign")),g.appendChild(d),h||c(i,d,g);else{var j=this.indexTable[a];for(i=0;i<e;i++){var k=j[i];k.rowIndex<a?(d=this.getCell(k.rowIndex,k.cellIndex),d.rowSpan=k.rowSpan+1):(d=this.cloneCell(b,!0),this.setCellContent(d),g.appendChild(d)),h||c(i,d,g)}}return this.update(),g},deleteRow:function(a){for(var b=this.table.rows[a],c=this.indexTable[a],d=this.colsNum,e=0,f=0;f<d;){var g=c[f],h=this.getCell(g.rowIndex,g.cellIndex);if(h.rowSpan>1&&g.rowIndex==a){var i=h.cloneNode(!0);i.rowSpan=h.rowSpan-1,i.innerHTML="",h.rowSpan=1;var j,k=a+1,l=this.table.rows[k],m=this.getPreviewMergedCellsNum(k,f)-e;m<f?(j=f-m-1,domUtils.insertAfter(l.cells[j],i)):l.cells.length&&l.insertBefore(i,l.cells[0]),e+=1}f+=h.colSpan||1}var n=[],o={};for(f=0;f<d;f++){var p=c[f].rowIndex,q=c[f].cellIndex,r=p+"_"+q;o[r]||(o[r]=1,h=this.getCell(p,q),n.push(h))}var s=[];utils.each(n,function(a){1==a.rowSpan?a.parentNode.removeChild(a):s.push(a)}),utils.each(s,function(a){a.rowSpan--}),b.parentNode.removeChild(b),this.update()},insertCol:function(a,b,c){function d(a,b,c){if(0==a){var d=b.nextSibling||b.previousSibling;"TH"==d.tagName&&(d=b.ownerDocument.createElement("th"),d.appendChild(b.firstChild),c.insertBefore(d,b),domUtils.remove(b))}else if("TH"==b.tagName){var e=b.ownerDocument.createElement("td");e.appendChild(b.firstChild),c.insertBefore(e,b),domUtils.remove(b)}}var e,f,g,h=this.rowsNum,i=0,j=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),k="string"==typeof b&&"TH"==b.toUpperCase();if(0==a||a==this.colsNum)for(;i<h;i++)e=this.table.rows[i],g=e.cells[0==a?a:e.cells.length],f=this.cloneCell(b,!0),this.setCellContent(f),f.setAttribute("vAlign",f.getAttribute("vAlign")),g&&f.setAttribute("width",g.getAttribute("width")),a?domUtils.insertAfter(e.cells[e.cells.length-1],f):e.insertBefore(f,e.cells[0]),k||d(i,f,e);else for(;i<h;i++){var l=this.indexTable[i][a];l.colIndex<a?(f=this.getCell(l.rowIndex,l.cellIndex),f.colSpan=l.colSpan+1):(e=this.table.rows[i],g=e.cells[l.cellIndex],f=this.cloneCell(b,!0),this.setCellContent(f),f.setAttribute("vAlign",f.getAttribute("vAlign")),g&&f.setAttribute("width",g.getAttribute("width")),g?e.insertBefore(f,g):e.appendChild(f)),k||d(i,f,e)}this.update(),this.updateWidth(j,c||{tdPadding:10,tdBorder:1})},updateWidth:function(a,c){var d=this.table,e=b.getWidth(d)-2*c.tdPadding-c.tdBorder+a;if(e<d.ownerDocument.body.offsetWidth)return void d.setAttribute("width",e);var f=domUtils.getElementsByTagName(this.table,"td th");utils.each(f,function(b){b.setAttribute("width",a)})},deleteCol:function(a){for(var b=this.indexTable,c=this.table.rows,d=this.table.getAttribute("width"),e=0,f=this.rowsNum,g={},h=0;h<f;){var i=b[h],j=i[a],k=j.rowIndex+"_"+j.colIndex;if(!g[k]){g[k]=1;var l=this.getCell(j.rowIndex,j.cellIndex);e||(e=l&&parseInt(l.offsetWidth/l.colSpan,10).toFixed(0)),l.colSpan>1?l.colSpan--:c[h].deleteCell(j.cellIndex),h+=j.rowSpan||1}}this.table.setAttribute("width",d-e),this.update()},splitToCells:function(a){var b=this,c=this.splitToRows(a);utils.each(c,function(a){b.splitToCols(a)})},splitToRows:function(a){var b=this.getCellInfo(a),c=b.rowIndex,d=b.colIndex,e=[];a.rowSpan=1,e.push(a);for(var f=c,g=c+b.rowSpan;f<g;f++)if(f!=c){var h=this.table.rows[f],i=h.insertCell(d-this.getPreviewMergedCellsNum(f,d));i.colSpan=b.colSpan,this.setCellContent(i),i.setAttribute("vAlign",a.getAttribute("vAlign")),i.setAttribute("align",a.getAttribute("align")),a.style.cssText&&(i.style.cssText=a.style.cssText),e.push(i)}return this.update(),e},getPreviewMergedCellsNum:function(a,b){for(var c=this.indexTable[a],d=0,e=0;e<b;){var f=c[e].colSpan,g=c[e].rowIndex;d+=f-(g==a?1:0),e+=f}return d},splitToCols:function(a){var b=(a.offsetWidth/a.colSpan-22).toFixed(0),c=this.getCellInfo(a),d=c.rowIndex,e=c.colIndex,f=[];a.colSpan=1,a.setAttribute("width",b),f.push(a);for(var g=e,h=e+c.colSpan;g<h;g++)if(g!=e){var i=this.table.rows[d],j=i.insertCell(this.indexTable[d][g].cellIndex+1);if(j.rowSpan=c.rowSpan,this.setCellContent(j),j.setAttribute("vAlign",a.getAttribute("vAlign")),j.setAttribute("align",a.getAttribute("align")),j.setAttribute("width",b),a.style.cssText&&(j.style.cssText=a.style.cssText),"TH"==a.tagName){var k=a.ownerDocument.createElement("th");k.appendChild(j.firstChild),k.setAttribute("vAlign",a.getAttribute("vAlign")),k.rowSpan=j.rowSpan,i.insertBefore(k,j),domUtils.remove(j)}f.push(j)}return this.update(),f},isLastCell:function(a,b,c){b=b||this.rowsNum,c=c||this.colsNum;var d=this.getCellInfo(a);return d.rowIndex+d.rowSpan==b&&d.colIndex+d.colSpan==c},getLastCell:function(a){a=a||this.table.getElementsByTagName("td");var b,c=(this.getCellInfo(a[0]),this),d=a[0],e=d.parentNode,f=0,g=0;return utils.each(a,function(a){a.parentNode==e&&(g+=a.colSpan||1),f+=a.rowSpan*a.colSpan||1}),b=f/g,utils.each(a,function(a){if(c.isLastCell(a,b,g))return d=a,!1}),d},selectRow:function(a){var b=this.indexTable[a],c=this.getCell(b[0].rowIndex,b[0].cellIndex),d=this.getCell(b[this.colsNum-1].rowIndex,b[this.colsNum-1].cellIndex),e=this.getCellsRange(c,d);this.setSelected(e)},selectTable:function(){var a=this.table.getElementsByTagName("td"),b=this.getCellsRange(a[0],a[a.length-1]);this.setSelected(b)},setBackground:function(a,b){if("string"==typeof b)utils.each(a,function(a){a.style.backgroundColor=b});else if("object"==typeof b){b=utils.extend({repeat:!0,colorList:["#ddd","#fff"]},b);for(var c,d=this.getCellInfo(a[0]).rowIndex,e=0,f=b.colorList,g=function(a,b,c){return a[b]?a[b]:c?a[b%a.length]:""},h=0;c=a[h++];){var i=this.getCellInfo(c);c.style.backgroundColor=g(f,d+e==i.rowIndex?e:++e,b.repeat)}}},removeBackground:function(a){utils.each(a,function(a){a.style.backgroundColor=""})}}}(),function(){function a(a,c){var d=domUtils.getElementsByTagName(a,"td th");utils.each(d,function(a){a.removeAttribute("width")}),a.setAttribute("width",b(c,!0,g(c,a)));var e=[];setTimeout(function(){utils.each(d,function(a){1==a.colSpan&&e.push(a.offsetWidth)}),utils.each(d,function(a,b){1==a.colSpan&&a.setAttribute("width",e[b]+"")})},0)}function b(a,b,c){var d=a.body;return d.offsetWidth-(b?2*parseInt(domUtils.getComputedStyle(d,"margin-left"),10):0)-2*c.tableBorder-(a.options.offsetWidth||0)}function c(a){var b=e(a).cell;if(b){var c=h(b);return c.selectedTds.length?c.selectedTds:[b]}return[]}var d=UE.UETable,e=function(a){return d.getTableItemsByRange(a)},f=function(a){return d.getUETableBySelected(a)},g=function(a,b){return d.getDefaultValue(a,b)},h=function(a){return d.getUETable(a)};UE.commands.inserttable={queryCommandState:function(){return e(this).table?-1:0},execCommand:function(a,b){function c(a,b){for(var c=[],d=a.numRows,e=a.numCols,f=0;f<d;f++){c.push("<tr"+(0==f?' class="firstRow"':"")+">");for(var g=0;g<e;g++)c.push('<td width="'+b+'"  vAlign="'+a.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>");c.push("</tr>")}return"<table><tbody>"+c.join("")+"</tbody></table>"}b||(b=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var d=this,e=this.selection.getRange(),f=e.startContainer,h=domUtils.findParent(f,function(a){return domUtils.isBlockElm(a)},!0)||d.body,i=g(d),j=h.offsetWidth,k=Math.floor(j/b.numCols-2*i.tdPadding-i.tdBorder);!b.tdvalign&&(b.tdvalign=d.options.tdvalign),d.execCommand("inserthtml",c(b,k))}},UE.commands.insertparagraphbeforetable={queryCommandState:function(){return e(this).cell?0:-1},execCommand:function(){var a=e(this).table;if(a){var b=this.document.createElement("p");b.innerHTML=browser.ie?"&nbsp;":"<br />",a.parentNode.insertBefore(b,a),this.selection.getRange().setStart(b,0).setCursor()}}},UE.commands.deletetable={queryCommandState:function(){var a=this.selection.getRange();return domUtils.findParentByTagName(a.startContainer,"table",!0)?0:-1},execCommand:function(a,b){var c=this.selection.getRange();if(b=b||domUtils.findParentByTagName(c.startContainer,"table",!0)){var d=b.nextSibling;d||(d=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"}),b.parentNode.insertBefore(d,b)),domUtils.remove(b),c=this.selection.getRange(),3==d.nodeType?c.setStartBefore(d):c.setStart(d,0),c.setCursor(!1,!0),this.fireEvent("tablehasdeleted")}}},UE.commands.cellalign={queryCommandState:function(){return c(this).length?0:-1},execCommand:function(a,b){var d=c(this);if(d.length)for(var e,f=0;e=d[f++];)e.setAttribute("align",b)}},UE.commands.cellvalign={queryCommandState:function(){return c(this).length?0:-1},execCommand:function(a,b){var d=c(this);if(d.length)for(var e,f=0;e=d[f++];)e.setAttribute("vAlign",b)}},UE.commands.insertcaption={queryCommandState:function(){var a=e(this).table;return a&&0==a.getElementsByTagName("caption").length?1:-1},execCommand:function(){var a=e(this).table;if(a){var b=this.document.createElement("caption");b.innerHTML=browser.ie?domUtils.fillChar:"<br/>",a.insertBefore(b,a.firstChild);var c=this.selection.getRange();c.setStart(b,0).setCursor()}}},UE.commands.deletecaption={queryCommandState:function(){var a=this.selection.getRange(),b=domUtils.findParentByTagName(a.startContainer,"table");return b?0==b.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var a=this.selection.getRange(),b=domUtils.findParentByTagName(a.startContainer,"table");if(b){domUtils.remove(b.getElementsByTagName("caption")[0]);var c=this.selection.getRange();c.setStart(b.rows[0].cells[0],0).setCursor()}}},UE.commands.inserttitle={queryCommandState:function(){var a=e(this).table;if(a){var b=a.rows[0];return"th"!=b.cells[b.cells.length-1].tagName.toLowerCase()?0:-1}return-1},execCommand:function(){var a=e(this).table;a&&h(a).insertRow(0,"th");var b=a.getElementsByTagName("th")[0];this.selection.getRange().setStart(b,0).setCursor(!1,!0)}},UE.commands.deletetitle={queryCommandState:function(){var a=e(this).table;if(a){var b=a.rows[0];return"th"==b.cells[b.cells.length-1].tagName.toLowerCase()?0:-1}return-1},execCommand:function(){var a=e(this).table;a&&domUtils.remove(a.rows[0]);var b=a.getElementsByTagName("td")[0];this.selection.getRange().setStart(b,0).setCursor(!1,!0)}},UE.commands.inserttitlecol={queryCommandState:function(){var a=e(this).table;if(a){var b=a.rows[a.rows.length-1];return b.getElementsByTagName("th").length?-1:0}return-1},execCommand:function(b){var c=e(this).table;c&&h(c).insertCol(0,"th"),a(c,this);var d=c.getElementsByTagName("th")[0];this.selection.getRange().setStart(d,0).setCursor(!1,!0)}},UE.commands.deletetitlecol={queryCommandState:function(){var a=e(this).table;if(a){var b=a.rows[a.rows.length-1];return b.getElementsByTagName("th").length?0:-1}return-1},execCommand:function(){var b=e(this).table;if(b)for(var c=0;c<b.rows.length;c++)domUtils.remove(b.rows[c].children[0]);a(b,this);var d=b.getElementsByTagName("td")[0];this.selection.getRange().setStart(d,0).setCursor(!1,!0)}},UE.commands.mergeright={queryCommandState:function(a){var b=e(this),c=b.table,d=b.cell;if(!c||!d)return-1;var f=h(c);if(f.selectedTds.length)return-1;var g=f.getCellInfo(d),i=g.colIndex+g.colSpan;if(i>=f.colsNum)return-1;var j=f.indexTable[g.rowIndex][i],k=c.rows[j.rowIndex].cells[j.cellIndex];return k&&d.tagName==k.tagName&&j.rowIndex==g.rowIndex&&j.rowSpan==g.rowSpan?0:-1},execCommand:function(a){var b=this.selection.getRange(),c=b.createBookmark(!0),d=e(this).cell,f=h(d);f.mergeRight(d),b.moveToBookmark(c).select()}},UE.commands.mergedown={queryCommandState:function(a){var b=e(this),c=b.table,d=b.cell;if(!c||!d)return-1;var f=h(c);if(f.selectedTds.length)return-1;var g=f.getCellInfo(d),i=g.rowIndex+g.rowSpan;if(i>=f.rowsNum)return-1;var j=f.indexTable[i][g.colIndex],k=c.rows[j.rowIndex].cells[j.cellIndex];return k&&d.tagName==k.tagName&&j.colIndex==g.colIndex&&j.colSpan==g.colSpan?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),c=e(this).cell,d=h(c);d.mergeDown(c),a.moveToBookmark(b).select()}},UE.commands.mergecells={queryCommandState:function(){return f(this)?0:-1},execCommand:function(){var a=f(this);if(a&&a.selectedTds.length){var b=a.selectedTds[0];a.mergeRange();var c=this.selection.getRange();domUtils.isEmptyBlock(b)?c.setStart(b,0).collapse(!0):c.selectNodeContents(b),c.select()}}},UE.commands.insertrow={queryCommandState:function(){var a=e(this),b=a.cell;return b&&("TD"==b.tagName||"TH"==b.tagName&&a.tr!==a.table.rows[0])&&h(a.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),c=e(this),d=c.cell,f=c.table,g=h(f),i=g.getCellInfo(d);if(g.selectedTds.length)for(var j=g.cellsRange,k=0,l=j.endRowIndex-j.beginRowIndex+1;k<l;k++)g.insertRow(j.beginRowIndex,d);else g.insertRow(i.rowIndex,d);a.moveToBookmark(b).select(),"enabled"===f.getAttribute("interlaced")&&this.fireEvent("interlacetable",f)}},UE.commands.insertrownext={queryCommandState:function(){var a=e(this),b=a.cell;return b&&"TD"==b.tagName&&h(a.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),c=e(this),d=c.cell,f=c.table,g=h(f),i=g.getCellInfo(d);if(g.selectedTds.length)for(var j=g.cellsRange,k=0,l=j.endRowIndex-j.beginRowIndex+1;k<l;k++)g.insertRow(j.endRowIndex+1,d);else g.insertRow(i.rowIndex+i.rowSpan,d);a.moveToBookmark(b).select(),"enabled"===f.getAttribute("interlaced")&&this.fireEvent("interlacetable",f)}},UE.commands.deleterow={queryCommandState:function(){var a=e(this);return a.cell?0:-1},execCommand:function(){var a=e(this).cell,b=h(a),c=b.cellsRange,d=b.getCellInfo(a),f=b.getVSideCell(a),g=b.getVSideCell(a,!0),i=this.selection.getRange();if(utils.isEmptyObject(c))b.deleteRow(d.rowIndex);else for(var j=c.beginRowIndex;j<c.endRowIndex+1;j++)b.deleteRow(c.beginRowIndex);var k=b.table;if(k.getElementsByTagName("td").length)if(1==d.rowSpan||d.rowSpan==c.endRowIndex-c.beginRowIndex+1)(g||f)&&i.selectNodeContents(g||f).setCursor(!1,!0);else{var l=b.getCell(d.rowIndex,b.indexTable[d.rowIndex][d.colIndex].cellIndex);l&&i.selectNodeContents(l).setCursor(!1,!0)}else{var m=k.nextSibling;domUtils.remove(k),m&&i.setStart(m,0).setCursor(!1,!0)}"enabled"===k.getAttribute("interlaced")&&this.fireEvent("interlacetable",k)}},UE.commands.insertcol={queryCommandState:function(a){var b=e(this),c=b.cell;return c&&("TD"==c.tagName||"TH"==c.tagName&&c!==b.tr.cells[0])&&h(b.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(a){var b=this.selection.getRange(),c=b.createBookmark(!0);if(this.queryCommandState(a)!=-1){var d=e(this).cell,f=h(d),g=f.getCellInfo(d);if(f.selectedTds.length)for(var i=f.cellsRange,j=0,k=i.endColIndex-i.beginColIndex+1;j<k;j++)f.insertCol(i.beginColIndex,d);else f.insertCol(g.colIndex,d);b.moveToBookmark(c).select(!0)}}},UE.commands.insertcolnext={queryCommandState:function(){var a=e(this),b=a.cell;return b&&h(a.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),c=e(this).cell,d=h(c),f=d.getCellInfo(c);
if(d.selectedTds.length)for(var g=d.cellsRange,i=0,j=g.endColIndex-g.beginColIndex+1;i<j;i++)d.insertCol(g.endColIndex+1,c);else d.insertCol(f.colIndex+f.colSpan,c);a.moveToBookmark(b).select()}},UE.commands.deletecol={queryCommandState:function(){var a=e(this);return a.cell?0:-1},execCommand:function(){var a=e(this).cell,b=h(a),c=b.cellsRange,d=b.getCellInfo(a),f=b.getHSideCell(a),g=b.getHSideCell(a,!0);if(utils.isEmptyObject(c))b.deleteCol(d.colIndex);else for(var i=c.beginColIndex;i<c.endColIndex+1;i++)b.deleteCol(c.beginColIndex);var j=b.table,k=this.selection.getRange();if(j.getElementsByTagName("td").length)domUtils.inDoc(a,this.document)?k.setStart(a,0).setCursor(!1,!0):g&&domUtils.inDoc(g,this.document)?k.selectNodeContents(g).setCursor(!1,!0):f&&domUtils.inDoc(f,this.document)&&k.selectNodeContents(f).setCursor(!0,!0);else{var l=j.nextSibling;domUtils.remove(j),l&&k.setStart(l,0).setCursor(!1,!0)}}},UE.commands.splittocells={queryCommandState:function(){var a=e(this),b=a.cell;if(!b)return-1;var c=h(a.table);return c.selectedTds.length>0?-1:b&&(b.colSpan>1||b.rowSpan>1)?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),c=e(this).cell,d=h(c);d.splitToCells(c),a.moveToBookmark(b).select()}},UE.commands.splittorows={queryCommandState:function(){var a=e(this),b=a.cell;if(!b)return-1;var c=h(a.table);return c.selectedTds.length>0?-1:b&&b.rowSpan>1?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),c=e(this).cell,d=h(c);d.splitToRows(c),a.moveToBookmark(b).select()}},UE.commands.splittocols={queryCommandState:function(){var a=e(this),b=a.cell;if(!b)return-1;var c=h(a.table);return c.selectedTds.length>0?-1:b&&b.colSpan>1?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),c=e(this).cell,d=h(c);d.splitToCols(c),a.moveToBookmark(b).select()}},UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return e(this).table?0:-1},execCommand:function(b){var c=e(this),d=c.table;if(d)if("adaptbywindow"==b)a(d,this);else{var f=domUtils.getElementsByTagName(d,"td th");utils.each(f,function(a){a.removeAttribute("width")}),d.removeAttribute("width")}}},UE.commands.averagedistributecol={queryCommandState:function(){var a=f(this);return a&&(a.isFullRow()||a.isFullCol())?0:-1},execCommand:function(a){function b(){var a,b=e.table,c=0,f=0,h=g(d,b);if(e.isFullRow())c=b.offsetWidth,f=e.colsNum;else for(var i,j=e.cellsRange.beginColIndex,k=e.cellsRange.endColIndex,l=j;l<=k;)i=e.selectedTds[l],c+=i.offsetWidth,l+=i.colSpan,f+=1;return a=Math.ceil(c/f)-2*h.tdBorder-2*h.tdPadding}function c(a){utils.each(domUtils.getElementsByTagName(e.table,"th"),function(a){a.setAttribute("width","")});var b=e.isFullRow()?domUtils.getElementsByTagName(e.table,"td"):e.selectedTds;utils.each(b,function(b){1==b.colSpan&&b.setAttribute("width",a)})}var d=this,e=f(d);e&&e.selectedTds.length&&c(b())}},UE.commands.averagedistributerow={queryCommandState:function(){var a=f(this);return a?a.selectedTds&&/th/gi.test(a.selectedTds[0].tagName)?-1:a.isFullRow()||a.isFullCol()?0:-1:-1},execCommand:function(a){function b(){var a,b,c=0,f=e.table,h=g(d,f),i=parseInt(domUtils.getComputedStyle(f.getElementsByTagName("td")[0],"padding-top"));if(e.isFullCol()){var j,k,l=domUtils.getElementsByTagName(f,"caption"),m=domUtils.getElementsByTagName(f,"th");l.length>0&&(j=l[0].offsetHeight),m.length>0&&(k=m[0].offsetHeight),c=f.offsetHeight-(j||0)-(k||0),b=0==m.length?e.rowsNum:e.rowsNum-1}else{for(var n=e.cellsRange.beginRowIndex,o=e.cellsRange.endRowIndex,p=0,q=domUtils.getElementsByTagName(f,"tr"),r=n;r<=o;r++)c+=q[r].offsetHeight,p+=1;b=p}return a=browser.ie&&browser.version<9?Math.ceil(c/b):Math.ceil(c/b)-2*h.tdBorder-2*i}function c(a){var b=e.isFullCol()?domUtils.getElementsByTagName(e.table,"td"):e.selectedTds;utils.each(b,function(b){1==b.rowSpan&&b.setAttribute("height",a)})}var d=this,e=f(d);e&&e.selectedTds.length&&c(b())}},UE.commands.cellalignment={queryCommandState:function(){return e(this).table?0:-1},execCommand:function(a,b){var c=this,d=f(c);if(d)utils.each(d.selectedTds,function(a){domUtils.setAttributes(a,b)});else{var e=c.selection.getStart(),g=e&&domUtils.findParentByTagName(e,["td","th","caption"],!0);/caption/gi.test(g.tagName)?(g.style.textAlign=b.align,g.style.verticalAlign=b.vAlign):domUtils.setAttributes(g,b),c.selection.getRange().setCursor(!0)}},queryCommandValue:function(a){var b=e(this).cell;if(b||(b=c(this)[0]),b){var d=UE.UETable.getUETable(b).selectedTds;return!d.length&&(d=b),UE.UETable.getTableCellAlignState(d)}return null}},UE.commands.tablealignment={queryCommandState:function(){return browser.ie&&browser.version<8?-1:e(this).table?0:-1},execCommand:function(a,b){var c=this,d=c.selection.getStart(),e=d&&domUtils.findParentByTagName(d,["table"],!0);e&&e.setAttribute("align",b)}},UE.commands.edittable={queryCommandState:function(){return e(this).table?0:-1},execCommand:function(a,b){var c=this.selection.getRange(),d=domUtils.findParentByTagName(c.startContainer,"table");if(d){var e=domUtils.getElementsByTagName(d,"td").concat(domUtils.getElementsByTagName(d,"th"),domUtils.getElementsByTagName(d,"caption"));utils.each(e,function(a){a.style.borderColor=b})}}},UE.commands.edittd={queryCommandState:function(){return e(this).table?0:-1},execCommand:function(a,b){var c=this,d=f(c);if(d)utils.each(d.selectedTds,function(a){a.style.backgroundColor=b});else{var e=c.selection.getStart(),g=e&&domUtils.findParentByTagName(e,["td","th","caption"],!0);g&&(g.style.backgroundColor=b)}}},UE.commands.settablebackground={queryCommandState:function(){return c(this).length>1?0:-1},execCommand:function(a,b){var d,e;d=c(this),e=h(d[0]),e.setBackground(d,b)}},UE.commands.cleartablebackground={queryCommandState:function(){var a=c(this);if(!a.length)return-1;for(var b,d=0;b=a[d++];)if(""!==b.style.backgroundColor)return 0;return-1},execCommand:function(){var a=c(this),b=h(a[0]);b.removeBackground(a)}},UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(a){var b=e(this).table;if(!b)return-1;var c=b.getAttribute("interlaced");return"interlacetable"==a?"enabled"===c?-1:0:c&&"disabled"!==c?0:-1},execCommand:function(a,b){var c=e(this).table;"interlacetable"==a?(c.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",c,b)):(c.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",c))}},UE.commands.setbordervisible={queryCommandState:function(a){var b=e(this).table;return b?0:-1},execCommand:function(){var a=e(this).table;utils.each(domUtils.getElementsByTagName(a,"td"),function(a){a.style.borderWidth="1px",a.style.borderStyle="solid"})}}}(),UE.plugins.table=function(){function a(a){}function b(a,b){c(a,"width",!0),c(a,"height",!0)}function c(a,b,c){a.style[b]&&(c&&a.setAttribute(b,parseInt(a.style[b],10)),a.style[b]="")}function d(a){if("TD"==a.tagName||"TH"==a.tagName)return a;var b;return(b=domUtils.findParentByTagName(a,"td",!0)||domUtils.findParentByTagName(a,"th",!0))?b:null}function e(a){var b=new RegExp(domUtils.fillChar,"g");if(a[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(b,"").length>0)return 0;for(var c in dtd.$isNotEmpty)if(a.getElementsByTagName(c).length)return 0;return 1}function f(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+N.document.body.scrollLeft-N.document.body.clientLeft,y:a.clientY+N.document.body.scrollTop-N.document.body.clientTop}}function g(b){if(!A())try{var c,e=d(b.target||b.srcElement);if(R&&(N.body.style.webkitUserSelect="none",(Math.abs(V.x-b.clientX)>T||Math.abs(V.y-b.clientY)>T)&&(t(),R=!1,U=0,v(b))),ca&&ha)return U=0,N.body.style.webkitUserSelect="none",N.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),c=f(b),m(N,!0,ca,c,e),void("h"==ca?ga.style.left=k(ha,b)+"px":"v"==ca&&(ga.style.top=l(ha,b)+"px"));if(e){if(N.fireEvent("excludetable",e)===!0)return;c=f(b);var g=n(e,c),i=domUtils.findParentByTagName(e,"table",!0);if(j(i,e,b,!0)){if(N.fireEvent("excludetable",i)===!0)return;N.body.style.cursor="url("+N.options.cursorpath+"h.png),pointer"}else if(j(i,e,b)){if(N.fireEvent("excludetable",i)===!0)return;N.body.style.cursor="url("+N.options.cursorpath+"v.png),pointer"}else{N.body.style.cursor="text";/\d/.test(g)&&(g=g.replace(/\d/,""),e=Y(e).getPreviewCell(e,"v"==g)),m(N,!!e&&!!g,e?g:"",c,e)}}else h(!1,i,N)}catch(o){a(o)}}function h(a,b,c){if(a)i(b,c);else{if(fa)return;la=setTimeout(function(){!fa&&ea&&ea.parentNode&&ea.parentNode.removeChild(ea)},2e3)}}function i(a,b){function c(c,d){clearTimeout(g),g=setTimeout(function(){b.fireEvent("tableClicked",a,d)},300)}function d(c){clearTimeout(g);var d=Y(a),e=a.rows[0].cells[0],f=d.getLastCell(),h=d.getCellsRange(e,f);b.selection.getRange().setStart(e,0).setCursor(!1,!0),d.setSelected(h)}var e=domUtils.getXY(a),f=a.ownerDocument;if(ea&&ea.parentNode)return ea;ea=f.createElement("div"),ea.contentEditable=!1,ea.innerHTML="",ea.style.cssText="width:15px;height:15px;background-image:url("+b.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(e.y-15)+"px;left:"+e.x+"px;",domUtils.unSelectable(ea),ea.onmouseover=function(a){fa=!0},ea.onmouseout=function(a){fa=!1},domUtils.on(ea,"click",function(a,b){c(b,this)}),domUtils.on(ea,"dblclick",function(a,b){d(b)}),domUtils.on(ea,"dragstart",function(a,b){domUtils.preventDefault(b)});var g;f.body.appendChild(ea)}function j(a,b,c,d){var e=f(c),g=n(b,e);if(d){var h=a.getElementsByTagName("caption")[0],i=h?h.offsetHeight:0;return"v1"==g&&e.y-domUtils.getXY(a).y-i<8}return"h1"==g&&e.x-domUtils.getXY(a).x<8}function k(a,b){var c=Y(a);if(c){var d=c.getSameEndPosCells(a,"x")[0],e=c.getSameStartPosXCells(a)[0],g=f(b).x,h=(d?domUtils.getXY(d).x:domUtils.getXY(c.table).x)+20,i=e?domUtils.getXY(e).x+e.offsetWidth-20:N.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(N.body,"width"),10);return h+=Q,i-=Q,g<h?h:g>i?i:g}}function l(b,c){try{var d=domUtils.getXY(b).y,e=f(c).y;return e<d?d:e}catch(g){a(g)}}function m(b,c,d,e,f){try{b.body.style.cursor="h"==d?"col-resize":"v"==d?"row-resize":"text",browser.ie&&(!d||ia||Z(b)?I(b):(H(b,b.document),J(d,f))),da=c}catch(g){a(g)}}function n(a,b){var c=domUtils.getXY(a);return c?c.x+a.offsetWidth-b.x<S?"h":b.x-c.x<S?"h1":c.y+a.offsetHeight-b.y<S?"v":b.y-c.y<S?"v1":"":""}function o(a,b){if(!A())if(V={x:b.clientX,y:b.clientY},2==b.button){var c=Z(N),d=!1;if(c){var e=M(N,b);utils.each(c.selectedTds,function(a){a===e&&(d=!0)}),d?(e=c.selectedTds[0],setTimeout(function(){N.selection.getRange().setStart(e,0).setCursor(!1,!0)},0)):(_(domUtils.getElementsByTagName(N.body,"th td")),c.clearSelected())}}else q(b)}function p(a){U=0,a=a||N.window.event;var b=d(a.target||a.srcElement);if(b){var c;if(c=n(b,f(a))){if(I(N),"h1"==c)if(c="h",j(domUtils.findParentByTagName(b,"table"),b,a))N.execCommand("adaptbywindow");else if(b=Y(b).getPreviewCell(b)){var e=N.selection.getRange();e.selectNodeContents(b).setCursor(!0,!0)}if("h"==c){var g=Y(b),h=g.table,i=C(b,h,!0);i=s(i,"left"),g.width=g.offsetWidth;var k=[],l=[];utils.each(i,function(a){k.push(a.offsetWidth)}),utils.each(i,function(a){a.removeAttribute("width")}),window.setTimeout(function(){var a=!0;utils.each(i,function(b,c){var d=b.offsetWidth;return d>k[c]?(a=!1,!1):void l.push(d)});var b=a?l:k;utils.each(i,function(a,c){a.width=b[c]-G()})},0)}}}}function q(a){if(_(domUtils.getElementsByTagName(N.body,"td th")),utils.each(N.document.getElementsByTagName("table"),function(a){a.ueTable=null}),aa=M(N,a)){var b=domUtils.findParentByTagName(aa,"table",!0);ut=Y(b),ut&&ut.clearSelected(),da?r(a):(N.document.body.style.webkitUserSelect="",ia=!0,N.addListener("mouseover",x))}}function r(a){browser.ie&&(a=u(a)),t(),R=!0,O=setTimeout(function(){v(a)},W)}function s(a,b){for(var c=[],d=null,e=0,f=a.length;e<f;e++)d=a[e][b],d&&c.push(d);return c}function t(){O&&clearTimeout(O),O=null}function u(a){var b=["pageX","pageY","clientX","clientY","srcElement","target"],c={};if(a)for(var d,e,f=0;d=b[f];f++)e=a[d],e&&(c[d]=e);return c}function v(a){if(R=!1,aa=a.target||a.srcElement){var b=n(aa,f(a));/\d/.test(b)&&(b=b.replace(/\d/,""),aa=Y(aa).getPreviewCell(aa,"v"==b)),I(N),H(N,N.document),N.fireEvent("saveScene"),J(b,aa),ia=!0,ca=b,ha=aa}}function w(a,b){if(!A()){if(t(),R=!1,da&&(U=++U%3,V={x:b.clientX,y:b.clientY},P=setTimeout(function(){U>0&&U--},W),2===U))return U=0,void p(b);if(2!=b.button){var c=this,d=c.selection.getRange(),e=domUtils.findParentByTagName(d.startContainer,"table",!0),f=domUtils.findParentByTagName(d.endContainer,"table",!0);if((e||f)&&(e===f?(e=domUtils.findParentByTagName(d.startContainer,["td","th","caption"],!0),f=domUtils.findParentByTagName(d.endContainer,["td","th","caption"],!0),e!==f&&c.selection.clearRange()):c.selection.clearRange()),ia=!1,c.document.body.style.webkitUserSelect="",ca&&ha&&(c.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),U=0,ga=c.document.getElementById("ue_tableDragLine"))){var g=domUtils.getXY(ha),h=domUtils.getXY(ga);switch(ca){case"h":z(ha,h.x-g.x);break;case"v":B(ha,h.y-g.y-ha.offsetHeight)}return ca="",ha=null,I(c),void c.fireEvent("saveScene")}if(aa){var i=Y(aa),j=i?i.selectedTds[0]:null;if(j)d=new dom.Range(c.document),domUtils.isEmptyBlock(j)?d.setStart(j,0).setCursor(!1,!0):d.selectNodeContents(j).shrinkBoundary().setCursor(!1,!0);else if(d=c.selection.getRange().shrinkBoundary(),!d.collapsed){var e=domUtils.findParentByTagName(d.startContainer,["td","th"],!0),f=domUtils.findParentByTagName(d.endContainer,["td","th"],!0);(e&&!f||!e&&f||e&&f&&e!==f)&&d.setCursor(!1,!0)}aa=null,c.removeListener("mouseover",x)}else{var k=domUtils.findParentByTagName(b.target||b.srcElement,"td",!0);if(k||(k=domUtils.findParentByTagName(b.target||b.srcElement,"th",!0)),k&&("TD"==k.tagName||"TH"==k.tagName)){if(c.fireEvent("excludetable",k)===!0)return;d=new dom.Range(c.document),d.setStart(k,0).setCursor(!1,!0)}}c._selectionChange(250,b)}}}function x(a,b){if(!A()){var c=this,d=b.target||b.srcElement;if(ba=domUtils.findParentByTagName(d,"td",!0)||domUtils.findParentByTagName(d,"th",!0),aa&&ba&&("TD"==aa.tagName&&"TD"==ba.tagName||"TH"==aa.tagName&&"TH"==ba.tagName)&&domUtils.findParentByTagName(aa,"table")==domUtils.findParentByTagName(ba,"table")){var e=Y(ba);if(aa!=ba){c.document.body.style.webkitUserSelect="none",c.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();var f=e.getCellsRange(aa,ba);e.setSelected(f)}else c.document.body.style.webkitUserSelect="",e.clearSelected()}b.preventDefault?b.preventDefault():b.returnValue=!1}}function y(a,b,c){var d=parseInt(domUtils.getComputedStyle(a,"line-height"),10),e=c+b;b=e<d?d:e,a.style.height&&(a.style.height=""),1==a.rowSpan?a.setAttribute("height",b):a.removeAttribute&&a.removeAttribute("height")}function z(a,b){var c=Y(a);if(c){var d=c.table,e=C(a,d);if(d.style.width="",d.removeAttribute("width"),b=D(b,a,e),a.nextSibling){utils.each(e,function(a){a.left.width=+a.left.width+b,a.right&&(a.right.width=+a.right.width-b)})}else utils.each(e,function(a){a.left.width-=-b})}}function A(){return"false"===N.body.contentEditable}function B(a,b){if(!(Math.abs(b)<10)){var c=Y(a);if(c)for(var d,e=c.getSameEndPosCells(a,"y"),f=e[0]?e[0].offsetHeight:0,g=0;d=e[g++];)y(d,b,f)}}function C(a,b,c){if(b||(b=domUtils.findParentByTagName(a,"table")),!b)return null;for(var d=(domUtils.getNodeIndex(a),a),e=b.rows,f=0;d;)1===d.nodeType&&(f+=d.colSpan||1),d=d.previousSibling;d=null;var g=[];return utils.each(e,function(a){var b=a.cells,d=0;utils.each(b,function(a){return d+=a.colSpan||1,d===f?(g.push({left:a,right:a.nextSibling||null}),!1):d>f?(c&&g.push({left:a}),!1):void 0})}),g}function D(a,b,c){if(a-=G(),a<0)return 0;a-=E(b);var d=a<0?"left":"right";return a=Math.abs(a),utils.each(c,function(b){var c=b[d];c&&(a=Math.min(a,E(c)-Q))}),a=a<0?0:a,"left"===d?-a:a}function E(a){var b=0,b=a.offsetWidth-G();a.nextSibling||(b-=F(a)),b=b<0?0:b;try{a.width=b}catch(c){}return b}function F(a){if(tab=domUtils.findParentByTagName(a,"table",!1),void 0===tab.offsetVal){var b=a.previousSibling;b?tab.offsetVal=a.offsetWidth-b.offsetWidth===X.borderWidth?X.borderWidth:0:tab.offsetVal=0}return tab.offsetVal}function G(){if(void 0===X.tabcellSpace){var a=N.document.createElement("table"),b=N.document.createElement("tbody"),c=N.document.createElement("tr"),d=N.document.createElement("td"),e=null;d.style.cssText="border: 0;",d.width=1,c.appendChild(d),c.appendChild(e=d.cloneNode(!1)),b.appendChild(c),a.appendChild(b),a.style.cssText="visibility: hidden;",N.body.appendChild(a),X.paddingSpace=d.offsetWidth-1;var f=a.offsetWidth;d.style.cssText="",e.style.cssText="",X.borderWidth=(a.offsetWidth-f)/3,X.tabcellSpace=X.paddingSpace+X.borderWidth,N.body.removeChild(a)}return G=function(){return X.tabcellSpace},X.tabcellSpace}function H(a,b){ia||(ga=a.document.createElement("div"),domUtils.setAttributes(ga,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),a.body.appendChild(ga))}function I(a){if(!ia)for(var b;b=a.document.getElementById("ue_tableDragLine");)domUtils.remove(b)}function J(a,b){if(b){var c,d=domUtils.findParentByTagName(b,"table"),e=d.getElementsByTagName("caption"),f=d.offsetWidth,g=d.offsetHeight-(e.length>0?e[0].offsetHeight:0),h=domUtils.getXY(d),i=domUtils.getXY(b);switch(a){case"h":c="height:"+g+"px;top:"+(h.y+(e.length>0?e[0].offsetHeight:0))+"px;left:"+(i.x+b.offsetWidth),ga.style.cssText=c+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":c="width:"+f+"px;left:"+h.x+"px;top:"+(i.y+b.offsetHeight),ga.style.cssText=c+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)"}}}function K(a,b){for(var c,d,e=domUtils.getElementsByTagName(a.body,"table"),f=0;d=e[f++];){var g=domUtils.getElementsByTagName(d,"td");g[0]&&(b?(c=g[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/gi.test(c)&&domUtils.addClass(d,"noBorderTable")):domUtils.removeClasses(d,"noBorderTable"))}}function L(a,b,c){var d=a.body;return d.offsetWidth-(b?2*parseInt(domUtils.getComputedStyle(d,"margin-left"),10):0)-2*c.tableBorder-(a.options.offsetWidth||0)}function M(a,b){var c=domUtils.findParentByTagName(b.target||b.srcElement,["td","th"],!0),d=null;if(!c)return null;if(d=n(c,f(b)),!c)return null;if("h1"===d&&c.previousSibling){var e=domUtils.getXY(c),g=c.offsetWidth;Math.abs(e.x+g-b.clientX)>g/3&&(c=c.previousSibling)}else if("v1"===d&&c.parentNode.previousSibling){var e=domUtils.getXY(c),h=c.offsetHeight;Math.abs(e.y+h-b.clientY)>h/3&&(c=c.parentNode.previousSibling.firstChild)}return c&&a.fireEvent("excludetable",c)!==!0?c:null}var N=this,O=null,P=null,Q=5,R=!1,S=5,T=10,U=0,V=null,W=360,X=UE.UETable,Y=function(a){return X.getUETable(a)},Z=function(a){return X.getUETableBySelected(a)},$=function(a,b){return X.getDefaultValue(a,b)},_=function(a){return X.removeSelectedClass(a)};N.ready(function(){var a=this,b=a.selection.getText;a.selection.getText=function(){var c=Z(a);if(c){var d="";return utils.each(c.selectedTds,function(a){d+=a[browser.ie?"innerText":"textContent"]}),d}return b.call(a.selection)}});var aa=null,ba=null,ca="",da=!1,ea=null,fa=!1,ga=null,ha=null,ia=!1,ja=!0;N.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:N.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]}),N.getUETable=Y;var ka={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};N.ready(function(){utils.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",N.document);var a,c,f;N.addListener("keydown",function(b,d){var g=this,h=d.keyCode||d.which;if(8==h){var i=Z(g);i&&i.selectedTds.length&&(i.isFullCol()?g.execCommand("deletecol"):i.isFullRow()?g.execCommand("deleterow"):g.fireEvent("delcells"),domUtils.preventDefault(d));var j=domUtils.findParentByTagName(g.selection.getStart(),"caption",!0),k=g.selection.getRange();if(k.collapsed&&j&&e(j)){g.fireEvent("saveScene");var l=j.parentNode;domUtils.remove(j),l&&k.setStart(l.rows[0].cells[0],0).setCursor(!1,!0),g.fireEvent("saveScene")}}if(46==h&&(i=Z(g))){g.fireEvent("saveScene");for(var m,n=0;m=i.selectedTds[n++];)domUtils.fillNode(g.document,m);g.fireEvent("saveScene"),domUtils.preventDefault(d)}if(13==h){var o=g.selection.getRange(),j=domUtils.findParentByTagName(o.startContainer,"caption",!0);if(j){var l=domUtils.findParentByTagName(j,"table");return o.collapsed?j&&o.setStart(l.rows[0].cells[0],0).setCursor(!1,!0):(o.deleteContents(),g.fireEvent("saveScene")),void domUtils.preventDefault(d)}if(o.collapsed){var l=domUtils.findParentByTagName(o.startContainer,"table");if(l){var p=l.rows[0].cells[0],q=domUtils.findParentByTagName(g.selection.getStart(),["td","th"],!0),r=l.previousSibling;if(p===q&&(!r||1==r.nodeType&&"TABLE"==r.tagName)&&domUtils.isStartInblock(o)){var s=domUtils.findParent(g.selection.getStart(),function(a){return domUtils.isBlockElm(a)},!0);s&&(/t(h|d)/i.test(s.tagName)||s===q.firstChild)&&(g.execCommand("insertparagraphbeforetable"),domUtils.preventDefault(d))}}}}if((d.ctrlKey||d.metaKey)&&"67"==d.keyCode){a=null;var i=Z(g);if(i){var t=i.selectedTds;c=i.isFullCol(),f=i.isFullRow(),a=[[i.cloneCell(t[0],null,!0)]];for(var m,n=1;m=t[n];n++)m.parentNode!==t[n-1].parentNode?a.push([i.cloneCell(m,null,!0)]):a[a.length-1].push(i.cloneCell(m,null,!0))}}}),N.addListener("tablehasdeleted",function(){m(this,!1,"",null),ea&&domUtils.remove(ea)}),N.addListener("beforepaste",function(d,g){var h=this,i=h.selection.getRange();if(domUtils.findParentByTagName(i.startContainer,"caption",!0)){var j=h.document.createElement("div");return j.innerHTML=g.html,void(g.html=j[browser.ie9below?"innerText":"textContent"])}var k=Z(h);if(a){h.fireEvent("saveScene");var l,m,i=h.selection.getRange(),n=domUtils.findParentByTagName(i.startContainer,["td","th"],!0);if(n){var o=Y(n);if(f){var p=o.getCellInfo(n).rowIndex;"TH"==n.tagName&&p++;for(var q,r=0;q=a[r++];){for(var s,t=o.insertRow(p++,"td"),u=0;s=q[u];u++){var v=t.cells[u];v||(v=t.insertCell(u)),v.innerHTML=s.innerHTML,s.getAttribute("width")&&v.setAttribute("width",s.getAttribute("width")),s.getAttribute("vAlign")&&v.setAttribute("vAlign",s.getAttribute("vAlign")),s.getAttribute("align")&&v.setAttribute("align",s.getAttribute("align")),s.style.cssText&&(v.style.cssText=s.style.cssText)}for(var s,u=0;(s=t.cells[u])&&q[u];u++)s.innerHTML=q[u].innerHTML,q[u].getAttribute("width")&&s.setAttribute("width",q[u].getAttribute("width")),q[u].getAttribute("vAlign")&&s.setAttribute("vAlign",q[u].getAttribute("vAlign")),q[u].getAttribute("align")&&s.setAttribute("align",q[u].getAttribute("align")),q[u].style.cssText&&(s.style.cssText=q[u].style.cssText)}}else{if(c){y=o.getCellInfo(n);for(var s,w=0,u=0,q=a[0];s=q[u++];)w+=s.colSpan||1;for(h.__hasEnterExecCommand=!0,r=0;r<w;r++)h.execCommand("insertcol");h.__hasEnterExecCommand=!1,n=o.table.rows[0].cells[y.cellIndex],"TH"==n.tagName&&(n=o.table.rows[1].cells[y.cellIndex])}for(var q,r=0;q=a[r++];){l=n;for(var s,u=0;s=q[u++];)if(n)n.innerHTML=s.innerHTML,s.getAttribute("width")&&n.setAttribute("width",s.getAttribute("width")),s.getAttribute("vAlign")&&n.setAttribute("vAlign",s.getAttribute("vAlign")),s.getAttribute("align")&&n.setAttribute("align",s.getAttribute("align")),s.style.cssText&&(n.style.cssText=s.style.cssText),m=n,n=n.nextSibling;else{var x=s.cloneNode(!0);domUtils.removeAttributes(x,["class","rowSpan","colSpan"]),m.parentNode.appendChild(x)}if(n=o.getNextCell(l,!0,!0),!a[r])break;if(!n){var y=o.getCellInfo(l);o.table.insertRow(o.table.rows.length),o.update(),n=o.getVSideCell(l,!0)}}}o.update()}else{k=h.document.createElement("table");for(var q,r=0;q=a[r++];){for(var s,t=k.insertRow(k.rows.length),u=0;s=q[u++];)x=X.cloneCell(s,null,!0),domUtils.removeAttributes(x,["class"]),t.appendChild(x);2==u&&x.rowSpan>1&&(x.rowSpan=1)}var z=$(h),A=h.body.offsetWidth-(ja?2*parseInt(domUtils.getComputedStyle(h.body,"margin-left"),10):0)-2*z.tableBorder-(h.options.offsetWidth||0);h.execCommand("insertHTML","<table  "+(c&&f?'width="'+A+'"':"")+">"+k.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}return h.fireEvent("contentchange"),h.fireEvent("saveScene"),g.html="",!0}var B,j=h.document.createElement("div");j.innerHTML=g.html,B=j.getElementsByTagName("table"),domUtils.findParentByTagName(h.selection.getStart(),"table")?(utils.each(B,function(a){domUtils.remove(a)}),domUtils.findParentByTagName(h.selection.getStart(),"caption",!0)&&(j.innerHTML=j[browser.ie?"innerText":"textContent"])):utils.each(B,function(a){b(a,!0),domUtils.removeAttributes(a,["style","border"]),utils.each(domUtils.getElementsByTagName(a,"td"),function(a){e(a)&&domUtils.fillNode(h.document,a),b(a,!0)})}),g.html=j.innerHTML}),N.addListener("afterpaste",function(){utils.each(domUtils.getElementsByTagName(N.body,"table"),function(a){if(a.offsetWidth>N.body.offsetWidth){var b=$(N,a);a.style.width=N.body.offsetWidth-(ja?2*parseInt(domUtils.getComputedStyle(N.body,"margin-left"),10):0)-2*b.tableBorder-(N.options.offsetWidth||0)+"px"}})}),N.addListener("blur",function(){a=null});var i;N.addListener("keydown",function(){clearTimeout(i),i=setTimeout(function(){var a=N.selection.getRange(),b=domUtils.findParentByTagName(a.startContainer,["th","td"],!0);if(b){var c=b.parentNode.parentNode.parentNode;c.offsetWidth>c.getAttribute("width")&&(b.style.wordBreak="break-all")}},100)}),N.addListener("selectionchange",function(){m(N,!1,"",null)}),N.addListener("contentchange",function(){var a=this;if(I(a),!Z(a)){var b=a.selection.getRange(),c=b.startContainer;c=domUtils.findParentByTagName(c,["td","th"],!0),utils.each(domUtils.getElementsByTagName(a.document,"table"),function(b){a.fireEvent("excludetable",b)!==!0&&(b.ueTable=new X(b),b.onmouseover=function(){a.fireEvent("tablemouseover",b)},b.onmousemove=function(){a.fireEvent("tablemousemove",b),a.options.tableDragable&&h(!0,this,a),utils.defer(function(){a.fireEvent("contentchange",50)},!0)},b.onmouseout=function(){a.fireEvent("tablemouseout",b),m(a,!1,"",null),I(a)},b.onclick=function(b){b=a.window.event||b;var c=d(b.target||b.srcElement);if(c){var e,f=Y(c),g=f.table,h=f.getCellInfo(c),i=a.selection.getRange();if(j(g,c,b,!0)){var k=f.getCell(f.indexTable[f.rowsNum-1][h.colIndex].rowIndex,f.indexTable[f.rowsNum-1][h.colIndex].cellIndex);return void(b.shiftKey&&f.selectedTds.length?f.selectedTds[0]!==k?(e=f.getCellsRange(f.selectedTds[0],k),f.setSelected(e)):i&&i.selectNodeContents(k).select():c!==k?(e=f.getCellsRange(c,k),f.setSelected(e)):i&&i.selectNodeContents(k).select())}if(j(g,c,b)){var l=f.getCell(f.indexTable[h.rowIndex][f.colsNum-1].rowIndex,f.indexTable[h.rowIndex][f.colsNum-1].cellIndex);b.shiftKey&&f.selectedTds.length?f.selectedTds[0]!==l?(e=f.getCellsRange(f.selectedTds[0],l),f.setSelected(e)):i&&i.selectNodeContents(l).select():c!==l?(e=f.getCellsRange(c,l),f.setSelected(e)):i&&i.selectNodeContents(l).select()}}})}),K(a,!0)}}),domUtils.on(N.document,"mousemove",g),domUtils.on(N.document,"mouseout",function(a){var b=a.target||a.srcElement;"TABLE"==b.tagName&&m(N,!1,"",null)}),N.addListener("interlacetable",function(a,b,c){if(b)for(var d=this,e=b.rows,f=e.length,g=function(a,b,c){return a[b]?a[b]:c?a[b%a.length]:""},h=0;h<f;h++)e[h].className=g(c||d.options.classList,h,!0)}),N.addListener("uninterlacetable",function(a,b){if(b)for(var c=this,d=b.rows,e=c.options.classList,f=d.length,g=0;g<f;g++)domUtils.removeClasses(d[g],e)}),N.addListener("mousedown",o),N.addListener("mouseup",w),domUtils.on(N.body,"dragstart",function(a){w.call(N,"dragstart",a)}),N.addOutputRule(function(a){utils.each(a.getNodesByTagName("div"),function(a){"ue_tableDragLine"==a.getAttr("id")&&a.parentNode.removeChild(a)})});var k=0;N.addListener("mousedown",function(){k=0}),N.addListener("tabkeydown",function(){var a=this.selection.getRange(),b=a.getCommonAncestor(!0,!0),c=domUtils.findParentByTagName(b,"table");if(c){if(domUtils.findParentByTagName(b,"caption",!0)){var d=domUtils.getElementsByTagName(c,"th td");d&&d.length&&a.setStart(d[0],0).setCursor(!1,!0)}else{var d=domUtils.findParentByTagName(b,["td","th"],!0),f=Y(d);k=d.rowSpan>1?k:f.getCellInfo(d).rowIndex;var g=f.getTabNextCell(d,k);g?e(g)?a.setStart(g,0).setCursor(!1,!0):a.selectNodeContents(g).select():(N.fireEvent("saveScene"),N.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),N.__hasEnterExecCommand=!1,a=this.selection.getRange(),a.setStart(c.rows[c.rows.length-1].cells[0],0).setCursor(),N.fireEvent("saveScene"))}return!0}}),browser.ie&&N.addListener("selectionchange",function(){m(this,!1,"",null)}),N.addListener("keydown",function(a,b){var c=this,d=b.keyCode||b.which;if(8!=d&&46!=d){var e=!(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey);e&&_(domUtils.getElementsByTagName(c.body,"td"));var f=Z(c);f&&e&&f.clearSelected()}}),N.addListener("beforegetcontent",function(){K(this,!1),browser.ie&&utils.each(this.document.getElementsByTagName("caption"),function(a){domUtils.isEmptyNode(a)&&(a.innerHTML="&nbsp;")})}),N.addListener("aftergetcontent",function(){K(this,!0)}),N.addListener("getAllHtml",function(){_(N.document.getElementsByTagName("td"))}),N.addListener("fullscreenchanged",function(a,b){if(!b){var c=this.body.offsetWidth/document.body.offsetWidth,d=domUtils.getElementsByTagName(this.body,"table");utils.each(d,function(a){if(a.offsetWidth<N.body.offsetWidth)return!1;var b=domUtils.getElementsByTagName(a,"td"),d=[];utils.each(b,function(a){d.push(a.offsetWidth)});for(var e,f=0;e=b[f];f++)e.setAttribute("width",Math.floor(d[f]*c));a.setAttribute("width",Math.floor(L(N,ja,$(N))))})}});var l=N.execCommand;N.execCommand=function(a,b){var c=this;a=a.toLowerCase();var d,f,g=Z(c),h=new dom.Range(c.document),i=c.commands[a]||UE.commands[a];if(i){if(!g||ka[a]||i.notNeedUndo||c.__hasEnterExecCommand)f=l.apply(c,arguments);else{c.__hasEnterExecCommand=!0,c.fireEvent("beforeexeccommand",a),d=g.selectedTds;for(var j,k,m,n=-2,o=-2,p=0;m=d[p];p++)e(m)?h.setStart(m,0).setCursor(!1,!0):h.selectNode(m).select(!0),k=c.queryCommandState(a),j=c.queryCommandValue(a),k!=-1&&(n===k&&o===j||(c._ignoreContentChange=!0,f=l.apply(c,arguments),c._ignoreContentChange=!1),n=c.queryCommandState(a),o=c.queryCommandValue(a),domUtils.isEmptyBlock(m)&&domUtils.fillNode(c.document,m));h.setStart(d[0],0).shrinkBoundary(!0).setCursor(!1,!0),c.fireEvent("contentchange"),c.fireEvent("afterexeccommand",a),c.__hasEnterExecCommand=!1,c._selectionChange()}return f}}});var la},UE.UETable.prototype.sortTable=function(a,b){var c=this.table,d=c.rows,e=[],f="TH"===d[0].cells[0].tagName,g=0;if(this.selectedTds.length){for(var h=this.cellsRange,i=h.endRowIndex+1,j=h.beginRowIndex;j<i;j++)e[j]=d[j];e.splice(0,h.beginRowIndex),g=h.endRowIndex+1===this.rowsNum?0:h.endRowIndex+1;
}else for(var j=0,i=d.length;j<i;j++)e[j]=d[j];var k={reversecurrent:function(a,b){return 1},orderbyasc:function(a,b){var c=a.innerText||a.textContent,d=b.innerText||b.textContent;return c.localeCompare(d)},reversebyasc:function(a,b){var c=a.innerHTML,d=b.innerHTML;return d.localeCompare(c)},orderbynum:function(a,b){var c=a[browser.ie?"innerText":"textContent"].match(/\d+/),d=b[browser.ie?"innerText":"textContent"].match(/\d+/);return c&&(c=+c[0]),d&&(d=+d[0]),(c||0)-(d||0)},reversebynum:function(a,b){var c=a[browser.ie?"innerText":"textContent"].match(/\d+/),d=b[browser.ie?"innerText":"textContent"].match(/\d+/);return c&&(c=+c[0]),d&&(d=+d[0]),(d||0)-(c||0)}};c.setAttribute("data-sort-type",b&&"string"==typeof b&&k[b]?b:""),f&&e.splice(0,1),e=utils.sort(e,function(c,d){var e;return e=b&&"function"==typeof b?b.call(this,c.cells[a],d.cells[a]):b&&"number"==typeof b?1:b&&"string"==typeof b&&k[b]?k[b].call(this,c.cells[a],d.cells[a]):k.orderbyasc.call(this,c.cells[a],d.cells[a])});for(var l=c.ownerDocument.createDocumentFragment(),m=0,i=e.length;m<i;m++)l.appendChild(e[m]);var n=c.getElementsByTagName("tbody")[0];g?n.insertBefore(l,d[g-h.endRowIndex+h.beginRowIndex-1]):n.appendChild(l)},UE.plugins.tablesort=function(){var a=this,b=UE.UETable,c=function(a){return b.getUETable(a)},d=function(a){return b.getTableItemsByRange(a)};a.ready(function(){utils.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+a.options.themePath+a.options.theme+"/images/sortable.png);}",a.document),a.addListener("afterexeccommand",function(a,b){"mergeright"!=b&&"mergedown"!=b&&"mergecells"!=b||this.execCommand("disablesort")})}),UE.commands.sorttable={queryCommandState:function(){var a=this,b=d(a);if(!b.cell)return-1;for(var c,e=b.table,f=e.getElementsByTagName("td"),g=0;c=f[g++];)if(1!=c.rowSpan||1!=c.colSpan)return-1;return 0},execCommand:function(a,b){var e=this,f=e.selection.getRange(),g=f.createBookmark(!0),h=d(e),i=h.cell,j=c(h.table),k=j.getCellInfo(i);j.sortTable(k.cellIndex,b),f.moveToBookmark(g);try{f.select()}catch(l){}}},UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(a){var b=d(this).table;if(b&&"enablesort"==a)for(var c=domUtils.getElementsByTagName(b,"th td"),e=0;e<c.length;e++)if(c[e].getAttribute("colspan")>1||c[e].getAttribute("rowspan")>1)return-1;return b?"enablesort"==a^"sortEnabled"!=b.getAttribute("data-sort")?-1:0:-1},execCommand:function(a){var b=d(this).table;b.setAttribute("data-sort","enablesort"==a?"sortEnabled":"sortDisabled"),"enablesort"==a?domUtils.addClass(b,"sortEnabled"):domUtils.removeClasses(b,"sortEnabled")}}},UE.plugins.contextmenu=function(){var a=this;if(a.setOpt("enableContextMenu",!0),a.getOpt("enableContextMenu")!==!1){var b,c=a.getLang("contextMenu"),d=a.options.contextMenu||[{label:c.selectall,cmdName:"selectall"},{label:c.cleardoc,cmdName:"cleardoc",exec:function(){confirm(c.confirmclear)&&this.execCommand("cleardoc")}},"-",{label:c.unlink,cmdName:"unlink"},"-",{group:c.paragraph,icon:"justifyjustify",subMenu:[{label:c.justifyleft,cmdName:"justify",value:"left"},{label:c.justifyright,cmdName:"justify",value:"right"},{label:c.justifycenter,cmdName:"justify",value:"center"},{label:c.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:c.table,icon:"table",subMenu:[{label:c.inserttable,cmdName:"inserttable"},{label:c.deletetable,cmdName:"deletetable"},"-",{label:c.deleterow,cmdName:"deleterow"},{label:c.deletecol,cmdName:"deletecol"},{label:c.insertcol,cmdName:"insertcol"},{label:c.insertcolnext,cmdName:"insertcolnext"},{label:c.insertrow,cmdName:"insertrow"},{label:c.insertrownext,cmdName:"insertrownext"},"-",{label:c.insertcaption,cmdName:"insertcaption"},{label:c.deletecaption,cmdName:"deletecaption"},{label:c.inserttitle,cmdName:"inserttitle"},{label:c.deletetitle,cmdName:"deletetitle"},{label:c.inserttitlecol,cmdName:"inserttitlecol"},{label:c.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:c.mergecells,cmdName:"mergecells"},{label:c.mergeright,cmdName:"mergeright"},{label:c.mergedown,cmdName:"mergedown"},"-",{label:c.splittorows,cmdName:"splittorows"},{label:c.splittocols,cmdName:"splittocols"},{label:c.splittocells,cmdName:"splittocells"},"-",{label:c.averageDiseRow,cmdName:"averagedistributerow"},{label:c.averageDisCol,cmdName:"averagedistributecol"},"-",{label:c.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this),this.getDialog("edittd").open()}},{label:c.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this),this.getDialog("edittable").open()}},{label:c.setbordervisible,cmdName:"setbordervisible"}]},{group:c.tablesort,icon:"tablesort",subMenu:[{label:c.enablesort,cmdName:"enablesort"},{label:c.disablesort,cmdName:"disablesort"},"-",{label:c.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:c.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:c.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:c.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:c.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:c.borderbk,icon:"borderBack",subMenu:[{label:c.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:c.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:c.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:c.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:c.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:c.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:c.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:c.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:c.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:c.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:c.tableright,value:"right"}]},"-",{label:c.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:c.insertparagraphafter,cmdName:"insertparagraph"},{label:c.copy,cmdName:"copy"},{label:c.paste,cmdName:"paste"}];if(d.length){var e=UE.ui.uiUtils;a.addListener("contextmenu",function(f,g){var h=e.getViewportOffsetByEvent(g);a.fireEvent("beforeselectionchange"),b&&b.destroy();for(var i,j=0,k=[];i=d[j];j++){var l;!function(b){function d(){switch(b.icon){case"table":return a.getLang("contextMenu.table");case"justifyjustify":return a.getLang("contextMenu.paragraph");case"aligntd":return a.getLang("contextMenu.aligntd");case"aligntable":return a.getLang("contextMenu.aligntable");case"tablesort":return c.tablesort;case"borderBack":return c.borderbk;default:return""}}if("-"==b)(l=k[k.length-1])&&"-"!==l&&k.push("-");else if(b.hasOwnProperty("group")){for(var e,f=0,g=[];e=b.subMenu[f];f++)!function(b){"-"==b?(l=g[g.length-1])&&"-"!==l?g.push("-"):g.splice(g.length-1):(a.commands[b.cmdName]||UE.commands[b.cmdName]||b.query)&&(b.query?b.query():a.queryCommandState(b.cmdName))>-1&&g.push({label:b.label||a.getLang("contextMenu."+b.cmdName+(b.value||""))||"",className:"edui-for-"+b.cmdName+(b.className?" edui-for-"+b.cmdName+"-"+b.className:""),onclick:b.exec?function(){b.exec.call(a)}:function(){a.execCommand(b.cmdName,b.value)}})}(e);g.length&&k.push({label:d(),className:"edui-for-"+b.icon,subMenu:{items:g,editor:a}})}else(a.commands[b.cmdName]||UE.commands[b.cmdName]||b.query)&&(b.query?b.query.call(a):a.queryCommandState(b.cmdName))>-1&&k.push({label:b.label||a.getLang("contextMenu."+b.cmdName),className:"edui-for-"+(b.icon?b.icon:b.cmdName+(b.value||"")),onclick:b.exec?function(){b.exec.call(a)}:function(){a.execCommand(b.cmdName,b.value)}})}(i)}if("-"==k[k.length-1]&&k.pop(),b=new UE.ui.Menu({items:k,className:"edui-contextmenu",editor:a}),b.render(),b.showAt(h),a.fireEvent("aftershowcontextmenu",b),domUtils.preventDefault(g),browser.ie){var m;try{m=a.selection.getNative().createRange()}catch(n){return}if(m.item){var o=new dom.Range(a.document);o.selectNode(m.item(0)).select(!0,!0)}}}),a.addListener("aftershowcontextmenu",function(b,c){if(a.zeroclipboard){var d=c.items;for(var e in d)"edui-for-copy"==d[e].className&&a.zeroclipboard.clip(d[e].getDom())}})}}},UE.plugins.shortcutmenu=function(){var a,b=this,c=b.options.shortcutMenu||[];c.length&&(b.addListener("contextmenu mouseup",function(b,d){var e=this,f={type:b,target:d.target||d.srcElement,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY};if(setTimeout(function(){var d=e.selection.getRange();d.collapsed!==!1&&"contextmenu"!=b||(a||(a=new baidu.editor.ui.ShortCutMenu({editor:e,items:c,theme:e.options.theme,className:"edui-shortcutmenu"}),a.render(),e.fireEvent("afterrendershortcutmenu",a)),a.show(f,!!UE.plugins.contextmenu))}),"contextmenu"==b&&(domUtils.preventDefault(d),browser.ie9below)){var g;try{g=e.selection.getNative().createRange()}catch(d){return}if(g.item){var h=new dom.Range(e.document);h.selectNode(g.item(0)).select(!0,!0)}}}),b.addListener("keydown",function(b){"keydown"==b&&a&&!a.isHidden&&a.hide()}))},UE.plugins.basestyle=function(){var a={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},b=function(a,b){return domUtils.filterNodeList(a.selection.getStartElementPath(),b)},c=this;c.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"}),c.addInputRule(function(a){utils.each(a.getNodesByTagName("b i"),function(a){switch(a.tagName){case"b":a.tagName="strong";break;case"i":a.tagName="em"}})});for(var d in a)!function(a,d){c.commands[a]={execCommand:function(a){var e=c.selection.getRange(),f=b(this,d);if(e.collapsed){if(f){var g=c.document.createTextNode("");e.insertNode(g).removeInlineStyle(d),e.setStartBefore(g),domUtils.remove(g)}else{var h=e.document.createElement(d[0]);"superscript"!=a&&"subscript"!=a||(g=c.document.createTextNode(""),e.insertNode(g).removeInlineStyle(["sub","sup"]).setStartBefore(g).collapse(!0)),e.insertNode(h).setStart(h,0)}e.collapse(!0)}else"superscript"!=a&&"subscript"!=a||f&&f.tagName.toLowerCase()==a||e.removeInlineStyle(["sub","sup"]),f?e.removeInlineStyle(d):e.applyInlineStyle(d[0]);e.select()},queryCommandState:function(){return b(this,d)?1:0}}}(d,a[d])},UE.plugins.elementpath=function(){var a,b,c=this;c.setOpt("elementPathEnabled",!0),c.options.elementPathEnabled&&(c.commands.elementpath={execCommand:function(d,e){var f=b[e],g=c.selection.getRange();a=1*e,g.selectNode(f).select()},queryCommandValue:function(){var c=[].concat(this.selection.getStartElementPath()).reverse(),d=[];b=c;for(var e,f=0;e=c[f];f++)if(3!=e.nodeType){var g=e.tagName.toLowerCase();if("img"==g&&e.getAttribute("anchorname")&&(g="anchor"),d[f]=g,a==f){a=-1;break}}return d}})},UE.plugins.formatmatch=function(){function a(f,g){function h(a){return m&&a.selectNode(m),a.applyInlineStyle(d[d.length-1].tagName,null,d)}if(browser.webkit)var i="IMG"==g.target.tagName?g.target:null;c.undoManger&&c.undoManger.save();var j=c.selection.getRange(),k=i||j.getClosedNode();if(b&&k&&"IMG"==k.tagName)k.style.cssText+=";float:"+(b.style.cssFloat||b.style.styleFloat||"none")+";display:"+(b.style.display||"inline"),b=null;else if(!b){var l=j.collapsed;if(l){var m=c.document.createTextNode("match");j.insertNode(m).select()}c.__hasEnterExecCommand=!0;var n=c.options.removeFormatAttributes;c.options.removeFormatAttributes="",c.execCommand("removeformat"),c.options.removeFormatAttributes=n,c.__hasEnterExecCommand=!1,j=c.selection.getRange(),d.length&&h(j),m&&j.setStartBefore(m).collapse(!0),j.select(),m&&domUtils.remove(m)}c.undoManger&&c.undoManger.save(),c.removeListener("mouseup",a),e=0}var b,c=this,d=[],e=0;c.addListener("reset",function(){d=[],e=0}),c.commands.formatmatch={execCommand:function(f){if(e)return e=0,d=[],void c.removeListener("mouseup",a);var g=c.selection.getRange();if(b=g.getClosedNode(),!b||"IMG"!=b.tagName){g.collapse(!0).shrinkBoundary();var h=g.startContainer;d=domUtils.findParents(h,!0,function(a){return!domUtils.isBlockElm(a)&&1==a.nodeType});for(var i,j=0;i=d[j];j++)if("A"==i.tagName){d.splice(j,1);break}}c.addListener("mouseup",a),e=1},queryCommandState:function(){return e},notNeedUndo:1}},UE.plugin.register("searchreplace",function(){function a(a,b,c){var d=b.searchStr;b.dir==-1&&(a=a.split("").reverse().join(""),d=d.split("").reverse().join(""),c=a.length-c);for(var e,f=new RegExp(d,"g"+(b.casesensitive?"":"i"));e=f.exec(a);)if(e.index>=c)return b.dir==-1?a.length-e.index-b.searchStr.length:e.index;return-1}function b(b,c,d){var e,f,h=d.all||1==d.dir?"getNextDomNode":"getPreDomNode";domUtils.isBody(b)&&(b=b.firstChild);for(var i=1;b;){if(e=3==b.nodeType?b.nodeValue:b[browser.ie?"innerText":"textContent"],f=a(e,d,c),i=0,f!=-1)return{node:b,index:f};for(b=domUtils[h](b);b&&g[b.nodeName.toLowerCase()];)b=domUtils[h](b,!0);b&&(c=d.dir==-1?(3==b.nodeType?b.nodeValue:b[browser.ie?"innerText":"textContent"]).length:0)}}function c(a,b,d){for(var e,f=0,g=a.firstChild,h=0;g;){if(3==g.nodeType){if(h=g.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,f+=h,f>=b)return{node:g,index:h-(f-b)}}else if(!dtd.$empty[g.tagName]&&(h=g[browser.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,f+=h,f>=b&&(e=c(g,h-(f-b),d))))return e;g=domUtils.getNextDomNode(g)}}function d(a,d){var f,g=a.selection.getRange(),h=d.searchStr,i=a.document.createElement("span");if(i.innerHTML="$$ueditor_searchreplace_key$$",g.shrinkBoundary(!0),!g.collapsed){g.select();var j=a.selection.getText();if(new RegExp("^"+d.searchStr+"$",d.casesensitive?"":"i").test(j)){if(void 0!=d.replaceStr)return e(g,d.replaceStr),g.select(),!0;g.collapse(d.dir==-1)}}g.insertNode(i),g.enlargeToBlockElm(!0),f=g.startContainer;var k=f[browser.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");g.setStartBefore(i),domUtils.remove(i);var l=b(f,k,d);if(l){var m=c(l.node,l.index,h),n=c(l.node,l.index+h.length,h);return g.setStart(m.node,m.index).setEnd(n.node,n.index),void 0!==d.replaceStr&&e(g,d.replaceStr),g.select(),!0}g.setCursor()}function e(a,b){b=f.document.createTextNode(b),a.deleteContents().insertNode(b)}var f=this,g={table:1,tbody:1,tr:1,ol:1,ul:1};return{commands:{searchreplace:{execCommand:function(a,b){utils.extend(b,{all:!1,casesensitive:!1,dir:1},!0);var c=0;if(b.all){var e=f.selection.getRange(),g=f.body.firstChild;for(g&&1==g.nodeType?(e.setStart(g,0),e.shrinkBoundary(!0)):3==g.nodeType&&e.setStartBefore(g),e.collapse(!0).select(!0),void 0!==b.replaceStr&&f.fireEvent("saveScene");d(this,b);)c++;c&&f.fireEvent("saveScene")}else void 0!==b.replaceStr&&f.fireEvent("saveScene"),d(this,b)&&c++,c&&f.fireEvent("saveScene");return c},notNeedUndo:1}}}}),UE.plugins.customstyle=function(){var a=this;a.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]}),a.commands.customstyle={execCommand:function(a,b){var c,d,e=this,f=b.tag,g=domUtils.findParent(e.selection.getStart(),function(a){return a.getAttribute("label")},!0),h={};for(var i in b)void 0!==b[i]&&(h[i]=b[i]);if(delete h.tag,g&&g.getAttribute("label")==b.label){if(c=this.selection.getRange(),d=c.createBookmark(),c.collapsed)if(dtd.$block[g.tagName]){var j=e.document.createElement("p");domUtils.moveChild(g,j),g.parentNode.insertBefore(j,g),domUtils.remove(g)}else domUtils.remove(g,!0);else{var k=domUtils.getCommonAncestor(d.start,d.end),l=domUtils.getElementsByTagName(k,f);new RegExp(f,"i").test(k.tagName)&&l.push(k);for(var m,n=0;m=l[n++];)if(m.getAttribute("label")==b.label){var o=domUtils.getPosition(m,d.start),p=domUtils.getPosition(m,d.end);if((o&domUtils.POSITION_FOLLOWING||o&domUtils.POSITION_CONTAINS)&&(p&domUtils.POSITION_PRECEDING||p&domUtils.POSITION_CONTAINS)&&dtd.$block[f]){var j=e.document.createElement("p");domUtils.moveChild(m,j),m.parentNode.insertBefore(j,m)}domUtils.remove(m,!0)}g=domUtils.findParent(k,function(a){return a.getAttribute("label")==b.label},!0),g&&domUtils.remove(g,!0)}c.moveToBookmark(d).select()}else if(dtd.$block[f]){if(this.execCommand("paragraph",f,h,"customstyle"),c=e.selection.getRange(),!c.collapsed){c.collapse(),g=domUtils.findParent(e.selection.getStart(),function(a){return a.getAttribute("label")==b.label},!0);var q=e.document.createElement("p");domUtils.insertAfter(g,q),domUtils.fillNode(e.document,q),c.setStart(q,0).setCursor()}}else{if(c=e.selection.getRange(),c.collapsed)return g=e.document.createElement(f),domUtils.setAttributes(g,h),void c.insertNode(g).setStart(g,0).setCursor();d=c.createBookmark(),c.applyInlineStyle(f,h).moveToBookmark(d).select()}},queryCommandValue:function(){var a=domUtils.filterNodeList(this.selection.getStartElementPath(),function(a){return a.getAttribute("label")});return a?a.getAttribute("label"):""}},a.addListener("keyup",function(b,c){var d=c.keyCode||c.which;if(32==d||13==d){var e=a.selection.getRange();if(e.collapsed){var f=domUtils.findParent(a.selection.getStart(),function(a){return a.getAttribute("label")},!0);if(f&&dtd.$block[f.tagName]&&domUtils.isEmptyNode(f)){var g=a.document.createElement("p");domUtils.insertAfter(f,g),domUtils.fillNode(a.document,g),domUtils.remove(f),e.setStart(g,0).setCursor()}}}})},UE.plugins.catchremoteimage=function(){var me=this,ajax=UE.ajax;me.options.catchRemoteImageEnable!==!1&&(me.setOpt({catchRemoteImageEnable:!1}),me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")}),me.addListener("catchRemoteImage",function(){function catchremoteimage(a,b){var c=utils.serializeParam(me.queryCommandValue("serverparam"))||"",d=utils.formatUrl(catcherActionUrl+(catcherActionUrl.indexOf("?")==-1?"?":"&")+c),e=utils.isCrossDomainUrl(d),f={method:"POST",dataType:e?"jsonp":"",timeout:6e4,onsuccess:b.success,onerror:b.error};f[catcherFieldName]=a,ajax.request(d,f)}for(var catcherLocalDomain=me.getOpt("catcherLocalDomain"),catcherActionUrl=me.getActionUrl(me.getOpt("catcherActionName")),catcherUrlPrefix=me.getOpt("catcherUrlPrefix"),catcherFieldName=me.getOpt("catcherFieldName"),remoteImages=[],imgs=domUtils.getElementsByTagName(me.document,"img"),test=function(a,b){if(a.indexOf(location.host)!=-1||/(^\.)|(^\/)/.test(a))return!0;if(b)for(var c,d=0;c=b[d++];)if(a.indexOf(c)!==-1)return!0;return!1},i=0,ci;ci=imgs[i++];)if(!ci.getAttribute("word_img")){var src=ci.getAttribute("_src")||ci.src||"";/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)&&remoteImages.push(src)}remoteImages.length&&catchremoteimage(remoteImages,{success:function(r){try{var info=void 0!==r.state?r:eval("("+r.responseText+")")}catch(e){return}var i,j,ci,cj,oldSrc,newSrc,list=info.list;for(i=0;ci=imgs[i++];)for(oldSrc=ci.getAttribute("_src")||ci.src||"",j=0;cj=list[j++];)if(oldSrc==cj.source&&"SUCCESS"==cj.state){newSrc=catcherUrlPrefix+cj.url,domUtils.setAttributes(ci,{src:newSrc,_src:newSrc});break}me.fireEvent("catchremotesuccess")},error:function(){me.fireEvent("catchremoteerror")}})}))},UE.plugin.register("snapscreen",function(){function getLocation(a){var b,c=document.createElement("a"),d=utils.serializeParam(me.queryCommandValue("serverparam"))||"";return c.href=a,browser.ie&&(c.href=c.href),b=c.search,d&&(b=b+(b.indexOf("?")==-1?"?":"&")+d,b=b.replace(/[&]+/gi,"&")),{port:c.port,hostname:c.hostname,path:c.pathname+b||+c.hash}}var me=this,snapplugin;return{commands:{snapscreen:{execCommand:function(cmd){function onSuccess(rs){try{if(rs=eval("("+rs+")"),"SUCCESS"==rs.state){var opt=me.options;me.execCommand("insertimage",{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||"",floatStyle:opt.snapscreenImgAlign})}else alert(rs.state)}catch(e){alert(lang.callBackErrorMsg)}}var url,local,res,lang=me.getLang("snapScreen_plugin");if(!snapplugin){var container=me.container,doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement("object");try{snapplugin.type="application/x-pluginbaidusnap"}catch(e){return}snapplugin.style.cssText="position:absolute;left:-9999px;width:0;height:0;",snapplugin.setAttribute("width","0"),snapplugin.setAttribute("height","0"),container.appendChild(snapplugin)}url=me.getActionUrl(me.getOpt("snapscreenActionName")),local=getLocation(url),setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(a){return void me.ui._dialogs.snapscreenDialog.open()}onSuccess(res)},50)},queryCommandState:function(){return navigator.userAgent.indexOf("Windows",0)!=-1?0:-1}}}}}),UE.commands.insertparagraph={execCommand:function(a,b){for(var c,d=this,e=d.selection.getRange(),f=e.startContainer;f&&!domUtils.isBody(f);)c=f,f=f.parentNode;if(c){var g=d.document.createElement("p");b?c.parentNode.insertBefore(g,c):c.parentNode.insertBefore(g,c.nextSibling),domUtils.fillNode(d.document,g),e.setStart(g,0).setCursor(!1,!0)}}},UE.plugin.register("webapp",function(){function a(a,c){return c?'<iframe class="edui-faked-webapp" title="'+a.title+'" '+(a.align&&!a.cssfloat?'align="'+a.align+'"':"")+(a.cssfloat?'style="float:'+a.cssfloat+'"':"")+'width="'+a.width+'" height="'+a.height+'"  scrolling="no" frameborder="0" src="'+a.url+'" logo_url = "'+a.logo+'"></iframe>':'<img title="'+a.title+'" width="'+a.width+'" height="'+a.height+'" src="'+b.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+a.logo+'" style="background:url('+a.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+a.url+'" '+(a.align&&!a.cssfloat?'align="'+a.align+'"':"")+(a.cssfloat?'style="float:'+a.cssfloat+'"':"")+"/>"}var b=this;return{outputRule:function(b){utils.each(b.getNodesByTagName("img"),function(b){var c;if("edui-faked-webapp"==b.getAttr("class")){c=a({title:b.getAttr("title"),width:b.getAttr("width"),height:b.getAttr("height"),align:b.getAttr("align"),cssfloat:b.getStyle("float"),url:b.getAttr("_url"),logo:b.getAttr("_logo_url")},!0);var d=UE.uNode.createElement(c);b.parentNode.replaceChild(d,b)}})},inputRule:function(b){utils.each(b.getNodesByTagName("iframe"),function(b){if("edui-faked-webapp"==b.getAttr("class")){var c=UE.uNode.createElement(a({title:b.getAttr("title"),width:b.getAttr("width"),height:b.getAttr("height"),align:b.getAttr("align"),cssfloat:b.getStyle("float"),url:b.getAttr("src"),logo:b.getAttr("logo_url")}));b.parentNode.replaceChild(c,b)}})},commands:{webapp:{execCommand:function(b,c){var d=this,e=a(utils.extend(c,{align:"none"}),!1);d.execCommand("inserthtml",e)},queryCommandState:function(){var a=this,b=a.selection.getRange().getClosedNode(),c=b&&"edui-faked-webapp"==b.className;return c?1:0}}}}}),UE.plugins.template=function(){UE.commands.template={execCommand:function(a,b){b.html&&this.execCommand("inserthtml",b.html)}},this.addListener("click",function(a,b){var c=b.target||b.srcElement,d=this.selection.getRange(),e=domUtils.findParent(c,function(a){if(a.className&&domUtils.hasClass(a,"ue_t"))return a},!0);e&&d.selectNode(e).shrinkBoundary().select()}),this.addListener("keydown",function(a,b){var c=this.selection.getRange();if(!c.collapsed&&!(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)){var d=domUtils.findParent(c.startContainer,function(a){if(a.className&&domUtils.hasClass(a,"ue_t"))return a},!0);d&&domUtils.removeClasses(d,["ue_t"])}})},UE.plugin.register("music",function(){function a(a,c,d,e,f,g){return g?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+a+'" width="'+c+'" height="'+d+'" '+(e&&!f?'align="'+e+'"':"")+(f?'style="float:'+f+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':"<img "+(e&&!f?'align="'+e+'"':"")+(f?'style="float:'+f+'"':"")+' width="'+c+'" height="'+d+'" _url="'+a+'" class="edui-faked-music" src="'+b.options.langPath+b.options.lang+'/images/music.png" />'}var b=this;return{outputRule:function(b){utils.each(b.getNodesByTagName("img"),function(b){var c;if("edui-faked-music"==b.getAttr("class")){var d=b.getStyle("float"),e=b.getAttr("align");c=a(b.getAttr("_url"),b.getAttr("width"),b.getAttr("height"),e,d,!0);var f=UE.uNode.createElement(c);b.parentNode.replaceChild(f,b)}})},inputRule:function(b){utils.each(b.getNodesByTagName("embed"),function(b){if("edui-faked-music"==b.getAttr("class")){var c=b.getStyle("float"),d=b.getAttr("align");html=a(b.getAttr("src"),b.getAttr("width"),b.getAttr("height"),d,c,!1);var e=UE.uNode.createElement(html);b.parentNode.replaceChild(e,b)}})},commands:{music:{execCommand:function(b,c){var d=this,e=a(c.url,c.width||400,c.height||95,"none",!1);d.execCommand("inserthtml",e)},queryCommandState:function(){var a=this,b=a.selection.getRange().getClosedNode(),c=b&&"edui-faked-music"==b.className;return c?1:0}}}}}),UE.plugin.register("autoupload",function(){function a(a,b){var c,d,e,f,g,h,i,j,k=b,l=/image\/\w+/i.test(a.type)?"image":"file",m="loading_"+(+new Date).toString(36);if(c=k.getOpt(l+"FieldName"),d=k.getOpt(l+"UrlPrefix"),e=k.getOpt(l+"MaxSize"),f=k.getOpt(l+"AllowFiles"),g=k.getActionUrl(k.getOpt(l+"ActionName")),i=function(a){var b=k.document.getElementById(m);b&&domUtils.remove(b),k.fireEvent("showmessage",{id:m,content:a,type:"error",timeout:4e3})},"image"==l?(h='<img class="loadingclass" id="'+m+'" src="'+k.options.themePath+k.options.theme+'/images/spacer.gif" title="'+(k.getLang("autoupload.loading")||"")+'" >',j=function(a){var b=d+a.url,c=k.document.getElementById(m);c&&(c.setAttribute("src",b),c.setAttribute("_src",b),c.setAttribute("title",a.title||""),c.setAttribute("alt",a.original||""),c.removeAttribute("id"),domUtils.removeClasses(c,"loadingclass"))}):(h='<p><img class="loadingclass" id="'+m+'" src="'+k.options.themePath+k.options.theme+'/images/spacer.gif" title="'+(k.getLang("autoupload.loading")||"")+'" ></p>',j=function(a){var b=d+a.url,c=k.document.getElementById(m),e=k.selection.getRange(),f=e.createBookmark();e.selectNode(c).select(),k.execCommand("insertfile",{url:b}),e.moveToBookmark(f).select()}),k.execCommand("inserthtml",h),!k.getOpt(l+"ActionName"))return void i(k.getLang("autoupload.errorLoadConfig"));if(a.size>e)return void i(k.getLang("autoupload.exceedSizeError"));var n=a.name?a.name.substr(a.name.lastIndexOf(".")):"";if(n&&"image"!=l||f&&(f.join("")+".").indexOf(n.toLowerCase()+".")==-1)return void i(k.getLang("autoupload.exceedTypeError"));var o=new XMLHttpRequest,p=new FormData,q=utils.serializeParam(k.queryCommandValue("serverparam"))||"",r=utils.formatUrl(g+(g.indexOf("?")==-1?"?":"&")+q);p.append(c,a,a.name||"blob."+a.type.substr("image/".length)),p.append("type","ajax"),o.open("post",r,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.addEventListener("load",function(a){try{var b=new Function("return "+utils.trim(a.target.response))();"SUCCESS"==b.state&&b.url?j(b):i(b.state)}catch(c){i(k.getLang("autoupload.loadError"))}}),o.send(p)}function b(a){return a.clipboardData&&a.clipboardData.items&&1==a.clipboardData.items.length&&/^image\//.test(a.clipboardData.items[0].type)?a.clipboardData.items:null}function c(a){return a.dataTransfer&&a.dataTransfer.files?a.dataTransfer.files:null}return{outputRule:function(a){utils.each(a.getNodesByTagName("img"),function(a){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(a.getAttr("class"))&&a.parentNode.removeChild(a)}),utils.each(a.getNodesByTagName("p"),function(a){/\bloadpara\b/.test(a.getAttr("class"))&&a.parentNode.removeChild(a)})},bindEvents:{ready:function(d){var e=this;window.FormData&&window.FileReader&&(domUtils.on(e.body,"paste drop",function(d){var f,g=!1;if(f="paste"==d.type?b(d):c(d)){for(var h,i=f.length;i--;)h=f[i],h.getAsFile&&(h=h.getAsFile()),h&&h.size>0&&(a(h,e),g=!0);g&&d.preventDefault()}}),domUtils.on(e.body,"dragover",function(a){"Files"==a.dataTransfer.types[0]&&a.preventDefault()}),utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document))}}}}),UE.plugin.register("autosave",function(){function a(a){var f;if(!(new Date-c<d)){if(!a.hasContents())return void(e&&b.removePreferences(e));c=new Date,a._saveFlag=null,f=b.body.innerHTML,a.fireEvent("beforeautosave",{content:f})!==!1&&(b.setPreferences(e,f),a.fireEvent("afterautosave",{content:f}))}}var b=this,c=new Date,d=20,e=null;return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var a="-drafts-data",c=null;c=b.key?b.key+a:(b.container.parentNode.id||"ue-common")+a,e=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+c},contentchange:function(){e&&(b._saveFlag&&window.clearTimeout(b._saveFlag),b.options.saveInterval>0?b._saveFlag=window.setTimeout(function(){a(b)},b.options.saveInterval):a(b))}},commands:{clearlocaldata:{execCommand:function(a,c){e&&b.getPreferences(e)&&b.removePreferences(e)},notNeedUndo:!0,ignoreContentChange:!0},getlocaldata:{execCommand:function(a,c){return e?b.getPreferences(e)||"":""},notNeedUndo:!0,ignoreContentChange:!0},drafts:{execCommand:function(a,c){e&&(b.body.innerHTML=b.getPreferences(e)||"<p>"+domUtils.fillHtml+"</p>",b.focus(!0))},queryCommandState:function(){return e?null===b.getPreferences(e)?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}}),UE.plugin.register("charts",function(){function a(a){var b=null,c=0;if(a.rows.length<2)return!1;if(a.rows[0].cells.length<2)return!1;b=a.rows[0].cells,c=b.length;for(var d,e=0;d=b[e];e++)if("th"!==d.tagName.toLowerCase())return!1;for(var f,e=1;f=a.rows[e];e++){if(f.cells.length!=c)return!1;if("th"!==f.cells[0].tagName.toLowerCase())return!1;for(var d,g=1;d=f.cells[g];g++){var h=utils.trim(d.innerText||d.textContent||"");if(h=h.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,""),!/^\d*\.?\d+$/.test(h))return!1}}return!0}var b=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(c,d){var e=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0),f=[],g={};if(!e)return!1;if(!a(e))return b.fireEvent("chartserror"),!1;g.title=d.title||"",g.subTitle=d.subTitle||"",g.xTitle=d.xTitle||"",g.yTitle=d.yTitle||"",g.suffix=d.suffix||"",g.tip=d.tip||"",g.dataFormat=d.tableDataFormat||"",g.chartType=d.chartType||0;for(var h in g)g.hasOwnProperty(h)&&f.push(h+":"+g[h]);e.setAttribute("data-chart",f.join(";")),domUtils.addClass(e,"edui-charts-table")},queryCommandState:function(b,c){
var d=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0);return d&&a(d)?0:-1}}},inputRule:function(a){utils.each(a.getNodesByTagName("table"),function(a){void 0!==a.getAttr("data-chart")&&a.setAttr("style")})},outputRule:function(a){utils.each(a.getNodesByTagName("table"),function(a){void 0!==a.getAttr("data-chart")&&a.setAttr("style","display: none;")})}}}),UE.plugin.register("section",function(){function a(a){this.tag="",this.level=-1,this.dom=null,this.nextSection=null,this.previousSection=null,this.parentSection=null,this.startAddress=[],this.endAddress=[],this.children=[]}function b(b){var c=new a;return utils.extend(c,b)}function c(a,b){for(var c=b,d=0;d<a.length;d++){if(!c.childNodes)return null;c=c.childNodes[a[d]]}return c}var d=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){d.fireEvent("updateSections")}},bindEvents:{ready:function(){d.fireEvent("updateSections"),domUtils.on(d.body,"drop paste",function(){d.fireEvent("updateSections")})},afterexeccommand:function(a,b){"paragraph"==b&&d.fireEvent("updateSections")},keyup:function(a,b){var c=this,d=c.selection.getRange();if(1!=d.collapsed)c.fireEvent("updateSections");else{var e=b.keyCode||b.which;13!=e&&8!=e&&46!=e||c.fireEvent("updateSections")}}},commands:{getsections:{execCommand:function(a,c){function d(a){for(var b=0;b<f.length;b++)if(f[b](a))return b;return-1}function e(a,c){for(var f,g,i,k=null,l=a.childNodes,m=0,n=l.length;m<n;m++)if(i=l[m],f=d(i),f>=0){var o=h.selection.getRange().selectNode(i).createAddress(!0).startAddress,p=b({tag:i.tagName,title:i.innerText||i.textContent||"",level:f,dom:i,startAddress:utils.clone(o,[]),endAddress:utils.clone(o,[]),children:[]});for(j.nextSection=p,p.previousSection=j,g=j;f<=g.level;)g=g.parentSection;p.parentSection=g,g.children.push(p),k=j=p}else 1===i.nodeType&&e(i,c),k&&k.endAddress[k.endAddress.length-1]++}for(var f=c||["h1","h2","h3","h4","h5","h6"],g=0;g<f.length;g++)"string"==typeof f[g]?f[g]=function(a){return function(b){return b.tagName==a.toUpperCase()}}(f[g]):"function"!=typeof f[g]&&(f[g]=function(a){return null});var h=this,i=b({level:-1,title:"root"}),j=i;return e(h.body,i),i},notNeedUndo:!0},movesection:{execCommand:function(a,b,d,e){function f(a,b,c){for(var d=!1,e=!1,f=0;f<a.length&&!(f>=c.length);f++){if(c[f]>a[f]){d=!0;break}if(c[f]<a[f])break}for(var f=0;f<b.length&&!(f>=c.length);f++){if(c[f]<a[f]){e=!0;break}if(c[f]>a[f])break}return d&&e}var g,h,i=this;if(b&&d&&d.level!=-1&&(g=e?d.endAddress:d.startAddress,h=c(g,i.body),g&&h&&!f(b.startAddress,b.endAddress,g))){var j,k,l=c(b.startAddress,i.body),m=c(b.endAddress,i.body);if(e)for(j=m;j&&!(domUtils.getPosition(l,j)&domUtils.POSITION_FOLLOWING)&&(k=j.previousSibling,domUtils.insertAfter(h,j),j!=l);)j=k;else for(j=l;j&&!(domUtils.getPosition(j,m)&domUtils.POSITION_FOLLOWING)&&(k=j.nextSibling,h.parentNode.insertBefore(j,h),j!=m);)j=k;i.fireEvent("updateSections")}}},deletesection:{execCommand:function(a,b,c){function d(a){for(var b=e.body,c=0;c<a.length;c++){if(!b.childNodes)return null;b=b.childNodes[a[c]]}return b}var e=this;if(b){var f,g=d(b.startAddress),h=d(b.endAddress),i=g;if(c)domUtils.remove(i);else for(;i&&domUtils.inDoc(h,e.document)&&!(domUtils.getPosition(i,h)&domUtils.POSITION_FOLLOWING);)f=i.nextSibling,domUtils.remove(i),i=f;e.fireEvent("updateSections")}}},selectsection:{execCommand:function(a,b){if(!b&&!b.dom)return!1;var c=this,d=c.selection.getRange(),e={startAddress:utils.clone(b.startAddress,[]),endAddress:utils.clone(b.endAddress,[])};return e.endAddress[e.endAddress.length-1]++,d.moveToAddress(e).select().scrollToView(),!0},notNeedUndo:!0},scrolltosection:{execCommand:function(a,b){if(!b&&!b.dom)return!1;var c=this,d=c.selection.getRange(),e={startAddress:b.startAddress,endAddress:b.endAddress};return e.endAddress[e.endAddress.length-1]++,d.moveToAddress(e).scrollToView(),!0},notNeedUndo:!0}}}}),UE.plugin.register("simpleupload",function(){function a(){var a=b.offsetWidth||20,e=b.offsetHeight||20,f=document.createElement("iframe"),g="display:block;width:"+a+"px;height:"+e+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(f,"load",function(){var b,h,i,j=(+new Date).toString(36);h=f.contentDocument||f.contentWindow.document,i=h.body,b=h.createElement("div"),b.innerHTML='<form id="edui_form_'+j+'" target="edui_iframe_'+j+'" method="POST" enctype="multipart/form-data" action="'+c.getOpt("serverUrl")+'" style="'+g+'"><input id="edui_input_'+j+'" type="file" accept="image/*" name="'+c.options.imageFieldName+'" style="'+g+'"></form><iframe id="edui_iframe_'+j+'" name="edui_iframe_'+j+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>',b.className="edui-"+c.options.theme,b.id=c.ui.id+"_iframeupload",i.style.cssText=g,i.style.width=a+"px",i.style.height=e+"px",i.appendChild(b),i.parentNode&&(i.parentNode.style.width=a+"px",i.parentNode.style.height=a+"px");var k=h.getElementById("edui_form_"+j),l=h.getElementById("edui_input_"+j),m=h.getElementById("edui_iframe_"+j);domUtils.on(l,"change",function(){function a(){try{var e,f,g,h=(m.contentDocument||m.contentWindow.document).body,i=h.innerText||h.textContent||"";f=new Function("return "+i)(),e=c.options.imageUrlPrefix+f.url,"SUCCESS"==f.state&&f.url?(g=c.document.getElementById(d),g.setAttribute("src",e),g.setAttribute("_src",e),g.setAttribute("title",f.title||""),g.setAttribute("alt",f.original||""),g.removeAttribute("id"),domUtils.removeClasses(g,"loadingclass")):b&&b(f.state)}catch(j){b&&b(c.getLang("simpleupload.loadError"))}k.reset(),domUtils.un(m,"load",a)}function b(a){if(d){var b=c.document.getElementById(d);b&&domUtils.remove(b),c.fireEvent("showmessage",{id:d,content:a,type:"error",timeout:4e3})}}if(l.value){var d="loading_"+(+new Date).toString(36),e=utils.serializeParam(c.queryCommandValue("serverparam"))||"",f=c.getActionUrl(c.getOpt("imageActionName")),g=c.getOpt("imageAllowFiles");if(c.focus(),c.execCommand("inserthtml",'<img class="loadingclass" id="'+d+'" src="'+c.options.themePath+c.options.theme+'/images/spacer.gif" title="'+(c.getLang("simpleupload.loading")||"")+'" >'),!c.getOpt("imageActionName"))return void errorHandler(c.getLang("autoupload.errorLoadConfig"));var h=l.value,i=h?h.substr(h.lastIndexOf(".")):"";if(!i||g&&(g.join("")+".").indexOf(i.toLowerCase()+".")==-1)return void b(c.getLang("simpleupload.exceedTypeError"));domUtils.on(m,"load",a),k.action=utils.formatUrl(f+(f.indexOf("?")==-1?"?":"&")+e),k.submit()}});var n;c.addListener("selectionchange",function(){clearTimeout(n),n=setTimeout(function(){var a=c.queryCommandState("simpleupload");a==-1?l.disabled="disabled":l.disabled=!1},400)}),d=!0}),f.style.cssText=g,b.appendChild(f)}var b,c=this,d=!1;return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},simpleuploadbtnready:function(d,e){b=e,c.afterConfigReady(a)}},outputRule:function(a){utils.each(a.getNodesByTagName("img"),function(a){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(a.getAttr("class"))&&a.parentNode.removeChild(a)})},commands:{simpleupload:{queryCommandState:function(){return d?0:-1}}}}}),UE.plugin.register("serverparam",function(){var a={};return{commands:{serverparam:{execCommand:function(b,c,d){void 0===c||null===c?a={}:utils.isString(c)?void 0===d||null===d?delete a[c]:a[c]=d:utils.isObject(c)?utils.extend(a,c,!0):utils.isFunction(c)&&utils.extend(a,c(),!0)},queryCommandValue:function(){return a||{}}}}}}),UE.plugin.register("insertfile",function(){function a(a){var b=a.substr(a.lastIndexOf(".")+1).toLowerCase(),c={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};return c[b]?c[b]:c.txt}var b=this;return{commands:{insertfile:{execCommand:function(c,d){d=utils.isArray(d)?d:[d];var e,f,g,h,i="",j=b.getOpt("UEDITOR_HOME_URL"),k=j+("/"==j.substr(j.length-1)?"":"/")+"dialogs/attachment/fileTypeImages/";for(e=0;e<d.length;e++)f=d[e],g=k+a(f.url),h=f.title||f.url.substr(f.url.lastIndexOf("/")+1),i+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+g+'" _src="'+g+'" /><a style="font-size:12px; color:#0066cc;" href="'+f.url+'" title="'+h+'">'+h+"</a></p>";b.execCommand("insertHtml",i)}}}}}),UE.plugins.xssFilter=function(){function a(a){var b=a.tagName,d=a.attrs;return c.hasOwnProperty(b)?void UE.utils.each(d,function(d,e){c[b].indexOf(e)===-1&&a.setAttr(e)}):(a.parentNode.removeChild(a),!1)}var b=UEDITOR_CONFIG,c=b.whitList;c&&b.xssFilterRules&&(this.options.filterRules=function(){var b={};return UE.utils.each(c,function(c,d){b[d]=function(b){return a(b)}}),b}());var d=[];UE.utils.each(c,function(a,b){d.push(b)}),c&&b.inputXssFilter&&this.addInputRule(function(b){b.traversal(function(b){return"element"===b.type&&void a(b)})}),c&&b.outputXssFilter&&this.addOutputRule(function(b){b.traversal(function(b){return"element"===b.type&&void a(b)})})};var baidu=baidu||{};baidu.editor=baidu.editor||{},UE.ui=baidu.editor.ui={},function(){function a(){var a=document.getElementById("edui_fixedlayer");i.setViewportOffset(a,{left:0,top:0})}function b(b){d.on(window,"scroll",a),d.on(window,"resize",baidu.editor.utils.defer(a,0,!0))}var c=baidu.editor.browser,d=baidu.editor.dom.domUtils,e="$EDITORUI",f=window[e]={},g="ID"+e,h=0,i=baidu.editor.ui.uiUtils={uid:function(a){return a?a[g]||(a[g]=++h):++h},hook:function(a,b){var c;return a&&a._callbacks?c=a:(c=function(){var b;a&&(b=a.apply(this,arguments));for(var d=c._callbacks,e=d.length;e--;){var f=d[e].apply(this,arguments);void 0===b&&(b=f)}return b},c._callbacks=[]),c._callbacks.push(b),c},createElementByHtml:function(a){var b=document.createElement("div");return b.innerHTML=a,b=b.firstChild,b.parentNode.removeChild(b),b},getViewportElement:function(){return c.ie&&c.quirks?document.body:document.documentElement},getClientRect:function(a){var b;try{b=a.getBoundingClientRect()}catch(c){b={left:0,top:0,height:0,width:0}}for(var e,f={left:Math.round(b.left),top:Math.round(b.top),height:Math.round(b.bottom-b.top),width:Math.round(b.right-b.left)};(e=a.ownerDocument)!==document&&(a=d.getWindow(e).frameElement);)b=a.getBoundingClientRect(),f.left+=b.left,f.top+=b.top;return f.bottom=f.top+f.height,f.right=f.left+f.width,f},getViewportRect:function(){var a=i.getViewportElement(),b=0|(window.innerWidth||a.clientWidth),c=0|(window.innerHeight||a.clientHeight);return{left:0,top:0,height:c,width:b,bottom:c,right:b}},setViewportOffset:function(a,b){var c=i.getFixedLayer();a.parentNode===c?(a.style.left=b.left+"px",a.style.top=b.top+"px"):d.setViewportOffset(a,b)},getEventOffset:function(a){var b=a.target||a.srcElement,c=i.getClientRect(b),d=i.getViewportOffsetByEvent(a);return{left:d.left-c.left,top:d.top-c.top}},getViewportOffsetByEvent:function(a){var b=a.target||a.srcElement,c=d.getWindow(b).frameElement,e={left:a.clientX,top:a.clientY};if(c&&b.ownerDocument!==document){var f=i.getClientRect(c);e.left+=f.left,e.top+=f.top}return e},setGlobal:function(a,b){return f[a]=b,e+'["'+a+'"]'},unsetGlobal:function(a){delete f[a]},copyAttributes:function(a,b){for(var e=b.attributes,f=e.length;f--;){var g=e[f];"style"==g.nodeName||"class"==g.nodeName||c.ie&&!g.specified||a.setAttribute(g.nodeName,g.nodeValue)}b.className&&d.addClass(a,b.className),b.style.cssText&&(a.style.cssText+=";"+b.style.cssText)},removeStyle:function(a,b){if(a.style.removeProperty)a.style.removeProperty(b);else{if(!a.style.removeAttribute)throw"";a.style.removeAttribute(b)}},contains:function(a,b){return a&&b&&a!==b&&(a.contains?a.contains(b):16&a.compareDocumentPosition(b))},startDrag:function(a,b,c){function d(a){var c=a.clientX-g,d=a.clientY-h;b.ondragmove(c,d,a),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function e(a){c.removeEventListener("mousemove",d,!0),c.removeEventListener("mouseup",e,!0),window.removeEventListener("mouseup",e,!0),b.ondragstop()}function f(){i.releaseCapture(),i.detachEvent("onmousemove",d),i.detachEvent("onmouseup",f),i.detachEvent("onlosecaptrue",f),b.ondragstop()}var c=c||document,g=a.clientX,h=a.clientY;if(c.addEventListener)c.addEventListener("mousemove",d,!0),c.addEventListener("mouseup",e,!0),window.addEventListener("mouseup",e,!0),a.preventDefault();else{var i=a.srcElement;i.setCapture(),i.attachEvent("onmousemove",d),i.attachEvent("onmouseup",f),i.attachEvent("onlosecaptrue",f),a.returnValue=!1}b.ondragstart()},getFixedLayer:function(){var d=document.getElementById("edui_fixedlayer");return null==d&&(d=document.createElement("div"),d.id="edui_fixedlayer",document.body.appendChild(d),c.ie&&c.version<=8?(d.style.position="absolute",b(),setTimeout(a)):d.style.position="fixed",d.style.left="0",d.style.top="0",d.style.width="0",d.style.height="0"),d},makeUnselectable:function(a){if(c.opera||c.ie&&c.version<9){if(a.unselectable="on",a.hasChildNodes())for(var b=0;b<a.childNodes.length;b++)1==a.childNodes[b].nodeType&&i.makeUnselectable(a.childNodes[b])}else void 0!==a.style.MozUserSelect?a.style.MozUserSelect="none":void 0!==a.style.WebkitUserSelect?a.style.WebkitUserSelect="none":void 0!==a.style.KhtmlUserSelect&&(a.style.KhtmlUserSelect="none")}}}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.EventBase,d=baidu.editor.ui.UIBase=function(){};d.prototype={className:"",uiName:"",initOptions:function(a){var c=this;for(var d in a)c[d]=a[d];this.id=this.id||"edui"+b.uid()},initUIBase:function(){this._globalKey=a.unhtml(b.setGlobal(this.id,this))},render:function(a){for(var c,d=this.renderHtml(),e=b.createElementByHtml(d),f=domUtils.getElementsByTagName(e,"*"),g="edui-"+(this.theme||this.editor.options.theme),h=document.getElementById("edui_fixedlayer"),i=0;c=f[i++];)domUtils.addClass(c,g);domUtils.addClass(e,g),h&&(h.className="",domUtils.addClass(h,g));var j=this.getDom();null!=j?(j.parentNode.replaceChild(e,j),b.copyAttributes(e,j)):("string"==typeof a&&(a=document.getElementById(a)),a=a||b.getFixedLayer(),domUtils.addClass(a,g),a.appendChild(e)),this.postRender()},getDom:function(a){return a?document.getElementById(this.id+"_"+a):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(a){var b="edui-"+this.uiName;return a.replace(/##/g,this.id).replace(/%%-/g,this.uiName?b+"-":"").replace(/%%/g,(this.uiName?b:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var a=this.getDom();a&&baidu.editor.dom.domUtils.remove(a),b.unsetGlobal(this.id)}},a.inherits(d,c)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.UIBase,c=baidu.editor.ui.Separator=function(a){this.initOptions(a),this.initSeparator()};c.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},a.inherits(c,b)}(),function(){var a=baidu.editor.utils,b=baidu.editor.dom.domUtils,c=baidu.editor.ui.UIBase,d=baidu.editor.ui.uiUtils,e=baidu.editor.ui.Mask=function(a){this.initOptions(a),this.initUIBase()};e.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var a=this;b.on(window,"resize",function(){setTimeout(function(){a.isHidden()||a._fill()})})},show:function(a){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=a},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(a,b){this.fireEvent("click",a,b)},_fill:function(){var a=this.getDom(),b=d.getViewportRect();a.style.width=b.width+"px",a.style.height=b.height+"px"}},a.inherits(e,c)}(),function(){function a(a,b){for(var c=0;c<g.length;c++){var d=g[c];if(!d.isHidden()&&d.queryAutoHide(b)!==!1){if(a&&/scroll/gi.test(a.type)&&"edui-wordpastepop"==d.className)return;d.hide()}}g.length&&d.editor.fireEvent("afterhidepop")}var b=baidu.editor.utils,c=baidu.editor.ui.uiUtils,d=baidu.editor.dom.domUtils,e=baidu.editor.ui.UIBase,f=baidu.editor.ui.Popup=function(a){this.initOptions(a),this.initPopup()},g=[];f.postHide=a;var h=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];f.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),g.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:e.prototype.postRender,postRender:function(){if(this.content instanceof e&&this.content.postRender(),this.captureWheel&&!this.captured){this.captured=!0;var a=(document.documentElement.clientHeight||document.body.clientHeight)-80,b=this.getDom().offsetHeight,f=c.getClientRect(this.combox.getDom()).top,g=this.getDom("content"),h=this.getDom("body").getElementsByTagName("iframe"),i=this;for(h.length&&(h=h[0]);f+b>a;)b-=30;g.style.height=b+"px",h&&(h.style.height=b+"px"),window.XMLHttpRequest?d.on(g,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,a.wheelDelta?g.scrollTop-=a.wheelDelta/120*60:g.scrollTop-=a.detail/-3*60}):d.on(this.getDom(),"mousewheel",function(a){a.returnValue=!1,i.getDom("content").scrollTop-=a.wheelDelta/120*60})}this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var a=this.getDom("content");return c.getClientRect(a)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var a=this.getDom("body");a.style.width="",a.style.height="";var b=this.mesureSize();if(this.captureWheel){a.style.width=-(-20-b.width)+"px";var c=parseInt(this.getDom("content").style.height,10);!window.isNaN(c)&&(b.height=c)}else a.style.width=b.width+"px";return a.style.height=b.height+"px",this.__size=b,this.captureWheel&&(this.getDom("content").style.overflow="auto"),b},showAnchor:function(a,b){this.showAnchorRect(c.getClientRect(a),b)},showAnchorRect:function(a,b,e){this._doAutoRender();var f=c.getViewportRect();this.getDom().style.visibility="hidden",this._show();var g,i,j,k,l=this.fitSize();b?(g=this.canSideLeft&&a.right+l.width>f.right&&a.left>l.width,i=this.canSideUp&&a.top+l.height>f.bottom&&a.bottom>l.height,j=g?a.left-l.width:a.right,k=i?a.bottom-l.height:a.top):(g=this.canSideLeft&&a.right+l.width>f.right&&a.left>l.width,i=this.canSideUp&&a.top+l.height>f.bottom&&a.bottom>l.height,j=g?a.right-l.width:a.left,k=i?a.top-l.height:a.bottom);var m=this.getDom();c.setViewportOffset(m,{left:j,top:k}),d.removeClasses(m,h),m.className+=" "+h[2*(i?1:0)+(g?1:0)],this.editor&&(m.style.zIndex=1*this.editor.container.style.zIndex+10,baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=m.style.zIndex-1),this.getDom().style.visibility="visible"},showAt:function(a){var b=a.left,c=a.top,d={left:b,top:c,right:b,bottom:c,height:0,width:0};this.showAnchorRect(d,!1,!0)},_show:function(){if(this._hidden){var a=this.getDom();a.style.display="",this._hidden=!1,this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(a){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,a||this.fireEvent("hide"))},queryAutoHide:function(a){return!a||!c.contains(this.getDom(),a)}},b.inherits(f,e),d.on(document,"mousedown",function(b){var c=b.target||b.srcElement;a(b,c)}),d.on(window,"scroll",function(b,c){a(b,c)})}(),function(){function a(a,b){for(var c='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+a+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+b.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >',d=0;d<e.length;d++)d&&d%10===0&&(c+="</tr>"+(60==d?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+b.getLang("standardColor")+"</td></tr>":"")+"<tr"+(60==d?' class="edui-colorpicker-tablefirstrow"':"")+">"),c+=d<70?'<td style="padding: 0 2px;"><a hidefocus title="'+e[d]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+e[d]+'" style="background-color:#'+e[d]+";border:solid #ccc;"+(d<10||d>=60?"border-width:1px;":d>=10&&d<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':"";return c+="</tr></table></div>"}var b=baidu.editor.utils,c=baidu.editor.ui.UIBase,d=baidu.editor.ui.ColorPicker=function(a){this.initOptions(a),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};d.prototype={getHtmlTpl:function(){return a(this.noColorText,this.editor)},_onTableClick:function(a){var b=a.target||a.srcElement,c=b.getAttribute("data-color");c&&this.fireEvent("pickcolor",c)},_onTableOver:function(a){var b=a.target||a.srcElement,c=b.getAttribute("data-color");c&&(this.getDom("preview").style.backgroundColor=c)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},b.inherits(d,c);var e="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,".split(",")}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.ui.UIBase,d=baidu.editor.ui.TablePicker=function(a){this.initOptions(a),this.initTablePicker()};d.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:c.prototype.render,render:function(a){this._UIBase_render(a),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(a,b){var c=this.getDom("overlay").style,d=this.lengthOfCellSide;c.width=a*d+"px",c.height=b*d+"px";var e=this.getDom("label");e.innerHTML=a+this.editor.getLang("t_col")+" x "+b+this.editor.getLang("t_row"),this.numCols=a,this.numRows=b},_onMouseOver:function(a,c){var d=a.relatedTarget||a.fromElement;b.contains(c,d)||c===d||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(a,c){var d=a.relatedTarget||a.toElement;b.contains(c,d)||c===d||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(a,c){var d=(this.getDom("overlay").style,b.getEventOffset(a)),e=this.lengthOfCellSide,f=Math.ceil(d.left/e),g=Math.ceil(d.top/e);this._track(f,g)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}},a.inherits(d,c)}(),function(){var a=baidu.editor.browser,b=baidu.editor.dom.domUtils,c=baidu.editor.ui.uiUtils,d='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(a.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');baidu.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var a=this._Stateful_dGetHtmlTpl();return a.replace(/stateful/g,function(){return d})},Stateful_onMouseEnter:function(a,b){this.target=b,this.isDisabled()&&!this.alwalysHoverable||(this.addState("hover"),this.fireEvent("over"))},Stateful_onMouseLeave:function(a,b){this.isDisabled()&&!this.alwalysHoverable||(this.removeState("hover"),this.removeState("active"),this.fireEvent("out"))},Stateful_onMouseOver:function(a,b){var d=a.relatedTarget;c.contains(b,d)||b===d||this.Stateful_onMouseEnter(a,b)},Stateful_onMouseOut:function(a,b){var d=a.relatedTarget;c.contains(b,d)||b===d||this.Stateful_onMouseLeave(a,b)},Stateful_onMouseDown:function(a,b){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(a,b){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(a){return b.hasClass(this.getStateDom(),"edui-state-"+a)},addState:function(a){this.hasState(a)||(this.getStateDom().className+=" edui-state-"+a)},removeState:function(a){this.hasState(a)&&b.removeClasses(this.getStateDom(),["edui-state-"+a])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(a){!this.isDisabled()&&a?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(a){a?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.UIBase,c=baidu.editor.ui.Stateful,d=baidu.editor.ui.Button=function(a){if(a.name){var b=a.name,c=a.cssRules;a.className||(a.className="edui-for-"+b),a.cssRules=".edui-default  .edui-for-"+b+" .edui-icon {"+c+"}"}this.initOptions(a),this.initButton()};d.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&a.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(a){var b=a.target||a.srcElement,c=b&&b.tagName&&b.tagName.toLowerCase();if("input"==c||"object"==c||"object"==c)return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(a){var b=this.getDom("label");b.innerHTML=a}},a.inherits(d,b),a.extend(d.prototype,c)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=(baidu.editor.dom.domUtils,baidu.editor.ui.UIBase),d=baidu.editor.ui.Stateful,e=baidu.editor.ui.SplitButton=function(a){this.initOptions(a),this.initSplitButton()};e.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase(),this.Stateful_init();if(null!=this.popup){var a=this.popup;this.popup=null,this.setPopup(a)}},_UIBase_postRender:c.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(c){this.popup!==c&&(null!=this.popup&&this.popup.dispose(),c.addListener("show",a.bind(this._onPopupShow,this)),c.addListener("hide",a.bind(this._onPopupHide,this)),c.addListener("postrender",a.bind(function(){c.getDom("body").appendChild(b.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(b.getClientRect(this.getDom()).width+20)+'px"></div>')),c.getDom().className+=" "+this.className},this)),this.popup=c)},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var a=b.getClientRect(this.getDom());a.top-=this.popup.SHADOW_RADIUS,a.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(a)},_onArrowClick:function(a,b){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},a.inherits(e,c),a.extend(e.prototype,d,!0)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.ui.ColorPicker,d=baidu.editor.ui.Popup,e=baidu.editor.ui.SplitButton,f=baidu.editor.ui.ColorButton=function(a){this.initOptions(a),this.initColorButton()};f.prototype={initColorButton:function(){var a=this;this.popup=new d({content:new c({noColorText:a.editor.getLang("clearColor"),editor:a.editor,onpickcolor:function(b,c){a._onPickColor(c)},onpicknocolor:function(b,c){a._onPickNoColor(c)}}),editor:a.editor}),this.initSplitButton()},_SplitButton_postRender:e.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(b.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton";
},setColor:function(a){this.getDom("colorlump").style.backgroundColor=a,this.color=a},_onPickColor:function(a){this.fireEvent("pickcolor",a)!==!1&&(this.setColor(a),this.popup.hide())},_onPickNoColor:function(a){this.fireEvent("picknocolor")!==!1&&this.popup.hide()}},a.inherits(f,e)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.Popup,c=baidu.editor.ui.TablePicker,d=baidu.editor.ui.SplitButton,e=baidu.editor.ui.TableButton=function(a){this.initOptions(a),this.initTableButton()};e.prototype={initTableButton:function(){var a=this;this.popup=new b({content:new c({editor:a.editor,onpicktable:function(b,c,d){a._onPickTable(c,d)}}),editor:a.editor}),this.initSplitButton()},_onPickTable:function(a,b){this.fireEvent("picktable",a,b)!==!1&&this.popup.hide()}},a.inherits(e,d)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.UIBase,c=baidu.editor.ui.AutoTypeSetPicker=function(a){this.initOptions(a),this.initAutoTypeSetPicker()};c.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var a=this.editor,b=a.options.autotypeset,c=a.getLang("autoTypeSet"),d="textAlignValue"+a.uid,e="imageBlockLineValue"+a.uid,f="symbolConverValue"+a.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(b.mergeEmptyline?"checked":"")+">"+c.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(b.removeEmptyline?"checked":"")+">"+c.delLine+'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(b.removeClass?"checked":"")+">"+c.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(b.indent?"checked":"")+">"+c.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(b.textAlign?"checked":"")+">"+c.alignment+'</td><td colspan="2" id="'+d+'"><input type="radio" name="'+d+'" value="left" '+(b.textAlign&&"left"==b.textAlign?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="'+d+'" value="center" '+(b.textAlign&&"center"==b.textAlign?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="'+d+'" value="right" '+(b.textAlign&&"right"==b.textAlign?"checked":"")+">"+a.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(b.imageBlockLine?"checked":"")+">"+c.imageFloat+'</td><td nowrap id="'+e+'"><input type="radio" name="'+e+'" value="none" '+(b.imageBlockLine&&"none"==b.imageBlockLine?"checked":"")+">"+a.getLang("default")+'<input type="radio" name="'+e+'" value="left" '+(b.imageBlockLine&&"left"==b.imageBlockLine?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="'+e+'" value="center" '+(b.imageBlockLine&&"center"==b.imageBlockLine?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="'+e+'" value="right" '+(b.imageBlockLine&&"right"==b.imageBlockLine?"checked":"")+">"+a.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(b.clearFontSize?"checked":"")+">"+c.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(b.clearFontFamily?"checked":"")+">"+c.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(b.removeEmptyNode?"checked":"")+">"+c.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(b.pasteFilter?"checked":"")+">"+c.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(b.bdc2sb||b.tobdc?"checked":"")+">"+c.symbol+'</td><td id="'+f+'"><input type="radio" name="bdc" value="bdc2sb" '+(b.bdc2sb?"checked":"")+">"+c.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(b.tobdc?"checked":"")+">"+c.tobdc+'</td><td nowrap align="right"><button >'+c.run+"</button></td></tr></table></div></div>"},_UIBase_render:b.prototype.render},a.inherits(c,b)}(),function(){function a(a){for(var c,d={},e=a.getDom(),f=a.editor.uid,g=null,h=null,i=domUtils.getElementsByTagName(e,"input"),j=i.length-1;c=i[j--];)if(g=c.getAttribute("type"),"checkbox"==g)if(h=c.getAttribute("name"),d[h]&&delete d[h],c.checked){var k=document.getElementById(h+"Value"+f);if(k){if(/input/gi.test(k.tagName))d[h]=k.value;else for(var l,m=k.getElementsByTagName("input"),n=m.length-1;l=m[n--];)if(l.checked){d[h]=l.value;break}}else d[h]=!0}else d[h]=!1;else d[c.getAttribute("value")]=c.checked;for(var o,p=domUtils.getElementsByTagName(e,"select"),j=0;o=p[j++];){var q=o.getAttribute("name");d[q]=d[q]?o.value:""}b.extend(a.editor.options.autotypeset,d),a.editor.setPreferences("autotypeset",d)}var b=baidu.editor.utils,c=baidu.editor.ui.Popup,d=baidu.editor.ui.AutoTypeSetPicker,e=baidu.editor.ui.SplitButton,f=baidu.editor.ui.AutoTypeSetButton=function(a){this.initOptions(a),this.initAutoTypeSetButton()};f.prototype={initAutoTypeSetButton:function(){var b=this;this.popup=new c({content:new d({editor:b.editor}),editor:b.editor,hide:function(){!this._hidden&&this.getDom()&&(a(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var e=0;this.popup.addListener("postRenderAfter",function(){var c=this;if(!e){var d=this.getDom(),f=d.getElementsByTagName("button")[0];f.onclick=function(){a(c),b.editor.execCommand("autotypeset"),c.hide()},domUtils.on(d,"click",function(d){var e=d.target||d.srcElement,f=b.editor.uid;if(e&&"INPUT"==e.tagName){if("imageBlockLine"==e.name||"textAlign"==e.name||"symbolConver"==e.name)for(var g=e.checked,h=document.getElementById(e.name+"Value"+f),i=h.getElementsByTagName("input"),j={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"},k=0;k<i.length;k++)g?i[k].value==j[e.name]&&(i[k].checked="checked"):i[k].checked=!1;if(e.name=="imageBlockLineValue"+f||e.name=="textAlignValue"+f||"bdc"==e.name){var l=e.parentNode.previousSibling.getElementsByTagName("input");l&&(l[0].checked=!0)}a(c)}}),e=1}}),this.initSplitButton()}},b.inherits(f,e)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.Popup,c=baidu.editor.ui.Stateful,d=baidu.editor.ui.UIBase,e=baidu.editor.ui.CellAlignPicker=function(a){this.initOptions(a),this.initSelected(),this.initCellAlignPicker()};e.prototype={initSelected:function(){var a={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3};this.selected&&(this.selectedIndex=a.valign[this.selected.valign]*a.count+a.align[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){for(var a=["left","center","right"],b=9,c=null,d=-1,e=[],f=0;f<b;f++)c=this.selectedIndex===f?' class="edui-cellalign-selected" ':"",d=f%3,0===d&&e.push("<tr>"),e.push('<td index="'+f+'" '+c+' stateful><div class="edui-icon edui-'+a[d]+'"></div></td>'),2===d&&e.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+e.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(a){var c=a.target||a.srcElement;/icon/.test(c.className)&&(this.items[c.parentNode.getAttribute("index")].onclick(),b.postHide(a))},_UIBase_render:d.prototype.render},a.inherits(e,d),a.extend(e.prototype,c,!0)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.Stateful,c=baidu.editor.ui.uiUtils,d=baidu.editor.ui.UIBase,e=baidu.editor.ui.PastePicker=function(a){this.initOptions(a),this.initPastePicker()};e.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(a){this.editor.ui._isTransfer=!0,this.editor.fireEvent("pasteTransfer",a)},_onClick:function(a){var b=domUtils.getNextDomNode(a),d=c.getViewportRect().height,e=c.getClientRect(b);e.top+e.height>d?b.style.top=-e.height-a.offsetHeight+"px":b.style.top="",/hidden/gi.test(domUtils.getComputedStyle(b,"visibility"))?(b.style.visibility="visible",domUtils.addClass(a,"edui-state-opened")):(b.style.visibility="hidden",domUtils.removeClasses(a,"edui-state-opened"))},_UIBase_render:d.prototype.render},a.inherits(e,d),a.extend(e.prototype,b,!0)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.ui.UIBase,d=baidu.editor.ui.Toolbar=function(a){this.initOptions(a),this.initToolbar()};d.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(a,b){void 0===b?this.items.push(a):this.items.splice(b,0,a)},getHtmlTpl:function(){for(var a=[],b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+a.join("")+"</div>"},postRender:function(){for(var a=this.getDom(),c=0;c<this.items.length;c++)this.items[c].postRender();b.makeUnselectable(a)},_onMouseDown:function(a){var b=a.target||a.srcElement,c=b&&b.tagName&&b.tagName.toLowerCase();if("input"==c||"object"==c||"object"==c)return!1}},a.inherits(d,c)}(),function(){var a=baidu.editor.utils,b=baidu.editor.dom.domUtils,c=baidu.editor.ui.uiUtils,d=baidu.editor.ui.UIBase,e=baidu.editor.ui.Popup,f=baidu.editor.ui.Stateful,g=baidu.editor.ui.CellAlignPicker,h=baidu.editor.ui.Menu=function(a){this.initOptions(a),this.initMenu()},i={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};h.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];"-"==b?this.items[a]=this.getSeparator():b instanceof j||(b.editor=this.editor,b.theme=this.editor.options.theme,this.items[a]=this.createItem(b))}},getSeparator:function(){return i},createItem:function(a){return a.menu=this,new j(a)},_Popup_getContentHtmlTpl:e.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var a=[],b=0;b<this.items.length;b++){var c=this.items[b];a[b]=c.renderHtml()}return'<div class="%%-body">'+a.join("")+"</div>"},_Popup_postRender:e.prototype.postRender,postRender:function(){for(var a=this,d=0;d<this.items.length;d++){var e=this.items[d];e.ownerMenu=this,e.postRender()}b.on(this.getDom(),"mouseover",function(b){b=b||event;var d=b.relatedTarget||b.fromElement,e=a.getDom();c.contains(e,d)||e===d||a.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(a){if(a){if(c.contains(this.getDom(),a))return!1;for(var b=0;b<this.items.length;b++){var d=this.items[b];if(d.queryAutoHide(a)===!1)return!1}}},clearItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];clearTimeout(b._showingTimer),clearTimeout(b._closingTimer),b.subMenu&&b.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&b.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},a.inherits(h,e);var j=baidu.editor.ui.MenuItem=function(a){if(this.initOptions(a),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof h))if(a.className&&a.className.indexOf("aligntd")!=-1){var c=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment"),this.subMenu=new e({content:new g(this.subMenu),parentMenu:c,editor:c.editor,destroy:function(){this.getDom()&&b.remove(this.getDom())}}),this.subMenu.addListener("postRenderAfter",function(){b.on(this.getDom(),"mouseover",function(){c.addState("opened")})})}else this.subMenu=new h(this.subMenu)};j.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var a=this;this.addListener("over",function(){a.ownerMenu.fireEvent("submenuover",a),a.subMenu&&a.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){a.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(a._closingTimer),a._closingTimer=null,a.addState("opened")}),this.ownerMenu.addListener("hide",function(){a.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(b,c){c!==a&&a.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(b){return(!b||!c.contains(a.getDom(),b))&&this._bakQueryAutoHide(b)}),this.getDom().style.tabIndex="-1",c.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var a=this;a.isDisabled()||(a.addState("opened"),clearTimeout(a._showingTimer),clearTimeout(a._closingTimer),a._closingTimer=null,a._showingTimer=setTimeout(function(){a.showSubMenu()},250))},delayHideSubMenu:function(){var a=this;a.isDisabled()||(a.removeState("opened"),clearTimeout(a._showingTimer),a._closingTimer||(a._closingTimer=setTimeout(function(){a.hasState("opened")||a.hideSubMenu(),a._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(a){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(a)},_onClick:function(a,b){this.hasState("disabled")||this.fireEvent("click",a,b)!==!1&&(this.subMenu?this.showSubMenu():e.postHide(a))},showSubMenu:function(){var a=c.getClientRect(this.getDom());a.right-=5,a.left+=2,a.width-=7,a.top-=4,a.bottom+=4,a.height+=8,this.subMenu.showAnchorRect(a,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},a.inherits(j,d),a.extend(j.prototype,f,!0)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.ui.Menu,d=baidu.editor.ui.SplitButton,e=baidu.editor.ui.Combox=function(a){this.initOptions(a),this.initCombox()};e.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var a=this;this.items=this.items||[];for(var b=0;b<this.items.length;b++){var d=this.items[b];d.uiName="listitem",d.index=b,d.onclick=function(){a.selectByIndex(this.index)}}this.popup=new c({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:d.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var a=b.getClientRect(this.getDom());a.top+=1,a.bottom-=1,a.height-=2,this.popup.showAnchorRect(a)},getValue:function(){return this.value},setValue:function(a){var b=this.indexByValue(a);b!=-1?(this.selectedIndex=b,this.setLabel(this.items[b].label),this.value=this.items[b].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(a)),this.value=a)},setLabel:function(a){this.getDom("button_body").innerHTML=a,this.label=a},getLabelForUnknowValue:function(a){return a},indexByValue:function(a){for(var b=0;b<this.items.length;b++)if(a==this.items[b].value)return b;return-1},getItem:function(a){return this.items[a]},selectByIndex:function(a){a<this.items.length&&this.fireEvent("select",a)!==!1&&(this.selectedIndex=a,this.value=this.items[a].value,this.setLabel(this.items[a].label))}},a.inherits(e,d)}(),function(){var a,b,c,d=baidu.editor.utils,e=baidu.editor.dom.domUtils,f=baidu.editor.ui.uiUtils,g=baidu.editor.ui.Mask,h=baidu.editor.ui.UIBase,i=baidu.editor.ui.Button,j=baidu.editor.ui.Dialog=function(a){if(a.name){var b=a.name,c=a.cssRules;a.className||(a.className="edui-for-"+b),c&&(a.cssRules=".edui-default .edui-for-"+b+" .edui-dialog-content  {"+c+"}")}this.initOptions(d.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(a,b){return b?this.onok():this.oncancel()},holdScroll:!1},a)),this.initDialog()};j.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var e=this,f=this.editor.options.theme;if(this.cssRules&&d.cssRule("edui-customize-"+this.name+"-style",this.cssRules),this.initUIBase(),this.modalMask=a||(a=new g({className:"edui-dialog-modalmask",theme:f,onclick:function(){c&&c.close(!1)}})),this.dragMask=b||(b=new g({className:"edui-dialog-dragmask",theme:f})),this.closeButton=new i({className:"edui-dialog-closebutton",title:e.closeDialog,theme:f,onclick:function(){e.close(!1)}}),this.fullscreen&&this.initResizeEvent(),this.buttons)for(var h=0;h<this.buttons.length;h++)this.buttons[h]instanceof i||(this.buttons[h]=new i(d.extend(this.buttons[h],{editor:this.editor},!0)))},initResizeEvent:function(){var a=this;e.on(window,"resize",function(){a._hidden||void 0===a._hidden||(a.__resizeTimer&&window.clearTimeout(a.__resizeTimer),a.__resizeTimer=window.setTimeout(function(){a.__resizeTimer=null;var b=a.getDom(),c=a.getDom("content"),d=UE.ui.uiUtils.getClientRect(b),e=UE.ui.uiUtils.getClientRect(c),g=f.getViewportRect();c.style.width=g.width-d.width+e.width+"px",c.style.height=g.height-d.height+e.height+"px",b.style.width=g.width+"px",b.style.height=g.height+"px",a.fireEvent("resize")},100))})},fitSize:function(){var a=this.getDom("body"),b=this.mesureSize();return a.style.width=b.width+"px",a.style.height=b.height+"px",b},safeSetOffset:function(a){var b=this,c=b.getDom(),d=f.getViewportRect(),e=f.getClientRect(c),g=a.left;g+e.width>d.right&&(g=d.right-e.width);var h=a.top;h+e.height>d.bottom&&(h=d.bottom-e.height),c.style.left=Math.max(g,0)+"px",c.style.top=Math.max(h,0)+"px"},showAtCenter:function(){var a=f.getViewportRect();if(this.fullscreen){var b=this.getDom(),c=this.getDom("content");b.style.display="block";var d=UE.ui.uiUtils.getClientRect(b),g=UE.ui.uiUtils.getClientRect(c);b.style.left="-100000px",c.style.width=a.width-d.width+g.width+"px",c.style.height=a.height-d.height+g.height+"px",b.style.width=a.width+"px",b.style.height=a.height+"px",b.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}else{this.getDom().style.display="";var h=this.fitSize(),i=0|this.getDom("titlebar").offsetHeight,j=a.width/2-h.width/2,k=a.height/2-(h.height-i)/2-i,l=this.getDom();this.safeSetOffset({left:Math.max(0|j,0),top:Math.max(0|k,0)}),e.hasClass(l,"edui-state-centered")||(l.className+=" edui-state-centered")}this._show()},getContentHtml:function(){var a="";return"string"==typeof this.content?a=this.content:this.iframeUrl&&(a='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),a},getHtmlTpl:function(){var a="";if(this.buttons){for(var b=[],c=0;c<this.buttons.length;c++)b[c]=this.buttons[c].renderHtml();a='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+b.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+a+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var a=this;if(this.addListener("show",function(){a.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){a.modalMask.hide()}),this.buttons)for(var b=0;b<this.buttons.length;b++)this.buttons[b].postRender();e.on(window,"resize",function(){setTimeout(function(){a.isHidden()||a.safeSetOffset(f.getClientRect(a.getDom()))})}),this._hide()},mesureSize:function(){var a=this.getDom("body"),b=f.getClientRect(this.getDom("content")).width,c=a.style;return c.width=b,f.getClientRect(a)},_onTitlebarMouseDown:function(a,b){if(this.draggable){var c,d=(f.getViewportRect(),this);f.startDrag(a,{ondragstart:function(){c=f.getClientRect(d.getDom()),d.getDom("contmask").style.visibility="visible",d.dragMask.show(d.getDom().style.zIndex-1)},ondragmove:function(a,b){var e=c.left+a,f=c.top+b;d.safeSetOffset({left:e,top:f})},ondragstop:function(){d.getDom("contmask").style.visibility="hidden",e.removeClasses(d.getDom(),["edui-state-centered"]),d.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml(),this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var a=this.getDom();a.style.display="none",a.style.zIndex="",a.style.width="",a.style.height="",this._hidden=!0,this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(a){this.render(),this.open()}if(this.showAtCenter(),this.iframeUrl)try{this.getDom("iframe").focus()}catch(b){}c=this},_onCloseButtonClick:function(a,b){this.close(!1)},close:function(a){if(this.fireEvent("close",a)!==!1){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide();var b=this.getDom("content"),c=this.getDom("iframe");if(b&&c){var d=c.contentDocument||c.contentWindow.document;d&&(d.body.innerHTML=""),e.remove(b)}}}},d.inherits(j,h)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.Menu,c=baidu.editor.ui.SplitButton,d=baidu.editor.ui.MenuButton=function(a){this.initOptions(a),this.initMenuButton()};d.prototype={initMenuButton:function(){var a=this;this.uiName="menubutton",this.popup=new b({items:a.items,className:a.className,editor:a.editor}),this.popup.addListener("show",function(){for(var b=this,c=0;c<b.items.length;c++)b.items[c].removeState("checked"),b.items[c].value==a._value&&(b.items[c].addState("checked"),this.value=a._value)}),this.initSplitButton()},setValue:function(a){this._value=a}},a.inherits(d,c)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.Popup,c=baidu.editor.ui.SplitButton,d=baidu.editor.ui.MultiMenuPop=function(a){this.initOptions(a),this.initMultiMenu()};d.prototype={initMultiMenu:function(){var a=this;this.popup=new b({content:"",editor:a.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+a.id+'_iframe" src="'+a.iframeUrl+'" frameborder="0"></iframe>',a.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*a.editor.container.style.zIndex+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},a.inherits(d,c)}(),function(){function a(a){var b=a.target||a.srcElement,c=g.findParent(b,function(a){return g.hasClass(a,"edui-shortcutmenu")||g.hasClass(a,"edui-popup")},!0);if(!c)for(var d,e=0;d=h[e++];)d.hide()}var b,c=baidu.editor.ui,d=c.UIBase,e=c.uiUtils,f=baidu.editor.utils,g=baidu.editor.dom.domUtils,h=[],i=!1,j=c.ShortCutMenu=function(a){this.initOptions(a),this.initShortCutMenu()};j.postHide=a,j.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),h.push(this)},initEvent:function(){var a=this,c=a.editor.document;g.on(c,"mousemove",function(c){if(a.isHidden===!1){if(a.getSubMenuMark()||"contextmenu"==a.eventType)return;var d=!0,e=a.getDom(),f=e.offsetWidth,g=e.offsetHeight,h=f/2+a.SPACE,i=g/2,j=Math.abs(c.screenX-a.left),k=Math.abs(c.screenY-a.top);clearTimeout(b),b=setTimeout(function(){k>0&&k<i?a.setOpacity(e,"1"):k>i&&k<i+70?(a.setOpacity(e,"0.5"),d=!1):k>i+70&&k<i+140&&a.hide(),d&&j>0&&j<h?a.setOpacity(e,"1"):j>h&&j<h+70?a.setOpacity(e,"0.5"):j>h+70&&j<h+140&&a.hide()})}}),browser.chrome&&g.on(c,"mouseout",function(b){var c=b.relatedTarget||b.toElement;null!=c&&"HTML"!=c.tagName||a.hide()}),a.editor.addListener("afterhidepop",function(){a.isHidden||(i=!0)})},initItems:function(){if(f.isArray(this.items))for(var a=0,b=this.items.length;a<b;a++){var d=this.items[a].toLowerCase();c[d]&&(this.items[a]=new c[d](this.editor),this.items[a].className+=" edui-shortcutsubmenu ")}},setOpacity:function(a,b){browser.ie&&browser.version<9?a.style.filter="alpha(opacity = "+100*parseFloat(b)+");":a.style.opacity=b},getSubMenuMark:function(){i=!1;for(var a,b=e.getFixedLayer(),c=g.getElementsByTagName(b,"div",function(a){return g.hasClass(a,"edui-shortcutsubmenu edui-popup")}),d=0;a=c[d++];)"none"!=a.style.display&&(i=!0);return i},show:function(a,b){function c(a){a.left<0&&(a.left=0),a.top<0&&(a.top=0),i.style.cssText="position:absolute;left:"+a.left+"px;top:"+a.top+"px;"}function d(a){a.tagName||(a=a.getDom()),h.left=parseInt(a.style.left),h.top=parseInt(a.style.top),h.top-=i.offsetHeight+15,c(h)}var f=this,h={},i=this.getDom(),j=e.getFixedLayer();if(f.eventType=a.type,i.style.cssText="display:block;left:-9999px","contextmenu"==a.type&&b){var k=g.getElementsByTagName(j,"div","edui-contextmenu")[0];k?d(k):f.editor.addListener("aftershowcontextmenu",function(a,b){d(b)})}else h=e.getViewportOffsetByEvent(a),h.top-=i.offsetHeight+f.SPACE,h.left+=f.SPACE+20,c(h),f.setOpacity(i,.2);f.isHidden=!1,f.left=a.screenX+i.offsetWidth/2-f.SPACE,f.top=a.screenY-i.offsetHeight/2-f.SPACE,f.editor&&(i.style.zIndex=1*f.editor.container.style.zIndex+10,j.style.zIndex=i.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none"),this.isHidden=!0},postRender:function(){if(f.isArray(this.items))for(var a,b=0;a=this.items[b++];)a.postRender()},getHtmlTpl:function(){var a;if(f.isArray(this.items)){a=[];for(var b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();a=a.join("")}else a=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+a+"</div>"}},f.inherits(j,d),g.on(document,"mousedown",function(b){a(b)}),g.on(window,"scroll",function(b){a(b)})}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui.UIBase,c=baidu.editor.ui.Breakline=function(a){this.initOptions(a),this.initSeparator()};c.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}},a.inherits(c,b)}(),function(){var a=baidu.editor.utils,b=baidu.editor.dom.domUtils,c=baidu.editor.ui.UIBase,d=baidu.editor.ui.Message=function(a){this.initOptions(a),this.initMessage()};d.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">×</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(a){var b=this;a.keepshow||(clearTimeout(this.timer),b.timer=setTimeout(function(){b.hide()},a.timeout||4e3)),void 0!==a.content&&b.setContent(a.content),void 0!==a.type&&b.setType(a.type),b.show()},postRender:function(){var a=this,c=this.getDom("closer");c&&b.on(c,"click",function(){a.hide()})},setContent:function(a){this.getDom("content").innerHTML=a},setType:function(a){a=a||"info";var b=this.getDom("body");b.className=b.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+a)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var a=this.getDom("body").match(/edui-message-type-([\w-]+)/);return a?a[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var a=this.getDom();a&&(a.style.display="none",a.parentNode&&a.parentNode.removeChild(a))}},a.inherits(d,c)}(),function(){var a=baidu.editor.utils,b=baidu.editor.ui,c=b.Dialog;b.buttons={},b.Dialog=function(a){var b=new c(a);return b.addListener("hide",function(){if(b.editor){var a=b.editor;try{if(browser.gecko){var c=a.window.scrollY,d=a.window.scrollX;a.body.focus(),a.window.scrollTo(d,c)}else a.focus()}catch(e){}}}),b};for(var d,e={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},f=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"],g=0;d=f[g++];)d=d.toLowerCase(),b[d]=function(a){return function(c){var d=new b.Button({className:"edui-for-"+a,title:c.options.labelMap[a]||c.getLang("labelMap."+a)||"",onclick:function(){c.execCommand(a)},theme:c.options.theme,showText:!1});return b.buttons[a]=d,c.addListener("selectionchange",function(b,e,f){var g=c.queryCommandState(a);g==-1?(d.setDisabled(!0),d.setChecked(!1)):f||(d.setDisabled(!1),d.setChecked(g))}),d}}(d);b.cleardoc=function(a){var c=new b.Button({className:"edui-for-cleardoc",title:a.options.labelMap.cleardoc||a.getLang("labelMap.cleardoc")||"",theme:a.options.theme,onclick:function(){confirm(a.getLang("confirmClear"))&&a.execCommand("cleardoc")}});return b.buttons.cleardoc=c,a.addListener("selectionchange",function(){c.setDisabled(a.queryCommandState("cleardoc")==-1)}),c};var h={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var i in h)!function(a,c){for(var d,e=0;d=c[e++];)!function(c){b[a.replace("float","")+c]=function(d){var e=new b.Button({
className:"edui-for-"+a.replace("float","")+c,title:d.options.labelMap[a.replace("float","")+c]||d.getLang("labelMap."+a.replace("float","")+c)||"",theme:d.options.theme,onclick:function(){d.execCommand(a,c)}});return b.buttons[a]=e,d.addListener("selectionchange",function(b,f,g){e.setDisabled(d.queryCommandState(a)==-1),e.setChecked(d.queryCommandValue(a)==c&&!g)}),e}}(d)}(i,h[i]);for(var d,g=0;d=["backcolor","forecolor"][g++];)b[d]=function(a){return function(c){var d=new b.ColorButton({className:"edui-for-"+a,color:"default",title:c.options.labelMap[a]||c.getLang("labelMap."+a)||"",editor:c,onpickcolor:function(b,d){c.execCommand(a,d)},onpicknocolor:function(){c.execCommand(a,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){c.execCommand(a,this.color)}});return b.buttons[a]=d,c.addListener("selectionchange",function(){d.setDisabled(c.queryCommandState(a)==-1)}),d}}(d);var j={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var i in j)!function(c,d){for(var f,g=0;f=d[g++];)browser.opera&&"searchreplace"===f||!function(d){b[d]=function(f,g,h){g=g||(f.options.iframeUrlMap||{})[d]||e[d],h=f.options.labelMap[d]||f.getLang("labelMap."+d)||"";var i;g&&(i=new b.Dialog(a.extend({iframeUrl:f.ui.mapUrl(g),editor:f,className:"edui-for-"+d,title:h,holdScroll:"insertimage"===d,fullscreen:/charts|preview/.test(d),closeDialog:f.getLang("closeDialog")},"ok"==c?{buttons:[{className:"edui-okbutton",label:f.getLang("ok"),editor:f,onclick:function(){i.close(!0)}},{className:"edui-cancelbutton",label:f.getLang("cancel"),editor:f,onclick:function(){i.close(!1)}}]}:{})),f.ui._dialogs[d+"Dialog"]=i);var j=new b.Button({className:"edui-for-"+d,title:h,onclick:function(){if(i)switch(d){case"wordimage":var a=f.execCommand("wordimage");a&&a.length&&(i.render(),i.open());break;case"scrawl":f.queryCommandState("scrawl")!=-1&&(i.render(),i.open());break;default:i.render(),i.open()}},theme:f.options.theme,disabled:"scrawl"==d&&f.queryCommandState("scrawl")==-1||"charts"==d});return b.buttons[d]=j,f.addListener("selectionchange",function(){var a={edittable:1};if(!(d in a)){var b=f.queryCommandState(d);j.getDom()&&(j.setDisabled(b==-1),j.setChecked(b))}}),j}}(f.toLowerCase())}(i,j[i]);b.snapscreen=function(a,c,d){d=a.options.labelMap.snapscreen||a.getLang("labelMap.snapscreen")||"";var f=new b.Button({className:"edui-for-snapscreen",title:d,onclick:function(){a.execCommand("snapscreen")},theme:a.options.theme});if(b.buttons.snapscreen=f,c=c||(a.options.iframeUrlMap||{}).snapscreen||e.snapscreen){var g=new b.Dialog({iframeUrl:a.ui.mapUrl(c),editor:a,className:"edui-for-snapscreen",title:d,buttons:[{className:"edui-okbutton",label:a.getLang("ok"),editor:a,onclick:function(){g.close(!0)}},{className:"edui-cancelbutton",label:a.getLang("cancel"),editor:a,onclick:function(){g.close(!1)}}]});g.render(),a.ui._dialogs.snapscreenDialog=g}return a.addListener("selectionchange",function(){f.setDisabled(a.queryCommandState("snapscreen")==-1)}),f},b.insertcode=function(c,d,e){d=c.options.insertcode||[],e=c.options.labelMap.insertcode||c.getLang("labelMap.insertcode")||"";var f=[];a.each(d,function(a,b){f.push({label:a,value:b,theme:c.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var g=new b.Combox({editor:c,items:f,onselect:function(a,b){c.execCommand("insertcode",this.items[b].value)},onbuttonclick:function(){this.showPopup()},title:e,initValue:e,className:"edui-for-insertcode",indexByValue:function(a){if(a)for(var b,c=0;b=this.items[c];c++)if(b.value.indexOf(a)!=-1)return c;return-1}});return b.buttons.insertcode=g,c.addListener("selectionchange",function(a,b,d){if(!d){var f=c.queryCommandState("insertcode");if(f==-1)g.setDisabled(!0);else{g.setDisabled(!1);var h=c.queryCommandValue("insertcode");if(!h)return void g.setValue(e);h&&(h=h.replace(/['"]/g,"").split(",")[0]),g.setValue(h)}}}),g},b.fontfamily=function(c,d,e){if(d=c.options.fontfamily||[],e=c.options.labelMap.fontfamily||c.getLang("labelMap.fontfamily")||"",d.length){for(var f,g=0,h=[];f=d[g];g++){var i=c.getLang("fontfamily")[f.name]||"";!function(b,d){h.push({label:b,value:d,theme:c.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+a.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})}(f.label||i,f.val)}var j=new b.Combox({editor:c,items:h,onselect:function(a,b){c.execCommand("FontFamily",this.items[b].value)},onbuttonclick:function(){this.showPopup()},title:e,initValue:e,className:"edui-for-fontfamily",indexByValue:function(a){if(a)for(var b,c=0;b=this.items[c];c++)if(b.value.indexOf(a)!=-1)return c;return-1}});return b.buttons.fontfamily=j,c.addListener("selectionchange",function(a,b,d){if(!d){var e=c.queryCommandState("FontFamily");if(e==-1)j.setDisabled(!0);else{j.setDisabled(!1);var f=c.queryCommandValue("FontFamily");f&&(f=f.replace(/['"]/g,"").split(",")[0]),j.setValue(f)}}}),j}},b.fontsize=function(a,c,d){if(d=a.options.labelMap.fontsize||a.getLang("labelMap.fontsize")||"",c=c||a.options.fontsize||[],c.length){for(var e=[],f=0;f<c.length;f++){var g=c[f]+"px";e.push({label:g,value:g,theme:a.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var h=new b.Combox({editor:a,items:e,title:d,initValue:d,onselect:function(b,c){a.execCommand("FontSize",this.items[c].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return b.buttons.fontsize=h,a.addListener("selectionchange",function(b,c,d){if(!d){var e=a.queryCommandState("FontSize");e==-1?h.setDisabled(!0):(h.setDisabled(!1),h.setValue(a.queryCommandValue("FontSize")))}}),h}},b.paragraph=function(c,d,e){if(e=c.options.labelMap.paragraph||c.getLang("labelMap.paragraph")||"",d=c.options.paragraph||[],!a.isEmptyObject(d)){var f=[];for(var g in d)f.push({value:g,label:d[g]||c.getLang("paragraph")[g],theme:c.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var h=new b.Combox({editor:c,items:f,title:e,initValue:e,className:"edui-for-paragraph",onselect:function(a,b){c.execCommand("Paragraph",this.items[b].value)},onbuttonclick:function(){this.showPopup()}});return b.buttons.paragraph=h,c.addListener("selectionchange",function(a,b,d){if(!d){var e=c.queryCommandState("Paragraph");if(e==-1)h.setDisabled(!0);else{h.setDisabled(!1);var f=c.queryCommandValue("Paragraph"),g=h.indexByValue(f);g!=-1?h.setValue(f):h.setValue(h.initValue)}}}),h}},b.customstyle=function(a){var c=a.options.customstyle||[],d=a.options.labelMap.customstyle||a.getLang("labelMap.customstyle")||"";if(c.length){for(var e,f=a.getLang("customstyle"),g=0,h=[];e=c[g++];)!function(b){var c={};c.label=b.label?b.label:f[b.name],c.style=b.style,c.className=b.className,c.tag=b.tag,h.push({label:c.label,value:c,theme:a.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+c.tag+" "+(c.className?' class="'+c.className+'"':"")+(c.style?' style="'+c.style+'"':"")+">"+c.label+"</"+c.tag+"></div>"}})}(e);var i=new b.Combox({editor:a,items:h,title:d,initValue:d,className:"edui-for-customstyle",onselect:function(b,c){a.execCommand("customstyle",this.items[c].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(a){for(var b,c=0;b=this.items[c++];)if(b.label==a)return c-1;return-1}});return b.buttons.customstyle=i,a.addListener("selectionchange",function(b,c,d){if(!d){var e=a.queryCommandState("customstyle");if(e==-1)i.setDisabled(!0);else{i.setDisabled(!1);var f=a.queryCommandValue("customstyle"),g=i.indexByValue(f);g!=-1?i.setValue(f):i.setValue(i.initValue)}}}),i}},b.inserttable=function(a,c,d){d=a.options.labelMap.inserttable||a.getLang("labelMap.inserttable")||"";var e=new b.TableButton({editor:a,title:d,className:"edui-for-inserttable",onpicktable:function(b,c,d){a.execCommand("InsertTable",{numRows:d,numCols:c,border:1})},onbuttonclick:function(){this.showPopup()}});return b.buttons.inserttable=e,a.addListener("selectionchange",function(){e.setDisabled(a.queryCommandState("inserttable")==-1)}),e},b.lineheight=function(a){var c=a.options.lineheight||[];if(c.length){for(var d,e=0,f=[];d=c[e++];)f.push({label:d,value:d,theme:a.options.theme,onclick:function(){a.execCommand("lineheight",this.value)}});var g=new b.MenuButton({editor:a,className:"edui-for-lineheight",title:a.options.labelMap.lineheight||a.getLang("labelMap.lineheight")||"",items:f,onbuttonclick:function(){var b=a.queryCommandValue("LineHeight")||this.value;a.execCommand("LineHeight",b)}});return b.buttons.lineheight=g,a.addListener("selectionchange",function(){var b=a.queryCommandState("LineHeight");if(b==-1)g.setDisabled(!0);else{g.setDisabled(!1);var c=a.queryCommandValue("LineHeight");c&&g.setValue((c+"").replace(/cm/,"")),g.setChecked(b)}}),g}};for(var k,l=["top","bottom"],m=0;k=l[m++];)!function(a){b["rowspacing"+a]=function(c){var d=c.options["rowspacing"+a]||[];if(!d.length)return null;for(var e,f=0,g=[];e=d[f++];)g.push({label:e,value:e,theme:c.options.theme,onclick:function(){c.execCommand("rowspacing",this.value,a)}});var h=new b.MenuButton({editor:c,className:"edui-for-rowspacing"+a,title:c.options.labelMap["rowspacing"+a]||c.getLang("labelMap.rowspacing"+a)||"",items:g,onbuttonclick:function(){var b=c.queryCommandValue("rowspacing",a)||this.value;c.execCommand("rowspacing",b,a)}});return b.buttons[a]=h,c.addListener("selectionchange",function(){var b=c.queryCommandState("rowspacing",a);if(b==-1)h.setDisabled(!0);else{h.setDisabled(!1);var d=c.queryCommandValue("rowspacing",a);d&&h.setValue((d+"").replace(/%/,"")),h.setChecked(b)}}),h}}(k);for(var n,o=["insertorderedlist","insertunorderedlist"],p=0;n=o[p++];)!function(a){b[a]=function(c){var d=c.options[a],e=function(){c.execCommand(a,this.value)},f=[];for(var g in d)f.push({label:d[g]||c.getLang()[a][g]||"",value:g,theme:c.options.theme,onclick:e});var h=new b.MenuButton({editor:c,className:"edui-for-"+a,title:c.getLang("labelMap."+a)||"",items:f,onbuttonclick:function(){var b=c.queryCommandValue(a)||this.value;c.execCommand(a,b)}});return b.buttons[a]=h,c.addListener("selectionchange",function(){var b=c.queryCommandState(a);if(b==-1)h.setDisabled(!0);else{h.setDisabled(!1);var d=c.queryCommandValue(a);h.setValue(d),h.setChecked(b)}}),h}}(n);b.fullscreen=function(a,c){c=a.options.labelMap.fullscreen||a.getLang("labelMap.fullscreen")||"";var d=new b.Button({className:"edui-for-fullscreen",title:c,theme:a.options.theme,onclick:function(){a.ui&&a.ui.setFullScreen(!a.ui.isFullScreen()),this.setChecked(a.ui.isFullScreen())}});return b.buttons.fullscreen=d,a.addListener("selectionchange",function(){var b=a.queryCommandState("fullscreen");d.setDisabled(b==-1),d.setChecked(a.ui.isFullScreen())}),d},b.emotion=function(a,c){var d="emotion",f=new b.MultiMenuPop({title:a.options.labelMap[d]||a.getLang("labelMap."+d)||"",editor:a,className:"edui-for-"+d,iframeUrl:a.ui.mapUrl(c||(a.options.iframeUrlMap||{})[d]||e[d])});return b.buttons[d]=f,a.addListener("selectionchange",function(){f.setDisabled(a.queryCommandState(d)==-1)}),f},b.autotypeset=function(a){var c=new b.AutoTypeSetButton({editor:a,title:a.options.labelMap.autotypeset||a.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){a.execCommand("autotypeset")}});return b.buttons.autotypeset=c,a.addListener("selectionchange",function(){c.setDisabled(a.queryCommandState("autotypeset")==-1)}),c},b.simpleupload=function(a){var c="simpleupload",d=new b.Button({className:"edui-for-"+c,title:a.options.labelMap[c]||a.getLang("labelMap."+c)||"",onclick:function(){},theme:a.options.theme,showText:!1});return b.buttons[c]=d,a.addListener("ready",function(){var b=d.getDom("body"),c=b.children[0];a.fireEvent("simpleuploadbtnready",c)}),a.addListener("selectionchange",function(b,e,f){var g=a.queryCommandState(c);g==-1?(d.setDisabled(!0),d.setChecked(!1)):f||(d.setDisabled(!1),d.setChecked(g))}),d}}(),function(){function a(a){this.initOptions(a),this.initEditorUI()}var b=baidu.editor.utils,c=baidu.editor.ui.uiUtils,d=baidu.editor.ui.UIBase,e=baidu.editor.dom.domUtils,f=[];a.prototype={uiName:"editor",initEditorUI:function(){function a(a,b){a.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:a.options.wordCountMsg||a.getLang("wordCountMsg"),wordOverFlowMsg:a.options.wordOverFlowMsg||a.getLang("wordOverFlowMsg")});var c=a.options,d=c.maximumWords,e=c.wordCountMsg,f=c.wordOverFlowMsg,g=b.getDom("wordcount");if(c.wordCount){var h=a.getContentLength(!0);h>d?(g.innerHTML=f,a.fireEvent("wordcountoverflow")):g.innerHTML=e.replace("{#leave}",d-h).replace("{#count}",h)}}this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var b=this.editor,c=this;b.addListener("ready",function(){function d(){a(b,c),e.un(b.document,"click",arguments.callee)}b.getDialog=function(a){return b.ui._dialogs[a+"Dialog"]},e.on(b.window,"scroll",function(a){baidu.editor.ui.Popup.postHide(a)}),b.ui._actualFrameWidth=b.options.initialFrameWidth,UE.browser.ie&&6===UE.browser.version&&b.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),b.options.elementPathEnabled&&(b.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+b.getLang("elementPathTip")+":</div>"),b.options.wordCount&&(e.on(b.document,"click",d),b.ui.getDom("wordcount").innerHTML=b.getLang("wordCountTip")),b.ui._scale(),b.options.scaleEnabled?(b.autoHeightEnabled&&b.disableAutoHeight(),c.enableScale()):c.disableScale(),b.options.elementPathEnabled||b.options.wordCount||b.options.scaleEnabled||(b.ui.getDom("elementpath").style.display="none",b.ui.getDom("wordcount").style.display="none",b.ui.getDom("scale").style.display="none"),b.selection.isFocus()&&b.fireEvent("selectionchange",!1,!0)}),b.addListener("mousedown",function(a,b){var c=b.target||b.srcElement;baidu.editor.ui.Popup.postHide(b,c),baidu.editor.ui.ShortCutMenu.postHide(b)}),b.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(b),b.getDialog("edittip").open()});var d,f,g=!1;b.addListener("afterpaste",function(){b.queryCommandState("pasteplain")||(baidu.editor.ui.PastePicker&&(d=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:b}),editor:b,className:"edui-wordpastepop"}),d.render()),g=!0)}),b.addListener("afterinserthtml",function(){clearTimeout(f),f=setTimeout(function(){if(d&&(g||b.ui._isTransfer)){if(d.isHidden()){var a=e.createElement(b.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"}),c=b.selection.getRange();c.insertNode(a);var f=getDomNode(a,"firstChild","previousSibling");f&&d.showAnchor(3==f.nodeType?f.parentNode:f),e.remove(a)}else d.show();delete b.ui._isTransfer,g=!1}},200)}),b.addListener("contextmenu",function(a,b){baidu.editor.ui.Popup.postHide(b)}),b.addListener("keydown",function(a,b){d&&d.dispose(b);var c=b.keyCode||b.which;b.altKey&&90==c&&UE.ui.buttons.fullscreen.onclick()}),b.addListener("wordcount",function(b){a(this,c)}),b.addListener("selectionchange",function(){b.options.elementPathEnabled&&c[(b.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"](),b.options.scaleEnabled&&c[(b.queryCommandState("scale")==-1?"dis":"en")+"ableScale"]()});var h=new baidu.editor.ui.Popup({editor:b,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),b.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(a){this.hide(),b.ui._dialogs[a]&&b.ui._dialogs[a].open()},_onImgSetFloat:function(a){this.hide(),b.execCommand("imagefloat",a)},_setIframeAlign:function(a){var b=h.anchorEl,c=b.cloneNode(!0);switch(a){case-2:c.setAttribute("align","");break;case-1:c.setAttribute("align","left");break;case 1:c.setAttribute("align","right")}b.parentNode.insertBefore(c,b),e.remove(b),h.anchorEl=c,h.showAnchor(h.anchorEl)},_updateIframe:function(){var a=b._iframe=h.anchorEl;e.hasClass(a,"ueditor_baidumap")?(b.selection.getRange().selectNode(a).select(),b.ui._dialogs.mapDialog.open(),h.hide()):(b.ui._dialogs.insertframeDialog.open(),h.hide())},_onRemoveButtonClick:function(a){b.execCommand(a),this.hide()},queryAutoHide:function(a){return a&&a.ownerDocument==b.document&&("img"==a.tagName.toLowerCase()||e.findParentByTagName(a,"a",!0))?a!==h.anchorEl:baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,a)}});h.render(),b.options.imagePopup&&(b.addListener("mouseover",function(a,c){c=c||window.event;var d=c.target||c.srcElement;if(b.ui._dialogs.insertframeDialog&&/iframe/gi.test(d.tagName)){var e=h.formatHtml("<nobr>"+b.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+b.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+b.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+b.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+b.getLang("modify")+"</span></nobr>");e?(h.getDom("content").innerHTML=e,h.anchorEl=d,h.showAnchor(h.anchorEl)):h.hide()}}),b.addListener("selectionchange",function(a,c){if(c){var d="",f="",g=b.selection.getRange().getClosedNode(),i=b.ui._dialogs;if(g&&"IMG"==g.tagName){var j="insertimageDialog";if(g.className.indexOf("edui-faked-video")==-1&&g.className.indexOf("edui-upload-video")==-1||(j="insertvideoDialog"),g.className.indexOf("edui-faked-webapp")!=-1&&(j="webappDialog"),g.src.indexOf("http://api.map.baidu.com")!=-1&&(j="mapDialog"),g.className.indexOf("edui-faked-music")!=-1&&(j="musicDialog"),g.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1&&(j="gmapDialog"),g.getAttribute("anchorname")&&(j="anchorDialog",d=h.formatHtml("<nobr>"+b.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+b.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+b.getLang("delete")+"</span></nobr>")),g.getAttribute("word_img")&&(b.word_img=[g.getAttribute("word_img")],j="wordimageDialog"),(e.hasClass(g,"loadingclass")||e.hasClass(g,"loaderrorclass"))&&(j=""),!i[j])return;f="<nobr>"+b.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+b.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+b.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+b.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+b.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+j+'\');" class="edui-clickable">'+b.getLang("modify")+"</span></nobr>",!d&&(d=h.formatHtml(f))}if(b.ui._dialogs.linkDialog){var k,l=b.queryCommandValue("link");if(l&&(k=l.getAttribute("_href")||l.getAttribute("href",2))){var m=k;k.length>30&&(m=k.substring(0,20)+"..."),d&&(d+='<div style="height:5px;"></div>'),d+=h.formatHtml("<nobr>"+b.getLang("anthorMsg")+': <a target="_blank" href="'+k+'" title="'+k+'" >'+m+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+b.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+b.getLang("clear")+"</span></nobr>"),h.showAnchor(l)}}d?(h.getDom("content").innerHTML=d,h.anchorEl=g||l,h.showAnchor(h.anchorEl)):h.hide()}}))},_initToolbars:function(){for(var a=this.editor,c=this.toolbars||[],d=[],e=0;e<c.length;e++){for(var f=c[e],g=new baidu.editor.ui.Toolbar({theme:a.options.theme}),h=0;h<f.length;h++){var i=f[h],j=null;if("string"==typeof i){if(i=i.toLowerCase(),"|"==i&&(i="Separator"),"||"==i&&(i="Breakline"),baidu.editor.ui[i]&&(j=new baidu.editor.ui[i](a)),"fullscreen"==i){d&&d[0]?d[0].items.splice(0,0,j):j&&g.items.splice(0,0,j);continue}}else j=i;j&&j.id&&g.add(j)}d[e]=g}b.each(UE._customizeUI,function(b,c){var d,e;return(!b.id||b.id==a.key)&&(d=b.execFn.call(a,a,c),void(d&&(e=b.index,void 0===e&&(e=g.items.length),g.add(d,e))))}),this.toolbars=d},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var a=[],b=0;b<this.toolbars.length;b++)a.push(this.toolbars[b].renderHtml());return a.join("")},setFullScreen:function(a){var b=this.editor,c=b.container.parentNode.parentNode;if(this._fullscreen!=a){if(this._fullscreen=a,this.editor.fireEvent("beforefullscreenchange",a),baidu.editor.browser.gecko)var d=b.selection.getRange().createBookmark();if(a){for(;"BODY"!=c.tagName;){var e=baidu.editor.dom.domUtils.getComputedStyle(c,"position");f.push(e),c.style.position="static",c=c.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=b.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(b.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",window.scrollTo(0,window.scrollY),this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,b.iframe.parentNode.style.width="",this._updateFullScreen()}else{for(;"BODY"!=c.tagName;)c.style.position=f.shift(),c=c.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(b.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,b.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px",window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&"true"===b.body.contentEditable){var g=document.createElement("input");document.body.appendChild(g),b.body.contentEditable=!1,setTimeout(function(){g.focus(),setTimeout(function(){b.body.contentEditable=!0,b.fireEvent("fullscreenchanged",a),b.selection.getRange().moveToBookmark(d).select(!0),baidu.editor.dom.domUtils.remove(g),a&&window.scroll(0,0)},0)},0)}"true"===b.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",a),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var a=c.getViewportRect();if(this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+a.width+"px;height:"+a.height+"px;z-index:"+(1*this.getDom().style.zIndex+100),c.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(a.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0),browser.gecko)try{window.onresize()}catch(b){}}},_updateElementPath:function(){var a,b=this.getDom("elementpath");if(this.elementPathEnabled&&(a=this.editor.queryCommandValue("elementpath"))){for(var c,d=[],e=0;c=a[e];e++)d[e]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+e+'&quot;);">'+c+"</span>");b.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+d.join(" &gt; ")+"</div>"}else b.style.display="none"},disableElementPath:function(){var a=this.getDom("elementpath");a.innerHTML="",a.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){var a=this.getDom("elementpath");a.style.display="",this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function a(){o=e.getXY(h),p||(p=g.options.minFrameHeight+j.offsetHeight+k.offsetHeight),m.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+h.offsetWidth+"px;height:"+h.offsetHeight+"px;z-index:"+(g.options.zIndex+1),e.on(f,"mousemove",b),e.on(i,"mouseup",c),e.on(f,"mouseup",c)}function b(a){d();var b=a||window.event;r=b.pageX||f.documentElement.scrollLeft+b.clientX,s=b.pageY||f.documentElement.scrollTop+b.clientY,t=r-o.x,u=s-o.y,t>=q&&(n=!0,m.style.width=t+"px"),u>=p&&(n=!0,m.style.height=u+"px")}function c(){n&&(n=!1,g.ui._actualFrameWidth=m.offsetWidth-2,h.style.width=g.ui._actualFrameWidth+"px",g.setHeight(m.offsetHeight-k.offsetHeight-j.offsetHeight-2,!0)),m&&(m.style.display="none"),d(),e.un(f,"mousemove",b),e.un(i,"mouseup",c),e.un(f,"mouseup",c)}function d(){browser.ie?f.selection.clear():window.getSelection().removeAllRanges()}var f=document,g=this.editor,h=g.container,i=g.document,j=this.getDom("toolbarbox"),k=this.getDom("bottombar"),l=this.getDom("scale"),m=this.getDom("scalelayer"),n=!1,o=null,p=0,q=g.options.minFrameWidth,r=0,s=0,t=0,u=0,v=this;this.editor.addListener("fullscreenchanged",function(a,b){if(b)v.disableScale();else if(v.editor.options.scaleEnabled){v.enableScale();var c=v.editor.document.createElement("span");v.editor.body.appendChild(c),v.editor.body.style.height=Math.max(e.getXY(c).y,v.editor.iframe.offsetHeight-20)+"px",e.remove(c)}}),this.enableScale=function(){1!=g.queryCommandState("source")&&(l.style.display="",this.scaleEnabled=!0,e.on(l,"mousedown",a))},this.disableScale=function(){l.style.display="none",this.scaleEnabled=!1,e.un(l,"mousedown",a)}},isFullScreen:function(){return this._fullscreen},postRender:function(){d.prototype.postRender.call(this);for(var a=0;a<this.toolbars.length;a++)this.toolbars[a].postRender();var b,c=this,e=baidu.editor.dom.domUtils,f=function(){clearTimeout(b),b=setTimeout(function(){c._updateFullScreen()})};e.on(window,"resize",f),c.addListener("destroy",function(){e.un(window,"resize",f),clearTimeout(b)})},showToolbarMsg:function(a,b){if(this.getDom("toolbarmsg_label").innerHTML=a,this.getDom("toolbarmsg").style.display="",!b){var c=this.getDom("upload_dialog");c.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(a){return a?a.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var a=this.getDom();"1"==a.style.zoom?a.style.zoom="100%":a.style.zoom="1"}},b.inherits(a,baidu.editor.ui.UIBase);var g={};UE.ui.Editor=function(c){var d=new UE.Editor(c);d.options.editor=d,b.loadFile(document,{href:d.options.themePath+d.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var f=d.render;return d.render=function(c){c.constructor===String&&(d.key=c,g[c]=d),b.domReady(function(){function b(){if(d.setOpt({labelMap:d.options.labelMap||d.getLang("labelMap")}),new a(d.options),c&&(c.constructor===String&&(c=document.getElementById(c)),c&&c.getAttribute("name")&&(d.options.textarea=c.getAttribute("name")),c&&/script|textarea/gi.test(c.tagName))){var b=document.createElement("div");c.parentNode.insertBefore(b,c);var g=c.value||c.innerHTML;d.options.initialContent=/^[\t\r\n ]*$/.test(g)?d.options.initialContent:g.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),c.className&&(b.className=c.className),c.style.cssText&&(b.style.cssText=c.style.cssText),/textarea/i.test(c.tagName)?(d.textarea=c,d.textarea.style.display="none"):c.parentNode.removeChild(c),c.id&&(b.id=c.id,e.removeAttributes(c,"id")),c=b,c.innerHTML=""}e.addClass(c,"edui-"+d.options.theme),d.ui.render(c);var h=d.options;d.container=d.ui.getDom();for(var i,j=e.findParents(c,!0),k=[],l=0;i=j[l];l++)k[l]=i.style.display,i.style.display="block";if(h.initialFrameWidth)h.minFrameWidth=h.initialFrameWidth;else{h.minFrameWidth=h.initialFrameWidth=c.offsetWidth;var m=c.style.width;/%$/.test(m)&&(h.initialFrameWidth=m)}h.initialFrameHeight?h.minFrameHeight=h.initialFrameHeight:h.initialFrameHeight=h.minFrameHeight=c.offsetHeight;for(var i,l=0;i=j[l];l++)i.style.display=k[l];c.style.height&&(c.style.height=""),d.container.style.width=h.initialFrameWidth+(/%$/.test(h.initialFrameWidth)?"":"px"),d.container.style.zIndex=h.zIndex,f.call(d,d.ui.getDom("iframeholder")),d.fireEvent("afteruiready")}d.langIsReady?b():d.addListener("langReady",b)})},d},UE.getEditor=function(a,b){var c=g[a];return c||(c=g[a]=new UE.ui.Editor(b),c.render(a)),c},UE.delEditor=function(a){var b;(b=g[a])&&(b.key&&b.destroy(),delete g[a])},UE.registerUI=function(a,c,d,e){b.each(a.split(/\s+/),function(a){UE._customizeUI[a]={id:e,execFn:c,index:d}})}}(),UE.registerUI("message",function(a){function b(){var a=g.ui.getDom("toolbarbox");a&&(c.style.top=a.offsetHeight+3+"px"),c.style.zIndex=Math.max(g.options.zIndex,g.iframe.style.zIndex)+1}var c,d=baidu.editor.ui,e=d.Message,f=[],g=a;g.addListener("ready",function(){c=document.getElementById(g.ui.id+"_message_holder"),b(),setTimeout(function(){b()},500)}),g.addListener("showmessage",function(a,d){d=utils.isString(d)?{content:d}:d;var h=new e({timeout:d.timeout,type:d.type,content:d.content,keepshow:d.keepshow,editor:g}),i=d.id||"msg_"+(+new Date).toString(36);return h.render(c),f[i]=h,h.reset(d),b(),i}),g.addListener("updatemessage",function(a,b,d){d=utils.isString(d)?{content:d}:d;var e=f[b];e.render(c),e&&e.reset(d)}),g.addListener("hidemessage",function(a,b){var c=f[b];c&&c.hide()})}),UE.registerUI("autosave",function(a){var b=null,c=null;a.on("afterautosave",function(){clearTimeout(b),b=setTimeout(function(){c&&a.trigger("hidemessage",c),c=a.trigger("showmessage",{content:a.getLang("autosave.success"),timeout:2e3})},2e3)})})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJwbHVnaW5zL3VlZGl0b3IvdWVkaXRvci5hbGwubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogVUVkaXRvclxuICogdmVyc2lvbjogdWVkaXRvclxuICogYnVpbGQ6IFdlZCBBdWcgMTAgMjAxNiAxMTowNjoxNiBHTVQrMDgwMCAoQ1NUKVxuICovXG5cbiFmdW5jdGlvbigpe2Z1bmN0aW9uIGdldExpc3RlbmVyKGEsYixjKXt2YXIgZDtyZXR1cm4gYj1iLnRvTG93ZXJDYXNlKCksKGQ9YS5fX2FsbExpc3RlbmVyc3x8YyYmKGEuX19hbGxMaXN0ZW5lcnM9e30pKSYmKGRbYl18fGMmJihkW2JdPVtdKSl9ZnVuY3Rpb24gZ2V0RG9tTm9kZShhLGIsYyxkLGUsZil7dmFyIGcsaD1kJiZhW2JdO2ZvcighaCYmKGg9YVtjXSk7IWgmJihnPShnfHxhKS5wYXJlbnROb2RlKTspe2lmKFwiQk9EWVwiPT1nLnRhZ05hbWV8fGYmJiFmKGcpKXJldHVybiBudWxsO2g9Z1tjXX1yZXR1cm4gaCYmZSYmIWUoaCk/Z2V0RG9tTm9kZShoLGIsYywhMSxlKTpofVVFRElUT1JfQ09ORklHPXdpbmRvdy5VRURJVE9SX0NPTkZJR3x8e307dmFyIGJhaWR1PXdpbmRvdy5iYWlkdXx8e307d2luZG93LmJhaWR1PWJhaWR1LHdpbmRvdy5VRT1iYWlkdS5lZGl0b3I9d2luZG93LlVFfHx7fSxVRS5wbHVnaW5zPXt9LFVFLmNvbW1hbmRzPXt9LFVFLmluc3RhbnRzPXt9LFVFLkkxOE49e30sVUUuX2N1c3RvbWl6ZVVJPXt9LFVFLnZlcnNpb249XCIxLjQuM1wiO3ZhciBkb209VUUuZG9tPXt9LGJyb3dzZXI9VUUuYnJvd3Nlcj1mdW5jdGlvbigpe3ZhciBhPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxiPXdpbmRvdy5vcGVyYSxjPXtpZTovKG1zaWVcXHN8dHJpZGVudC4qcnY6KShbXFx3Ll0rKS8udGVzdChhKSxvcGVyYTohIWImJmIudmVyc2lvbix3ZWJraXQ6YS5pbmRleE9mKFwiIGFwcGxld2Via2l0L1wiKT4tMSxtYWM6YS5pbmRleE9mKFwibWFjaW50b3NoXCIpPi0xLHF1aXJrczpcIkJhY2tDb21wYXRcIj09ZG9jdW1lbnQuY29tcGF0TW9kZX07Yy5nZWNrbz1cIkdlY2tvXCI9PW5hdmlnYXRvci5wcm9kdWN0JiYhYy53ZWJraXQmJiFjLm9wZXJhJiYhYy5pZTt2YXIgZD0wO2lmKGMuaWUpe3ZhciBlPWEubWF0Y2goLyg/Om1zaWVcXHMoW1xcdy5dKykpLyksZj1hLm1hdGNoKC8oPzp0cmlkZW50LipydjooW1xcdy5dKykpLyk7ZD1lJiZmJiZlWzFdJiZmWzFdP01hdGgubWF4KDEqZVsxXSwxKmZbMV0pOmUmJmVbMV0/MSplWzFdOmYmJmZbMV0/MSpmWzFdOjAsYy5pZTExQ29tcGF0PTExPT1kb2N1bWVudC5kb2N1bWVudE1vZGUsYy5pZTlDb21wYXQ9OT09ZG9jdW1lbnQuZG9jdW1lbnRNb2RlLGMuaWU4PSEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlLGMuaWU4Q29tcGF0PTg9PWRvY3VtZW50LmRvY3VtZW50TW9kZSxjLmllN0NvbXBhdD03PT1kJiYhZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHw3PT1kb2N1bWVudC5kb2N1bWVudE1vZGUsYy5pZTZDb21wYXQ9ZDw3fHxjLnF1aXJrcyxjLmllOWFib3ZlPWQ+OCxjLmllOWJlbG93PWQ8OSxjLmllMTFhYm92ZT1kPjEwLGMuaWUxMWJlbG93PWQ8MTF9aWYoYy5nZWNrbyl7dmFyIGc9YS5tYXRjaCgvcnY6KFtcXGRcXC5dKykvKTtnJiYoZz1nWzFdLnNwbGl0KFwiLlwiKSxkPTFlNCpnWzBdKzEwMCooZ1sxXXx8MCkrMSooZ1syXXx8MCkpfXJldHVybi9jaHJvbWVcXC8oXFxkK1xcLlxcZCkvaS50ZXN0KGEpJiYoYy5jaHJvbWU9K1JlZ0V4cC4kMSksLyhcXGQrXFwuXFxkKT8oPzpcXC5cXGQpP1xccytzYWZhcmlcXC8/KFxcZCtcXC5cXGQrKT8vaS50ZXN0KGEpJiYhL2Nocm9tZS9pLnRlc3QoYSkmJihjLnNhZmFyaT0rKFJlZ0V4cC4kMXx8UmVnRXhwLiQyKSksYy5vcGVyYSYmKGQ9cGFyc2VGbG9hdChiLnZlcnNpb24oKSkpLGMud2Via2l0JiYoZD1wYXJzZUZsb2F0KGEubWF0Y2goLyBhcHBsZXdlYmtpdFxcLyhcXGQrKS8pWzFdKSksYy52ZXJzaW9uPWQsYy5pc0NvbXBhdGlibGU9IWMubW9iaWxlJiYoYy5pZSYmZD49Nnx8Yy5nZWNrbyYmZD49MTA4MDF8fGMub3BlcmEmJmQ+PTkuNXx8Yy5haXImJmQ+PTF8fGMud2Via2l0JiZkPj01MjJ8fCExKSxjfSgpLGllPWJyb3dzZXIuaWUsd2Via2l0PWJyb3dzZXIud2Via2l0LGdlY2tvPWJyb3dzZXIuZ2Vja28sb3BlcmE9YnJvd3Nlci5vcGVyYSx1dGlscz1VRS51dGlscz17ZWFjaDpmdW5jdGlvbihhLGIsYyl7aWYobnVsbCE9YSlpZihhLmxlbmd0aD09PSthLmxlbmd0aCl7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWlmKGIuY2FsbChjLGFbZF0sZCxhKT09PSExKXJldHVybiExfWVsc2UgZm9yKHZhciBmIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShmKSYmYi5jYWxsKGMsYVtmXSxmLGEpPT09ITEpcmV0dXJuITF9LG1ha2VJbnN0YW5jZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgRnVuY3Rpb247cmV0dXJuIGIucHJvdG90eXBlPWEsYT1uZXcgYixiLnByb3RvdHlwZT1udWxsLGF9LGV4dGVuZDpmdW5jdGlvbihhLGIsYyl7aWYoYilmb3IodmFyIGQgaW4gYiljJiZhLmhhc093blByb3BlcnR5KGQpfHwoYVtkXT1iW2RdKTtyZXR1cm4gYX0sZXh0ZW5kMjpmdW5jdGlvbihhKXtmb3IodmFyIGI9YXJndW1lbnRzLGM9MTtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtmb3IodmFyIGUgaW4gZClhLmhhc093blByb3BlcnR5KGUpfHwoYVtlXT1kW2VdKX1yZXR1cm4gYX0saW5oZXJpdHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnByb3RvdHlwZSxkPXV0aWxzLm1ha2VJbnN0YW5jZShiLnByb3RvdHlwZSk7cmV0dXJuIHV0aWxzLmV4dGVuZChkLGMsITApLGEucHJvdG90eXBlPWQsZC5jb25zdHJ1Y3Rvcj1hfSxiaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX0sZGVmZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBmdW5jdGlvbigpe2MmJmNsZWFyVGltZW91dChkKSxkPXNldFRpbWVvdXQoYSxiKX19LGluZGV4T2Y6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPS0xO3JldHVybiBjPXRoaXMuaXNOdW1iZXIoYyk/YzowLHRoaXMuZWFjaChhLGZ1bmN0aW9uKGEsZSl7aWYoZT49YyYmYT09PWIpcmV0dXJuIGQ9ZSwhMX0pLGR9LHJlbW92ZUl0ZW06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYVtjXT09PWImJihhLnNwbGljZShjLDEpLGMtLSl9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvKF5bIFxcdFxcblxccl0rKXwoWyBcXHRcXG5cXHJdKyQpL2csXCJcIil9LGxpc3RUb01hcDpmdW5jdGlvbihhKXtpZighYSlyZXR1cm57fTthPXV0aWxzLmlzQXJyYXkoYSk/YTphLnNwbGl0KFwiLFwiKTtmb3IodmFyIGIsYz0wLGQ9e307Yj1hW2MrK107KWRbYi50b1VwcGVyQ2FzZSgpXT1kW2JdPTE7cmV0dXJuIGR9LHVuaHRtbDpmdW5jdGlvbihhLGIpe3JldHVybiBhP2EucmVwbGFjZShifHwvWyY8XCI+J10oPzooYW1wfGx0fHF1b3R8Z3R8IzM5fG5ic3B8I1xcZCspOyk/L2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9hOntcIjxcIjpcIiZsdDtcIixcIiZcIjpcIiZhbXA7XCIsJ1wiJzpcIiZxdW90O1wiLFwiPlwiOlwiJmd0O1wiLFwiJ1wiOlwiJiMzOTtcIn1bYV19KTpcIlwifSx1bmh0bWxGb3JVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9hLnJlcGxhY2UoYnx8L1s8XCI+J10vZyxmdW5jdGlvbihhKXtyZXR1cm57XCI8XCI6XCImbHQ7XCIsXCImXCI6XCImYW1wO1wiLCdcIic6XCImcXVvdDtcIixcIj5cIjpcIiZndDtcIixcIidcIjpcIiYjMzk7XCJ9W2FdfSk6XCJcIn0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnJlcGxhY2UoLyYoKGd8bHxxdW8pdHxhbXB8IzM5fG5ic3ApOy9nLGZ1bmN0aW9uKGEpe3JldHVybntcIiZsdDtcIjpcIjxcIixcIiZhbXA7XCI6XCImXCIsXCImcXVvdDtcIjonXCInLFwiJmd0O1wiOlwiPlwiLFwiJiMzOTtcIjpcIidcIixcIiZuYnNwO1wiOlwiIFwifVthXX0pOlwiXCJ9LGNzc1N0eWxlVG9Eb21TdHlsZTpmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuc3R5bGUsYj17XCJmbG9hdFwiOnZvaWQgMCE9YS5jc3NGbG9hdD9cImNzc0Zsb2F0XCI6dm9pZCAwIT1hLnN0eWxlRmxvYXQ/XCJzdHlsZUZsb2F0XCI6XCJmbG9hdFwifTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGJbYV18fChiW2FdPWEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8tLi9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpfSkpfX0oKSxsb2FkRmlsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxjKXt0cnl7Zm9yKHZhciBkLGU9MDtkPWJbZSsrXTspaWYoZC5kb2M9PT1hJiZkLnVybD09KGMuc3JjfHxjLmhyZWYpKXJldHVybiBkfWNhdGNoKGYpe3JldHVybiBudWxsfX12YXIgYj1bXTtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe3ZhciBmPWEoYyxkKTtpZihmKXJldHVybiB2b2lkKGYucmVhZHk/ZSYmZSgpOmYuZnVucy5wdXNoKGUpKTtpZihiLnB1c2goe2RvYzpjLHVybDpkLnNyY3x8ZC5ocmVmLGZ1bnM6W2VdfSksIWMuYm9keSl7dmFyIGc9W107Zm9yKHZhciBoIGluIGQpXCJ0YWdcIiE9aCYmZy5wdXNoKGgrJz1cIicrZFtoXSsnXCInKTtyZXR1cm4gdm9pZCBjLndyaXRlKFwiPFwiK2QudGFnK1wiIFwiK2cuam9pbihcIiBcIikrXCIgPjwvXCIrZC50YWcrXCI+XCIpfWlmKCFkLmlkfHwhYy5nZXRFbGVtZW50QnlJZChkLmlkKSl7dmFyIGk9Yy5jcmVhdGVFbGVtZW50KGQudGFnKTtkZWxldGUgZC50YWc7Zm9yKHZhciBoIGluIGQpaS5zZXRBdHRyaWJ1dGUoaCxkW2hdKTtpLm9ubG9hZD1pLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKCF0aGlzLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QodGhpcy5yZWFkeVN0YXRlKSl7aWYoZj1hKGMsZCksZi5mdW5zLmxlbmd0aD4wKXtmLnJlYWR5PTE7Zm9yKHZhciBiO2I9Zi5mdW5zLnBvcCgpOyliKCl9aS5vbmxvYWQ9aS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbH19LGkub25lcnJvcj1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiVGhlIGxvYWQgXCIrKGQuaHJlZnx8ZC5zcmMpK1wiIGZhaWxzLGNoZWNrIHRoZSB1cmwgc2V0dGluZ3Mgb2YgZmlsZSB1ZWRpdG9yLmNvbmZpZy5qcyBcIil9LGMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGkpfX19KCksaXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXtpZihudWxsPT1hKXJldHVybiEwO2lmKHRoaXMuaXNBcnJheShhKXx8dGhpcy5pc1N0cmluZyhhKSlyZXR1cm4gMD09PWEubGVuZ3RoO2Zvcih2YXIgYiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuITE7cmV0dXJuITB9LGZpeENvbG9yOmZ1bmN0aW9uKGEsYil7aWYoL2NvbG9yL2kudGVzdChhKSYmL3JnYmE/Ly50ZXN0KGIpKXt2YXIgYz1iLnNwbGl0KFwiLFwiKTtpZihjLmxlbmd0aD4zKXJldHVyblwiXCI7Yj1cIiNcIjtmb3IodmFyIGQsZT0wO2Q9Y1tlKytdOylkPXBhcnNlSW50KGQucmVwbGFjZSgvW15cXGRdL2dpLFwiXCIpLDEwKS50b1N0cmluZygxNiksYis9MT09ZC5sZW5ndGg/XCIwXCIrZDpkO2I9Yi50b1VwcGVyQ2FzZSgpfXJldHVybiBifSxvcHRDc3M6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXJldHVyblwiXCI7dmFyIGM9YS50b3AsZD1hLmJvdHRvbSxlPWEubGVmdCxmPWEucmlnaHQsZz1cIlwiO2lmKGMmJmUmJmQmJmYpZys9XCI7XCIrYitcIjpcIisoYz09ZCYmZD09ZSYmZT09Zj9jOmM9PWQmJmU9PWY/YytcIiBcIitlOmU9PWY/YytcIiBcIitlK1wiIFwiK2Q6YytcIiBcIitmK1wiIFwiK2QrXCIgXCIrZSkrXCI7XCI7ZWxzZSBmb3IodmFyIGggaW4gYSlnKz1cIjtcIitiK1wiLVwiK2grXCI6XCIrYVtoXStcIjtcIjtyZXR1cm4gZ312YXIgYyxkO3JldHVybiBhPWEucmVwbGFjZSgvKHBhZGRpbmd8bWFyZ2lufGJvcmRlcilcXC0oW146XSspOihbXjtdKyk7Py9naSxmdW5jdGlvbihhLGIsZSxmKXtpZigxPT1mLnNwbGl0KFwiIFwiKS5sZW5ndGgpc3dpdGNoKGIpe2Nhc2VcInBhZGRpbmdcIjpyZXR1cm4hYyYmKGM9e30pLGNbZV09ZixcIlwiO2Nhc2VcIm1hcmdpblwiOnJldHVybiFkJiYoZD17fSksZFtlXT1mLFwiXCI7Y2FzZVwiYm9yZGVyXCI6cmV0dXJuXCJpbml0aWFsXCI9PWY/XCJcIjphfXJldHVybiBhfSksYSs9YihjLFwicGFkZGluZ1wiKStiKGQsXCJtYXJnaW5cIiksYS5yZXBsYWNlKC9eWyBcXG5cXHJcXHQ7XSp8WyBcXG5cXHJcXHRdKiQvLFwiXCIpLnJlcGxhY2UoLzsoWyBcXG5cXHJcXHRdKyl8XFwxOy9nLFwiO1wiKS5yZXBsYWNlKC8oJigobHxnKXR8cXVvdHwjMzkpKT87ezIsfS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/YitcIjs7XCI6XCI7XCJ9KX0sY2xvbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYztiPWJ8fHt9O2Zvcih2YXIgZCBpbiBhKWEuaGFzT3duUHJvcGVydHkoZCkmJihjPWFbZF0sXCJvYmplY3RcIj09dHlwZW9mIGM/KGJbZF09dXRpbHMuaXNBcnJheShjKT9bXTp7fSx1dGlscy5jbG9uZShhW2RdLGJbZF0pKTpiW2RdPWMpO3JldHVybiBifSx0cmFuc1VuaXRUb1B4OmZ1bmN0aW9uKGEpe2lmKCEvKHB0fGNtKS8udGVzdChhKSlyZXR1cm4gYTt2YXIgYjtzd2l0Y2goYS5yZXBsYWNlKC8oW1xcZC5dKykoXFx3KykvLGZ1bmN0aW9uKGMsZCxlKXthPWQsYj1lfSksYil7Y2FzZVwiY21cIjphPTI1KnBhcnNlRmxvYXQoYSk7YnJlYWs7Y2FzZVwicHRcIjphPU1hdGgucm91bmQoOTYqcGFyc2VGbG9hdChhKS83Mil9cmV0dXJuIGErKGE/XCJweFwiOlwiXCIpfSxkb21SZWFkeTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7YS5pc1JlYWR5PSEwO2Zvcih2YXIgYztjPWIucG9wKCk7YygpKTt9dmFyIGI9W107cmV0dXJuIGZ1bmN0aW9uKGMsZCl7ZD1kfHx3aW5kb3c7dmFyIGU9ZC5kb2N1bWVudDtjJiZiLnB1c2goYyksXCJjb21wbGV0ZVwiPT09ZS5yZWFkeVN0YXRlP2EoZSk6KGUuaXNSZWFkeSYmYShlKSxicm93c2VyLmllJiYxMSE9YnJvd3Nlci52ZXJzaW9uPyghZnVuY3Rpb24oKXtpZighZS5pc1JlYWR5KXt0cnl7ZS5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwoXCJsZWZ0XCIpfWNhdGNoKGIpe3JldHVybiB2b2lkIHNldFRpbWVvdXQoYXJndW1lbnRzLmNhbGxlZSwwKX1hKGUpfX0oKSxkLmF0dGFjaEV2ZW50KFwib25sb2FkXCIsZnVuY3Rpb24oKXthKGUpfSkpOihlLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsYXJndW1lbnRzLmNhbGxlZSwhMSksYShlKX0sITEpLGQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbigpe2EoZSl9LCExKSkpfX0oKSxjc3NSdWxlOmJyb3dzZXIuaWUmJjExIT1icm93c2VyLnZlcnNpb24/ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYodm9pZCAwPT09Ynx8YiYmYi5ub2RlVHlwZSYmOT09Yi5ub2RlVHlwZSl7aWYoYz1iJiZiLm5vZGVUeXBlJiY5PT1iLm5vZGVUeXBlP2I6Y3x8ZG9jdW1lbnQsZD1jLmluZGV4TGlzdHx8KGMuaW5kZXhMaXN0PXt9KSxlPWRbYV0sdm9pZCAwIT09ZSlyZXR1cm4gYy5zdHlsZVNoZWV0c1tlXS5jc3NUZXh0fWVsc2V7aWYoYz1jfHxkb2N1bWVudCxkPWMuaW5kZXhMaXN0fHwoYy5pbmRleExpc3Q9e30pLGU9ZFthXSxcIlwiPT09YilyZXR1cm4gdm9pZCAwIT09ZSYmKGMuc3R5bGVTaGVldHNbZV0uY3NzVGV4dD1cIlwiLGRlbGV0ZSBkW2FdLCEwKTt2b2lkIDAhPT1lP3NoZWV0U3R5bGU9Yy5zdHlsZVNoZWV0c1tlXTooc2hlZXRTdHlsZT1jLmNyZWF0ZVN0eWxlU2hlZXQoXCJcIixlPWMuc3R5bGVTaGVldHMubGVuZ3RoKSxkW2FdPWUpLHNoZWV0U3R5bGUuY3NzVGV4dD1ifX06ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZiLm5vZGVUeXBlJiY5PT1iLm5vZGVUeXBlPyhjPWImJmIubm9kZVR5cGUmJjk9PWIubm9kZVR5cGU/YjpjfHxkb2N1bWVudCxkPWMuZ2V0RWxlbWVudEJ5SWQoYSksZD9kLmlubmVySFRNTDp2b2lkIDApOihjPWN8fGRvY3VtZW50LGQ9Yy5nZXRFbGVtZW50QnlJZChhKSxcIlwiPT09Yj8hIWQmJihkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCksITApOnZvaWQoZD9kLmlubmVySFRNTD1iOihkPWMuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLGQuaWQ9YSxkLmlubmVySFRNTD1iLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGQpKSkpfSxzb3J0OmZ1bmN0aW9uKGEsYil7Yj1ifHxmdW5jdGlvbihhLGIpe3JldHVybiBhLmxvY2FsZUNvbXBhcmUoYil9O2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylmb3IodmFyIGU9YyxmPWEubGVuZ3RoO2U8ZjtlKyspaWYoYihhW2NdLGFbZV0pPjApe3ZhciBnPWFbY107YVtjXT1hW2VdLGFbZV09Z31yZXR1cm4gYX0sc2VyaWFsaXplUGFyYW06ZnVuY3Rpb24oYSl7dmFyIGI9W107Zm9yKHZhciBjIGluIGEpaWYoXCJtZXRob2RcIiE9YyYmXCJ0aW1lb3V0XCIhPWMmJlwiYXN5bmNcIiE9YylpZihcImZ1bmN0aW9uXCIhPSh0eXBlb2YgYVtjXSkudG9Mb3dlckNhc2UoKSYmXCJvYmplY3RcIiE9KHR5cGVvZiBhW2NdKS50b0xvd2VyQ2FzZSgpKWIucHVzaChlbmNvZGVVUklDb21wb25lbnQoYykrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGFbY10pKTtlbHNlIGlmKHV0aWxzLmlzQXJyYXkoYVtjXSkpZm9yKHZhciBkPTA7ZDxhW2NdLmxlbmd0aDtkKyspYi5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChjKStcIltdPVwiK2VuY29kZVVSSUNvbXBvbmVudChhW2NdW2RdKSk7cmV0dXJuIGIuam9pbihcIiZcIil9LGZvcm1hdFVybDpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoLyYmL2csXCImXCIpO3JldHVybiBiPWIucmVwbGFjZSgvXFw/Ji9nLFwiP1wiKSxiPWIucmVwbGFjZSgvJiQvZyxcIlwiKSxiPWIucmVwbGFjZSgvJiMvZyxcIiNcIiksYj1iLnJlcGxhY2UoLyYrL2csXCImXCIpfSxpc0Nyb3NzRG9tYWluVXJsOmZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3JldHVybiBiLmhyZWY9YSxicm93c2VyLmllJiYoYi5ocmVmPWIuaHJlZiksIShiLnByb3RvY29sPT1sb2NhdGlvbi5wcm90b2NvbCYmYi5ob3N0bmFtZT09bG9jYXRpb24uaG9zdG5hbWUmJihiLnBvcnQ9PWxvY2F0aW9uLnBvcnR8fFwiODBcIj09Yi5wb3J0JiZcIlwiPT1sb2NhdGlvbi5wb3J0fHxcIlwiPT1iLnBvcnQmJlwiODBcIj09bG9jYXRpb24ucG9ydCkpfSxjbGVhckVtcHR5QXR0cnM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpXCJcIj09PWFbYl0mJmRlbGV0ZSBhW2JdO3JldHVybiBhfSxzdHIyanNvbjpmdW5jdGlvbihhKXtyZXR1cm4gdXRpbHMuaXNTdHJpbmcoYSk/d2luZG93LkpTT04/SlNPTi5wYXJzZShhKTpuZXcgRnVuY3Rpb24oXCJyZXR1cm4gXCIrdXRpbHMudHJpbShhfHxcIlwiKSkoKTpudWxsfSxqc29uMnN0cjpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuL1tcIlxcXFxcXHgwMC1cXHgxZl0vLnRlc3QoYSkmJihhPWEucmVwbGFjZSgvW1wiXFxcXFxceDAwLVxceDFmXS9nLGZ1bmN0aW9uKGEpe3ZhciBiPWVbYV07cmV0dXJuIGI/YjooYj1hLmNoYXJDb2RlQXQoKSxcIlxcXFx1MDBcIitNYXRoLmZsb29yKGIvMTYpLnRvU3RyaW5nKDE2KSsoYiUxNikudG9TdHJpbmcoMTYpKX0pKSwnXCInK2ErJ1wiJ31mdW5jdGlvbiBiKGEpe3ZhciBiLGMsZCxlPVtcIltcIl0sZj1hLmxlbmd0aDtmb3IoYz0wO2M8ZjtjKyspc3dpdGNoKGQ9YVtjXSx0eXBlb2YgZCl7Y2FzZVwidW5kZWZpbmVkXCI6Y2FzZVwiZnVuY3Rpb25cIjpjYXNlXCJ1bmtub3duXCI6YnJlYWs7ZGVmYXVsdDpiJiZlLnB1c2goXCIsXCIpLGUucHVzaCh1dGlscy5qc29uMnN0cihkKSksYj0xfXJldHVybiBlLnB1c2goXCJdXCIpLGUuam9pbihcIlwiKX1mdW5jdGlvbiBjKGEpe3JldHVybiBhPDEwP1wiMFwiK2E6YX1mdW5jdGlvbiBkKGEpe3JldHVybidcIicrYS5nZXRGdWxsWWVhcigpK1wiLVwiK2MoYS5nZXRNb250aCgpKzEpK1wiLVwiK2MoYS5nZXREYXRlKCkpK1wiVFwiK2MoYS5nZXRIb3VycygpKStcIjpcIitjKGEuZ2V0TWludXRlcygpKStcIjpcIitjKGEuZ2V0U2Vjb25kcygpKSsnXCInfWlmKHdpbmRvdy5KU09OKXJldHVybiBKU09OLnN0cmluZ2lmeTt2YXIgZT17XCJcXGJcIjpcIlxcXFxiXCIsXCJcXHRcIjpcIlxcXFx0XCIsXCJcXG5cIjpcIlxcXFxuXCIsXCJcXGZcIjpcIlxcXFxmXCIsXCJcXHJcIjpcIlxcXFxyXCIsJ1wiJzonXFxcXFwiJyxcIlxcXFxcIjpcIlxcXFxcXFxcXCJ9O3JldHVybiBmdW5jdGlvbihjKXtzd2l0Y2godHlwZW9mIGMpe2Nhc2VcInVuZGVmaW5lZFwiOnJldHVyblwidW5kZWZpbmVkXCI7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIGlzRmluaXRlKGMpP1N0cmluZyhjKTpcIm51bGxcIjtjYXNlXCJzdHJpbmdcIjpyZXR1cm4gYShjKTtjYXNlXCJib29sZWFuXCI6cmV0dXJuIFN0cmluZyhjKTtkZWZhdWx0OmlmKG51bGw9PT1jKXJldHVyblwibnVsbFwiO2lmKHV0aWxzLmlzQXJyYXkoYykpcmV0dXJuIGIoYyk7aWYodXRpbHMuaXNEYXRlKGMpKXJldHVybiBkKGMpO3ZhciBlLGYsZz1bXCJ7XCJdLGg9dXRpbHMuanNvbjJzdHI7Zm9yKHZhciBpIGluIGMpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsaSkpc3dpdGNoKGY9Y1tpXSx0eXBlb2YgZil7Y2FzZVwidW5kZWZpbmVkXCI6Y2FzZVwidW5rbm93blwiOmNhc2VcImZ1bmN0aW9uXCI6YnJlYWs7ZGVmYXVsdDplJiZnLnB1c2goXCIsXCIpLGU9MSxnLnB1c2goaChpKStcIjpcIitoKGYpKX1yZXR1cm4gZy5wdXNoKFwifVwiKSxnLmpvaW4oXCJcIil9fX0oKX07dXRpbHMuZWFjaChbXCJTdHJpbmdcIixcIkZ1bmN0aW9uXCIsXCJBcnJheVwiLFwiTnVtYmVyXCIsXCJSZWdFeHBcIixcIk9iamVjdFwiLFwiRGF0ZVwiXSxmdW5jdGlvbihhKXtVRS51dGlsc1tcImlzXCIrYV09ZnVuY3Rpb24oYil7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkoYik9PVwiW29iamVjdCBcIithK1wiXVwifX0pO3ZhciBFdmVudEJhc2U9VUUuRXZlbnRCYXNlPWZ1bmN0aW9uKCl7fTtFdmVudEJhc2UucHJvdG90eXBlPXthZGRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe2E9dXRpbHMudHJpbShhKS5zcGxpdCgvXFxzKy8pO2Zvcih2YXIgYyxkPTA7Yz1hW2QrK107KWdldExpc3RlbmVyKHRoaXMsYywhMCkucHVzaChiKX0sb246ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihhLGIpfSxvZmY6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5yZW1vdmVMaXN0ZW5lcihhLGIpfSx0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlyZUV2ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXthPXV0aWxzLnRyaW0oYSkuc3BsaXQoL1xccysvKTtmb3IodmFyIGMsZD0wO2M9YVtkKytdOyl1dGlscy5yZW1vdmVJdGVtKGdldExpc3RlbmVyKHRoaXMsYyl8fFtdLGIpfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF07YT11dGlscy50cmltKGEpLnNwbGl0KFwiIFwiKTtmb3IodmFyIGIsYz0wO2I9YVtjKytdOyl7dmFyIGQsZSxmLGc9Z2V0TGlzdGVuZXIodGhpcyxiKTtpZihnKWZvcihmPWcubGVuZ3RoO2YtLTspaWYoZ1tmXSl7aWYoZT1nW2ZdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlPT09ITApcmV0dXJuIGU7dm9pZCAwIT09ZSYmKGQ9ZSl9KGU9dGhpc1tcIm9uXCIrYi50b0xvd2VyQ2FzZSgpXSkmJihkPWUuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gZH19O3ZhciBkdGQ9ZG9tLmR0ZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7Zm9yKHZhciBiIGluIGEpYVtiLnRvVXBwZXJDYXNlKCldPWFbYl07cmV0dXJuIGF9dmFyIGI9dXRpbHMuZXh0ZW5kMixjPWEoe2lzaW5kZXg6MSxmaWVsZHNldDoxfSksZD1hKHtpbnB1dDoxLGJ1dHRvbjoxLHNlbGVjdDoxLHRleHRhcmVhOjEsbGFiZWw6MX0pLGU9YihhKHthOjF9KSxkKSxmPWIoe2lmcmFtZToxfSxlKSxnPWEoe2hyOjEsdWw6MSxtZW51OjEsZGl2OjEsYmxvY2txdW90ZToxLG5vc2NyaXB0OjEsdGFibGU6MSxjZW50ZXI6MSxhZGRyZXNzOjEsZGlyOjEscHJlOjEsaDU6MSxkbDoxLGg0OjEsbm9mcmFtZXM6MSxoNjoxLG9sOjEsaDE6MSxoMzoxLGgyOjF9KSxoPWEoe2luczoxLGRlbDoxLHNjcmlwdDoxLHN0eWxlOjF9KSxpPWIoYSh7YjoxLGFjcm9ueW06MSxiZG86MSxcInZhclwiOjEsXCIjXCI6MSxhYmJyOjEsY29kZToxLGJyOjEsaToxLGNpdGU6MSxrYmQ6MSx1OjEsc3RyaWtlOjEsczoxLHR0OjEsc3Ryb25nOjEscToxLHNhbXA6MSxlbToxLGRmbjoxLHNwYW46MX0pLGgpLGo9YihhKHtzdWI6MSxpbWc6MSxlbWJlZDoxLG9iamVjdDoxLHN1cDoxLGJhc2Vmb250OjEsbWFwOjEsYXBwbGV0OjEsZm9udDoxLGJpZzoxLHNtYWxsOjF9KSxpKSxrPWIoYSh7cDoxfSksaiksbD1iKGEoe2lmcmFtZToxfSksaixkKSxtPWEoe2ltZzoxLGVtYmVkOjEsbm9zY3JpcHQ6MSxicjoxLGtiZDoxLGNlbnRlcjoxLGJ1dHRvbjoxLGJhc2Vmb250OjEsaDU6MSxoNDoxLHNhbXA6MSxoNjoxLG9sOjEsaDE6MSxoMzoxLGgyOjEsZm9ybToxLGZvbnQ6MSxcIiNcIjoxLHNlbGVjdDoxLG1lbnU6MSxpbnM6MSxhYmJyOjEsbGFiZWw6MSxjb2RlOjEsdGFibGU6MSxzY3JpcHQ6MSxjaXRlOjEsaW5wdXQ6MSxpZnJhbWU6MSxzdHJvbmc6MSx0ZXh0YXJlYToxLG5vZnJhbWVzOjEsYmlnOjEsc21hbGw6MSxzcGFuOjEsaHI6MSxzdWI6MSxiZG86MSxcInZhclwiOjEsZGl2OjEsb2JqZWN0OjEsc3VwOjEsc3RyaWtlOjEsZGlyOjEsbWFwOjEsZGw6MSxhcHBsZXQ6MSxkZWw6MSxpc2luZGV4OjEsZmllbGRzZXQ6MSx1bDoxLGI6MSxhY3JvbnltOjEsYToxLGJsb2NrcXVvdGU6MSxpOjEsdToxLHM6MSx0dDoxLGFkZHJlc3M6MSxxOjEscHJlOjEscDoxLGVtOjEsZGZuOjF9KSxuPWIoYSh7YTowfSksbCksbz1hKHt0cjoxfSkscD1hKHtcIiNcIjoxfSkscT1iKGEoe3BhcmFtOjF9KSxtKSxyPWIoYSh7Zm9ybToxfSksYyxmLGcsaykscz1hKHtsaToxLG9sOjEsdWw6MX0pLHQ9YSh7c3R5bGU6MSxzY3JpcHQ6MX0pLHU9YSh7YmFzZToxLGxpbms6MSxtZXRhOjEsdGl0bGU6MX0pLHY9Yih1LHQpLHc9YSh7aGVhZDoxLGJvZHk6MX0pLHg9YSh7aHRtbDoxfSkseT1hKHthZGRyZXNzOjEsYmxvY2txdW90ZToxLGNlbnRlcjoxLGRpcjoxLGRpdjoxLGRsOjEsZmllbGRzZXQ6MSxmb3JtOjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjEsaHI6MSxpc2luZGV4OjEsbWVudToxLG5vZnJhbWVzOjEsb2w6MSxwOjEscHJlOjEsdGFibGU6MSx1bDoxfSksej1hKHthcmVhOjEsYmFzZToxLGJhc2Vmb250OjEsYnI6MSxjb2w6MSxjb21tYW5kOjEsZGlhbG9nOjEsZW1iZWQ6MSxocjoxLGltZzoxLGlucHV0OjEsaXNpbmRleDoxLGtleWdlbjoxLGxpbms6MSxtZXRhOjEscGFyYW06MSxzb3VyY2U6MSx0cmFjazoxLHdicjoxfSk7cmV0dXJuIGEoeyRub25Cb2R5Q29udGVudDpiKHgsdyx1KSwkYmxvY2s6eSwkaW5saW5lOm4sJGlubGluZVdpdGhBOmIoYSh7YToxfSksbiksJGJvZHk6YihhKHtzY3JpcHQ6MSxzdHlsZToxfSkseSksJGNkYXRhOmEoe3NjcmlwdDoxLHN0eWxlOjF9KSwkZW1wdHk6eiwkbm9uQ2hpbGQ6YSh7aWZyYW1lOjEsdGV4dGFyZWE6MX0pLCRsaXN0SXRlbTphKHtkZDoxLGR0OjEsbGk6MX0pLCRsaXN0OmEoe3VsOjEsb2w6MSxkbDoxfSksJGlzTm90RW1wdHk6YSh7dGFibGU6MSx1bDoxLG9sOjEsZGw6MSxpZnJhbWU6MSxhcmVhOjEsYmFzZToxLGNvbDoxLGhyOjEsaW1nOjEsZW1iZWQ6MSxpbnB1dDoxLGxpbms6MSxtZXRhOjEscGFyYW06MSxoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MX0pLCRyZW1vdmVFbXB0eTphKHthOjEsYWJicjoxLGFjcm9ueW06MSxhZGRyZXNzOjEsYjoxLGJkbzoxLGJpZzoxLGNpdGU6MSxjb2RlOjEsZGVsOjEsZGZuOjEsZW06MSxmb250OjEsaToxLGluczoxLGxhYmVsOjEsa2JkOjEscToxLHM6MSxzYW1wOjEsc21hbGw6MSxzcGFuOjEsc3RyaWtlOjEsc3Ryb25nOjEsc3ViOjEsc3VwOjEsdHQ6MSx1OjEsXCJ2YXJcIjoxfSksJHJlbW92ZUVtcHR5QmxvY2s6YSh7cDoxLGRpdjoxfSksJHRhYmxlQ29udGVudDphKHtjYXB0aW9uOjEsY29sOjEsY29sZ3JvdXA6MSx0Ym9keToxLHRkOjEsdGZvb3Q6MSx0aDoxLHRoZWFkOjEsdHI6MSx0YWJsZToxfSksJG5vdFRyYW5zQ29udGVudDphKHtwcmU6MSxzY3JpcHQ6MSxzdHlsZToxLHRleHRhcmVhOjF9KSxodG1sOncsaGVhZDp2LHN0eWxlOnAsc2NyaXB0OnAsYm9keTpyLGJhc2U6e30sbGluazp7fSxtZXRhOnt9LHRpdGxlOnAsY29sOnt9LHRyOmEoe3RkOjEsdGg6MX0pLGltZzp7fSxlbWJlZDp7fSxjb2xncm91cDphKHt0aGVhZDoxLGNvbDoxLHRib2R5OjEsdHI6MSx0Zm9vdDoxfSksbm9zY3JpcHQ6cix0ZDpyLGJyOnt9LHRoOnIsY2VudGVyOnIsa2JkOm4sYnV0dG9uOmIoayxnKSxiYXNlZm9udDp7fSxoNTpuLGg0Om4sc2FtcDpuLGg2Om4sb2w6cyxoMTpuLGgzOm4sb3B0aW9uOnAsaDI6bixmb3JtOmIoYyxmLGcsayksc2VsZWN0OmEoe29wdGdyb3VwOjEsb3B0aW9uOjF9KSxmb250Om4saW5zOm4sbWVudTpzLGFiYnI6bixsYWJlbDpuLHRhYmxlOmEoe3RoZWFkOjEsY29sOjEsdGJvZHk6MSx0cjoxLGNvbGdyb3VwOjEsY2FwdGlvbjoxLHRmb290OjF9KSxjb2RlOm4sdGZvb3Q6byxjaXRlOm4sbGk6cixpbnB1dDp7fSxpZnJhbWU6cixzdHJvbmc6bix0ZXh0YXJlYTpwLG5vZnJhbWVzOnIsYmlnOm4sc21hbGw6bixzcGFuOmEoe1wiI1wiOjEsYnI6MSxiOjEsc3Ryb25nOjEsdToxLGk6MSxlbToxLHN1YjoxLHN1cDoxLHN0cmlrZToxLHNwYW46MX0pLGhyOm4sZHQ6bixzdWI6bixvcHRncm91cDphKHtvcHRpb246MX0pLHBhcmFtOnt9LGJkbzpuLFwidmFyXCI6bixkaXY6cixvYmplY3Q6cSxzdXA6bixkZDpyLHN0cmlrZTpuLGFyZWE6e30sZGlyOnMsbWFwOmIoYSh7YXJlYToxLGZvcm06MSxwOjF9KSxjLGgsZyksYXBwbGV0OnEsZGw6YSh7ZHQ6MSxkZDoxfSksZGVsOm4saXNpbmRleDp7fSxmaWVsZHNldDpiKGEoe2xlZ2VuZDoxfSksbSksdGhlYWQ6byx1bDpzLGFjcm9ueW06bixiOm4sYTpiKGEoe2E6MX0pLGwpLGJsb2NrcXVvdGU6YihhKHt0ZDoxLHRyOjEsdGJvZHk6MSxsaToxfSksciksY2FwdGlvbjpuLGk6bix1Om4sdGJvZHk6byxzOm4sYWRkcmVzczpiKGYsayksdHQ6bixsZWdlbmQ6bixxOm4scHJlOmIoaSxlKSxwOmIoYSh7YToxfSksbiksZW06bixkZm46bn0pfSgpLGF0dHJGaXg9aWUmJmJyb3dzZXIudmVyc2lvbjw5P3t0YWJpbmRleDpcInRhYkluZGV4XCIscmVhZG9ubHk6XCJyZWFkT25seVwiLFwiZm9yXCI6XCJodG1sRm9yXCIsXCJjbGFzc1wiOlwiY2xhc3NOYW1lXCIsbWF4bGVuZ3RoOlwibWF4TGVuZ3RoXCIsY2VsbHNwYWNpbmc6XCJjZWxsU3BhY2luZ1wiLGNlbGxwYWRkaW5nOlwiY2VsbFBhZGRpbmdcIixyb3dzcGFuOlwicm93U3BhblwiLGNvbHNwYW46XCJjb2xTcGFuXCIsdXNlbWFwOlwidXNlTWFwXCIsZnJhbWVib3JkZXI6XCJmcmFtZUJvcmRlclwifTp7dGFiaW5kZXg6XCJ0YWJJbmRleFwiLHJlYWRvbmx5OlwicmVhZE9ubHlcIn0sc3R5bGVCbG9jaz11dGlscy5saXN0VG9NYXAoW1wiLXdlYmtpdC1ib3hcIixcIi1tb3otYm94XCIsXCJibG9ja1wiLFwibGlzdC1pdGVtXCIsXCJ0YWJsZVwiLFwidGFibGUtcm93LWdyb3VwXCIsXCJ0YWJsZS1oZWFkZXItZ3JvdXBcIixcInRhYmxlLWZvb3Rlci1ncm91cFwiLFwidGFibGUtcm93XCIsXCJ0YWJsZS1jb2x1bW4tZ3JvdXBcIixcInRhYmxlLWNvbHVtblwiLFwidGFibGUtY2VsbFwiLFwidGFibGUtY2FwdGlvblwiXSksZG9tVXRpbHM9ZG9tLmRvbVV0aWxzPXtOT0RFX0VMRU1FTlQ6MSxOT0RFX0RPQ1VNRU5UOjksTk9ERV9URVhUOjMsTk9ERV9DT01NRU5UOjgsTk9ERV9ET0NVTUVOVF9GUkFHTUVOVDoxMSxQT1NJVElPTl9JREVOVElDQUw6MCxQT1NJVElPTl9ESVNDT05ORUNURUQ6MSxQT1NJVElPTl9GT0xMT1dJTkc6MixQT1NJVElPTl9QUkVDRURJTkc6NCxQT1NJVElPTl9JU19DT05UQUlORUQ6OCxQT1NJVElPTl9DT05UQUlOUzoxNixmaWxsQ2hhcjppZSYmXCI2XCI9PWJyb3dzZXIudmVyc2lvbj9cIlxcdWZlZmZcIjpcIuKAi1wiLGtleXM6ezg6MSw0NjoxLDE2OjEsMTc6MSwxODoxLDM3OjEsMzg6MSwzOToxLDQwOjEsMTM6MX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gMDt2YXIgYyxkPVthXSxlPVtiXTtmb3IoYz1hO2M9Yy5wYXJlbnROb2RlOyl7aWYoYz09PWIpcmV0dXJuIDEwO2QucHVzaChjKX1mb3IoYz1iO2M9Yy5wYXJlbnROb2RlOyl7aWYoYz09PWEpcmV0dXJuIDIwO2UucHVzaChjKX1pZihkLnJldmVyc2UoKSxlLnJldmVyc2UoKSxkWzBdIT09ZVswXSlyZXR1cm4gMTtmb3IodmFyIGY9LTE7ZisrLGRbZl09PT1lW2ZdOyk7Zm9yKGE9ZFtmXSxiPWVbZl07YT1hLm5leHRTaWJsaW5nOylpZihhPT09YilyZXR1cm4gNDtyZXR1cm4gMn0sZ2V0Tm9kZUluZGV4OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEsZD0wO2M9Yy5wcmV2aW91c1NpYmxpbmc7KWImJjM9PWMubm9kZVR5cGU/Yy5ub2RlVHlwZSE9Yy5uZXh0U2libGluZy5ub2RlVHlwZSYmZCsrOmQrKztyZXR1cm4gZH0saW5Eb2M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMTA9PWRvbVV0aWxzLmdldFBvc2l0aW9uKGEsYil9LGZpbmRQYXJlbnQ6ZnVuY3Rpb24oYSxiLGMpe2lmKGEmJiFkb21VdGlscy5pc0JvZHkoYSkpZm9yKGE9Yz9hOmEucGFyZW50Tm9kZTthOyl7aWYoIWJ8fGIoYSl8fGRvbVV0aWxzLmlzQm9keShhKSlyZXR1cm4gYiYmIWIoYSkmJmRvbVV0aWxzLmlzQm9keShhKT9udWxsOmE7YT1hLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9LGZpbmRQYXJlbnRCeVRhZ05hbWU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGI9dXRpbHMubGlzdFRvTWFwKHV0aWxzLmlzQXJyYXkoYik/YjpbYl0pLGRvbVV0aWxzLmZpbmRQYXJlbnQoYSxmdW5jdGlvbihhKXtyZXR1cm4gYlthLnRhZ05hbWVdJiYhKGQmJmQoYSkpfSxjKX0sZmluZFBhcmVudHM6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlPWImJihjJiZjKGEpfHwhYyk/W2FdOltdO2E9ZG9tVXRpbHMuZmluZFBhcmVudChhLGMpOyllLnB1c2goYSk7cmV0dXJuIGQ/ZTplLnJldmVyc2UoKX0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5uZXh0U2libGluZz9hLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYS5uZXh0U2libGluZyk6YS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGIpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWEucGFyZW50Tm9kZTtpZihkKXtpZihiJiZhLmhhc0NoaWxkTm9kZXMoKSlmb3IoO2M9YS5maXJzdENoaWxkOylkLmluc2VydEJlZm9yZShjLGEpO2QucmVtb3ZlQ2hpbGQoYSl9cmV0dXJuIGF9LGdldE5leHREb21Ob2RlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBnZXREb21Ob2RlKGEsXCJmaXJzdENoaWxkXCIsXCJuZXh0U2libGluZ1wiLGIsYyxkKX0sZ2V0UHJlRG9tTm9kZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gZ2V0RG9tTm9kZShhLFwibGFzdENoaWxkXCIsXCJwcmV2aW91c1NpYmxpbmdcIixiLGMsZCl9LGlzQm9va21hcmtOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiAxPT1hLm5vZGVUeXBlJiZhLmlkJiYvXl9iYWlkdV9ib29rbWFya18vaS50ZXN0KGEuaWQpfSxnZXRXaW5kb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50fHxhO3JldHVybiBiLmRlZmF1bHRWaWV3fHxiLnBhcmVudFdpbmRvd30sZ2V0Q29tbW9uQW5jZXN0b3I6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtmb3IodmFyIGM9W2FdLGQ9W2JdLGU9YSxmPS0xO2U9ZS5wYXJlbnROb2RlOyl7aWYoZT09PWIpcmV0dXJuIGU7Yy5wdXNoKGUpfWZvcihlPWI7ZT1lLnBhcmVudE5vZGU7KXtpZihlPT09YSlyZXR1cm4gZTtkLnB1c2goZSl9Zm9yKGMucmV2ZXJzZSgpLGQucmV2ZXJzZSgpO2YrKyxjW2ZdPT09ZFtmXTspO3JldHVybiAwPT1mP251bGw6Y1tmLTFdfSxjbGVhckVtcHR5U2libGluZzpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgYzthJiYhZG9tVXRpbHMuaXNCb29rbWFya05vZGUoYSkmJihkb21VdGlscy5pc0VtcHR5SW5saW5lRWxlbWVudChhKXx8IW5ldyBSZWdFeHAoXCJbXlxcdFxcblxcclwiK2RvbVV0aWxzLmZpbGxDaGFyK1wiXVwiKS50ZXN0KGEubm9kZVZhbHVlKSk7KWM9YVtiXSxkb21VdGlscy5yZW1vdmUoYSksYT1jfSFiJiZkKGEubmV4dFNpYmxpbmcsXCJuZXh0U2libGluZ1wiKSwhYyYmZChhLnByZXZpb3VzU2libGluZyxcInByZXZpb3VzU2libGluZ1wiKX0sc3BsaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLm93bmVyRG9jdW1lbnQ7aWYoYnJvd3Nlci5pZSYmYj09YS5ub2RlVmFsdWUubGVuZ3RoKXt2YXIgZD1jLmNyZWF0ZVRleHROb2RlKFwiXCIpO3JldHVybiBkb21VdGlscy5pbnNlcnRBZnRlcihhLGQpfXZhciBlPWEuc3BsaXRUZXh0KGIpO2lmKGJyb3dzZXIuaWU4KXt2YXIgZj1jLmNyZWF0ZVRleHROb2RlKFwiXCIpO2RvbVV0aWxzLmluc2VydEFmdGVyKGUsZiksZG9tVXRpbHMucmVtb3ZlKGYpfXJldHVybiBlfSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIW5ldyBSZWdFeHAoXCJbXiBcXHRcXG5cXHJcIitkb21VdGlscy5maWxsQ2hhcitcIl1cIikudGVzdChhLm5vZGVWYWx1ZSl9LGdldFhZOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9MDthLm9mZnNldFBhcmVudDspYys9YS5vZmZzZXRUb3AsYis9YS5vZmZzZXRMZWZ0LGE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJue3g6Yix5OmN9fSxvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dXRpbHMuaXNBcnJheShiKT9iOnV0aWxzLnRyaW0oYikuc3BsaXQoL1xccysvKSxlPWQubGVuZ3RoO2lmKGUpZm9yKDtlLS07KWlmKGI9ZFtlXSxhLmFkZEV2ZW50TGlzdGVuZXIpYS5hZGRFdmVudExpc3RlbmVyKGIsYywhMSk7ZWxzZXtjLl9kfHwoYy5fZD17ZWxzOltdfSk7dmFyIGY9YitjLnRvU3RyaW5nKCksZz11dGlscy5pbmRleE9mKGMuX2QuZWxzLGEpO2MuX2RbZl0mJmchPS0xfHwoZz09LTEmJmMuX2QuZWxzLnB1c2goYSksYy5fZFtmXXx8KGMuX2RbZl09ZnVuY3Rpb24oYSl7cmV0dXJuIGMuY2FsbChhLnNyY0VsZW1lbnQsYXx8d2luZG93LmV2ZW50KX0pLGEuYXR0YWNoRXZlbnQoXCJvblwiK2IsYy5fZFtmXSkpfWE9bnVsbH0sdW46ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXV0aWxzLmlzQXJyYXkoYik/Yjp1dGlscy50cmltKGIpLnNwbGl0KC9cXHMrLyksZT1kLmxlbmd0aDtpZihlKWZvcig7ZS0tOylpZihiPWRbZV0sYS5yZW1vdmVFdmVudExpc3RlbmVyKWEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpO2Vsc2V7dmFyIGY9YitjLnRvU3RyaW5nKCk7dHJ5e2EuZGV0YWNoRXZlbnQoXCJvblwiK2IsYy5fZD9jLl9kW2ZdOmMpfWNhdGNoKGcpe31pZihjLl9kJiZjLl9kW2ZdKXt2YXIgaD11dGlscy5pbmRleE9mKGMuX2QuZWxzLGEpO2ghPS0xJiZjLl9kLmVscy5zcGxpY2UoaCwxKSwwPT1jLl9kLmVscy5sZW5ndGgmJmRlbGV0ZSBjLl9kW2ZdfX19LGlzU2FtZUVsZW1lbnQ6ZnVuY3Rpb24oYSxiKXtpZihhLnRhZ05hbWUhPWIudGFnTmFtZSlyZXR1cm4hMTt2YXIgYz1hLmF0dHJpYnV0ZXMsZD1iLmF0dHJpYnV0ZXM7aWYoIWllJiZjLmxlbmd0aCE9ZC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlLGYsZz0wLGg9MCxpPTA7ZT1jW2krK107KXtpZihcInN0eWxlXCI9PWUubm9kZU5hbWUpe2lmKGUuc3BlY2lmaWVkJiZnKyssZG9tVXRpbHMuaXNTYW1lU3R5bGUoYSxiKSljb250aW51ZTtyZXR1cm4hMX1pZihpZSl7aWYoIWUuc3BlY2lmaWVkKWNvbnRpbnVlO2crKyxmPWQuZ2V0TmFtZWRJdGVtKGUubm9kZU5hbWUpfWVsc2UgZj1iLmF0dHJpYnV0ZXNbZS5ub2RlTmFtZV07aWYoIWYuc3BlY2lmaWVkfHxlLm5vZGVWYWx1ZSE9Zi5ub2RlVmFsdWUpcmV0dXJuITF9aWYoaWUpe2ZvcihpPTA7Zj1kW2krK107KWYuc3BlY2lmaWVkJiZoKys7aWYoZyE9aClyZXR1cm4hMX1yZXR1cm4hMH0saXNTYW1lU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnN0eWxlLmNzc1RleHQucmVwbGFjZSgvKCA/OyA/KS9nLFwiO1wiKS5yZXBsYWNlKC8oID86ID8pL2csXCI6XCIpLGQ9Yi5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoLyggPzsgPykvZyxcIjtcIikucmVwbGFjZSgvKCA/OiA/KS9nLFwiOlwiKTtpZihicm93c2VyLm9wZXJhKXtpZihjPWEuc3R5bGUsZD1iLnN0eWxlLGMubGVuZ3RoIT1kLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGUgaW4gYylpZighL14oXFxkK3xjc3N0ZXh0KSQvaS50ZXN0KGUpJiZjW2VdIT1kW2VdKXJldHVybiExO3JldHVybiEwfWlmKCFjfHwhZClyZXR1cm4gYz09ZDtpZihjPWMuc3BsaXQoXCI7XCIpLGQ9ZC5zcGxpdChcIjtcIiksYy5sZW5ndGghPWQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZixnPTA7Zj1jW2crK107KWlmKHV0aWxzLmluZGV4T2YoZCxmKT09LTEpcmV0dXJuITE7cmV0dXJuITB9LGlzQmxvY2tFbG06ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PWEubm9kZVR5cGUmJihkdGQuJGJsb2NrW2EudGFnTmFtZV18fHN0eWxlQmxvY2tbZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShhLFwiZGlzcGxheVwiKV0pJiYhZHRkLiRub25DaGlsZFthLnRhZ05hbWVdfSxpc0JvZHk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJjE9PWEubm9kZVR5cGUmJlwiYm9keVwiPT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKX0sYnJlYWtQYXJlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1hLGc9YTtkb3tmb3IoZj1mLnBhcmVudE5vZGUsZD8oYz1mLmNsb25lTm9kZSghMSksYy5hcHBlbmRDaGlsZChkKSxkPWMsYz1mLmNsb25lTm9kZSghMSksYy5hcHBlbmRDaGlsZChlKSxlPWMpOihkPWYuY2xvbmVOb2RlKCExKSxlPWQuY2xvbmVOb2RlKCExKSk7Yz1nLnByZXZpb3VzU2libGluZzspZC5pbnNlcnRCZWZvcmUoYyxkLmZpcnN0Q2hpbGQpO2Zvcig7Yz1nLm5leHRTaWJsaW5nOyllLmFwcGVuZENoaWxkKGMpO2c9Zn13aGlsZShiIT09Zik7cmV0dXJuIGM9Yi5wYXJlbnROb2RlLGMuaW5zZXJ0QmVmb3JlKGQsYiksYy5pbnNlcnRCZWZvcmUoZSxiKSxjLmluc2VydEJlZm9yZShhLGUpLGRvbVV0aWxzLnJlbW92ZShiKSxhfSxpc0VtcHR5SW5saW5lRWxlbWVudDpmdW5jdGlvbihhKXtpZigxIT1hLm5vZGVUeXBlfHwhZHRkLiRyZW1vdmVFbXB0eVthLnRhZ05hbWVdKXJldHVybiAwO2ZvcihhPWEuZmlyc3RDaGlsZDthOyl7aWYoZG9tVXRpbHMuaXNCb29rbWFya05vZGUoYSkpcmV0dXJuIDA7aWYoMT09YS5ub2RlVHlwZSYmIWRvbVV0aWxzLmlzRW1wdHlJbmxpbmVFbGVtZW50KGEpfHwzPT1hLm5vZGVUeXBlJiYhZG9tVXRpbHMuaXNXaGl0ZXNwYWNlKGEpKXJldHVybiAwO2E9YS5uZXh0U2libGluZ31yZXR1cm4gMX0sdHJpbVdoaXRlVGV4dE5vZGU6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXtmb3IodmFyIGM7KGM9YVtiXSkmJjM9PWMubm9kZVR5cGUmJmRvbVV0aWxzLmlzV2hpdGVzcGFjZShjKTspYS5yZW1vdmVDaGlsZChjKX1iKFwiZmlyc3RDaGlsZFwiKSxiKFwibGFzdENoaWxkXCIpfSxtZXJnZUNoaWxkOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1kb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShhLGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSxmPTA7ZD1lW2YrK107KWlmKGQucGFyZW50Tm9kZSYmIWRvbVV0aWxzLmlzQm9va21hcmtOb2RlKGQpKWlmKFwic3BhblwiIT1kLnRhZ05hbWUudG9Mb3dlckNhc2UoKSlkb21VdGlscy5pc1NhbWVFbGVtZW50KGEsZCkmJmRvbVV0aWxzLnJlbW92ZShkLCEwKTtlbHNle2lmKGE9PT1kLnBhcmVudE5vZGUmJihkb21VdGlscy50cmltV2hpdGVUZXh0Tm9kZShhKSwxPT1hLmNoaWxkTm9kZXMubGVuZ3RoKSl7YS5zdHlsZS5jc3NUZXh0PWQuc3R5bGUuY3NzVGV4dCtcIjtcIithLnN0eWxlLmNzc1RleHQsZG9tVXRpbHMucmVtb3ZlKGQsITApO2NvbnRpbnVlfWlmKGQuc3R5bGUuY3NzVGV4dD1hLnN0eWxlLmNzc1RleHQrXCI7XCIrZC5zdHlsZS5jc3NUZXh0LGMpe3ZhciBnPWMuc3R5bGU7aWYoZyl7Zz1nLnNwbGl0KFwiO1wiKTtmb3IodmFyIGgsaT0wO2g9Z1tpKytdOylkLnN0eWxlW3V0aWxzLmNzc1N0eWxlVG9Eb21TdHlsZShoLnNwbGl0KFwiOlwiKVswXSldPWguc3BsaXQoXCI6XCIpWzFdfX1kb21VdGlscy5pc1NhbWVTdHlsZShkLGEpJiZkb21VdGlscy5yZW1vdmUoZCwhMCl9fSxnZXRFbGVtZW50c0J5VGFnTmFtZTpmdW5jdGlvbihhLGIsYyl7aWYoYyYmdXRpbHMuaXNTdHJpbmcoYykpe3ZhciBkPWM7Yz1mdW5jdGlvbihhKXtyZXR1cm4gZG9tVXRpbHMuaGFzQ2xhc3MoYSxkKX19Yj11dGlscy50cmltKGIpLnJlcGxhY2UoL1sgXXsyLH0vZyxcIiBcIikuc3BsaXQoXCIgXCIpO2Zvcih2YXIgZSxmPVtdLGc9MDtlPWJbZysrXTspZm9yKHZhciBoLGk9YS5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSxqPTA7aD1pW2orK107KWMmJiFjKGgpfHxmLnB1c2goaCk7cmV0dXJuIGZ9LG1lcmdlVG9QYXJlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEucGFyZW50Tm9kZTtiJiZkdGQuJHJlbW92ZUVtcHR5W2IudGFnTmFtZV07KXtpZihiLnRhZ05hbWU9PWEudGFnTmFtZXx8XCJBXCI9PWIudGFnTmFtZSl7aWYoZG9tVXRpbHMudHJpbVdoaXRlVGV4dE5vZGUoYiksXCJTUEFOXCI9PWIudGFnTmFtZSYmIWRvbVV0aWxzLmlzU2FtZVN0eWxlKGIsYSl8fFwiQVwiPT1iLnRhZ05hbWUmJlwiU1BBTlwiPT1hLnRhZ05hbWUpe2lmKGIuY2hpbGROb2Rlcy5sZW5ndGg+MXx8YiE9PWEucGFyZW50Tm9kZSl7YS5zdHlsZS5jc3NUZXh0PWIuc3R5bGUuY3NzVGV4dCtcIjtcIithLnN0eWxlLmNzc1RleHQsYj1iLnBhcmVudE5vZGU7Y29udGludWV9Yi5zdHlsZS5jc3NUZXh0Kz1cIjtcIithLnN0eWxlLmNzc1RleHQsXCJBXCI9PWIudGFnTmFtZSYmKGIuc3R5bGUudGV4dERlY29yYXRpb249XCJ1bmRlcmxpbmVcIil9aWYoXCJBXCIhPWIudGFnTmFtZSl7Yj09PWEucGFyZW50Tm9kZSYmZG9tVXRpbHMucmVtb3ZlKGEsITApO2JyZWFrfX1iPWIucGFyZW50Tm9kZX19LG1lcmdlU2libGluZzpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIsYyl7dmFyIGQ7aWYoKGQ9Y1thXSkmJiFkb21VdGlscy5pc0Jvb2ttYXJrTm9kZShkKSYmMT09ZC5ub2RlVHlwZSYmZG9tVXRpbHMuaXNTYW1lRWxlbWVudChjLGQpKXtmb3IoO2QuZmlyc3RDaGlsZDspXCJmaXJzdENoaWxkXCI9PWI/Yy5pbnNlcnRCZWZvcmUoZC5sYXN0Q2hpbGQsYy5maXJzdENoaWxkKTpjLmFwcGVuZENoaWxkKGQuZmlyc3RDaGlsZCk7ZG9tVXRpbHMucmVtb3ZlKGQpfX0hYiYmZChcInByZXZpb3VzU2libGluZ1wiLFwiZmlyc3RDaGlsZFwiLGEpLCFjJiZkKFwibmV4dFNpYmxpbmdcIixcImxhc3RDaGlsZFwiLGEpfSx1blNlbGVjdGFibGU6aWUmJmJyb3dzZXIuaWU5YmVsb3d8fGJyb3dzZXIub3BlcmE/ZnVuY3Rpb24oYSl7YS5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LGEub25jbGljaz1hLm9ua2V5dXA9YS5vbmtleWRvd249ZnVuY3Rpb24oKXtyZXR1cm4hMX0sYS51bnNlbGVjdGFibGU9XCJvblwiLGEuc2V0QXR0cmlidXRlKFwidW5zZWxlY3RhYmxlXCIsXCJvblwiKTtmb3IodmFyIGIsYz0wO2I9YS5hbGxbYysrXTspc3dpdGNoKGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJpZnJhbWVcIjpjYXNlXCJ0ZXh0YXJlYVwiOmNhc2VcImlucHV0XCI6Y2FzZVwic2VsZWN0XCI6YnJlYWs7ZGVmYXVsdDpiLnVuc2VsZWN0YWJsZT1cIm9uXCIsYS5zZXRBdHRyaWJ1dGUoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpfX06ZnVuY3Rpb24oYSl7YS5zdHlsZS5Nb3pVc2VyU2VsZWN0PWEuc3R5bGUud2Via2l0VXNlclNlbGVjdD1hLnN0eWxlLm1zVXNlclNlbGVjdD1hLnN0eWxlLktodG1sVXNlclNlbGVjdD1cIm5vbmVcIn0scmVtb3ZlQXR0cmlidXRlczpmdW5jdGlvbihhLGIpe2I9dXRpbHMuaXNBcnJheShiKT9iOnV0aWxzLnRyaW0oYikucmVwbGFjZSgvWyBdezIsfS9nLFwiIFwiKS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MDtjPWJbZCsrXTspe3N3aXRjaChjPWF0dHJGaXhbY118fGMpe2Nhc2VcImNsYXNzTmFtZVwiOmFbY109XCJcIjticmVhaztjYXNlXCJzdHlsZVwiOmEuc3R5bGUuY3NzVGV4dD1cIlwiO3ZhciBlPWEuZ2V0QXR0cmlidXRlTm9kZShcInN0eWxlXCIpOyFicm93c2VyLmllJiZlJiZhLnJlbW92ZUF0dHJpYnV0ZU5vZGUoZSl9YS5yZW1vdmVBdHRyaWJ1dGUoYyl9fSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZG9tVXRpbHMuc2V0QXR0cmlidXRlcyhhLmNyZWF0ZUVsZW1lbnQoYiksYyl9LHNldEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYilpZihiLmhhc093blByb3BlcnR5KGMpKXt2YXIgZD1iW2NdO3N3aXRjaChjKXtjYXNlXCJjbGFzc1wiOmEuY2xhc3NOYW1lPWQ7YnJlYWs7Y2FzZVwic3R5bGVcIjphLnN0eWxlLmNzc1RleHQ9YS5zdHlsZS5jc3NUZXh0K1wiO1wiK2Q7YnJlYWs7Y2FzZVwiaW5uZXJIVE1MXCI6YVtjXT1kO2JyZWFrO2Nhc2VcInZhbHVlXCI6YS52YWx1ZT1kO2JyZWFrO2RlZmF1bHQ6YS5zZXRBdHRyaWJ1dGUoYXR0ckZpeFtjXXx8YyxkKX19cmV0dXJuIGF9LGdldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1cIndpZHRoIGhlaWdodCB0b3AgbGVmdFwiO2lmKGMuaW5kZXhPZihiKT4tMSlyZXR1cm4gYVtcIm9mZnNldFwiK2IucmVwbGFjZSgvXlxcdy8sZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9VcHBlckNhc2UoKX0pXStcInB4XCI7aWYoMz09YS5ub2RlVHlwZSYmKGE9YS5wYXJlbnROb2RlKSxicm93c2VyLmllJiZicm93c2VyLnZlcnNpb248OSYmXCJmb250LXNpemVcIj09YiYmIWEuc3R5bGUuZm9udFNpemUmJiFkdGQuJGVtcHR5W2EudGFnTmFtZV0mJiFkdGQuJG5vbkNoaWxkW2EudGFnTmFtZV0pe3ZhciBkPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtkLnN0eWxlLmNzc1RleHQ9XCJwYWRkaW5nOjA7Ym9yZGVyOjA7Zm9udC1mYW1pbHk6c2ltc3VuO1wiLGQuaW5uZXJIVE1MPVwiLlwiLGEuYXBwZW5kQ2hpbGQoZCk7dmFyIGU9ZC5vZmZzZXRIZWlnaHQ7cmV0dXJuIGEucmVtb3ZlQ2hpbGQoZCksZD1udWxsLGUrXCJweFwifXRyeXt2YXIgZj1kb21VdGlscy5nZXRTdHlsZShhLGIpfHwod2luZG93LmdldENvbXB1dGVkU3R5bGU/ZG9tVXRpbHMuZ2V0V2luZG93KGEpLmdldENvbXB1dGVkU3R5bGUoYSxcIlwiKS5nZXRQcm9wZXJ0eVZhbHVlKGIpOihhLmN1cnJlbnRTdHlsZXx8YS5zdHlsZSlbdXRpbHMuY3NzU3R5bGVUb0RvbVN0eWxlKGIpXSl9Y2F0Y2goZyl7cmV0dXJuXCJcIn1yZXR1cm4gdXRpbHMudHJhbnNVbml0VG9QeCh1dGlscy5maXhDb2xvcihiLGYpKX0scmVtb3ZlQ2xhc3NlczpmdW5jdGlvbihhLGIpe2I9dXRpbHMuaXNBcnJheShiKT9iOnV0aWxzLnRyaW0oYikucmVwbGFjZSgvWyBdezIsfS9nLFwiIFwiKS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEuY2xhc3NOYW1lO2M9YltkKytdOyllPWUucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXGJcIitjK1wiXFxcXGJcIiksXCJcIik7ZT11dGlscy50cmltKGUpLnJlcGxhY2UoL1sgXXsyLH0vZyxcIiBcIiksZT9hLmNsYXNzTmFtZT1lOmRvbVV0aWxzLnJlbW92ZUF0dHJpYnV0ZXMoYSxbXCJjbGFzc1wiXSl9LGFkZENsYXNzOmZ1bmN0aW9uKGEsYil7aWYoYSl7Yj11dGlscy50cmltKGIpLnJlcGxhY2UoL1sgXXsyLH0vZyxcIiBcIikuc3BsaXQoXCIgXCIpO2Zvcih2YXIgYyxkPTAsZT1hLmNsYXNzTmFtZTtjPWJbZCsrXTspbmV3IFJlZ0V4cChcIlxcXFxiXCIrYytcIlxcXFxiXCIpLnRlc3QoZSl8fChlKz1cIiBcIitjKTthLmNsYXNzTmFtZT11dGlscy50cmltKGUpfX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXtpZih1dGlscy5pc1JlZ0V4cChiKSlyZXR1cm4gYi50ZXN0KGEuY2xhc3NOYW1lKTtiPXV0aWxzLnRyaW0oYikucmVwbGFjZSgvWyBdezIsfS9nLFwiIFwiKS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEuY2xhc3NOYW1lO2M9YltkKytdOylpZighbmV3IFJlZ0V4cChcIlxcXFxiXCIrYytcIlxcXFxiXCIsXCJpXCIpLnRlc3QoZSkpcmV0dXJuITE7cmV0dXJuIGQtMT09Yi5sZW5ndGh9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITF9LHJlbW92ZVN0eWxlOmZ1bmN0aW9uKGEsYil7YnJvd3Nlci5pZT8oXCJjb2xvclwiPT1iJiYoYj1cIihefDspXCIrYiksYS5zdHlsZS5jc3NUZXh0PWEuc3R5bGUuY3NzVGV4dC5yZXBsYWNlKG5ldyBSZWdFeHAoYitcIlteOl0qOlteO10rOz9cIixcImlnXCIpLFwiXCIpKTphLnN0eWxlLnJlbW92ZVByb3BlcnR5P2Euc3R5bGUucmVtb3ZlUHJvcGVydHkoYik6YS5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUodXRpbHMuY3NzU3R5bGVUb0RvbVN0eWxlKGIpKSxhLnN0eWxlLmNzc1RleHR8fGRvbVV0aWxzLnJlbW92ZUF0dHJpYnV0ZXMoYSxbXCJzdHlsZVwiXSl9LGdldFN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zdHlsZVt1dGlscy5jc3NTdHlsZVRvRG9tU3R5bGUoYildO3JldHVybiB1dGlscy5maXhDb2xvcihiLGMpfSxzZXRTdHlsZTpmdW5jdGlvbihhLGIsYyl7YS5zdHlsZVt1dGlscy5jc3NTdHlsZVRvRG9tU3R5bGUoYildPWMsdXRpbHMudHJpbShhLnN0eWxlLmNzc1RleHQpfHx0aGlzLnJlbW92ZUF0dHJpYnV0ZXMoYSxcInN0eWxlXCIpfSxzZXRTdHlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYiliLmhhc093blByb3BlcnR5KGMpJiZkb21VdGlscy5zZXRTdHlsZShhLGMsYltjXSl9LHJlbW92ZURpcnR5QXR0cjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wLGQ9YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIik7Yj1kW2MrK107KWIucmVtb3ZlQXR0cmlidXRlKFwiX21vel9kaXJ0eVwiKTthLnJlbW92ZUF0dHJpYnV0ZShcIl9tb3pfZGlydHlcIil9LGdldENoaWxkQ291bnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9YS5maXJzdENoaWxkO2ZvcihiPWJ8fGZ1bmN0aW9uKCl7cmV0dXJuIDF9O2Q7KWIoZCkmJmMrKyxkPWQubmV4dFNpYmxpbmc7cmV0dXJuIGN9LGlzRW1wdHlOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiFhLmZpcnN0Q2hpbGR8fDA9PWRvbVV0aWxzLmdldENoaWxkQ291bnQoYSxmdW5jdGlvbihhKXtyZXR1cm4hZG9tVXRpbHMuaXNCcihhKSYmIWRvbVV0aWxzLmlzQm9va21hcmtOb2RlKGEpJiYhZG9tVXRpbHMuaXNXaGl0ZXNwYWNlKGEpfSl9LGNsZWFyU2VsZWN0ZWRBcnI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiO2I9YS5wb3AoKTspZG9tVXRpbHMucmVtb3ZlQXR0cmlidXRlcyhiLFtcImNsYXNzXCJdKX0sc2Nyb2xsVG9WaWV3OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbigpe3ZhciBhPWIuZG9jdW1lbnQsYz1cIkNTUzFDb21wYXRcIj09YS5jb21wYXRNb2RlO3JldHVybnt3aWR0aDooYz9hLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDphLmJvZHkuY2xpZW50V2lkdGgpfHwwLGhlaWdodDooYz9hLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ6YS5ib2R5LmNsaWVudEhlaWdodCl8fDB9fSxlPWZ1bmN0aW9uKGEpe2lmKFwicGFnZVhPZmZzZXRcImluIGEpcmV0dXJue3g6YS5wYWdlWE9mZnNldHx8MCx5OmEucGFnZVlPZmZzZXR8fDB9O3ZhciBiPWEuZG9jdW1lbnQ7cmV0dXJue3g6Yi5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8Yi5ib2R5LnNjcm9sbExlZnR8fDAseTpiLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGIuYm9keS5zY3JvbGxUb3B8fDB9fSxmPWQoKS5oZWlnaHQsZz1mKi0xK2M7Zys9YS5vZmZzZXRIZWlnaHR8fDA7dmFyIGg9ZG9tVXRpbHMuZ2V0WFkoYSk7Zys9aC55O3ZhciBpPWUoYikueTsoZz5pfHxnPGktZikmJmIuc2Nyb2xsVG8oMCxnKyhnPDA/LTIwOjIwKSl9LGlzQnI6ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PWEubm9kZVR5cGUmJlwiQlJcIj09YS50YWdOYW1lfSxpc0ZpbGxDaGFyOmZ1bmN0aW9uKGEsYil7aWYoMyE9YS5ub2RlVHlwZSlyZXR1cm4hMTt2YXIgYz1hLm5vZGVWYWx1ZTtyZXR1cm4gYj9uZXcgUmVnRXhwKFwiXlwiK2RvbVV0aWxzLmZpbGxDaGFyKS50ZXN0KGMpOiFjLnJlcGxhY2UobmV3IFJlZ0V4cChkb21VdGlscy5maWxsQ2hhcixcImdcIiksXCJcIikubGVuZ3RofSxpc1N0YXJ0SW5ibG9jazpmdW5jdGlvbihhKXt2YXIgYixjPWEuY2xvbmVSYW5nZSgpLGQ9MCxlPWMuc3RhcnRDb250YWluZXI7aWYoMT09ZS5ub2RlVHlwZSYmZS5jaGlsZE5vZGVzW2Muc3RhcnRPZmZzZXRdKXtlPWUuY2hpbGROb2Rlc1tjLnN0YXJ0T2Zmc2V0XTtmb3IodmFyIGY9ZS5wcmV2aW91c1NpYmxpbmc7ZiYmZG9tVXRpbHMuaXNGaWxsQ2hhcihmKTspZT1mLGY9Zi5wcmV2aW91c1NpYmxpbmd9Zm9yKHRoaXMuaXNGaWxsQ2hhcihlLCEwKSYmMT09Yy5zdGFydE9mZnNldCYmKGMuc2V0U3RhcnRCZWZvcmUoZSksZT1jLnN0YXJ0Q29udGFpbmVyKTtlJiZkb21VdGlscy5pc0ZpbGxDaGFyKGUpOyliPWUsZT1lLnByZXZpb3VzU2libGluZztmb3IoYiYmKGMuc2V0U3RhcnRCZWZvcmUoYiksZT1jLnN0YXJ0Q29udGFpbmVyKSwxPT1lLm5vZGVUeXBlJiZkb21VdGlscy5pc0VtcHR5Tm9kZShlKSYmMT09Yy5zdGFydE9mZnNldCYmYy5zZXRTdGFydChlLDApLmNvbGxhcHNlKCEwKTshYy5zdGFydE9mZnNldDspe2lmKGU9Yy5zdGFydENvbnRhaW5lcixkb21VdGlscy5pc0Jsb2NrRWxtKGUpfHxkb21VdGlscy5pc0JvZHkoZSkpe2Q9MTticmVha312YXIgZyxmPWMuc3RhcnRDb250YWluZXIucHJldmlvdXNTaWJsaW5nO2lmKGYpe2Zvcig7ZiYmZG9tVXRpbHMuaXNGaWxsQ2hhcihmKTspZz1mLGY9Zi5wcmV2aW91c1NpYmxpbmc7Zz9jLnNldFN0YXJ0QmVmb3JlKGcpOmMuc2V0U3RhcnRCZWZvcmUoYy5zdGFydENvbnRhaW5lcil9ZWxzZSBjLnNldFN0YXJ0QmVmb3JlKGMuc3RhcnRDb250YWluZXIpfXJldHVybiBkJiYhZG9tVXRpbHMuaXNCb2R5KGMuc3RhcnRDb250YWluZXIpPzE6MH0saXNFbXB0eUJsb2NrOmZ1bmN0aW9uKGEsYil7aWYoMSE9YS5ub2RlVHlwZSlyZXR1cm4gMDtpZihiPWJ8fG5ldyBSZWdFeHAoXCJbIMKgXFx0XFxyXFxuXCIrZG9tVXRpbHMuZmlsbENoYXIrXCJdXCIsXCJnXCIpLGFbYnJvd3Nlci5pZT9cImlubmVyVGV4dFwiOlwidGV4dENvbnRlbnRcIl0ucmVwbGFjZShiLFwiXCIpLmxlbmd0aD4wKXJldHVybiAwO2Zvcih2YXIgYyBpbiBkdGQuJGlzTm90RW1wdHkpaWYoYS5nZXRFbGVtZW50c0J5VGFnTmFtZShjKS5sZW5ndGgpcmV0dXJuIDA7cmV0dXJuIDF9LHNldFZpZXdwb3J0T2Zmc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9MHxwYXJzZUludChhLnN0eWxlLmxlZnQpLGQ9MHxwYXJzZUludChhLnN0eWxlLnRvcCksZT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGY9Yi5sZWZ0LWUubGVmdCxnPWIudG9wLWUudG9wO2YmJihhLnN0eWxlLmxlZnQ9YytmK1wicHhcIiksZyYmKGEuc3R5bGUudG9wPWQrZytcInB4XCIpfSxmaWxsTm9kZTpmdW5jdGlvbihhLGIpe3ZhciBjPWJyb3dzZXIuaWU/YS5jcmVhdGVUZXh0Tm9kZShkb21VdGlscy5maWxsQ2hhcik6YS5jcmVhdGVFbGVtZW50KFwiYnJcIik7Yi5pbm5lckhUTUw9XCJcIixiLmFwcGVuZENoaWxkKGMpfSxtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSxiLGMpe2Zvcig7YS5maXJzdENoaWxkOyljJiZiLmZpcnN0Q2hpbGQ/Yi5pbnNlcnRCZWZvcmUoYS5sYXN0Q2hpbGQsYi5maXJzdENoaWxkKTpiLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCl9LGhhc05vQXR0cmlidXRlczpmdW5jdGlvbihhKXtyZXR1cm4gYnJvd3Nlci5pZT8vXjxcXHcrXFxzKj8+Ly50ZXN0KGEub3V0ZXJIVE1MKTowPT1hLmF0dHJpYnV0ZXMubGVuZ3RofSxpc0N1c3RvbWVOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiAxPT1hLm5vZGVUeXBlJiZhLmdldEF0dHJpYnV0ZShcIl91ZV9jdXN0b21fbm9kZV9cIil9LGlzVGFnTm9kZTpmdW5jdGlvbihhLGIpe3JldHVybiAxPT1hLm5vZGVUeXBlJiZuZXcgUmVnRXhwKFwiXFxcXGJcIithLnRhZ05hbWUrXCJcXFxcYlwiLFwiaVwiKS50ZXN0KGIpfSxmaWx0ZXJOb2RlTGlzdDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107aWYoIXV0aWxzLmlzRnVuY3Rpb24oYikpe3ZhciBlPWI7Yj1mdW5jdGlvbihhKXtyZXR1cm4gdXRpbHMuaW5kZXhPZih1dGlscy5pc0FycmF5KGUpP2U6ZS5zcGxpdChcIiBcIiksYS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpIT0tMX19cmV0dXJuIHV0aWxzLmVhY2goYSxmdW5jdGlvbihhKXtiKGEpJiZkLnB1c2goYSl9KSwwPT1kLmxlbmd0aD9udWxsOjEhPWQubGVuZ3RoJiZjP2Q6ZFswXX0saXNJbk5vZGVFbmRCb3VuZGFyeTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3RhcnRDb250YWluZXI7aWYoMz09Yy5ub2RlVHlwZSYmYS5zdGFydE9mZnNldCE9Yy5ub2RlVmFsdWUubGVuZ3RoKXJldHVybiAwO2lmKDE9PWMubm9kZVR5cGUmJmEuc3RhcnRPZmZzZXQhPWMuY2hpbGROb2Rlcy5sZW5ndGgpcmV0dXJuIDA7Zm9yKDtjIT09Yjspe2lmKGMubmV4dFNpYmxpbmcpcmV0dXJuIDA7Yz1jLnBhcmVudE5vZGV9cmV0dXJuIDF9LGlzQm91bmRhcnlOb2RlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjOyFkb21VdGlscy5pc0JvZHkoYSk7KWlmKGM9YSxhPWEucGFyZW50Tm9kZSxjIT09YVtiXSlyZXR1cm4hMTtyZXR1cm4hMH0sZmlsbEh0bWw6YnJvd3Nlci5pZTExYmVsb3c/XCImbmJzcDtcIjpcIjxici8+XCJ9LGZpbGxDaGFyUmVnPW5ldyBSZWdFeHAoZG9tVXRpbHMuZmlsbENoYXIsXCJnXCIpOyFmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7YS5jb2xsYXBzZWQ9YS5zdGFydENvbnRhaW5lciYmYS5lbmRDb250YWluZXImJmEuc3RhcnRDb250YWluZXI9PT1hLmVuZENvbnRhaW5lciYmYS5zdGFydE9mZnNldD09YS5lbmRPZmZzZXR9ZnVuY3Rpb24gYihhKXtyZXR1cm4hYS5jb2xsYXBzZWQmJjE9PWEuc3RhcnRDb250YWluZXIubm9kZVR5cGUmJmEuc3RhcnRDb250YWluZXI9PT1hLmVuZENvbnRhaW5lciYmYS5lbmRPZmZzZXQtYS5zdGFydE9mZnNldD09MX1mdW5jdGlvbiBjKGIsYyxkLGUpe3JldHVybiAxPT1jLm5vZGVUeXBlJiYoZHRkLiRlbXB0eVtjLnRhZ05hbWVdfHxkdGQuJG5vbkNoaWxkW2MudGFnTmFtZV0pJiYoZD1kb21VdGlscy5nZXROb2RlSW5kZXgoYykrKGI/MDoxKSxjPWMucGFyZW50Tm9kZSksYj8oZS5zdGFydENvbnRhaW5lcj1jLGUuc3RhcnRPZmZzZXQ9ZCxlLmVuZENvbnRhaW5lcnx8ZS5jb2xsYXBzZSghMCkpOihlLmVuZENvbnRhaW5lcj1jLGUuZW5kT2Zmc2V0PWQsZS5zdGFydENvbnRhaW5lcnx8ZS5jb2xsYXBzZSghMSkpLGEoZSksZX1mdW5jdGlvbiBkKGEsYil7dmFyIGMsZCxlPWEuc3RhcnRDb250YWluZXIsZj1hLmVuZENvbnRhaW5lcixnPWEuc3RhcnRPZmZzZXQsaD1hLmVuZE9mZnNldCxpPWEuZG9jdW1lbnQsaj1pLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZigxPT1lLm5vZGVUeXBlJiYoZT1lLmNoaWxkTm9kZXNbZ118fChjPWUuYXBwZW5kQ2hpbGQoaS5jcmVhdGVUZXh0Tm9kZShcIlwiKSkpKSwxPT1mLm5vZGVUeXBlJiYoZj1mLmNoaWxkTm9kZXNbaF18fChkPWYuYXBwZW5kQ2hpbGQoaS5jcmVhdGVUZXh0Tm9kZShcIlwiKSkpKSxlPT09ZiYmMz09ZS5ub2RlVHlwZSlyZXR1cm4gai5hcHBlbmRDaGlsZChpLmNyZWF0ZVRleHROb2RlKGUuc3Vic3RyaW5nRGF0YShnLGgtZykpKSxiJiYoZS5kZWxldGVEYXRhKGcsaC1nKSxhLmNvbGxhcHNlKCEwKSksajtmb3IodmFyIGssbCxtPWosbj1kb21VdGlscy5maW5kUGFyZW50cyhlLCEwKSxvPWRvbVV0aWxzLmZpbmRQYXJlbnRzKGYsITApLHA9MDtuW3BdPT1vW3BdOylwKys7Zm9yKHZhciBxLHI9cDtxPW5bcl07cisrKXtmb3Ioaz1xLm5leHRTaWJsaW5nLHE9PWU/Y3x8KDM9PWEuc3RhcnRDb250YWluZXIubm9kZVR5cGU/KG0uYXBwZW5kQ2hpbGQoaS5jcmVhdGVUZXh0Tm9kZShlLm5vZGVWYWx1ZS5zbGljZShnKSkpLGImJmUuZGVsZXRlRGF0YShnLGUubm9kZVZhbHVlLmxlbmd0aC1nKSk6bS5hcHBlbmRDaGlsZChiP2U6ZS5jbG9uZU5vZGUoITApKSk6KGw9cS5jbG9uZU5vZGUoITEpLG0uYXBwZW5kQ2hpbGQobCkpO2smJmshPT1mJiZrIT09b1tyXTspcT1rLm5leHRTaWJsaW5nLG0uYXBwZW5kQ2hpbGQoYj9rOmsuY2xvbmVOb2RlKCEwKSksaz1xO209bH1tPWosbltwXXx8KG0uYXBwZW5kQ2hpbGQobltwLTFdLmNsb25lTm9kZSghMSkpLG09bS5maXJzdENoaWxkKTtmb3IodmFyIHMscj1wO3M9b1tyXTtyKyspe2lmKGs9cy5wcmV2aW91c1NpYmxpbmcscz09Zj9kfHwzIT1hLmVuZENvbnRhaW5lci5ub2RlVHlwZXx8KG0uYXBwZW5kQ2hpbGQoaS5jcmVhdGVUZXh0Tm9kZShmLnN1YnN0cmluZ0RhdGEoMCxoKSkpLGImJmYuZGVsZXRlRGF0YSgwLGgpKToobD1zLmNsb25lTm9kZSghMSksbS5hcHBlbmRDaGlsZChsKSksciE9cHx8IW5bcF0pZm9yKDtrJiZrIT09ZTspcz1rLnByZXZpb3VzU2libGluZyxtLmluc2VydEJlZm9yZShiP2s6ay5jbG9uZU5vZGUoITApLG0uZmlyc3RDaGlsZCksaz1zO209bH1yZXR1cm4gYiYmYS5zZXRTdGFydEJlZm9yZShvW3BdP25bcF0/b1twXTpuW3AtMV06b1twLTFdKS5jb2xsYXBzZSghMCksYyYmZG9tVXRpbHMucmVtb3ZlKGMpLGQmJmRvbVV0aWxzLnJlbW92ZShkKSxqfWZ1bmN0aW9uIGUoYSxiKXt0cnl7aWYoZyYmZG9tVXRpbHMuaW5Eb2MoZyxhKSlpZihnLm5vZGVWYWx1ZS5yZXBsYWNlKGZpbGxDaGFyUmVnLFwiXCIpLmxlbmd0aClnLm5vZGVWYWx1ZT1nLm5vZGVWYWx1ZS5yZXBsYWNlKGZpbGxDaGFyUmVnLFwiXCIpO2Vsc2V7dmFyIGM9Zy5wYXJlbnROb2RlO2Zvcihkb21VdGlscy5yZW1vdmUoZyk7YyYmZG9tVXRpbHMuaXNFbXB0eUlubGluZUVsZW1lbnQoYykmJihicm93c2VyLnNhZmFyaT8hKGRvbVV0aWxzLmdldFBvc2l0aW9uKGMsYikmZG9tVXRpbHMuUE9TSVRJT05fQ09OVEFJTlMpOiFjLmNvbnRhaW5zKGIpKTspZz1jLnBhcmVudE5vZGUsZG9tVXRpbHMucmVtb3ZlKGMpLGM9Z319Y2F0Y2goZCl7fVxufWZ1bmN0aW9uIGYoYSxiKXt2YXIgYztmb3IoYT1hW2JdO2EmJmRvbVV0aWxzLmlzRmlsbENoYXIoYSk7KWM9YVtiXSxkb21VdGlscy5yZW1vdmUoYSksYT1jfXZhciBnLGg9MCxpPWRvbVV0aWxzLmZpbGxDaGFyLGo9ZG9tLlJhbmdlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5zdGFydENvbnRhaW5lcj1iLnN0YXJ0T2Zmc2V0PWIuZW5kQ29udGFpbmVyPWIuZW5kT2Zmc2V0PW51bGwsYi5kb2N1bWVudD1hLGIuY29sbGFwc2VkPSEwfTtqLnByb3RvdHlwZT17Y2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbGxhcHNlZD9udWxsOmQodGhpcywwKX0sZGVsZXRlQ29udGVudHM6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gdGhpcy5jb2xsYXBzZWR8fGQodGhpcywxKSxicm93c2VyLndlYmtpdCYmKGE9dGhpcy5zdGFydENvbnRhaW5lciwzIT1hLm5vZGVUeXBlfHxhLm5vZGVWYWx1ZS5sZW5ndGh8fCh0aGlzLnNldFN0YXJ0QmVmb3JlKGEpLmNvbGxhcHNlKCEwKSxkb21VdGlscy5yZW1vdmUoYSkpKSx0aGlzfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xsYXBzZWQ/bnVsbDpkKHRoaXMsMil9LHNldFN0YXJ0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGMoITAsYSxiLHRoaXMpfSxzZXRFbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYyghMSxhLGIsdGhpcyl9LHNldFN0YXJ0QWZ0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0U3RhcnQoYS5wYXJlbnROb2RlLGRvbVV0aWxzLmdldE5vZGVJbmRleChhKSsxKX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0U3RhcnQoYS5wYXJlbnROb2RlLGRvbVV0aWxzLmdldE5vZGVJbmRleChhKSl9LHNldEVuZEFmdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldEVuZChhLnBhcmVudE5vZGUsZG9tVXRpbHMuZ2V0Tm9kZUluZGV4KGEpKzEpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0RW5kKGEucGFyZW50Tm9kZSxkb21VdGlscy5nZXROb2RlSW5kZXgoYSkpfSxzZXRTdGFydEF0Rmlyc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0U3RhcnQoYSwwKX0sc2V0U3RhcnRBdExhc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0U3RhcnQoYSwzPT1hLm5vZGVUeXBlP2Eubm9kZVZhbHVlLmxlbmd0aDphLmNoaWxkTm9kZXMubGVuZ3RoKX0sc2V0RW5kQXRGaXJzdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZXRFbmQoYSwwKX0sc2V0RW5kQXRMYXN0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldEVuZChhLDM9PWEubm9kZVR5cGU/YS5ub2RlVmFsdWUubGVuZ3RoOmEuY2hpbGROb2Rlcy5sZW5ndGgpfSxzZWxlY3ROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldFN0YXJ0QmVmb3JlKGEpLnNldEVuZEFmdGVyKGEpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0U3RhcnQoYSwwKS5zZXRFbmRBdExhc3QoYSl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBuZXcgaihhLmRvY3VtZW50KS5zZXRTdGFydChhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQpLnNldEVuZChhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCl9LGNvbGxhcHNlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIGE/KGIuZW5kQ29udGFpbmVyPWIuc3RhcnRDb250YWluZXIsYi5lbmRPZmZzZXQ9Yi5zdGFydE9mZnNldCk6KGIuc3RhcnRDb250YWluZXI9Yi5lbmRDb250YWluZXIsYi5zdGFydE9mZnNldD1iLmVuZE9mZnNldCksYi5jb2xsYXBzZWQ9ITAsYn0sc2hyaW5rQm91bmRhcnk6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gMT09YS5ub2RlVHlwZSYmIWRvbVV0aWxzLmlzQm9va21hcmtOb2RlKGEpJiYhZHRkLiRlbXB0eVthLnRhZ05hbWVdJiYhZHRkLiRub25DaGlsZFthLnRhZ05hbWVdfWZvcih2YXIgYyxkPXRoaXMsZT1kLmNvbGxhcHNlZDsxPT1kLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlJiYoYz1kLnN0YXJ0Q29udGFpbmVyLmNoaWxkTm9kZXNbZC5zdGFydE9mZnNldF0pJiZiKGMpOylkLnNldFN0YXJ0KGMsMCk7aWYoZSlyZXR1cm4gZC5jb2xsYXBzZSghMCk7aWYoIWEpZm9yKDsxPT1kLmVuZENvbnRhaW5lci5ub2RlVHlwZSYmZC5lbmRPZmZzZXQ+MCYmKGM9ZC5lbmRDb250YWluZXIuY2hpbGROb2Rlc1tkLmVuZE9mZnNldC0xXSkmJmIoYyk7KWQuc2V0RW5kKGMsYy5jaGlsZE5vZGVzLmxlbmd0aCk7cmV0dXJuIGR9LGdldENvbW1vbkFuY2VzdG9yOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9dGhpcyxlPWQuc3RhcnRDb250YWluZXIsZj1kLmVuZENvbnRhaW5lcjtyZXR1cm4gZT09PWY/YSYmYih0aGlzKSYmKGU9ZS5jaGlsZE5vZGVzW2Quc3RhcnRPZmZzZXRdLDE9PWUubm9kZVR5cGUpP2U6YyYmMz09ZS5ub2RlVHlwZT9lLnBhcmVudE5vZGU6ZTpkb21VdGlscy5nZXRDb21tb25BbmNlc3RvcihlLGYpfSx0cmltQm91bmRhcnk6ZnVuY3Rpb24oYSl7dGhpcy50eHRUb0VsbUJvdW5kYXJ5KCk7dmFyIGI9dGhpcy5zdGFydENvbnRhaW5lcixjPXRoaXMuc3RhcnRPZmZzZXQsZD10aGlzLmNvbGxhcHNlZCxlPXRoaXMuZW5kQ29udGFpbmVyO2lmKDM9PWIubm9kZVR5cGUpe2lmKDA9PWMpdGhpcy5zZXRTdGFydEJlZm9yZShiKTtlbHNlIGlmKGM+PWIubm9kZVZhbHVlLmxlbmd0aCl0aGlzLnNldFN0YXJ0QWZ0ZXIoYik7ZWxzZXt2YXIgZj1kb21VdGlscy5zcGxpdChiLGMpO2I9PT1lP3RoaXMuc2V0RW5kKGYsdGhpcy5lbmRPZmZzZXQtYyk6Yi5wYXJlbnROb2RlPT09ZSYmKHRoaXMuZW5kT2Zmc2V0Kz0xKSx0aGlzLnNldFN0YXJ0QmVmb3JlKGYpfWlmKGQpcmV0dXJuIHRoaXMuY29sbGFwc2UoITApfXJldHVybiBhfHwoYz10aGlzLmVuZE9mZnNldCxlPXRoaXMuZW5kQ29udGFpbmVyLDM9PWUubm9kZVR5cGUmJigwPT1jP3RoaXMuc2V0RW5kQmVmb3JlKGUpOihjPGUubm9kZVZhbHVlLmxlbmd0aCYmZG9tVXRpbHMuc3BsaXQoZSxjKSx0aGlzLnNldEVuZEFmdGVyKGUpKSkpLHRoaXN9LHR4dFRvRWxtQm91bmRhcnk6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPWFbYitcIkNvbnRhaW5lclwiXSxkPWFbYitcIk9mZnNldFwiXTszPT1jLm5vZGVUeXBlJiYoZD9kPj1jLm5vZGVWYWx1ZS5sZW5ndGgmJmFbXCJzZXRcIitiLnJlcGxhY2UoLyhcXHcpLyxmdW5jdGlvbihhKXtyZXR1cm4gYS50b1VwcGVyQ2FzZSgpfSkrXCJBZnRlclwiXShjKTphW1wic2V0XCIrYi5yZXBsYWNlKC8oXFx3KS8sZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9VcHBlckNhc2UoKX0pK1wiQmVmb3JlXCJdKGMpKX1yZXR1cm4hYSYmdGhpcy5jb2xsYXBzZWR8fChiKHRoaXMsXCJzdGFydFwiKSxiKHRoaXMsXCJlbmRcIikpLHRoaXN9LGluc2VydE5vZGU6ZnVuY3Rpb24oYSl7dmFyIGI9YSxjPTE7MTE9PWEubm9kZVR5cGUmJihiPWEuZmlyc3RDaGlsZCxjPWEuY2hpbGROb2Rlcy5sZW5ndGgpLHRoaXMudHJpbUJvdW5kYXJ5KCEwKTt2YXIgZD10aGlzLnN0YXJ0Q29udGFpbmVyLGU9dGhpcy5zdGFydE9mZnNldCxmPWQuY2hpbGROb2Rlc1tlXTtyZXR1cm4gZj9kLmluc2VydEJlZm9yZShhLGYpOmQuYXBwZW5kQ2hpbGQoYSksYi5wYXJlbnROb2RlPT09dGhpcy5lbmRDb250YWluZXImJih0aGlzLmVuZE9mZnNldD10aGlzLmVuZE9mZnNldCtjKSx0aGlzLnNldFN0YXJ0QmVmb3JlKGIpfSxzZXRDdXJzb3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jb2xsYXBzZSghYSkuc2VsZWN0KGIpfSxjcmVhdGVCb29rbWFyazpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtyZXR1cm4gZC5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTpub25lO2xpbmUtaGVpZ2h0OjBweDtcIixkLmFwcGVuZENoaWxkKHRoaXMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCLigI1cIikpLGQuaWQ9XCJfYmFpZHVfYm9va21hcmtfc3RhcnRfXCIrKGI/XCJcIjpoKyspLHRoaXMuY29sbGFwc2VkfHwoYz1kLmNsb25lTm9kZSghMCksYy5pZD1cIl9iYWlkdV9ib29rbWFya19lbmRfXCIrKGI/XCJcIjpoKyspKSx0aGlzLmluc2VydE5vZGUoZCksYyYmdGhpcy5jb2xsYXBzZSgpLmluc2VydE5vZGUoYykuc2V0RW5kQmVmb3JlKGMpLHRoaXMuc2V0U3RhcnRBZnRlcihkKSx7c3RhcnQ6YT9kLmlkOmQsZW5kOmM/YT9jLmlkOmM6bnVsbCxpZDphfX0sbW92ZVRvQm9va21hcms6ZnVuY3Rpb24oYSl7dmFyIGI9YS5pZD90aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuc3RhcnQpOmEuc3RhcnQsYz1hLmVuZCYmYS5pZD90aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuZW5kKTphLmVuZDtyZXR1cm4gdGhpcy5zZXRTdGFydEJlZm9yZShiKSxkb21VdGlscy5yZW1vdmUoYiksYz8odGhpcy5zZXRFbmRCZWZvcmUoYyksZG9tVXRpbHMucmVtb3ZlKGMpKTp0aGlzLmNvbGxhcHNlKCEwKSx0aGlzfSxlbmxhcmdlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWRvbVV0aWxzLmlzQm9keSxmPXRoaXMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7aWYoYSl7Zm9yKGQ9dGhpcy5zdGFydENvbnRhaW5lciwxPT1kLm5vZGVUeXBlP2QuY2hpbGROb2Rlc1t0aGlzLnN0YXJ0T2Zmc2V0XT9jPWQ9ZC5jaGlsZE5vZGVzW3RoaXMuc3RhcnRPZmZzZXRdOihkLmFwcGVuZENoaWxkKGYpLGM9ZD1mKTpjPWQ7Oyl7aWYoZG9tVXRpbHMuaXNCbG9ja0VsbShkKSl7Zm9yKGQ9YzsoYz1kLnByZXZpb3VzU2libGluZykmJiFkb21VdGlscy5pc0Jsb2NrRWxtKGMpOylkPWM7dGhpcy5zZXRTdGFydEJlZm9yZShkKTticmVha31jPWQsZD1kLnBhcmVudE5vZGV9Zm9yKGQ9dGhpcy5lbmRDb250YWluZXIsMT09ZC5ub2RlVHlwZT8oKGM9ZC5jaGlsZE5vZGVzW3RoaXMuZW5kT2Zmc2V0XSk/ZC5pbnNlcnRCZWZvcmUoZixjKTpkLmFwcGVuZENoaWxkKGYpLGM9ZD1mKTpjPWQ7Oyl7aWYoZG9tVXRpbHMuaXNCbG9ja0VsbShkKSl7Zm9yKGQ9YzsoYz1kLm5leHRTaWJsaW5nKSYmIWRvbVV0aWxzLmlzQmxvY2tFbG0oYyk7KWQ9Yzt0aGlzLnNldEVuZEFmdGVyKGQpO2JyZWFrfWM9ZCxkPWQucGFyZW50Tm9kZX1mLnBhcmVudE5vZGU9PT10aGlzLmVuZENvbnRhaW5lciYmdGhpcy5lbmRPZmZzZXQtLSxkb21VdGlscy5yZW1vdmUoZil9aWYoIXRoaXMuY29sbGFwc2VkKXtmb3IoOyEoMCE9dGhpcy5zdGFydE9mZnNldHx8YiYmYih0aGlzLnN0YXJ0Q29udGFpbmVyKXx8ZSh0aGlzLnN0YXJ0Q29udGFpbmVyKSk7KXRoaXMuc2V0U3RhcnRCZWZvcmUodGhpcy5zdGFydENvbnRhaW5lcik7Zm9yKDshKHRoaXMuZW5kT2Zmc2V0IT0oMT09dGhpcy5lbmRDb250YWluZXIubm9kZVR5cGU/dGhpcy5lbmRDb250YWluZXIuY2hpbGROb2Rlcy5sZW5ndGg6dGhpcy5lbmRDb250YWluZXIubm9kZVZhbHVlLmxlbmd0aCl8fGImJmIodGhpcy5lbmRDb250YWluZXIpfHxlKHRoaXMuZW5kQ29udGFpbmVyKSk7KXRoaXMuc2V0RW5kQWZ0ZXIodGhpcy5lbmRDb250YWluZXIpfXJldHVybiB0aGlzfSxlbmxhcmdlVG9CbG9ja0VsbTpmdW5jdGlvbihhKXtmb3IoOyFkb21VdGlscy5pc0Jsb2NrRWxtKHRoaXMuc3RhcnRDb250YWluZXIpOyl0aGlzLnNldFN0YXJ0QmVmb3JlKHRoaXMuc3RhcnRDb250YWluZXIpO2lmKCFhKWZvcig7IWRvbVV0aWxzLmlzQmxvY2tFbG0odGhpcy5lbmRDb250YWluZXIpOyl0aGlzLnNldEVuZEFmdGVyKHRoaXMuZW5kQ29udGFpbmVyKTtyZXR1cm4gdGhpc30sYWRqdXN0bWVudEJvdW5kYXJ5OmZ1bmN0aW9uKCl7aWYoIXRoaXMuY29sbGFwc2VkKXtmb3IoOyFkb21VdGlscy5pc0JvZHkodGhpcy5zdGFydENvbnRhaW5lcikmJnRoaXMuc3RhcnRPZmZzZXQ9PXRoaXMuc3RhcnRDb250YWluZXJbMz09dGhpcy5zdGFydENvbnRhaW5lci5ub2RlVHlwZT9cIm5vZGVWYWx1ZVwiOlwiY2hpbGROb2Rlc1wiXS5sZW5ndGgmJnRoaXMuc3RhcnRDb250YWluZXJbMz09dGhpcy5zdGFydENvbnRhaW5lci5ub2RlVHlwZT9cIm5vZGVWYWx1ZVwiOlwiY2hpbGROb2Rlc1wiXS5sZW5ndGg7KXRoaXMuc2V0U3RhcnRBZnRlcih0aGlzLnN0YXJ0Q29udGFpbmVyKTtmb3IoOyFkb21VdGlscy5pc0JvZHkodGhpcy5lbmRDb250YWluZXIpJiYhdGhpcy5lbmRPZmZzZXQmJnRoaXMuZW5kQ29udGFpbmVyWzM9PXRoaXMuZW5kQ29udGFpbmVyLm5vZGVUeXBlP1wibm9kZVZhbHVlXCI6XCJjaGlsZE5vZGVzXCJdLmxlbmd0aDspdGhpcy5zZXRFbmRCZWZvcmUodGhpcy5lbmRDb250YWluZXIpfXJldHVybiB0aGlzfSxhcHBseUlubGluZVN0eWxlOmZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmNvbGxhcHNlZClyZXR1cm4gdGhpczt0aGlzLnRyaW1Cb3VuZGFyeSgpLmVubGFyZ2UoITEsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PWEubm9kZVR5cGUmJmRvbVV0aWxzLmlzQmxvY2tFbG0oYSl9KS5hZGp1c3RtZW50Qm91bmRhcnkoKTtmb3IodmFyIGQsZSxmPXRoaXMuY3JlYXRlQm9va21hcmsoKSxnPWYuZW5kLGg9ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PWEubm9kZVR5cGU/XCJiclwiIT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKTohZG9tVXRpbHMuaXNXaGl0ZXNwYWNlKGEpfSxpPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKGYuc3RhcnQsITEsaCksaj10aGlzLmNsb25lUmFuZ2UoKTtpJiZkb21VdGlscy5nZXRQb3NpdGlvbihpLGcpJmRvbVV0aWxzLlBPU0lUSU9OX1BSRUNFRElORzspaWYoMz09aS5ub2RlVHlwZXx8ZHRkW2FdW2kudGFnTmFtZV0pe2ZvcihqLnNldFN0YXJ0QmVmb3JlKGkpLGQ9aTtkJiYoMz09ZC5ub2RlVHlwZXx8ZHRkW2FdW2QudGFnTmFtZV0pJiZkIT09ZzspZT1kLGQ9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoZCwxPT1kLm5vZGVUeXBlLG51bGwsZnVuY3Rpb24oYil7cmV0dXJuIGR0ZFthXVtiLnRhZ05hbWVdfSk7dmFyIGssbD1qLnNldEVuZEFmdGVyKGUpLmV4dHJhY3RDb250ZW50cygpO2lmKGMmJmMubGVuZ3RoPjApe3ZhciBtLG47bj1tPWNbMF0uY2xvbmVOb2RlKCExKTtmb3IodmFyIG8scD0xO289Y1twKytdOyltLmFwcGVuZENoaWxkKG8uY2xvbmVOb2RlKCExKSksbT1tLmZpcnN0Q2hpbGQ7az1tfWVsc2Ugaz1qLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk7YiYmZG9tVXRpbHMuc2V0QXR0cmlidXRlcyhrLGIpLGsuYXBwZW5kQ2hpbGQobCksai5pbnNlcnROb2RlKGM/bjprKTt2YXIgcTtpZihcInNwYW5cIj09YSYmYi5zdHlsZSYmL3RleHRcXC1kZWNvcmF0aW9uLy50ZXN0KGIuc3R5bGUpJiYocT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGssXCJhXCIsITApKT8oZG9tVXRpbHMuc2V0QXR0cmlidXRlcyhxLGIpLGRvbVV0aWxzLnJlbW92ZShrLCEwKSxrPXEpOihkb21VdGlscy5tZXJnZVNpYmxpbmcoayksZG9tVXRpbHMuY2xlYXJFbXB0eVNpYmxpbmcoaykpLGRvbVV0aWxzLm1lcmdlQ2hpbGQoayxiKSxpPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKGssITEsaCksZG9tVXRpbHMubWVyZ2VUb1BhcmVudChrKSxkPT09ZylicmVha31lbHNlIGk9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoaSwhMCxoKTtyZXR1cm4gdGhpcy5tb3ZlVG9Cb29rbWFyayhmKX0scmVtb3ZlSW5saW5lU3R5bGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5jb2xsYXBzZWQpcmV0dXJuIHRoaXM7YT11dGlscy5pc0FycmF5KGEpP2E6W2FdLHRoaXMuc2hyaW5rQm91bmRhcnkoKS5hZGp1c3RtZW50Qm91bmRhcnkoKTtmb3IodmFyIGI9dGhpcy5zdGFydENvbnRhaW5lcixjPXRoaXMuZW5kQ29udGFpbmVyOzspe2lmKDE9PWIubm9kZVR5cGUpe2lmKHV0aWxzLmluZGV4T2YoYSxiLnRhZ05hbWUudG9Mb3dlckNhc2UoKSk+LTEpYnJlYWs7aWYoXCJib2R5XCI9PWIudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtiPW51bGw7YnJlYWt9fWI9Yi5wYXJlbnROb2RlfWZvcig7Oyl7aWYoMT09Yy5ub2RlVHlwZSl7aWYodXRpbHMuaW5kZXhPZihhLGMudGFnTmFtZS50b0xvd2VyQ2FzZSgpKT4tMSlicmVhaztpZihcImJvZHlcIj09Yy50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe2M9bnVsbDticmVha319Yz1jLnBhcmVudE5vZGV9dmFyIGQsZSxmPXRoaXMuY3JlYXRlQm9va21hcmsoKTtiJiYoZT10aGlzLmNsb25lUmFuZ2UoKS5zZXRFbmRCZWZvcmUoZi5zdGFydCkuc2V0U3RhcnRCZWZvcmUoYiksZD1lLmV4dHJhY3RDb250ZW50cygpLGUuaW5zZXJ0Tm9kZShkKSxkb21VdGlscy5jbGVhckVtcHR5U2libGluZyhiLCEwKSxiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYuc3RhcnQsYikpLGMmJihlPXRoaXMuY2xvbmVSYW5nZSgpLnNldFN0YXJ0QWZ0ZXIoZi5lbmQpLnNldEVuZEFmdGVyKGMpLGQ9ZS5leHRyYWN0Q29udGVudHMoKSxlLmluc2VydE5vZGUoZCksZG9tVXRpbHMuY2xlYXJFbXB0eVNpYmxpbmcoYywhMSwhMCksYy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShmLmVuZCxjLm5leHRTaWJsaW5nKSk7Zm9yKHZhciBnLGg9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoZi5zdGFydCwhMSxmdW5jdGlvbihhKXtyZXR1cm4gMT09YS5ub2RlVHlwZX0pO2gmJmghPT1mLmVuZDspZz1kb21VdGlscy5nZXROZXh0RG9tTm9kZShoLCEwLGZ1bmN0aW9uKGEpe3JldHVybiAxPT1hLm5vZGVUeXBlfSksdXRpbHMuaW5kZXhPZihhLGgudGFnTmFtZS50b0xvd2VyQ2FzZSgpKT4tMSYmZG9tVXRpbHMucmVtb3ZlKGgsITApLGg9ZztyZXR1cm4gdGhpcy5tb3ZlVG9Cb29rbWFyayhmKX0sZ2V0Q2xvc2VkTm9kZTpmdW5jdGlvbigpe3ZhciBhO2lmKCF0aGlzLmNvbGxhcHNlZCl7dmFyIGM9dGhpcy5jbG9uZVJhbmdlKCkuYWRqdXN0bWVudEJvdW5kYXJ5KCkuc2hyaW5rQm91bmRhcnkoKTtpZihiKGMpKXt2YXIgZD1jLnN0YXJ0Q29udGFpbmVyLmNoaWxkTm9kZXNbYy5zdGFydE9mZnNldF07ZCYmMT09ZC5ub2RlVHlwZSYmKGR0ZC4kZW1wdHlbZC50YWdOYW1lXXx8ZHRkLiRub25DaGlsZFtkLnRhZ05hbWVdKSYmKGE9ZCl9fXJldHVybiBhfSxzZWxlY3Q6YnJvd3Nlci5pZT9mdW5jdGlvbihhLGIpe3ZhciBjO3RoaXMuY29sbGFwc2VkfHx0aGlzLnNocmlua0JvdW5kYXJ5KCk7dmFyIGQ9dGhpcy5nZXRDbG9zZWROb2RlKCk7aWYoZCYmIWIpe3RyeXtjPXRoaXMuZG9jdW1lbnQuYm9keS5jcmVhdGVDb250cm9sUmFuZ2UoKSxjLmFkZEVsZW1lbnQoZCksYy5zZWxlY3QoKX1jYXRjaChoKXt9cmV0dXJuIHRoaXN9dmFyIGosaz10aGlzLmNyZWF0ZUJvb2ttYXJrKCksbD1rLnN0YXJ0O2lmKGM9dGhpcy5kb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpLGMubW92ZVRvRWxlbWVudFRleHQobCksYy5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIiwxKSx0aGlzLmNvbGxhcHNlZCl7aWYoIWEmJjMhPXRoaXMuc3RhcnRDb250YWluZXIubm9kZVR5cGUpe3ZhciBtPXRoaXMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaSksbj10aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO24uYXBwZW5kQ2hpbGQodGhpcy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpKSksbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuLGwpLGwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobSxsKSxlKHRoaXMuZG9jdW1lbnQsbSksZz1tLGYobixcInByZXZpb3VzU2libGluZ1wiKSxmKGwsXCJuZXh0U2libGluZ1wiKSxjLm1vdmVTdGFydChcImNoYXJhY3RlclwiLC0xKSxjLmNvbGxhcHNlKCEwKX19ZWxzZXt2YXIgbz10aGlzLmRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7aj1rLmVuZCxvLm1vdmVUb0VsZW1lbnRUZXh0KGopLGMuc2V0RW5kUG9pbnQoXCJFbmRUb0VuZFwiLG8pfXRoaXMubW92ZVRvQm9va21hcmsoayksbiYmZG9tVXRpbHMucmVtb3ZlKG4pO3RyeXtjLnNlbGVjdCgpfWNhdGNoKGgpe31yZXR1cm4gdGhpc306ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmdW5jdGlvbiBiKGIsYyxkKXszPT1iLm5vZGVUeXBlJiZiLm5vZGVWYWx1ZS5sZW5ndGg8YyYmKGFbZCtcIk9mZnNldFwiXT1iLm5vZGVWYWx1ZS5sZW5ndGgpfWIoYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0LFwic3RhcnRcIiksYihhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCxcImVuZFwiKX12YXIgYyxkPWRvbVV0aWxzLmdldFdpbmRvdyh0aGlzLmRvY3VtZW50KSxoPWQuZ2V0U2VsZWN0aW9uKCk7aWYoYnJvd3Nlci5nZWNrbz90aGlzLmRvY3VtZW50LmJvZHkuZm9jdXMoKTpkLmZvY3VzKCksaCl7aWYoaC5yZW1vdmVBbGxSYW5nZXMoKSx0aGlzLmNvbGxhcHNlZCYmIWEpe3ZhciBqPXRoaXMuc3RhcnRDb250YWluZXIsaz1qOzE9PWoubm9kZVR5cGUmJihrPWouY2hpbGROb2Rlc1t0aGlzLnN0YXJ0T2Zmc2V0XSksMz09ai5ub2RlVHlwZSYmdGhpcy5zdGFydE9mZnNldHx8KGs/ay5wcmV2aW91c1NpYmxpbmcmJjM9PWsucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlOmoubGFzdENoaWxkJiYzPT1qLmxhc3RDaGlsZC5ub2RlVHlwZSl8fChjPXRoaXMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaSksdGhpcy5pbnNlcnROb2RlKGMpLGUodGhpcy5kb2N1bWVudCxjKSxmKGMsXCJwcmV2aW91c1NpYmxpbmdcIiksZihjLFwibmV4dFNpYmxpbmdcIiksZz1jLHRoaXMuc2V0U3RhcnQoYyxicm93c2VyLndlYmtpdD8xOjApLmNvbGxhcHNlKCEwKSl9dmFyIGw9dGhpcy5kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2lmKHRoaXMuY29sbGFwc2VkJiZicm93c2VyLm9wZXJhJiYxPT10aGlzLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlKXt2YXIgaz10aGlzLnN0YXJ0Q29udGFpbmVyLmNoaWxkTm9kZXNbdGhpcy5zdGFydE9mZnNldF07aWYoayl7Zm9yKDtrJiZkb21VdGlscy5pc0Jsb2NrRWxtKGspJiYxPT1rLm5vZGVUeXBlJiZrLmNoaWxkTm9kZXNbMF07KWs9ay5jaGlsZE5vZGVzWzBdO2smJnRoaXMuc2V0U3RhcnRCZWZvcmUoaykuY29sbGFwc2UoITApfWVsc2Ugaz10aGlzLnN0YXJ0Q29udGFpbmVyLmxhc3RDaGlsZCxrJiZkb21VdGlscy5pc0JyKGspJiZ0aGlzLnNldFN0YXJ0QmVmb3JlKGspLmNvbGxhcHNlKCEwKX1iKHRoaXMpLGwuc2V0U3RhcnQodGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0KSxsLnNldEVuZCh0aGlzLmVuZENvbnRhaW5lcix0aGlzLmVuZE9mZnNldCksaC5hZGRSYW5nZShsKX1yZXR1cm4gdGhpc30sc2Nyb2xsVG9WaWV3OmZ1bmN0aW9uKGEsYil7YT1hP3dpbmRvdzpkb21VdGlscy5nZXRXaW5kb3codGhpcy5kb2N1bWVudCk7dmFyIGM9dGhpcyxkPWMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7cmV0dXJuIGQuaW5uZXJIVE1MPVwiJm5ic3A7XCIsYy5jbG9uZVJhbmdlKCkuaW5zZXJ0Tm9kZShkKSxkb21VdGlscy5zY3JvbGxUb1ZpZXcoZCxhLGIpLGRvbVV0aWxzLnJlbW92ZShkKSxjfSxpbkZpbGxDaGFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdGFydENvbnRhaW5lcjtyZXR1cm4hKCF0aGlzLmNvbGxhcHNlZHx8MyE9YS5ub2RlVHlwZXx8YS5ub2RlVmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKFwiXlwiK2RvbVV0aWxzLmZpbGxDaGFyKSxcIlwiKS5sZW5ndGgrMSE9YS5ub2RlVmFsdWUubGVuZ3RoKX0sY3JlYXRlQWRkcmVzczpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7Zm9yKHZhciBjLGQ9YT9lLnN0YXJ0Q29udGFpbmVyOmUuZW5kQ29udGFpbmVyLGY9ZG9tVXRpbHMuZmluZFBhcmVudHMoZCwhMCxmdW5jdGlvbihhKXtyZXR1cm4hZG9tVXRpbHMuaXNCb2R5KGEpfSksZz1bXSxoPTA7Yz1mW2grK107KWcucHVzaChkb21VdGlscy5nZXROb2RlSW5kZXgoYyxiKSk7dmFyIGk9MDtpZihiKWlmKDM9PWQubm9kZVR5cGUpe2Zvcih2YXIgaj1kLnByZXZpb3VzU2libGluZztqJiYzPT1qLm5vZGVUeXBlOylpKz1qLm5vZGVWYWx1ZS5yZXBsYWNlKGZpbGxDaGFyUmVnLFwiXCIpLmxlbmd0aCxqPWoucHJldmlvdXNTaWJsaW5nO2krPWE/ZS5zdGFydE9mZnNldDplLmVuZE9mZnNldH1lbHNlIGlmKGQ9ZC5jaGlsZE5vZGVzW2E/ZS5zdGFydE9mZnNldDplLmVuZE9mZnNldF0paT1kb21VdGlscy5nZXROb2RlSW5kZXgoZCxiKTtlbHNle2Q9YT9lLnN0YXJ0Q29udGFpbmVyOmUuZW5kQ29udGFpbmVyO2Zvcih2YXIgaz1kLmZpcnN0Q2hpbGQ7azspaWYoZG9tVXRpbHMuaXNGaWxsQ2hhcihrKSlrPWsubmV4dFNpYmxpbmc7ZWxzZSBpZihpKyssMz09ay5ub2RlVHlwZSlmb3IoO2smJjM9PWsubm9kZVR5cGU7KWs9ay5uZXh0U2libGluZztlbHNlIGs9ay5uZXh0U2libGluZ31lbHNlIGk9YT9kb21VdGlscy5pc0ZpbGxDaGFyKGQpPzA6ZS5zdGFydE9mZnNldDplLmVuZE9mZnNldDtyZXR1cm4gaTwwJiYoaT0wKSxnLnB1c2goaSksZ312YXIgZD17fSxlPXRoaXM7cmV0dXJuIGQuc3RhcnRBZGRyZXNzPWMoITApLGF8fChkLmVuZEFkZHJlc3M9ZS5jb2xsYXBzZWQ/W10uY29uY2F0KGQuc3RhcnRBZGRyZXNzKTpjKCkpLGR9LG1vdmVUb0FkZHJlc3M6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7Zm9yKHZhciBjLGUsZixnPWQuZG9jdW1lbnQuYm9keSxoPTAsaT1hLmxlbmd0aDtoPGk7aCsrKWlmKGY9YVtoXSxjPWcsZz1nLmNoaWxkTm9kZXNbZl0sIWcpe2U9ZjticmVha31iP2c/ZC5zZXRTdGFydEJlZm9yZShnKTpkLnNldFN0YXJ0KGMsZSk6Zz9kLnNldEVuZEJlZm9yZShnKTpkLnNldEVuZChjLGUpfXZhciBkPXRoaXM7cmV0dXJuIGMoYS5zdGFydEFkZHJlc3MsITApLCFiJiZhLmVuZEFkZHJlc3MmJmMoYS5lbmRBZGRyZXNzKSxkfSxlcXVhbHM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIHRoaXMpaWYodGhpcy5oYXNPd25Qcm9wZXJ0eShiKSYmdGhpc1tiXSE9PWFbYl0pcmV0dXJuITE7cmV0dXJuITB9LHRyYXZlcnNhbDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuY29sbGFwc2VkKXJldHVybiB0aGlzO2Zvcih2YXIgYz10aGlzLmNyZWF0ZUJvb2ttYXJrKCksZD1jLmVuZCxlPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKGMuc3RhcnQsITEsYik7ZSYmZSE9PWQmJmRvbVV0aWxzLmdldFBvc2l0aW9uKGUsZCkmZG9tVXRpbHMuUE9TSVRJT05fUFJFQ0VESU5HOyl7dmFyIGY9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoZSwhMSxiKTthKGUpLGU9Zn1yZXR1cm4gdGhpcy5tb3ZlVG9Cb29rbWFyayhjKX19fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3ZhciBjPWRvbVV0aWxzLmdldE5vZGVJbmRleDthPWEuZHVwbGljYXRlKCksYS5jb2xsYXBzZShiKTt2YXIgZD1hLnBhcmVudEVsZW1lbnQoKTtpZighZC5oYXNDaGlsZE5vZGVzKCkpcmV0dXJue2NvbnRhaW5lcjpkLG9mZnNldDowfTtmb3IodmFyIGUsZixnPWQuY2hpbGRyZW4saD1hLmR1cGxpY2F0ZSgpLGk9MCxqPWcubGVuZ3RoLTEsaz0tMTtpPD1qOyl7az1NYXRoLmZsb29yKChpK2opLzIpLGU9Z1trXSxoLm1vdmVUb0VsZW1lbnRUZXh0KGUpO3ZhciBsPWguY29tcGFyZUVuZFBvaW50cyhcIlN0YXJ0VG9TdGFydFwiLGEpO2lmKGw+MClqPWstMTtlbHNle2lmKCEobDwwKSlyZXR1cm57Y29udGFpbmVyOmQsb2Zmc2V0OmMoZSl9O2k9aysxfX1pZihrPT0tMSl7aWYoaC5tb3ZlVG9FbGVtZW50VGV4dChkKSxoLnNldEVuZFBvaW50KFwiU3RhcnRUb1N0YXJ0XCIsYSksZj1oLnRleHQucmVwbGFjZSgvKFxcclxcbnxcXHIpL2csXCJcXG5cIikubGVuZ3RoLGc9ZC5jaGlsZE5vZGVzLCFmKXJldHVybiBlPWdbZy5sZW5ndGgtMV0se2NvbnRhaW5lcjplLG9mZnNldDplLm5vZGVWYWx1ZS5sZW5ndGh9O2Zvcih2YXIgbT1nLmxlbmd0aDtmPjA7KWYtPWdbLS1tXS5ub2RlVmFsdWUubGVuZ3RoO3JldHVybntjb250YWluZXI6Z1ttXSxvZmZzZXQ6LWZ9fWlmKGguY29sbGFwc2UobD4wKSxoLnNldEVuZFBvaW50KGw+MD9cIlN0YXJ0VG9TdGFydFwiOlwiRW5kVG9TdGFydFwiLGEpLGY9aC50ZXh0LnJlcGxhY2UoLyhcXHJcXG58XFxyKS9nLFwiXFxuXCIpLmxlbmd0aCwhZilyZXR1cm4gZHRkLiRlbXB0eVtlLnRhZ05hbWVdfHxkdGQuJG5vbkNoaWxkW2UudGFnTmFtZV0/e2NvbnRhaW5lcjpkLG9mZnNldDpjKGUpKyhsPjA/MDoxKX06e2NvbnRhaW5lcjplLG9mZnNldDpsPjA/MDplLmNoaWxkTm9kZXMubGVuZ3RofTtmb3IoO2Y+MDspdHJ5e3ZhciBuPWU7ZT1lW2w+MD9cInByZXZpb3VzU2libGluZ1wiOlwibmV4dFNpYmxpbmdcIl0sZi09ZS5ub2RlVmFsdWUubGVuZ3RofWNhdGNoKG8pe3JldHVybntjb250YWluZXI6ZCxvZmZzZXQ6YyhuKX19cmV0dXJue2NvbnRhaW5lcjplLG9mZnNldDpsPjA/LWY6ZS5ub2RlVmFsdWUubGVuZ3RoK2Z9fWZ1bmN0aW9uIGIoYixjKXtpZihiLml0ZW0pYy5zZWxlY3ROb2RlKGIuaXRlbSgwKSk7ZWxzZXt2YXIgZD1hKGIsITApO2Muc2V0U3RhcnQoZC5jb250YWluZXIsZC5vZmZzZXQpLDAhPWIuY29tcGFyZUVuZFBvaW50cyhcIlN0YXJ0VG9FbmRcIixiKSYmKGQ9YShiLCExKSxjLnNldEVuZChkLmNvbnRhaW5lcixkLm9mZnNldCkpfXJldHVybiBjfWZ1bmN0aW9uIGMoYSl7dmFyIGI7dHJ5e2I9YS5nZXROYXRpdmUoKS5jcmVhdGVSYW5nZSgpfWNhdGNoKGMpe3JldHVybiBudWxsfXZhciBkPWIuaXRlbT9iLml0ZW0oMCk6Yi5wYXJlbnRFbGVtZW50KCk7cmV0dXJuKGQub3duZXJEb2N1bWVudHx8ZCk9PT1hLmRvY3VtZW50P2I6bnVsbH12YXIgZD1kb20uU2VsZWN0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiLGQ9dGhpcztkLmRvY3VtZW50PWEsYnJvd3Nlci5pZTliZWxvdyYmKGI9ZG9tVXRpbHMuZ2V0V2luZG93KGEpLmZyYW1lRWxlbWVudCxkb21VdGlscy5vbihiLFwiYmVmb3JlZGVhY3RpdmF0ZVwiLGZ1bmN0aW9uKCl7ZC5fYmFrSUVSYW5nZT1kLmdldElFUmFuZ2UoKX0pLGRvbVV0aWxzLm9uKGIsXCJhY3RpdmF0ZVwiLGZ1bmN0aW9uKCl7dHJ5eyFjKGQpJiZkLl9iYWtJRVJhbmdlJiZkLl9iYWtJRVJhbmdlLnNlbGVjdCgpfWNhdGNoKGEpe31kLl9iYWtJRVJhbmdlPW51bGx9KSksYj1hPW51bGx9O2QucHJvdG90eXBlPXtyYW5nZUluQm9keTpmdW5jdGlvbihhLGIpe3ZhciBjPWJyb3dzZXIuaWU5YmVsb3d8fGI/YS5pdGVtP2EuaXRlbSgpOmEucGFyZW50RWxlbWVudCgpOmEuc3RhcnRDb250YWluZXI7cmV0dXJuIGM9PT10aGlzLmRvY3VtZW50LmJvZHl8fGRvbVV0aWxzLmluRG9jKGMsdGhpcy5kb2N1bWVudCl9LGdldE5hdGl2ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZG9jdW1lbnQ7dHJ5e3JldHVybiBhP2Jyb3dzZXIuaWU5YmVsb3c/YS5zZWxlY3Rpb246ZG9tVXRpbHMuZ2V0V2luZG93KGEpLmdldFNlbGVjdGlvbigpOm51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fSxnZXRJRVJhbmdlOmZ1bmN0aW9uKCl7dmFyIGE9Yyh0aGlzKTtyZXR1cm4hYSYmdGhpcy5fYmFrSUVSYW5nZT90aGlzLl9iYWtJRVJhbmdlOmF9LGNhY2hlOmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpLHRoaXMuX2NhY2hlZFJhbmdlPXRoaXMuZ2V0UmFuZ2UoKSx0aGlzLl9jYWNoZWRTdGFydEVsZW1lbnQ9dGhpcy5nZXRTdGFydCgpLHRoaXMuX2NhY2hlZFN0YXJ0RWxlbWVudFBhdGg9dGhpcy5nZXRTdGFydEVsZW1lbnRQYXRoKCl9LGdldFN0YXJ0RWxlbWVudFBhdGg6ZnVuY3Rpb24oKXtpZih0aGlzLl9jYWNoZWRTdGFydEVsZW1lbnRQYXRoKXJldHVybiB0aGlzLl9jYWNoZWRTdGFydEVsZW1lbnRQYXRoO3ZhciBhPXRoaXMuZ2V0U3RhcnQoKTtyZXR1cm4gYT9kb21VdGlscy5maW5kUGFyZW50cyhhLCEwLG51bGwsITApOltdfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX2NhY2hlZFN0YXJ0RWxlbWVudFBhdGg9dGhpcy5fY2FjaGVkUmFuZ2U9dGhpcy5fY2FjaGVkU3RhcnRFbGVtZW50PW51bGx9LGlzRm9jdXM6ZnVuY3Rpb24oKXt0cnl7aWYoYnJvd3Nlci5pZTliZWxvdyl7dmFyIGE9Yyh0aGlzKTtyZXR1cm4hKCFhfHwhdGhpcy5yYW5nZUluQm9keShhKSl9cmV0dXJuISF0aGlzLmdldE5hdGl2ZSgpLnJhbmdlQ291bnR9Y2F0Y2goYil7cmV0dXJuITF9fSxnZXRSYW5nZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7Zm9yKHZhciBiPWMuZG9jdW1lbnQuYm9keS5maXJzdENoaWxkLGQ9YS5jb2xsYXBzZWQ7YiYmYi5maXJzdENoaWxkOylhLnNldFN0YXJ0KGIsMCksYj1iLmZpcnN0Q2hpbGQ7YS5zdGFydENvbnRhaW5lcnx8YS5zZXRTdGFydChjLmRvY3VtZW50LmJvZHksMCksZCYmYS5jb2xsYXBzZSghMCl9dmFyIGM9dGhpcztpZihudWxsIT1jLl9jYWNoZWRSYW5nZSlyZXR1cm4gdGhpcy5fY2FjaGVkUmFuZ2U7dmFyIGQ9bmV3IGJhaWR1LmVkaXRvci5kb20uUmFuZ2UoYy5kb2N1bWVudCk7aWYoYnJvd3Nlci5pZTliZWxvdyl7dmFyIGU9Yy5nZXRJRVJhbmdlKCk7aWYoZSl0cnl7YihlLGQpfWNhdGNoKGYpe2EoZCl9ZWxzZSBhKGQpfWVsc2V7dmFyIGc9Yy5nZXROYXRpdmUoKTtpZihnJiZnLnJhbmdlQ291bnQpe3ZhciBoPWcuZ2V0UmFuZ2VBdCgwKSxpPWcuZ2V0UmFuZ2VBdChnLnJhbmdlQ291bnQtMSk7ZC5zZXRTdGFydChoLnN0YXJ0Q29udGFpbmVyLGguc3RhcnRPZmZzZXQpLnNldEVuZChpLmVuZENvbnRhaW5lcixpLmVuZE9mZnNldCksZC5jb2xsYXBzZWQmJmRvbVV0aWxzLmlzQm9keShkLnN0YXJ0Q29udGFpbmVyKSYmIWQuc3RhcnRPZmZzZXQmJmEoZCl9ZWxzZXtpZih0aGlzLl9iYWtSYW5nZSYmZG9tVXRpbHMuaW5Eb2ModGhpcy5fYmFrUmFuZ2Uuc3RhcnRDb250YWluZXIsdGhpcy5kb2N1bWVudCkpcmV0dXJuIHRoaXMuX2Jha1JhbmdlO2EoZCl9fXJldHVybiB0aGlzLl9iYWtSYW5nZT1kfSxnZXRTdGFydDpmdW5jdGlvbigpe2lmKHRoaXMuX2NhY2hlZFN0YXJ0RWxlbWVudClyZXR1cm4gdGhpcy5fY2FjaGVkU3RhcnRFbGVtZW50O3ZhciBhLGIsYyxkLGU9YnJvd3Nlci5pZTliZWxvdz90aGlzLmdldElFUmFuZ2UoKTp0aGlzLmdldFJhbmdlKCk7aWYoYnJvd3Nlci5pZTliZWxvdyl7aWYoIWUpcmV0dXJuIHRoaXMuZG9jdW1lbnQuYm9keS5maXJzdENoaWxkO2lmKGUuaXRlbSlyZXR1cm4gZS5pdGVtKDApO2ZvcihhPWUuZHVwbGljYXRlKCksYS50ZXh0Lmxlbmd0aD4wJiZhLm1vdmVTdGFydChcImNoYXJhY3RlclwiLDEpLGEuY29sbGFwc2UoMSksYj1hLnBhcmVudEVsZW1lbnQoKSxkPWM9ZS5wYXJlbnRFbGVtZW50KCk7Yz1jLnBhcmVudE5vZGU7KWlmKGM9PWIpe2I9ZDticmVha319ZWxzZSBpZihlLnNocmlua0JvdW5kYXJ5KCksYj1lLnN0YXJ0Q29udGFpbmVyLDE9PWIubm9kZVR5cGUmJmIuaGFzQ2hpbGROb2RlcygpJiYoYj1iLmNoaWxkTm9kZXNbTWF0aC5taW4oYi5jaGlsZE5vZGVzLmxlbmd0aC0xLGUuc3RhcnRPZmZzZXQpXSksMz09Yi5ub2RlVHlwZSlyZXR1cm4gYi5wYXJlbnROb2RlO3JldHVybiBifSxnZXRUZXh0OmZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gdGhpcy5pc0ZvY3VzKCkmJihhPXRoaXMuZ2V0TmF0aXZlKCkpPyhiPWJyb3dzZXIuaWU5YmVsb3c/YS5jcmVhdGVSYW5nZSgpOmEuZ2V0UmFuZ2VBdCgwKSxicm93c2VyLmllOWJlbG93P2IudGV4dDpiLnRvU3RyaW5nKCkpOlwiXCJ9LGNsZWFyUmFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmdldE5hdGl2ZSgpW2Jyb3dzZXIuaWU5YmVsb3c/XCJlbXB0eVwiOlwicmVtb3ZlQWxsUmFuZ2VzXCJdKCl9fX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXt2YXIgYztpZihiLnRleHRhcmVhKWlmKHV0aWxzLmlzU3RyaW5nKGIudGV4dGFyZWEpKXtmb3IodmFyIGQsZT0wLGY9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSxcInRleHRhcmVhXCIpO2Q9ZltlKytdOylpZihkLmlkPT1cInVlZGl0b3JfdGV4dGFyZWFfXCIrYi5vcHRpb25zLnRleHRhcmVhKXtjPWQ7YnJlYWt9fWVsc2UgYz1iLnRleHRhcmVhO2N8fChhLmFwcGVuZENoaWxkKGM9ZG9tVXRpbHMuY3JlYXRlRWxlbWVudChkb2N1bWVudCxcInRleHRhcmVhXCIse25hbWU6Yi5vcHRpb25zLnRleHRhcmVhLGlkOlwidWVkaXRvcl90ZXh0YXJlYV9cIitiLm9wdGlvbnMudGV4dGFyZWEsc3R5bGU6XCJkaXNwbGF5Om5vbmVcIn0pKSxiLnRleHRhcmVhPWMpLCFjLmdldEF0dHJpYnV0ZShcIm5hbWVcIikmJmMuc2V0QXR0cmlidXRlKFwibmFtZVwiLGIub3B0aW9ucy50ZXh0YXJlYSksYy52YWx1ZT1iLmhhc0NvbnRlbnRzKCk/Yi5vcHRpb25zLmFsbEh0bWxFbmFibGVkP2IuZ2V0QWxsSHRtbCgpOmIuZ2V0Q29udGVudChudWxsLG51bGwsITApOlwiXCJ9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4gYn1mdW5jdGlvbiBjKGEpe2EubGFuZ0lzUmVhZHk9ITAsYS5maXJlRXZlbnQoXCJsYW5nUmVhZHlcIil9dmFyIGQsZT0wLGY9VUUuRWRpdG9yPWZ1bmN0aW9uKGEpe3ZhciBkPXRoaXM7ZC51aWQ9ZSsrLEV2ZW50QmFzZS5jYWxsKGQpLGQuY29tbWFuZHM9e30sZC5vcHRpb25zPXV0aWxzLmV4dGVuZCh1dGlscy5jbG9uZShhfHx7fSksVUVESVRPUl9DT05GSUcsITApLGQuc2hvcnRjdXRrZXlzPXt9LGQuaW5wdXRSdWxlcz1bXSxkLm91dHB1dFJ1bGVzPVtdLGQuc2V0T3B0KGYuZGVmYXVsdE9wdGlvbnMoZCkpLGQubG9hZFNlcnZlckNvbmZpZygpLHV0aWxzLmlzRW1wdHlPYmplY3QoVUUuSTE4Tik/dXRpbHMubG9hZEZpbGUoZG9jdW1lbnQse3NyYzpkLm9wdGlvbnMubGFuZ1BhdGgrZC5vcHRpb25zLmxhbmcrXCIvXCIrZC5vcHRpb25zLmxhbmcrXCIuanNcIix0YWc6XCJzY3JpcHRcIix0eXBlOlwidGV4dC9qYXZhc2NyaXB0XCIsZGVmZXI6XCJkZWZlclwifSxmdW5jdGlvbigpe1VFLnBsdWdpbi5sb2FkKGQpLGMoZCl9KTooZC5vcHRpb25zLmxhbmc9YihVRS5JMThOKSxVRS5wbHVnaW4ubG9hZChkKSxjKGQpKSxVRS5pbnN0YW50c1tcInVlZGl0b3JJbnN0YW50XCIrZC51aWRdPWR9O2YucHJvdG90eXBlPXtyZWdpc3RlckNvbW1hbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNvbW1hbmRzW2FdPWJ9LHJlYWR5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YSYmKGIuaXNSZWFkeT9hLmFwcGx5KGIpOmIuYWRkTGlzdGVuZXIoXCJyZWFkeVwiLGEpKX0sc2V0T3B0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dXRpbHMuaXNTdHJpbmcoYSk/Y1thXT1iOmM9YSx1dGlscy5leHRlbmQodGhpcy5vcHRpb25zLGMsITApfSxnZXRPcHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub3B0aW9uc1thXX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5maXJlRXZlbnQoXCJkZXN0cm95XCIpO3ZhciBiPWEuY29udGFpbmVyLnBhcmVudE5vZGUsYz1hLnRleHRhcmVhO2M/Yy5zdHlsZS5kaXNwbGF5PVwiXCI6KGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpLGIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYyxiKSksYy5zdHlsZS53aWR0aD1hLmlmcmFtZS5vZmZzZXRXaWR0aCtcInB4XCIsYy5zdHlsZS5oZWlnaHQ9YS5pZnJhbWUub2Zmc2V0SGVpZ2h0K1wicHhcIixjLnZhbHVlPWEuZ2V0Q29udGVudCgpLGMuaWQ9YS5rZXksYi5pbm5lckhUTUw9XCJcIixkb21VdGlscy5yZW1vdmUoYik7dmFyIGQ9YS5rZXk7Zm9yKHZhciBlIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShlKSYmZGVsZXRlIHRoaXNbZV07VUUuZGVsRWRpdG9yKGQpfSxyZW5kZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIub3B0aW9ucyxkPWZ1bmN0aW9uKGIpe3JldHVybiBwYXJzZUludChkb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGEsYikpfTtpZih1dGlscy5pc1N0cmluZyhhKSYmKGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSkpLGEpe2MuaW5pdGlhbEZyYW1lV2lkdGg/Yy5taW5GcmFtZVdpZHRoPWMuaW5pdGlhbEZyYW1lV2lkdGg6Yy5taW5GcmFtZVdpZHRoPWMuaW5pdGlhbEZyYW1lV2lkdGg9YS5vZmZzZXRXaWR0aCxjLmluaXRpYWxGcmFtZUhlaWdodD9jLm1pbkZyYW1lSGVpZ2h0PWMuaW5pdGlhbEZyYW1lSGVpZ2h0OmMuaW5pdGlhbEZyYW1lSGVpZ2h0PWMubWluRnJhbWVIZWlnaHQ9YS5vZmZzZXRIZWlnaHQsYS5zdHlsZS53aWR0aD0vJSQvLnRlc3QoYy5pbml0aWFsRnJhbWVXaWR0aCk/XCIxMDAlXCI6Yy5pbml0aWFsRnJhbWVXaWR0aC1kKFwicGFkZGluZy1sZWZ0XCIpLWQoXCJwYWRkaW5nLXJpZ2h0XCIpK1wicHhcIixhLnN0eWxlLmhlaWdodD0vJSQvLnRlc3QoYy5pbml0aWFsRnJhbWVIZWlnaHQpP1wiMTAwJVwiOmMuaW5pdGlhbEZyYW1lSGVpZ2h0LWQoXCJwYWRkaW5nLXRvcFwiKS1kKFwicGFkZGluZy1ib3R0b21cIikrXCJweFwiLGEuc3R5bGUuekluZGV4PWMuekluZGV4O3ZhciBlPShpZSYmYnJvd3Nlci52ZXJzaW9uPDk/XCJcIjpcIjwhRE9DVFlQRSBodG1sPlwiKStcIjxodG1sIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJyBjbGFzcz0ndmlldycgPjxoZWFkPjxzdHlsZSB0eXBlPSd0ZXh0L2Nzcyc+LnZpZXd7cGFkZGluZzowO3dvcmQtd3JhcDpicmVhay13b3JkO2N1cnNvcjp0ZXh0O2hlaWdodDo5MCU7fVxcbmJvZHl7bWFyZ2luOjhweDtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxNnB4O31we21hcmdpbjo1cHggMDt9PC9zdHlsZT5cIisoYy5pZnJhbWVDc3NVcmw/XCI8bGluayByZWw9J3N0eWxlc2hlZXQnIHR5cGU9J3RleHQvY3NzJyBocmVmPSdcIit1dGlscy51bmh0bWwoYy5pZnJhbWVDc3NVcmwpK1wiJy8+XCI6XCJcIikrKGMuaW5pdGlhbFN0eWxlP1wiPHN0eWxlPlwiK2MuaW5pdGlhbFN0eWxlK1wiPC9zdHlsZT5cIjpcIlwiKStcIjwvaGVhZD48Ym9keSBjbGFzcz0ndmlldycgPjwvYm9keT48c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCcgXCIrKGllP1wiZGVmZXI9J2RlZmVyJ1wiOlwiXCIpK1wiIGlkPSdfaW5pdGlhbFNjcmlwdCc+c2V0VGltZW91dChmdW5jdGlvbigpe2VkaXRvciA9IHdpbmRvdy5wYXJlbnQuVUUuaW5zdGFudHNbJ3VlZGl0b3JJbnN0YW50XCIrYi51aWQrXCInXTtlZGl0b3IuX3NldHVwKGRvY3VtZW50KTt9LDApO3ZhciBfdG1wU2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ19pbml0aWFsU2NyaXB0Jyk7X3RtcFNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKF90bXBTY3JpcHQpOzwvc2NyaXB0PjwvaHRtbD5cIjthLmFwcGVuZENoaWxkKGRvbVV0aWxzLmNyZWF0ZUVsZW1lbnQoZG9jdW1lbnQsXCJpZnJhbWVcIix7aWQ6XCJ1ZWRpdG9yX1wiK2IudWlkLHdpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIixmcmFtZWJvcmRlcjpcIjBcIixzcmM6XCJqYXZhc2NyaXB0OnZvaWQoZnVuY3Rpb24oKXtkb2N1bWVudC5vcGVuKCk7XCIrKGMuY3VzdG9tRG9tYWluJiZkb2N1bWVudC5kb21haW4hPWxvY2F0aW9uLmhvc3RuYW1lPydkb2N1bWVudC5kb21haW49XCInK2RvY3VtZW50LmRvbWFpbisnXCI7JzpcIlwiKSsnZG9jdW1lbnQud3JpdGUoXCInK2UrJ1wiKTtkb2N1bWVudC5jbG9zZSgpO30oKSknfSkpLGEuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7LyUkLy50ZXN0KGMuaW5pdGlhbEZyYW1lV2lkdGgpJiYoYy5taW5GcmFtZVdpZHRoPWMuaW5pdGlhbEZyYW1lV2lkdGg9YS5vZmZzZXRXaWR0aCksLyUkLy50ZXN0KGMuaW5pdGlhbEZyYW1lSGVpZ2h0KSYmKGMubWluRnJhbWVIZWlnaHQ9Yy5pbml0aWFsRnJhbWVIZWlnaHQ9YS5vZmZzZXRIZWlnaHQsYS5zdHlsZS5oZWlnaHQ9Yy5pbml0aWFsRnJhbWVIZWlnaHQrXCJweFwiKX0pfX0sX3NldHVwOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMsZD1jLm9wdGlvbnM7aWU/KGIuYm9keS5kaXNhYmxlZD0hMCxiLmJvZHkuY29udGVudEVkaXRhYmxlPSEwLGIuYm9keS5kaXNhYmxlZD0hMSk6Yi5ib2R5LmNvbnRlbnRFZGl0YWJsZT0hMCxiLmJvZHkuc3BlbGxjaGVjaz0hMSxjLmRvY3VtZW50PWIsYy53aW5kb3c9Yi5kZWZhdWx0Vmlld3x8Yi5wYXJlbnRXaW5kb3csYy5pZnJhbWU9Yy53aW5kb3cuZnJhbWVFbGVtZW50LGMuYm9keT1iLmJvZHksYy5zZWxlY3Rpb249bmV3IGRvbS5TZWxlY3Rpb24oYik7dmFyIGU7YnJvd3Nlci5nZWNrbyYmKGU9dGhpcy5zZWxlY3Rpb24uZ2V0TmF0aXZlKCkpJiZlLnJlbW92ZUFsbFJhbmdlcygpLHRoaXMuX2luaXRFdmVudHMoKTtmb3IodmFyIGY9dGhpcy5pZnJhbWUucGFyZW50Tm9kZTshZG9tVXRpbHMuaXNCb2R5KGYpO2Y9Zi5wYXJlbnROb2RlKWlmKFwiRk9STVwiPT1mLnRhZ05hbWUpe2MuZm9ybT1mLGMub3B0aW9ucy5hdXRvU3luY0RhdGE/ZG9tVXRpbHMub24oYy53aW5kb3csXCJibHVyXCIsZnVuY3Rpb24oKXthKGYsYyl9KTpkb21VdGlscy5vbihmLFwic3VibWl0XCIsZnVuY3Rpb24oKXthKHRoaXMsYyl9KTticmVha31pZihkLmluaXRpYWxDb250ZW50KWlmKGQuYXV0b0NsZWFyaW5pdGlhbENvbnRlbnQpe3ZhciBnPWMuZXhlY0NvbW1hbmQ7Yy5leGVjQ29tbWFuZD1mdW5jdGlvbigpe3JldHVybiBjLmZpcmVFdmVudChcImZpcnN0QmVmb3JlRXhlY0NvbW1hbmRcIiksZy5hcHBseShjLGFyZ3VtZW50cyl9LHRoaXMuX3NldERlZmF1bHRDb250ZW50KGQuaW5pdGlhbENvbnRlbnQpfWVsc2UgdGhpcy5zZXRDb250ZW50KGQuaW5pdGlhbENvbnRlbnQsITEsITApO2RvbVV0aWxzLmlzRW1wdHlOb2RlKGMuYm9keSkmJihjLmJvZHkuaW5uZXJIVE1MPVwiPHA+XCIrKGJyb3dzZXIuaWU/XCJcIjpcIjxici8+XCIpK1wiPC9wPlwiKSxkLmZvY3VzJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5mb2N1cyhjLm9wdGlvbnMuZm9jdXNJbkVuZCksIWMub3B0aW9ucy5hdXRvQ2xlYXJpbml0aWFsQ29udGVudCYmYy5fc2VsZWN0aW9uQ2hhbmdlKCl9LDApLGMuY29udGFpbmVyfHwoYy5jb250YWluZXI9dGhpcy5pZnJhbWUucGFyZW50Tm9kZSksZC5mdWxsc2NyZWVuJiZjLnVpJiZjLnVpLnNldEZ1bGxTY3JlZW4oITApO3RyeXtjLmRvY3VtZW50LmV4ZWNDb21tYW5kKFwiMkQtcG9zaXRpb25cIiwhMSwhMSl9Y2F0Y2goaCl7fXRyeXtjLmRvY3VtZW50LmV4ZWNDb21tYW5kKFwiZW5hYmxlSW5saW5lVGFibGVFZGl0aW5nXCIsITEsITEpfWNhdGNoKGgpe310cnl7Yy5kb2N1bWVudC5leGVjQ29tbWFuZChcImVuYWJsZU9iamVjdFJlc2l6aW5nXCIsITEsITEpfWNhdGNoKGgpe31jLl9iaW5kc2hvcnRjdXRLZXlzKCksYy5pc1JlYWR5PTEsYy5maXJlRXZlbnQoXCJyZWFkeVwiKSxkLm9ucmVhZHkmJmQub25yZWFkeS5jYWxsKGMpLGJyb3dzZXIuaWU5YmVsb3d8fGRvbVV0aWxzLm9uKGMud2luZG93LFtcImJsdXJcIixcImZvY3VzXCJdLGZ1bmN0aW9uKGEpe2lmKFwiYmx1clwiPT1hLnR5cGUpe2MuX2Jha1JhbmdlPWMuc2VsZWN0aW9uLmdldFJhbmdlKCk7dHJ5e2MuX2Jha05hdGl2ZVJhbmdlPWMuc2VsZWN0aW9uLmdldE5hdGl2ZSgpLmdldFJhbmdlQXQoMCksYy5zZWxlY3Rpb24uZ2V0TmF0aXZlKCkucmVtb3ZlQWxsUmFuZ2VzKCl9Y2F0Y2goYSl7Yy5fYmFrTmF0aXZlUmFuZ2U9bnVsbH19ZWxzZSB0cnl7Yy5fYmFrUmFuZ2UmJmMuX2Jha1JhbmdlLnNlbGVjdCgpfWNhdGNoKGEpe319KSxicm93c2VyLmdlY2tvJiZicm93c2VyLnZlcnNpb248PTEwOTAyJiYoYy5ib2R5LmNvbnRlbnRFZGl0YWJsZT0hMSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5ib2R5LmNvbnRlbnRFZGl0YWJsZT0hMH0sMTAwKSxzZXRJbnRlcnZhbChmdW5jdGlvbigpe2MuYm9keS5zdHlsZS5oZWlnaHQ9Yy5pZnJhbWUub2Zmc2V0SGVpZ2h0LTIwK1wicHhcIn0sMTAwKSksIWQuaXNTaG93JiZjLnNldEhpZGUoKSxkLnJlYWRvbmx5JiZjLnNldERpc2FibGVkKCl9LHN5bmM6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxkPWI/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYik6ZG9tVXRpbHMuZmluZFBhcmVudChjLmlmcmFtZS5wYXJlbnROb2RlLGZ1bmN0aW9uKGEpe3JldHVyblwiRk9STVwiPT1hLnRhZ05hbWV9LCEwKTtkJiZhKGQsYyl9LHNldEhlaWdodDpmdW5jdGlvbihhLGIpe2EhPT1wYXJzZUludCh0aGlzLmlmcmFtZS5wYXJlbnROb2RlLnN0eWxlLmhlaWdodCkmJih0aGlzLmlmcmFtZS5wYXJlbnROb2RlLnN0eWxlLmhlaWdodD1hK1wicHhcIiksIWImJih0aGlzLm9wdGlvbnMubWluRnJhbWVIZWlnaHQ9dGhpcy5vcHRpb25zLmluaXRpYWxGcmFtZUhlaWdodD1hKSx0aGlzLmJvZHkuc3R5bGUuaGVpZ2h0PWErXCJweFwiLCFiJiZ0aGlzLnRyaWdnZXIoXCJzZXRIZWlnaHRcIil9LGFkZHNob3J0Y3V0a2V5OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307Yj9jW2FdPWI6Yz1hLHV0aWxzLmV4dGVuZCh0aGlzLnNob3J0Y3V0a2V5cyxjKX0sX2JpbmRzaG9ydGN1dEtleXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9dGhpcy5zaG9ydGN1dGtleXM7YS5hZGRMaXN0ZW5lcihcImtleWRvd25cIixmdW5jdGlvbihjLGQpe3ZhciBlPWQua2V5Q29kZXx8ZC53aGljaDtmb3IodmFyIGYgaW4gYilmb3IodmFyIGcsaD1iW2ZdLnNwbGl0KFwiLFwiKSxpPTA7Zz1oW2krK107KXtnPWcuc3BsaXQoXCI6XCIpO3ZhciBqPWdbMF0saz1nWzFdOygvXihjdHJsKShcXCtzaGlmdCk/XFwrKFxcZCspJC8udGVzdChqLnRvTG93ZXJDYXNlKCkpfHwvXihcXGQrKSQvLnRlc3QoaikpJiYoKFwiY3RybFwiPT1SZWdFeHAuJDE/ZC5jdHJsS2V5fHxkLm1ldGFLZXk6MCkmJihcIlwiIT1SZWdFeHAuJDI/ZFtSZWdFeHAuJDIuc2xpY2UoMSkrXCJLZXlcIl06MSkmJmU9PVJlZ0V4cC4kM3x8ZT09UmVnRXhwLiQxKSYmKGEucXVlcnlDb21tYW5kU3RhdGUoZixrKSE9LTEmJmEuZXhlY0NvbW1hbmQoZixrKSxkb21VdGlscy5wcmV2ZW50RGVmYXVsdChkKSl9fSl9LGdldENvbnRlbnQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj10aGlzO2lmKGEmJnV0aWxzLmlzRnVuY3Rpb24oYSkmJihiPWEsYT1cIlwiKSxiPyFiKCk6IXRoaXMuaGFzQ29udGVudHMoKSlyZXR1cm5cIlwiO2YuZmlyZUV2ZW50KFwiYmVmb3JlZ2V0Y29udGVudFwiKTt2YXIgZz1VRS5odG1scGFyc2VyKGYuYm9keS5pbm5lckhUTUwsZCk7cmV0dXJuIGYuZmlsdGVyT3V0cHV0UnVsZShnKSxmLmZpcmVFdmVudChcImFmdGVyZ2V0Y29udGVudFwiLGEsZyksZy50b0h0bWwoZSl9LGdldEFsbEh0bWw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9W107aWYoYS5maXJlRXZlbnQoXCJnZXRBbGxIdG1sXCIsYiksYnJvd3Nlci5pZSYmYnJvd3Nlci52ZXJzaW9uPjgpe3ZhciBjPVwiXCI7dXRpbHMuZWFjaChhLmRvY3VtZW50LnN0eWxlU2hlZXRzLGZ1bmN0aW9uKGEpe2MrPWEuaHJlZj8nPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiIGhyZWY9XCInK2EuaHJlZisnXCIgLz4nOlwiPHN0eWxlPlwiK2EuY3NzVGV4dCtcIjwvc3R5bGU+XCJ9KSx1dGlscy5lYWNoKGEuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIiksZnVuY3Rpb24oYSl7Yys9YS5vdXRlckhUTUx9KX1yZXR1cm5cIjxodG1sPjxoZWFkPlwiKyhhLm9wdGlvbnMuY2hhcnNldD8nPG1ldGEgaHR0cC1lcXVpdj1cIkNvbnRlbnQtVHlwZVwiIGNvbnRlbnQ9XCJ0ZXh0L2h0bWw7IGNoYXJzZXQ9JythLm9wdGlvbnMuY2hhcnNldCsnXCIvPic6XCJcIikrKGN8fGEuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmlubmVySFRNTCkrYi5qb2luKFwiXFxuXCIpK1wiPC9oZWFkPjxib2R5IFwiKyhpZSYmYnJvd3Nlci52ZXJzaW9uPDk/J2NsYXNzPVwidmlld1wiJzpcIlwiKStcIj5cIithLmdldENvbnRlbnQobnVsbCxudWxsLCEwKStcIjwvYm9keT48L2h0bWw+XCJ9LGdldFBsYWluVHh0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFJlZ0V4cChkb21VdGlscy5maWxsQ2hhcixcImdcIiksYj10aGlzLmJvZHkuaW5uZXJIVE1MLnJlcGxhY2UoL1tcXG5cXHJdL2csXCJcIik7cmV0dXJuIGI9Yi5yZXBsYWNlKC88KHB8ZGl2KVtePl0qPig8YnJcXC8/PnwmbmJzcDspPFxcL1xcMT4vZ2ksXCJcXG5cIikucmVwbGFjZSgvPGJyXFwvPz4vZ2ksXCJcXG5cIikucmVwbGFjZSgvPFtePlxcL10rPi9nLFwiXCIpLnJlcGxhY2UoLyhcXG4pPzxcXC8oW14+XSspPi9nLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZHRkLiRibG9ja1tjXT9cIlxcblwiOmI/YjpcIlwifSksYi5yZXBsYWNlKGEsXCJcIikucmVwbGFjZSgvXFx1MDBhMC9nLFwiIFwiKS5yZXBsYWNlKC8mbmJzcDsvZyxcIiBcIil9LGdldENvbnRlbnRUeHQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgUmVnRXhwKGRvbVV0aWxzLmZpbGxDaGFyLFwiZ1wiKTtyZXR1cm4gdGhpcy5ib2R5W2Jyb3dzZXIuaWU/XCJpbm5lclRleHRcIjpcInRleHRDb250ZW50XCJdLnJlcGxhY2UoYSxcIlwiKS5yZXBsYWNlKC9cXHUwMGEwL2csXCIgXCIpfSxzZXRDb250ZW50OmZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKGEpe3JldHVyblwiRElWXCI9PWEudGFnTmFtZSYmYS5nZXRBdHRyaWJ1dGUoXCJjZGF0YV90YWdcIil9dmFyIGY9dGhpcztmLmZpcmVFdmVudChcImJlZm9yZXNldGNvbnRlbnRcIixiKTt2YXIgZz1VRS5odG1scGFyc2VyKGIpO2lmKGYuZmlsdGVySW5wdXRSdWxlKGcpLGI9Zy50b0h0bWwoKSxmLmJvZHkuaW5uZXJIVE1MPShjP2YuYm9keS5pbm5lckhUTUw6XCJcIikrYixcInBcIj09Zi5vcHRpb25zLmVudGVyVGFnKXt2YXIgaCxpPXRoaXMuYm9keS5maXJzdENoaWxkO2lmKCFpfHwxPT1pLm5vZGVUeXBlJiYoZHRkLiRjZGF0YVtpLnRhZ05hbWVdfHxlKGkpfHxkb21VdGlscy5pc0N1c3RvbWVOb2RlKGkpKSYmaT09PXRoaXMuYm9keS5sYXN0Q2hpbGQpdGhpcy5ib2R5LmlubmVySFRNTD1cIjxwPlwiKyhicm93c2VyLmllP1wiJm5ic3A7XCI6XCI8YnIvPlwiKStcIjwvcD5cIit0aGlzLmJvZHkuaW5uZXJIVE1MO2Vsc2UgZm9yKHZhciBqPWYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7aTspe2Zvcig7aSYmKDM9PWkubm9kZVR5cGV8fDE9PWkubm9kZVR5cGUmJmR0ZC5wW2kudGFnTmFtZV0mJiFkdGQuJGNkYXRhW2kudGFnTmFtZV0pOyloPWkubmV4dFNpYmxpbmcsai5hcHBlbmRDaGlsZChpKSxpPWg7aWYoai5maXJzdENoaWxkKXtpZighaSl7Zi5ib2R5LmFwcGVuZENoaWxkKGopO2JyZWFrfWkucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaixpKSxqPWYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIil9aT1pLm5leHRTaWJsaW5nfX1mLmZpcmVFdmVudChcImFmdGVyc2V0Y29udGVudFwiKSxmLmZpcmVFdmVudChcImNvbnRlbnRjaGFuZ2VcIiksIWQmJmYuX3NlbGVjdGlvbkNoYW5nZSgpLGYuX2Jha1JhbmdlPWYuX2Jha0lFUmFuZ2U9Zi5fYmFrTmF0aXZlUmFuZ2U9bnVsbDt2YXIgazticm93c2VyLmdlY2tvJiYoaz10aGlzLnNlbGVjdGlvbi5nZXROYXRpdmUoKSkmJmsucmVtb3ZlQWxsUmFuZ2VzKCksZi5vcHRpb25zLmF1dG9TeW5jRGF0YSYmZi5mb3JtJiZhKGYuZm9ybSxmKX0sZm9jdXM6ZnVuY3Rpb24oYSl7dHJ5e3ZhciBiPXRoaXMsYz1iLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKGEpe3ZhciBkPWIuYm9keS5sYXN0Q2hpbGQ7ZCYmMT09ZC5ub2RlVHlwZSYmIWR0ZC4kZW1wdHlbZC50YWdOYW1lXSYmKGRvbVV0aWxzLmlzRW1wdHlCbG9jayhkKT9jLnNldFN0YXJ0QXRGaXJzdChkKTpjLnNldFN0YXJ0QXRMYXN0KGQpLGMuY29sbGFwc2UoITApKSxjLnNldEN1cnNvcighMCl9ZWxzZXtpZighYy5jb2xsYXBzZWQmJmRvbVV0aWxzLmlzQm9keShjLnN0YXJ0Q29udGFpbmVyKSYmMD09Yy5zdGFydE9mZnNldCl7dmFyIGQ9Yi5ib2R5LmZpcnN0Q2hpbGQ7ZCYmMT09ZC5ub2RlVHlwZSYmIWR0ZC4kZW1wdHlbZC50YWdOYW1lXSYmYy5zZXRTdGFydEF0Rmlyc3QoZCkuY29sbGFwc2UoITApfWMuc2VsZWN0KCEwKX10aGlzLmZpcmVFdmVudChcImZvY3VzIHNlbGVjdGlvbmNoYW5nZVwiKX1jYXRjaChlKXt9fSxpc0ZvY3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uLmlzRm9jdXMoKX0sYmx1cjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2VsZWN0aW9uLmdldE5hdGl2ZSgpO2lmKGEuZW1wdHkmJmJyb3dzZXIuaWUpe3ZhciBiPWRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7Yi5tb3ZlVG9FbGVtZW50VGV4dChkb2N1bWVudC5ib2R5KSxiLmNvbGxhcHNlKCEwKSxiLnNlbGVjdCgpLGEuZW1wdHkoKX1lbHNlIGEucmVtb3ZlQWxsUmFuZ2VzKCl9LF9pbml0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuZG9jdW1lbnQsYz1hLndpbmRvdzthLl9wcm94eURvbUV2ZW50PXV0aWxzLmJpbmQoYS5fcHJveHlEb21FdmVudCxhKSxkb21VdGlscy5vbihiLFtcImNsaWNrXCIsXCJjb250ZXh0bWVudVwiLFwibW91c2Vkb3duXCIsXCJrZXlkb3duXCIsXCJrZXl1cFwiLFwia2V5cHJlc3NcIixcIm1vdXNldXBcIixcIm1vdXNlb3ZlclwiLFwibW91c2VvdXRcIixcInNlbGVjdHN0YXJ0XCJdLGEuX3Byb3h5RG9tRXZlbnQpLGRvbVV0aWxzLm9uKGMsW1wiZm9jdXNcIixcImJsdXJcIl0sYS5fcHJveHlEb21FdmVudCksZG9tVXRpbHMub24oYS5ib2R5LFwiZHJvcFwiLGZ1bmN0aW9uKGIpe2Jyb3dzZXIuZ2Vja28mJmIuc3RvcFByb3BhZ2F0aW9uJiZiLnN0b3BQcm9wYWdhdGlvbigpLGEuZmlyZUV2ZW50KFwiY29udGVudGNoYW5nZVwiKX0pLGRvbVV0aWxzLm9uKGIsW1wibW91c2V1cFwiLFwia2V5ZG93blwiXSxmdW5jdGlvbihiKXtcImtleWRvd25cIj09Yi50eXBlJiYoYi5jdHJsS2V5fHxiLm1ldGFLZXl8fGIuc2hpZnRLZXl8fGIuYWx0S2V5KXx8MiE9Yi5idXR0b24mJmEuX3NlbGVjdGlvbkNoYW5nZSgyNTAsYil9KX0sX3Byb3h5RG9tRXZlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmlyZUV2ZW50KFwiYmVmb3JlXCIrYS50eXBlLnJlcGxhY2UoL15vbi8sXCJcIikudG9Mb3dlckNhc2UoKSkhPT0hMSYmKHRoaXMuZmlyZUV2ZW50KGEudHlwZS5yZXBsYWNlKC9eb24vLFwiXCIpLGEpIT09ITEmJnRoaXMuZmlyZUV2ZW50KFwiYWZ0ZXJcIithLnR5cGUucmVwbGFjZSgvXm9uLyxcIlwiKS50b0xvd2VyQ2FzZSgpKSl9LF9zZWxlY3Rpb25DaGFuZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGY9dGhpcyxnPSExO2lmKGJyb3dzZXIuaWUmJmJyb3dzZXIudmVyc2lvbjw5JiZiJiZcIm1vdXNldXBcIj09Yi50eXBlKXt2YXIgaD10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2guY29sbGFwc2VkfHwoZz0hMCxjPWIuY2xpZW50WCxlPWIuY2xpZW50WSl9Y2xlYXJUaW1lb3V0KGQpLGQ9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGYuc2VsZWN0aW9uJiZmLnNlbGVjdGlvbi5nZXROYXRpdmUoKSl7dmFyIGE7aWYoZyYmXCJOb25lXCI9PWYuc2VsZWN0aW9uLmdldE5hdGl2ZSgpLnR5cGUpe2E9Zi5kb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO3RyeXthLm1vdmVUb1BvaW50KGMsZSl9Y2F0Y2goZCl7YT1udWxsfX12YXIgaDthJiYoaD1mLnNlbGVjdGlvbi5nZXRJRVJhbmdlLGYuc2VsZWN0aW9uLmdldElFUmFuZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gYX0pLGYuc2VsZWN0aW9uLmNhY2hlKCksaCYmKGYuc2VsZWN0aW9uLmdldElFUmFuZ2U9aCksZi5zZWxlY3Rpb24uX2NhY2hlZFJhbmdlJiZmLnNlbGVjdGlvbi5fY2FjaGVkU3RhcnRFbGVtZW50JiYoZi5maXJlRXZlbnQoXCJiZWZvcmVzZWxlY3Rpb25jaGFuZ2VcIiksZi5maXJlRXZlbnQoXCJzZWxlY3Rpb25jaGFuZ2VcIiwhIWIpLGYuZmlyZUV2ZW50KFwiYWZ0ZXJzZWxlY3Rpb25jaGFuZ2VcIiksZi5zZWxlY3Rpb24uY2xlYXIoKSl9fSxhfHw1MCl9LF9jYWxsQ21kRm46ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YlswXS50b0xvd2VyQ2FzZSgpO3JldHVybiBjPXRoaXMuY29tbWFuZHNbZV18fFVFLmNvbW1hbmRzW2VdLGQ9YyYmY1thXSxjJiZkfHxcInF1ZXJ5Q29tbWFuZFN0YXRlXCIhPWE/ZD9kLmFwcGx5KHRoaXMsYik6dm9pZCAwOjB9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe2E9YS50b0xvd2VyQ2FzZSgpO3ZhciBiLGM9dGhpcyxkPWMuY29tbWFuZHNbYV18fFVFLmNvbW1hbmRzW2FdO3JldHVybiBkJiZkLmV4ZWNDb21tYW5kPyhkLm5vdE5lZWRVbmRvfHxjLl9faGFzRW50ZXJFeGVjQ29tbWFuZD8oYj10aGlzLl9jYWxsQ21kRm4oXCJleGVjQ29tbWFuZFwiLGFyZ3VtZW50cyksIWMuX19oYXNFbnRlckV4ZWNDb21tYW5kJiYhZC5pZ25vcmVDb250ZW50Q2hhbmdlJiYhYy5faWdub3JlQ29udGVudENoYW5nZSYmYy5maXJlRXZlbnQoXCJjb250ZW50Y2hhbmdlXCIpKTooYy5fX2hhc0VudGVyRXhlY0NvbW1hbmQ9ITAsYy5xdWVyeUNvbW1hbmRTdGF0ZS5hcHBseShjLGFyZ3VtZW50cykhPS0xJiYoYy5maXJlRXZlbnQoXCJzYXZlU2NlbmVcIiksYy5maXJlRXZlbnQuYXBwbHkoYyxbXCJiZWZvcmVleGVjY29tbWFuZFwiLGFdLmNvbmNhdChhcmd1bWVudHMpKSxiPXRoaXMuX2NhbGxDbWRGbihcImV4ZWNDb21tYW5kXCIsYXJndW1lbnRzKSxjLmZpcmVFdmVudC5hcHBseShjLFtcImFmdGVyZXhlY2NvbW1hbmRcIixhXS5jb25jYXQoYXJndW1lbnRzKSksYy5maXJlRXZlbnQoXCJzYXZlU2NlbmVcIikpLGMuX19oYXNFbnRlckV4ZWNDb21tYW5kPSExKSwhYy5fX2hhc0VudGVyRXhlY0NvbW1hbmQmJiFkLmlnbm9yZUNvbnRlbnRDaGFuZ2UmJiFjLl9pZ25vcmVDb250ZW50Q2hhbmdlJiZjLl9zZWxlY3Rpb25DaGFuZ2UoKSxiKTpudWxsfSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fY2FsbENtZEZuKFwicXVlcnlDb21tYW5kU3RhdGVcIixhcmd1bWVudHMpfSxxdWVyeUNvbW1hbmRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fY2FsbENtZEZuKFwicXVlcnlDb21tYW5kVmFsdWVcIixhcmd1bWVudHMpfSxoYXNDb250ZW50czpmdW5jdGlvbihhKXtpZihhKWZvcih2YXIgYixjPTA7Yj1hW2MrK107KWlmKHRoaXMuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYikubGVuZ3RoPjApcmV0dXJuITA7aWYoIWRvbVV0aWxzLmlzRW1wdHlCbG9jayh0aGlzLmJvZHkpKXJldHVybiEwO2ZvcihhPVtcImRpdlwiXSxjPTA7Yj1hW2MrK107KWZvcih2YXIgZCxlPWRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRoaXMuZG9jdW1lbnQsYiksZj0wO2Q9ZVtmKytdOylpZihkb21VdGlscy5pc0N1c3RvbWVOb2RlKGQpKXJldHVybiEwO3JldHVybiExfSxyZXNldDpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KFwicmVzZXRcIil9LHNldEVuYWJsZWQ6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXM7aWYoXCJmYWxzZVwiPT1iLmJvZHkuY29udGVudEVkaXRhYmxlKXtiLmJvZHkuY29udGVudEVkaXRhYmxlPSEwLGE9Yi5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTt0cnl7YS5tb3ZlVG9Cb29rbWFyayhiLmxhc3RCayksZGVsZXRlIGIubGFzdEJrfWNhdGNoKGMpe2Euc2V0U3RhcnRBdEZpcnN0KGIuYm9keSkuY29sbGFwc2UoITApfWEuc2VsZWN0KCEwKSxiLmJrcXVlcnlDb21tYW5kU3RhdGUmJihiLnF1ZXJ5Q29tbWFuZFN0YXRlPWIuYmtxdWVyeUNvbW1hbmRTdGF0ZSxkZWxldGUgYi5ia3F1ZXJ5Q29tbWFuZFN0YXRlKSxiLmJrcXVlcnlDb21tYW5kVmFsdWUmJihiLnF1ZXJ5Q29tbWFuZFZhbHVlPWIuYmtxdWVyeUNvbW1hbmRWYWx1ZSxkZWxldGUgYi5ia3F1ZXJ5Q29tbWFuZFZhbHVlKSxiLmZpcmVFdmVudChcInNlbGVjdGlvbmNoYW5nZVwiKX19LGVuYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldEVuYWJsZWQoKX0sc2V0RGlzYWJsZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthPWE/dXRpbHMuaXNBcnJheShhKT9hOlthXTpbXSxcInRydWVcIj09Yi5ib2R5LmNvbnRlbnRFZGl0YWJsZSYmKGIubGFzdEJrfHwoYi5sYXN0Qms9Yi5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5jcmVhdGVCb29rbWFyayghMCkpLGIuYm9keS5jb250ZW50RWRpdGFibGU9ITEsYi5ia3F1ZXJ5Q29tbWFuZFN0YXRlPWIucXVlcnlDb21tYW5kU3RhdGUsYi5ia3F1ZXJ5Q29tbWFuZFZhbHVlPWIucXVlcnlDb21tYW5kVmFsdWUsYi5xdWVyeUNvbW1hbmRTdGF0ZT1mdW5jdGlvbihjKXtyZXR1cm4gdXRpbHMuaW5kZXhPZihhLGMpIT0tMT9iLmJrcXVlcnlDb21tYW5kU3RhdGUuYXBwbHkoYixhcmd1bWVudHMpOi0xfSxiLnF1ZXJ5Q29tbWFuZFZhbHVlPWZ1bmN0aW9uKGMpe3JldHVybiB1dGlscy5pbmRleE9mKGEsYykhPS0xP2IuYmtxdWVyeUNvbW1hbmRWYWx1ZS5hcHBseShiLGFyZ3VtZW50cyk6bnVsbH0sYi5maXJlRXZlbnQoXCJzZWxlY3Rpb25jaGFuZ2VcIikpfSxkaXNhYmxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldERpc2FibGVkKGEpfSxfc2V0RGVmYXVsdENvbnRlbnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGI9dGhpcztiLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5pdENvbnRlbnRcIikmJihiLmJvZHkuaW5uZXJIVE1MPVwiPHA+XCIrKGllP1wiXCI6XCI8YnIvPlwiKStcIjwvcD5cIixiLnJlbW92ZUxpc3RlbmVyKFwiZmlyc3RCZWZvcmVFeGVjQ29tbWFuZCBmb2N1c1wiLGEpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmZvY3VzKCksYi5fc2VsZWN0aW9uQ2hhbmdlKCl9LDApKX1yZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9dGhpcztjLmJvZHkuaW5uZXJIVE1MPSc8cCBpZD1cImluaXRDb250ZW50XCI+JytiK1wiPC9wPlwiLGMuYWRkTGlzdGVuZXIoXCJmaXJzdEJlZm9yZUV4ZWNDb21tYW5kIGZvY3VzXCIsYSl9fSgpLHNldFNob3c6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtpZihcIm5vbmVcIj09YS5jb250YWluZXIuc3R5bGUuZGlzcGxheSl7dHJ5e2IubW92ZVRvQm9va21hcmsoYS5sYXN0QmspLGRlbGV0ZSBhLmxhc3RCa31jYXRjaChjKXtiLnNldFN0YXJ0QXRGaXJzdChhLmJvZHkpLmNvbGxhcHNlKCEwKX1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5zZWxlY3QoITApfSwxMDApLGEuY29udGFpbmVyLnN0eWxlLmRpc3BsYXk9XCJcIn19LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRTaG93KCl9LHNldEhpZGU6ZnVuY3Rpb24oKXtcbnZhciBhPXRoaXM7YS5sYXN0Qmt8fChhLmxhc3RCaz1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpLmNyZWF0ZUJvb2ttYXJrKCEwKSksYS5jb250YWluZXIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn0saGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldEhpZGUoKX0sZ2V0TGFuZzpmdW5jdGlvbihhKXt2YXIgYj1VRS5JMThOW3RoaXMub3B0aW9ucy5sYW5nXTtpZighYil0aHJvdyBFcnJvcihcIm5vdCBpbXBvcnQgbGFuZ3VhZ2UgZmlsZVwiKTthPShhfHxcIlwiKS5zcGxpdChcIi5cIik7Zm9yKHZhciBjLGQ9MDsoYz1hW2QrK10pJiYoYj1iW2NdLGIpOyk7cmV0dXJuIGJ9LGdldENvbnRlbnRMZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENvbnRlbnQoITEsITEsITApLmxlbmd0aDtpZihhKXtiPShifHxbXSkuY29uY2F0KFtcImhyXCIsXCJpbWdcIixcImlmcmFtZVwiXSksYz10aGlzLmdldENvbnRlbnRUeHQoKS5yZXBsYWNlKC9bXFx0XFxyXFxuXSsvZyxcIlwiKS5sZW5ndGg7Zm9yKHZhciBkLGU9MDtkPWJbZSsrXTspYys9dGhpcy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShkKS5sZW5ndGh9cmV0dXJuIGN9LGFkZElucHV0UnVsZTpmdW5jdGlvbihhKXt0aGlzLmlucHV0UnVsZXMucHVzaChhKX0sZmlsdGVySW5wdXRSdWxlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yj10aGlzLmlucHV0UnVsZXNbYysrXTspYi5jYWxsKHRoaXMsYSl9LGFkZE91dHB1dFJ1bGU6ZnVuY3Rpb24oYSl7dGhpcy5vdXRwdXRSdWxlcy5wdXNoKGEpfSxmaWx0ZXJPdXRwdXRSdWxlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yj10aGlzLm91dHB1dFJ1bGVzW2MrK107KWIuY2FsbCh0aGlzLGEpfSxnZXRBY3Rpb25Vcmw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRPcHQoYSl8fGEsYz10aGlzLmdldE9wdChcImltYWdlVXJsXCIpLGQ9dGhpcy5nZXRPcHQoXCJzZXJ2ZXJVcmxcIik7cmV0dXJuIWQmJmMmJihkPWMucmVwbGFjZSgvXiguKltcXC9dKS4rKFtcXC5dLispJC8sXCIkMWNvbnRyb2xsZXIkMlwiKSksZD8oZD1kKyhkLmluZGV4T2YoXCI/XCIpPT0tMT9cIj9cIjpcIiZcIikrXCJhY3Rpb249XCIrKGJ8fFwiXCIpLHV0aWxzLmZvcm1hdFVybChkKSk6XCJcIn19LHV0aWxzLmluaGVyaXRzKGYsRXZlbnRCYXNlKX0oKSxVRS5FZGl0b3IuZGVmYXVsdE9wdGlvbnM9ZnVuY3Rpb24oYSl7dmFyIGI9YS5vcHRpb25zLlVFRElUT1JfSE9NRV9VUkw7cmV0dXJue2lzU2hvdzohMCxpbml0aWFsQ29udGVudDpcIlwiLGluaXRpYWxTdHlsZTpcIlwiLGF1dG9DbGVhcmluaXRpYWxDb250ZW50OiExLGlmcmFtZUNzc1VybDpiK1widGhlbWVzL2lmcmFtZS5jc3NcIix0ZXh0YXJlYTpcImVkaXRvclZhbHVlXCIsZm9jdXM6ITEsZm9jdXNJbkVuZDohMCxhdXRvQ2xlYXJFbXB0eU5vZGU6ITAsZnVsbHNjcmVlbjohMSxyZWFkb25seTohMSx6SW5kZXg6OTk5LGltYWdlUG9wdXA6ITAsZW50ZXJUYWc6XCJwXCIsY3VzdG9tRG9tYWluOiExLGxhbmc6XCJ6aC1jblwiLGxhbmdQYXRoOmIrXCJsYW5nL1wiLHRoZW1lOlwiZGVmYXVsdFwiLHRoZW1lUGF0aDpiK1widGhlbWVzL1wiLGFsbEh0bWxFbmFibGVkOiExLHNjYWxlRW5hYmxlZDohMSx0YWJsZU5hdGl2ZUVkaXRJbkZGOiExLGF1dG9TeW5jRGF0YTohMCxmaWxlTmFtZUZvcm1hdDpcInt0aW1lfXtyYW5kOjZ9XCJ9fSxmdW5jdGlvbigpe1VFLkVkaXRvci5wcm90b3R5cGUubG9hZFNlcnZlckNvbmZpZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHNob3dFcnJvck1zZyhhKXtjb25zb2xlJiZjb25zb2xlLmVycm9yKGEpfXZhciBtZT10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7bWUub3B0aW9ucy5pbWFnZVVybCYmbWUuc2V0T3B0KFwic2VydmVyVXJsXCIsbWUub3B0aW9ucy5pbWFnZVVybC5yZXBsYWNlKC9eKC4qW1xcL10pLisoW1xcLl0uKykkLyxcIiQxY29udHJvbGxlciQyXCIpKTt2YXIgY29uZmlnVXJsPW1lLmdldEFjdGlvblVybChcImNvbmZpZ1wiKSxpc0pzb25wPXV0aWxzLmlzQ3Jvc3NEb21haW5VcmwoY29uZmlnVXJsKTttZS5fc2VydmVyQ29uZmlnTG9hZGVkPSExLGNvbmZpZ1VybCYmVUUuYWpheC5yZXF1ZXN0KGNvbmZpZ1VybCx7bWV0aG9kOlwiR0VUXCIsZGF0YVR5cGU6aXNKc29ucD9cImpzb25wXCI6XCJcIixvbnN1Y2Nlc3M6ZnVuY3Rpb24ocil7dHJ5e3ZhciBjb25maWc9aXNKc29ucD9yOmV2YWwoXCIoXCIrci5yZXNwb25zZVRleHQrXCIpXCIpO3V0aWxzLmV4dGVuZChtZS5vcHRpb25zLGNvbmZpZyksbWUuZmlyZUV2ZW50KFwic2VydmVyQ29uZmlnTG9hZGVkXCIpLG1lLl9zZXJ2ZXJDb25maWdMb2FkZWQ9ITB9Y2F0Y2goZSl7c2hvd0Vycm9yTXNnKG1lLmdldExhbmcoXCJsb2FkY29uZmlnRm9ybWF0RXJyb3JcIikpfX0sb25lcnJvcjpmdW5jdGlvbigpe3Nob3dFcnJvck1zZyhtZS5nZXRMYW5nKFwibG9hZGNvbmZpZ0h0dHBFcnJvclwiKSl9fSl9Y2F0Y2goZSl7c2hvd0Vycm9yTXNnKG1lLmdldExhbmcoXCJsb2FkY29uZmlnRXJyb3JcIikpfX0pfSxVRS5FZGl0b3IucHJvdG90eXBlLmlzU2VydmVyQ29uZmlnTG9hZGVkPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gYS5fc2VydmVyQ29uZmlnTG9hZGVkfHwhMX0sVUUuRWRpdG9yLnByb3RvdHlwZS5hZnRlckNvbmZpZ1JlYWR5PWZ1bmN0aW9uKGEpe2lmKGEmJnV0aWxzLmlzRnVuY3Rpb24oYSkpe3ZhciBiPXRoaXMsYz1mdW5jdGlvbigpe2EuYXBwbHkoYixhcmd1bWVudHMpLGIucmVtb3ZlTGlzdGVuZXIoXCJzZXJ2ZXJDb25maWdMb2FkZWRcIixjKX07Yi5pc1NlcnZlckNvbmZpZ0xvYWRlZCgpP2EuY2FsbChiLFwic2VydmVyQ29uZmlnTG9hZGVkXCIpOmIuYWRkTGlzdGVuZXIoXCJzZXJ2ZXJDb25maWdMb2FkZWRcIixjKX19fSgpLFVFLmFqYXg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWlmKFwibWV0aG9kXCIhPWMmJlwidGltZW91dFwiIT1jJiZcImFzeW5jXCIhPWMmJlwiZGF0YVR5cGVcIiE9YyYmXCJjYWxsYmFja1wiIT1jJiZ2b2lkIDAhPWFbY10mJm51bGwhPWFbY10paWYoXCJmdW5jdGlvblwiIT0odHlwZW9mIGFbY10pLnRvTG93ZXJDYXNlKCkmJlwib2JqZWN0XCIhPSh0eXBlb2YgYVtjXSkudG9Mb3dlckNhc2UoKSliLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGMpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChhW2NdKSk7ZWxzZSBpZih1dGlscy5pc0FycmF5KGFbY10pKWZvcih2YXIgZD0wO2Q8YVtjXS5sZW5ndGg7ZCsrKWIucHVzaChlbmNvZGVVUklDb21wb25lbnQoYykrXCJbXT1cIitlbmNvZGVVUklDb21wb25lbnQoYVtjXVtkXSkpO3JldHVybiBiLmpvaW4oXCImXCIpfWZ1bmN0aW9uIGIoYixjKXt2YXIgZD1mKCksZT0hMSxnPXttZXRob2Q6XCJQT1NUXCIsdGltZW91dDo1ZTMsYXN5bmM6ITAsZGF0YTp7fSxvbnN1Y2Nlc3M6ZnVuY3Rpb24oKXt9LG9uZXJyb3I6ZnVuY3Rpb24oKXt9fTtpZihcIm9iamVjdFwiPT10eXBlb2YgYiYmKGM9YixiPWMudXJsKSxkJiZiKXt2YXIgaD1jP3V0aWxzLmV4dGVuZChnLGMpOmcsaT1hKGgpO3V0aWxzLmlzRW1wdHlPYmplY3QoaC5kYXRhKXx8KGkrPShpP1wiJlwiOlwiXCIpK2EoaC5kYXRhKSk7dmFyIGo9c2V0VGltZW91dChmdW5jdGlvbigpezQhPWQucmVhZHlTdGF0ZSYmKGU9ITAsZC5hYm9ydCgpLGNsZWFyVGltZW91dChqKSl9LGgudGltZW91dCksaz1oLm1ldGhvZC50b1VwcGVyQ2FzZSgpLGw9YisoYi5pbmRleE9mKFwiP1wiKT09LTE/XCI/XCI6XCImXCIpKyhcIlBPU1RcIj09az9cIlwiOmkrXCImbm9DYWNoZT1cIisgK25ldyBEYXRlKTtkLm9wZW4oayxsLGguYXN5bmMpLGQub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09ZC5yZWFkeVN0YXRlJiYoZXx8MjAwIT1kLnN0YXR1cz9oLm9uZXJyb3IoZCk6aC5vbnN1Y2Nlc3MoZCkpfSxcIlBPU1RcIj09az8oZC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiksZC5zZW5kKGkpKTpkLnNlbmQobnVsbCl9fWZ1bmN0aW9uIGMoYixjKXtmdW5jdGlvbiBkKGEsYixjKXthLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHQvamF2YXNjcmlwdFwiKSxhLnNldEF0dHJpYnV0ZShcImRlZmVyXCIsXCJkZWZlclwiKSxjJiZhLnNldEF0dHJpYnV0ZShcImNoYXJzZXRcIixjKSxhLnNldEF0dHJpYnV0ZShcInNyY1wiLGIpLGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChhKX1mdW5jdGlvbiBlKGEpe3JldHVybiBmdW5jdGlvbigpe3RyeXtpZihhKWsub25lcnJvciYmay5vbmVycm9yKCk7ZWxzZSB0cnl7Y2xlYXJUaW1lb3V0KGcpLGkuYXBwbHkod2luZG93LGFyZ3VtZW50cyl9Y2F0Y2goYil7fX1jYXRjaChjKXtrLm9uZXJyb3ImJmsub25lcnJvci5jYWxsKHdpbmRvdyxjKX1maW5hbGx5e2sub25jb21wbGV0ZSYmay5vbmNvbXBsZXRlLmFwcGx5KHdpbmRvdyxhcmd1bWVudHMpLGoucGFyZW50Tm9kZSYmai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGopLHdpbmRvd1tmXT1udWxsO3RyeXtkZWxldGUgd2luZG93W2ZdfWNhdGNoKGIpe319fX12YXIgZixnLGgsaT1jLm9uc3VjY2Vzc3x8ZnVuY3Rpb24oKXt9LGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIlNDUklQVFwiKSxrPWN8fHt9LGw9ay5jaGFyc2V0LG09ay5qc29ucHx8XCJjYWxsYmFja1wiLG49ay50aW1lT3V0fHwwLG89bmV3IFJlZ0V4cChcIihcXFxcP3wmKVwiK20rXCI9KFteJl0qKVwiKTt1dGlscy5pc0Z1bmN0aW9uKGkpPyhmPVwiYmRfX2VkaXRvcl9fXCIrTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KSx3aW5kb3dbZl09ZSgwKSk6dXRpbHMuaXNTdHJpbmcoaSk/Zj1pOihoPW8uZXhlYyhiKSkmJihmPWhbMl0pLGI9Yi5yZXBsYWNlKG8sXCIkMVwiK20rXCI9XCIrZiksYi5zZWFyY2gobyk8MCYmKGIrPShiLmluZGV4T2YoXCI/XCIpPDA/XCI/XCI6XCImXCIpK20rXCI9XCIrZik7dmFyIHA9YShjKTt1dGlscy5pc0VtcHR5T2JqZWN0KGMuZGF0YSl8fChwKz0ocD9cIiZcIjpcIlwiKSthKGMuZGF0YSkpLHAmJihiPWIucmVwbGFjZSgvXFw/LyxcIj9cIitwK1wiJlwiKSksai5vbmVycm9yPWUoMSksbiYmKGc9c2V0VGltZW91dChlKDEpLG4pKSxkKGosYixsKX12YXIgZD1cIlhNTEh0dHBSZXF1ZXN0KClcIjt0cnl7bmV3IEFjdGl2ZVhPYmplY3QoXCJNc3htbDIuWE1MSFRUUFwiKSxkPVwiQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAnKVwifWNhdGNoKGUpe3RyeXtuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpLGQ9XCJBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MSFRUUCcpXCJ9Y2F0Y2goZSl7fX12YXIgZj1uZXcgRnVuY3Rpb24oXCJyZXR1cm4gbmV3IFwiK2QpO3JldHVybntyZXF1ZXN0OmZ1bmN0aW9uKGEsZCl7ZCYmXCJqc29ucFwiPT1kLmRhdGFUeXBlP2MoYSxkKTpiKGEsZCl9LGdldEpTT05QOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT17ZGF0YTpiLG9uY29tcGxldGU6ZH07YyhhLGUpfX19KCk7dmFyIGZpbHRlcldvcmQ9VUUuZmlsdGVyV29yZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuLyhjbGFzcz1cIj9Nc298c3R5bGU9XCJbXlwiXSpcXGJtc29cXC18dzpXb3JkRG9jdW1lbnR8PCh2fG8pOnxsYW5nPSkvZ2kudGVzdChhKX1mdW5jdGlvbiBiKGEpe3JldHVybiBhPWEucmVwbGFjZSgvW1xcZC5dK1xcdysvZyxmdW5jdGlvbihhKXtyZXR1cm4gdXRpbHMudHJhbnNVbml0VG9QeChhKX0pfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucmVwbGFjZSgvW1xcdFxcclxcbl0rL2csXCIgXCIpLnJlcGxhY2UoLzwhLS1bXFxzXFxTXSo/LS0+L2dpLFwiXCIpLnJlcGxhY2UoLzx2OnNoYXBlIFtePl0qPltcXHNcXFNdKj8uPFxcL3Y6c2hhcGU+L2dpLGZ1bmN0aW9uKGEpe2lmKGJyb3dzZXIub3BlcmEpcmV0dXJuXCJcIjt0cnl7aWYoL0JpdG1hcC9pLnRlc3QoYSkpcmV0dXJuXCJcIjt2YXIgYz1hLm1hdGNoKC93aWR0aDooWyBcXGQuXSpwW3R4XSkvaSlbMV0sZD1hLm1hdGNoKC9oZWlnaHQ6KFsgXFxkLl0qcFt0eF0pL2kpWzFdLGU9YS5tYXRjaCgvc3JjPVxccypcIihbXlwiXSopXCIvaSlbMV07cmV0dXJuJzxpbWcgd2lkdGg9XCInK2IoYykrJ1wiIGhlaWdodD1cIicrYihkKSsnXCIgc3JjPVwiJytlKydcIiAvPid9Y2F0Y2goZil7cmV0dXJuXCJcIn19KS5yZXBsYWNlKC88XFwvP2RpdltePl0qPi9nLFwiXCIpLnJlcGxhY2UoL3Y6XFx3Kz0oW1wiJ10/KVteJ1wiXStcXDEvZyxcIlwiKS5yZXBsYWNlKC88KCF8c2NyaXB0W14+XSo+Lio/PFxcL3NjcmlwdCg/PVs+XFxzXSl8XFwvPyhcXD94bWwoOlxcdyspP3x4bWx8bWV0YXxsaW5rfHN0eWxlfFxcdys6XFx3KykoPz1bXFxzXFwvPl0pKVtePl0qPi9naSxcIlwiKS5yZXBsYWNlKC88cCBbXj5dKmNsYXNzPVwiP01zb0hlYWRpbmdcIj9bXj5dKj4oLio/KTxcXC9wPi9naSxcIjxwPjxzdHJvbmc+JDE8L3N0cm9uZz48L3A+XCIpLnJlcGxhY2UoL1xccysoY2xhc3N8bGFuZ3xhbGlnbilcXHMqPVxccyooWydcIl0/KShbXFx3LV0rKVxcMi9naSxmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm5cImNsYXNzXCI9PWImJlwiTXNvTGlzdFBhcmFncmFwaFwiPT1kP2E6XCJcIn0pLnJlcGxhY2UoLzwoZm9udHxzcGFuKVtePl0qPihcXHMqKTxcXC9cXDE+L2dpLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYy5yZXBsYWNlKC9bXFx0XFxyXFxuIF0rL2csXCIgXCIpfSkucmVwbGFjZSgvKDxbYS16XVtePl0qKVxcc3N0eWxlPShbXCInXSkoW15cXDJdKj8pXFwyL2dpLGZ1bmN0aW9uKGEsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9ZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC8sXCJcIikucmVwbGFjZSgvJiMzOTsvZyxcIidcIikucmVwbGFjZSgvJnF1b3Q7L2dpLFwiJ1wiKS5yZXBsYWNlKC9bXFxkLl0rKGNtfHB0KS9nLGZ1bmN0aW9uKGEpe3JldHVybiB1dGlscy50cmFuc1VuaXRUb1B4KGEpfSkuc3BsaXQoLztcXHMqL2cpLGk9MDtmPWhbaV07aSsrKXt2YXIgaixrLGw9Zi5zcGxpdChcIjpcIik7aWYoMj09bC5sZW5ndGgpe2lmKGo9bFswXS50b0xvd2VyQ2FzZSgpLGs9bFsxXS50b0xvd2VyQ2FzZSgpLC9eKGJhY2tncm91bmQpXFx3Ki8udGVzdChqKSYmMD09ay5yZXBsYWNlKC8oaW5pdGlhbHxcXHMpL2csXCJcIikubGVuZ3RofHwvXihtYXJnaW4pXFx3Ki8udGVzdChqKSYmL14wXFx3KyQvLnRlc3QoaykpY29udGludWU7c3dpdGNoKGope2Nhc2VcIm1zby1wYWRkaW5nLWFsdFwiOmNhc2VcIm1zby1wYWRkaW5nLXRvcC1hbHRcIjpjYXNlXCJtc28tcGFkZGluZy1yaWdodC1hbHRcIjpjYXNlXCJtc28tcGFkZGluZy1ib3R0b20tYWx0XCI6Y2FzZVwibXNvLXBhZGRpbmctbGVmdC1hbHRcIjpjYXNlXCJtc28tbWFyZ2luLWFsdFwiOmNhc2VcIm1zby1tYXJnaW4tdG9wLWFsdFwiOmNhc2VcIm1zby1tYXJnaW4tcmlnaHQtYWx0XCI6Y2FzZVwibXNvLW1hcmdpbi1ib3R0b20tYWx0XCI6Y2FzZVwibXNvLW1hcmdpbi1sZWZ0LWFsdFwiOmNhc2VcIm1zby1oZWlnaHRcIjpjYXNlXCJtc28td2lkdGhcIjpjYXNlXCJtc28tdmVydGljYWwtYWxpZ24tYWx0XCI6Lzx0YWJsZS8udGVzdChjKXx8KGdbaV09ai5yZXBsYWNlKC9ebXNvLXwtYWx0JC9nLFwiXCIpK1wiOlwiK2IoaykpO2NvbnRpbnVlO2Nhc2VcImhvcml6LWFsaWduXCI6Z1tpXT1cInRleHQtYWxpZ246XCIraztjb250aW51ZTtjYXNlXCJ2ZXJ0LWFsaWduXCI6Z1tpXT1cInZlcnRpY2FsLWFsaWduOlwiK2s7Y29udGludWU7Y2FzZVwiZm9udC1jb2xvclwiOmNhc2VcIm1zby1mb3JlZ3JvdW5kXCI6Z1tpXT1cImNvbG9yOlwiK2s7Y29udGludWU7Y2FzZVwibXNvLWJhY2tncm91bmRcIjpjYXNlXCJtc28taGlnaGxpZ2h0XCI6Z1tpXT1cImJhY2tncm91bmQ6XCIraztjb250aW51ZTtjYXNlXCJtc28tZGVmYXVsdC1oZWlnaHRcIjpnW2ldPVwibWluLWhlaWdodDpcIitiKGspO2NvbnRpbnVlO2Nhc2VcIm1zby1kZWZhdWx0LXdpZHRoXCI6Z1tpXT1cIm1pbi13aWR0aDpcIitiKGspO2NvbnRpbnVlO2Nhc2VcIm1zby1wYWRkaW5nLWJldHdlZW4tYWx0XCI6Z1tpXT1cImJvcmRlci1jb2xsYXBzZTpzZXBhcmF0ZTtib3JkZXItc3BhY2luZzpcIitiKGspO2NvbnRpbnVlO2Nhc2VcInRleHQtbGluZS10aHJvdWdoXCI6XCJzaW5nbGVcIiE9ayYmXCJkb3VibGVcIiE9a3x8KGdbaV09XCJ0ZXh0LWRlY29yYXRpb246bGluZS10aHJvdWdoXCIpO2NvbnRpbnVlO2Nhc2VcIm1zby16ZXJvLWhlaWdodFwiOlwieWVzXCI9PWsmJihnW2ldPVwiZGlzcGxheTpub25lXCIpO2NvbnRpbnVlO2Nhc2VcIm1hcmdpblwiOmlmKCEvWzEtOV0vLnRlc3QoaykpY29udGludWV9aWYoL14obXNvfGNvbHVtbnxmb250LWVtcGh8bGFuZ3xsYXlvdXR8bGluZS1icmVha3xsaXN0LWltYWdlfG5hdnxwYW5vc2V8cHVuY3R8cm93fHJ1Ynl8c2VwfHNpemV8c3JjfHRhYi18dGFibGUtYm9yZGVyfHRleHQtKD86ZGVjb3J8dHJhbnMpfHRvcC1iYXJ8dmVyc2lvbnx2bmR8d29yZC1icmVhaykvLnRlc3Qoail8fC90ZXh0XFwtaW5kZW50fHBhZGRpbmd8bWFyZ2luLy50ZXN0KGopJiYvXFwtW1xcZC5dKy8udGVzdChrKSljb250aW51ZTtnW2ldPWorXCI6XCIrbFsxXX19cmV0dXJuIGMrKGcubGVuZ3RoPycgc3R5bGU9XCInK2cuam9pbihcIjtcIikucmVwbGFjZSgvO3syLH0vZyxcIjtcIikrJ1wiJzpcIlwiKX0pfXJldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYShiKT9jKGIpOmJ9fSgpOyFmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMpe3JldHVybiBhLnB1c2gobiksYisoYz8xOi0xKX1mdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjPTA7YzxiO2MrKylhLnB1c2gobSl9ZnVuY3Rpb24gYyhnLGgsaSxqKXtzd2l0Y2goZy50eXBlKXtjYXNlXCJyb290XCI6Zm9yKHZhciBrLGw9MDtrPWcuY2hpbGRyZW5bbCsrXTspaSYmXCJlbGVtZW50XCI9PWsudHlwZSYmIWR0ZC4kaW5saW5lV2l0aEFbay50YWdOYW1lXSYmbD4xJiYoYShoLGosITApLGIoaCxqKSksYyhrLGgsaSxqKTticmVhaztjYXNlXCJ0ZXh0XCI6ZChnLGgpO2JyZWFrO2Nhc2VcImVsZW1lbnRcIjplKGcsaCxpLGopO2JyZWFrO2Nhc2VcImNvbW1lbnRcIjpmKGcsaCxpKX1yZXR1cm4gaH1mdW5jdGlvbiBkKGEsYil7XCJwcmVcIj09YS5wYXJlbnROb2RlLnRhZ05hbWU/Yi5wdXNoKGEuZGF0YSk6Yi5wdXNoKGxbYS5wYXJlbnROb2RlLnRhZ05hbWVdP3V0aWxzLmh0bWwoYS5kYXRhKTphLmRhdGEucmVwbGFjZSgvWyBdezJ9L2csXCIgJm5ic3A7XCIpKX1mdW5jdGlvbiBlKGQsZSxmLGcpe3ZhciBoPVwiXCI7aWYoZC5hdHRycyl7aD1bXTt2YXIgaT1kLmF0dHJzO2Zvcih2YXIgaiBpbiBpKWgucHVzaChqKyh2b2lkIDAhPT1pW2pdPyc9XCInKyhrW2pdP3V0aWxzLmh0bWwoaVtqXSkucmVwbGFjZSgvW1wiXS9nLGZ1bmN0aW9uKGEpe3JldHVyblwiJnF1b3Q7XCJ9KTp1dGlscy51bmh0bWwoaVtqXSkpKydcIic6XCJcIikpO2g9aC5qb2luKFwiIFwiKX1pZihlLnB1c2goXCI8XCIrZC50YWdOYW1lKyhoP1wiIFwiK2g6XCJcIikrKGR0ZC4kZW1wdHlbZC50YWdOYW1lXT9cIi9cIjpcIlwiKStcIj5cIiksZiYmIWR0ZC4kaW5saW5lV2l0aEFbZC50YWdOYW1lXSYmXCJwcmVcIiE9ZC50YWdOYW1lJiZkLmNoaWxkcmVuJiZkLmNoaWxkcmVuLmxlbmd0aCYmKGc9YShlLGcsITApLGIoZSxnKSksZC5jaGlsZHJlbiYmZC5jaGlsZHJlbi5sZW5ndGgpZm9yKHZhciBsLG09MDtsPWQuY2hpbGRyZW5bbSsrXTspZiYmXCJlbGVtZW50XCI9PWwudHlwZSYmIWR0ZC4kaW5saW5lV2l0aEFbbC50YWdOYW1lXSYmbT4xJiYoYShlLGcpLGIoZSxnKSksYyhsLGUsZixnKTtkdGQuJGVtcHR5W2QudGFnTmFtZV18fChmJiYhZHRkLiRpbmxpbmVXaXRoQVtkLnRhZ05hbWVdJiZcInByZVwiIT1kLnRhZ05hbWUmJmQuY2hpbGRyZW4mJmQuY2hpbGRyZW4ubGVuZ3RoJiYoZz1hKGUsZyksYihlLGcpKSxlLnB1c2goXCI8L1wiK2QudGFnTmFtZStcIj5cIikpfWZ1bmN0aW9uIGYoYSxiKXtiLnB1c2goXCI8IS0tXCIrYS5kYXRhK1wiLS0+XCIpfWZ1bmN0aW9uIGcoYSxiKXt2YXIgYztpZihcImVsZW1lbnRcIj09YS50eXBlJiZhLmdldEF0dHIoXCJpZFwiKT09YilyZXR1cm4gYTtpZihhLmNoaWxkcmVuJiZhLmNoaWxkcmVuLmxlbmd0aClmb3IodmFyIGQsZT0wO2Q9YS5jaGlsZHJlbltlKytdOylpZihjPWcoZCxiKSlyZXR1cm4gY31mdW5jdGlvbiBoKGEsYixjKXtpZihcImVsZW1lbnRcIj09YS50eXBlJiZhLnRhZ05hbWU9PWImJmMucHVzaChhKSxhLmNoaWxkcmVuJiZhLmNoaWxkcmVuLmxlbmd0aClmb3IodmFyIGQsZT0wO2Q9YS5jaGlsZHJlbltlKytdOyloKGQsYixjKX1mdW5jdGlvbiBpKGEsYil7aWYoYS5jaGlsZHJlbiYmYS5jaGlsZHJlbi5sZW5ndGgpZm9yKHZhciBjLGQ9MDtjPWEuY2hpbGRyZW5bZF07KWkoYyxiKSxjLnBhcmVudE5vZGUmJihjLmNoaWxkcmVuJiZjLmNoaWxkcmVuLmxlbmd0aCYmYihjKSxjLnBhcmVudE5vZGUmJmQrKyk7ZWxzZSBiKGEpfXZhciBqPVVFLnVOb2RlPWZ1bmN0aW9uKGEpe3RoaXMudHlwZT1hLnR5cGUsdGhpcy5kYXRhPWEuZGF0YSx0aGlzLnRhZ05hbWU9YS50YWdOYW1lLHRoaXMucGFyZW50Tm9kZT1hLnBhcmVudE5vZGUsdGhpcy5hdHRycz1hLmF0dHJzfHx7fSx0aGlzLmNoaWxkcmVuPWEuY2hpbGRyZW59LGs9e2hyZWY6MSxzcmM6MSxfc3JjOjEsX2hyZWY6MSxjZGF0YV9kYXRhOjF9LGw9e3N0eWxlOjEsc2NyaXB0OjF9LG09XCIgICAgXCIsbj1cIlxcblwiO2ouY3JlYXRlRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4vWzw+XS8udGVzdChhKT9VRS5odG1scGFyc2VyKGEpLmNoaWxkcmVuWzBdOm5ldyBqKHt0eXBlOlwiZWxlbWVudFwiLGNoaWxkcmVuOltdLHRhZ05hbWU6YX0pfSxqLmNyZWF0ZVRleHQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFVFLnVOb2RlKHt0eXBlOlwidGV4dFwiLGRhdGE6Yj9hOnV0aWxzLnVuaHRtbChhfHxcIlwiKX0pfSxqLnByb3RvdHlwZT17dG9IdG1sOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO3JldHVybiBjKHRoaXMsYixhLDApLGIuam9pbihcIlwiKX0saW5uZXJIVE1MOmZ1bmN0aW9uKGEpe2lmKFwiZWxlbWVudFwiIT10aGlzLnR5cGV8fGR0ZC4kZW1wdHlbdGhpcy50YWdOYW1lXSlyZXR1cm4gdGhpcztpZih1dGlscy5pc1N0cmluZyhhKSl7aWYodGhpcy5jaGlsZHJlbilmb3IodmFyIGIsYz0wO2I9dGhpcy5jaGlsZHJlbltjKytdOyliLnBhcmVudE5vZGU9bnVsbDt0aGlzLmNoaWxkcmVuPVtdO2Zvcih2YXIgYixkPVVFLmh0bWxwYXJzZXIoYSksYz0wO2I9ZC5jaGlsZHJlbltjKytdOyl0aGlzLmNoaWxkcmVuLnB1c2goYiksYi5wYXJlbnROb2RlPXRoaXM7cmV0dXJuIHRoaXN9dmFyIGQ9bmV3IFVFLnVOb2RlKHt0eXBlOlwicm9vdFwiLGNoaWxkcmVuOnRoaXMuY2hpbGRyZW59KTtyZXR1cm4gZC50b0h0bWwoKX0saW5uZXJUZXh0OmZ1bmN0aW9uKGEsYil7aWYoXCJlbGVtZW50XCIhPXRoaXMudHlwZXx8ZHRkLiRlbXB0eVt0aGlzLnRhZ05hbWVdKXJldHVybiB0aGlzO2lmKGEpe2lmKHRoaXMuY2hpbGRyZW4pZm9yKHZhciBjLGQ9MDtjPXRoaXMuY2hpbGRyZW5bZCsrXTspYy5wYXJlbnROb2RlPW51bGw7cmV0dXJuIHRoaXMuY2hpbGRyZW49W10sdGhpcy5hcHBlbmRDaGlsZChqLmNyZWF0ZVRleHQoYSxiKSksdGhpc31yZXR1cm4gdGhpcy50b0h0bWwoKS5yZXBsYWNlKC88W14+XSs+L2csXCJcIil9LGdldERhdGE6ZnVuY3Rpb24oKXtyZXR1cm5cImVsZW1lbnRcIj09dGhpcy50eXBlP1wiXCI6dGhpcy5kYXRhfSxmaXJzdENoaWxkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW4/dGhpcy5jaGlsZHJlblswXTpudWxsfSxsYXN0Q2hpbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlbj90aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoLTFdOm51bGx9LHByZXZpb3VzU2libGluZzpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPXRoaXMucGFyZW50Tm9kZSxjPTA7YT1iLmNoaWxkcmVuW2NdO2MrKylpZihhPT09dGhpcylyZXR1cm4gMD09Yz9udWxsOmIuY2hpbGRyZW5bYy0xXX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj10aGlzLnBhcmVudE5vZGUsYz0wO2E9Yi5jaGlsZHJlbltjKytdOylpZihhPT09dGhpcylyZXR1cm4gYi5jaGlsZHJlbltjXX0scmVwbGFjZUNoaWxkOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5jaGlsZHJlbil7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7Zm9yKHZhciBjLGQ9MDtjPXRoaXMuY2hpbGRyZW5bZF07ZCsrKWlmKGM9PT1iKXJldHVybiB0aGlzLmNoaWxkcmVuLnNwbGljZShkLDEsYSksYi5wYXJlbnROb2RlPW51bGwsYS5wYXJlbnROb2RlPXRoaXMsYX19LGFwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe2lmKFwicm9vdFwiPT10aGlzLnR5cGV8fFwiZWxlbWVudFwiPT10aGlzLnR5cGUmJiFkdGQuJGVtcHR5W3RoaXMudGFnTmFtZV0pe3RoaXMuY2hpbGRyZW58fCh0aGlzLmNoaWxkcmVuPVtdKSxhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKTtmb3IodmFyIGIsYz0wO2I9dGhpcy5jaGlsZHJlbltjXTtjKyspaWYoYj09PWEpe3RoaXMuY2hpbGRyZW4uc3BsaWNlKGMsMSk7YnJlYWt9cmV0dXJuIHRoaXMuY2hpbGRyZW4ucHVzaChhKSxhLnBhcmVudE5vZGU9dGhpcyxhfX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5jaGlsZHJlbil7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7Zm9yKHZhciBjLGQ9MDtjPXRoaXMuY2hpbGRyZW5bZF07ZCsrKWlmKGM9PT1iKXJldHVybiB0aGlzLmNoaWxkcmVuLnNwbGljZShkLDAsYSksYS5wYXJlbnROb2RlPXRoaXMsYX19LGluc2VydEFmdGVyOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5jaGlsZHJlbil7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7Zm9yKHZhciBjLGQ9MDtjPXRoaXMuY2hpbGRyZW5bZF07ZCsrKWlmKGM9PT1iKXJldHVybiB0aGlzLmNoaWxkcmVuLnNwbGljZShkKzEsMCxhKSxhLnBhcmVudE5vZGU9dGhpcyxhfX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmNoaWxkcmVuKWZvcih2YXIgYyxkPTA7Yz10aGlzLmNoaWxkcmVuW2RdO2QrKylpZihjPT09YSl7aWYodGhpcy5jaGlsZHJlbi5zcGxpY2UoZCwxKSxjLnBhcmVudE5vZGU9bnVsbCxiJiZjLmNoaWxkcmVuJiZjLmNoaWxkcmVuLmxlbmd0aClmb3IodmFyIGUsZj0wO2U9Yy5jaGlsZHJlbltmXTtmKyspdGhpcy5jaGlsZHJlbi5zcGxpY2UoZCtmLDAsZSksZS5wYXJlbnROb2RlPXRoaXM7cmV0dXJuIGN9fSxnZXRBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmF0dHJzJiZ0aGlzLmF0dHJzW2EudG9Mb3dlckNhc2UoKV19LHNldEF0dHI6ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gdm9pZCBkZWxldGUgdGhpcy5hdHRycztpZih0aGlzLmF0dHJzfHwodGhpcy5hdHRycz17fSksdXRpbHMuaXNPYmplY3QoYSkpZm9yKHZhciBjIGluIGEpYVtjXT90aGlzLmF0dHJzW2MudG9Mb3dlckNhc2UoKV09YVtjXTpkZWxldGUgdGhpcy5hdHRyc1tjXTtlbHNlIGI/dGhpcy5hdHRyc1thLnRvTG93ZXJDYXNlKCldPWI6ZGVsZXRlIHRoaXMuYXR0cnNbYV19LGdldEluZGV4OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9dGhpcy5wYXJlbnROb2RlLGM9MDthPWIuY2hpbGRyZW5bY107YysrKWlmKGE9PT10aGlzKXJldHVybiBjO3JldHVybi0xfSxnZXROb2RlQnlJZDpmdW5jdGlvbihhKXt2YXIgYjtpZih0aGlzLmNoaWxkcmVuJiZ0aGlzLmNoaWxkcmVuLmxlbmd0aClmb3IodmFyIGMsZD0wO2M9dGhpcy5jaGlsZHJlbltkKytdOylpZihiPWcoYyxhKSlyZXR1cm4gYn0sZ2V0Tm9kZXNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7YT11dGlscy50cmltKGEpLnJlcGxhY2UoL1sgXXsyLH0vZyxcIiBcIikuc3BsaXQoXCIgXCIpO3ZhciBiPVtdLGM9dGhpcztyZXR1cm4gdXRpbHMuZWFjaChhLGZ1bmN0aW9uKGEpe2lmKGMuY2hpbGRyZW4mJmMuY2hpbGRyZW4ubGVuZ3RoKWZvcih2YXIgZCxlPTA7ZD1jLmNoaWxkcmVuW2UrK107KWgoZCxhLGIpfSksYn0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRBdHRyKFwic3R5bGVcIik7aWYoIWIpcmV0dXJuXCJcIjt2YXIgYz1uZXcgUmVnRXhwKFwiKF58OylcXFxccypcIithK1wiOihbXjtdKylcIixcImlcIiksZD1iLm1hdGNoKGMpO3JldHVybiBkJiZkWzBdP2RbMl06XCJcIn0sc2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7dmFyIGM9bmV3IFJlZ0V4cChcIihefDspXFxcXHMqXCIrYStcIjooW147XSs7PylcIixcImdpXCIpO2Q9ZC5yZXBsYWNlKGMsXCIkMVwiKSxiJiYoZD1hK1wiOlwiK3V0aWxzLnVuaHRtbChiKStcIjtcIitkKX12YXIgZD10aGlzLmdldEF0dHIoXCJzdHlsZVwiKTtpZihkfHwoZD1cIlwiKSx1dGlscy5pc09iamVjdChhKSlmb3IodmFyIGUgaW4gYSljKGUsYVtlXSk7ZWxzZSBjKGEsYik7dGhpcy5zZXRBdHRyKFwic3R5bGVcIix1dGlscy50cmltKGQpKX0sdHJhdmVyc2FsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNoaWxkcmVuJiZ0aGlzLmNoaWxkcmVuLmxlbmd0aCYmaSh0aGlzLGEpLHRoaXN9fX0oKTt2YXIgaHRtbHBhcnNlcj1VRS5odG1scGFyc2VyPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe2lmKG1bYS50YWdOYW1lXSl7dmFyIGM9ay5jcmVhdGVFbGVtZW50KG1bYS50YWdOYW1lXSk7YS5hcHBlbmRDaGlsZChjKSxjLmFwcGVuZENoaWxkKGsuY3JlYXRlVGV4dChiKSksYT1jfWVsc2UgYS5hcHBlbmRDaGlsZChrLmNyZWF0ZVRleHQoYikpfWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBlO2lmKGU9bFtiXSl7Zm9yKHZhciBmLGg9YTtcInJvb3RcIiE9aC50eXBlOyl7aWYodXRpbHMuaXNBcnJheShlKT91dGlscy5pbmRleE9mKGUsaC50YWdOYW1lKSE9LTE6ZT09aC50YWdOYW1lKXthPWgsZj0hMDticmVha31oPWgucGFyZW50Tm9kZX1mfHwoYT1kKGEsdXRpbHMuaXNBcnJheShlKT9lWzBdOmUpKX12YXIgaT1uZXcgayh7cGFyZW50Tm9kZTphLHR5cGU6XCJlbGVtZW50XCIsdGFnTmFtZTpiLnRvTG93ZXJDYXNlKCksY2hpbGRyZW46ZHRkLiRlbXB0eVtiXT9udWxsOltdfSk7aWYoYyl7Zm9yKHZhciBtLG49e307bT1nLmV4ZWMoYyk7KW5bbVsxXS50b0xvd2VyQ2FzZSgpXT1qW21bMV0udG9Mb3dlckNhc2UoKV0/bVsyXXx8bVszXXx8bVs0XTp1dGlscy51bmh0bWwobVsyXXx8bVszXXx8bVs0XSk7aS5hdHRycz1ufXJldHVybiBhLmNoaWxkcmVuLnB1c2goaSksZHRkLiRlbXB0eVtiXT9hOml9ZnVuY3Rpb24gZShhLGIpe2EuY2hpbGRyZW4ucHVzaChuZXcgayh7dHlwZTpcImNvbW1lbnRcIixkYXRhOmIscGFyZW50Tm9kZTphfSkpfXZhciBmPS88KD86KD86XFwvKFtePl0rKT4pfCg/OiEtLShbXFxTfFxcc10qPyktLT4pfCg/OihbXlxcc1xcLzw+XSspXFxzKigoPzooPzpcIlteXCJdKlwiKXwoPzonW14nXSonKXxbXlwiJzw+XSkqKVxcLz8+KSkvZyxnPS8oW1xcd1xcLTouXSspKD86KD86XFxzKj1cXHMqKD86KD86XCIoW15cIl0qKVwiKXwoPzonKFteJ10qKScpfChbXlxccz5dKykpKXwoPz1cXHN8JCkpL2csaD17YjoxLGNvZGU6MSxpOjEsdToxLHN0cmlrZToxLHM6MSx0dDoxLHN0cm9uZzoxLHE6MSxzYW1wOjEsZW06MSxzcGFuOjEsc3ViOjEsaW1nOjEsc3VwOjEsZm9udDoxLGJpZzoxLHNtYWxsOjEsaWZyYW1lOjEsYToxLGJyOjEscHJlOjF9O2E9YS5yZXBsYWNlKG5ldyBSZWdFeHAoZG9tVXRpbHMuZmlsbENoYXIsXCJnXCIpLFwiXCIpLGJ8fChhPWEucmVwbGFjZShuZXcgUmVnRXhwKFwiW1xcXFxyXFxcXHRcXFxcblwiKyhiP1wiXCI6XCIgXCIpK1wiXSo8Lz8oXFxcXHcrKVxcXFxzKig/OltePl0qKT5bXFxcXHJcXFxcdFxcXFxuXCIrKGI/XCJcIjpcIiBcIikrXCJdKlwiLFwiZ1wiKSxmdW5jdGlvbihhLGMpe3JldHVybiBjJiZoW2MudG9Mb3dlckNhc2UoKV0/YS5yZXBsYWNlKC8oXltcXG5cXHJdKyl8KFtcXG5cXHJdKyQpL2csXCJcIik6YS5yZXBsYWNlKG5ldyBSZWdFeHAoXCJeW1xcXFxyXFxcXG5cIisoYj9cIlwiOlwiIFwiKStcIl0rXCIpLFwiXCIpLnJlcGxhY2UobmV3IFJlZ0V4cChcIltcXFxcclxcXFxuXCIrKGI/XCJcIjpcIiBcIikrXCJdKyRcIiksXCJcIil9KSk7Zm9yKHZhciBpLGo9e2hyZWY6MSxzcmM6MX0saz1VRS51Tm9kZSxsPXt0ZDpcInRyXCIsdHI6W1widGJvZHlcIixcInRoZWFkXCIsXCJ0Zm9vdFwiXSx0Ym9keTpcInRhYmxlXCIsdGg6XCJ0clwiLHRoZWFkOlwidGFibGVcIix0Zm9vdDpcInRhYmxlXCIsY2FwdGlvbjpcInRhYmxlXCIsbGk6W1widWxcIixcIm9sXCJdLGR0OlwiZGxcIixkZDpcImRsXCIsb3B0aW9uOlwic2VsZWN0XCJ9LG09e29sOlwibGlcIix1bDpcImxpXCJ9LG49MCxvPTAscD1uZXcgayh7dHlwZTpcInJvb3RcIixjaGlsZHJlbjpbXX0pLHE9cDtpPWYuZXhlYyhhKTspe249aS5pbmRleDt0cnl7aWYobj5vJiZjKHEsYS5zbGljZShvLG4pKSxpWzNdKWR0ZC4kY2RhdGFbcS50YWdOYW1lXT9jKHEsaVswXSk6cT1kKHEsaVszXS50b0xvd2VyQ2FzZSgpLGlbNF0pO2Vsc2UgaWYoaVsxXSl7aWYoXCJyb290XCIhPXEudHlwZSlpZihkdGQuJGNkYXRhW3EudGFnTmFtZV0mJiFkdGQuJGNkYXRhW2lbMV1dKWMocSxpWzBdKTtlbHNle2Zvcih2YXIgcj1xO1wiZWxlbWVudFwiPT1xLnR5cGUmJnEudGFnTmFtZSE9aVsxXS50b0xvd2VyQ2FzZSgpOylpZihxPXEucGFyZW50Tm9kZSxcInJvb3RcIj09cS50eXBlKXRocm93IHE9cixcImJyZWFrXCI7cT1xLnBhcmVudE5vZGV9fWVsc2UgaVsyXSYmZShxLGlbMl0pfWNhdGNoKHMpe31vPWYubGFzdEluZGV4fXJldHVybiBvPGEubGVuZ3RoJiZjKHEsYS5zbGljZShvKSkscH0sZmlsdGVyTm9kZT1VRS5maWx0ZXJOb2RlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGMpe3N3aXRjaChiLnR5cGUpe2Nhc2VcInRleHRcIjpicmVhaztjYXNlXCJlbGVtZW50XCI6dmFyIGQ7aWYoZD1jW2IudGFnTmFtZV0paWYoXCItXCI9PT1kKWIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTtlbHNlIGlmKHV0aWxzLmlzRnVuY3Rpb24oZCkpe3ZhciBlPWIucGFyZW50Tm9kZSxmPWIuZ2V0SW5kZXgoKTtpZihkKGIpLGIucGFyZW50Tm9kZSl7aWYoYi5jaGlsZHJlbilmb3IodmFyIGcsaD0wO2c9Yi5jaGlsZHJlbltoXTspYShnLGMpLGcucGFyZW50Tm9kZSYmaCsrfWVsc2UgZm9yKHZhciBnLGg9ZjtnPWUuY2hpbGRyZW5baF07KWEoZyxjKSxnLnBhcmVudE5vZGUmJmgrK31lbHNle3ZhciBpPWQuJDtpZihpJiZiLmF0dHJzKXt2YXIgaixrPXt9O2Zvcih2YXIgbCBpbiBpKXtpZihqPWIuZ2V0QXR0cihsKSxcInN0eWxlXCI9PWwmJnV0aWxzLmlzQXJyYXkoaVtsXSkpe3ZhciBtPVtdO3V0aWxzLmVhY2goaVtsXSxmdW5jdGlvbihhKXt2YXIgYzsoYz1iLmdldFN0eWxlKGEpKSYmbS5wdXNoKGErXCI6XCIrYyl9KSxqPW0uam9pbihcIjtcIil9aiYmKGtbbF09ail9Yi5hdHRycz1rfWlmKGIuY2hpbGRyZW4pZm9yKHZhciBnLGg9MDtnPWIuY2hpbGRyZW5baF07KWEoZyxjKSxnLnBhcmVudE5vZGUmJmgrK31lbHNlIGlmKGR0ZC4kY2RhdGFbYi50YWdOYW1lXSliLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7ZWxzZXt2YXIgZT1iLnBhcmVudE5vZGUsZj1iLmdldEluZGV4KCk7Yi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIsITApO2Zvcih2YXIgZyxoPWY7Zz1lLmNoaWxkcmVuW2hdOylhKGcsYyksZy5wYXJlbnROb2RlJiZoKyt9YnJlYWs7Y2FzZVwiY29tbWVudFwiOmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX19cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYodXRpbHMuaXNFbXB0eU9iamVjdChjKSlyZXR1cm4gYjt2YXIgZDsoZD1jW1wiLVwiXSkmJnV0aWxzLmVhY2goZC5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7Y1thXT1cIi1cIn0pO2Zvcih2YXIgZSxmPTA7ZT1iLmNoaWxkcmVuW2ZdOylhKGUsYyksZS5wYXJlbnROb2RlJiZmKys7cmV0dXJuIGJ9fSgpO1VFLnBsdWdpbj1mdW5jdGlvbigpe3ZhciBhPXt9O3JldHVybntyZWdpc3RlcjpmdW5jdGlvbihiLGMsZCxlKXtkJiZ1dGlscy5pc0Z1bmN0aW9uKGQpJiYoZT1kLGQ9bnVsbCksYVtiXT17b3B0aW9uTmFtZTpkfHxiLGV4ZWNGbjpjLGFmdGVyRGlzYWJsZWQ6ZX19LGxvYWQ6ZnVuY3Rpb24oYil7dXRpbHMuZWFjaChhLGZ1bmN0aW9uKGEpe3ZhciBjPWEuZXhlY0ZuLmNhbGwoYik7Yi5vcHRpb25zW2Eub3B0aW9uTmFtZV0hPT0hMT9jJiZ1dGlscy5lYWNoKGMsZnVuY3Rpb24oYSxjKXtzd2l0Y2goYy50b0xvd2VyQ2FzZSgpKXtjYXNlXCJzaG9ydGN1dGtleVwiOmIuYWRkc2hvcnRjdXRrZXkoYSk7YnJlYWs7Y2FzZVwiYmluZGV2ZW50c1wiOnV0aWxzLmVhY2goYSxmdW5jdGlvbihhLGMpe2IuYWRkTGlzdGVuZXIoYyxhKX0pO2JyZWFrO2Nhc2VcImJpbmRtdWx0aWV2ZW50c1wiOnV0aWxzLmVhY2godXRpbHMuaXNBcnJheShhKT9hOlthXSxmdW5jdGlvbihhKXt2YXIgYz11dGlscy50cmltKGEudHlwZSkuc3BsaXQoL1xccysvKTt1dGlscy5lYWNoKGMsZnVuY3Rpb24oYyl7Yi5hZGRMaXN0ZW5lcihjLGEuaGFuZGxlcil9KX0pO2JyZWFrO2Nhc2VcImNvbW1hbmRzXCI6dXRpbHMuZWFjaChhLGZ1bmN0aW9uKGEsYyl7Yi5jb21tYW5kc1tjXT1hfSk7YnJlYWs7Y2FzZVwib3V0cHV0cnVsZVwiOmIuYWRkT3V0cHV0UnVsZShhKTticmVhaztjYXNlXCJpbnB1dHJ1bGVcIjpiLmFkZElucHV0UnVsZShhKTticmVhaztjYXNlXCJkZWZhdWx0b3B0aW9uc1wiOmIuc2V0T3B0KGEpfX0pOmEuYWZ0ZXJEaXNhYmxlZCYmYS5hZnRlckRpc2FibGVkLmNhbGwoYil9KSx1dGlscy5lYWNoKFVFLnBsdWdpbnMsZnVuY3Rpb24oYSl7YS5jYWxsKGIpfSl9LHJ1bjpmdW5jdGlvbihiLGMpe3ZhciBkPWFbYl07ZCYmZC5leGVGbi5jYWxsKGMpfX19KCk7dmFyIGtleW1hcD1VRS5rZXltYXA9e0JhY2tzcGFjZTo4LFRhYjo5LEVudGVyOjEzLFNoaWZ0OjE2LENvbnRyb2w6MTcsQWx0OjE4LENhcHNMb2NrOjIwLEVzYzoyNyxTcGFjZWJhcjozMixQYWdlVXA6MzMsUGFnZURvd246MzQsRW5kOjM1LEhvbWU6MzYsTGVmdDozNyxVcDozOCxSaWdodDozOSxEb3duOjQwLEluc2VydDo0NSxEZWw6NDYsTnVtTG9jazoxNDQsQ21kOjkxLFwiPVwiOjE4NyxcIi1cIjoxODksYjo2NixpOjczLHo6OTAseTo4OSx2Ojg2LHg6ODgsczo4MyxuOjc4fSxMb2NhbFN0b3JhZ2U9VUUuTG9jYWxTdG9yYWdlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIGEuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixhLmFkZEJlaGF2aW9yPyhhLmFkZEJlaGF2aW9yKFwiI2RlZmF1bHQjdXNlcmRhdGFcIikse2dldEl0ZW06ZnVuY3Rpb24oYil7dmFyIGQ9bnVsbDt0cnl7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKSxhLmxvYWQoYyksZD1hLmdldEF0dHJpYnV0ZShiKSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpfWNhdGNoKGUpe31yZXR1cm4gZH0sc2V0SXRlbTpmdW5jdGlvbihiLGQpe2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSksYS5zZXRBdHRyaWJ1dGUoYixkKSxhLnNhdmUoYyksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKX0scmVtb3ZlSXRlbTpmdW5jdGlvbihiKXtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpLGEucmVtb3ZlQXR0cmlidXRlKGIpLGEuc2F2ZShjKSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpfX0pOm51bGx9dmFyIGI9d2luZG93LmxvY2FsU3RvcmFnZXx8YSgpfHxudWxsLGM9XCJsb2NhbFN0b3JhZ2VcIjtyZXR1cm57c2F2ZUxvY2FsRGF0YTpmdW5jdGlvbihhLGMpe3JldHVybiEoIWJ8fCFjKSYmKGIuc2V0SXRlbShhLGMpLCEwKX0sZ2V0TG9jYWxEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBiP2IuZ2V0SXRlbShhKTpudWxsfSxyZW1vdmVJdGVtOmZ1bmN0aW9uKGEpe2ImJmIucmVtb3ZlSXRlbShhKX19fSgpOyFmdW5jdGlvbigpe3ZhciBhPVwidWVkaXRvcl9wcmVmZXJlbmNlXCI7VUUuRWRpdG9yLnByb3RvdHlwZS5zZXRQcmVmZXJlbmNlcz1mdW5jdGlvbihiLGMpe3ZhciBkPXt9O3V0aWxzLmlzU3RyaW5nKGIpP2RbYl09YzpkPWI7dmFyIGU9TG9jYWxTdG9yYWdlLmdldExvY2FsRGF0YShhKTtlJiYoZT11dGlscy5zdHIyanNvbihlKSk/dXRpbHMuZXh0ZW5kKGUsZCk6ZT1kLGUmJkxvY2FsU3RvcmFnZS5zYXZlTG9jYWxEYXRhKGEsdXRpbHMuanNvbjJzdHIoZSkpfSxVRS5FZGl0b3IucHJvdG90eXBlLmdldFByZWZlcmVuY2VzPWZ1bmN0aW9uKGIpe3ZhciBjPUxvY2FsU3RvcmFnZS5nZXRMb2NhbERhdGEoYSk7cmV0dXJuIGMmJihjPXV0aWxzLnN0cjJqc29uKGMpKT9iP2NbYl06YzpudWxsfSxVRS5FZGl0b3IucHJvdG90eXBlLnJlbW92ZVByZWZlcmVuY2VzPWZ1bmN0aW9uKGIpe3ZhciBjPUxvY2FsU3RvcmFnZS5nZXRMb2NhbERhdGEoYSk7YyYmKGM9dXRpbHMuc3RyMmpzb24oYykpJiYoY1tiXT12b2lkIDAsZGVsZXRlIGNbYl0pLGMmJkxvY2FsU3RvcmFnZS5zYXZlTG9jYWxEYXRhKGEsdXRpbHMuanNvbjJzdHIoYykpfX0oKSxVRS5wbHVnaW5zLmRlZmF1bHRmaWx0ZXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Euc2V0T3B0KHthbGxvd0RpdlRyYW5zVG9QOiEwLGRpc2FibGVkVGFibGVJblRhYmxlOiEwfSksYS5hZGRJbnB1dFJ1bGUoZnVuY3Rpb24oYil7ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJlwiZWxlbWVudFwiPT1hLnR5cGU7KXtpZihcInRkXCI9PWEudGFnTmFtZSlyZXR1cm4hMDthPWEucGFyZW50Tm9kZX1yZXR1cm4hMX12YXIgZCxlPXRoaXMub3B0aW9ucy5hbGxvd0RpdlRyYW5zVG9QO2IudHJhdmVyc2FsKGZ1bmN0aW9uKGIpe2lmKFwiZWxlbWVudFwiPT1iLnR5cGUpe2lmKCFkdGQuJGNkYXRhW2IudGFnTmFtZV0mJmEub3B0aW9ucy5hdXRvQ2xlYXJFbXB0eU5vZGUmJmR0ZC4kaW5saW5lW2IudGFnTmFtZV0mJiFkdGQuJGVtcHR5W2IudGFnTmFtZV0mJighYi5hdHRyc3x8dXRpbHMuaXNFbXB0eU9iamVjdChiLmF0dHJzKSkpcmV0dXJuIHZvaWQoYi5maXJzdENoaWxkKCk/XCJzcGFuXCIhPWIudGFnTmFtZXx8Yi5hdHRycyYmIXV0aWxzLmlzRW1wdHlPYmplY3QoYi5hdHRycyl8fGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiLCEwKTpiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpO3N3aXRjaChiLnRhZ05hbWUpe2Nhc2VcInN0eWxlXCI6Y2FzZVwic2NyaXB0XCI6Yi5zZXRBdHRyKHtjZGF0YV90YWc6Yi50YWdOYW1lLGNkYXRhX2RhdGE6Yi5pbm5lckhUTUwoKXx8XCJcIixfdWVfY3VzdG9tX25vZGVfOlwidHJ1ZVwifSksYi50YWdOYW1lPVwiZGl2XCIsYi5pbm5lckhUTUwoXCJcIik7YnJlYWs7Y2FzZVwiYVwiOihkPWIuZ2V0QXR0cihcImhyZWZcIikpJiZiLnNldEF0dHIoXCJfaHJlZlwiLGQpO2JyZWFrO2Nhc2VcImltZ1wiOmlmKChkPWIuZ2V0QXR0cihcInNyY1wiKSkmJi9eZGF0YTovLnRlc3QoZCkpe2IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTticmVha31iLnNldEF0dHIoXCJfc3JjXCIsYi5nZXRBdHRyKFwic3JjXCIpKTticmVhaztjYXNlXCJzcGFuXCI6YnJvd3Nlci53ZWJraXQmJihkPWIuZ2V0U3R5bGUoXCJ3aGl0ZS1zcGFjZVwiKSkmJi9ub3dyYXB8bm9ybWFsLy50ZXN0KGQpJiYoYi5zZXRTdHlsZShcIndoaXRlLXNwYWNlXCIsXCJcIiksYS5vcHRpb25zLmF1dG9DbGVhckVtcHR5Tm9kZSYmdXRpbHMuaXNFbXB0eU9iamVjdChiLmF0dHJzKSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIsITApKSxkPWIuZ2V0QXR0cihcImlkXCIpLGQmJi9eX2JhaWR1X2Jvb2ttYXJrXy9pLnRlc3QoZCkmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTticmVhaztjYXNlXCJwXCI6KGQ9Yi5nZXRBdHRyKFwiYWxpZ25cIikpJiYoYi5zZXRBdHRyKFwiYWxpZ25cIiksYi5zZXRTdHlsZShcInRleHQtYWxpZ25cIixkKSksdXRpbHMuZWFjaChiLmNoaWxkcmVuLGZ1bmN0aW9uKGEpe2lmKFwiZWxlbWVudFwiPT1hLnR5cGUmJlwicFwiPT1hLnRhZ05hbWUpe3ZhciBjPWEubmV4dFNpYmxpbmcoKTtiLnBhcmVudE5vZGUuaW5zZXJ0QWZ0ZXIoYSxiKTtmb3IodmFyIGQ9YTtjOyl7dmFyIGU9Yy5uZXh0U2libGluZygpO2IucGFyZW50Tm9kZS5pbnNlcnRBZnRlcihjLGQpLGQ9YyxjPWV9cmV0dXJuITF9fSksYi5maXJzdENoaWxkKCl8fGIuaW5uZXJIVE1MKGJyb3dzZXIuaWU/XCImbmJzcDtcIjpcIjxici8+XCIpO2JyZWFrO2Nhc2VcImRpdlwiOmlmKGIuZ2V0QXR0cihcImNkYXRhX3RhZ1wiKSlicmVhaztpZihkPWIuZ2V0QXR0cihcImNsYXNzXCIpLGQmJi9ebGluZSBudW1iZXJcXGQrLy50ZXN0KGQpKWJyZWFrO2lmKCFlKWJyZWFrO2Zvcih2YXIgZixnPVVFLnVOb2RlLmNyZWF0ZUVsZW1lbnQoXCJwXCIpO2Y9Yi5maXJzdENoaWxkKCk7KVwidGV4dFwiIT1mLnR5cGUmJlVFLmRvbS5kdGQuJGJsb2NrW2YudGFnTmFtZV0/Zy5maXJzdENoaWxkKCk/KGIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZyxiKSxnPVVFLnVOb2RlLmNyZWF0ZUVsZW1lbnQoXCJwXCIpKTpiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsYik6Zy5hcHBlbmRDaGlsZChmKTtnLmZpcnN0Q2hpbGQoKSYmYi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnLGIpLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTticmVhaztjYXNlXCJkbFwiOmIudGFnTmFtZT1cInVsXCI7YnJlYWs7Y2FzZVwiZHRcIjpjYXNlXCJkZFwiOmIudGFnTmFtZT1cImxpXCI7YnJlYWs7Y2FzZVwibGlcIjp2YXIgaD1iLmdldEF0dHIoXCJjbGFzc1wiKTtoJiYvbGlzdFxcLS8udGVzdChoKXx8Yi5zZXRBdHRyKCk7dmFyIGk9Yi5nZXROb2Rlc0J5VGFnTmFtZShcIm9sIHVsXCIpO1VFLnV0aWxzLmVhY2goaSxmdW5jdGlvbihhKXtiLnBhcmVudE5vZGUuaW5zZXJ0QWZ0ZXIoYSxiKX0pO2JyZWFrO2Nhc2VcInRkXCI6Y2FzZVwidGhcIjpjYXNlXCJjYXB0aW9uXCI6Yi5jaGlsZHJlbiYmYi5jaGlsZHJlbi5sZW5ndGh8fGIuYXBwZW5kQ2hpbGQoYnJvd3Nlci5pZTExYmVsb3c/VUUudU5vZGUuY3JlYXRlVGV4dChcIiBcIik6VUUudU5vZGUuY3JlYXRlRWxlbWVudChcImJyXCIpKTticmVhaztjYXNlXCJ0YWJsZVwiOmEub3B0aW9ucy5kaXNhYmxlZFRhYmxlSW5UYWJsZSYmYyhiKSYmKGIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoVUUudU5vZGUuY3JlYXRlVGV4dChiLmlubmVyVGV4dCgpKSxiKSxiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpfX19KX0pLGEuYWRkT3V0cHV0UnVsZShmdW5jdGlvbihiKXt2YXIgYztiLnRyYXZlcnNhbChmdW5jdGlvbihiKXtpZihcImVsZW1lbnRcIj09Yi50eXBlKXtpZihhLm9wdGlvbnMuYXV0b0NsZWFyRW1wdHlOb2RlJiZkdGQuJGlubGluZVtiLnRhZ05hbWVdJiYhZHRkLiRlbXB0eVtiLnRhZ05hbWVdJiYoIWIuYXR0cnN8fHV0aWxzLmlzRW1wdHlPYmplY3QoYi5hdHRycykpKXJldHVybiB2b2lkKGIuZmlyc3RDaGlsZCgpP1wic3BhblwiIT1iLnRhZ05hbWV8fGIuYXR0cnMmJiF1dGlscy5pc0VtcHR5T2JqZWN0KGIuYXR0cnMpfHxiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiwhMCk6Yi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTtzd2l0Y2goYi50YWdOYW1lKXtjYXNlXCJkaXZcIjooYz1iLmdldEF0dHIoXCJjZGF0YV90YWdcIikpJiYoYi50YWdOYW1lPWMsYi5hcHBlbmRDaGlsZChVRS51Tm9kZS5jcmVhdGVUZXh0KGIuZ2V0QXR0cihcImNkYXRhX2RhdGFcIikpKSxiLnNldEF0dHIoe2NkYXRhX3RhZzpcIlwiLGNkYXRhX2RhdGE6XCJcIixfdWVfY3VzdG9tX25vZGVfOlwiXCJ9KSk7YnJlYWs7Y2FzZVwiYVwiOihjPWIuZ2V0QXR0cihcIl9ocmVmXCIpKSYmYi5zZXRBdHRyKHtocmVmOnV0aWxzLmh0bWwoYyksX2hyZWY6XCJcIn0pO2JyZWFrO2Nhc2VcInNwYW5cIjpjPWIuZ2V0QXR0cihcImlkXCIpLGMmJi9eX2JhaWR1X2Jvb2ttYXJrXy9pLnRlc3QoYykmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTticmVhaztjYXNlXCJpbWdcIjooYz1iLmdldEF0dHIoXCJfc3JjXCIpKSYmYi5zZXRBdHRyKHtzcmM6Yi5nZXRBdHRyKFwiX3NyY1wiKSxfc3JjOlwiXCJ9KX19fSl9KX0sVUUuY29tbWFuZHMuaW5zZXJ0aHRtbD17ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj10aGlzO2lmKGImJmYuZmlyZUV2ZW50KFwiYmVmb3JlaW5zZXJ0aHRtbFwiLGIpIT09ITApe2lmKGQ9Zi5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxlPWQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxlLnN0eWxlLmRpc3BsYXk9XCJpbmxpbmVcIiwhYyl7dmFyIGc9VUUuaHRtbHBhcnNlcihiKTtmLm9wdGlvbnMuZmlsdGVyUnVsZXMmJlVFLmZpbHRlck5vZGUoZyxmLm9wdGlvbnMuZmlsdGVyUnVsZXMpLGYuZmlsdGVySW5wdXRSdWxlKGcpLGI9Zy50b0h0bWwoKX1pZihlLmlubmVySFRNTD11dGlscy50cmltKGIpLCFkLmNvbGxhcHNlZCl7dmFyIGg9ZC5zdGFydENvbnRhaW5lcjtpZihkb21VdGlscy5pc0ZpbGxDaGFyKGgpJiZkLnNldFN0YXJ0QmVmb3JlKGgpLGg9ZC5lbmRDb250YWluZXIsZG9tVXRpbHMuaXNGaWxsQ2hhcihoKSYmZC5zZXRFbmRBZnRlcihoKSxkLnR4dFRvRWxtQm91bmRhcnkoKSxkLmVuZENvbnRhaW5lciYmMT09ZC5lbmRDb250YWluZXIubm9kZVR5cGUmJihoPWQuZW5kQ29udGFpbmVyLmNoaWxkTm9kZXNbZC5lbmRPZmZzZXRdLGgmJmRvbVV0aWxzLmlzQnIoaCkmJmQuc2V0RW5kQWZ0ZXIoaCkpLDA9PWQuc3RhcnRPZmZzZXQmJihoPWQuc3RhcnRDb250YWluZXIsZG9tVXRpbHMuaXNCb3VuZGFyeU5vZGUoaCxcImZpcnN0Q2hpbGRcIikmJihoPWQuZW5kQ29udGFpbmVyLGQuZW5kT2Zmc2V0PT0oMz09aC5ub2RlVHlwZT9oLm5vZGVWYWx1ZS5sZW5ndGg6aC5jaGlsZE5vZGVzLmxlbmd0aCkmJmRvbVV0aWxzLmlzQm91bmRhcnlOb2RlKGgsXCJsYXN0Q2hpbGRcIikmJihmLmJvZHkuaW5uZXJIVE1MPVwiPHA+XCIrKGJyb3dzZXIuaWU/XCJcIjpcIjxici8+XCIpK1wiPC9wPlwiLGQuc2V0U3RhcnQoZi5ib2R5LmZpcnN0Q2hpbGQsMCkuY29sbGFwc2UoITApKSkpLCFkLmNvbGxhcHNlZCYmZC5kZWxldGVDb250ZW50cygpLDE9PWQuc3RhcnRDb250YWluZXIubm9kZVR5cGUpe3ZhciBpLGo9ZC5zdGFydENvbnRhaW5lci5jaGlsZE5vZGVzW2Quc3RhcnRPZmZzZXRdO2lmKGomJmRvbVV0aWxzLmlzQmxvY2tFbG0oaikmJihpPWoucHJldmlvdXNTaWJsaW5nKSYmZG9tVXRpbHMuaXNCbG9ja0VsbShpKSl7Zm9yKGQuc2V0RW5kKGksaS5jaGlsZE5vZGVzLmxlbmd0aCkuY29sbGFwc2UoKTtqLmZpcnN0Q2hpbGQ7KWkuYXBwZW5kQ2hpbGQoai5maXJzdENoaWxkKTtkb21VdGlscy5yZW1vdmUoail9fX12YXIgaixrLGksbCxtLG49MDtkLmluRmlsbENoYXIoKSYmKGo9ZC5zdGFydENvbnRhaW5lcixkb21VdGlscy5pc0ZpbGxDaGFyKGopPyhkLnNldFN0YXJ0QmVmb3JlKGopLmNvbGxhcHNlKCEwKSxkb21VdGlscy5yZW1vdmUoaikpOmRvbVV0aWxzLmlzRmlsbENoYXIoaiwhMCkmJihqLm5vZGVWYWx1ZT1qLm5vZGVWYWx1ZS5yZXBsYWNlKGZpbGxDaGFyUmVnLFwiXCIpLGQuc3RhcnRPZmZzZXQtLSxkLmNvbGxhcHNlZCYmZC5jb2xsYXBzZSghMCkpKTt2YXIgbz1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGQuc3RhcnRDb250YWluZXIsXCJsaVwiLCEwKTtpZihvKXtmb3IodmFyIHAscTtqPWUuZmlyc3RDaGlsZDspe2Zvcig7aiYmKDM9PWoubm9kZVR5cGV8fCFkb21VdGlscy5pc0Jsb2NrRWxtKGopfHxcIkhSXCI9PWoudGFnTmFtZSk7KXA9ai5uZXh0U2libGluZyxkLmluc2VydE5vZGUoaikuY29sbGFwc2UoKSxxPWosaj1wO2lmKGopaWYoL14ob2x8dWwpJC9pLnRlc3Qoai50YWdOYW1lKSl7Zm9yKDtqLmZpcnN0Q2hpbGQ7KXE9ai5maXJzdENoaWxkLGRvbVV0aWxzLmluc2VydEFmdGVyKG8sai5maXJzdENoaWxkKSxvPW8ubmV4dFNpYmxpbmc7ZG9tVXRpbHMucmVtb3ZlKGopfWVsc2V7dmFyIHI7cD1qLm5leHRTaWJsaW5nLHI9Zi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIiksZG9tVXRpbHMuaW5zZXJ0QWZ0ZXIobyxyKSxyLmFwcGVuZENoaWxkKGopLHE9aixqPXAsbz1yfX1vPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZC5zdGFydENvbnRhaW5lcixcImxpXCIsITApLGRvbVV0aWxzLmlzRW1wdHlCbG9jayhvKSYmZG9tVXRpbHMucmVtb3ZlKG8pLHEmJmQuc2V0U3RhcnRBZnRlcihxKS5jb2xsYXBzZSghMCkuc2VsZWN0KCEwKX1lbHNle2Zvcig7aj1lLmZpcnN0Q2hpbGQ7KXtpZihuKXtmb3IodmFyIHM9Zi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtqJiYoMz09ai5ub2RlVHlwZXx8IWR0ZC4kYmxvY2tbai50YWdOYW1lXSk7KW09ai5uZXh0U2libGluZyxzLmFwcGVuZENoaWxkKGopLGo9bTtzLmZpcnN0Q2hpbGQmJihqPXMpfWlmKGQuaW5zZXJ0Tm9kZShqKSxtPWoubmV4dFNpYmxpbmcsIW4mJmoubm9kZVR5cGU9PWRvbVV0aWxzLk5PREVfRUxFTUVOVCYmZG9tVXRpbHMuaXNCbG9ja0VsbShqKSYmKGs9ZG9tVXRpbHMuZmluZFBhcmVudChqLGZ1bmN0aW9uKGEpe3JldHVybiBkb21VdGlscy5pc0Jsb2NrRWxtKGEpfSksayYmXCJib2R5XCIhPWsudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYoIWR0ZFtrLnRhZ05hbWVdW2oubm9kZU5hbWVdfHxqLnBhcmVudE5vZGUhPT1rKSkpe2lmKGR0ZFtrLnRhZ05hbWVdW2oubm9kZU5hbWVdKWZvcihsPWoucGFyZW50Tm9kZTtsIT09azspaT1sLGw9bC5wYXJlbnROb2RlO2Vsc2UgaT1rO2RvbVV0aWxzLmJyZWFrUGFyZW50KGosaXx8bCk7dmFyIGk9ai5wcmV2aW91c1NpYmxpbmc7ZG9tVXRpbHMudHJpbVdoaXRlVGV4dE5vZGUoaSksaS5jaGlsZE5vZGVzLmxlbmd0aHx8ZG9tVXRpbHMucmVtb3ZlKGkpLCFicm93c2VyLmllJiYocD1qLm5leHRTaWJsaW5nKSYmZG9tVXRpbHMuaXNCbG9ja0VsbShwKSYmcC5sYXN0Q2hpbGQmJiFkb21VdGlscy5pc0JyKHAubGFzdENoaWxkKSYmcC5hcHBlbmRDaGlsZChmLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSksbj0xfXZhciBwPWoubmV4dFNpYmxpbmc7aWYoIWUuZmlyc3RDaGlsZCYmcCYmZG9tVXRpbHMuaXNCbG9ja0VsbShwKSl7ZC5zZXRTdGFydChwLDApLmNvbGxhcHNlKCEwKTticmVha31kLnNldEVuZEFmdGVyKGopLmNvbGxhcHNlKCl9aWYoaj1kLnN0YXJ0Q29udGFpbmVyLG0mJmRvbVV0aWxzLmlzQnIobSkmJmRvbVV0aWxzLnJlbW92ZShtKSxkb21VdGlscy5pc0Jsb2NrRWxtKGopJiZkb21VdGlscy5pc0VtcHR5Tm9kZShqKSlpZihtPWoubmV4dFNpYmxpbmcpZG9tVXRpbHMucmVtb3ZlKGopLDE9PW0ubm9kZVR5cGUmJmR0ZC4kYmxvY2tbbS50YWdOYW1lXSYmZC5zZXRTdGFydChtLDApLmNvbGxhcHNlKCEwKS5zaHJpbmtCb3VuZGFyeSgpO2Vsc2UgdHJ5e2ouaW5uZXJIVE1MPWJyb3dzZXIuaWU/ZG9tVXRpbHMuZmlsbENoYXI6XCI8YnIvPlwifWNhdGNoKHQpe2Quc2V0U3RhcnRCZWZvcmUoaiksZG9tVXRpbHMucmVtb3ZlKGopfXRyeXtkLnNlbGVjdCghMCl9Y2F0Y2godCl7fX1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZD1mLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGQuc2Nyb2xsVG9WaWV3KGYuYXV0b0hlaWdodEVuYWJsZWQsZi5hdXRvSGVpZ2h0RW5hYmxlZD9kb21VdGlscy5nZXRYWShmLmlmcmFtZSkueTowKSxmLmZpcmVFdmVudChcImFmdGVyaW5zZXJ0aHRtbFwiLGIpfSwyMDApfX19LFVFLnBsdWdpbnMuYXV0b3R5cGVzZXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7cmV0dXJuIGEmJjMhPWEubm9kZVR5cGU/ZG9tVXRpbHMuaXNCcihhKT8xOmEmJmEucGFyZW50Tm9kZSYmbFthLnRhZ05hbWUudG9Mb3dlckNhc2UoKV0/ZyYmZy5jb250YWlucyhhKXx8YS5nZXRBdHRyaWJ1dGUoXCJwYWdlYnJlYWtcIik/MDpiPyFkb21VdGlscy5pc0VtcHR5QmxvY2soYSk6ZG9tVXRpbHMuaXNFbXB0eUJsb2NrKGEsbmV3IFJlZ0V4cChcIltcXFxcc1wiK2RvbVV0aWxzLmZpbGxDaGFyK1wiXVwiLFwiZ1wiKSk6dm9pZCAwOjB9ZnVuY3Rpb24gYihhKXthLnN0eWxlLmNzc1RleHR8fChkb21VdGlscy5yZW1vdmVBdHRyaWJ1dGVzKGEsW1wic3R5bGVcIl0pLFwic3BhblwiPT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmZG9tVXRpbHMuaGFzTm9BdHRyaWJ1dGVzKGEpJiZkb21VdGlscy5yZW1vdmUoYSwhMCkpfWZ1bmN0aW9uIGMoYyxmKXt2YXIgaCxsPXRoaXM7aWYoZil7aWYoIWkucGFzdGVGaWx0ZXIpcmV0dXJuO2g9bC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGguaW5uZXJIVE1MPWYuaHRtbH1lbHNlIGg9bC5kb2N1bWVudC5ib2R5O2Zvcih2YXIgbSxuPWRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGgsXCIqXCIpLG89MDttPW5bbysrXTspaWYobC5maXJlRXZlbnQoXCJleGNsdWRlTm9kZWluYXV0b3R5cGVcIixtKSE9PSEwKXtpZihpLmNsZWFyRm9udFNpemUmJm0uc3R5bGUuZm9udFNpemUmJihkb21VdGlscy5yZW1vdmVTdHlsZShtLFwiZm9udC1zaXplXCIpLGIobSkpLGkuY2xlYXJGb250RmFtaWx5JiZtLnN0eWxlLmZvbnRGYW1pbHkmJihkb21VdGlscy5yZW1vdmVTdHlsZShtLFwiZm9udC1mYW1pbHlcIiksYihtKSksYShtKSl7aWYoaS5tZXJnZUVtcHR5bGluZSlmb3IodmFyIHAscT1tLm5leHRTaWJsaW5nLHI9ZG9tVXRpbHMuaXNCcihtKTthKHEpJiYocD1xLHE9cC5uZXh0U2libGluZywhcnx8cSYmKCFxfHxkb21VdGlscy5pc0JyKHEpKSk7KWRvbVV0aWxzLnJlbW92ZShwKTtpZihpLnJlbW92ZUVtcHR5bGluZSYmZG9tVXRpbHMuaW5Eb2MobSxoKSYmIWtbbS5wYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKV0pe2lmKGRvbVV0aWxzLmlzQnIobSkmJihxPW0ubmV4dFNpYmxpbmcscSYmIWRvbVV0aWxzLmlzQnIocSkpKWNvbnRpbnVlO2RvbVV0aWxzLnJlbW92ZShtKTtjb250aW51ZX19aWYoYShtLCEwKSYmXCJTUEFOXCIhPW0udGFnTmFtZSYmKGkuaW5kZW50JiYobS5zdHlsZS50ZXh0SW5kZW50PWkuaW5kZW50VmFsdWUpLGkudGV4dEFsaWduJiYobS5zdHlsZS50ZXh0QWxpZ249aS50ZXh0QWxpZ24pKSxpLnJlbW92ZUNsYXNzJiZtLmNsYXNzTmFtZSYmIWpbbS5jbGFzc05hbWUudG9Mb3dlckNhc2UoKV0pe2lmKGcmJmcuY29udGFpbnMobSkpY29udGludWU7ZG9tVXRpbHMucmVtb3ZlQXR0cmlidXRlcyhtLFtcImNsYXNzXCJdKX1pZihpLmltYWdlQmxvY2tMaW5lJiZcImltZ1wiPT1tLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmIW0uZ2V0QXR0cmlidXRlKFwiZW1vdGlvblwiKSlpZihmKXt2YXIgcz1tO3N3aXRjaChpLmltYWdlQmxvY2tMaW5lKXtjYXNlXCJsZWZ0XCI6Y2FzZVwicmlnaHRcIjpjYXNlXCJub25lXCI6Zm9yKHZhciBwLHQscSx1PXMucGFyZW50Tm9kZTtkdGQuJGlubGluZVt1LnRhZ05hbWVdfHxcIkFcIj09dS50YWdOYW1lOyl1PXUucGFyZW50Tm9kZTtpZihwPXUsXCJQXCI9PXAudGFnTmFtZSYmXCJjZW50ZXJcIj09ZG9tVXRpbHMuZ2V0U3R5bGUocCxcInRleHQtYWxpZ25cIikmJiFkb21VdGlscy5pc0JvZHkocCkmJjE9PWRvbVV0aWxzLmdldENoaWxkQ291bnQocCxmdW5jdGlvbihhKXtyZXR1cm4hZG9tVXRpbHMuaXNCcihhKSYmIWRvbVV0aWxzLmlzV2hpdGVzcGFjZShhKX0pKWlmKHQ9cC5wcmV2aW91c1NpYmxpbmcscT1wLm5leHRTaWJsaW5nLHQmJnEmJjE9PXQubm9kZVR5cGUmJjE9PXEubm9kZVR5cGUmJnQudGFnTmFtZT09cS50YWdOYW1lJiZkb21VdGlscy5pc0Jsb2NrRWxtKHQpKXtmb3IodC5hcHBlbmRDaGlsZChwLmZpcnN0Q2hpbGQpO3EuZmlyc3RDaGlsZDspdC5hcHBlbmRDaGlsZChxLmZpcnN0Q2hpbGQpO2RvbVV0aWxzLnJlbW92ZShwKSxkb21VdGlscy5yZW1vdmUocSl9ZWxzZSBkb21VdGlscy5zZXRTdHlsZShwLFwidGV4dC1hbGlnblwiLFwiXCIpO2RvbVV0aWxzLnNldFN0eWxlKHMsXCJmbG9hdFwiLGkuaW1hZ2VCbG9ja0xpbmUpO2JyZWFrO2Nhc2VcImNlbnRlclwiOmlmKFwiY2VudGVyXCIhPWwucXVlcnlDb21tYW5kVmFsdWUoXCJpbWFnZWZsb2F0XCIpKXtmb3IodT1zLnBhcmVudE5vZGUsZG9tVXRpbHMuc2V0U3R5bGUocyxcImZsb2F0XCIsXCJub25lXCIpLHA9czt1JiYxPT1kb21VdGlscy5nZXRDaGlsZENvdW50KHUsZnVuY3Rpb24oYSl7cmV0dXJuIWRvbVV0aWxzLmlzQnIoYSkmJiFkb21VdGlscy5pc1doaXRlc3BhY2UoYSl9KSYmKGR0ZC4kaW5saW5lW3UudGFnTmFtZV18fFwiQVwiPT11LnRhZ05hbWUpOylwPXUsdT11LnBhcmVudE5vZGU7dmFyIHY9bC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtkb21VdGlscy5zZXRBdHRyaWJ1dGVzKHYse3N0eWxlOlwidGV4dC1hbGlnbjpjZW50ZXJcIn0pLHAucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodixwKSx2LmFwcGVuZENoaWxkKHApLGRvbVV0aWxzLnNldFN0eWxlKHAsXCJmbG9hdFwiLFwiXCIpfX19ZWxzZXt2YXIgdz1sLnNlbGVjdGlvbi5nZXRSYW5nZSgpO3cuc2VsZWN0Tm9kZShtKS5zZWxlY3QoKSxsLmV4ZWNDb21tYW5kKFwiaW1hZ2VmbG9hdFwiLGkuaW1hZ2VCbG9ja0xpbmUpfWkucmVtb3ZlRW1wdHlOb2RlJiZpLnJlbW92ZVRhZ05hbWVzW20udGFnTmFtZS50b0xvd2VyQ2FzZSgpXSYmZG9tVXRpbHMuaGFzTm9BdHRyaWJ1dGVzKG0pJiZkb21VdGlscy5pc0VtcHR5QmxvY2sobSkmJmRvbVV0aWxzLnJlbW92ZShtKX1pZihpLnRvYmRjKXt2YXIgeD1VRS5odG1scGFyc2VyKGguaW5uZXJIVE1MKTt4LnRyYXZlcnNhbChmdW5jdGlvbihhKXtcInRleHRcIj09YS50eXBlJiYoYS5kYXRhPWUoYS5kYXRhKSl9KSxoLmlubmVySFRNTD14LnRvSHRtbCgpfWlmKGkuYmRjMnNiKXt2YXIgeD1VRS5odG1scGFyc2VyKGguaW5uZXJIVE1MKTt4LnRyYXZlcnNhbChmdW5jdGlvbihhKXtcInRleHRcIj09YS50eXBlJiYoYS5kYXRhPWQoYS5kYXRhKSl9KSxoLmlubmVySFRNTD14LnRvSHRtbCgpfWYmJihmLmh0bWw9aC5pbm5lckhUTUwpfWZ1bmN0aW9uIGQoYSl7Zm9yKHZhciBiPVwiXCIsYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hLmNoYXJDb2RlQXQoYyk7Yis9ZD49NjUyODEmJmQ8PTY1MzczP1N0cmluZy5mcm9tQ2hhckNvZGUoYS5jaGFyQ29kZUF0KGMpLTY1MjQ4KToxMjI4OD09ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGEuY2hhckNvZGVBdChjKS0xMjI4OCszMik6YS5jaGFyQXQoYyl9cmV0dXJuIGJ9ZnVuY3Rpb24gZShhKXthPXV0aWxzLmh0bWwoYSk7Zm9yKHZhciBiPVwiXCIsYz0wO2M8YS5sZW5ndGg7YysrKWIrPTMyPT1hLmNoYXJDb2RlQXQoYyk/U3RyaW5nLmZyb21DaGFyQ29kZSgxMjI4OCk6YS5jaGFyQ29kZUF0KGMpPDEyNz9TdHJpbmcuZnJvbUNoYXJDb2RlKGEuY2hhckNvZGVBdChjKSs2NTI0OCk6YS5jaGFyQXQoYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gZigpe3ZhciBhPWguZ2V0UHJlZmVyZW5jZXMoXCJhdXRvdHlwZXNldFwiKTt1dGlscy5leHRlbmQoaC5vcHRpb25zLmF1dG90eXBlc2V0LGEpfXRoaXMuc2V0T3B0KHthdXRvdHlwZXNldDp7bWVyZ2VFbXB0eWxpbmU6ITAscmVtb3ZlQ2xhc3M6ITAscmVtb3ZlRW1wdHlsaW5lOiExLHRleHRBbGlnbjpcImxlZnRcIixpbWFnZUJsb2NrTGluZTpcImNlbnRlclwiLHBhc3RlRmlsdGVyOiExLGNsZWFyRm9udFNpemU6ITEsY2xlYXJGb250RmFtaWx5OiExLHJlbW92ZUVtcHR5Tm9kZTohMSxyZW1vdmVUYWdOYW1lczp1dGlscy5leHRlbmQoe2RpdjoxfSxkdGQuJHJlbW92ZUVtcHR5KSxpbmRlbnQ6ITEsaW5kZW50VmFsdWU6XCIyZW1cIixiZGMyc2I6ITEsdG9iZGM6ITF9fSk7dmFyIGcsaD10aGlzLGk9aC5vcHRpb25zLmF1dG90eXBlc2V0LGo9e3NlbGVjdFRkQ2xhc3M6MSxwYWdlYnJlYWs6MSxhbmNob3JjbGFzczoxfSxrPXtsaToxfSxsPXtkaXY6MSxwOjEsYmxvY2txdW90ZToxLGNlbnRlcjoxLGgxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxoNjoxLHNwYW46MX07aSYmKGYoKSxpLnBhc3RlRmlsdGVyJiZoLmFkZExpc3RlbmVyKFwiYmVmb3JlcGFzdGVcIixjKSxoLmNvbW1hbmRzLmF1dG90eXBlc2V0PXtleGVjQ29tbWFuZDpmdW5jdGlvbigpe2gucmVtb3ZlTGlzdGVuZXIoXCJiZWZvcmVwYXN0ZVwiLGMpLGkucGFzdGVGaWx0ZXImJmguYWRkTGlzdGVuZXIoXCJiZWZvcmVwYXN0ZVwiLGMpLGMuY2FsbChoKX19KX0sVUUucGx1Z2luLnJlZ2lzdGVyKFwiYXV0b3N1Ym1pdFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Nob3J0Y3V0a2V5OnthdXRvc3VibWl0OlwiY3RybCsxM1wifSxjb21tYW5kczp7YXV0b3N1Ym1pdDp7ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShhLmlmcmFtZSxcImZvcm1cIiwhMSk7aWYoYil7aWYoYS5maXJlRXZlbnQoXCJiZWZvcmVzdWJtaXRcIik9PT0hMSlyZXR1cm47YS5zeW5jKCksYi5zdWJtaXQoKX19fX19fSksVUUucGx1Z2luLnJlZ2lzdGVyKFwiYmFja2dyb3VuZFwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2YXIgYj17fSxjPWEuc3BsaXQoXCI7XCIpO3JldHVybiB1dGlscy5lYWNoKGMsZnVuY3Rpb24oYSl7dmFyIGM9YS5pbmRleE9mKFwiOlwiKSxkPXV0aWxzLnRyaW0oYS5zdWJzdHIoMCxjKSkudG9Mb3dlckNhc2UoKTtkJiYoYltkXT11dGlscy50cmltKGEuc3Vic3RyKGMrMSl8fFwiXCIpKX0pLGJ9ZnVuY3Rpb24gYihhKXtpZihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSlhLmhhc093blByb3BlcnR5KGMpJiZiLnB1c2goYytcIjpcIithW2NdK1wiOyBcIik7dXRpbHMuY3NzUnVsZShlLGIubGVuZ3RoP1wiYm9keXtcIitiLmpvaW4oXCJcIikrXCJ9XCI6XCJcIixkLmRvY3VtZW50KX1lbHNlIHV0aWxzLmNzc1J1bGUoZSxcIlwiLGQuZG9jdW1lbnQpfXZhciBjLGQ9dGhpcyxlPVwiZWRpdG9yX2JhY2tncm91bmRcIixmPW5ldyBSZWdFeHAoXCJib2R5W1xcXFxzXSpcXFxceyguKylcXFxcfVwiLFwiaVwiKSxnPWQuaGFzQ29udGVudHM7cmV0dXJuIGQuaGFzQ29udGVudHM9ZnVuY3Rpb24oKXtyZXR1cm4hIWQucXVlcnlDb21tYW5kVmFsdWUoXCJiYWNrZ3JvdW5kXCIpfHxnLmFwcGx5KGQsYXJndW1lbnRzKX0se2JpbmRFdmVudHM6e2dldEFsbEh0bWw6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmJvZHksZT1kb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGMsXCJiYWNrZ3JvdW5kLWltYWdlXCIpLGY9XCJcIjtcbmY9ZS5pbmRleE9mKGQub3B0aW9ucy5pbWFnZVBhdGgpPjA/ZS5zdWJzdHJpbmcoZS5pbmRleE9mKGQub3B0aW9ucy5pbWFnZVBhdGgpLGUubGVuZ3RoLTEpLnJlcGxhY2UoL1wifFxcKHxcXCkvZ2ksXCJcIik6XCJub25lXCIhPWU/ZS5yZXBsYWNlKC91cmxcXChcIj98XCI/XFwpL2dpLFwiXCIpOlwiXCI7dmFyIGc9JzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5ib2R5eycsaD17XCJiYWNrZ3JvdW5kLWNvbG9yXCI6ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShjLFwiYmFja2dyb3VuZC1jb2xvclwiKXx8XCIjZmZmZmZmXCIsXCJiYWNrZ3JvdW5kLWltYWdlXCI6Zj9cInVybChcIitmK1wiKVwiOlwiXCIsXCJiYWNrZ3JvdW5kLXJlcGVhdFwiOmRvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoYyxcImJhY2tncm91bmQtcmVwZWF0XCIpfHxcIlwiLFwiYmFja2dyb3VuZC1wb3NpdGlvblwiOmJyb3dzZXIuaWU/ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShjLFwiYmFja2dyb3VuZC1wb3NpdGlvbi14XCIpK1wiIFwiK2RvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoYyxcImJhY2tncm91bmQtcG9zaXRpb24teVwiKTpkb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGMsXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIpLGhlaWdodDpkb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGMsXCJoZWlnaHRcIil9O2Zvcih2YXIgaSBpbiBoKWguaGFzT3duUHJvcGVydHkoaSkmJihnKz1pK1wiOlwiK2hbaV0rXCI7IFwiKTtnKz1cIn08L3N0eWxlPiBcIixiLnB1c2goZyl9LGFmdGVyc2V0Y29udGVudDpmdW5jdGlvbigpezA9PWMmJmIoKX19LGlucHV0UnVsZTpmdW5jdGlvbihkKXtjPSExLHV0aWxzLmVhY2goZC5nZXROb2Rlc0J5VGFnTmFtZShcInBcIiksZnVuY3Rpb24oZCl7dmFyIGU9ZC5nZXRBdHRyKFwiZGF0YS1iYWNrZ3JvdW5kXCIpO2UmJihjPSEwLGIoYShlKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKX0pfSxvdXRwdXRSdWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz0odXRpbHMuY3NzUnVsZShlLGIuZG9jdW1lbnQpfHxcIlwiKS5yZXBsYWNlKC9bXFxuXFxyXSsvZyxcIlwiKS5tYXRjaChmKTtjJiZhLmFwcGVuZENoaWxkKFVFLnVOb2RlLmNyZWF0ZUVsZW1lbnQoJzxwIHN0eWxlPVwiZGlzcGxheTpub25lO1wiIGRhdGEtYmFja2dyb3VuZD1cIicrdXRpbHMudHJpbShjWzFdLnJlcGxhY2UoL1wiL2csXCJcIikucmVwbGFjZSgvW1xcc10rL2csXCIgXCIpKSsnXCI+PGJyLz48L3A+JykpfSxjb21tYW5kczp7YmFja2dyb3VuZDp7ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxjKXtiKGMpfSxxdWVyeUNvbW1hbmRWYWx1ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz0odXRpbHMuY3NzUnVsZShlLGIuZG9jdW1lbnQpfHxcIlwiKS5yZXBsYWNlKC9bXFxuXFxyXSsvZyxcIlwiKS5tYXRjaChmKTtyZXR1cm4gYz9hKGNbMV0pOm51bGx9LG5vdE5lZWRVbmRvOiEwfX19fSksVUUuY29tbWFuZHMuaW1hZ2VmbG9hdD17ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtpZighZC5jb2xsYXBzZWQpe3ZhciBlPWQuZ2V0Q2xvc2VkTm9kZSgpO2lmKGUmJlwiSU1HXCI9PWUudGFnTmFtZSlzd2l0Y2goYil7Y2FzZVwibGVmdFwiOmNhc2VcInJpZ2h0XCI6Y2FzZVwibm9uZVwiOmZvcih2YXIgZixnLGgsaT1lLnBhcmVudE5vZGU7ZHRkLiRpbmxpbmVbaS50YWdOYW1lXXx8XCJBXCI9PWkudGFnTmFtZTspaT1pLnBhcmVudE5vZGU7aWYoZj1pLFwiUFwiPT1mLnRhZ05hbWUmJlwiY2VudGVyXCI9PWRvbVV0aWxzLmdldFN0eWxlKGYsXCJ0ZXh0LWFsaWduXCIpKXtpZighZG9tVXRpbHMuaXNCb2R5KGYpJiYxPT1kb21VdGlscy5nZXRDaGlsZENvdW50KGYsZnVuY3Rpb24oYSl7cmV0dXJuIWRvbVV0aWxzLmlzQnIoYSkmJiFkb21VdGlscy5pc1doaXRlc3BhY2UoYSl9KSlpZihnPWYucHJldmlvdXNTaWJsaW5nLGg9Zi5uZXh0U2libGluZyxnJiZoJiYxPT1nLm5vZGVUeXBlJiYxPT1oLm5vZGVUeXBlJiZnLnRhZ05hbWU9PWgudGFnTmFtZSYmZG9tVXRpbHMuaXNCbG9ja0VsbShnKSl7Zm9yKGcuYXBwZW5kQ2hpbGQoZi5maXJzdENoaWxkKTtoLmZpcnN0Q2hpbGQ7KWcuYXBwZW5kQ2hpbGQoaC5maXJzdENoaWxkKTtkb21VdGlscy5yZW1vdmUoZiksZG9tVXRpbHMucmVtb3ZlKGgpfWVsc2UgZG9tVXRpbHMuc2V0U3R5bGUoZixcInRleHQtYWxpZ25cIixcIlwiKTtkLnNlbGVjdE5vZGUoZSkuc2VsZWN0KCl9ZG9tVXRpbHMuc2V0U3R5bGUoZSxcImZsb2F0XCIsXCJub25lXCI9PWI/XCJcIjpiKSxcIm5vbmVcIj09YiYmZG9tVXRpbHMucmVtb3ZlQXR0cmlidXRlcyhlLFwiYWxpZ25cIik7YnJlYWs7Y2FzZVwiY2VudGVyXCI6aWYoXCJjZW50ZXJcIiE9Yy5xdWVyeUNvbW1hbmRWYWx1ZShcImltYWdlZmxvYXRcIikpe2ZvcihpPWUucGFyZW50Tm9kZSxkb21VdGlscy5zZXRTdHlsZShlLFwiZmxvYXRcIixcIlwiKSxkb21VdGlscy5yZW1vdmVBdHRyaWJ1dGVzKGUsXCJhbGlnblwiKSxmPWU7aSYmMT09ZG9tVXRpbHMuZ2V0Q2hpbGRDb3VudChpLGZ1bmN0aW9uKGEpe3JldHVybiFkb21VdGlscy5pc0JyKGEpJiYhZG9tVXRpbHMuaXNXaGl0ZXNwYWNlKGEpfSkmJihkdGQuJGlubGluZVtpLnRhZ05hbWVdfHxcIkFcIj09aS50YWdOYW1lKTspZj1pLGk9aS5wYXJlbnROb2RlO2Quc2V0U3RhcnRCZWZvcmUoZikuc2V0Q3Vyc29yKCExKSxpPWMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxpLmFwcGVuZENoaWxkKGYpLGRvbVV0aWxzLnNldFN0eWxlKGYsXCJmbG9hdFwiLFwiXCIpLGMuZXhlY0NvbW1hbmQoXCJpbnNlcnRIdG1sXCIsJzxwIGlkPVwiX2ltZ19wYXJlbnRfdG1wXCIgc3R5bGU9XCJ0ZXh0LWFsaWduOmNlbnRlclwiPicraS5pbm5lckhUTUwrXCI8L3A+XCIpLGY9Yy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIl9pbWdfcGFyZW50X3RtcFwiKSxmLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpLGY9Zi5maXJzdENoaWxkLGQuc2VsZWN0Tm9kZShmKS5zZWxlY3QoKSxoPWYucGFyZW50Tm9kZS5uZXh0U2libGluZyxoJiZkb21VdGlscy5pc0VtcHR5Tm9kZShoKSYmZG9tVXRpbHMucmVtb3ZlKGgpfX19fSxxdWVyeUNvbW1hbmRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO3JldHVybiBjLmNvbGxhcHNlZD9cIm5vbmVcIjooYT1jLmdldENsb3NlZE5vZGUoKSxhJiYxPT1hLm5vZGVUeXBlJiZcIklNR1wiPT1hLnRhZ05hbWU/KGI9ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShhLFwiZmxvYXRcIil8fGEuZ2V0QXR0cmlidXRlKFwiYWxpZ25cIiksXCJub25lXCI9PWImJihiPVwiY2VudGVyXCI9PWRvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoYS5wYXJlbnROb2RlLFwidGV4dC1hbGlnblwiKT9cImNlbnRlclwiOmIpLHtsZWZ0OjEscmlnaHQ6MSxjZW50ZXI6MX1bYl0/YjpcIm5vbmVcIik6XCJub25lXCIpfSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtyZXR1cm4gYi5jb2xsYXBzZWQ/LTE6KGE9Yi5nZXRDbG9zZWROb2RlKCksYSYmMT09YS5ub2RlVHlwZSYmXCJJTUdcIj09YS50YWdOYW1lPzA6LTEpfX0sVUUuY29tbWFuZHMuaW5zZXJ0aW1hZ2U9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXt1dGlscy5lYWNoKFwid2lkdGgsaGVpZ2h0LGJvcmRlcixoc3BhY2UsdnNwYWNlXCIuc3BsaXQoXCIsXCIpLGZ1bmN0aW9uKGIpe2FbYl0mJihhW2JdPXBhcnNlSW50KGFbYl0sMTApfHwwKX0pLHV0aWxzLmVhY2goXCJzcmMsX3NyY1wiLnNwbGl0KFwiLFwiKSxmdW5jdGlvbihiKXthW2JdJiYoYVtiXT11dGlscy51bmh0bWxGb3JVcmwoYVtiXSkpfSksdXRpbHMuZWFjaChcInRpdGxlLGFsdFwiLnNwbGl0KFwiLFwiKSxmdW5jdGlvbihiKXthW2JdJiYoYVtiXT11dGlscy51bmh0bWwoYVtiXSkpfSl9aWYoYj11dGlscy5pc0FycmF5KGIpP2I6W2JdLGIubGVuZ3RoKXt2YXIgZD10aGlzLGU9ZC5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxmPWUuZ2V0Q2xvc2VkTm9kZSgpO2lmKGQuZmlyZUV2ZW50KFwiYmVmb3JlaW5zZXJ0aW1hZ2VcIixiKSE9PSEwKXtpZighZnx8IS9pbWcvaS50ZXN0KGYudGFnTmFtZSl8fFwiZWR1aS1mYWtlZC12aWRlb1wiPT1mLmNsYXNzTmFtZSYmZi5jbGFzc05hbWUuaW5kZXhPZihcImVkdWktdXBsb2FkLXZpZGVvXCIpPT0tMXx8Zi5nZXRBdHRyaWJ1dGUoXCJ3b3JkX2ltZ1wiKSl7dmFyIGcsaD1bXSxpPVwiXCI7aWYoZz1iWzBdLDE9PWIubGVuZ3RoKWMoZyksaT0nPGltZyBzcmM9XCInK2cuc3JjKydcIiAnKyhnLl9zcmM/JyBfc3JjPVwiJytnLl9zcmMrJ1wiICc6XCJcIikrKGcud2lkdGg/J3dpZHRoPVwiJytnLndpZHRoKydcIiAnOlwiXCIpKyhnLmhlaWdodD8nIGhlaWdodD1cIicrZy5oZWlnaHQrJ1wiICc6XCJcIikrKFwibGVmdFwiPT1nLmZsb2F0U3R5bGV8fFwicmlnaHRcIj09Zy5mbG9hdFN0eWxlPycgc3R5bGU9XCJmbG9hdDonK2cuZmxvYXRTdHlsZSsnO1wiJzpcIlwiKSsoZy50aXRsZSYmXCJcIiE9Zy50aXRsZT8nIHRpdGxlPVwiJytnLnRpdGxlKydcIic6XCJcIikrKGcuYm9yZGVyJiZcIjBcIiE9Zy5ib3JkZXI/JyBib3JkZXI9XCInK2cuYm9yZGVyKydcIic6XCJcIikrKGcuYWx0JiZcIlwiIT1nLmFsdD8nIGFsdD1cIicrZy5hbHQrJ1wiJzpcIlwiKSsoZy5oc3BhY2UmJlwiMFwiIT1nLmhzcGFjZT8nIGhzcGFjZSA9IFwiJytnLmhzcGFjZSsnXCInOlwiXCIpKyhnLnZzcGFjZSYmXCIwXCIhPWcudnNwYWNlPycgdnNwYWNlID0gXCInK2cudnNwYWNlKydcIic6XCJcIikrXCIvPlwiLFwiY2VudGVyXCI9PWcuZmxvYXRTdHlsZSYmKGk9JzxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyXCI+JytpK1wiPC9wPlwiKSxoLnB1c2goaSk7ZWxzZSBmb3IodmFyIGo9MDtnPWJbaisrXTspYyhnKSxpPVwiPHAgXCIrKFwiY2VudGVyXCI9PWcuZmxvYXRTdHlsZT8nc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXJcIiAnOlwiXCIpKyc+PGltZyBzcmM9XCInK2cuc3JjKydcIiAnKyhnLndpZHRoPyd3aWR0aD1cIicrZy53aWR0aCsnXCIgJzpcIlwiKSsoZy5fc3JjPycgX3NyYz1cIicrZy5fc3JjKydcIiAnOlwiXCIpKyhnLmhlaWdodD8nIGhlaWdodD1cIicrZy5oZWlnaHQrJ1wiICc6XCJcIikrJyBzdHlsZT1cIicrKGcuZmxvYXRTdHlsZSYmXCJjZW50ZXJcIiE9Zy5mbG9hdFN0eWxlP1wiZmxvYXQ6XCIrZy5mbG9hdFN0eWxlK1wiO1wiOlwiXCIpKyhnLmJvcmRlcnx8XCJcIikrJ1wiICcrKGcudGl0bGU/JyB0aXRsZT1cIicrZy50aXRsZSsnXCInOlwiXCIpK1wiIC8+PC9wPlwiLGgucHVzaChpKTtkLmV4ZWNDb21tYW5kKFwiaW5zZXJ0SHRtbFwiLGguam9pbihcIlwiKSl9ZWxzZXt2YXIgaz1iLnNoaWZ0KCksbD1rLmZsb2F0U3R5bGU7ZGVsZXRlIGsuZmxvYXRTdHlsZSxkb21VdGlscy5zZXRBdHRyaWJ1dGVzKGYsayksZC5leGVjQ29tbWFuZChcImltYWdlZmxvYXRcIixsKSxiLmxlbmd0aD4wJiYoZS5zZXRTdGFydEFmdGVyKGYpLnNldEN1cnNvcighMSwhMCksZC5leGVjQ29tbWFuZChcImluc2VydGltYWdlXCIsYikpfWQuZmlyZUV2ZW50KFwiYWZ0ZXJpbnNlcnRpbWFnZVwiLGIpfX19fSxVRS5wbHVnaW5zLmp1c3RpZnk9ZnVuY3Rpb24oKXt2YXIgYT1kb21VdGlscy5pc0Jsb2NrRWxtLGI9e2xlZnQ6MSxyaWdodDoxLGNlbnRlcjoxLGp1c3RpZnk6MX0sYz1mdW5jdGlvbihiLGMpe3ZhciBkPWIuY3JlYXRlQm9va21hcmsoKSxlPWZ1bmN0aW9uKGEpe3JldHVybiAxPT1hLm5vZGVUeXBlP1wiYnJcIiE9YS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJiFkb21VdGlscy5pc0Jvb2ttYXJrTm9kZShhKTohZG9tVXRpbHMuaXNXaGl0ZXNwYWNlKGEpfTtiLmVubGFyZ2UoITApO2Zvcih2YXIgZixnPWIuY3JlYXRlQm9va21hcmsoKSxoPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKGcuc3RhcnQsITEsZSksaT1iLmNsb25lUmFuZ2UoKTtoJiYhKGRvbVV0aWxzLmdldFBvc2l0aW9uKGgsZy5lbmQpJmRvbVV0aWxzLlBPU0lUSU9OX0ZPTExPV0lORyk7KWlmKDMhPWgubm9kZVR5cGUmJmEoaCkpaD1kb21VdGlscy5nZXROZXh0RG9tTm9kZShoLCEwLGUpO2Vsc2V7Zm9yKGkuc2V0U3RhcnRCZWZvcmUoaCk7aCYmaCE9PWcuZW5kJiYhYShoKTspZj1oLGg9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoaCwhMSxudWxsLGZ1bmN0aW9uKGIpe3JldHVybiFhKGIpfSk7aS5zZXRFbmRBZnRlcihmKTt2YXIgaj1pLmdldENvbW1vbkFuY2VzdG9yKCk7aWYoIWRvbVV0aWxzLmlzQm9keShqKSYmYShqKSlkb21VdGlscy5zZXRTdHlsZXMoaix1dGlscy5pc1N0cmluZyhjKT97XCJ0ZXh0LWFsaWduXCI6Y306YyksaD1qO2Vsc2V7dmFyIGs9Yi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtkb21VdGlscy5zZXRTdHlsZXMoayx1dGlscy5pc1N0cmluZyhjKT97XCJ0ZXh0LWFsaWduXCI6Y306Yyk7dmFyIGw9aS5leHRyYWN0Q29udGVudHMoKTtrLmFwcGVuZENoaWxkKGwpLGkuaW5zZXJ0Tm9kZShrKSxoPWt9aD1kb21VdGlscy5nZXROZXh0RG9tTm9kZShoLCExLGUpfXJldHVybiBiLm1vdmVUb0Jvb2ttYXJrKGcpLm1vdmVUb0Jvb2ttYXJrKGQpfTtVRS5jb21tYW5kcy5qdXN0aWZ5PXtleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIpe3ZhciBkLGU9dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtyZXR1cm4gZS5jb2xsYXBzZWQmJihkPXRoaXMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJwXCIpLGUuaW5zZXJ0Tm9kZShkKSksYyhlLGIpLGQmJihlLnNldFN0YXJ0QmVmb3JlKGQpLmNvbGxhcHNlKCEwKSxkb21VdGlscy5yZW1vdmUoZCkpLGUuc2VsZWN0KCksITB9LHF1ZXJ5Q29tbWFuZFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zZWxlY3Rpb24uZ2V0U3RhcnQoKSxjPWRvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoYSxcInRleHQtYWxpZ25cIik7cmV0dXJuIGJbY10/YzpcImxlZnRcIn0scXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGlvbi5nZXRTdGFydCgpLGI9YSYmZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShhLFtcInRkXCIsXCJ0aFwiLFwiY2FwdGlvblwiXSwhMCk7cmV0dXJuIGI/LTE6MH19fSxVRS5wbHVnaW5zLmZvbnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2Zvcih2YXIgYjsoYj1hLnBhcmVudE5vZGUpJiZcIlNQQU5cIj09Yi50YWdOYW1lJiYxPT1kb21VdGlscy5nZXRDaGlsZENvdW50KGIsZnVuY3Rpb24oYSl7cmV0dXJuIWRvbVV0aWxzLmlzQm9va21hcmtOb2RlKGEpJiYhZG9tVXRpbHMuaXNCcihhKX0pOyliLnN0eWxlLmNzc1RleHQrPWEuc3R5bGUuY3NzVGV4dCxkb21VdGlscy5yZW1vdmUoYSwhMCksYT1ifWZ1bmN0aW9uIGIoYSxiLGMpe2lmKGdbYl0mJihhLmFkanVzdG1lbnRCb3VuZGFyeSgpLCFhLmNvbGxhcHNlZCYmMT09YS5zdGFydENvbnRhaW5lci5ub2RlVHlwZSkpe3ZhciBkPWEuc3RhcnRDb250YWluZXIuY2hpbGROb2Rlc1thLnN0YXJ0T2Zmc2V0XTtpZihkJiZkb21VdGlscy5pc1RhZ05vZGUoZCxcInNwYW5cIikpe3ZhciBlPWEuY3JlYXRlQm9va21hcmsoKTt1dGlscy5lYWNoKGRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGQsXCJzcGFuXCIpLGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmIWRvbVV0aWxzLmlzQm9va21hcmtOb2RlKGEpJiYoXCJiYWNrY29sb3JcIj09YiYmZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShhLFwiYmFja2dyb3VuZC1jb2xvclwiKS50b0xvd2VyQ2FzZSgpPT09Y3x8KGRvbVV0aWxzLnJlbW92ZVN0eWxlKGEsZ1tiXSksMD09YS5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoL15cXHMrJC8sXCJcIikubGVuZ3RoJiZkb21VdGlscy5yZW1vdmUoYSwhMCkpKX0pLGEubW92ZVRvQm9va21hcmsoZSl9fX1mdW5jdGlvbiBjKGMsZCxlKXt2YXIgZixnPWMuY29sbGFwc2VkLGg9Yy5jcmVhdGVCb29rbWFyaygpO2lmKGcpZm9yKGY9aC5zdGFydC5wYXJlbnROb2RlO2R0ZC4kaW5saW5lW2YudGFnTmFtZV07KWY9Zi5wYXJlbnROb2RlO2Vsc2UgZj1kb21VdGlscy5nZXRDb21tb25BbmNlc3RvcihoLnN0YXJ0LGguZW5kKTt1dGlscy5lYWNoKGRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGYsXCJzcGFuXCIpLGZ1bmN0aW9uKGIpe2lmKGIucGFyZW50Tm9kZSYmIWRvbVV0aWxzLmlzQm9va21hcmtOb2RlKGIpKXtpZigvXFxzKmJvcmRlclxccyo6XFxzKm5vbmU7P1xccyovaS50ZXN0KGIuc3R5bGUuY3NzVGV4dCkpcmV0dXJuIHZvaWQoL15cXHMqYm9yZGVyXFxzKjpcXHMqbm9uZTs/XFxzKiQvLnRlc3QoYi5zdHlsZS5jc3NUZXh0KT9kb21VdGlscy5yZW1vdmUoYiwhMCk6ZG9tVXRpbHMucmVtb3ZlU3R5bGUoYixcImJvcmRlclwiKSk7aWYoL2JvcmRlci9pLnRlc3QoYi5zdHlsZS5jc3NUZXh0KSYmXCJTUEFOXCI9PWIucGFyZW50Tm9kZS50YWdOYW1lJiYvYm9yZGVyL2kudGVzdChiLnBhcmVudE5vZGUuc3R5bGUuY3NzVGV4dCkmJihiLnN0eWxlLmNzc1RleHQ9Yi5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoL2JvcmRlclteOl0qOlteO10rOz8vZ2ksXCJcIikpLFwiZm9udGJvcmRlclwiIT1kfHxcIm5vbmVcIiE9ZSlmb3IodmFyIGM9Yi5uZXh0U2libGluZztjJiYxPT1jLm5vZGVUeXBlJiZcIlNQQU5cIj09Yy50YWdOYW1lOylpZihkb21VdGlscy5pc0Jvb2ttYXJrTm9kZShjKSYmXCJmb250Ym9yZGVyXCI9PWQpYi5hcHBlbmRDaGlsZChjKSxjPWIubmV4dFNpYmxpbmc7ZWxzZXtpZihjLnN0eWxlLmNzc1RleHQ9PWIuc3R5bGUuY3NzVGV4dCYmKGRvbVV0aWxzLm1vdmVDaGlsZChjLGIpLGRvbVV0aWxzLnJlbW92ZShjKSksYi5uZXh0U2libGluZz09PWMpYnJlYWs7Yz1iLm5leHRTaWJsaW5nfWlmKGEoYiksYnJvd3Nlci5pZSYmYnJvd3Nlci52ZXJzaW9uPjgpe3ZhciBmPWRvbVV0aWxzLmZpbmRQYXJlbnQoYixmdW5jdGlvbihhKXtyZXR1cm5cIlNQQU5cIj09YS50YWdOYW1lJiYvYmFja2dyb3VuZC1jb2xvci8udGVzdChhLnN0eWxlLmNzc1RleHQpfSk7ZiYmIS9iYWNrZ3JvdW5kLWNvbG9yLy50ZXN0KGIuc3R5bGUuY3NzVGV4dCkmJihiLnN0eWxlLmJhY2tncm91bmRDb2xvcj1mLnN0eWxlLmJhY2tncm91bmRDb2xvcil9fX0pLGMubW92ZVRvQm9va21hcmsoaCksYihjLGQsZSl9dmFyIGQ9dGhpcyxlPXtmb3JlY29sb3I6XCJjb2xvclwiLGJhY2tjb2xvcjpcImJhY2tncm91bmQtY29sb3JcIixmb250c2l6ZTpcImZvbnQtc2l6ZVwiLGZvbnRmYW1pbHk6XCJmb250LWZhbWlseVwiLHVuZGVybGluZTpcInRleHQtZGVjb3JhdGlvblwiLHN0cmlrZXRocm91Z2g6XCJ0ZXh0LWRlY29yYXRpb25cIixmb250Ym9yZGVyOlwiYm9yZGVyXCJ9LGY9e3VuZGVybGluZToxLHN0cmlrZXRocm91Z2g6MSxmb250Ym9yZGVyOjF9LGc9e2ZvcmVjb2xvcjpcImNvbG9yXCIsYmFja2NvbG9yOlwiYmFja2dyb3VuZC1jb2xvclwiLGZvbnRzaXplOlwiZm9udC1zaXplXCIsZm9udGZhbWlseTpcImZvbnQtZmFtaWx5XCJ9O2Quc2V0T3B0KHtmb250ZmFtaWx5Olt7bmFtZTpcInNvbmd0aVwiLHZhbDpcIuWui+S9kyxTaW1TdW5cIn0se25hbWU6XCJ5YWhlaVwiLHZhbDpcIuW+rui9r+mbhem7kSxNaWNyb3NvZnQgWWFIZWlcIn0se25hbWU6XCJrYWl0aVwiLHZhbDpcIualt+S9kyzmpbfkvZNfR0IyMzEyLCBTaW1LYWlcIn0se25hbWU6XCJoZWl0aVwiLHZhbDpcIum7keS9kywgU2ltSGVpXCJ9LHtuYW1lOlwibGlzaHVcIix2YWw6XCLpmrbkuaYsIFNpbUxpXCJ9LHtuYW1lOlwiYW5kYWxlTW9ub1wiLHZhbDpcImFuZGFsZSBtb25vXCJ9LHtuYW1lOlwiYXJpYWxcIix2YWw6XCJhcmlhbCwgaGVsdmV0aWNhLHNhbnMtc2VyaWZcIn0se25hbWU6XCJhcmlhbEJsYWNrXCIsdmFsOlwiYXJpYWwgYmxhY2ssYXZhbnQgZ2FyZGVcIn0se25hbWU6XCJjb21pY1NhbnNNc1wiLHZhbDpcImNvbWljIHNhbnMgbXNcIn0se25hbWU6XCJpbXBhY3RcIix2YWw6XCJpbXBhY3QsY2hpY2Fnb1wifSx7bmFtZTpcInRpbWVzTmV3Um9tYW5cIix2YWw6XCJ0aW1lcyBuZXcgcm9tYW5cIn1dLGZvbnRzaXplOlsxMCwxMSwxMiwxNCwxNiwxOCwyMCwyNCwzNl19KSxkLmFkZElucHV0UnVsZShmdW5jdGlvbihhKXt1dGlscy5lYWNoKGEuZ2V0Tm9kZXNCeVRhZ05hbWUoXCJ1IHMgZGVsIGZvbnQgc3RyaWtlXCIpLGZ1bmN0aW9uKGEpe2lmKFwiZm9udFwiPT1hLnRhZ05hbWUpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhLmF0dHJzKXN3aXRjaChjKXtjYXNlXCJzaXplXCI6Yi5wdXNoKFwiZm9udC1zaXplOlwiKyh7MTpcIjEwXCIsMjpcIjEyXCIsMzpcIjE2XCIsNDpcIjE4XCIsNTpcIjI0XCIsNjpcIjMyXCIsNzpcIjQ4XCJ9W2EuYXR0cnNbY11dfHxhLmF0dHJzW2NdKStcInB4XCIpO2JyZWFrO2Nhc2VcImNvbG9yXCI6Yi5wdXNoKFwiY29sb3I6XCIrYS5hdHRyc1tjXSk7YnJlYWs7Y2FzZVwiZmFjZVwiOmIucHVzaChcImZvbnQtZmFtaWx5OlwiK2EuYXR0cnNbY10pO2JyZWFrO2Nhc2VcInN0eWxlXCI6Yi5wdXNoKGEuYXR0cnNbY10pfWEuYXR0cnM9e3N0eWxlOmIuam9pbihcIjtcIil9fWVsc2V7dmFyIGQ9XCJ1XCI9PWEudGFnTmFtZT9cInVuZGVybGluZVwiOlwibGluZS10aHJvdWdoXCI7YS5hdHRycz17c3R5bGU6KGEuZ2V0QXR0cihcInN0eWxlXCIpfHxcIlwiKStcInRleHQtZGVjb3JhdGlvbjpcIitkK1wiO1wifX1hLnRhZ05hbWU9XCJzcGFuXCJ9KX0pO2Zvcih2YXIgaCBpbiBlKSFmdW5jdGlvbihhLGIpe1VFLmNvbW1hbmRzW2FdPXtleGVjQ29tbWFuZDpmdW5jdGlvbihkLGUpe2U9ZXx8KHRoaXMucXVlcnlDb21tYW5kU3RhdGUoZCk/XCJub25lXCI6XCJ1bmRlcmxpbmVcIj09ZD9cInVuZGVybGluZVwiOlwiZm9udGJvcmRlclwiPT1kP1wiMXB4IHNvbGlkICMwMDBcIjpcImxpbmUtdGhyb3VnaFwiKTt2YXIgZyxoPXRoaXMsaT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKFwiZGVmYXVsdFwiPT1lKWkuY29sbGFwc2VkJiYoZz1oLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiZm9udFwiKSxpLmluc2VydE5vZGUoZykuc2VsZWN0KCkpLGguZXhlY0NvbW1hbmQoXCJyZW1vdmVGb3JtYXRcIixcInNwYW4sYVwiLGIpLGcmJihpLnNldFN0YXJ0QmVmb3JlKGcpLmNvbGxhcHNlKCEwKSxkb21VdGlscy5yZW1vdmUoZykpLGMoaSxkLGUpLGkuc2VsZWN0KCk7ZWxzZSBpZihpLmNvbGxhcHNlZCl7dmFyIGo9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShpLnN0YXJ0Q29udGFpbmVyLFwic3BhblwiLCEwKTtpZihnPWguZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJmb250XCIpLCFqfHxqLmNoaWxkcmVuLmxlbmd0aHx8alticm93c2VyLmllP1wiaW5uZXJUZXh0XCI6XCJ0ZXh0Q29udGVudFwiXS5yZXBsYWNlKGZpbGxDaGFyUmVnLFwiXCIpLmxlbmd0aCl7aWYoaS5pbnNlcnROb2RlKGcpLGkuc2VsZWN0Tm9kZShnKS5zZWxlY3QoKSxqPWkuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksZlthXSl7aWYoZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShnLFwiYVwiLCEwKSlyZXR1cm4gaS5zZXRTdGFydEJlZm9yZShnKS5zZXRDdXJzb3IoKSx2b2lkIGRvbVV0aWxzLnJlbW92ZShnKTtoLmV4ZWNDb21tYW5kKFwicmVtb3ZlRm9ybWF0XCIsXCJzcGFuLGFcIixiKX1pZihqLnN0eWxlLmNzc1RleHQ9YitcIjpcIitlLGcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaixnKSwhYnJvd3Nlci5pZXx8YnJvd3Nlci5pZSYmOT09YnJvd3Nlci52ZXJzaW9uKWZvcih2YXIgaz1qLnBhcmVudE5vZGU7IWRvbVV0aWxzLmlzQmxvY2tFbG0oayk7KVwiU1BBTlwiPT1rLnRhZ05hbWUmJihqLnN0eWxlLmNzc1RleHQ9ay5zdHlsZS5jc3NUZXh0K1wiO1wiK2ouc3R5bGUuY3NzVGV4dCksaz1rLnBhcmVudE5vZGU7b3BlcmE/c2V0VGltZW91dChmdW5jdGlvbigpe2kuc2V0U3RhcnQoaiwwKS5jb2xsYXBzZSghMCksYyhpLGQsZSksaS5zZWxlY3QoKX0pOihpLnNldFN0YXJ0KGosMCkuY29sbGFwc2UoITApLGMoaSxkLGUpLGkuc2VsZWN0KCkpfWVsc2UgaS5pbnNlcnROb2RlKGcpLGZbYV0mJihpLnNlbGVjdE5vZGUoZykuc2VsZWN0KCksaC5leGVjQ29tbWFuZChcInJlbW92ZUZvcm1hdFwiLFwic3BhbixhXCIsYixudWxsKSxqPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZyxcInNwYW5cIiwhMCksaS5zZXRTdGFydEJlZm9yZShnKSksaiYmKGouc3R5bGUuY3NzVGV4dCs9XCI7XCIrYitcIjpcIitlKSxpLmNvbGxhcHNlKCEwKS5zZWxlY3QoKTtkb21VdGlscy5yZW1vdmUoZyl9ZWxzZSBmW2FdJiZoLnF1ZXJ5Q29tbWFuZFZhbHVlKGEpJiZoLmV4ZWNDb21tYW5kKFwicmVtb3ZlRm9ybWF0XCIsXCJzcGFuLGFcIixiKSxpPWguc2VsZWN0aW9uLmdldFJhbmdlKCksaS5hcHBseUlubGluZVN0eWxlKFwic3BhblwiLHtzdHlsZTpiK1wiOlwiK2V9KSxjKGksZCxlKSxpLnNlbGVjdCgpO3JldHVybiEwfSxxdWVyeUNvbW1hbmRWYWx1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnNlbGVjdGlvbi5nZXRTdGFydCgpO2lmKFwidW5kZXJsaW5lXCI9PWF8fFwic3RyaWtldGhyb3VnaFwiPT1hKXtmb3IodmFyIGQsZT1jO2UmJiFkb21VdGlscy5pc0Jsb2NrRWxtKGUpJiYhZG9tVXRpbHMuaXNCb2R5KGUpOyl7aWYoMT09ZS5ub2RlVHlwZSYmKGQ9ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShlLGIpLFwibm9uZVwiIT1kKSlyZXR1cm4gZDtlPWUucGFyZW50Tm9kZX1yZXR1cm5cIm5vbmVcIn1pZihcImZvbnRib3JkZXJcIj09YSl7Zm9yKHZhciBmLGc9YztnJiZkdGQuJGlubGluZVtnLnRhZ05hbWVdOyl7aWYoKGY9ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShnLFwiYm9yZGVyXCIpKSYmLzFweC8udGVzdChmKSYmL3NvbGlkLy50ZXN0KGYpKXJldHVybiBmO2c9Zy5wYXJlbnROb2RlfXJldHVyblwiXCJ9aWYoXCJGb250U2l6ZVwiPT1hKXt2YXIgaD1kb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGMsYiksZz0vXihbXFxkXFwuXSspKFxcdyspJC8uZXhlYyhoKTtyZXR1cm4gZz9NYXRoLmZsb29yKGdbMV0pK2dbMl06aH1yZXR1cm4gZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShjLGIpfSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbihhKXtpZighZlthXSlyZXR1cm4gMDt2YXIgYj10aGlzLnF1ZXJ5Q29tbWFuZFZhbHVlKGEpO3JldHVyblwiZm9udGJvcmRlclwiPT1hPy8xcHgvLnRlc3QoYikmJi9zb2xpZC8udGVzdChiKTpcInVuZGVybGluZVwiPT1hPy91bmRlcmxpbmUvLnRlc3QoYik6L2xpbmVcXC10aHJvdWdoLy50ZXN0KGIpfX19KGgsZVtoXSl9LFVFLnBsdWdpbnMubGluaz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9YS5zdGFydENvbnRhaW5lcixjPWEuZW5kQ29udGFpbmVyOyhiPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoYixcImFcIiwhMCkpJiZhLnNldFN0YXJ0QmVmb3JlKGIpLChjPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoYyxcImFcIiwhMCkpJiZhLnNldEVuZEFmdGVyKGMpfWZ1bmN0aW9uIGIoYixjLGQpe3ZhciBlPWIuY2xvbmVSYW5nZSgpLGY9ZC5xdWVyeUNvbW1hbmRWYWx1ZShcImxpbmtcIik7YShiPWIuYWRqdXN0bWVudEJvdW5kYXJ5KCkpO3ZhciBnPWIuc3RhcnRDb250YWluZXI7aWYoMT09Zy5ub2RlVHlwZSYmZiYmKGc9Zy5jaGlsZE5vZGVzW2Iuc3RhcnRPZmZzZXRdLGcmJjE9PWcubm9kZVR5cGUmJlwiQVwiPT1nLnRhZ05hbWUmJi9eKD86aHR0cHM/fGZ0cHxmaWxlKVxccyo6XFxzKlxcL1xcLy8udGVzdChnW2Jyb3dzZXIuaWU/XCJpbm5lclRleHRcIjpcInRleHRDb250ZW50XCJdKSYmKGdbYnJvd3Nlci5pZT9cImlubmVyVGV4dFwiOlwidGV4dENvbnRlbnRcIl09dXRpbHMuaHRtbChjLnRleHRWYWx1ZXx8Yy5ocmVmKSkpLGUuY29sbGFwc2VkJiYhZnx8KGIucmVtb3ZlSW5saW5lU3R5bGUoXCJhXCIpLGU9Yi5jbG9uZVJhbmdlKCkpLGUuY29sbGFwc2VkKXt2YXIgaD1iLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLGk9XCJcIjtjLnRleHRWYWx1ZT8oaT11dGlscy5odG1sKGMudGV4dFZhbHVlKSxkZWxldGUgYy50ZXh0VmFsdWUpOmk9dXRpbHMuaHRtbChjLmhyZWYpLGRvbVV0aWxzLnNldEF0dHJpYnV0ZXMoaCxjKSxnPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZS5zdGFydENvbnRhaW5lcixcImFcIiwhMCksZyYmZG9tVXRpbHMuaXNJbk5vZGVFbmRCb3VuZGFyeShlLGcpJiZiLnNldFN0YXJ0QWZ0ZXIoZykuY29sbGFwc2UoITApLGhbYnJvd3Nlci5pZT9cImlubmVyVGV4dFwiOlwidGV4dENvbnRlbnRcIl09aSxiLmluc2VydE5vZGUoaCkuc2VsZWN0Tm9kZShoKX1lbHNlIGIuYXBwbHlJbmxpbmVTdHlsZShcImFcIixjKX1VRS5jb21tYW5kcy51bmxpbms9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKCl7dmFyIGIsYz10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2MuY29sbGFwc2VkJiYhZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShjLnN0YXJ0Q29udGFpbmVyLFwiYVwiLCEwKXx8KGI9Yy5jcmVhdGVCb29rbWFyaygpLGEoYyksYy5yZW1vdmVJbmxpbmVTdHlsZShcImFcIikubW92ZVRvQm9va21hcmsoYikuc2VsZWN0KCkpfSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiF0aGlzLmhpZ2hsaWdodCYmdGhpcy5xdWVyeUNvbW1hbmRWYWx1ZShcImxpbmtcIik/MDotMX19LFVFLmNvbW1hbmRzLmxpbms9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYyl7dmFyIGQ7Yy5faHJlZiYmKGMuX2hyZWY9dXRpbHMudW5odG1sKGMuX2hyZWYsL1s8XCI+XS9nKSksYy5ocmVmJiYoYy5ocmVmPXV0aWxzLnVuaHRtbChjLmhyZWYsL1s8XCI+XS9nKSksYy50ZXh0VmFsdWUmJihjLnRleHRWYWx1ZT11dGlscy51bmh0bWwoYy50ZXh0VmFsdWUsL1s8XCI+XS9nKSksYihkPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksYyx0aGlzKSxkLmNvbGxhcHNlKCkuc2VsZWN0KCEwKX0scXVlcnlDb21tYW5kVmFsdWU6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7aWYoIWIuY29sbGFwc2VkKXtiLnNocmlua0JvdW5kYXJ5KCk7dmFyIGM9MyE9Yi5zdGFydENvbnRhaW5lci5ub2RlVHlwZSYmYi5zdGFydENvbnRhaW5lci5jaGlsZE5vZGVzW2Iuc3RhcnRPZmZzZXRdP2Iuc3RhcnRDb250YWluZXIuY2hpbGROb2Rlc1tiLnN0YXJ0T2Zmc2V0XTpiLnN0YXJ0Q29udGFpbmVyLGQ9Mz09Yi5lbmRDb250YWluZXIubm9kZVR5cGV8fDA9PWIuZW5kT2Zmc2V0P2IuZW5kQ29udGFpbmVyOmIuZW5kQ29udGFpbmVyLmNoaWxkTm9kZXNbYi5lbmRPZmZzZXQtMV0sZT1iLmdldENvbW1vbkFuY2VzdG9yKCk7aWYoYT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGUsXCJhXCIsITApLCFhJiYxPT1lLm5vZGVUeXBlKWZvcih2YXIgZixnLGgsaT1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKSxqPTA7aD1pW2orK107KWlmKGY9ZG9tVXRpbHMuZ2V0UG9zaXRpb24oaCxjKSxnPWRvbVV0aWxzLmdldFBvc2l0aW9uKGgsZCksKGYmZG9tVXRpbHMuUE9TSVRJT05fRk9MTE9XSU5HfHxmJmRvbVV0aWxzLlBPU0lUSU9OX0NPTlRBSU5TKSYmKGcmZG9tVXRpbHMuUE9TSVRJT05fUFJFQ0VESU5HfHxnJmRvbVV0aWxzLlBPU0lUSU9OX0NPTlRBSU5TKSl7YT1oO2JyZWFrfXJldHVybiBhfWlmKGE9Yi5zdGFydENvbnRhaW5lcixhPTE9PWEubm9kZVR5cGU/YTphLnBhcmVudE5vZGUsYSYmKGE9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShhLFwiYVwiLCEwKSkmJiFkb21VdGlscy5pc0luTm9kZUVuZEJvdW5kYXJ5KGIsYSkpcmV0dXJuIGF9LHF1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5nZXRDbG9zZWROb2RlKCksYj1hJiYoXCJlZHVpLWZha2VkLXZpZGVvXCI9PWEuY2xhc3NOYW1lfHxhLmNsYXNzTmFtZS5pbmRleE9mKFwiZWR1aS11cGxvYWQtdmlkZW9cIikhPS0xKTtyZXR1cm4gYj8tMTowfX19LFVFLnBsdWdpbnMuaW5zZXJ0ZnJhbWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7Yi5faWZyYW1lJiZkZWxldGUgYi5faWZyYW1lfXZhciBiPXRoaXM7Yi5hZGRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKCl7YSgpfSl9LFVFLmNvbW1hbmRzLnNjcmF3bD17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gYnJvd3Nlci5pZSYmYnJvd3Nlci52ZXJzaW9uPD04Py0xOjB9fSxVRS5wbHVnaW5zLnJlbW92ZWZvcm1hdD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5zZXRPcHQoe3JlbW92ZUZvcm1hdFRhZ3M6XCJiLGJpZyxjb2RlLGRlbCxkZm4sZW0sZm9udCxpLGlucyxrYmQscSxzYW1wLHNtYWxsLHNwYW4sc3RyaWtlLHN0cm9uZyxzdWIsc3VwLHR0LHUsdmFyXCIscmVtb3ZlRm9ybWF0QXR0cmlidXRlczpcImNsYXNzLHN0eWxlLGxhbmcsd2lkdGgsaGVpZ2h0LGFsaWduLGhzcGFjZSx2YWxpZ25cIn0pLGEuY29tbWFuZHMucmVtb3ZlZm9ybWF0PXtleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIsYyxkLGUpe2Z1bmN0aW9uIGYoYSl7aWYoMz09YS5ub2RlVHlwZXx8XCJzcGFuXCIhPWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiAwO2lmKGJyb3dzZXIuaWUpe3ZhciBiPWEuYXR0cmlidXRlcztpZihiLmxlbmd0aCl7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWlmKGJbY10uc3BlY2lmaWVkKXJldHVybiAwO3JldHVybiAxfX1yZXR1cm4hYS5hdHRyaWJ1dGVzLmxlbmd0aH1mdW5jdGlvbiBnKGEpe3ZhciBiPWEuY3JlYXRlQm9va21hcmsoKTtpZihhLmNvbGxhcHNlZCYmYS5lbmxhcmdlKCEwKSwhZSl7dmFyIGQ9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShhLnN0YXJ0Q29udGFpbmVyLFwiYVwiLCEwKTtkJiZhLnNldFN0YXJ0QmVmb3JlKGQpLGQ9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShhLmVuZENvbnRhaW5lcixcImFcIiwhMCksZCYmYS5zZXRFbmRBZnRlcihkKX1mb3IoaD1hLmNyZWF0ZUJvb2ttYXJrKCkscD1oLnN0YXJ0OyhpPXAucGFyZW50Tm9kZSkmJiFkb21VdGlscy5pc0Jsb2NrRWxtKGkpOylkb21VdGlscy5icmVha1BhcmVudChwLGkpLGRvbVV0aWxzLmNsZWFyRW1wdHlTaWJsaW5nKHApO2lmKGguZW5kKXtmb3IocD1oLmVuZDsoaT1wLnBhcmVudE5vZGUpJiYhZG9tVXRpbHMuaXNCbG9ja0VsbShpKTspZG9tVXRpbHMuYnJlYWtQYXJlbnQocCxpKSxkb21VdGlscy5jbGVhckVtcHR5U2libGluZyhwKTtmb3IodmFyIGcsbD1kb21VdGlscy5nZXROZXh0RG9tTm9kZShoLnN0YXJ0LCExLG0pO2wmJmwhPWguZW5kOylnPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKGwsITAsbSksZHRkLiRlbXB0eVtsLnRhZ05hbWUudG9Mb3dlckNhc2UoKV18fGRvbVV0aWxzLmlzQm9va21hcmtOb2RlKGwpfHwoai50ZXN0KGwudGFnTmFtZSk/Yz8oZG9tVXRpbHMucmVtb3ZlU3R5bGUobCxjKSxmKGwpJiZcInRleHQtZGVjb3JhdGlvblwiIT1jJiZkb21VdGlscy5yZW1vdmUobCwhMCkpOmRvbVV0aWxzLnJlbW92ZShsLCEwKTpkdGQuJHRhYmxlQ29udGVudFtsLnRhZ05hbWVdfHxkdGQuJGxpc3RbbC50YWdOYW1lXXx8KGRvbVV0aWxzLnJlbW92ZUF0dHJpYnV0ZXMobCxrKSxmKGwpJiZkb21VdGlscy5yZW1vdmUobCwhMCkpKSxsPWd9dmFyIG49aC5zdGFydC5wYXJlbnROb2RlOyFkb21VdGlscy5pc0Jsb2NrRWxtKG4pfHxkdGQuJHRhYmxlQ29udGVudFtuLnRhZ05hbWVdfHxkdGQuJGxpc3Rbbi50YWdOYW1lXXx8ZG9tVXRpbHMucmVtb3ZlQXR0cmlidXRlcyhuLGspLG49aC5lbmQucGFyZW50Tm9kZSxoLmVuZCYmZG9tVXRpbHMuaXNCbG9ja0VsbShuKSYmIWR0ZC4kdGFibGVDb250ZW50W24udGFnTmFtZV0mJiFkdGQuJGxpc3Rbbi50YWdOYW1lXSYmZG9tVXRpbHMucmVtb3ZlQXR0cmlidXRlcyhuLGspLGEubW92ZVRvQm9va21hcmsoaCkubW92ZVRvQm9va21hcmsoYik7Zm9yKHZhciBvLHA9YS5zdGFydENvbnRhaW5lcixxPWEuY29sbGFwc2VkOzE9PXAubm9kZVR5cGUmJmRvbVV0aWxzLmlzRW1wdHlOb2RlKHApJiZkdGQuJHJlbW92ZUVtcHR5W3AudGFnTmFtZV07KW89cC5wYXJlbnROb2RlLGEuc2V0U3RhcnRCZWZvcmUocCksYS5zdGFydENvbnRhaW5lcj09PWEuZW5kQ29udGFpbmVyJiZhLmVuZE9mZnNldC0tLGRvbVV0aWxzLnJlbW92ZShwKSxwPW87aWYoIXEpZm9yKHA9YS5lbmRDb250YWluZXI7MT09cC5ub2RlVHlwZSYmZG9tVXRpbHMuaXNFbXB0eU5vZGUocCkmJmR0ZC4kcmVtb3ZlRW1wdHlbcC50YWdOYW1lXTspbz1wLnBhcmVudE5vZGUsYS5zZXRFbmRCZWZvcmUocCksZG9tVXRpbHMucmVtb3ZlKHApLHA9b312YXIgaCxpLGo9bmV3IFJlZ0V4cChcIl4oPzpcIisoYnx8dGhpcy5vcHRpb25zLnJlbW92ZUZvcm1hdFRhZ3MpLnJlcGxhY2UoLywvZyxcInxcIikrXCIpJFwiLFwiaVwiKSxrPWM/W106KGR8fHRoaXMub3B0aW9ucy5yZW1vdmVGb3JtYXRBdHRyaWJ1dGVzKS5zcGxpdChcIixcIiksbD1uZXcgZG9tLlJhbmdlKHRoaXMuZG9jdW1lbnQpLG09ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PWEubm9kZVR5cGV9O2w9dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxnKGwpLGwuc2VsZWN0KCl9fX0sVUUucGx1Z2lucy5ibG9ja3F1b3RlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gZG9tVXRpbHMuZmlsdGVyTm9kZUxpc3QoYS5zZWxlY3Rpb24uZ2V0U3RhcnRFbGVtZW50UGF0aCgpLFwiYmxvY2txdW90ZVwiKX12YXIgYj10aGlzO2IuY29tbWFuZHMuYmxvY2txdW90ZT17ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGU9YSh0aGlzKSxmPWR0ZC5ibG9ja3F1b3RlLGc9ZC5jcmVhdGVCb29rbWFyaygpO2lmKGUpe3ZhciBoPWQuc3RhcnRDb250YWluZXIsaT1kb21VdGlscy5pc0Jsb2NrRWxtKGgpP2g6ZG9tVXRpbHMuZmluZFBhcmVudChoLGZ1bmN0aW9uKGEpe3JldHVybiBkb21VdGlscy5pc0Jsb2NrRWxtKGEpfSksaj1kLmVuZENvbnRhaW5lcixrPWRvbVV0aWxzLmlzQmxvY2tFbG0oaik/ajpkb21VdGlscy5maW5kUGFyZW50KGosZnVuY3Rpb24oYSl7cmV0dXJuIGRvbVV0aWxzLmlzQmxvY2tFbG0oYSl9KTtpPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoaSxcImxpXCIsITApfHxpLGs9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShrLFwibGlcIiwhMCl8fGssXCJMSVwiPT1pLnRhZ05hbWV8fFwiVERcIj09aS50YWdOYW1lfHxpPT09ZXx8ZG9tVXRpbHMuaXNCb2R5KGkpP2RvbVV0aWxzLnJlbW92ZShlLCEwKTpkb21VdGlscy5icmVha1BhcmVudChpLGUpLGkhPT1rJiYoZT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGssXCJibG9ja3F1b3RlXCIpLGUmJihcIkxJXCI9PWsudGFnTmFtZXx8XCJURFwiPT1rLnRhZ05hbWV8fGRvbVV0aWxzLmlzQm9keShrKT9lLnBhcmVudE5vZGUmJmRvbVV0aWxzLnJlbW92ZShlLCEwKTpkb21VdGlscy5icmVha1BhcmVudChrLGUpKSk7Zm9yKHZhciBsLG09ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGhpcy5kb2N1bWVudCxcImJsb2NrcXVvdGVcIiksbj0wO2w9bVtuKytdOylsLmNoaWxkTm9kZXMubGVuZ3RoP2RvbVV0aWxzLmdldFBvc2l0aW9uKGwsaSkmZG9tVXRpbHMuUE9TSVRJT05fRk9MTE9XSU5HJiZkb21VdGlscy5nZXRQb3NpdGlvbihsLGspJmRvbVV0aWxzLlBPU0lUSU9OX1BSRUNFRElORyYmZG9tVXRpbHMucmVtb3ZlKGwsITApOmRvbVV0aWxzLnJlbW92ZShsKX1lbHNle2Zvcih2YXIgbz1kLmNsb25lUmFuZ2UoKSxwPTE9PW8uc3RhcnRDb250YWluZXIubm9kZVR5cGU/by5zdGFydENvbnRhaW5lcjpvLnN0YXJ0Q29udGFpbmVyLnBhcmVudE5vZGUscT1wLHI9MTs7KXtpZihkb21VdGlscy5pc0JvZHkocCkpe3EhPT1wP2QuY29sbGFwc2VkPyhvLnNlbGVjdE5vZGUocSkscj0wKTpvLnNldFN0YXJ0QmVmb3JlKHEpOm8uc2V0U3RhcnQocCwwKTticmVha31pZighZltwLnRhZ05hbWVdKXtkLmNvbGxhcHNlZD9vLnNlbGVjdE5vZGUocSk6by5zZXRTdGFydEJlZm9yZShxKTticmVha31xPXAscD1wLnBhcmVudE5vZGV9aWYocilmb3IocT1wPXA9MT09by5lbmRDb250YWluZXIubm9kZVR5cGU/by5lbmRDb250YWluZXI6by5lbmRDb250YWluZXIucGFyZW50Tm9kZTs7KXtpZihkb21VdGlscy5pc0JvZHkocCkpe3EhPT1wP28uc2V0RW5kQWZ0ZXIocSk6by5zZXRFbmQocCxwLmNoaWxkTm9kZXMubGVuZ3RoKTticmVha31pZighZltwLnRhZ05hbWVdKXtvLnNldEVuZEFmdGVyKHEpO2JyZWFrfXE9cCxwPXAucGFyZW50Tm9kZX1wPWQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJsb2NrcXVvdGVcIiksZG9tVXRpbHMuc2V0QXR0cmlidXRlcyhwLGMpLHAuYXBwZW5kQ2hpbGQoby5leHRyYWN0Q29udGVudHMoKSksby5pbnNlcnROb2RlKHApO2Zvcih2YXIgcyx0PWRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKHAsXCJibG9ja3F1b3RlXCIpLG49MDtzPXRbbisrXTspcy5wYXJlbnROb2RlJiZkb21VdGlscy5yZW1vdmUocywhMCl9ZC5tb3ZlVG9Cb29rbWFyayhnKS5zZWxlY3QoKX0scXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKT8xOjB9fX0sVUUuY29tbWFuZHMudG91cHBlcmNhc2U9VUUuY29tbWFuZHMudG9sb3dlcmNhc2U9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKGMuY29sbGFwc2VkKXJldHVybiBjO2Zvcih2YXIgZD1jLmNyZWF0ZUJvb2ttYXJrKCksZT1kLmVuZCxmPWZ1bmN0aW9uKGEpe3JldHVybiFkb21VdGlscy5pc0JyKGEpJiYhZG9tVXRpbHMuaXNXaGl0ZXNwYWNlKGEpfSxnPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKGQuc3RhcnQsITEsZik7ZyYmZG9tVXRpbHMuZ2V0UG9zaXRpb24oZyxlKSZkb21VdGlscy5QT1NJVElPTl9QUkVDRURJTkcmJigzPT1nLm5vZGVUeXBlJiYoZy5ub2RlVmFsdWU9Zy5ub2RlVmFsdWVbXCJ0b3VwcGVyY2FzZVwiPT1hP1widG9VcHBlckNhc2VcIjpcInRvTG93ZXJDYXNlXCJdKCkpLGc9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoZywhMCxmKSxnIT09ZSk7KTtjLm1vdmVUb0Jvb2ttYXJrKGQpLnNlbGVjdCgpfX0sVUUuY29tbWFuZHMuaW5kZW50PXtleGVjQ29tbWFuZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiaW5kZW50XCIpP1wiMGVtXCI6YS5vcHRpb25zLmluZGVudFZhbHVlfHxcIjJlbVwiO2EuZXhlY0NvbW1hbmQoXCJQYXJhZ3JhcGhcIixcInBcIix7c3R5bGU6XCJ0ZXh0LWluZGVudDpcIitifSl9LHF1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ZG9tVXRpbHMuZmlsdGVyTm9kZUxpc3QodGhpcy5zZWxlY3Rpb24uZ2V0U3RhcnRFbGVtZW50UGF0aCgpLFwicCBoMSBoMiBoMyBoNCBoNSBoNlwiKTtyZXR1cm4gYSYmYS5zdHlsZS50ZXh0SW5kZW50JiZwYXJzZUludChhLnN0eWxlLnRleHRJbmRlbnQpPzE6MH19LFVFLmNvbW1hbmRzLnByaW50PXtleGVjQ29tbWFuZDpmdW5jdGlvbigpe3RoaXMud2luZG93LnByaW50KCl9LG5vdE5lZWRVbmRvOjF9LFVFLmNvbW1hbmRzLnByZXZpZXc9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKCl7dmFyIGE9d2luZG93Lm9wZW4oXCJcIixcIl9ibGFua1wiLFwiXCIpLGI9YS5kb2N1bWVudDtiLm9wZW4oKSxiLndyaXRlKCc8IURPQ1RZUEUgaHRtbD48aHRtbD48aGVhZD48bWV0YSBjaGFyc2V0PVwidXRmLThcIi8+PHNjcmlwdCBzcmM9XCInK3RoaXMub3B0aW9ucy5VRURJVE9SX0hPTUVfVVJMK1widWVkaXRvci5wYXJzZS5qc1xcXCI+PC9zY3JpcHQ+PHNjcmlwdD5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dVBhcnNlKCdkaXYnLHtyb290UGF0aDogJ1wiK3RoaXMub3B0aW9ucy5VRURJVE9SX0hPTUVfVVJMK1wiJ30pfSwzMDApPC9zY3JpcHQ+PC9oZWFkPjxib2R5PjxkaXY+XCIrdGhpcy5nZXRDb250ZW50KG51bGwsbnVsbCwhMCkrXCI8L2Rpdj48L2JvZHk+PC9odG1sPlwiKSxiLmNsb3NlKCl9LG5vdE5lZWRVbmRvOjF9LFVFLnBsdWdpbnMuc2VsZWN0YWxsPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNvbW1hbmRzLnNlbGVjdGFsbD17ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5ib2R5LGM9YS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtjLnNlbGVjdE5vZGVDb250ZW50cyhiKSxkb21VdGlscy5pc0VtcHR5QmxvY2soYikmJihicm93c2VyLm9wZXJhJiZiLmZpcnN0Q2hpbGQmJjE9PWIuZmlyc3RDaGlsZC5ub2RlVHlwZSYmYy5zZXRTdGFydEF0Rmlyc3QoYi5maXJzdENoaWxkKSxjLmNvbGxhcHNlKCEwKSksYy5zZWxlY3QoITApfSxub3ROZWVkVW5kbzoxfSxhLmFkZHNob3J0Y3V0a2V5KHtzZWxlY3RBbGw6XCJjdHJsKzY1XCJ9KX0sVUUucGx1Z2lucy5wYXJhZ3JhcGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9ZG9tVXRpbHMuaXNCbG9ja0VsbSxjPVtcIlREXCIsXCJMSVwiLFwiUFJFXCJdLGQ9ZnVuY3Rpb24oYSxkLGUsZil7dmFyIGcsaD1hLmNyZWF0ZUJvb2ttYXJrKCksaT1mdW5jdGlvbihhKXtyZXR1cm4gMT09YS5ub2RlVHlwZT9cImJyXCIhPWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYhZG9tVXRpbHMuaXNCb29rbWFya05vZGUoYSk6IWRvbVV0aWxzLmlzV2hpdGVzcGFjZShhKX07YS5lbmxhcmdlKCEwKTtmb3IodmFyIGosaz1hLmNyZWF0ZUJvb2ttYXJrKCksbD1kb21VdGlscy5nZXROZXh0RG9tTm9kZShrLnN0YXJ0LCExLGkpLG09YS5jbG9uZVJhbmdlKCk7bCYmIShkb21VdGlscy5nZXRQb3NpdGlvbihsLGsuZW5kKSZkb21VdGlscy5QT1NJVElPTl9GT0xMT1dJTkcpOylpZigzIT1sLm5vZGVUeXBlJiZiKGwpKWw9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUobCwhMCxpKTtlbHNle2ZvcihtLnNldFN0YXJ0QmVmb3JlKGwpO2wmJmwhPT1rLmVuZCYmIWIobCk7KWo9bCxsPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKGwsITEsbnVsbCxmdW5jdGlvbihhKXtyZXR1cm4hYihhKX0pO20uc2V0RW5kQWZ0ZXIoaiksZz1hLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCksZSYmKGRvbVV0aWxzLnNldEF0dHJpYnV0ZXMoZyxlKSxmJiZcImN1c3RvbXN0eWxlXCI9PWYmJmUuc3R5bGUmJihnLnN0eWxlLmNzc1RleHQ9ZS5zdHlsZSkpLGcuYXBwZW5kQ2hpbGQobS5leHRyYWN0Q29udGVudHMoKSksZG9tVXRpbHMuaXNFbXB0eU5vZGUoZykmJmRvbVV0aWxzLmZpbGxDaGFyKGEuZG9jdW1lbnQsZyksbS5pbnNlcnROb2RlKGcpO3ZhciBuPWcucGFyZW50Tm9kZTtiKG4pJiYhZG9tVXRpbHMuaXNCb2R5KGcucGFyZW50Tm9kZSkmJnV0aWxzLmluZGV4T2YoYyxuLnRhZ05hbWUpPT0tMSYmKGYmJlwiY3VzdG9tc3R5bGVcIj09Znx8KG4uZ2V0QXR0cmlidXRlKFwiZGlyXCIpJiZnLnNldEF0dHJpYnV0ZShcImRpclwiLG4uZ2V0QXR0cmlidXRlKFwiZGlyXCIpKSxuLnN0eWxlLmNzc1RleHQmJihnLnN0eWxlLmNzc1RleHQ9bi5zdHlsZS5jc3NUZXh0K1wiO1wiK2cuc3R5bGUuY3NzVGV4dCksbi5zdHlsZS50ZXh0QWxpZ24mJiFnLnN0eWxlLnRleHRBbGlnbiYmKGcuc3R5bGUudGV4dEFsaWduPW4uc3R5bGUudGV4dEFsaWduKSxuLnN0eWxlLnRleHRJbmRlbnQmJiFnLnN0eWxlLnRleHRJbmRlbnQmJihnLnN0eWxlLnRleHRJbmRlbnQ9bi5zdHlsZS50ZXh0SW5kZW50KSxuLnN0eWxlLnBhZGRpbmcmJiFnLnN0eWxlLnBhZGRpbmcmJihnLnN0eWxlLnBhZGRpbmc9bi5zdHlsZS5wYWRkaW5nKSksZSYmL2hcXGQvaS50ZXN0KG4udGFnTmFtZSkmJiEvaFxcZC9pLnRlc3QoZy50YWdOYW1lKT8oZG9tVXRpbHMuc2V0QXR0cmlidXRlcyhuLGUpLGYmJlwiY3VzdG9tc3R5bGVcIj09ZiYmZS5zdHlsZSYmKG4uc3R5bGUuY3NzVGV4dD1lLnN0eWxlKSxkb21VdGlscy5yZW1vdmUoZywhMCksZz1uKTpkb21VdGlscy5yZW1vdmUoZy5wYXJlbnROb2RlLCEwKSksbD11dGlscy5pbmRleE9mKGMsbi50YWdOYW1lKSE9LTE/bjpnLGw9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUobCwhMSxpKX1yZXR1cm4gYS5tb3ZlVG9Cb29rbWFyayhrKS5tb3ZlVG9Cb29rbWFyayhoKX07YS5zZXRPcHQoXCJwYXJhZ3JhcGhcIix7cDpcIlwiLGgxOlwiXCIsaDI6XCJcIixoMzpcIlwiLGg0OlwiXCIsaDU6XCJcIixoNjpcIlwifSksYS5jb21tYW5kcy5wYXJhZ3JhcGg9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7aWYoZi5jb2xsYXBzZWQpe3ZhciBnPXRoaXMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJwXCIpO2lmKGYuaW5zZXJ0Tm9kZShnKSxicm93c2VyLmllKXt2YXIgaD1nLnByZXZpb3VzU2libGluZztoJiZkb21VdGlscy5pc1doaXRlc3BhY2UoaCkmJmRvbVV0aWxzLnJlbW92ZShoKSxoPWcubmV4dFNpYmxpbmcsaCYmZG9tVXRpbHMuaXNXaGl0ZXNwYWNlKGgpJiZkb21VdGlscy5yZW1vdmUoaCl9fWlmKGY9ZChmLGIsYyxlKSxnJiYoZi5zZXRTdGFydEJlZm9yZShnKS5jb2xsYXBzZSghMCkscE49Zy5wYXJlbnROb2RlLGRvbVV0aWxzLnJlbW92ZShnKSxkb21VdGlscy5pc0Jsb2NrRWxtKHBOKSYmZG9tVXRpbHMuaXNFbXB0eU5vZGUocE4pJiZkb21VdGlscy5maWxsTm9kZSh0aGlzLmRvY3VtZW50LHBOKSksYnJvd3Nlci5nZWNrbyYmZi5jb2xsYXBzZWQmJjE9PWYuc3RhcnRDb250YWluZXIubm9kZVR5cGUpe3ZhciBpPWYuc3RhcnRDb250YWluZXIuY2hpbGROb2Rlc1tmLnN0YXJ0T2Zmc2V0XTtpJiYxPT1pLm5vZGVUeXBlJiZpLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09YiYmZi5zZXRTdGFydChpLDApLmNvbGxhcHNlKCEwKX1yZXR1cm4gZi5zZWxlY3QoKSwhMH0scXVlcnlDb21tYW5kVmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT1kb21VdGlscy5maWx0ZXJOb2RlTGlzdCh0aGlzLnNlbGVjdGlvbi5nZXRTdGFydEVsZW1lbnRQYXRoKCksXCJwIGgxIGgyIGgzIGg0IGg1IGg2XCIpO3JldHVybiBhP2EudGFnTmFtZS50b0xvd2VyQ2FzZSgpOlwiXCJ9fX0sZnVuY3Rpb24oKXt2YXIgYT1kb21VdGlscy5pc0Jsb2NrRWxtLGI9ZnVuY3Rpb24oYSl7cmV0dXJuIGRvbVV0aWxzLmZpbHRlck5vZGVMaXN0KGEuc2VsZWN0aW9uLmdldFN0YXJ0RWxlbWVudFBhdGgoKSxmdW5jdGlvbihhKXtyZXR1cm4gYSYmMT09YS5ub2RlVHlwZSYmYS5nZXRBdHRyaWJ1dGUoXCJkaXJcIil9KX0sYz1mdW5jdGlvbihjLGQsZSl7dmFyIGYsZz1mdW5jdGlvbihhKXtyZXR1cm4gMT09YS5ub2RlVHlwZT8hZG9tVXRpbHMuaXNCb29rbWFya05vZGUoYSk6IWRvbVV0aWxzLmlzV2hpdGVzcGFjZShhKX0saD1iKGQpO2lmKGgmJmMuY29sbGFwc2VkKXJldHVybiBoLnNldEF0dHJpYnV0ZShcImRpclwiLGUpLGM7Zj1jLmNyZWF0ZUJvb2ttYXJrKCksYy5lbmxhcmdlKCEwKTtmb3IodmFyIGksaj1jLmNyZWF0ZUJvb2ttYXJrKCksaz1kb21VdGlscy5nZXROZXh0RG9tTm9kZShqLnN0YXJ0LCExLGcpLGw9Yy5jbG9uZVJhbmdlKCk7ayYmIShkb21VdGlscy5nZXRQb3NpdGlvbihrLGouZW5kKSZkb21VdGlscy5QT1NJVElPTl9GT0xMT1dJTkcpOylpZigzIT1rLm5vZGVUeXBlJiZhKGspKWs9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoaywhMCxnKTtlbHNle2ZvcihsLnNldFN0YXJ0QmVmb3JlKGspO2smJmshPT1qLmVuZCYmIWEoayk7KWk9ayxrPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKGssITEsbnVsbCxmdW5jdGlvbihiKXtyZXR1cm4hYShiKX0pO2wuc2V0RW5kQWZ0ZXIoaSk7dmFyIG09bC5nZXRDb21tb25BbmNlc3RvcigpO2lmKCFkb21VdGlscy5pc0JvZHkobSkmJmEobSkpbS5zZXRBdHRyaWJ1dGUoXCJkaXJcIixlKSxrPW07ZWxzZXt2YXIgbj1jLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO24uc2V0QXR0cmlidXRlKFwiZGlyXCIsZSk7dmFyIG89bC5leHRyYWN0Q29udGVudHMoKTtuLmFwcGVuZENoaWxkKG8pLGwuaW5zZXJ0Tm9kZShuKSxrPW59az1kb21VdGlscy5nZXROZXh0RG9tTm9kZShrLCExLGcpfXJldHVybiBjLm1vdmVUb0Jvb2ttYXJrKGopLm1vdmVUb0Jvb2ttYXJrKGYpfTtVRS5jb21tYW5kcy5kaXJlY3Rpb25hbGl0eT17ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKGQuY29sbGFwc2VkKXt2YXIgZT10aGlzLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiZFwiKTtkLmluc2VydE5vZGUoZSl9cmV0dXJuIGMoZCx0aGlzLGIpLGUmJihkLnNldFN0YXJ0QmVmb3JlKGUpLmNvbGxhcHNlKCEwKSxkb21VdGlscy5yZW1vdmUoZSkpLGQuc2VsZWN0KCksITB9LHF1ZXJ5Q29tbWFuZFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9Yih0aGlzKTtyZXR1cm4gYT9hLmdldEF0dHJpYnV0ZShcImRpclwiKTpcImx0clwifX19KCksVUUucGx1Z2lucy5ob3Jpem9udGFsPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNvbW1hbmRzLmhvcml6b250YWw9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYi5xdWVyeUNvbW1hbmRTdGF0ZShhKSE9PS0xKXtiLmV4ZWNDb21tYW5kKFwiaW5zZXJ0SHRtbFwiLFwiPGhyPlwiKTt2YXIgYz1iLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGQ9Yy5zdGFydENvbnRhaW5lcjtpZigxPT1kLm5vZGVUeXBlJiYhZC5jaGlsZE5vZGVzW2Muc3RhcnRPZmZzZXRdKXt2YXIgZTsoZT1kLmNoaWxkTm9kZXNbYy5zdGFydE9mZnNldC0xXSkmJjE9PWUubm9kZVR5cGUmJlwiSFJcIj09ZS50YWdOYW1lJiYoXCJwXCI9PWIub3B0aW9ucy5lbnRlclRhZz8oZT1iLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpLGMuaW5zZXJ0Tm9kZShlKSxjLnNldFN0YXJ0KGUsMCkuc2V0Q3Vyc29yKCkpOihlPWIuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpLGMuaW5zZXJ0Tm9kZShlKSxjLnNldFN0YXJ0QmVmb3JlKGUpLnNldEN1cnNvcigpKSl9cmV0dXJuITB9fSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBkb21VdGlscy5maWx0ZXJOb2RlTGlzdCh0aGlzLnNlbGVjdGlvbi5nZXRTdGFydEVsZW1lbnRQYXRoKCksXCJ0YWJsZVwiKT8tMTowfX0sYS5hZGRMaXN0ZW5lcihcImRlbGtleWRvd25cIixmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7aWYoYy50eHRUb0VsbUJvdW5kYXJ5KCEwKSxkb21VdGlscy5pc1N0YXJ0SW5ibG9jayhjKSl7dmFyIGQ9Yy5zdGFydENvbnRhaW5lcixlPWQucHJldmlvdXNTaWJsaW5nO2lmKGUmJmRvbVV0aWxzLmlzVGFnTm9kZShlLFwiaHJcIikpcmV0dXJuIGRvbVV0aWxzLnJlbW92ZShlKSxjLnNlbGVjdCgpLGRvbVV0aWxzLnByZXZlbnREZWZhdWx0KGIpLCEwfX0pfSxVRS5jb21tYW5kcy50aW1lPVVFLmNvbW1hbmRzLmRhdGU9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPShcIjBcIithLmdldEhvdXJzKCkpLnNsaWNlKC0yKSxkPShcIjBcIithLmdldE1pbnV0ZXMoKSkuc2xpY2UoLTIpLGU9KFwiMFwiK2EuZ2V0U2Vjb25kcygpKS5zbGljZSgtMik7cmV0dXJuIGI9Ynx8XCJoaDppaTpzc1wiLGIucmVwbGFjZSgvaGgvZ2ksYykucmVwbGFjZSgvaWkvZ2ksZCkucmVwbGFjZSgvc3MvZ2ksZSl9ZnVuY3Rpb24gZChhLGIpe3ZhciBjPShcIjAwMFwiK2EuZ2V0RnVsbFllYXIoKSkuc2xpY2UoLTQpLGQ9Yy5zbGljZSgtMiksZT0oXCIwXCIrKGEuZ2V0TW9udGgoKSsxKSkuc2xpY2UoLTIpLGY9KFwiMFwiK2EuZ2V0RGF0ZSgpKS5zbGljZSgtMik7cmV0dXJuIGI9Ynx8XCJ5eXl5LW1tLWRkXCIsYi5yZXBsYWNlKC95eXl5L2dpLGMpLnJlcGxhY2UoL3l5L2dpLGQpLnJlcGxhY2UoL21tL2dpLGUpLnJlcGxhY2UoL2RkL2dpLGYpfXZhciBlPW5ldyBEYXRlO3RoaXMuZXhlY0NvbW1hbmQoXCJpbnNlcnRIdG1sXCIsXCJ0aW1lXCI9PWE/YyhlLGIpOmQoZSxiKSl9fSxVRS5wbHVnaW5zLnJvd3NwYWNpbmc9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Euc2V0T3B0KHtyb3dzcGFjaW5ndG9wOltcIjVcIixcIjEwXCIsXCIxNVwiLFwiMjBcIixcIjI1XCJdLHJvd3NwYWNpbmdib3R0b206W1wiNVwiLFwiMTBcIixcIjE1XCIsXCIyMFwiLFwiMjVcIl19KSxhLmNvbW1hbmRzLnJvd3NwYWNpbmc9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5leGVjQ29tbWFuZChcInBhcmFncmFwaFwiLFwicFwiLHtzdHlsZTpcIm1hcmdpbi1cIitjK1wiOlwiK2IrXCJweFwifSksITB9LHF1ZXJ5Q29tbWFuZFZhbHVlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1kb21VdGlscy5maWx0ZXJOb2RlTGlzdCh0aGlzLnNlbGVjdGlvbi5nZXRTdGFydEVsZW1lbnRQYXRoKCksZnVuY3Rpb24oYSl7cmV0dXJuIGRvbVV0aWxzLmlzQmxvY2tFbG0oYSl9KTtyZXR1cm4gZD8oYz1kb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGQsXCJtYXJnaW4tXCIrYikucmVwbGFjZSgvW15cXGRdL2csXCJcIiksYz9jOjApOjB9fX0sVUUucGx1Z2lucy5saW5laGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnNldE9wdCh7bGluZWhlaWdodDpbXCIxXCIsXCIxLjVcIixcIjEuNzVcIixcIjJcIixcIjNcIixcIjRcIixcIjVcIl19KSxhLmNvbW1hbmRzLmxpbmVoZWlnaHQ9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZXhlY0NvbW1hbmQoXCJwYXJhZ3JhcGhcIixcInBcIix7c3R5bGU6XCJsaW5lLWhlaWdodDpcIisoXCIxXCI9PWI/XCJub3JtYWxcIjpiK1wiZW1cIil9KSwhMH0scXVlcnlDb21tYW5kVmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT1kb21VdGlscy5maWx0ZXJOb2RlTGlzdCh0aGlzLnNlbGVjdGlvbi5nZXRTdGFydEVsZW1lbnRQYXRoKCksZnVuY3Rpb24oYSl7cmV0dXJuIGRvbVV0aWxzLmlzQmxvY2tFbG0oYSl9KTtpZihhKXt2YXIgYj1kb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGEsXCJsaW5lLWhlaWdodFwiKTtyZXR1cm5cIm5vcm1hbFwiPT1iPzE6Yi5yZXBsYWNlKC9bXlxcZC5dKi9naSxcIlwiKX19fX0sVUUucGx1Z2lucy5pbnNlcnRjb2RlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnJlYWR5KGZ1bmN0aW9uKCl7dXRpbHMuY3NzUnVsZShcInByZVwiLFwicHJle21hcmdpbjouNWVtIDA7cGFkZGluZzouNGVtIC42ZW07Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDojZjhmOGY4O31cIixhLmRvY3VtZW50KX0pLGEuc2V0T3B0KFwiaW5zZXJ0Y29kZVwiLHthczM6XCJBY3Rpb25TY3JpcHQzXCIsYmFzaDpcIkJhc2gvU2hlbGxcIixjcHA6XCJDL0MrK1wiLGNzczpcIkNzc1wiLGNmOlwiQ29kZUZ1bmN0aW9uXCIsXCJjI1wiOlwiQyNcIixkZWxwaGk6XCJEZWxwaGlcIixkaWZmOlwiRGlmZlwiLGVybGFuZzpcIkVybGFuZ1wiLGdyb292eTpcIkdyb292eVwiLGh0bWw6XCJIdG1sXCIsamF2YTpcIkphdmFcIixqZng6XCJKYXZhRnhcIixqczpcIkphdmFzY3JpcHRcIixwbDpcIlBlcmxcIixwaHA6XCJQaHBcIixwbGFpbjpcIlBsYWluIFRleHRcIixwczpcIlBvd2VyU2hlbGxcIixweXRob246XCJQeXRob25cIixydWJ5OlwiUnVieVwiLHNjYWxhOlwiU2NhbGFcIixzcWw6XCJTcWxcIix2YjpcIlZiXCIseG1sOlwiWG1sXCJ9KSxhLmNvbW1hbmRzLmluc2VydGNvZGU9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuc2VsZWN0aW9uLmdldFJhbmdlKCksZT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGQuc3RhcnRDb250YWluZXIsXCJwcmVcIiwhMCk7aWYoZSllLmNsYXNzTmFtZT1cImJydXNoOlwiK2IrXCI7dG9vbGJhcjpmYWxzZTtcIjtlbHNle3ZhciBmPVwiXCI7aWYoZC5jb2xsYXBzZWQpZj1icm93c2VyLmllJiZicm93c2VyLmllMTFiZWxvdz9icm93c2VyLnZlcnNpb248PTg/XCImbmJzcDtcIjpcIlwiOlwiPGJyLz5cIjtlbHNle3ZhciBnPWQuZXh0cmFjdENvbnRlbnRzKCksaD1jLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aC5hcHBlbmRDaGlsZChnKSx1dGlscy5lYWNoKFVFLmZpbHRlck5vZGUoVUUuaHRtbHBhcnNlcihoLmlubmVySFRNTC5yZXBsYWNlKC9bXFxyXFx0XS9nLFwiXCIpKSxjLm9wdGlvbnMuZmlsdGVyVHh0UnVsZXMpLmNoaWxkcmVuLGZ1bmN0aW9uKGEpe2lmKGJyb3dzZXIuaWUmJmJyb3dzZXIuaWUxMWJlbG93JiZicm93c2VyLnZlcnNpb24+OClcImVsZW1lbnRcIj09YS50eXBlP1wiYnJcIj09YS50YWdOYW1lP2YrPVwiXFxuXCI6ZHRkLiRlbXB0eVthLnRhZ05hbWVdfHwodXRpbHMuZWFjaChhLmNoaWxkcmVuLGZ1bmN0aW9uKGIpe1wiZWxlbWVudFwiPT1iLnR5cGU/XCJiclwiPT1iLnRhZ05hbWU/Zis9XCJcXG5cIjpkdGQuJGVtcHR5W2EudGFnTmFtZV18fChmKz1iLmlubmVyVGV4dCgpKTpmKz1iLmRhdGF9KSwvXFxuJC8udGVzdChmKXx8KGYrPVwiXFxuXCIpKTpmKz1hLmRhdGErXCJcXG5cIiwhYS5uZXh0U2libGluZygpJiYvXFxuJC8udGVzdChmKSYmKGY9Zi5yZXBsYWNlKC9cXG4kLyxcIlwiKSk7ZWxzZSBpZihicm93c2VyLmllJiZicm93c2VyLmllMTFiZWxvdylcImVsZW1lbnRcIj09YS50eXBlP1wiYnJcIj09YS50YWdOYW1lP2YrPVwiPGJyPlwiOmR0ZC4kZW1wdHlbYS50YWdOYW1lXXx8KHV0aWxzLmVhY2goYS5jaGlsZHJlbixmdW5jdGlvbihiKXtcImVsZW1lbnRcIj09Yi50eXBlP1wiYnJcIj09Yi50YWdOYW1lP2YrPVwiPGJyPlwiOmR0ZC4kZW1wdHlbYS50YWdOYW1lXXx8KGYrPWIuaW5uZXJUZXh0KCkpOmYrPWIuZGF0YX0pLC9icj4kLy50ZXN0KGYpfHwoZis9XCI8YnI+XCIpKTpmKz1hLmRhdGErXCI8YnI+XCIsIWEubmV4dFNpYmxpbmcoKSYmLzxicj4kLy50ZXN0KGYpJiYoZj1mLnJlcGxhY2UoLzxicj4kLyxcIlwiKSk7ZWxzZSBpZihmKz1cImVsZW1lbnRcIj09YS50eXBlP2R0ZC4kZW1wdHlbYS50YWdOYW1lXT9cIlwiOmEuaW5uZXJUZXh0KCk6YS5kYXRhLCEvYnJcXC8/XFxzKj4kLy50ZXN0KGYpKXtpZighYS5uZXh0U2libGluZygpKXJldHVybjtmKz1cIjxicj5cIn19KX1jLmV4ZWNDb21tYW5kKFwiaW5zZXJ0aHRtbFwiLCc8cHJlIGlkPVwiY29kZXJcImNsYXNzPVwiYnJ1c2g6JytiKyc7dG9vbGJhcjpmYWxzZVwiPicrZitcIjwvcHJlPlwiLCEwKSxlPWMuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2RlclwiKSxkb21VdGlscy5yZW1vdmVBdHRyaWJ1dGVzKGUsXCJpZFwiKTt2YXIgaT1lLnByZXZpb3VzU2libGluZztpJiYoMz09aS5ub2RlVHlwZSYmMT09aS5ub2RlVmFsdWUubGVuZ3RoJiZicm93c2VyLmllJiY2PT1icm93c2VyLnZlcnNpb258fGRvbVV0aWxzLmlzRW1wdHlCbG9jayhpKSkmJmRvbVV0aWxzLnJlbW92ZShpKTt2YXIgZD1jLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2RvbVV0aWxzLmlzRW1wdHlCbG9jayhlKT9kLnNldFN0YXJ0KGUsMCkuc2V0Q3Vyc29yKCExLCEwKTpkLnNlbGVjdE5vZGVDb250ZW50cyhlKS5zZWxlY3QoKX19LHF1ZXJ5Q29tbWFuZFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zZWxlY3Rpb24uZ2V0U3RhcnRFbGVtZW50UGF0aCgpLGI9XCJcIjtyZXR1cm4gdXRpbHMuZWFjaChhLGZ1bmN0aW9uKGEpe2lmKFwiUFJFXCI9PWEubm9kZU5hbWUpe3ZhciBjPWEuY2xhc3NOYW1lLm1hdGNoKC9icnVzaDooW147XSspLyk7cmV0dXJuIGI9YyYmY1sxXT9jWzFdOlwiXCIsITF9fSksYn19LGEuYWRkSW5wdXRSdWxlKGZ1bmN0aW9uKGEpe3V0aWxzLmVhY2goYS5nZXROb2Rlc0J5VGFnTmFtZShcInByZVwiKSxmdW5jdGlvbihhKXt2YXIgYj1hLmdldE5vZGVzQnlUYWdOYW1lKFwiYnJcIik7aWYoYi5sZW5ndGgpcmV0dXJuIHZvaWQoYnJvd3Nlci5pZSYmYnJvd3Nlci5pZTExYmVsb3cmJmJyb3dzZXIudmVyc2lvbj44JiZ1dGlscy5lYWNoKGIsZnVuY3Rpb24oYSl7dmFyIGI9VUUudU5vZGUuY3JlYXRlVGV4dChcIlxcblwiKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYSksYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSkpO2lmKCEoYnJvd3Nlci5pZSYmYnJvd3Nlci5pZTExYmVsb3cmJmJyb3dzZXIudmVyc2lvbj44KSl7dmFyIGM9YS5pbm5lclRleHQoKS5zcGxpdCgvXFxuLyk7YS5pbm5lckhUTUwoXCJcIiksdXRpbHMuZWFjaChjLGZ1bmN0aW9uKGIpe2IubGVuZ3RoJiZhLmFwcGVuZENoaWxkKFVFLnVOb2RlLmNyZWF0ZVRleHQoYikpLGEuYXBwZW5kQ2hpbGQoVUUudU5vZGUuY3JlYXRlRWxlbWVudChcImJyXCIpKX0pfX0pfSksYS5hZGRPdXRwdXRSdWxlKGZ1bmN0aW9uKGEpe3V0aWxzLmVhY2goYS5nZXROb2Rlc0J5VGFnTmFtZShcInByZVwiKSxmdW5jdGlvbihhKXt2YXIgYj1cIlwiO3V0aWxzLmVhY2goYS5jaGlsZHJlbixmdW5jdGlvbihhKXtiKz1cInRleHRcIj09YS50eXBlP2EuZGF0YS5yZXBsYWNlKC9bIF0vZyxcIiZuYnNwO1wiKS5yZXBsYWNlKC9cXG4kLyxcIlwiKTpcImJyXCI9PWEudGFnTmFtZT9cIlxcblwiOmR0ZC4kZW1wdHlbYS50YWdOYW1lXT9hLmlubmVyVGV4dCgpOlwiXCJ9KSxhLmlubmVyVGV4dChiLnJlcGxhY2UoLygmbmJzcDt8XFxuKSskLyxcIlwiKSl9KX0pLGEubm90TmVlZENvZGVRdWVyeT17aGVscDoxLHVuZG86MSxyZWRvOjEsc291cmNlOjEscHJpbnQ6MSxzZWFyY2hyZXBsYWNlOjEsZnVsbHNjcmVlbjoxLHByZXZpZXc6MSxpbnNlcnRwYXJhZ3JhcGg6MSxlbGVtZW50cGF0aDoxLGluc2VydGNvZGU6MSxpbnNlcnRodG1sOjEsc2VsZWN0YWxsOjF9O2EucXVlcnlDb21tYW5kU3RhdGU7YS5xdWVyeUNvbW1hbmRTdGF0ZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiFiLm5vdE5lZWRDb2RlUXVlcnlbYS50b0xvd2VyQ2FzZSgpXSYmYi5zZWxlY3Rpb24mJmIucXVlcnlDb21tYW5kVmFsdWUoXCJpbnNlcnRjb2RlXCIpPy0xOlVFLkVkaXRvci5wcm90b3R5cGUucXVlcnlDb21tYW5kU3RhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxhLmFkZExpc3RlbmVyKFwiYmVmb3JlZW50ZXJrZXlkb3duXCIsZnVuY3Rpb24oKXt2YXIgYj1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGM9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShiLnN0YXJ0Q29udGFpbmVyLFwicHJlXCIsITApO2lmKGMpe2lmKGEuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpLGIuY29sbGFwc2VkfHxiLmRlbGV0ZUNvbnRlbnRzKCksIWJyb3dzZXIuaWV8fGJyb3dzZXIuaWU5YWJvdmUpe3ZhciBjLGQ9YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIik7Yi5pbnNlcnROb2RlKGQpLnNldFN0YXJ0QWZ0ZXIoZCkuY29sbGFwc2UoITApO3ZhciBlPWQubmV4dFNpYmxpbmc7ZXx8YnJvd3Nlci5pZSYmIShicm93c2VyLnZlcnNpb24+MTApP2Iuc2V0U3RhcnRBZnRlcihkKTpiLmluc2VydE5vZGUoZC5jbG9uZU5vZGUoITEpKSxcbmM9ZC5wcmV2aW91c1NpYmxpbmc7Zm9yKHZhciBmO2M7KWlmKGY9YyxjPWMucHJldmlvdXNTaWJsaW5nLCFjfHxcIkJSXCI9PWMubm9kZU5hbWUpe2M9ZjticmVha31pZihjKXtmb3IodmFyIGc9XCJcIjtjJiZcIkJSXCIhPWMubm9kZU5hbWUmJm5ldyBSZWdFeHAoXCJeW1xcXFxzXCIrZG9tVXRpbHMuZmlsbENoYXIrXCJdKiRcIikudGVzdChjLm5vZGVWYWx1ZSk7KWcrPWMubm9kZVZhbHVlLGM9Yy5uZXh0U2libGluZztpZihcIkJSXCIhPWMubm9kZU5hbWUpe3ZhciBoPWMubm9kZVZhbHVlLm1hdGNoKG5ldyBSZWdFeHAoXCJeKFtcXFxcc1wiK2RvbVV0aWxzLmZpbGxDaGFyK1wiXSspXCIpKTtoJiZoWzFdJiYoZys9aFsxXSl9ZyYmKGc9YS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShnKSxiLmluc2VydE5vZGUoZykuc2V0U3RhcnRBZnRlcihnKSl9Yi5jb2xsYXBzZSghMCkuc2VsZWN0KCEwKX1lbHNlIGlmKGJyb3dzZXIudmVyc2lvbj44KXt2YXIgaT1hLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXFxuXCIpLGo9Yi5zdGFydENvbnRhaW5lcjtpZigwPT1iLnN0YXJ0T2Zmc2V0KXt2YXIgaz1qLnByZXZpb3VzU2libGluZztpZihrKXtiLmluc2VydE5vZGUoaSk7dmFyIGw9YS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiBcIik7Yi5zZXRTdGFydEFmdGVyKGkpLmluc2VydE5vZGUobCkuc2V0U3RhcnQobCwwKS5jb2xsYXBzZSghMCkuc2VsZWN0KCEwKX19ZWxzZXtiLmluc2VydE5vZGUoaSkuc2V0U3RhcnRBZnRlcihpKTt2YXIgbD1hLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiIFwiKTtqPWIuc3RhcnRDb250YWluZXIuY2hpbGROb2Rlc1tiLnN0YXJ0T2Zmc2V0XSxqJiYhL15cXG4vLnRlc3Qoai5ub2RlVmFsdWUpJiZiLnNldFN0YXJ0QmVmb3JlKGkpLGIuaW5zZXJ0Tm9kZShsKS5zZXRTdGFydChsLDApLmNvbGxhcHNlKCEwKS5zZWxlY3QoITApfX1lbHNle3ZhciBkPWEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpO2IuaW5zZXJ0Tm9kZShkKSxiLmluc2VydE5vZGUoYS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkb21VdGlscy5maWxsQ2hhcikpLGIuc2V0U3RhcnRBZnRlcihkKSxjPWQucHJldmlvdXNTaWJsaW5nO2Zvcih2YXIgZjtjOylpZihmPWMsYz1jLnByZXZpb3VzU2libGluZywhY3x8XCJCUlwiPT1jLm5vZGVOYW1lKXtjPWY7YnJlYWt9aWYoYyl7Zm9yKHZhciBnPVwiXCI7YyYmXCJCUlwiIT1jLm5vZGVOYW1lJiZuZXcgUmVnRXhwKFwiXlsgXCIrZG9tVXRpbHMuZmlsbENoYXIrXCJdKiRcIikudGVzdChjLm5vZGVWYWx1ZSk7KWcrPWMubm9kZVZhbHVlLGM9Yy5uZXh0U2libGluZztpZihcIkJSXCIhPWMubm9kZU5hbWUpe3ZhciBoPWMubm9kZVZhbHVlLm1hdGNoKG5ldyBSZWdFeHAoXCJeKFsgXCIrZG9tVXRpbHMuZmlsbENoYXIrXCJdKylcIikpO2gmJmhbMV0mJihnKz1oWzFdKX1nPWEuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZyksYi5pbnNlcnROb2RlKGcpLnNldFN0YXJ0QWZ0ZXIoZyl9Yi5jb2xsYXBzZSghMCkuc2VsZWN0KCl9cmV0dXJuIGEuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpLCEwfX0pLGEuYWRkTGlzdGVuZXIoXCJ0YWJrZXlkb3duXCIsZnVuY3Rpb24oYixjKXt2YXIgZD1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGU9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShkLnN0YXJ0Q29udGFpbmVyLFwicHJlXCIsITApO2lmKGUpe2lmKGEuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpLGMuc2hpZnRLZXkpO2Vsc2UgaWYoZC5jb2xsYXBzZWQpe3ZhciBmPWEuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCIgICAgXCIpO2QuaW5zZXJ0Tm9kZShmKS5zZXRTdGFydEFmdGVyKGYpLmNvbGxhcHNlKCEwKS5zZWxlY3QoITApfWVsc2V7Zm9yKHZhciBnPWQuY3JlYXRlQm9va21hcmsoKSxoPWcuc3RhcnQucHJldmlvdXNTaWJsaW5nO2g7KXtpZihlLmZpcnN0Q2hpbGQ9PT1oJiYhZG9tVXRpbHMuaXNCcihoKSl7ZS5pbnNlcnRCZWZvcmUoYS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiAgICBcIiksaCk7YnJlYWt9aWYoZG9tVXRpbHMuaXNCcihoKSl7ZS5pbnNlcnRCZWZvcmUoYS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiAgICBcIiksaC5uZXh0U2libGluZyk7YnJlYWt9aD1oLnByZXZpb3VzU2libGluZ312YXIgaT1nLmVuZDtmb3IoaD1nLnN0YXJ0Lm5leHRTaWJsaW5nLGUuZmlyc3RDaGlsZD09PWcuc3RhcnQmJmUuaW5zZXJ0QmVmb3JlKGEuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCIgICAgXCIpLGgubmV4dFNpYmxpbmcpO2gmJmghPT1pOyl7aWYoZG9tVXRpbHMuaXNCcihoKSYmaC5uZXh0U2libGluZyl7aWYoaC5uZXh0U2libGluZz09PWkpYnJlYWs7ZS5pbnNlcnRCZWZvcmUoYS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiAgICBcIiksaC5uZXh0U2libGluZyl9aD1oLm5leHRTaWJsaW5nfWQubW92ZVRvQm9va21hcmsoZykuc2VsZWN0KCl9cmV0dXJuIGEuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpLCEwfX0pLGEuYWRkTGlzdGVuZXIoXCJiZWZvcmVpbnNlcnRodG1sXCIsZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxlPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZC5zdGFydENvbnRhaW5lcixcInByZVwiLCEwKTtpZihlKXtkLmNvbGxhcHNlZHx8ZC5kZWxldGVDb250ZW50cygpO3ZhciBmPVwiXCI7aWYoYnJvd3Nlci5pZSYmYnJvd3Nlci52ZXJzaW9uPjgpe3V0aWxzLmVhY2goVUUuZmlsdGVyTm9kZShVRS5odG1scGFyc2VyKGIpLGMub3B0aW9ucy5maWx0ZXJUeHRSdWxlcykuY2hpbGRyZW4sZnVuY3Rpb24oYSl7XCJlbGVtZW50XCI9PWEudHlwZT9cImJyXCI9PWEudGFnTmFtZT9mKz1cIlxcblwiOmR0ZC4kZW1wdHlbYS50YWdOYW1lXXx8KHV0aWxzLmVhY2goYS5jaGlsZHJlbixmdW5jdGlvbihiKXtcImVsZW1lbnRcIj09Yi50eXBlP1wiYnJcIj09Yi50YWdOYW1lP2YrPVwiXFxuXCI6ZHRkLiRlbXB0eVthLnRhZ05hbWVdfHwoZis9Yi5pbm5lclRleHQoKSk6Zis9Yi5kYXRhfSksL1xcbiQvLnRlc3QoZil8fChmKz1cIlxcblwiKSk6Zis9YS5kYXRhK1wiXFxuXCIsIWEubmV4dFNpYmxpbmcoKSYmL1xcbiQvLnRlc3QoZikmJihmPWYucmVwbGFjZSgvXFxuJC8sXCJcIikpfSk7dmFyIGc9Yy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh1dGlscy5odG1sKGYucmVwbGFjZSgvJm5ic3A7L2csXCIgXCIpKSk7ZC5pbnNlcnROb2RlKGcpLnNlbGVjdE5vZGUoZykuc2VsZWN0KCl9ZWxzZXt2YXIgaD1jLmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTt1dGlscy5lYWNoKFVFLmZpbHRlck5vZGUoVUUuaHRtbHBhcnNlcihiKSxjLm9wdGlvbnMuZmlsdGVyVHh0UnVsZXMpLmNoaWxkcmVuLGZ1bmN0aW9uKGEpe1wiZWxlbWVudFwiPT1hLnR5cGU/XCJiclwiPT1hLnRhZ05hbWU/aC5hcHBlbmRDaGlsZChjLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk6ZHRkLiRlbXB0eVthLnRhZ05hbWVdfHwodXRpbHMuZWFjaChhLmNoaWxkcmVuLGZ1bmN0aW9uKGIpe1wiZWxlbWVudFwiPT1iLnR5cGU/XCJiclwiPT1iLnRhZ05hbWU/aC5hcHBlbmRDaGlsZChjLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk6ZHRkLiRlbXB0eVthLnRhZ05hbWVdfHxoLmFwcGVuZENoaWxkKGMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodXRpbHMuaHRtbChiLmlubmVyVGV4dCgpLnJlcGxhY2UoLyZuYnNwOy9nLFwiIFwiKSkpKTpoLmFwcGVuZENoaWxkKGMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodXRpbHMuaHRtbChiLmRhdGEucmVwbGFjZSgvJm5ic3A7L2csXCIgXCIpKSkpfSksXCJCUlwiIT1oLmxhc3RDaGlsZC5ub2RlTmFtZSYmaC5hcHBlbmRDaGlsZChjLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSkpOmguYXBwZW5kQ2hpbGQoYy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh1dGlscy5odG1sKGEuZGF0YS5yZXBsYWNlKC8mbmJzcDsvZyxcIiBcIikpKSksYS5uZXh0U2libGluZygpfHxcIkJSXCIhPWgubGFzdENoaWxkLm5vZGVOYW1lfHxoLnJlbW92ZUNoaWxkKGgubGFzdENoaWxkKX0pLGQuaW5zZXJ0Tm9kZShoKS5zZWxlY3QoKX1yZXR1cm4hMH19KSxhLmFkZExpc3RlbmVyKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWIua2V5Q29kZXx8Yi53aGljaDtpZig0MD09ZCl7dmFyIGUsZj1jLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGc9Zi5zdGFydENvbnRhaW5lcjtpZihmLmNvbGxhcHNlZCYmKGU9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShmLnN0YXJ0Q29udGFpbmVyLFwicHJlXCIsITApKSYmIWUubmV4dFNpYmxpbmcpe2Zvcih2YXIgaD1lLmxhc3RDaGlsZDtoJiZcIkJSXCI9PWgubm9kZU5hbWU7KWg9aC5wcmV2aW91c1NpYmxpbmc7KGg9PT1nfHxmLnN0YXJ0Q29udGFpbmVyPT09ZSYmZi5zdGFydE9mZnNldD09ZS5jaGlsZE5vZGVzLmxlbmd0aCkmJihjLmV4ZWNDb21tYW5kKFwiaW5zZXJ0cGFyYWdyYXBoXCIpLGRvbVV0aWxzLnByZXZlbnREZWZhdWx0KGIpKX19fSksYS5hZGRMaXN0ZW5lcihcImRlbGtleWRvd25cIixmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7ZC50eHRUb0VsbUJvdW5kYXJ5KCEwKTt2YXIgZT1kLnN0YXJ0Q29udGFpbmVyO2lmKGRvbVV0aWxzLmlzVGFnTm9kZShlLFwicHJlXCIpJiZkLmNvbGxhcHNlZCYmZG9tVXRpbHMuaXNTdGFydEluYmxvY2soZCkpe3ZhciBmPWEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7cmV0dXJuIGRvbVV0aWxzLmZpbGxOb2RlKGEuZG9jdW1lbnQsZiksZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShmLGUpLGRvbVV0aWxzLnJlbW92ZShlKSxkLnNldFN0YXJ0KGYsMCkuc2V0Q3Vyc29yKCExLCEwKSxkb21VdGlscy5wcmV2ZW50RGVmYXVsdChjKSwhMH19KX0sVUUuY29tbWFuZHMuY2xlYXJkb2M9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLm9wdGlvbnMuZW50ZXJUYWcsZD1iLnNlbGVjdGlvbi5nZXRSYW5nZSgpO1wiYnJcIj09Yz8oYi5ib2R5LmlubmVySFRNTD1cIjxici8+XCIsZC5zZXRTdGFydChiLmJvZHksMCkuc2V0Q3Vyc29yKCkpOihiLmJvZHkuaW5uZXJIVE1MPVwiPHA+XCIrKGllP1wiXCI6XCI8YnIvPlwiKStcIjwvcD5cIixkLnNldFN0YXJ0KGIuYm9keS5maXJzdENoaWxkLDApLnNldEN1cnNvcighMSwhMCkpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmZpcmVFdmVudChcImNsZWFyRG9jXCIpfSwwKX19LFVFLnBsdWdpbi5yZWdpc3RlcihcImFuY2hvclwiLGZ1bmN0aW9uKCl7cmV0dXJue2JpbmRFdmVudHM6e3JlYWR5OmZ1bmN0aW9uKCl7dXRpbHMuY3NzUnVsZShcImFuY2hvclwiLFwiLmFuY2hvcmNsYXNze2JhY2tncm91bmQ6IHVybCgnXCIrdGhpcy5vcHRpb25zLnRoZW1lUGF0aCt0aGlzLm9wdGlvbnMudGhlbWUrXCIvaW1hZ2VzL2FuY2hvci5naWYnKSBuby1yZXBlYXQgc2Nyb2xsIGxlZnQgY2VudGVyIHRyYW5zcGFyZW50O2N1cnNvcjogYXV0bztkaXNwbGF5OiBpbmxpbmUtYmxvY2s7aGVpZ2h0OiAxNnB4O3dpZHRoOiAxNXB4O31cIix0aGlzLmRvY3VtZW50KX19LG91dHB1dFJ1bGU6ZnVuY3Rpb24oYSl7dXRpbHMuZWFjaChhLmdldE5vZGVzQnlUYWdOYW1lKFwiaW1nXCIpLGZ1bmN0aW9uKGEpe3ZhciBiOyhiPWEuZ2V0QXR0cihcImFuY2hvcm5hbWVcIikpJiYoYS50YWdOYW1lPVwiYVwiLGEuc2V0QXR0cih7YW5jaG9ybmFtZTpcIlwiLG5hbWU6YixcImNsYXNzXCI6XCJcIn0pKX0pfSxpbnB1dFJ1bGU6ZnVuY3Rpb24oYSl7dXRpbHMuZWFjaChhLmdldE5vZGVzQnlUYWdOYW1lKFwiYVwiKSxmdW5jdGlvbihhKXt2YXIgYjsoYj1hLmdldEF0dHIoXCJuYW1lXCIpKSYmIWEuZ2V0QXR0cihcImhyZWZcIikmJihhLnRhZ05hbWU9XCJpbWdcIixhLnNldEF0dHIoe2FuY2hvcm5hbWU6YS5nZXRBdHRyKFwibmFtZVwiKSxcImNsYXNzXCI6XCJhbmNob3JjbGFzc1wifSksYS5zZXRBdHRyKFwibmFtZVwiKSl9KX0sY29tbWFuZHM6e2FuY2hvcjp7ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGQ9Yy5nZXRDbG9zZWROb2RlKCk7aWYoZCYmZC5nZXRBdHRyaWJ1dGUoXCJhbmNob3JuYW1lXCIpKWI/ZC5zZXRBdHRyaWJ1dGUoXCJhbmNob3JuYW1lXCIsYik6KGMuc2V0U3RhcnRCZWZvcmUoZCkuc2V0Q3Vyc29yKCksZG9tVXRpbHMucmVtb3ZlKGQpKTtlbHNlIGlmKGIpe3ZhciBlPXRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtjLmNvbGxhcHNlKCEwKSxkb21VdGlscy5zZXRBdHRyaWJ1dGVzKGUse2FuY2hvcm5hbWU6YixcImNsYXNzXCI6XCJhbmNob3JjbGFzc1wifSksYy5pbnNlcnROb2RlKGUpLnNldFN0YXJ0QWZ0ZXIoZSkuc2V0Q3Vyc29yKCExLCEwKX19fX19fSksVUUucGx1Z2lucy53b3JkY291bnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Euc2V0T3B0KFwid29yZENvdW50XCIsITApLGEuYWRkTGlzdGVuZXIoXCJjb250ZW50Y2hhbmdlXCIsZnVuY3Rpb24oKXthLmZpcmVFdmVudChcIndvcmRjb3VudFwiKX0pO3ZhciBiO2EuYWRkTGlzdGVuZXIoXCJyZWFkeVwiLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcztkb21VdGlscy5vbihhLmJvZHksXCJrZXl1cFwiLGZ1bmN0aW9uKGMpe3ZhciBkPWMua2V5Q29kZXx8Yy53aGljaCxlPXsxNjoxLDE4OjEsMjA6MSwzNzoxLDM4OjEsMzk6MSw0MDoxfTtkIGluIGV8fChjbGVhclRpbWVvdXQoYiksYj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5maXJlRXZlbnQoXCJ3b3JkY291bnRcIil9LDIwMCkpfSl9KX0sVUUucGx1Z2lucy5wYWdlYnJlYWs9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2lmKGRvbVV0aWxzLmlzRW1wdHlCbG9jayhhKSl7Zm9yKHZhciBiLGQ9YS5maXJzdENoaWxkO2QmJjE9PWQubm9kZVR5cGUmJmRvbVV0aWxzLmlzRW1wdHlCbG9jayhkKTspYj1kLGQ9ZC5maXJzdENoaWxkOyFiJiYoYj1hKSxkb21VdGlscy5maWxsTm9kZShjLmRvY3VtZW50LGIpfX1mdW5jdGlvbiBiKGEpe3JldHVybiBhJiYxPT1hLm5vZGVUeXBlJiZcIkhSXCI9PWEudGFnTmFtZSYmXCJwYWdlYnJlYWtcIj09YS5jbGFzc05hbWV9dmFyIGM9dGhpcyxkPVtcInRkXCJdO2Muc2V0T3B0KFwicGFnZUJyZWFrVGFnXCIsXCJfdWVkaXRvcl9wYWdlX2JyZWFrX3RhZ19cIiksYy5yZWFkeShmdW5jdGlvbigpe3V0aWxzLmNzc1J1bGUoXCJwYWdlYnJlYWtcIixcIi5wYWdlYnJlYWt7ZGlzcGxheTpibG9jaztjbGVhcjpib3RoICFpbXBvcnRhbnQ7Y3Vyc29yOmRlZmF1bHQgIWltcG9ydGFudDt3aWR0aDogMTAwJSAhaW1wb3J0YW50O21hcmdpbjowO31cIixjLmRvY3VtZW50KX0pLGMuYWRkSW5wdXRSdWxlKGZ1bmN0aW9uKGEpe2EudHJhdmVyc2FsKGZ1bmN0aW9uKGEpe2lmKFwidGV4dFwiPT1hLnR5cGUmJmEuZGF0YT09Yy5vcHRpb25zLnBhZ2VCcmVha1RhZyl7dmFyIGI9VUUudU5vZGUuY3JlYXRlRWxlbWVudCgnPGhyIGNsYXNzPVwicGFnZWJyZWFrXCIgbm9zaGFkZT1cIm5vc2hhZGVcIiBzaXplPVwiNVwiIHN0eWxlPVwiLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcIj4nKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYSksYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfX0pfSksYy5hZGRPdXRwdXRSdWxlKGZ1bmN0aW9uKGEpe3V0aWxzLmVhY2goYS5nZXROb2Rlc0J5VGFnTmFtZShcImhyXCIpLGZ1bmN0aW9uKGEpe2lmKFwicGFnZWJyZWFrXCI9PWEuZ2V0QXR0cihcImNsYXNzXCIpKXt2YXIgYj1VRS51Tm9kZS5jcmVhdGVUZXh0KGMub3B0aW9ucy5wYWdlQnJlYWtUYWcpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKSxhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9fSl9KSxjLmNvbW1hbmRzLnBhZ2VicmVhaz17ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgZT1jLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGY9Yy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHJcIik7ZG9tVXRpbHMuc2V0QXR0cmlidXRlcyhmLHtcImNsYXNzXCI6XCJwYWdlYnJlYWtcIixub3NoYWRlOlwibm9zaGFkZVwiLHNpemU6XCI1XCJ9KSxkb21VdGlscy51blNlbGVjdGFibGUoZik7dmFyIGcsaD1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGUuc3RhcnRDb250YWluZXIsZCwhMCksaT1bXTtpZihoKXN3aXRjaChoLnRhZ05hbWUpe2Nhc2VcIlREXCI6aWYoZz1oLnBhcmVudE5vZGUsZy5wcmV2aW91c1NpYmxpbmcpZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShmLGcpLGk9ZG9tVXRpbHMuZmluZFBhcmVudHMoZik7ZWxzZXt2YXIgaj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGcsXCJ0YWJsZVwiKTtqLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsaiksaT1kb21VdGlscy5maW5kUGFyZW50cyhmLCEwKX1nPWlbMV0sZiE9PWcmJmRvbVV0aWxzLmJyZWFrUGFyZW50KGYsZyksYy5maXJlRXZlbnQoXCJhZnRlcmFkanVzdHRhYmxlXCIsYy5kb2N1bWVudCl9ZWxzZXtpZighZS5jb2xsYXBzZWQpe2UuZGVsZXRlQ29udGVudHMoKTtmb3IodmFyIGs9ZS5zdGFydENvbnRhaW5lcjshZG9tVXRpbHMuaXNCb2R5KGspJiZkb21VdGlscy5pc0Jsb2NrRWxtKGspJiZkb21VdGlscy5pc0VtcHR5Tm9kZShrKTspZS5zZXRTdGFydEJlZm9yZShrKS5jb2xsYXBzZSghMCksZG9tVXRpbHMucmVtb3ZlKGspLGs9ZS5zdGFydENvbnRhaW5lcn1lLmluc2VydE5vZGUoZik7Zm9yKHZhciBsLGc9Zi5wYXJlbnROb2RlOyFkb21VdGlscy5pc0JvZHkoZyk7KWRvbVV0aWxzLmJyZWFrUGFyZW50KGYsZyksbD1mLm5leHRTaWJsaW5nLGwmJmRvbVV0aWxzLmlzRW1wdHlCbG9jayhsKSYmZG9tVXRpbHMucmVtb3ZlKGwpLGc9Zi5wYXJlbnROb2RlO2w9Zi5uZXh0U2libGluZzt2YXIgbT1mLnByZXZpb3VzU2libGluZztpZihiKG0pP2RvbVV0aWxzLnJlbW92ZShtKTptJiZhKG0pLGwpYihsKT9kb21VdGlscy5yZW1vdmUobCk6YShsKSxlLnNldEVuZEFmdGVyKGYpLmNvbGxhcHNlKCExKTtlbHNle3ZhciBuPWMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7Zi5wYXJlbnROb2RlLmFwcGVuZENoaWxkKG4pLGRvbVV0aWxzLmZpbGxOb2RlKGMuZG9jdW1lbnQsbiksZS5zZXRTdGFydChuLDApLmNvbGxhcHNlKCEwKX1lLnNlbGVjdCghMCl9fX19LFVFLnBsdWdpbi5yZWdpc3RlcihcIndvcmRpbWFnZVwiLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPVtdO3JldHVybntjb21tYW5kczp7d29yZGltYWdlOntleGVjQ29tbWFuZDpmdW5jdGlvbigpe2Zvcih2YXIgYixjPWRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEuYm9keSxcImltZ1wiKSxkPVtdLGU9MDtiPWNbZSsrXTspe3ZhciBmPWIuZ2V0QXR0cmlidXRlKFwid29yZF9pbWdcIik7ZiYmZC5wdXNoKGYpfXJldHVybiBkfSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe2I9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYS5ib2R5LFwiaW1nXCIpO2Zvcih2YXIgYyxkPTA7Yz1iW2QrK107KWlmKGMuZ2V0QXR0cmlidXRlKFwid29yZF9pbWdcIikpcmV0dXJuIDE7cmV0dXJuLTF9LG5vdE5lZWRVbmRvOiEwfX0saW5wdXRSdWxlOmZ1bmN0aW9uKGIpe3V0aWxzLmVhY2goYi5nZXROb2Rlc0J5VGFnTmFtZShcImltZ1wiKSxmdW5jdGlvbihiKXt2YXIgYz1iLmF0dHJzLGQ9cGFyc2VJbnQoYy53aWR0aCk8MTI4fHxwYXJzZUludChjLmhlaWdodCk8NDMsZT1hLm9wdGlvbnMsZj1lLlVFRElUT1JfSE9NRV9VUkwrXCJ0aGVtZXMvZGVmYXVsdC9pbWFnZXMvc3BhY2VyLmdpZlwiO2Muc3JjJiYvXig/OihmaWxlOlxcLyspKS8udGVzdChjLnNyYykmJmIuc2V0QXR0cih7d2lkdGg6Yy53aWR0aCxoZWlnaHQ6Yy5oZWlnaHQsYWx0OmMuYWx0LHdvcmRfaW1nOmMuc3JjLHNyYzpmLHN0eWxlOlwiYmFja2dyb3VuZDp1cmwoXCIrKGQ/ZS50aGVtZVBhdGgrZS50aGVtZStcIi9pbWFnZXMvd29yZC5naWZcIjplLmxhbmdQYXRoK2UubGFuZytcIi9pbWFnZXMvbG9jYWxpbWFnZS5wbmdcIikrXCIpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyO2JvcmRlcjoxcHggc29saWQgI2RkZFwifSl9KX19fSksVUUucGx1Z2lucy5kcmFnZHJvcD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5yZWFkeShmdW5jdGlvbigpe2RvbVV0aWxzLm9uKHRoaXMuYm9keSxcImRyYWdlbmRcIixmdW5jdGlvbigpe3ZhciBiPWEuc2VsZWN0aW9uLmdldFJhbmdlKCksYz1iLmdldENsb3NlZE5vZGUoKXx8YS5zZWxlY3Rpb24uZ2V0U3RhcnQoKTtpZihjJiZcIklNR1wiPT1jLnRhZ05hbWUpe2Zvcih2YXIgZCxlPWMucHJldmlvdXNTaWJsaW5nOyhkPWMubmV4dFNpYmxpbmcpJiYxPT1kLm5vZGVUeXBlJiZcIlNQQU5cIj09ZC50YWdOYW1lJiYhZC5maXJzdENoaWxkOylkb21VdGlscy5yZW1vdmUoZCk7KCFlfHwxIT1lLm5vZGVUeXBlfHxkb21VdGlscy5pc0VtcHR5QmxvY2soZSkpJiZlfHxkJiYoIWR8fGRvbVV0aWxzLmlzRW1wdHlCbG9jayhkKSl8fChlJiZcIlBcIj09ZS50YWdOYW1lJiYhZG9tVXRpbHMuaXNFbXB0eUJsb2NrKGUpPyhlLmFwcGVuZENoaWxkKGMpLGRvbVV0aWxzLm1vdmVDaGlsZChkLGUpLGRvbVV0aWxzLnJlbW92ZShkKSk6ZCYmXCJQXCI9PWQudGFnTmFtZSYmIWRvbVV0aWxzLmlzRW1wdHlCbG9jayhkKSYmZC5pbnNlcnRCZWZvcmUoYyxkLmZpcnN0Q2hpbGQpLGUmJlwiUFwiPT1lLnRhZ05hbWUmJmRvbVV0aWxzLmlzRW1wdHlCbG9jayhlKSYmZG9tVXRpbHMucmVtb3ZlKGUpLGQmJlwiUFwiPT1kLnRhZ05hbWUmJmRvbVV0aWxzLmlzRW1wdHlCbG9jayhkKSYmZG9tVXRpbHMucmVtb3ZlKGQpLGIuc2VsZWN0Tm9kZShjKS5zZWxlY3QoKSxhLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKSl9fSl9KSxhLmFkZExpc3RlbmVyKFwia2V5dXBcIixmdW5jdGlvbihiLGMpe3ZhciBkPWMua2V5Q29kZXx8Yy53aGljaDtpZigxMz09ZCl7dmFyIGUsZj1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpOyhlPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZi5zdGFydENvbnRhaW5lcixcInBcIiwhMCkpJiZcImNlbnRlclwiPT1kb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGUsXCJ0ZXh0LWFsaWduXCIpJiZkb21VdGlscy5yZW1vdmVTdHlsZShlLFwidGV4dC1hbGlnblwiKX19KX0sVUUucGx1Z2lucy51bmRvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe2lmKGEubGVuZ3RoIT1iLmxlbmd0aClyZXR1cm4gMDtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspaWYoYVtjXSE9YltjXSlyZXR1cm4gMDtyZXR1cm4gMX1mdW5jdGlvbiBiKGIsYyl7cmV0dXJuIGIuY29sbGFwc2VkIT1jLmNvbGxhcHNlZD8wOmEoYi5zdGFydEFkZHJlc3MsYy5zdGFydEFkZHJlc3MpJiZhKGIuZW5kQWRkcmVzcyxjLmVuZEFkZHJlc3MpPzE6MH1mdW5jdGlvbiBjKCl7dGhpcy5saXN0PVtdLHRoaXMuaW5kZXg9MCx0aGlzLmhhc1VuZG89ITEsdGhpcy5oYXNSZWRvPSExLHRoaXMudW5kbz1mdW5jdGlvbigpe2lmKHRoaXMuaGFzVW5kbyl7aWYoIXRoaXMubGlzdFt0aGlzLmluZGV4LTFdJiYxPT10aGlzLmxpc3QubGVuZ3RoKXJldHVybiB2b2lkIHRoaXMucmVzZXQoKTtmb3IoO3RoaXMubGlzdFt0aGlzLmluZGV4XS5jb250ZW50PT10aGlzLmxpc3RbdGhpcy5pbmRleC0xXS5jb250ZW50OylpZih0aGlzLmluZGV4LS0sMD09dGhpcy5pbmRleClyZXR1cm4gdGhpcy5yZXN0b3JlKDApO3RoaXMucmVzdG9yZSgtLXRoaXMuaW5kZXgpfX0sdGhpcy5yZWRvPWZ1bmN0aW9uKCl7aWYodGhpcy5oYXNSZWRvKXtmb3IoO3RoaXMubGlzdFt0aGlzLmluZGV4XS5jb250ZW50PT10aGlzLmxpc3RbdGhpcy5pbmRleCsxXS5jb250ZW50OylpZih0aGlzLmluZGV4KyssdGhpcy5pbmRleD09dGhpcy5saXN0Lmxlbmd0aC0xKXJldHVybiB0aGlzLnJlc3RvcmUodGhpcy5pbmRleCk7dGhpcy5yZXN0b3JlKCsrdGhpcy5pbmRleCl9fSx0aGlzLnJlc3RvcmU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVkaXRvcixiPXRoaXMubGlzdFt0aGlzLmluZGV4XSxjPVVFLmh0bWxwYXJzZXIoYi5jb250ZW50LnJlcGxhY2UoaCxcIlwiKSk7YS5vcHRpb25zLmF1dG9DbGVhckVtcHR5Tm9kZT0hMSxhLmZpbHRlcklucHV0UnVsZShjKSxhLm9wdGlvbnMuYXV0b0NsZWFyRW1wdHlOb2RlPWosYS5kb2N1bWVudC5ib2R5LmlubmVySFRNTD1jLnRvSHRtbCgpLGEuZmlyZUV2ZW50KFwiYWZ0ZXJzY2VuY2VyZXN0b3JlXCIpLGJyb3dzZXIuaWUmJnV0aWxzLmVhY2goZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYS5kb2N1bWVudCxcInRkIHRoIGNhcHRpb24gcFwiKSxmdW5jdGlvbihiKXtkb21VdGlscy5pc0VtcHR5Tm9kZShiKSYmZG9tVXRpbHMuZmlsbE5vZGUoYS5kb2N1bWVudCxiKX0pO3RyeXt2YXIgZD1uZXcgZG9tLlJhbmdlKGEuZG9jdW1lbnQpLm1vdmVUb0FkZHJlc3MoYi5hZGRyZXNzKTtkLnNlbGVjdChpW2Quc3RhcnRDb250YWluZXIubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pfWNhdGNoKGUpe310aGlzLnVwZGF0ZSgpLHRoaXMuY2xlYXJLZXkoKSxhLmZpcmVFdmVudChcInJlc2V0XCIsITApfSx0aGlzLmdldFNjZW5lPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lZGl0b3IsYj1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGM9Yi5jcmVhdGVBZGRyZXNzKCExLCEwKTthLmZpcmVFdmVudChcImJlZm9yZWdldHNjZW5lXCIpO3ZhciBkPVVFLmh0bWxwYXJzZXIoYS5ib2R5LmlubmVySFRNTCk7YS5vcHRpb25zLmF1dG9DbGVhckVtcHR5Tm9kZT0hMSxhLmZpbHRlck91dHB1dFJ1bGUoZCksYS5vcHRpb25zLmF1dG9DbGVhckVtcHR5Tm9kZT1qO3ZhciBlPWQudG9IdG1sKCk7cmV0dXJuIGEuZmlyZUV2ZW50KFwiYWZ0ZXJnZXRzY2VuZVwiKSx7YWRkcmVzczpjLGNvbnRlbnQ6ZX19LHRoaXMuc2F2ZT1mdW5jdGlvbihhLGMpe2NsZWFyVGltZW91dChkKTt2YXIgZz10aGlzLmdldFNjZW5lKGMpLGg9dGhpcy5saXN0W3RoaXMuaW5kZXhdO2gmJmguY29udGVudCE9Zy5jb250ZW50JiZlLnRyaWdnZXIoXCJjb250ZW50Y2hhbmdlXCIpLGgmJmguY29udGVudD09Zy5jb250ZW50JiYoYT8xOmIoaC5hZGRyZXNzLGcuYWRkcmVzcykpfHwodGhpcy5saXN0PXRoaXMubGlzdC5zbGljZSgwLHRoaXMuaW5kZXgrMSksdGhpcy5saXN0LnB1c2goZyksdGhpcy5saXN0Lmxlbmd0aD5mJiZ0aGlzLmxpc3Quc2hpZnQoKSx0aGlzLmluZGV4PXRoaXMubGlzdC5sZW5ndGgtMSx0aGlzLmNsZWFyS2V5KCksdGhpcy51cGRhdGUoKSl9LHRoaXMudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5oYXNSZWRvPSEhdGhpcy5saXN0W3RoaXMuaW5kZXgrMV0sdGhpcy5oYXNVbmRvPSEhdGhpcy5saXN0W3RoaXMuaW5kZXgtMV19LHRoaXMucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmxpc3Q9W10sdGhpcy5pbmRleD0wLHRoaXMuaGFzVW5kbz0hMSx0aGlzLmhhc1JlZG89ITEsdGhpcy5jbGVhcktleSgpfSx0aGlzLmNsZWFyS2V5PWZ1bmN0aW9uKCl7bT0wLGs9bnVsbH19dmFyIGQsZT10aGlzLGY9ZS5vcHRpb25zLm1heFVuZG9Db3VudHx8MjAsZz1lLm9wdGlvbnMubWF4SW5wdXRDb3VudHx8MjAsaD1uZXcgUmVnRXhwKGRvbVV0aWxzLmZpbGxDaGFyK1wifDwvaHI+XCIsXCJnaVwiKSxpPXtvbDoxLHVsOjEsdGFibGU6MSx0Ym9keToxLHRyOjEsYm9keToxfSxqPWUub3B0aW9ucy5hdXRvQ2xlYXJFbXB0eU5vZGU7ZS51bmRvTWFuZ2VyPW5ldyBjLGUudW5kb01hbmdlci5lZGl0b3I9ZSxlLmFkZExpc3RlbmVyKFwic2F2ZVNjZW5lXCIsZnVuY3Rpb24oKXt2YXIgYT1BcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3RoaXMudW5kb01hbmdlci5zYXZlLmFwcGx5KHRoaXMudW5kb01hbmdlcixhKX0pLGUuYWRkTGlzdGVuZXIoXCJyZXNldFwiLGZ1bmN0aW9uKGEsYil7Ynx8dGhpcy51bmRvTWFuZ2VyLnJlc2V0KCl9KSxlLmNvbW1hbmRzLnJlZG89ZS5jb21tYW5kcy51bmRvPXtleGVjQ29tbWFuZDpmdW5jdGlvbihhKXt0aGlzLnVuZG9NYW5nZXJbYV0oKX0scXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudW5kb01hbmdlcltcImhhc1wiKyhcInVuZG9cIj09YS50b0xvd2VyQ2FzZSgpP1wiVW5kb1wiOlwiUmVkb1wiKV0/MDotMX0sbm90TmVlZFVuZG86MX07dmFyIGssbD17MTY6MSwxNzoxLDE4OjEsMzc6MSwzODoxLDM5OjEsNDA6MX0sbT0wLG49ITE7ZS5hZGRMaXN0ZW5lcihcInJlYWR5XCIsZnVuY3Rpb24oKXtkb21VdGlscy5vbih0aGlzLmJvZHksXCJjb21wb3NpdGlvbnN0YXJ0XCIsZnVuY3Rpb24oKXtuPSEwfSksZG9tVXRpbHMub24odGhpcy5ib2R5LFwiY29tcG9zaXRpb25lbmRcIixmdW5jdGlvbigpe249ITF9KX0pLGUuYWRkc2hvcnRjdXRrZXkoe1VuZG86XCJjdHJsKzkwXCIsUmVkbzpcImN0cmwrODlcIn0pO3ZhciBvPSEwO2UuYWRkTGlzdGVuZXIoXCJrZXlkb3duXCIsZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2EudW5kb01hbmdlci5zYXZlKCExLCEwKSxhLmZpcmVFdmVudChcInNlbGVjdGlvbmNoYW5nZVwiKX12YXIgZT10aGlzLGY9Yi5rZXlDb2RlfHxiLndoaWNoO2lmKCEobFtmXXx8Yi5jdHJsS2V5fHxiLm1ldGFLZXl8fGIuc2hpZnRLZXl8fGIuYWx0S2V5KSl7aWYobilyZXR1cm47aWYoIWUuc2VsZWN0aW9uLmdldFJhbmdlKCkuY29sbGFwc2VkKXJldHVybiBlLnVuZG9NYW5nZXIuc2F2ZSghMSwhMCksdm9pZChvPSExKTswPT1lLnVuZG9NYW5nZXIubGlzdC5sZW5ndGgmJmUudW5kb01hbmdlci5zYXZlKCEwKSxjbGVhclRpbWVvdXQoZCksZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYobil2YXIgYT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe258fChjKGUpLGNsZWFySW50ZXJ2YWwoYSkpfSwzMDApO2Vsc2UgYyhlKX0sMjAwKSxrPWYsbSsrLG0+PWcmJmMoZSl9fSksZS5hZGRMaXN0ZW5lcihcImtleXVwXCIsZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmtleUNvZGV8fGIud2hpY2g7aWYoIShsW2NdfHxiLmN0cmxLZXl8fGIubWV0YUtleXx8Yi5zaGlmdEtleXx8Yi5hbHRLZXkpKXtpZihuKXJldHVybjtvfHwodGhpcy51bmRvTWFuZ2VyLnNhdmUoITEsITApLG89ITApfX0pLGUuc3RvcENtZFVuZG89ZnVuY3Rpb24oKXtlLl9faGFzRW50ZXJFeGVjQ29tbWFuZD0hMH0sZS5zdGFydENtZFVuZG89ZnVuY3Rpb24oKXtlLl9faGFzRW50ZXJFeGVjQ29tbWFuZD0hMX19LFVFLnBsdWdpbi5yZWdpc3RlcihcImNvcHlcIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtaZXJvQ2xpcGJvYXJkLmNvbmZpZyh7ZGVidWc6ITEsc3dmUGF0aDpiLm9wdGlvbnMuVUVESVRPUl9IT01FX1VSTCtcInRoaXJkLXBhcnR5L3plcm9jbGlwYm9hcmQvWmVyb0NsaXBib2FyZC5zd2ZcIn0pO3ZhciBhPWIuemVyb2NsaXBib2FyZD1uZXcgWmVyb0NsaXBib2FyZDthLm9uKFwiY29weVwiLGZ1bmN0aW9uKGEpe3ZhciBjPWEuY2xpZW50LGQ9Yi5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5hcHBlbmRDaGlsZChkLmNsb25lQ29udGVudHMoKSksYy5zZXRUZXh0KGUuaW5uZXJUZXh0fHxlLnRleHRDb250ZW50KSxjLnNldEh0bWwoZS5pbm5lckhUTUwpLGQuc2VsZWN0KCl9KSxhLm9uKFwibW91c2VvdmVyIG1vdXNlb3V0XCIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7XCJtb3VzZW92ZXJcIj09YS50eXBlP2RvbVV0aWxzLmFkZENsYXNzKGIsXCJlZHVpLXN0YXRlLWhvdmVyXCIpOlwibW91c2VvdXRcIj09YS50eXBlJiZkb21VdGlscy5yZW1vdmVDbGFzc2VzKGIsXCJlZHVpLXN0YXRlLWhvdmVyXCIpfSksYS5vbihcIndyb25nZmxhc2ggbm9mbGFzaFwiLGZ1bmN0aW9uKCl7WmVyb0NsaXBib2FyZC5kZXN0cm95KCl9KX12YXIgYj10aGlzO3JldHVybntiaW5kRXZlbnRzOntyZWFkeTpmdW5jdGlvbigpe2Jyb3dzZXIuaWV8fCh3aW5kb3cuWmVyb0NsaXBib2FyZD9hKCk6dXRpbHMubG9hZEZpbGUoZG9jdW1lbnQse3NyYzpiLm9wdGlvbnMuVUVESVRPUl9IT01FX1VSTCtcInRoaXJkLXBhcnR5L3plcm9jbGlwYm9hcmQvWmVyb0NsaXBib2FyZC5qc1wiLHRhZzpcInNjcmlwdFwiLHR5cGU6XCJ0ZXh0L2phdmFzY3JpcHRcIixkZWZlcjpcImRlZmVyXCJ9LGZ1bmN0aW9uKCl7YSgpfSkpfX0sY29tbWFuZHM6e2NvcHk6e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe2IuZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpfHxhbGVydChiLmdldExhbmcoXCJjb3B5bXNnXCIpKX19fX19KSxVRS5wbHVnaW5zLnBhc3RlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2YXIgYj10aGlzLmRvY3VtZW50O2lmKCFiLmdldEVsZW1lbnRCeUlkKFwiYmFpZHVfcGFzdGViaW5cIikpe3ZhciBjPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksZD1jLmNyZWF0ZUJvb2ttYXJrKCksZT1iLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5pZD1cImJhaWR1X3Bhc3RlYmluXCIsYnJvd3Nlci53ZWJraXQmJmUuYXBwZW5kQ2hpbGQoYi5jcmVhdGVUZXh0Tm9kZShkb21VdGlscy5maWxsQ2hhcitkb21VdGlscy5maWxsQ2hhcikpLGIuYm9keS5hcHBlbmRDaGlsZChlKSxkLnN0YXJ0LnN0eWxlLmRpc3BsYXk9XCJcIixlLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxcHg7aGVpZ2h0OjFweDtvdmVyZmxvdzpoaWRkZW47bGVmdDotMTAwMHB4O3doaXRlLXNwYWNlOm5vd3JhcDt0b3A6XCIrZG9tVXRpbHMuZ2V0WFkoZC5zdGFydCkueStcInB4XCIsYy5zZWxlY3ROb2RlQ29udGVudHMoZSkuc2VsZWN0KCEwKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoYnJvd3Nlci53ZWJraXQpZm9yKHZhciBmLGc9MCxoPWIucXVlcnlTZWxlY3RvckFsbChcIiNiYWlkdV9wYXN0ZWJpblwiKTtmPWhbZysrXTspe2lmKCFkb21VdGlscy5pc0VtcHR5Tm9kZShmKSl7ZT1mO2JyZWFrfWRvbVV0aWxzLnJlbW92ZShmKX10cnl7ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpfWNhdGNoKGkpe31jLm1vdmVUb0Jvb2ttYXJrKGQpLnNlbGVjdCghMCksYShlKX0sMCl9fWZ1bmN0aW9uIGIoYSl7cmV0dXJuIGEucmVwbGFjZSgvPChcXC8/KShbXFx3XFwtXSspKFtePl0qKT4vZ2ksZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLHtpbWc6MX1bY10/YTooZD1kLnJlcGxhY2UoLyhbXFx3XFwtXSo/KVxccyo9XFxzKigoXCIoW15cIl0qKVwiKXwoJyhbXiddKiknKXwoW15cXHM+XSspKS9naSxmdW5jdGlvbihhLGIsYyl7cmV0dXJue3NyYzoxLGhyZWY6MSxuYW1lOjF9W2IudG9Mb3dlckNhc2UoKV0/YitcIj1cIitjK1wiIFwiOlwiXCJ9KSx7c3BhbjoxLGRpdjoxfVtjXT9cIlwiOlwiPFwiK2IrYytcIiBcIit1dGlscy50cmltKGQpK1wiPlwiKX0pfWZ1bmN0aW9uIGMoYSl7dmFyIGM7aWYoYS5maXJzdENoaWxkKXtmb3IodmFyIGgsaT1kb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShhLFwic3BhblwiKSxqPTA7aD1pW2orK107KVwiX2JhaWR1X2N1dF9zdGFydFwiIT1oLmlkJiZcIl9iYWlkdV9jdXRfZW5kXCIhPWguaWR8fGRvbVV0aWxzLnJlbW92ZShoKTtpZihicm93c2VyLndlYmtpdCl7Zm9yKHZhciBrLGw9YS5xdWVyeVNlbGVjdG9yQWxsKFwiZGl2IGJyXCIpLGo9MDtrPWxbaisrXTspe3ZhciBtPWsucGFyZW50Tm9kZTtcIkRJVlwiPT1tLnRhZ05hbWUmJjE9PW0uY2hpbGROb2Rlcy5sZW5ndGgmJihtLmlubmVySFRNTD1cIjxwPjxici8+PC9wPlwiLGRvbVV0aWxzLnJlbW92ZShtKSl9Zm9yKHZhciBuLG89YS5xdWVyeVNlbGVjdG9yQWxsKFwiI2JhaWR1X3Bhc3RlYmluXCIpLGo9MDtuPW9baisrXTspe3ZhciBwPWQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7Zm9yKG4ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocCxuKTtuLmZpcnN0Q2hpbGQ7KXAuYXBwZW5kQ2hpbGQobi5maXJzdENoaWxkKTtkb21VdGlscy5yZW1vdmUobil9Zm9yKHZhciBxLHI9YS5xdWVyeVNlbGVjdG9yQWxsKFwibWV0YVwiKSxqPTA7cT1yW2orK107KWRvbVV0aWxzLnJlbW92ZShxKTt2YXIgbD1hLnF1ZXJ5U2VsZWN0b3JBbGwoXCJiclwiKTtmb3Ioaj0wO3E9bFtqKytdOykvXmFwcGxlLS9pLnRlc3QocS5jbGFzc05hbWUpJiZkb21VdGlscy5yZW1vdmUocSl9aWYoYnJvd3Nlci5nZWNrbyl7dmFyIHM9YS5xdWVyeVNlbGVjdG9yQWxsKFwiW19tb3pfZGlydHldXCIpO2ZvcihqPTA7cT1zW2orK107KXEucmVtb3ZlQXR0cmlidXRlKFwiX21vel9kaXJ0eVwiKX1pZighYnJvd3Nlci5pZSlmb3IodmFyIHEsdD1hLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzcGFuLkFwcGxlLXN0eWxlLXNwYW5cIiksaj0wO3E9dFtqKytdOylkb21VdGlscy5yZW1vdmUocSwhMCk7Yz1hLmlubmVySFRNTCxjPVVFLmZpbHRlcldvcmQoYyk7dmFyIHU9VUUuaHRtbHBhcnNlcihjKTtpZihkLm9wdGlvbnMuZmlsdGVyUnVsZXMmJlVFLmZpbHRlck5vZGUodSxkLm9wdGlvbnMuZmlsdGVyUnVsZXMpLGQuZmlsdGVySW5wdXRSdWxlKHUpLGJyb3dzZXIud2Via2l0KXt2YXIgdj11Lmxhc3RDaGlsZCgpO3YmJlwiZWxlbWVudFwiPT12LnR5cGUmJlwiYnJcIj09di50YWdOYW1lJiZ1LnJlbW92ZUNoaWxkKHYpLHV0aWxzLmVhY2goZC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoXCJkaXZcIiksZnVuY3Rpb24oYSl7ZG9tVXRpbHMuaXNFbXB0eUJsb2NrKGEpJiZkb21VdGlscy5yZW1vdmUoYSwhMCl9KX1pZihjPXtodG1sOnUudG9IdG1sKCl9LGQuZmlyZUV2ZW50KFwiYmVmb3JlcGFzdGVcIixjLHUpLCFjLmh0bWwpcmV0dXJuO3U9VUUuaHRtbHBhcnNlcihjLmh0bWwsITApLDE9PT1kLnF1ZXJ5Q29tbWFuZFN0YXRlKFwicGFzdGVwbGFpblwiKT9kLmV4ZWNDb21tYW5kKFwiaW5zZXJ0SHRtbFwiLFVFLmZpbHRlck5vZGUodSxkLm9wdGlvbnMuZmlsdGVyVHh0UnVsZXMpLnRvSHRtbCgpLCEwKTooVUUuZmlsdGVyTm9kZSh1LGQub3B0aW9ucy5maWx0ZXJUeHRSdWxlcyksZT11LnRvSHRtbCgpLGY9Yy5odG1sLGc9ZC5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5jcmVhdGVBZGRyZXNzKCEwKSxkLmV4ZWNDb21tYW5kKFwiaW5zZXJ0SHRtbFwiLGQuZ2V0T3B0KFwicmV0YWluT25seUxhYmVsUGFzdGVkXCIpPT09ITA/YihmKTpmLCEwKSksZC5maXJlRXZlbnQoXCJhZnRlcnBhc3RlXCIsYyl9fXZhciBkPXRoaXM7ZC5zZXRPcHQoe3JldGFpbk9ubHlMYWJlbFBhc3RlZDohMX0pO3ZhciBlLGYsZztkLmFkZExpc3RlbmVyKFwicGFzdGVUcmFuc2ZlclwiLGZ1bmN0aW9uKGEsYyl7aWYoZyYmZSYmZiYmZSE9Zil7dmFyIGg9ZC5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtpZihoLm1vdmVUb0FkZHJlc3MoZywhMCksIWguY29sbGFwc2VkKXtmb3IoOyFkb21VdGlscy5pc0JvZHkoaC5zdGFydENvbnRhaW5lcik7KXt2YXIgaT1oLnN0YXJ0Q29udGFpbmVyO2lmKDE9PWkubm9kZVR5cGUpe2lmKGk9aS5jaGlsZE5vZGVzW2guc3RhcnRPZmZzZXRdLCFpKXtoLnNldFN0YXJ0QmVmb3JlKGguc3RhcnRDb250YWluZXIpO2NvbnRpbnVlfXZhciBqPWkucHJldmlvdXNTaWJsaW5nO2omJjM9PWoubm9kZVR5cGUmJm5ldyBSZWdFeHAoXCJeW1xcblxcclxcdCBcIitkb21VdGlscy5maWxsQ2hhcitcIl0qJFwiKS50ZXN0KGoubm9kZVZhbHVlKSYmaC5zZXRTdGFydEJlZm9yZShqKX1pZigwIT1oLnN0YXJ0T2Zmc2V0KWJyZWFrO2guc2V0U3RhcnRCZWZvcmUoaC5zdGFydENvbnRhaW5lcil9Zm9yKDshZG9tVXRpbHMuaXNCb2R5KGguZW5kQ29udGFpbmVyKTspe3ZhciBrPWguZW5kQ29udGFpbmVyO2lmKDE9PWsubm9kZVR5cGUpe2lmKGs9ay5jaGlsZE5vZGVzW2guZW5kT2Zmc2V0XSwhayl7aC5zZXRFbmRBZnRlcihoLmVuZENvbnRhaW5lcik7Y29udGludWV9dmFyIGw9ay5uZXh0U2libGluZztsJiYzPT1sLm5vZGVUeXBlJiZuZXcgUmVnRXhwKFwiXltcXG5cXHJcXHRcIitkb21VdGlscy5maWxsQ2hhcitcIl0qJFwiKS50ZXN0KGwubm9kZVZhbHVlKSYmaC5zZXRFbmRBZnRlcihsKX1pZihoLmVuZE9mZnNldCE9aC5lbmRDb250YWluZXJbMz09aC5lbmRDb250YWluZXIubm9kZVR5cGU/XCJub2RlVmFsdWVcIjpcImNoaWxkTm9kZXNcIl0ubGVuZ3RoKWJyZWFrO2guc2V0RW5kQWZ0ZXIoaC5lbmRDb250YWluZXIpfX1oLmRlbGV0ZUNvbnRlbnRzKCksaC5zZWxlY3QoITApLGQuX19oYXNFbnRlckV4ZWNDb21tYW5kPSEwO3ZhciBtPWY7Mj09PWM/bT1iKG0pOmMmJihtPWUpLGQuZXhlY0NvbW1hbmQoXCJpbnNlcnRodG1sXCIsbSwhMCksZC5fX2hhc0VudGVyRXhlY0NvbW1hbmQ9ITE7Zm9yKHZhciBuPWQuc2VsZWN0aW9uLmdldFJhbmdlKCk7IWRvbVV0aWxzLmlzQm9keShuLnN0YXJ0Q29udGFpbmVyKSYmIW4uc3RhcnRPZmZzZXQmJm4uc3RhcnRDb250YWluZXJbMz09bi5zdGFydENvbnRhaW5lci5ub2RlVHlwZT9cIm5vZGVWYWx1ZVwiOlwiY2hpbGROb2Rlc1wiXS5sZW5ndGg7KW4uc2V0U3RhcnRCZWZvcmUobi5zdGFydENvbnRhaW5lcik7dmFyIG89bi5jcmVhdGVBZGRyZXNzKCEwKTtnLmVuZEFkZHJlc3M9by5zdGFydEFkZHJlc3N9fSksZC5hZGRMaXN0ZW5lcihcInJlYWR5XCIsZnVuY3Rpb24oKXtkb21VdGlscy5vbihkLmJvZHksXCJjdXRcIixmdW5jdGlvbigpe3ZhciBhPWQuc2VsZWN0aW9uLmdldFJhbmdlKCk7IWEuY29sbGFwc2VkJiZkLnVuZG9NYW5nZXImJmQudW5kb01hbmdlci5zYXZlKCl9KSxkb21VdGlscy5vbihkLmJvZHksYnJvd3Nlci5pZXx8YnJvd3Nlci5vcGVyYT9cImtleWRvd25cIjpcInBhc3RlXCIsZnVuY3Rpb24oYil7KCFicm93c2VyLmllJiYhYnJvd3Nlci5vcGVyYXx8KGIuY3RybEtleXx8Yi5tZXRhS2V5KSYmXCI4NlwiPT1iLmtleUNvZGUpJiZhLmNhbGwoZCxmdW5jdGlvbihhKXtjKGEpfSl9KX0pLGQuY29tbWFuZHMucGFzdGU9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGIpe2Jyb3dzZXIuaWU/KGEuY2FsbChkLGZ1bmN0aW9uKGEpe2MoYSl9KSxkLmRvY3VtZW50LmV4ZWNDb21tYW5kKFwicGFzdGVcIikpOmFsZXJ0KGQuZ2V0TGFuZyhcInBhc3RlbXNnXCIpKX19fSxVRS5wbHVnaW5zLnBhc3RlcGxhaW49ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Euc2V0T3B0KHtwYXN0ZXBsYWluOiExLGZpbHRlclR4dFJ1bGVzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXthLnRhZ05hbWU9XCJwXCIsYS5zZXRTdHlsZSgpfWZ1bmN0aW9uIGIoYSl7YS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEsITApfXJldHVybntcIi1cIjpcInNjcmlwdCBzdHlsZSBvYmplY3QgaWZyYW1lIGVtYmVkIGlucHV0IHNlbGVjdFwiLHA6eyQ6e319LGJyOnskOnt9fSxkaXY6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9VUUudU5vZGUuY3JlYXRlRWxlbWVudChcInBcIik7Yj1hLmZpcnN0Q2hpbGQoKTspXCJ0ZXh0XCIhPWIudHlwZSYmVUUuZG9tLmR0ZC4kYmxvY2tbYi50YWdOYW1lXT9jLmZpcnN0Q2hpbGQoKT8oYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjLGEpLGM9VUUudU5vZGUuY3JlYXRlRWxlbWVudChcInBcIikpOmEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTpjLmFwcGVuZENoaWxkKGIpO2MuZmlyc3RDaGlsZCgpJiZhLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGMsYSksYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSxvbDpiLHVsOmIsZGw6YixkdDpiLGRkOmIsbGk6YixjYXB0aW9uOmEsdGg6YSx0cjphLGgxOmEsaDI6YSxoMzphLGg0OmEsaDU6YSxoNjphLHRkOmZ1bmN0aW9uKGEpe3ZhciBiPSEhYS5pbm5lclRleHQoKTtiJiZhLnBhcmVudE5vZGUuaW5zZXJ0QWZ0ZXIoVUUudU5vZGUuY3JlYXRlVGV4dChcIiAmbmJzcDsgJm5ic3A7XCIpLGEpLGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhLGEuaW5uZXJUZXh0KCkpfX19KCl9KTt2YXIgYj1hLm9wdGlvbnMucGFzdGVwbGFpbjthLmNvbW1hbmRzLnBhc3RlcGxhaW49e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGI/MTowfSxleGVjQ29tbWFuZDpmdW5jdGlvbigpe2I9MHwhYn0sbm90TmVlZFVuZG86MX19LFVFLnBsdWdpbnMubGlzdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9W107Zm9yKHZhciBjIGluIGEpYi5wdXNoKGMpO3JldHVybiBifWZ1bmN0aW9uIGIoYSl7dmFyIGI9YS5jbGFzc05hbWU7cmV0dXJuIGRvbVV0aWxzLmhhc0NsYXNzKGEsL2N1c3RvbV8vKT9iLm1hdGNoKC9jdXN0b21fKFxcdyspLylbMV06ZG9tVXRpbHMuZ2V0U3R5bGUoYSxcImxpc3Qtc3R5bGUtdHlwZVwiKX1mdW5jdGlvbiBjKGEsYyl7dXRpbHMuZWFjaChkb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShhLFwib2wgdWxcIiksZnVuY3Rpb24oZil7aWYoZG9tVXRpbHMuaW5Eb2MoZixhKSl7dmFyIGc9Zi5wYXJlbnROb2RlO2lmKGcudGFnTmFtZT09Zi50YWdOYW1lKXt2YXIgaD1iKGYpfHwoXCJPTFwiPT1mLnRhZ05hbWU/XCJkZWNpbWFsXCI6XCJkaXNjXCIpLGk9YihnKXx8KFwiT0xcIj09Zy50YWdOYW1lP1wiZGVjaW1hbFwiOlwiZGlzY1wiKTtpZihoPT1pKXt2YXIgbD11dGlscy5pbmRleE9mKGtbZi50YWdOYW1lXSxoKTtsPWwrMT09a1tmLnRhZ05hbWVdLmxlbmd0aD8wOmwrMSxlKGYsa1tmLnRhZ05hbWVdW2xdKX19dmFyIG09MCxuPTI7ZG9tVXRpbHMuaGFzQ2xhc3MoZiwvY3VzdG9tXy8pPy9bb3VdbC9pLnRlc3QoZy50YWdOYW1lKSYmZG9tVXRpbHMuaGFzQ2xhc3MoZywvY3VzdG9tXy8pfHwobj0xKTovW291XWwvaS50ZXN0KGcudGFnTmFtZSkmJmRvbVV0aWxzLmhhc0NsYXNzKGcsL2N1c3RvbV8vKSYmKG49Myk7dmFyIG89ZG9tVXRpbHMuZ2V0U3R5bGUoZixcImxpc3Qtc3R5bGUtdHlwZVwiKTtvJiYoZi5zdHlsZS5jc3NUZXh0PVwibGlzdC1zdHlsZS10eXBlOlwiK28pLGYuY2xhc3NOYW1lPXV0aWxzLnRyaW0oZi5jbGFzc05hbWUucmVwbGFjZSgvbGlzdC1wYWRkaW5nbGVmdC1cXHcrLyxcIlwiKSkrXCIgbGlzdC1wYWRkaW5nbGVmdC1cIituLHV0aWxzLmVhY2goZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZixcImxpXCIpLGZ1bmN0aW9uKGEpe2lmKGEuc3R5bGUuY3NzVGV4dCYmKGEuc3R5bGUuY3NzVGV4dD1cIlwiKSwhYS5maXJzdENoaWxkKXJldHVybiB2b2lkIGRvbVV0aWxzLnJlbW92ZShhKTtpZihhLnBhcmVudE5vZGU9PT1mKXtpZihtKyssZG9tVXRpbHMuaGFzQ2xhc3MoZiwvY3VzdG9tXy8pKXt2YXIgYz0xLGQ9YihmKTtpZihcIk9MXCI9PWYudGFnTmFtZSl7aWYoZClzd2l0Y2goZCl7Y2FzZVwiY25cIjpjYXNlXCJjbjFcIjpjYXNlXCJjbjJcIjptPjEwJiYobSUxMD09MHx8bT4xMCYmbTwyMCk/Yz0yOm0+MjAmJihjPTMpO2JyZWFrO2Nhc2VcIm51bTJcIjptPjkmJihjPTIpfWEuY2xhc3NOYW1lPVwibGlzdC1cIitqW2RdK20rXCIgbGlzdC1cIitkK1wiLXBhZGRpbmdsZWZ0LVwiK2N9ZWxzZSBhLmNsYXNzTmFtZT1cImxpc3QtXCIraltkXStcIiBsaXN0LVwiK2QrXCItcGFkZGluZ2xlZnRcIn1lbHNlIGEuY2xhc3NOYW1lPWEuY2xhc3NOYW1lLnJlcGxhY2UoL2xpc3QtW1xcd1xcLV0rL2dpLFwiXCIpO3ZhciBlPWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7bnVsbD09PWV8fGUucmVwbGFjZSgvXFxzL2csXCJcIil8fGRvbVV0aWxzLnJlbW92ZUF0dHJpYnV0ZXMoYSxcImNsYXNzXCIpfX0pLCFjJiZkKGYsZi50YWdOYW1lLnRvTG93ZXJDYXNlKCksYihmKXx8ZG9tVXRpbHMuZ2V0U3R5bGUoZixcImxpc3Qtc3R5bGUtdHlwZVwiKSwhMCl9fSl9ZnVuY3Rpb24gZChhLGQsZSxmKXt2YXIgZz1hLm5leHRTaWJsaW5nO2cmJjE9PWcubm9kZVR5cGUmJmcudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1kJiYoYihnKXx8ZG9tVXRpbHMuZ2V0U3R5bGUoZyxcImxpc3Qtc3R5bGUtdHlwZVwiKXx8KFwib2xcIj09ZD9cImRlY2ltYWxcIjpcImRpc2NcIikpPT1lJiYoZG9tVXRpbHMubW92ZUNoaWxkKGcsYSksMD09Zy5jaGlsZE5vZGVzLmxlbmd0aCYmZG9tVXRpbHMucmVtb3ZlKGcpKSxnJiZkb21VdGlscy5pc0ZpbGxDaGFyKGcpJiZkb21VdGlscy5yZW1vdmUoZyk7dmFyIGg9YS5wcmV2aW91c1NpYmxpbmc7aCYmMT09aC5ub2RlVHlwZSYmaC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PWQmJihiKGgpfHxkb21VdGlscy5nZXRTdHlsZShoLFwibGlzdC1zdHlsZS10eXBlXCIpfHwoXCJvbFwiPT1kP1wiZGVjaW1hbFwiOlwiZGlzY1wiKSk9PWUmJmRvbVV0aWxzLm1vdmVDaGlsZChhLGgpLGgmJmRvbVV0aWxzLmlzRmlsbENoYXIoaCkmJmRvbVV0aWxzLnJlbW92ZShoKSwhZiYmZG9tVXRpbHMuaXNFbXB0eUJsb2NrKGEpJiZkb21VdGlscy5yZW1vdmUoYSksYihhKSYmYyhhLm93bmVyRG9jdW1lbnQsITApfWZ1bmN0aW9uIGUoYSxiKXtqW2JdJiYoYS5jbGFzc05hbWU9XCJjdXN0b21fXCIrYik7dHJ5e2RvbVV0aWxzLnNldFN0eWxlKGEsXCJsaXN0LXN0eWxlLXR5cGVcIixiKX1jYXRjaChjKXt9fWZ1bmN0aW9uIGYoYSl7dmFyIGI9YS5wcmV2aW91c1NpYmxpbmc7YiYmZG9tVXRpbHMuaXNFbXB0eUJsb2NrKGIpJiZkb21VdGlscy5yZW1vdmUoYiksYj1hLm5leHRTaWJsaW5nLGImJmRvbVV0aWxzLmlzRW1wdHlCbG9jayhiKSYmZG9tVXRpbHMucmVtb3ZlKGIpfWZ1bmN0aW9uIGcoYSl7Zm9yKDthJiYhZG9tVXRpbHMuaXNCb2R5KGEpOyl7aWYoXCJUQUJMRVwiPT1hLm5vZGVOYW1lKXJldHVybiBudWxsO2lmKFwiTElcIj09YS5ub2RlTmFtZSlyZXR1cm4gYTthPWEucGFyZW50Tm9kZX19dmFyIGg9dGhpcyxpPXtURDoxLFBSRToxLEJMT0NLUVVPVEU6MX0saj17Y246XCJjbi0xLVwiLGNuMTpcImNuLTItXCIsY24yOlwiY24tMy1cIixudW06XCJudW0tMS1cIixudW0xOlwibnVtLTItXCIsbnVtMjpcIm51bS0zLVwiLGRhc2g6XCJkYXNoXCIsZG90OlwiZG90XCJ9O2guc2V0T3B0KHthdXRvVHJhbnNXb3JkVG9MaXN0OiExLGluc2VydG9yZGVyZWRsaXN0OntudW06XCJcIixudW0xOlwiXCIsbnVtMjpcIlwiLGNuOlwiXCIsY24xOlwiXCIsY24yOlwiXCIsZGVjaW1hbDpcIlwiLFwibG93ZXItYWxwaGFcIjpcIlwiLFwibG93ZXItcm9tYW5cIjpcIlwiLFwidXBwZXItYWxwaGFcIjpcIlwiLFwidXBwZXItcm9tYW5cIjpcIlwifSxpbnNlcnR1bm9yZGVyZWRsaXN0OntjaXJjbGU6XCJcIixkaXNjOlwiXCIsc3F1YXJlOlwiXCIsZGFzaDpcIlwiLGRvdDpcIlwifSxsaXN0RGVmYXVsdFBhZGRpbmdMZWZ0OlwiMzBcIixsaXN0aWNvbnBhdGg6XCJodHRwOi8vYnMuYmFpZHUuY29tL2xpc3RpY29uL1wiLG1heExpc3RMZXZlbDotMSxkaXNhYmxlUEluTGlzdDohMX0pO3ZhciBrPXtPTDphKGgub3B0aW9ucy5pbnNlcnRvcmRlcmVkbGlzdCksVUw6YShoLm9wdGlvbnMuaW5zZXJ0dW5vcmRlcmVkbGlzdCl9LGw9aC5vcHRpb25zLmxpc3RpY29ucGF0aDtmb3IodmFyIG0gaW4gailoLm9wdGlvbnMuaW5zZXJ0b3JkZXJlZGxpc3QuaGFzT3duUHJvcGVydHkobSl8fGgub3B0aW9ucy5pbnNlcnR1bm9yZGVyZWRsaXN0Lmhhc093blByb3BlcnR5KG0pfHxkZWxldGUgalttXTtoLnJlYWR5KGZ1bmN0aW9uKCl7dmFyIGE9W107Zm9yKHZhciBiIGluIGope2lmKFwiZGFzaFwiPT1ifHxcImRvdFwiPT1iKWEucHVzaChcImxpLmxpc3QtXCIraltiXStcIntiYWNrZ3JvdW5kLWltYWdlOnVybChcIitsK2pbYl0rXCIuZ2lmKX1cIiksYS5wdXNoKFwidWwuY3VzdG9tX1wiK2IrXCJ7bGlzdC1zdHlsZTpub25lO311bC5jdXN0b21fXCIrYitcIiBsaXtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgM3B4O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdH1cIik7ZWxzZXtmb3IodmFyIGM9MDtjPDk5O2MrKylhLnB1c2goXCJsaS5saXN0LVwiK2pbYl0rYytcIntiYWNrZ3JvdW5kLWltYWdlOnVybChcIitsK1wibGlzdC1cIitqW2JdK2MrXCIuZ2lmKX1cIik7YS5wdXNoKFwib2wuY3VzdG9tX1wiK2IrXCJ7bGlzdC1zdHlsZTpub25lO31vbC5jdXN0b21fXCIrYitcIiBsaXtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgM3B4O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdH1cIil9c3dpdGNoKGIpe2Nhc2VcImNuXCI6YS5wdXNoKFwibGkubGlzdC1cIitiK1wiLXBhZGRpbmdsZWZ0LTF7cGFkZGluZy1sZWZ0OjI1cHh9XCIpLGEucHVzaChcImxpLmxpc3QtXCIrYitcIi1wYWRkaW5nbGVmdC0ye3BhZGRpbmctbGVmdDo0MHB4fVwiKSxhLnB1c2goXCJsaS5saXN0LVwiK2IrXCItcGFkZGluZ2xlZnQtM3twYWRkaW5nLWxlZnQ6NTVweH1cIik7YnJlYWs7Y2FzZVwiY24xXCI6YS5wdXNoKFwibGkubGlzdC1cIitiK1wiLXBhZGRpbmdsZWZ0LTF7cGFkZGluZy1sZWZ0OjMwcHh9XCIpLGEucHVzaChcImxpLmxpc3QtXCIrYitcIi1wYWRkaW5nbGVmdC0ye3BhZGRpbmctbGVmdDo0MHB4fVwiKSxhLnB1c2goXCJsaS5saXN0LVwiK2IrXCItcGFkZGluZ2xlZnQtM3twYWRkaW5nLWxlZnQ6NTVweH1cIik7YnJlYWs7Y2FzZVwiY24yXCI6YS5wdXNoKFwibGkubGlzdC1cIitiK1wiLXBhZGRpbmdsZWZ0LTF7cGFkZGluZy1sZWZ0OjQwcHh9XCIpLGEucHVzaChcImxpLmxpc3QtXCIrYitcIi1wYWRkaW5nbGVmdC0ye3BhZGRpbmctbGVmdDo1NXB4fVwiKSxhLnB1c2goXCJsaS5saXN0LVwiK2IrXCItcGFkZGluZ2xlZnQtM3twYWRkaW5nLWxlZnQ6NjhweH1cIik7YnJlYWs7Y2FzZVwibnVtXCI6Y2FzZVwibnVtMVwiOmEucHVzaChcImxpLmxpc3QtXCIrYitcIi1wYWRkaW5nbGVmdC0xe3BhZGRpbmctbGVmdDoyNXB4fVwiKTticmVhaztjYXNlXCJudW0yXCI6YS5wdXNoKFwibGkubGlzdC1cIitiK1wiLXBhZGRpbmdsZWZ0LTF7cGFkZGluZy1sZWZ0OjM1cHh9XCIpLGEucHVzaChcImxpLmxpc3QtXCIrYitcIi1wYWRkaW5nbGVmdC0ye3BhZGRpbmctbGVmdDo0MHB4fVwiKTticmVhaztjYXNlXCJkYXNoXCI6YS5wdXNoKFwibGkubGlzdC1cIitiK1wiLXBhZGRpbmdsZWZ0e3BhZGRpbmctbGVmdDozNXB4fVwiKTticmVhaztjYXNlXCJkb3RcIjphLnB1c2goXCJsaS5saXN0LVwiK2IrXCItcGFkZGluZ2xlZnR7cGFkZGluZy1sZWZ0OjIwcHh9XCIpfX1hLnB1c2goXCIubGlzdC1wYWRkaW5nbGVmdC0xe3BhZGRpbmctbGVmdDowfVwiKSxhLnB1c2goXCIubGlzdC1wYWRkaW5nbGVmdC0ye3BhZGRpbmctbGVmdDpcIitoLm9wdGlvbnMubGlzdERlZmF1bHRQYWRkaW5nTGVmdCtcInB4fVwiKSxhLnB1c2goXCIubGlzdC1wYWRkaW5nbGVmdC0ze3BhZGRpbmctbGVmdDpcIisyKmgub3B0aW9ucy5saXN0RGVmYXVsdFBhZGRpbmdMZWZ0K1wicHh9XCIpLHV0aWxzLmNzc1J1bGUoXCJsaXN0XCIsXCJvbCx1bHttYXJnaW46MDtwYWRpbmc6MDtcIisoYnJvd3Nlci5pZT9cIlwiOlwid2lkdGg6OTUlXCIpK1wifWxpe2NsZWFyOmJvdGg7fVwiK2Euam9pbihcIlxcblwiKSxoLmRvY3VtZW50KX0pLGgucmVhZHkoZnVuY3Rpb24oKXtkb21VdGlscy5vbihoLmJvZHksXCJjdXRcIixmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYSxiPWguc2VsZWN0aW9uLmdldFJhbmdlKCk7aWYoIWIuY29sbGFwc2VkJiYoYT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGIuc3RhcnRDb250YWluZXIsXCJsaVwiLCEwKSkmJiFhLm5leHRTaWJsaW5nJiZkb21VdGlscy5pc0VtcHR5QmxvY2soYSkpe3ZhciBjLGQ9YS5wYXJlbnROb2RlO2lmKGM9ZC5wcmV2aW91c1NpYmxpbmcpZG9tVXRpbHMucmVtb3ZlKGQpLGIuc2V0U3RhcnRBdExhc3QoYykuY29sbGFwc2UoITApLGIuc2VsZWN0KCEwKTtlbHNlIGlmKGM9ZC5uZXh0U2libGluZylkb21VdGlscy5yZW1vdmUoZCksYi5zZXRTdGFydEF0Rmlyc3QoYykuY29sbGFwc2UoITApLGIuc2VsZWN0KCEwKTtlbHNle3ZhciBlPWguZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7ZG9tVXRpbHMuZmlsbE5vZGUoaC5kb2N1bWVudCxlKSxkLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsZCksZG9tVXRpbHMucmVtb3ZlKGQpLGIuc2V0U3RhcnQoZSwwKS5jb2xsYXBzZSghMCksYi5zZWxlY3QoITApfX19KX0pfSksaC5hZGRMaXN0ZW5lcihcImJlZm9yZXBhc3RlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZCxlPXRoaXMsZj1lLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGc9VUUuaHRtbHBhcnNlcihjLmh0bWwsITApO2lmKGQ9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShmLnN0YXJ0Q29udGFpbmVyLFwibGlcIiwhMCkpe3ZhciBoPWQucGFyZW50Tm9kZSxpPVwiT0xcIj09aC50YWdOYW1lP1widWxcIjpcIm9sXCI7dXRpbHMuZWFjaChnLmdldE5vZGVzQnlUYWdOYW1lKGkpLGZ1bmN0aW9uKGMpe2lmKGMudGFnTmFtZT1oLnRhZ05hbWUsYy5zZXRBdHRyKCksYy5wYXJlbnROb2RlPT09ZylhPWIoaCl8fChcIk9MXCI9PWgudGFnTmFtZT9cImRlY2ltYWxcIjpcImRpc2NcIik7ZWxzZXt2YXIgZD1jLnBhcmVudE5vZGUuZ2V0QXR0cihcImNsYXNzXCIpO2E9ZCYmL2N1c3RvbV8vLnRlc3QoZCk/ZC5tYXRjaCgvY3VzdG9tXyhcXHcrKS8pWzFdOmMucGFyZW50Tm9kZS5nZXRTdHlsZShcImxpc3Qtc3R5bGUtdHlwZVwiKSxhfHwoYT1cIk9MXCI9PWgudGFnTmFtZT9cImRlY2ltYWxcIjpcImRpc2NcIil9dmFyIGU9dXRpbHMuaW5kZXhPZihrW2gudGFnTmFtZV0sYSk7Yy5wYXJlbnROb2RlIT09ZyYmKGU9ZSsxPT1rW2gudGFnTmFtZV0ubGVuZ3RoPzA6ZSsxKTt2YXIgZj1rW2gudGFnTmFtZV1bZV07altmXT9jLnNldEF0dHIoXCJjbGFzc1wiLFwiY3VzdG9tX1wiK2YpOmMuc2V0U3R5bGUoXCJsaXN0LXN0eWxlLXR5cGVcIixmKX0pfWMuaHRtbD1nLnRvSHRtbCgpfSksaC5nZXRPcHQoXCJkaXNhYmxlUEluTGlzdFwiKT09PSEwJiZoLmFkZE91dHB1dFJ1bGUoZnVuY3Rpb24oYSl7dXRpbHMuZWFjaChhLmdldE5vZGVzQnlUYWdOYW1lKFwibGlcIiksZnVuY3Rpb24oYSl7dmFyIGI9W10sYz0wO3V0aWxzLmVhY2goYS5jaGlsZHJlbixmdW5jdGlvbihkKXtpZihcInBcIj09ZC50YWdOYW1lKXtmb3IodmFyIGU7ZT1kLmNoaWxkcmVuLnBvcCgpOyliLnNwbGljZShjLDAsZSksZS5wYXJlbnROb2RlPWEsbGFzdE5vZGU9ZTtpZihlPWJbYi5sZW5ndGgtMV0sIWV8fFwiZWxlbWVudFwiIT1lLnR5cGV8fFwiYnJcIiE9ZS50YWdOYW1lKXt2YXIgZj1VRS51Tm9kZS5jcmVhdGVFbGVtZW50KFwiYnJcIik7Zi5wYXJlbnROb2RlPWEsYi5wdXNoKGYpfWM9Yi5sZW5ndGh9fSksYi5sZW5ndGgmJihhLmNoaWxkcmVuPWIpfSl9KSxoLmFkZElucHV0UnVsZShmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGU9Yi5maXJzdENoaWxkKCk7aWYoZSYmXCJlbGVtZW50XCI9PWUudHlwZSYmXCJzcGFuXCI9PWUudGFnTmFtZSYmL1dpbmdkaW5nc3xTeW1ib2wvLnRlc3QoZS5nZXRTdHlsZShcImZvbnQtZmFtaWx5XCIpKSl7Zm9yKHZhciBmIGluIGQpaWYoZFtmXT09ZS5kYXRhKXJldHVybiBmO3JldHVyblwiZGlzY1wifWZvcih2YXIgZiBpbiBjKWlmKGNbZl0udGVzdChhKSlyZXR1cm4gZn1pZih1dGlscy5lYWNoKGEuZ2V0Tm9kZXNCeVRhZ05hbWUoXCJsaVwiKSxmdW5jdGlvbihhKXtmb3IodmFyIGIsYz1VRS51Tm9kZS5jcmVhdGVFbGVtZW50KFwicFwiKSxkPTA7Yj1hLmNoaWxkcmVuW2RdOylcInRleHRcIj09Yi50eXBlfHxkdGQucFtiLnRhZ05hbWVdP2MuYXBwZW5kQ2hpbGQoYik6Yy5maXJzdENoaWxkKCk/KGEuaW5zZXJ0QmVmb3JlKGMsYiksYz1VRS51Tm9kZS5jcmVhdGVFbGVtZW50KFwicFwiKSxkKz0yKTpkKys7KGMuZmlyc3RDaGlsZCgpJiYhYy5wYXJlbnROb2RlfHwhYS5maXJzdENoaWxkKCkpJiZhLmFwcGVuZENoaWxkKGMpLGMuZmlyc3RDaGlsZCgpfHxjLmlubmVySFRNTChicm93c2VyLmllP1wiJm5ic3A7XCI6XCI8YnIvPlwiKTt2YXIgZT1hLmZpcnN0Q2hpbGQoKSxmPWUubGFzdENoaWxkKCk7ZiYmXCJ0ZXh0XCI9PWYudHlwZSYmL15cXHMqJC8udGVzdChmLmRhdGEpJiZlLnJlbW92ZUNoaWxkKGYpfSksaC5vcHRpb25zLmF1dG9UcmFuc1dvcmRUb0xpc3Qpe3ZhciBjPXtudW0xOi9eXFxkK1xcKS8sZGVjaW1hbDovXlxcZCtcXC4vLFwibG93ZXItYWxwaGFcIjovXlthLXpdK1xcKS8sXCJ1cHBlci1hbHBoYVwiOi9eW0EtWl0rXFwuLyxjbjovXltcXHU0RTAwXFx1NEU4Q1xcdTRFMDlcXHU1NkRCXFx1NTE2ZFxcdTRlOTRcXHU0ZTAzXFx1NTE2YlxcdTRlNWRdK1tcXHUzMDAxXS8sY24yOi9eXFwoW1xcdTRFMDBcXHU0RThDXFx1NEUwOVxcdTU2REJcXHU1MTZkXFx1NGU5NFxcdTRlMDNcXHU1MTZiXFx1NGU1ZF0rXFwpL30sZD17c3F1YXJlOlwiblwifTt1dGlscy5lYWNoKGEuZ2V0Tm9kZXNCeVRhZ05hbWUoXCJwXCIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoYSxiLGQpe2lmKFwib2xcIj09YS50YWdOYW1lKWlmKGJyb3dzZXIuaWUpe3ZhciBlPWIuZmlyc3RDaGlsZCgpO1wiZWxlbWVudFwiPT1lLnR5cGUmJlwic3BhblwiPT1lLnRhZ05hbWUmJmNbZF0udGVzdChlLmlubmVyVGV4dCgpKSYmYi5yZW1vdmVDaGlsZChlKX1lbHNlIGIuaW5uZXJIVE1MKGIuaW5uZXJIVE1MKCkucmVwbGFjZShjW2RdLFwiXCIpKTtlbHNlIGIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKCkpO3ZhciBmPVVFLnVOb2RlLmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtmLmFwcGVuZENoaWxkKGIpLGEuYXBwZW5kQ2hpbGQoZil9aWYoXCJNc29MaXN0UGFyYWdyYXBoXCI9PWEuZ2V0QXR0cihcImNsYXNzXCIpKXthLnNldFN0eWxlKFwibWFyZ2luXCIsXCJcIiksYS5zZXRTdHlsZShcIm1hcmdpbi1sZWZ0XCIsXCJcIiksYS5zZXRBdHRyKFwiY2xhc3NcIixcIlwiKTt2YXIgZSxmPWEsZz1hO2lmKFwibGlcIiE9YS5wYXJlbnROb2RlLnRhZ05hbWUmJihlPWIoYS5pbm5lclRleHQoKSxhKSkpe3ZhciBpPVVFLnVOb2RlLmNyZWF0ZUVsZW1lbnQoaC5vcHRpb25zLmluc2VydG9yZGVyZWRsaXN0Lmhhc093blByb3BlcnR5KGUpP1wib2xcIjpcInVsXCIpO2ZvcihqW2VdP2kuc2V0QXR0cihcImNsYXNzXCIsXCJjdXN0b21fXCIrZSk6aS5zZXRTdHlsZShcImxpc3Qtc3R5bGUtdHlwZVwiLGUpO2EmJlwibGlcIiE9YS5wYXJlbnROb2RlLnRhZ05hbWUmJmIoYS5pbm5lclRleHQoKSxhKTspZj1hLm5leHRTaWJsaW5nKCksZnx8YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpLGEpLGQoaSxhLGUpLGE9ZjshaS5wYXJlbnROb2RlJiZhJiZhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaSxhKX12YXIgaz1nLmZpcnN0Q2hpbGQoKTtrJiZcImVsZW1lbnRcIj09ay50eXBlJiZcInNwYW5cIj09ay50YWdOYW1lJiYvXlxccyooJm5ic3A7KStcXHMqJC8udGVzdChrLmlubmVyVGV4dCgpKSYmay5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGspfX0pfX0pLGguYWRkTGlzdGVuZXIoXCJjb250ZW50Y2hhbmdlXCIsZnVuY3Rpb24oKXtjKGguZG9jdW1lbnQpfSksaC5hZGRMaXN0ZW5lcihcImtleWRvd25cIixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtiLnByZXZlbnREZWZhdWx0P2IucHJldmVudERlZmF1bHQoKTpiLnJldHVyblZhbHVlPSExLGguZmlyZUV2ZW50KFwiY29udGVudGNoYW5nZVwiKSxoLnVuZG9NYW5nZXImJmgudW5kb01hbmdlci5zYXZlKCl9ZnVuY3Rpb24gZChhLGIpe2Zvcig7YSYmIWRvbVV0aWxzLmlzQm9keShhKTspe2lmKGIoYSkpcmV0dXJuIG51bGw7aWYoMT09YS5ub2RlVHlwZSYmL1tvdV1sL2kudGVzdChhLnRhZ05hbWUpKXJldHVybiBhO2E9YS5wYXJlbnROb2RlfXJldHVybiBudWxsfXZhciBlPWIua2V5Q29kZXx8Yi53aGljaDtpZigxMz09ZSYmIWIuc2hpZnRLZXkpe3ZhciBnPWguc2VsZWN0aW9uLmdldFJhbmdlKCksaT1kb21VdGlscy5maW5kUGFyZW50KGcuc3RhcnRDb250YWluZXIsZnVuY3Rpb24oYSl7cmV0dXJuIGRvbVV0aWxzLmlzQmxvY2tFbG0oYSl9LCEwKSxqPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZy5zdGFydENvbnRhaW5lcixcImxpXCIsITApO2lmKGkmJlwiUFJFXCIhPWkudGFnTmFtZSYmIWope3ZhciBrPWkuaW5uZXJIVE1MLnJlcGxhY2UobmV3IFJlZ0V4cChkb21VdGlscy5maWxsQ2hhcixcImdcIiksXCJcIik7L15cXHMqMVxccypcXC5bXlxcZF0vLnRlc3QoaykmJihpLmlubmVySFRNTD1rLnJlcGxhY2UoL15cXHMqMVxccypcXC4vLFwiXCIpLGcuc2V0U3RhcnRBdExhc3QoaSkuY29sbGFwc2UoITApLnNlbGVjdCgpLGguX19oYXNFbnRlckV4ZWNDb21tYW5kPSEwLGguZXhlY0NvbW1hbmQoXCJpbnNlcnRvcmRlcmVkbGlzdFwiKSxoLl9faGFzRW50ZXJFeGVjQ29tbWFuZD0hMSl9dmFyIGw9aC5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxtPWQobC5zdGFydENvbnRhaW5lcixmdW5jdGlvbihhKXtyZXR1cm5cIlRBQkxFXCI9PWEudGFnTmFtZX0pLG49bC5jb2xsYXBzZWQ/bTpkKGwuZW5kQ29udGFpbmVyLGZ1bmN0aW9uKGEpe3JldHVyblwiVEFCTEVcIj09YS50YWdOYW1lfSk7aWYobSYmbiYmbT09PW4pe2lmKCFsLmNvbGxhcHNlZCl7aWYobT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGwuc3RhcnRDb250YWluZXIsXCJsaVwiLCEwKSxuPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUobC5lbmRDb250YWluZXIsXCJsaVwiLCEwKSwhbXx8IW58fG0hPT1uKXt2YXIgbz1sLmNsb25lUmFuZ2UoKSxwPW8uY29sbGFwc2UoITEpLmNyZWF0ZUJvb2ttYXJrKCk7bC5kZWxldGVDb250ZW50cygpLG8ubW92ZVRvQm9va21hcmsocCk7dmFyIGo9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShvLnN0YXJ0Q29udGFpbmVyLFwibGlcIiwhMCk7cmV0dXJuIGYoaiksby5zZWxlY3QoKSx2b2lkIGMoKX1pZihsLmRlbGV0ZUNvbnRlbnRzKCksaj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGwuc3RhcnRDb250YWluZXIsXCJsaVwiLCEwKSxqJiZkb21VdGlscy5pc0VtcHR5QmxvY2soaikpcmV0dXJuIHY9ai5wcmV2aW91c1NpYmxpbmcsbmV4dD1qLm5leHRTaWJsaW5nLHM9aC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKSxkb21VdGlscy5maWxsTm9kZShoLmRvY3VtZW50LHMpLHE9ai5wYXJlbnROb2RlLHYmJm5leHQ/KGwuc2V0U3RhcnQobmV4dCwwKS5jb2xsYXBzZSghMCkuc2VsZWN0KCEwKSxkb21VdGlscy5yZW1vdmUoaikpOigodnx8bmV4dCkmJnY/ai5wYXJlbnROb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHMscS5uZXh0U2libGluZyk6cS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzLHEpLGRvbVV0aWxzLnJlbW92ZShqKSxxLmZpcnN0Q2hpbGR8fGRvbVV0aWxzLnJlbW92ZShxKSxsLnNldFN0YXJ0KHMsMCkuc2V0Q3Vyc29yKCkpLHZvaWQgYygpfWlmKGo9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShsLnN0YXJ0Q29udGFpbmVyLFwibGlcIiwhMCkpe1xuaWYoZG9tVXRpbHMuaXNFbXB0eUJsb2NrKGopKXtwPWwuY3JlYXRlQm9va21hcmsoKTt2YXIgcT1qLnBhcmVudE5vZGU7aWYoaiE9PXEubGFzdENoaWxkPyhkb21VdGlscy5icmVha1BhcmVudChqLHEpLGYoaikpOihxLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGoscS5uZXh0U2libGluZyksZG9tVXRpbHMuaXNFbXB0eU5vZGUocSkmJmRvbVV0aWxzLnJlbW92ZShxKSksIWR0ZC4kbGlzdFtqLnBhcmVudE5vZGUudGFnTmFtZV0paWYoZG9tVXRpbHMuaXNCbG9ja0VsbShqLmZpcnN0Q2hpbGQpKWRvbVV0aWxzLnJlbW92ZShqLCEwKTtlbHNle2ZvcihzPWguZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIiksai5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzLGopO2ouZmlyc3RDaGlsZDspcy5hcHBlbmRDaGlsZChqLmZpcnN0Q2hpbGQpO2RvbVV0aWxzLnJlbW92ZShqKX1sLm1vdmVUb0Jvb2ttYXJrKHApLnNlbGVjdCgpfWVsc2V7dmFyIHI9ai5maXJzdENoaWxkO2lmKCFyfHwhZG9tVXRpbHMuaXNCbG9ja0VsbShyKSl7dmFyIHM9aC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtmb3IoIWouZmlyc3RDaGlsZCYmZG9tVXRpbHMuZmlsbE5vZGUoaC5kb2N1bWVudCxzKTtqLmZpcnN0Q2hpbGQ7KXMuYXBwZW5kQ2hpbGQoai5maXJzdENoaWxkKTtqLmFwcGVuZENoaWxkKHMpLHI9c312YXIgdD1oLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2wuaW5zZXJ0Tm9kZSh0KSxkb21VdGlscy5icmVha1BhcmVudCh0LGopO3ZhciB1PXQubmV4dFNpYmxpbmc7cj11LmZpcnN0Q2hpbGQscnx8KHM9aC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKSxkb21VdGlscy5maWxsTm9kZShoLmRvY3VtZW50LHMpLHUuYXBwZW5kQ2hpbGQocykscj1zKSxkb21VdGlscy5pc0VtcHR5Tm9kZShyKSYmKHIuaW5uZXJIVE1MPVwiXCIsZG9tVXRpbHMuZmlsbE5vZGUoaC5kb2N1bWVudCxyKSksbC5zZXRTdGFydChyLDApLmNvbGxhcHNlKCEwKS5zaHJpbmtCb3VuZGFyeSgpLnNlbGVjdCgpLGRvbVV0aWxzLnJlbW92ZSh0KTt2YXIgdj11LnByZXZpb3VzU2libGluZzt2JiZkb21VdGlscy5pc0VtcHR5QmxvY2sodikmJih2LmlubmVySFRNTD1cIjxwPjwvcD5cIixkb21VdGlscy5maWxsTm9kZShoLmRvY3VtZW50LHYuZmlyc3RDaGlsZCkpfWMoKX19fWlmKDg9PWUmJihsPWguc2VsZWN0aW9uLmdldFJhbmdlKCksbC5jb2xsYXBzZWQmJmRvbVV0aWxzLmlzU3RhcnRJbmJsb2NrKGwpJiYobz1sLmNsb25lUmFuZ2UoKS50cmltQm91bmRhcnkoKSxqPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUobC5zdGFydENvbnRhaW5lcixcImxpXCIsITApLGomJmRvbVV0aWxzLmlzU3RhcnRJbmJsb2NrKG8pKSkpe2lmKG09ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShsLnN0YXJ0Q29udGFpbmVyLFwicFwiLCEwKSxtJiZtIT09ai5maXJzdENoaWxkKXt2YXIgcT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKG0sW1wib2xcIixcInVsXCJdKTtyZXR1cm4gZG9tVXRpbHMuYnJlYWtQYXJlbnQobSxxKSxmKG0pLGguZmlyZUV2ZW50KFwiY29udGVudGNoYW5nZVwiKSxsLnNldFN0YXJ0KG0sMCkuc2V0Q3Vyc29yKCExLCEwKSxoLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKSx2b2lkIGRvbVV0aWxzLnByZXZlbnREZWZhdWx0KGIpfWlmKGomJih2PWoucHJldmlvdXNTaWJsaW5nKSl7aWYoNDY9PWUmJmouY2hpbGROb2Rlcy5sZW5ndGgpcmV0dXJuO2lmKGR0ZC4kbGlzdFt2LnRhZ05hbWVdJiYodj12Lmxhc3RDaGlsZCksaC51bmRvTWFuZ2VyJiZoLnVuZG9NYW5nZXIuc2F2ZSgpLHI9ai5maXJzdENoaWxkLGRvbVV0aWxzLmlzQmxvY2tFbG0ocikpaWYoZG9tVXRpbHMuaXNFbXB0eU5vZGUocikpZm9yKHYuYXBwZW5kQ2hpbGQociksbC5zZXRTdGFydChyLDApLnNldEN1cnNvcighMSwhMCk7ai5maXJzdENoaWxkOyl2LmFwcGVuZENoaWxkKGouZmlyc3RDaGlsZCk7ZWxzZSB0PWguZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksbC5pbnNlcnROb2RlKHQpLGRvbVV0aWxzLmlzRW1wdHlCbG9jayh2KSYmKHYuaW5uZXJIVE1MPVwiXCIpLGRvbVV0aWxzLm1vdmVDaGlsZChqLHYpLGwuc2V0U3RhcnRCZWZvcmUodCkuY29sbGFwc2UoITApLnNlbGVjdCghMCksZG9tVXRpbHMucmVtb3ZlKHQpO2Vsc2UgaWYoZG9tVXRpbHMuaXNFbXB0eU5vZGUoaikpe3ZhciBzPWguZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7di5hcHBlbmRDaGlsZChzKSxsLnNldFN0YXJ0KHMsMCkuc2V0Q3Vyc29yKCl9ZWxzZSBmb3IobC5zZXRFbmQodix2LmNoaWxkTm9kZXMubGVuZ3RoKS5jb2xsYXBzZSgpLnNlbGVjdCghMCk7ai5maXJzdENoaWxkOyl2LmFwcGVuZENoaWxkKGouZmlyc3RDaGlsZCk7cmV0dXJuIGRvbVV0aWxzLnJlbW92ZShqKSxoLmZpcmVFdmVudChcImNvbnRlbnRjaGFuZ2VcIiksaC5maXJlRXZlbnQoXCJzYXZlU2NlbmVcIiksdm9pZCBkb21VdGlscy5wcmV2ZW50RGVmYXVsdChiKX1pZihqJiYhai5wcmV2aW91c1NpYmxpbmcpe3ZhciBxPWoucGFyZW50Tm9kZSxwPWwuY3JlYXRlQm9va21hcmsoKTtpZihkb21VdGlscy5pc1RhZ05vZGUocS5wYXJlbnROb2RlLFwib2wgdWxcIikpcS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqLHEpLGRvbVV0aWxzLmlzRW1wdHlOb2RlKHEpJiZkb21VdGlscy5yZW1vdmUocSk7ZWxzZXtmb3IoO2ouZmlyc3RDaGlsZDspcS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqLmZpcnN0Q2hpbGQscSk7ZG9tVXRpbHMucmVtb3ZlKGopLGRvbVV0aWxzLmlzRW1wdHlOb2RlKHEpJiZkb21VdGlscy5yZW1vdmUocSl9cmV0dXJuIGwubW92ZVRvQm9va21hcmsocCkuc2V0Q3Vyc29yKCExLCEwKSxoLmZpcmVFdmVudChcImNvbnRlbnRjaGFuZ2VcIiksaC5maXJlRXZlbnQoXCJzYXZlU2NlbmVcIiksdm9pZCBkb21VdGlscy5wcmV2ZW50RGVmYXVsdChiKX19fSksaC5hZGRMaXN0ZW5lcihcImtleXVwXCIsZnVuY3Rpb24oYSxjKXt2YXIgZT1jLmtleUNvZGV8fGMud2hpY2g7aWYoOD09ZSl7dmFyIGYsZz1oLnNlbGVjdGlvbi5nZXRSYW5nZSgpOyhmPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZy5zdGFydENvbnRhaW5lcixbXCJvbFwiLFwidWxcIl0sITApKSYmZChmLGYudGFnTmFtZS50b0xvd2VyQ2FzZSgpLGIoZil8fGRvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoZixcImxpc3Qtc3R5bGUtdHlwZVwiKSwhMCl9fSksaC5hZGRMaXN0ZW5lcihcInRhYmtleWRvd25cIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7aWYoaC5vcHRpb25zLm1heExpc3RMZXZlbCE9LTEpe2Zvcih2YXIgYj1hLnBhcmVudE5vZGUsYz0wOy9bb3VdbC9pLnRlc3QoYi50YWdOYW1lKTspYysrLGI9Yi5wYXJlbnROb2RlO2lmKGM+PWgub3B0aW9ucy5tYXhMaXN0TGV2ZWwpcmV0dXJuITB9fXZhciBjPWguc2VsZWN0aW9uLmdldFJhbmdlKCksZj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGMuc3RhcnRDb250YWluZXIsXCJsaVwiLCEwKTtpZihmKXt2YXIgZztpZighYy5jb2xsYXBzZWQpe2guZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpLGc9Yy5jcmVhdGVCb29rbWFyaygpO2Zvcih2YXIgaSxqLGw9MCxtPWRvbVV0aWxzLmZpbmRQYXJlbnRzKGYpO2o9bVtsKytdOylpZihkb21VdGlscy5pc1RhZ05vZGUoaixcIm9sIHVsXCIpKXtpPWo7YnJlYWt9dmFyIG49ZjtpZihnLmVuZClmb3IoO24mJiEoZG9tVXRpbHMuZ2V0UG9zaXRpb24obixnLmVuZCkmZG9tVXRpbHMuUE9TSVRJT05fRk9MTE9XSU5HKTspaWYoYShuKSluPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKG4sITEsbnVsbCxmdW5jdGlvbihhKXtyZXR1cm4gYSE9PWl9KTtlbHNle3ZhciBvPW4ucGFyZW50Tm9kZSxwPWguZG9jdW1lbnQuY3JlYXRlRWxlbWVudChvLnRhZ05hbWUpLHE9dXRpbHMuaW5kZXhPZihrW3AudGFnTmFtZV0sYihvKXx8ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShvLFwibGlzdC1zdHlsZS10eXBlXCIpKSxyPXErMT09a1twLnRhZ05hbWVdLmxlbmd0aD8wOnErMSxzPWtbcC50YWdOYW1lXVtyXTtmb3IoZShwLHMpLG8uaW5zZXJ0QmVmb3JlKHAsbik7biYmIShkb21VdGlscy5nZXRQb3NpdGlvbihuLGcuZW5kKSZkb21VdGlscy5QT1NJVElPTl9GT0xMT1dJTkcpOyl7aWYoZj1uLm5leHRTaWJsaW5nLHAuYXBwZW5kQ2hpbGQobiksIWZ8fGRvbVV0aWxzLmlzVGFnTm9kZShmLFwib2wgdWxcIikpe2lmKGYpZm9yKDsoZj1mLmZpcnN0Q2hpbGQpJiZcIkxJXCIhPWYudGFnTmFtZTspO2Vsc2UgZj1kb21VdGlscy5nZXROZXh0RG9tTm9kZShuLCExLG51bGwsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1pfSk7YnJlYWt9bj1mfWQocCxwLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxzKSxuPWZ9cmV0dXJuIGguZmlyZUV2ZW50KFwiY29udGVudGNoYW5nZVwiKSxjLm1vdmVUb0Jvb2ttYXJrKGcpLnNlbGVjdCgpLCEwfWlmKGEoZikpcmV0dXJuITA7dmFyIG89Zi5wYXJlbnROb2RlLHA9aC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KG8udGFnTmFtZSkscT11dGlscy5pbmRleE9mKGtbcC50YWdOYW1lXSxiKG8pfHxkb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKG8sXCJsaXN0LXN0eWxlLXR5cGVcIikpO3E9cSsxPT1rW3AudGFnTmFtZV0ubGVuZ3RoPzA6cSsxO3ZhciBzPWtbcC50YWdOYW1lXVtxXTtpZihlKHAscyksZG9tVXRpbHMuaXNTdGFydEluYmxvY2soYykpcmV0dXJuIGguZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpLGc9Yy5jcmVhdGVCb29rbWFyaygpLG8uaW5zZXJ0QmVmb3JlKHAsZikscC5hcHBlbmRDaGlsZChmKSxkKHAscC50YWdOYW1lLnRvTG93ZXJDYXNlKCkscyksaC5maXJlRXZlbnQoXCJjb250ZW50Y2hhbmdlXCIpLGMubW92ZVRvQm9va21hcmsoZykuc2VsZWN0KCEwKSwhMH19KSxoLmNvbW1hbmRzLmluc2VydG9yZGVyZWRsaXN0PWguY29tbWFuZHMuaW5zZXJ0dW5vcmRlcmVkbGlzdD17ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxjKXtjfHwoYz1cImluc2VydG9yZGVyZWRsaXN0XCI9PWEudG9Mb3dlckNhc2UoKT9cImRlY2ltYWxcIjpcImRpc2NcIik7dmFyIGY9dGhpcyxoPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksaj1mdW5jdGlvbihhKXtyZXR1cm4gMT09YS5ub2RlVHlwZT9cImJyXCIhPWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpOiFkb21VdGlscy5pc1doaXRlc3BhY2UoYSl9LGs9XCJpbnNlcnRvcmRlcmVkbGlzdFwiPT1hLnRvTG93ZXJDYXNlKCk/XCJvbFwiOlwidWxcIixsPWYuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2guYWRqdXN0bWVudEJvdW5kYXJ5KCkuc2hyaW5rQm91bmRhcnkoKTt2YXIgbSxuLG8scCxxPWguY3JlYXRlQm9va21hcmsoITApLHI9ZyhmLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHEuc3RhcnQpKSxzPTAsdD1nKGYuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocS5lbmQpKSx1PTA7aWYocnx8dCl7aWYociYmKG09ci5wYXJlbnROb2RlKSxxLmVuZHx8KHQ9ciksdCYmKG49dC5wYXJlbnROb2RlKSxtPT09bil7Zm9yKDtyIT09dDspe2lmKHA9cixyPXIubmV4dFNpYmxpbmcsIWRvbVV0aWxzLmlzQmxvY2tFbG0ocC5maXJzdENoaWxkKSl7Zm9yKHZhciB2PWYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7cC5maXJzdENoaWxkOyl2LmFwcGVuZENoaWxkKHAuZmlyc3RDaGlsZCk7cC5hcHBlbmRDaGlsZCh2KX1sLmFwcGVuZENoaWxkKHApfWlmKHA9Zi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxtLmluc2VydEJlZm9yZShwLHQpLCFkb21VdGlscy5pc0Jsb2NrRWxtKHQuZmlyc3RDaGlsZCkpe2Zvcih2PWYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7dC5maXJzdENoaWxkOyl2LmFwcGVuZENoaWxkKHQuZmlyc3RDaGlsZCk7dC5hcHBlbmRDaGlsZCh2KX1sLmFwcGVuZENoaWxkKHQpLGRvbVV0aWxzLmJyZWFrUGFyZW50KHAsbSksZG9tVXRpbHMuaXNFbXB0eU5vZGUocC5wcmV2aW91c1NpYmxpbmcpJiZkb21VdGlscy5yZW1vdmUocC5wcmV2aW91c1NpYmxpbmcpLGRvbVV0aWxzLmlzRW1wdHlOb2RlKHAubmV4dFNpYmxpbmcpJiZkb21VdGlscy5yZW1vdmUocC5uZXh0U2libGluZyk7dmFyIHc9YihtKXx8ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShtLFwibGlzdC1zdHlsZS10eXBlXCIpfHwoXCJpbnNlcnRvcmRlcmVkbGlzdFwiPT1hLnRvTG93ZXJDYXNlKCk/XCJkZWNpbWFsXCI6XCJkaXNjXCIpO2lmKG0udGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1rJiZ3PT1jKXtmb3IodmFyIHgseT0wLHo9Zi5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7eD1sLmZpcnN0Q2hpbGQ7KWlmKGRvbVV0aWxzLmlzVGFnTm9kZSh4LFwib2wgdWxcIikpei5hcHBlbmRDaGlsZCh4KTtlbHNlIGZvcig7eC5maXJzdENoaWxkOyl6LmFwcGVuZENoaWxkKHguZmlyc3RDaGlsZCksZG9tVXRpbHMucmVtb3ZlKHgpO3AucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoeixwKX1lbHNlIG89Zi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGspLGUobyxjKSxvLmFwcGVuZENoaWxkKGwpLHAucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobyxwKTtyZXR1cm4gZG9tVXRpbHMucmVtb3ZlKHApLG8mJmQobyxrLGMpLHZvaWQgaC5tb3ZlVG9Cb29rbWFyayhxKS5zZWxlY3QoKX1pZihyKXtmb3IoO3I7KXtpZihwPXIubmV4dFNpYmxpbmcsZG9tVXRpbHMuaXNUYWdOb2RlKHIsXCJvbCB1bFwiKSlsLmFwcGVuZENoaWxkKHIpO2Vsc2V7Zm9yKHZhciBBPWYuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLEI9MDtyLmZpcnN0Q2hpbGQ7KWRvbVV0aWxzLmlzQmxvY2tFbG0oci5maXJzdENoaWxkKSYmKEI9MSksQS5hcHBlbmRDaGlsZChyLmZpcnN0Q2hpbGQpO2lmKEIpbC5hcHBlbmRDaGlsZChBKTtlbHNle3ZhciBDPWYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7Qy5hcHBlbmRDaGlsZChBKSxsLmFwcGVuZENoaWxkKEMpfWRvbVV0aWxzLnJlbW92ZShyKX1yPXB9bS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShsLG0ubmV4dFNpYmxpbmcpLGRvbVV0aWxzLmlzRW1wdHlOb2RlKG0pPyhoLnNldFN0YXJ0QmVmb3JlKG0pLGRvbVV0aWxzLnJlbW92ZShtKSk6aC5zZXRTdGFydEFmdGVyKG0pLHM9MX1pZih0JiZkb21VdGlscy5pbkRvYyhuLGYuZG9jdW1lbnQpKXtmb3Iocj1uLmZpcnN0Q2hpbGQ7ciYmciE9PXQ7KXtpZihwPXIubmV4dFNpYmxpbmcsZG9tVXRpbHMuaXNUYWdOb2RlKHIsXCJvbCB1bFwiKSlsLmFwcGVuZENoaWxkKHIpO2Vsc2V7Zm9yKEE9Zi5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksQj0wO3IuZmlyc3RDaGlsZDspZG9tVXRpbHMuaXNCbG9ja0VsbShyLmZpcnN0Q2hpbGQpJiYoQj0xKSxBLmFwcGVuZENoaWxkKHIuZmlyc3RDaGlsZCk7Qj9sLmFwcGVuZENoaWxkKEEpOihDPWYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIiksQy5hcHBlbmRDaGlsZChBKSxsLmFwcGVuZENoaWxkKEMpKSxkb21VdGlscy5yZW1vdmUocil9cj1wfXZhciBEPWRvbVV0aWxzLmNyZWF0ZUVsZW1lbnQoZi5kb2N1bWVudCxcImRpdlwiLHt0bXBEaXY6MX0pO2RvbVV0aWxzLm1vdmVDaGlsZCh0LEQpLGwuYXBwZW5kQ2hpbGQoRCksZG9tVXRpbHMucmVtb3ZlKHQpLG4ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobCxuKSxoLnNldEVuZEJlZm9yZShuKSxkb21VdGlscy5pc0VtcHR5Tm9kZShuKSYmZG9tVXRpbHMucmVtb3ZlKG4pLHU9MX19c3x8aC5zZXRTdGFydEJlZm9yZShmLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHEuc3RhcnQpKSxxLmVuZCYmIXUmJmguc2V0RW5kQWZ0ZXIoZi5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChxLmVuZCkpLGguZW5sYXJnZSghMCxmdW5jdGlvbihhKXtyZXR1cm4gaVthLnRhZ05hbWVdfSksbD1mLmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmb3IodmFyIEUsRj1oLmNyZWF0ZUJvb2ttYXJrKCksRz1kb21VdGlscy5nZXROZXh0RG9tTm9kZShGLnN0YXJ0LCExLGopLEg9aC5jbG9uZVJhbmdlKCksST1kb21VdGlscy5pc0Jsb2NrRWxtO0cmJkchPT1GLmVuZCYmZG9tVXRpbHMuZ2V0UG9zaXRpb24oRyxGLmVuZCkmZG9tVXRpbHMuUE9TSVRJT05fUFJFQ0VESU5HOylpZigzPT1HLm5vZGVUeXBlfHxkdGQubGlbRy50YWdOYW1lXSl7aWYoMT09Ry5ub2RlVHlwZSYmZHRkLiRsaXN0W0cudGFnTmFtZV0pe2Zvcig7Ry5maXJzdENoaWxkOylsLmFwcGVuZENoaWxkKEcuZmlyc3RDaGlsZCk7RT1kb21VdGlscy5nZXROZXh0RG9tTm9kZShHLCExLGopLGRvbVV0aWxzLnJlbW92ZShHKSxHPUU7Y29udGludWV9Zm9yKEU9RyxILnNldFN0YXJ0QmVmb3JlKEcpO0cmJkchPT1GLmVuZCYmKCFJKEcpfHxkb21VdGlscy5pc0Jvb2ttYXJrTm9kZShHKSk7KUU9RyxHPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKEcsITEsbnVsbCxmdW5jdGlvbihhKXtyZXR1cm4haVthLnRhZ05hbWVdfSk7RyYmSShHKSYmKHA9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoRSwhMSxqKSxwJiZkb21VdGlscy5pc0Jvb2ttYXJrTm9kZShwKSYmKEc9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUocCwhMSxqKSxFPXApKSxILnNldEVuZEFmdGVyKEUpLEc9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoRSwhMSxqKTt2YXIgSj1oLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtpZihKLmFwcGVuZENoaWxkKEguZXh0cmFjdENvbnRlbnRzKCkpLGRvbVV0aWxzLmlzRW1wdHlOb2RlKEopKXtmb3IodmFyIEU9aC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtKLmZpcnN0Q2hpbGQ7KUUuYXBwZW5kQ2hpbGQoSi5maXJzdENoaWxkKTtKLmFwcGVuZENoaWxkKEUpfWwuYXBwZW5kQ2hpbGQoSil9ZWxzZSBHPWRvbVV0aWxzLmdldE5leHREb21Ob2RlKEcsITAsaik7aC5tb3ZlVG9Cb29rbWFyayhGKS5jb2xsYXBzZSghMCksbz1mLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoayksZShvLGMpLG8uYXBwZW5kQ2hpbGQobCksaC5pbnNlcnROb2RlKG8pLGQobyxrLGMpO2Zvcih2YXIgeCx5PTAsSz1kb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShvLFwiZGl2XCIpO3g9S1t5KytdOyl4LmdldEF0dHJpYnV0ZShcInRtcERpdlwiKSYmZG9tVXRpbHMucmVtb3ZlKHgsITApO2gubW92ZVRvQm9va21hcmsocSkuc2VsZWN0KCl9LHF1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPVwiaW5zZXJ0b3JkZXJlZGxpc3RcIj09YS50b0xvd2VyQ2FzZSgpP1wib2xcIjpcInVsXCIsZD10aGlzLnNlbGVjdGlvbi5nZXRTdGFydEVsZW1lbnRQYXRoKCksZT0wO2I9ZFtlKytdOyl7aWYoXCJUQUJMRVwiPT1iLm5vZGVOYW1lKXJldHVybiAwO2lmKGM9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4gMX1yZXR1cm4gMH0scXVlcnlDb21tYW5kVmFsdWU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQsZT1cImluc2VydG9yZGVyZWRsaXN0XCI9PWEudG9Mb3dlckNhc2UoKT9cIm9sXCI6XCJ1bFwiLGY9dGhpcy5zZWxlY3Rpb24uZ2V0U3RhcnRFbGVtZW50UGF0aCgpLGc9MDtkPWZbZysrXTspe2lmKFwiVEFCTEVcIj09ZC5ub2RlTmFtZSl7Yz1udWxsO2JyZWFrfWlmKGU9PWQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Yz1kO2JyZWFrfX1yZXR1cm4gYz9iKGMpfHxkb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGMsXCJsaXN0LXN0eWxlLXR5cGVcIik6bnVsbH19fSxmdW5jdGlvbigpe3ZhciBhPXt0ZXh0YXJlYTpmdW5jdGlvbihhLGIpe3ZhciBjPWIub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7cmV0dXJuIGMuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmFic29sdXRlO3Jlc2l6ZTpub25lO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7Ym9yZGVyOjA7cGFkZGluZzowO21hcmdpbjowO292ZXJmbG93LXk6YXV0bztcIixicm93c2VyLmllJiZicm93c2VyLnZlcnNpb248OCYmKGMuc3R5bGUud2lkdGg9Yi5vZmZzZXRXaWR0aCtcInB4XCIsYy5zdHlsZS5oZWlnaHQ9Yi5vZmZzZXRIZWlnaHQrXCJweFwiLGIub25yZXNpemU9ZnVuY3Rpb24oKXtjLnN0eWxlLndpZHRoPWIub2Zmc2V0V2lkdGgrXCJweFwiLGMuc3R5bGUuaGVpZ2h0PWIub2Zmc2V0SGVpZ2h0K1wicHhcIn0pLGIuYXBwZW5kQ2hpbGQoYykse3NldENvbnRlbnQ6ZnVuY3Rpb24oYSl7Yy52YWx1ZT1hfSxnZXRDb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGMudmFsdWV9LHNlbGVjdDpmdW5jdGlvbigpe3ZhciBhO2Jyb3dzZXIuaWU/KGE9Yy5jcmVhdGVUZXh0UmFuZ2UoKSxhLmNvbGxhcHNlKCEwKSxhLnNlbGVjdCgpKTooYy5zZXRTZWxlY3Rpb25SYW5nZSgwLDApLGMuZm9jdXMoKSl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtiLnJlbW92ZUNoaWxkKGMpLGIub25yZXNpemU9bnVsbCxjPW51bGwsYj1udWxsfX19LGNvZGVtaXJyb3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz13aW5kb3cuQ29kZU1pcnJvcihiLHttb2RlOlwidGV4dC9odG1sXCIsdGFiTW9kZTpcImluZGVudFwiLGxpbmVOdW1iZXJzOiEwLGxpbmVXcmFwcGluZzohMH0pLGQ9Yy5nZXRXcmFwcGVyRWxlbWVudCgpO3JldHVybiBkLnN0eWxlLmNzc1RleHQ9J3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2ZvbnQtZmFtaWx5OmNvbnNvbGFzLFwiQ291cmllciBuZXdcIixtb25vc3BhY2U7Zm9udC1zaXplOjEzcHg7JyxjLmdldFNjcm9sbGVyRWxlbWVudCgpLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtcIixjLnJlZnJlc2goKSx7Z2V0Q29kZU1pcnJvcjpmdW5jdGlvbigpe3JldHVybiBjfSxzZXRDb250ZW50OmZ1bmN0aW9uKGEpe2Muc2V0VmFsdWUoYSl9LGdldENvbnRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5nZXRWYWx1ZSgpfSxzZWxlY3Q6ZnVuY3Rpb24oKXtjLmZvY3VzKCl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtiLnJlbW92ZUNoaWxkKGQpLGQ9bnVsbCxjPW51bGx9fX19O1VFLnBsdWdpbnMuc291cmNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihiKXtyZXR1cm4gYVtcImNvZGVtaXJyb3JcIj09Zi5zb3VyY2VFZGl0b3ImJndpbmRvdy5Db2RlTWlycm9yP1wiY29kZW1pcnJvclwiOlwidGV4dGFyZWFcIl0oZSxiKX12YXIgYyxkLGU9dGhpcyxmPXRoaXMub3B0aW9ucyxnPSExO2Yuc291cmNlRWRpdG9yPWJyb3dzZXIuaWU/XCJ0ZXh0YXJlYVwiOmYuc291cmNlRWRpdG9yfHxcImNvZGVtaXJyb3JcIixlLnNldE9wdCh7c291cmNlRWRpdG9yRmlyc3Q6ITF9KTt2YXIgaCxpLGo7ZS5jb21tYW5kcy5zb3VyY2U9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKCl7aWYoZz0hZyl7aj1lLnNlbGVjdGlvbi5nZXRSYW5nZSgpLmNyZWF0ZUFkZHJlc3MoITEsITApLGUudW5kb01hbmdlciYmZS51bmRvTWFuZ2VyLnNhdmUoITApLGJyb3dzZXIuZ2Vja28mJihlLmJvZHkuY29udGVudEVkaXRhYmxlPSExKSxoPWUuaWZyYW1lLnN0eWxlLmNzc1RleHQsZS5pZnJhbWUuc3R5bGUuY3NzVGV4dCs9XCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0zMjc2OHB4O3RvcDotMzI3NjhweDtcIixlLmZpcmVFdmVudChcImJlZm9yZWdldGNvbnRlbnRcIik7dmFyIGE9VUUuaHRtbHBhcnNlcihlLmJvZHkuaW5uZXJIVE1MKTtlLmZpbHRlck91dHB1dFJ1bGUoYSksYS50cmF2ZXJzYWwoZnVuY3Rpb24oYSl7aWYoXCJlbGVtZW50XCI9PWEudHlwZSlzd2l0Y2goYS50YWdOYW1lKXtjYXNlXCJ0ZFwiOmNhc2VcInRoXCI6Y2FzZVwiY2FwdGlvblwiOmEuY2hpbGRyZW4mJjE9PWEuY2hpbGRyZW4ubGVuZ3RoJiZcImJyXCI9PWEuZmlyc3RDaGlsZCgpLnRhZ05hbWUmJmEucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKCkpO2JyZWFrO2Nhc2VcInByZVwiOmEuaW5uZXJUZXh0KGEuaW5uZXJUZXh0KCkucmVwbGFjZSgvJm5ic3A7L2csXCIgXCIpKX19KSxlLmZpcmVFdmVudChcImFmdGVyZ2V0Y29udGVudFwiKTt2YXIgZj1hLnRvSHRtbCghMCk7Yz1iKGUuaWZyYW1lLnBhcmVudE5vZGUpLGMuc2V0Q29udGVudChmKSxkPWUuc2V0Q29udGVudCxlLnNldENvbnRlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9VUUuaHRtbHBhcnNlcihhKTtlLmZpbHRlcklucHV0UnVsZShiKSxhPWIudG9IdG1sKCksYy5zZXRDb250ZW50KGEpfSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5zZWxlY3QoKSxlLmFkZExpc3RlbmVyKFwiZnVsbHNjcmVlbmNoYW5nZWRcIixmdW5jdGlvbigpe3RyeXtjLmdldENvZGVNaXJyb3IoKS5yZWZyZXNoKCl9Y2F0Y2goYSl7fX0pfSksaT1lLmdldENvbnRlbnQsZS5nZXRDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGMuZ2V0Q29udGVudCgpfHxcIjxwPlwiKyhicm93c2VyLmllP1wiXCI6XCI8YnIvPlwiKStcIjwvcD5cIn19ZWxzZXtlLmlmcmFtZS5zdHlsZS5jc3NUZXh0PWg7dmFyIGs9Yy5nZXRDb250ZW50KCl8fFwiPHA+XCIrKGJyb3dzZXIuaWU/XCJcIjpcIjxici8+XCIpK1wiPC9wPlwiO2s9ay5yZXBsYWNlKG5ldyBSZWdFeHAoXCJbXFxcXHJcXFxcdFxcXFxuIF0qPC8/KFxcXFx3KylcXFxccyooPzpbXj5dKik+XCIsXCJnXCIpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGImJiFkdGQuJGlubGluZVdpdGhBW2IudG9Mb3dlckNhc2UoKV0/YS5yZXBsYWNlKC8oXltcXG5cXHJcXHQgXSopfChbXFxuXFxyXFx0IF0qJCkvZyxcIlwiKTphLnJlcGxhY2UoLyheW1xcblxcclxcdF0qKXwoW1xcblxcclxcdF0qJCkvZyxcIlwiKX0pLGUuc2V0Q29udGVudD1kLGUuc2V0Q29udGVudChrKSxjLmRpc3Bvc2UoKSxjPW51bGwsZS5nZXRDb250ZW50PWk7dmFyIGw9ZS5ib2R5LmZpcnN0Q2hpbGQ7aWYobHx8KGUuYm9keS5pbm5lckhUTUw9XCI8cD5cIisoYnJvd3Nlci5pZT9cIlwiOlwiPGJyLz5cIikrXCI8L3A+XCIsbD1lLmJvZHkuZmlyc3RDaGlsZCksZS51bmRvTWFuZ2VyJiZlLnVuZG9NYW5nZXIuc2F2ZSghMCksYnJvd3Nlci5nZWNrbyl7dmFyIG09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO20uc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6LTMyNzY4cHhcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG0pLGUuYm9keS5jb250ZW50RWRpdGFibGU9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe2RvbVV0aWxzLnNldFZpZXdwb3J0T2Zmc2V0KG0se2xlZnQ6LTMyNzY4LHRvcDowfSksbS5mb2N1cygpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmJvZHkuY29udGVudEVkaXRhYmxlPSEwLGUuc2VsZWN0aW9uLmdldFJhbmdlKCkubW92ZVRvQWRkcmVzcyhqKS5zZWxlY3QoITApLGRvbVV0aWxzLnJlbW92ZShtKX0pfSl9ZWxzZSB0cnl7ZS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5tb3ZlVG9BZGRyZXNzKGopLnNlbGVjdCghMCl9Y2F0Y2gobil7fX10aGlzLmZpcmVFdmVudChcInNvdXJjZW1vZGVjaGFuZ2VkXCIsZyl9LHF1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIDB8Z30sbm90TmVlZFVuZG86MX07dmFyIGs9ZS5xdWVyeUNvbW1hbmRTdGF0ZTtlLnF1ZXJ5Q29tbWFuZFN0YXRlPWZ1bmN0aW9uKGEpe3JldHVybiBhPWEudG9Mb3dlckNhc2UoKSxnP2EgaW57c291cmNlOjEsZnVsbHNjcmVlbjoxfT8xOi0xOmsuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxcImNvZGVtaXJyb3JcIj09Zi5zb3VyY2VFZGl0b3ImJmUuYWRkTGlzdGVuZXIoXCJyZWFkeVwiLGZ1bmN0aW9uKCl7dXRpbHMubG9hZEZpbGUoZG9jdW1lbnQse3NyYzpmLmNvZGVNaXJyb3JKc1VybHx8Zi5VRURJVE9SX0hPTUVfVVJMK1widGhpcmQtcGFydHkvY29kZW1pcnJvci9jb2RlbWlycm9yLmpzXCIsdGFnOlwic2NyaXB0XCIsdHlwZTpcInRleHQvamF2YXNjcmlwdFwiLGRlZmVyOlwiZGVmZXJcIn0sZnVuY3Rpb24oKXtmLnNvdXJjZUVkaXRvckZpcnN0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5leGVjQ29tbWFuZChcInNvdXJjZVwiKX0sMCl9KSx1dGlscy5sb2FkRmlsZShkb2N1bWVudCx7dGFnOlwibGlua1wiLHJlbDpcInN0eWxlc2hlZXRcIix0eXBlOlwidGV4dC9jc3NcIixocmVmOmYuY29kZU1pcnJvckNzc1VybHx8Zi5VRURJVE9SX0hPTUVfVVJMK1widGhpcmQtcGFydHkvY29kZW1pcnJvci9jb2RlbWlycm9yLmNzc1wifSl9KX19KCksVUUucGx1Z2lucy5lbnRlcmtleT1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcyxjPWIub3B0aW9ucy5lbnRlclRhZztiLmFkZExpc3RlbmVyKFwia2V5dXBcIixmdW5jdGlvbihjLGQpe3ZhciBlPWQua2V5Q29kZXx8ZC53aGljaDtpZigxMz09ZSl7dmFyIGYsZz1iLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGg9Zy5zdGFydENvbnRhaW5lcjtpZihicm93c2VyLmllKWIuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIsITAsITApO2Vsc2V7aWYoL2hcXGQvaS50ZXN0KGEpKXtpZihicm93c2VyLmdlY2tvKXt2YXIgaT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGgsW1wiaDFcIixcImgyXCIsXCJoM1wiLFwiaDRcIixcImg1XCIsXCJoNlwiLFwiYmxvY2txdW90ZVwiLFwiY2FwdGlvblwiLFwidGFibGVcIl0sITApO2l8fChiLmRvY3VtZW50LmV4ZWNDb21tYW5kKFwiZm9ybWF0QmxvY2tcIiwhMSxcIjxwPlwiKSxmPTEpfWVsc2UgaWYoMT09aC5ub2RlVHlwZSl7dmFyIGosaz1iLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO2lmKGcuaW5zZXJ0Tm9kZShrKSxqPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoayxcImRpdlwiLCEwKSl7Zm9yKHZhciBsPWIuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7ai5maXJzdENoaWxkOylsLmFwcGVuZENoaWxkKGouZmlyc3RDaGlsZCk7ai5wYXJlbnROb2RlLmluc2VydEJlZm9yZShsLGopLGRvbVV0aWxzLnJlbW92ZShqKSxnLnNldFN0YXJ0QmVmb3JlKGspLnNldEN1cnNvcigpLGY9MX1kb21VdGlscy5yZW1vdmUoayl9Yi51bmRvTWFuZ2VyJiZmJiZiLnVuZG9NYW5nZXIuc2F2ZSgpfWJyb3dzZXIub3BlcmEmJmcuc2VsZWN0KCl9fX0pLGIuYWRkTGlzdGVuZXIoXCJrZXlkb3duXCIsZnVuY3Rpb24oZCxlKXt2YXIgZj1lLmtleUNvZGV8fGUud2hpY2g7aWYoMTM9PWYpe2lmKGIuZmlyZUV2ZW50KFwiYmVmb3JlZW50ZXJrZXlkb3duXCIpKXJldHVybiB2b2lkIGRvbVV0aWxzLnByZXZlbnREZWZhdWx0KGUpO2IuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIsITAsITApLGE9XCJcIjt2YXIgZz1iLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKCFnLmNvbGxhcHNlZCl7dmFyIGg9Zy5zdGFydENvbnRhaW5lcixpPWcuZW5kQ29udGFpbmVyLGo9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShoLFwidGRcIiwhMCksaz1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGksXCJ0ZFwiLCEwKTtpZihqJiZrJiZqIT09a3x8IWomJmt8fGomJiFrKXJldHVybiB2b2lkKGUucHJldmVudERlZmF1bHQ/ZS5wcmV2ZW50RGVmYXVsdCgpOmUucmV0dXJuVmFsdWU9ITEpfWlmKFwicFwiPT1jKWJyb3dzZXIuaWV8fChoPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZy5zdGFydENvbnRhaW5lcixbXCJvbFwiLFwidWxcIixcInBcIixcImgxXCIsXCJoMlwiLFwiaDNcIixcImg0XCIsXCJoNVwiLFwiaDZcIixcImJsb2NrcXVvdGVcIixcImNhcHRpb25cIl0sITApLGh8fGJyb3dzZXIub3BlcmE/KGE9aC50YWdOYW1lLFwicFwiPT1oLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmYnJvd3Nlci5nZWNrbyYmZG9tVXRpbHMucmVtb3ZlRGlydHlBdHRyKGgpKTooYi5kb2N1bWVudC5leGVjQ29tbWFuZChcImZvcm1hdEJsb2NrXCIsITEsXCI8cD5cIiksYnJvd3Nlci5nZWNrbyYmKGc9Yi5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxoPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZy5zdGFydENvbnRhaW5lcixcInBcIiwhMCksaCYmZG9tVXRpbHMucmVtb3ZlRGlydHlBdHRyKGgpKSkpO2Vsc2UgaWYoZS5wcmV2ZW50RGVmYXVsdD9lLnByZXZlbnREZWZhdWx0KCk6ZS5yZXR1cm5WYWx1ZT0hMSxnLmNvbGxhcHNlZCl7bT1nLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSxnLmluc2VydE5vZGUobSk7dmFyIGw9bS5wYXJlbnROb2RlO2wubGFzdENoaWxkPT09bT8obS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShtLmNsb25lTm9kZSghMCksbSksZy5zZXRTdGFydEJlZm9yZShtKSk6Zy5zZXRTdGFydEFmdGVyKG0pLGcuc2V0Q3Vyc29yKCl9ZWxzZSBpZihnLmRlbGV0ZUNvbnRlbnRzKCksaD1nLnN0YXJ0Q29udGFpbmVyLDE9PWgubm9kZVR5cGUmJihoPWguY2hpbGROb2Rlc1tnLnN0YXJ0T2Zmc2V0XSkpe2Zvcig7MT09aC5ub2RlVHlwZTspe2lmKGR0ZC4kZW1wdHlbaC50YWdOYW1lXSlyZXR1cm4gZy5zZXRTdGFydEJlZm9yZShoKS5zZXRDdXJzb3IoKSxiLnVuZG9NYW5nZXImJmIudW5kb01hbmdlci5zYXZlKCksITE7aWYoIWguZmlyc3RDaGlsZCl7dmFyIG09Zy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIik7cmV0dXJuIGguYXBwZW5kQ2hpbGQobSksZy5zZXRTdGFydChoLDApLnNldEN1cnNvcigpLGIudW5kb01hbmdlciYmYi51bmRvTWFuZ2VyLnNhdmUoKSwhMX1oPWguZmlyc3RDaGlsZH1oPT09Zy5zdGFydENvbnRhaW5lci5jaGlsZE5vZGVzW2cuc3RhcnRPZmZzZXRdPyhtPWcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpLGcuaW5zZXJ0Tm9kZShtKS5zZXRDdXJzb3IoKSk6Zy5zZXRTdGFydChoLDApLnNldEN1cnNvcigpfWVsc2UgbT1nLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSxnLmluc2VydE5vZGUobSkuc2V0U3RhcnRBZnRlcihtKS5zZXRDdXJzb3IoKX19KX0sVUUucGx1Z2lucy5rZXlzdHJva2VzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPSEwO2EuYWRkTGlzdGVuZXIoXCJrZXlkb3duXCIsZnVuY3Rpb24oYyxkKXt2YXIgZT1kLmtleUNvZGV8fGQud2hpY2gsZj1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKCFmLmNvbGxhcHNlZCYmIShkLmN0cmxLZXl8fGQuc2hpZnRLZXl8fGQuYWx0S2V5fHxkLm1ldGFLZXkpJiYoZT49NjUmJmU8PTkwfHxlPj00OCYmZTw9NTd8fGU+PTk2JiZlPD0xMTF8fHsxMzoxLDg6MSw0NjoxfVtlXSkpe3ZhciBnPWYuc3RhcnRDb250YWluZXI7aWYoZG9tVXRpbHMuaXNGaWxsQ2hhcihnKSYmZi5zZXRTdGFydEJlZm9yZShnKSxnPWYuZW5kQ29udGFpbmVyLGRvbVV0aWxzLmlzRmlsbENoYXIoZykmJmYuc2V0RW5kQWZ0ZXIoZyksZi50eHRUb0VsbUJvdW5kYXJ5KCksZi5lbmRDb250YWluZXImJjE9PWYuZW5kQ29udGFpbmVyLm5vZGVUeXBlJiYoZz1mLmVuZENvbnRhaW5lci5jaGlsZE5vZGVzW2YuZW5kT2Zmc2V0XSxnJiZkb21VdGlscy5pc0JyKGcpJiZmLnNldEVuZEFmdGVyKGcpKSwwPT1mLnN0YXJ0T2Zmc2V0JiYoZz1mLnN0YXJ0Q29udGFpbmVyLGRvbVV0aWxzLmlzQm91bmRhcnlOb2RlKGcsXCJmaXJzdENoaWxkXCIpJiYoZz1mLmVuZENvbnRhaW5lcixmLmVuZE9mZnNldD09KDM9PWcubm9kZVR5cGU/Zy5ub2RlVmFsdWUubGVuZ3RoOmcuY2hpbGROb2Rlcy5sZW5ndGgpJiZkb21VdGlscy5pc0JvdW5kYXJ5Tm9kZShnLFwibGFzdENoaWxkXCIpKSkpcmV0dXJuIGEuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpLGEuYm9keS5pbm5lckhUTUw9XCI8cD5cIisoYnJvd3Nlci5pZT9cIlwiOlwiPGJyLz5cIikrXCI8L3A+XCIsZi5zZXRTdGFydChhLmJvZHkuZmlyc3RDaGlsZCwwKS5zZXRDdXJzb3IoITEsITApLHZvaWQgYS5fc2VsZWN0aW9uQ2hhbmdlKCl9aWYoZT09a2V5bWFwLkJhY2tzcGFjZSl7aWYoZj1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGI9Zi5jb2xsYXBzZWQsYS5maXJlRXZlbnQoXCJkZWxrZXlkb3duXCIsZCkpcmV0dXJuO3ZhciBoLGk7aWYoZi5jb2xsYXBzZWQmJmYuaW5GaWxsQ2hhcigpJiYoaD1mLnN0YXJ0Q29udGFpbmVyLGRvbVV0aWxzLmlzRmlsbENoYXIoaCk/KGYuc2V0U3RhcnRCZWZvcmUoaCkuc2hyaW5rQm91bmRhcnkoITApLmNvbGxhcHNlKCEwKSxkb21VdGlscy5yZW1vdmUoaCkpOihoLm5vZGVWYWx1ZT1oLm5vZGVWYWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCJeXCIrZG9tVXRpbHMuZmlsbENoYXIpLFwiXCIpLGYuc3RhcnRPZmZzZXQtLSxmLmNvbGxhcHNlKCEwKS5zZWxlY3QoITApKSksaD1mLmdldENsb3NlZE5vZGUoKSlyZXR1cm4gYS5maXJlRXZlbnQoXCJzYXZlU2NlbmVcIiksZi5zZXRTdGFydEJlZm9yZShoKSxkb21VdGlscy5yZW1vdmUoaCksZi5zZXRDdXJzb3IoKSxhLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKSx2b2lkIGRvbVV0aWxzLnByZXZlbnREZWZhdWx0KGQpO2lmKCFicm93c2VyLmllJiYoaD1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGYuc3RhcnRDb250YWluZXIsXCJ0YWJsZVwiLCEwKSxpPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZi5lbmRDb250YWluZXIsXCJ0YWJsZVwiLCEwKSxoJiYhaXx8IWgmJml8fGghPT1pKSlyZXR1cm4gdm9pZCBkLnByZXZlbnREZWZhdWx0KCl9aWYoZT09a2V5bWFwLlRhYil7dmFyIGo9e29sOjEsdWw6MSx0YWJsZToxfTtpZihhLmZpcmVFdmVudChcInRhYmtleWRvd25cIixkKSlyZXR1cm4gdm9pZCBkb21VdGlscy5wcmV2ZW50RGVmYXVsdChkKTt2YXIgaz1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2EuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpO2Zvcih2YXIgbD0wLG09XCJcIixuPWEub3B0aW9ucy50YWJTaXplfHw0LG89YS5vcHRpb25zLnRhYk5vZGV8fFwiJm5ic3A7XCI7bDxuO2wrKyltKz1vO3ZhciBwPWEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7aWYocC5pbm5lckhUTUw9bStkb21VdGlscy5maWxsQ2hhcixrLmNvbGxhcHNlZClrLmluc2VydE5vZGUocC5jbG9uZU5vZGUoITApLmZpcnN0Q2hpbGQpLnNldEN1cnNvcighMCk7ZWxzZXt2YXIgcT1mdW5jdGlvbihhKXtyZXR1cm4gZG9tVXRpbHMuaXNCbG9ja0VsbShhKSYmIWpbYS50YWdOYW1lLnRvTG93ZXJDYXNlKCldfTtpZihoPWRvbVV0aWxzLmZpbmRQYXJlbnQoay5zdGFydENvbnRhaW5lcixxLCEwKSxpPWRvbVV0aWxzLmZpbmRQYXJlbnQoay5lbmRDb250YWluZXIscSwhMCksaCYmaSYmaD09PWkpay5kZWxldGVDb250ZW50cygpLGsuaW5zZXJ0Tm9kZShwLmNsb25lTm9kZSghMCkuZmlyc3RDaGlsZCkuc2V0Q3Vyc29yKCEwKTtlbHNle3ZhciByPWsuY3JlYXRlQm9va21hcmsoKTtrLmVubGFyZ2UoITApO2Zvcih2YXIgcz1rLmNyZWF0ZUJvb2ttYXJrKCksdD1kb21VdGlscy5nZXROZXh0RG9tTm9kZShzLnN0YXJ0LCExLHEpO3QmJiEoZG9tVXRpbHMuZ2V0UG9zaXRpb24odCxzLmVuZCkmZG9tVXRpbHMuUE9TSVRJT05fRk9MTE9XSU5HKTspdC5pbnNlcnRCZWZvcmUocC5jbG9uZU5vZGUoITApLmZpcnN0Q2hpbGQsdC5maXJzdENoaWxkKSx0PWRvbVV0aWxzLmdldE5leHREb21Ob2RlKHQsITEscSk7ay5tb3ZlVG9Cb29rbWFyayhzKS5tb3ZlVG9Cb29rbWFyayhyKS5zZWxlY3QoKX19ZG9tVXRpbHMucHJldmVudERlZmF1bHQoZCl9aWYoYnJvd3Nlci5nZWNrbyYmNDY9PWUmJihrPWEuc2VsZWN0aW9uLmdldFJhbmdlKCksay5jb2xsYXBzZWQmJihoPWsuc3RhcnRDb250YWluZXIsZG9tVXRpbHMuaXNFbXB0eUJsb2NrKGgpKSkpe2Zvcih2YXIgdT1oLnBhcmVudE5vZGU7MT09ZG9tVXRpbHMuZ2V0Q2hpbGRDb3VudCh1KSYmIWRvbVV0aWxzLmlzQm9keSh1KTspaD11LHU9dS5wYXJlbnROb2RlO3JldHVybiB2b2lkKGg9PT11Lmxhc3RDaGlsZCYmZC5wcmV2ZW50RGVmYXVsdCgpKX19KSxhLmFkZExpc3RlbmVyKFwia2V5dXBcIixmdW5jdGlvbihhLGMpe3ZhciBkLGU9Yy5rZXlDb2RlfHxjLndoaWNoLGY9dGhpcztpZihlPT1rZXltYXAuQmFja3NwYWNlKXtpZihmLmZpcmVFdmVudChcImRlbGtleXVwXCIpKXJldHVybjtpZihkPWYuc2VsZWN0aW9uLmdldFJhbmdlKCksZC5jb2xsYXBzZWQpe3ZhciBnLGg9W1wiaDFcIixcImgyXCIsXCJoM1wiLFwiaDRcIixcImg1XCIsXCJoNlwiXTtpZigoZz1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGQuc3RhcnRDb250YWluZXIsaCwhMCkpJiZkb21VdGlscy5pc0VtcHR5QmxvY2soZykpe3ZhciBpPWcucHJldmlvdXNTaWJsaW5nO2lmKGkmJlwiVEFCTEVcIiE9aS5ub2RlTmFtZSlyZXR1cm4gZG9tVXRpbHMucmVtb3ZlKGcpLHZvaWQgZC5zZXRTdGFydEF0TGFzdChpKS5zZXRDdXJzb3IoITEsITApO3ZhciBqPWcubmV4dFNpYmxpbmc7aWYoaiYmXCJUQUJMRVwiIT1qLm5vZGVOYW1lKXJldHVybiBkb21VdGlscy5yZW1vdmUoZyksdm9pZCBkLnNldFN0YXJ0QXRGaXJzdChqKS5zZXRDdXJzb3IoITEsITApfWlmKGRvbVV0aWxzLmlzQm9keShkLnN0YXJ0Q29udGFpbmVyKSl7dmFyIGc9ZG9tVXRpbHMuY3JlYXRlRWxlbWVudChmLmRvY3VtZW50LFwicFwiLHtpbm5lckhUTUw6YnJvd3Nlci5pZT9kb21VdGlscy5maWxsQ2hhcjpcIjxici8+XCJ9KTtkLmluc2VydE5vZGUoZykuc2V0U3RhcnQoZywwKS5zZXRDdXJzb3IoITEsITApfX1pZighYiYmKDM9PWQuc3RhcnRDb250YWluZXIubm9kZVR5cGV8fDE9PWQuc3RhcnRDb250YWluZXIubm9kZVR5cGUmJmRvbVV0aWxzLmlzRW1wdHlCbG9jayhkLnN0YXJ0Q29udGFpbmVyKSkpaWYoYnJvd3Nlci5pZSl7dmFyIGs9ZC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtkLmluc2VydE5vZGUoaykuc2V0U3RhcnRCZWZvcmUoaykuY29sbGFwc2UoITApLGQuc2VsZWN0KCksZG9tVXRpbHMucmVtb3ZlKGspfWVsc2UgZC5zZWxlY3QoKX19KX0sVUUucGx1Z2lucy5maXhpbWdjbGljaz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLmVkaXRvcj1udWxsLHRoaXMucmVzaXplcj1udWxsLHRoaXMuY292ZXI9bnVsbCx0aGlzLmRvYz1kb2N1bWVudCx0aGlzLnByZVBvcz17eDowLHk6MH0sdGhpcy5zdGFydFBvcz17eDowLHk6MH19dmFyIGI9ITE7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9W1swLDAsLTEsLTFdLFswLDAsMCwtMV0sWzAsMCwxLC0xXSxbMCwwLC0xLDBdLFswLDAsMSwwXSxbMCwwLC0xLDFdLFswLDAsMCwxXSxbMCwwLDEsMV1dO2EucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5lZGl0b3I9YSxiLnN0YXJ0UG9zPXRoaXMucHJlUG9zPXt4OjAseTowfSxiLmRyYWdJZD0tMTt2YXIgYz1bXSxkPWIuY292ZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxlPWIucmVzaXplcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2ZvcihkLmlkPWIuZWRpdG9yLnVpLmlkK1wiX2ltYWdlc2NhbGVfY292ZXJcIixkLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5Om5vbmU7ei1pbmRleDpcIitiLmVkaXRvci5vcHRpb25zLnpJbmRleCtcIjtmaWx0ZXI6YWxwaGEob3BhY2l0eT0wKTsgb3BhY2l0eTowO2JhY2tncm91bmQ6I0NDQztcIixkb21VdGlscy5vbihkLFwibW91c2Vkb3duIGNsaWNrXCIsZnVuY3Rpb24oKXtiLmhpZGUoKX0pLGk9MDtpPDg7aSsrKWMucHVzaCgnPHNwYW4gY2xhc3M9XCJlZHVpLWVkaXRvci1pbWFnZXNjYWxlLWhhbmQnK2krJ1wiPjwvc3Bhbj4nKTtlLmlkPWIuZWRpdG9yLnVpLmlkK1wiX2ltYWdlc2NhbGVcIixlLmNsYXNzTmFtZT1cImVkdWktZWRpdG9yLWltYWdlc2NhbGVcIixlLmlubmVySFRNTD1jLmpvaW4oXCJcIiksZS5zdHlsZS5jc3NUZXh0Kz1cIjtkaXNwbGF5Om5vbmU7Ym9yZGVyOjFweCBzb2xpZCAjM2I3N2ZmO3otaW5kZXg6XCIrYi5lZGl0b3Iub3B0aW9ucy56SW5kZXgrXCI7XCIsYi5lZGl0b3IudWkuZ2V0RG9tKCkuYXBwZW5kQ2hpbGQoZCksYi5lZGl0b3IudWkuZ2V0RG9tKCkuYXBwZW5kQ2hpbGQoZSksYi5pbml0U3R5bGUoKSxiLmluaXRFdmVudHMoKX0saW5pdFN0eWxlOmZ1bmN0aW9uKCl7dXRpbHMuY3NzUnVsZShcImltYWdlc2NhbGVcIixcIi5lZHVpLWVkaXRvci1pbWFnZXNjYWxle2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MXB4IHNvbGlkICMzOEIyQ0U7Y3Vyc29yOmhhbmQ7LXdlYmtpdC1ib3gtc2l6aW5nOiBjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6IGNvbnRlbnQtYm94O2JveC1zaXppbmc6IGNvbnRlbnQtYm94O30uZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZSBzcGFue3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjZweDtoZWlnaHQ6NnB4O292ZXJmbG93OmhpZGRlbjtmb250LXNpemU6MHB4O2Rpc3BsYXk6YmxvY2s7YmFja2dyb3VuZC1jb2xvcjojM0M5REQwO30uZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZSAuZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZS1oYW5kMHtjdXJzb3I6bnctcmVzaXplO3RvcDowO21hcmdpbi10b3A6LTRweDtsZWZ0OjA7bWFyZ2luLWxlZnQ6LTRweDt9LmVkdWktZWRpdG9yLWltYWdlc2NhbGUgLmVkdWktZWRpdG9yLWltYWdlc2NhbGUtaGFuZDF7Y3Vyc29yOm4tcmVzaXplO3RvcDowO21hcmdpbi10b3A6LTRweDtsZWZ0OjUwJTttYXJnaW4tbGVmdDotNHB4O30uZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZSAuZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZS1oYW5kMntjdXJzb3I6bmUtcmVzaXplO3RvcDowO21hcmdpbi10b3A6LTRweDtsZWZ0OjEwMCU7bWFyZ2luLWxlZnQ6LTNweDt9LmVkdWktZWRpdG9yLWltYWdlc2NhbGUgLmVkdWktZWRpdG9yLWltYWdlc2NhbGUtaGFuZDN7Y3Vyc29yOnctcmVzaXplO3RvcDo1MCU7bWFyZ2luLXRvcDotNHB4O2xlZnQ6MDttYXJnaW4tbGVmdDotNHB4O30uZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZSAuZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZS1oYW5kNHtjdXJzb3I6ZS1yZXNpemU7dG9wOjUwJTttYXJnaW4tdG9wOi00cHg7bGVmdDoxMDAlO21hcmdpbi1sZWZ0Oi0zcHg7fS5lZHVpLWVkaXRvci1pbWFnZXNjYWxlIC5lZHVpLWVkaXRvci1pbWFnZXNjYWxlLWhhbmQ1e2N1cnNvcjpzdy1yZXNpemU7dG9wOjEwMCU7bWFyZ2luLXRvcDotM3B4O2xlZnQ6MDttYXJnaW4tbGVmdDotNHB4O30uZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZSAuZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZS1oYW5kNntjdXJzb3I6cy1yZXNpemU7dG9wOjEwMCU7bWFyZ2luLXRvcDotM3B4O2xlZnQ6NTAlO21hcmdpbi1sZWZ0Oi00cHg7fS5lZHVpLWVkaXRvci1pbWFnZXNjYWxlIC5lZHVpLWVkaXRvci1pbWFnZXNjYWxlLWhhbmQ3e2N1cnNvcjpzZS1yZXNpemU7dG9wOjEwMCU7bWFyZ2luLXRvcDotM3B4O2xlZnQ6MTAwJTttYXJnaW4tbGVmdDotM3B4O31cIil9LGluaXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Euc3RhcnRQb3MueD1hLnN0YXJ0UG9zLnk9MCxhLmlzRHJhZ2luZz0hMX0sX2V2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYz10aGlzO3N3aXRjaChhLnR5cGUpe2Nhc2VcIm1vdXNlZG93blwiOnZhciBkLGQ9YS50YXJnZXR8fGEuc3JjRWxlbWVudDtkLmNsYXNzTmFtZS5pbmRleE9mKFwiZWR1aS1lZGl0b3ItaW1hZ2VzY2FsZS1oYW5kXCIpIT0tMSYmYy5kcmFnSWQ9PS0xJiYoYy5kcmFnSWQ9ZC5jbGFzc05hbWUuc2xpY2UoLTEpLGMuc3RhcnRQb3MueD1jLnByZVBvcy54PWEuY2xpZW50WCxjLnN0YXJ0UG9zLnk9Yy5wcmVQb3MueT1hLmNsaWVudFksZG9tVXRpbHMub24oYy5kb2MsXCJtb3VzZW1vdmVcIixjLnByb3h5KGMuX2V2ZW50SGFuZGxlcixjKSkpO2JyZWFrO2Nhc2VcIm1vdXNlbW92ZVwiOmMuZHJhZ0lkIT0tMSYmKGMudXBkYXRlQ29udGFpbmVyU3R5bGUoYy5kcmFnSWQse3g6YS5jbGllbnRYLWMucHJlUG9zLngseTphLmNsaWVudFktYy5wcmVQb3MueX0pLGMucHJlUG9zLng9YS5jbGllbnRYLGMucHJlUG9zLnk9YS5jbGllbnRZLGI9ITAsYy51cGRhdGVUYXJnZXRFbGVtZW50KCkpO2JyZWFrO2Nhc2VcIm1vdXNldXBcIjpjLmRyYWdJZCE9LTEmJihjLnVwZGF0ZUNvbnRhaW5lclN0eWxlKGMuZHJhZ0lkLHt4OmEuY2xpZW50WC1jLnByZVBvcy54LHk6YS5jbGllbnRZLWMucHJlUG9zLnl9KSxjLnVwZGF0ZVRhcmdldEVsZW1lbnQoKSxjLnRhcmdldC5wYXJlbnROb2RlJiZjLmF0dGFjaFRvKGMudGFyZ2V0KSxjLmRyYWdJZD0tMSksZG9tVXRpbHMudW4oYy5kb2MsXCJtb3VzZW1vdmVcIixjLnByb3h5KGMuX2V2ZW50SGFuZGxlcixjKSksYiYmKGI9ITEsYy5lZGl0b3IuZmlyZUV2ZW50KFwiY29udGVudGNoYW5nZVwiKSl9fSx1cGRhdGVUYXJnZXRFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztkb21VdGlscy5zZXRTdHlsZXMoYS50YXJnZXQse3dpZHRoOmEucmVzaXplci5zdHlsZS53aWR0aCxoZWlnaHQ6YS5yZXNpemVyLnN0eWxlLmhlaWdodH0pLGEudGFyZ2V0LndpZHRoPXBhcnNlSW50KGEucmVzaXplci5zdHlsZS53aWR0aCksYS50YXJnZXQuaGVpZ2h0PXBhcnNlSW50KGEucmVzaXplci5zdHlsZS5oZWlnaHQpLGEuYXR0YWNoVG8oYS50YXJnZXQpfSx1cGRhdGVDb250YWluZXJTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBkLGU9dGhpcyxmPWUucmVzaXplcjswIT1jW2FdWzBdJiYoZD1wYXJzZUludChmLnN0eWxlLmxlZnQpK2IueCxmLnN0eWxlLmxlZnQ9ZS5fdmFsaWRTY2FsZWRQcm9wKFwibGVmdFwiLGQpK1wicHhcIiksMCE9Y1thXVsxXSYmKGQ9cGFyc2VJbnQoZi5zdHlsZS50b3ApK2IueSxmLnN0eWxlLnRvcD1lLl92YWxpZFNjYWxlZFByb3AoXCJ0b3BcIixkKStcInB4XCIpLDAhPWNbYV1bMl0mJihkPWYuY2xpZW50V2lkdGgrY1thXVsyXSpiLngsZi5zdHlsZS53aWR0aD1lLl92YWxpZFNjYWxlZFByb3AoXCJ3aWR0aFwiLGQpK1wicHhcIiksMCE9Y1thXVszXSYmKGQ9Zi5jbGllbnRIZWlnaHQrY1thXVszXSpiLnksZi5zdHlsZS5oZWlnaHQ9ZS5fdmFsaWRTY2FsZWRQcm9wKFwiaGVpZ2h0XCIsZCkrXCJweFwiKX0sX3ZhbGlkU2NhbGVkUHJvcDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVzaXplcixkPWRvY3VtZW50O3N3aXRjaChiPWlzTmFOKGIpPzA6YixhKXtjYXNlXCJsZWZ0XCI6cmV0dXJuIGI8MD8wOmIrYy5jbGllbnRXaWR0aD5kLmNsaWVudFdpZHRoP2QuY2xpZW50V2lkdGgtYy5jbGllbnRXaWR0aDpiO2Nhc2VcInRvcFwiOnJldHVybiBiPDA/MDpiK2MuY2xpZW50SGVpZ2h0PmQuY2xpZW50SGVpZ2h0P2QuY2xpZW50SGVpZ2h0LWMuY2xpZW50SGVpZ2h0OmI7Y2FzZVwid2lkdGhcIjpyZXR1cm4gYjw9MD8xOmIrYy5vZmZzZXRMZWZ0PmQuY2xpZW50V2lkdGg/ZC5jbGllbnRXaWR0aC1jLm9mZnNldExlZnQ6YjtjYXNlXCJoZWlnaHRcIjpyZXR1cm4gYjw9MD8xOmIrYy5vZmZzZXRUb3A+ZC5jbGllbnRIZWlnaHQ/ZC5jbGllbnRIZWlnaHQtYy5vZmZzZXRUb3A6Yn19LGhpZGVDb3ZlcjpmdW5jdGlvbigpe3RoaXMuY292ZXIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn0sc2hvd0NvdmVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWRvbVV0aWxzLmdldFhZKGEuZWRpdG9yLnVpLmdldERvbSgpKSxjPWRvbVV0aWxzLmdldFhZKGEuZWRpdG9yLmlmcmFtZSk7ZG9tVXRpbHMuc2V0U3R5bGVzKGEuY292ZXIse3dpZHRoOmEuZWRpdG9yLmlmcmFtZS5vZmZzZXRXaWR0aCtcInB4XCIsaGVpZ2h0OmEuZWRpdG9yLmlmcmFtZS5vZmZzZXRIZWlnaHQrXCJweFwiLHRvcDpjLnktYi55K1wicHhcIixsZWZ0OmMueC1iLngrXCJweFwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIixkaXNwbGF5OlwiXCJ9KX0sc2hvdzpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IucmVzaXplci5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixhJiZiLmF0dGFjaFRvKGEpLGRvbVV0aWxzLm9uKHRoaXMucmVzaXplcixcIm1vdXNlZG93blwiLGIucHJveHkoYi5fZXZlbnRIYW5kbGVyLGIpKSxkb21VdGlscy5vbihiLmRvYyxcIm1vdXNldXBcIixiLnByb3h5KGIuX2V2ZW50SGFuZGxlcixiKSksYi5zaG93Q292ZXIoKSxiLmVkaXRvci5maXJlRXZlbnQoXCJhZnRlcnNjYWxlc2hvd1wiLGIpLGIuZWRpdG9yLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKX0saGlkZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5oaWRlQ292ZXIoKSxhLnJlc2l6ZXIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixkb21VdGlscy51bihhLnJlc2l6ZXIsXCJtb3VzZWRvd25cIixhLnByb3h5KGEuX2V2ZW50SGFuZGxlcixhKSksZG9tVXRpbHMudW4oYS5kb2MsXCJtb3VzZXVwXCIsYS5wcm94eShhLl9ldmVudEhhbmRsZXIsYSkpLGEuZWRpdG9yLmZpcmVFdmVudChcImFmdGVyc2NhbGVoaWRlXCIsYSl9LHByb3h5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYXJndW1lbnRzKX19LGF0dGFjaFRvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLnRhcmdldD1hLGQ9dGhpcy5yZXNpemVyLGU9ZG9tVXRpbHMuZ2V0WFkoYyksZj1kb21VdGlscy5nZXRYWShiLmVkaXRvci5pZnJhbWUpLGc9ZG9tVXRpbHMuZ2V0WFkoZC5wYXJlbnROb2RlKTtkb21VdGlscy5zZXRTdHlsZXMoZCx7d2lkdGg6Yy53aWR0aCtcInB4XCIsaGVpZ2h0OmMuaGVpZ2h0K1wicHhcIixsZWZ0OmYueCtlLngtYi5lZGl0b3IuZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0LWcueC1wYXJzZUludChkLnN0eWxlLmJvcmRlckxlZnRXaWR0aCkrXCJweFwiLHRvcDpmLnkrZS55LWIuZWRpdG9yLmRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLWcueS1wYXJzZUludChkLnN0eWxlLmJvcmRlclRvcFdpZHRoKStcInB4XCJ9KX19fSgpLGZ1bmN0aW9uKCl7dmFyIGIsYz10aGlzO2Muc2V0T3B0KFwiaW1hZ2VTY2FsZUVuYWJsZWRcIiwhMCksIWJyb3dzZXIuaWUmJmMub3B0aW9ucy5pbWFnZVNjYWxlRW5hYmxlZCYmYy5hZGRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oZCxlKXt2YXIgZj1jLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGc9Zi5nZXRDbG9zZWROb2RlKCk7aWYoZyYmXCJJTUdcIj09Zy50YWdOYW1lJiZcImZhbHNlXCIhPWMuYm9keS5jb250ZW50RWRpdGFibGUpe2lmKGcuY2xhc3NOYW1lLmluZGV4T2YoXCJlZHVpLWZha2VkLW11c2ljXCIpIT0tMXx8Zy5nZXRBdHRyaWJ1dGUoXCJhbmNob3JuYW1lXCIpfHxkb21VdGlscy5oYXNDbGFzcyhnLFwibG9hZGluZ2NsYXNzXCIpfHxkb21VdGlscy5oYXNDbGFzcyhnLFwibG9hZGVycm9yY2xhc3NcIikpcmV0dXJuO2lmKCFiKXtiPW5ldyBhLGIuaW5pdChjKSxjLnVpLmdldERvbSgpLmFwcGVuZENoaWxkKGIucmVzaXplcik7dmFyIGgsaT1mdW5jdGlvbihhKXtiLmhpZGUoKSxiLnRhcmdldCYmYy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5zZWxlY3ROb2RlKGIudGFyZ2V0KS5zZWxlY3QoKX0saj1mdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldHx8YS5zcmNFbGVtZW50OyFifHx2b2lkIDAhPT1iLmNsYXNzTmFtZSYmYi5jbGFzc05hbWUuaW5kZXhPZihcImVkdWktZWRpdG9yLWltYWdlc2NhbGVcIikhPS0xfHxpKGEpfTtjLmFkZExpc3RlbmVyKFwiYWZ0ZXJzY2FsZXNob3dcIixmdW5jdGlvbihhKXtjLmFkZExpc3RlbmVyKFwiYmVmb3Jla2V5ZG93blwiLGkpLGMuYWRkTGlzdGVuZXIoXCJiZWZvcmVtb3VzZWRvd25cIixqKSxkb21VdGlscy5vbihkb2N1bWVudCxcImtleWRvd25cIixpKSxkb21VdGlscy5vbihkb2N1bWVudCxcIm1vdXNlZG93blwiLGopLGMuc2VsZWN0aW9uLmdldE5hdGl2ZSgpLnJlbW92ZUFsbFJhbmdlcygpfSksYy5hZGRMaXN0ZW5lcihcImFmdGVyc2NhbGVoaWRlXCIsZnVuY3Rpb24oYSl7Yy5yZW1vdmVMaXN0ZW5lcihcImJlZm9yZWtleWRvd25cIixpKSxjLnJlbW92ZUxpc3RlbmVyKFwiYmVmb3JlbW91c2Vkb3duXCIsaiksZG9tVXRpbHMudW4oZG9jdW1lbnQsXCJrZXlkb3duXCIsaSksZG9tVXRpbHMudW4oZG9jdW1lbnQsXCJtb3VzZWRvd25cIixqKTt2YXIgZD1iLnRhcmdldDtkLnBhcmVudE5vZGUmJmMuc2VsZWN0aW9uLmdldFJhbmdlKCkuc2VsZWN0Tm9kZShkKS5zZWxlY3QoKX0pLGRvbVV0aWxzLm9uKGIucmVzaXplcixcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpe2Muc2VsZWN0aW9uLmdldE5hdGl2ZSgpLnJlbW92ZUFsbFJhbmdlcygpO3ZhciBkPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7ZCYmZC5jbGFzc05hbWUuaW5kZXhPZihcImVkdWktZWRpdG9yLWltYWdlc2NhbGUtaGFuZFwiKT09LTEmJihoPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmhpZGUoKSxiLnRhcmdldCYmYy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5zZWxlY3ROb2RlKGQpLnNlbGVjdCgpfSwyMDApKX0pLGRvbVV0aWxzLm9uKGIucmVzaXplcixcIm1vdXNldXBcIixmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldHx8YS5zcmNFbGVtZW50O2ImJmIuY2xhc3NOYW1lLmluZGV4T2YoXCJlZHVpLWVkaXRvci1pbWFnZXNjYWxlLWhhbmRcIik9PS0xJiZjbGVhclRpbWVvdXQoaCl9KX1iLnNob3coZyl9ZWxzZSBiJiZcIm5vbmVcIiE9Yi5yZXNpemVyLnN0eWxlLmRpc3BsYXkmJmIuaGlkZSgpfSksYnJvd3Nlci53ZWJraXQmJmMuYWRkTGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKGEsYil7aWYoXCJJTUdcIj09Yi50YXJnZXQudGFnTmFtZSYmXCJmYWxzZVwiIT1jLmJvZHkuY29udGVudEVkaXRhYmxlKXt2YXIgZD1uZXcgZG9tLlJhbmdlKGMuZG9jdW1lbnQpO2Quc2VsZWN0Tm9kZShiLnRhcmdldCkuc2VsZWN0KCl9fSl9fSgpLFVFLnBsdWdpbi5yZWdpc3RlcihcImF1dG9saW5rXCIsZnVuY3Rpb24oKXt2YXIgYT0wO3JldHVybiBicm93c2VyLmllP3t9OntiaW5kRXZlbnRzOntyZXNldDpmdW5jdGlvbigpe2E9MH0sa2V5ZG93bjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1iLmtleUNvZGV8fGIud2hpY2g7aWYoMzI9PWR8fDEzPT1kKXtmb3IodmFyIGUsZixnPWMuc2VsZWN0aW9uLmdldE5hdGl2ZSgpLGg9Zy5nZXRSYW5nZUF0KDApLmNsb25lUmFuZ2UoKSxpPWguc3RhcnRDb250YWluZXI7MT09aS5ub2RlVHlwZSYmaC5zdGFydE9mZnNldD4wJiYoaT1oLnN0YXJ0Q29udGFpbmVyLmNoaWxkTm9kZXNbaC5zdGFydE9mZnNldC0xXSk7KWguc2V0U3RhcnQoaSwxPT1pLm5vZGVUeXBlP2kuY2hpbGROb2Rlcy5sZW5ndGg6aS5ub2RlVmFsdWUubGVuZ3RoKSxoLmNvbGxhcHNlKCEwKSxpPWguc3RhcnRDb250YWluZXI7ZG97aWYoMD09aC5zdGFydE9mZnNldCl7Zm9yKGk9aC5zdGFydENvbnRhaW5lci5wcmV2aW91c1NpYmxpbmc7aSYmMT09aS5ub2RlVHlwZTspaT1pLmxhc3RDaGlsZDtpZighaXx8ZG9tVXRpbHMuaXNGaWxsQ2hhcihpKSlicmVhaztlPWkubm9kZVZhbHVlLmxlbmd0aH1lbHNlIGk9aC5zdGFydENvbnRhaW5lcixlPWguc3RhcnRPZmZzZXQ7aC5zZXRTdGFydChpLGUtMSksZj1oLnRvU3RyaW5nKCkuY2hhckNvZGVBdCgwKX13aGlsZSgxNjAhPWYmJjMyIT1mKTtpZihoLnRvU3RyaW5nKCkucmVwbGFjZShuZXcgUmVnRXhwKGRvbVV0aWxzLmZpbGxDaGFyLFwiZ1wiKSxcIlwiKS5tYXRjaCgvKD86aHR0cHM/OlxcL1xcL3xzc2g6XFwvXFwvfGZ0cDpcXC9cXC98ZmlsZTpcXC98d3d3XFwuKS9pKSl7Zm9yKDtoLnRvU3RyaW5nKCkubGVuZ3RoJiYhL14oPzpodHRwcz86XFwvXFwvfHNzaDpcXC9cXC98ZnRwOlxcL1xcL3xmaWxlOlxcL3x3d3dcXC4pL2kudGVzdChoLnRvU3RyaW5nKCkpOyl0cnl7aC5zZXRTdGFydChoLnN0YXJ0Q29udGFpbmVyLGguc3RhcnRPZmZzZXQrMSl9Y2F0Y2goail7Zm9yKHZhciBpPWguc3RhcnRDb250YWluZXI7IShuZXh0PWkubmV4dFNpYmxpbmcpOyl7aWYoZG9tVXRpbHMuaXNCb2R5KGkpKXJldHVybjtpPWkucGFyZW50Tm9kZX1oLnNldFN0YXJ0KG5leHQsMCl9aWYoZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShoLnN0YXJ0Q29udGFpbmVyLFwiYVwiLCEwKSlyZXR1cm47dmFyIGssbD1jLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLG09Yy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiBcIik7Yy51bmRvTWFuZ2VyJiZjLnVuZG9NYW5nZXIuc2F2ZSgpLGwuYXBwZW5kQ2hpbGQoaC5leHRyYWN0Q29udGVudHMoKSksbC5ocmVmPWwuaW5uZXJIVE1MPWwuaW5uZXJIVE1MLnJlcGxhY2UoLzxbXj5dKz4vZyxcIlwiKSxrPWwuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKS5yZXBsYWNlKG5ldyBSZWdFeHAoZG9tVXRpbHMuZmlsbENoYXIsXCJnXCIpLFwiXCIpLGs9L14oPzpodHRwcz86XFwvXFwvKS9naS50ZXN0KGspP2s6XCJodHRwOi8vXCIrayxsLnNldEF0dHJpYnV0ZShcIl9zcmNcIix1dGlscy5odG1sKGspKSxsLmhyZWY9dXRpbHMuaHRtbChrKSxoLmluc2VydE5vZGUobCksbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShtLGwubmV4dFNpYmxpbmcpLGguc2V0U3RhcnQobSwwKSxoLmNvbGxhcHNlKCEwKSxnLnJlbW92ZUFsbFJhbmdlcygpLGcuYWRkUmFuZ2UoaCksYy51bmRvTWFuZ2VyJiZjLnVuZG9NYW5nZXIuc2F2ZSgpfX19fX19LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtpZigzPT1hLm5vZGVUeXBlKXJldHVybiBudWxsO2lmKFwiQVwiPT1hLm5vZGVOYW1lKXJldHVybiBhO2Zvcih2YXIgYj1hLmxhc3RDaGlsZDtiOyl7aWYoXCJBXCI9PWIubm9kZU5hbWUpcmV0dXJuIGI7aWYoMz09Yi5ub2RlVHlwZSl7aWYoZG9tVXRpbHMuaXNXaGl0ZXNwYWNlKGIpKXtiPWIucHJldmlvdXNTaWJsaW5nO2NvbnRpbnVlfXJldHVybiBudWxsfWI9Yi5sYXN0Q2hpbGR9fXZhciBiPXszNzoxLDM4OjEsMzk6MSw0MDoxLDEzOjEsMzI6MX07YnJvd3Nlci5pZSYmdGhpcy5hZGRMaXN0ZW5lcihcImtleXVwXCIsZnVuY3Rpb24oYyxkKXt2YXIgZT10aGlzLGY9ZC5rZXlDb2RlO2lmKGJbZl0pe3ZhciBnPWUuc2VsZWN0aW9uLmdldFJhbmdlKCksaD1nLnN0YXJ0Q29udGFpbmVyO2lmKDEzPT1mKXtmb3IoO2gmJiFkb21VdGlscy5pc0JvZHkoaCkmJiFkb21VdGlscy5pc0Jsb2NrRWxtKGgpOyloPWgucGFyZW50Tm9kZTtpZihoJiYhZG9tVXRpbHMuaXNCb2R5KGgpJiZcIlBcIj09aC5ub2RlTmFtZSl7dmFyIGk9aC5wcmV2aW91c1NpYmxpbmc7aWYoaSYmMT09aS5ub2RlVHlwZSl7dmFyIGk9YShpKTtpJiYhaS5nZXRBdHRyaWJ1dGUoXCJfaHJlZlwiKSYmZG9tVXRpbHMucmVtb3ZlKGksITApfX19ZWxzZSBpZigzMj09ZikzPT1oLm5vZGVUeXBlJiYvXlxccyQvLnRlc3QoaC5ub2RlVmFsdWUpJiYoaD1oLnByZXZpb3VzU2libGluZyxoJiZcIkFcIj09aC5ub2RlTmFtZSYmIWguZ2V0QXR0cmlidXRlKFwiX2hyZWZcIikmJmRvbVV0aWxzLnJlbW92ZShoLCEwKSk7ZWxzZSBpZihoPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoaCxcImFcIiwhMCksaCYmIWguZ2V0QXR0cmlidXRlKFwiX2hyZWZcIikpe3ZhciBqPWcuY3JlYXRlQm9va21hcmsoKTtkb21VdGlscy5yZW1vdmUoaCwhMCksZy5tb3ZlVG9Cb29rbWFyayhqKS5zZWxlY3QoITApfX19KX0pLFVFLnBsdWdpbnMuYXV0b2hlaWdodD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt2YXIgYT10aGlzO2NsZWFyVGltZW91dChlKSxmfHwoIWEucXVlcnlDb21tYW5kU3RhdGV8fGEucXVlcnlDb21tYW5kU3RhdGUmJjEhPWEucXVlcnlDb21tYW5kU3RhdGUoXCJzb3VyY2VcIikpJiYoZT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm9yKHZhciBiPWEuYm9keS5sYXN0Q2hpbGQ7YiYmMSE9Yi5ub2RlVHlwZTspYj1iLnByZXZpb3VzU2libGluZztiJiYxPT1iLm5vZGVUeXBlJiYoYi5zdHlsZS5jbGVhcj1cImJvdGhcIixkPU1hdGgubWF4KGRvbVV0aWxzLmdldFhZKGIpLnkrYi5vZmZzZXRIZWlnaHQrMjUsTWF0aC5tYXgoaC5taW5GcmFtZUhlaWdodCxoLmluaXRpYWxGcmFtZUhlaWdodCkpLGQhPWcmJihkIT09cGFyc2VJbnQoYS5pZnJhbWUucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQpJiYoYS5pZnJhbWUucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQ9ZCtcInB4XCIpLGEuYm9keS5zdHlsZS5oZWlnaHQ9ZCtcInB4XCIsZz1kKSxkb21VdGlscy5yZW1vdmVTdHlsZShiLFwiY2xlYXJcIikpfSw1MCkpfXZhciBiPXRoaXM7aWYoYi5hdXRvSGVpZ2h0RW5hYmxlZD1iLm9wdGlvbnMuYXV0b0hlaWdodEVuYWJsZWQhPT0hMSxiLmF1dG9IZWlnaHRFbmFibGVkKXt2YXIgYyxkLGUsZixnPTAsaD1iLm9wdGlvbnM7Yi5hZGRMaXN0ZW5lcihcImZ1bGxzY3JlZW5jaGFuZ2VkXCIsZnVuY3Rpb24oYSxiKXtmPWJ9KSxiLmFkZExpc3RlbmVyKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Yi5yZW1vdmVMaXN0ZW5lcihcImNvbnRlbnRjaGFuZ2UgYWZ0ZXJpbnNlcnRodG1sIGtleXVwIG1vdXNldXBcIixhKX0pLGIuZW5hYmxlQXV0b0hlaWdodD1mdW5jdGlvbigpe3ZhciBiPXRoaXM7aWYoYi5hdXRvSGVpZ2h0RW5hYmxlZCl7dmFyIGQ9Yi5kb2N1bWVudDtiLmF1dG9IZWlnaHRFbmFibGVkPSEwLGM9ZC5ib2R5LnN0eWxlLm92ZXJmbG93WSxkLmJvZHkuc3R5bGUub3ZlcmZsb3dZPVwiaGlkZGVuXCIsYi5hZGRMaXN0ZW5lcihcImNvbnRlbnRjaGFuZ2UgYWZ0ZXJpbnNlcnRodG1sIGtleXVwIG1vdXNldXBcIixhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5jYWxsKGIpfSxicm93c2VyLmdlY2tvPzEwMDowKSxiLmZpcmVFdmVudChcImF1dG9oZWlnaHRjaGFuZ2VkXCIsYi5hdXRvSGVpZ2h0RW5hYmxlZCl9fSxiLmRpc2FibGVBdXRvSGVpZ2h0PWZ1bmN0aW9uKCl7Yi5ib2R5LnN0eWxlLm92ZXJmbG93WT1jfHxcIlwiLGIucmVtb3ZlTGlzdGVuZXIoXCJjb250ZW50Y2hhbmdlXCIsYSksYi5yZW1vdmVMaXN0ZW5lcihcImtleXVwXCIsYSksYi5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixhKSxiLmF1dG9IZWlnaHRFbmFibGVkPSExLGIuZmlyZUV2ZW50KFwiYXV0b2hlaWdodGNoYW5nZWRcIixiLmF1dG9IZWlnaHRFbmFibGVkKX0sYi5vbihcInNldEhlaWdodFwiLGZ1bmN0aW9uKCl7Yi5kaXNhYmxlQXV0b0hlaWdodCgpfSksYi5hZGRMaXN0ZW5lcihcInJlYWR5XCIsZnVuY3Rpb24oKXtiLmVuYWJsZUF1dG9IZWlnaHQoKTt2YXIgYztkb21VdGlscy5vbihicm93c2VyLmllP2IuYm9keTpiLmRvY3VtZW50LGJyb3dzZXIud2Via2l0P1wiZHJhZ292ZXJcIjpcImRyb3BcIixmdW5jdGlvbigpe2NsZWFyVGltZW91dChjKSxjPXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmNhbGwoYil9LDEwMCl9KTt2YXIgZDt3aW5kb3cub25zY3JvbGw9ZnVuY3Rpb24oKXtcbm51bGw9PT1kP2Q9dGhpcy5zY3JvbGxZOjA9PXRoaXMuc2Nyb2xsWSYmMCE9ZCYmKGIud2luZG93LnNjcm9sbFRvKDAsMCksZD1udWxsKX19KX19LFVFLnBsdWdpbnMuYXV0b2Zsb2F0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3JldHVybiBVRS51aT8xOihhbGVydChnLmF1dG9mbG9hdE1zZyksMCl9ZnVuY3Rpb24gYigpe3ZhciBhPWRvY3VtZW50LmJvZHkuc3R5bGU7YS5iYWNrZ3JvdW5kSW1hZ2U9J3VybChcImFib3V0OmJsYW5rXCIpJyxhLmJhY2tncm91bmRBdHRhY2htZW50PVwiZml4ZWRcIn1mdW5jdGlvbiBjKCl7dmFyIGE9ZG9tVXRpbHMuZ2V0WFkoayksYj1kb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGssXCJwb3NpdGlvblwiKSxjPWRvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoayxcImxlZnRcIik7ay5zdHlsZS53aWR0aD1rLm9mZnNldFdpZHRoK1wicHhcIixrLnN0eWxlLnpJbmRleD0xKmYub3B0aW9ucy56SW5kZXgrMSxrLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHEsayksb3x8cCYmYnJvd3Nlci5pZT8oXCJhYnNvbHV0ZVwiIT1rLnN0eWxlLnBvc2l0aW9uJiYoay5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIpLGsuc3R5bGUudG9wPShkb2N1bWVudC5ib2R5LnNjcm9sbFRvcHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCktbCtpK1wicHhcIik6KGJyb3dzZXIuaWU3Q29tcGF0JiZyJiYocj0hMSxrLnN0eWxlLmxlZnQ9ZG9tVXRpbHMuZ2V0WFkoaykueC1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCsyK1wicHhcIiksXCJmaXhlZFwiIT1rLnN0eWxlLnBvc2l0aW9uJiYoay5zdHlsZS5wb3NpdGlvbj1cImZpeGVkXCIsay5zdHlsZS50b3A9aStcInB4XCIsKFwiYWJzb2x1dGVcIj09Ynx8XCJyZWxhdGl2ZVwiPT1iKSYmcGFyc2VGbG9hdChjKSYmKGsuc3R5bGUubGVmdD1hLngrXCJweFwiKSkpfWZ1bmN0aW9uIGQoKXtyPSEwLHEucGFyZW50Tm9kZSYmcS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHEpLGsuc3R5bGUuY3NzVGV4dD1qfWZ1bmN0aW9uIGUoKXt2YXIgYT1tKGYuY29udGFpbmVyKSxiPWYub3B0aW9ucy50b29sYmFyVG9wT2Zmc2V0fHwwO2EudG9wPDAmJmEuYm90dG9tLWsub2Zmc2V0SGVpZ2h0PmI/YygpOmQoKX12YXIgZj10aGlzLGc9Zi5nZXRMYW5nKCk7Zi5zZXRPcHQoe3RvcE9mZnNldDowfSk7dmFyIGg9Zi5vcHRpb25zLmF1dG9GbG9hdEVuYWJsZWQhPT0hMSxpPWYub3B0aW9ucy50b3BPZmZzZXQ7aWYoaCl7dmFyIGosayxsLG0sbj1VRS51aS51aVV0aWxzLG89YnJvd3Nlci5pZSYmYnJvd3Nlci52ZXJzaW9uPD02LHA9YnJvd3Nlci5xdWlya3MscT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHI9ITAscz11dGlscy5kZWZlcihmdW5jdGlvbigpe2UoKX0sYnJvd3Nlci5pZT8yMDA6MTAwLCEwKTtmLmFkZExpc3RlbmVyKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZG9tVXRpbHMudW4od2luZG93LFtcInNjcm9sbFwiLFwicmVzaXplXCJdLGUpLGYucmVtb3ZlTGlzdGVuZXIoXCJrZXlkb3duXCIscyl9KSxmLmFkZExpc3RlbmVyKFwicmVhZHlcIixmdW5jdGlvbigpe2lmKGEoZikpe2lmKCFmLnVpKXJldHVybjttPW4uZ2V0Q2xpZW50UmVjdCxrPWYudWkuZ2V0RG9tKFwidG9vbGJhcmJveFwiKSxsPW0oaykudG9wLGo9ay5zdHlsZS5jc3NUZXh0LHEuc3R5bGUuaGVpZ2h0PWsub2Zmc2V0SGVpZ2h0K1wicHhcIixvJiZiKCksZG9tVXRpbHMub24od2luZG93LFtcInNjcm9sbFwiLFwicmVzaXplXCJdLGUpLGYuYWRkTGlzdGVuZXIoXCJrZXlkb3duXCIscyksZi5hZGRMaXN0ZW5lcihcImJlZm9yZWZ1bGxzY3JlZW5jaGFuZ2VcIixmdW5jdGlvbihhLGIpe2ImJmQoKX0pLGYuYWRkTGlzdGVuZXIoXCJmdWxsc2NyZWVuY2hhbmdlZFwiLGZ1bmN0aW9uKGEsYil7Ynx8ZSgpfSksZi5hZGRMaXN0ZW5lcihcInNvdXJjZW1vZGVjaGFuZ2VkXCIsZnVuY3Rpb24oYSxiKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSgpfSwwKX0pLGYuYWRkTGlzdGVuZXIoXCJjbGVhckRvY1wiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2UoKX0sMCl9KX19KX19LFVFLnBsdWdpbnMudmlkZW89ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixkLGUsZixnLGgpe2E9dXRpbHMudW5odG1sRm9yVXJsKGEpLGY9dXRpbHMudW5odG1sKGYpLGc9dXRpbHMudW5odG1sKGcpLGI9cGFyc2VJbnQoYiwxMCl8fDAsZD1wYXJzZUludChkLDEwKXx8MDt2YXIgaTtzd2l0Y2goaCl7Y2FzZVwiaW1hZ2VcIjppPVwiPGltZyBcIisoZT8naWQ9XCInK2UrJ1wiJzpcIlwiKSsnIHdpZHRoPVwiJytiKydcIiBoZWlnaHQ9XCInK2QrJ1wiIF91cmw9XCInK2ErJ1wiIGNsYXNzPVwiJytnLnJlcGxhY2UoL1xcYnZpZGVvLWpzXFxiLyxcIlwiKSsnXCIgc3JjPVwiJytjLm9wdGlvbnMuVUVESVRPUl9IT01FX1VSTCsndGhlbWVzL2RlZmF1bHQvaW1hZ2VzL3NwYWNlci5naWZcIiBzdHlsZT1cImJhY2tncm91bmQ6dXJsKCcrYy5vcHRpb25zLlVFRElUT1JfSE9NRV9VUkwrXCJ0aGVtZXMvZGVmYXVsdC9pbWFnZXMvdmlkZW9sb2dvLmdpZikgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXI7IGJvcmRlcjoxcHggc29saWQgZ3JheTtcIisoZj9cImZsb2F0OlwiK2YrXCI7XCI6XCJcIikrJ1wiIC8+JzticmVhaztjYXNlXCJlbWJlZFwiOmk9JzxlbWJlZCB0eXBlPVwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIiBjbGFzcz1cIicrZysnXCIgcGx1Z2luc3BhZ2U9XCJodHRwOi8vd3d3Lm1hY3JvbWVkaWEuY29tL2dvL2dldGZsYXNocGxheWVyXCIgc3JjPVwiJyt1dGlscy5odG1sKGEpKydcIiB3aWR0aD1cIicrYisnXCIgaGVpZ2h0PVwiJytkKydcIicrKGY/JyBzdHlsZT1cImZsb2F0OicrZisnXCInOlwiXCIpKycgd21vZGU9XCJ0cmFuc3BhcmVudFwiIHBsYXk9XCJ0cnVlXCIgbG9vcD1cImZhbHNlXCIgbWVudT1cImZhbHNlXCIgYWxsb3dzY3JpcHRhY2Nlc3M9XCJuZXZlclwiIGFsbG93ZnVsbHNjcmVlbj1cInRydWVcIiA+JzticmVhaztjYXNlXCJ2aWRlb1wiOnZhciBqPWEuc3Vic3RyKGEubGFzdEluZGV4T2YoXCIuXCIpKzEpO1wib2d2XCI9PWomJihqPVwib2dnXCIpLGk9XCI8dmlkZW9cIisoZT8nIGlkPVwiJytlKydcIic6XCJcIikrJyBjbGFzcz1cIicrZysnIHZpZGVvLWpzXCIgJysoZj8nIHN0eWxlPVwiZmxvYXQ6JytmKydcIic6XCJcIikrJyBjb250cm9scyBwcmVsb2FkPVwibm9uZVwiIHdpZHRoPVwiJytiKydcIiBoZWlnaHQ9XCInK2QrJ1wiIHNyYz1cIicrYSsnXCIgZGF0YS1zZXR1cD1cInt9XCI+PHNvdXJjZSBzcmM9XCInK2ErJ1wiIHR5cGU9XCJ2aWRlby8nK2orJ1wiIC8+PC92aWRlbz4nfXJldHVybiBpfWZ1bmN0aW9uIGIoYixjKXt1dGlscy5lYWNoKGIuZ2V0Tm9kZXNCeVRhZ05hbWUoYz9cImltZ1wiOlwiZW1iZWQgdmlkZW9cIiksZnVuY3Rpb24oYil7dmFyIGQ9Yi5nZXRBdHRyKFwiY2xhc3NcIik7aWYoZCYmZC5pbmRleE9mKFwiZWR1aS1mYWtlZC12aWRlb1wiKSE9LTEpe3ZhciBlPWEoYz9iLmdldEF0dHIoXCJfdXJsXCIpOmIuZ2V0QXR0cihcInNyY1wiKSxiLmdldEF0dHIoXCJ3aWR0aFwiKSxiLmdldEF0dHIoXCJoZWlnaHRcIiksbnVsbCxiLmdldFN0eWxlKFwiZmxvYXRcIil8fFwiXCIsZCxjP1wiZW1iZWRcIjpcImltYWdlXCIpO2IucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoVUUudU5vZGUuY3JlYXRlRWxlbWVudChlKSxiKX1pZihkJiZkLmluZGV4T2YoXCJlZHVpLXVwbG9hZC12aWRlb1wiKSE9LTEpe3ZhciBlPWEoYz9iLmdldEF0dHIoXCJfdXJsXCIpOmIuZ2V0QXR0cihcInNyY1wiKSxiLmdldEF0dHIoXCJ3aWR0aFwiKSxiLmdldEF0dHIoXCJoZWlnaHRcIiksbnVsbCxiLmdldFN0eWxlKFwiZmxvYXRcIil8fFwiXCIsZCxjP1widmlkZW9cIjpcImltYWdlXCIpO2IucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoVUUudU5vZGUuY3JlYXRlRWxlbWVudChlKSxiKX19KX12YXIgYz10aGlzO2MuYWRkT3V0cHV0UnVsZShmdW5jdGlvbihhKXtiKGEsITApfSksYy5hZGRJbnB1dFJ1bGUoZnVuY3Rpb24oYSl7YihhKX0pLGMuY29tbWFuZHMuaW5zZXJ0dmlkZW89e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGIsZCxlKXtkPXV0aWxzLmlzQXJyYXkoZCk/ZDpbZF07Zm9yKHZhciBmLGcsaD1bXSxpPVwidG1wVmVkaW9cIixqPTAsaz1kLmxlbmd0aDtqPGs7aisrKWc9ZFtqXSxmPVwidXBsb2FkXCI9PWU/XCJlZHVpLXVwbG9hZC12aWRlbyB2aWRlby1qcyB2anMtZGVmYXVsdC1za2luXCI6XCJlZHVpLWZha2VkLXZpZGVvXCIsaC5wdXNoKGEoZy51cmwsZy53aWR0aHx8NDIwLGcuaGVpZ2h0fHwyODAsaStqLG51bGwsZixcImltYWdlXCIpKTtjLmV4ZWNDb21tYW5kKFwiaW5zZXJ0aHRtbFwiLGguam9pbihcIlwiKSwhMCk7Zm9yKHZhciBsPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksaj0wLGs9ZC5sZW5ndGg7ajxrO2orKyl7dmFyIG09dGhpcy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRtcFZlZGlvXCIraik7ZG9tVXRpbHMucmVtb3ZlQXR0cmlidXRlcyhtLFwiaWRcIiksbC5zZWxlY3ROb2RlKG0pLnNlbGVjdCgpLGMuZXhlY0NvbW1hbmQoXCJpbWFnZWZsb2F0XCIsZFtqXS5hbGlnbil9fSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPWMuc2VsZWN0aW9uLmdldFJhbmdlKCkuZ2V0Q2xvc2VkTm9kZSgpLGI9YSYmKFwiZWR1aS1mYWtlZC12aWRlb1wiPT1hLmNsYXNzTmFtZXx8YS5jbGFzc05hbWUuaW5kZXhPZihcImVkdWktdXBsb2FkLXZpZGVvXCIpIT0tMSk7cmV0dXJuIGI/MTowfX19LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt9dmFyIGI9VUUuVUVUYWJsZT1mdW5jdGlvbihhKXt0aGlzLnRhYmxlPWEsdGhpcy5pbmRleFRhYmxlPVtdLHRoaXMuc2VsZWN0ZWRUZHM9W10sdGhpcy5jZWxsc1JhbmdlPXt9LHRoaXMudXBkYXRlKGEpfTtiLnJlbW92ZVNlbGVjdGVkQ2xhc3M9ZnVuY3Rpb24oYSl7dXRpbHMuZWFjaChhLGZ1bmN0aW9uKGEpe2RvbVV0aWxzLnJlbW92ZUNsYXNzZXMoYSxcInNlbGVjdFRkQ2xhc3NcIil9KX0sYi5hZGRTZWxlY3RlZENsYXNzPWZ1bmN0aW9uKGEpe3V0aWxzLmVhY2goYSxmdW5jdGlvbihhKXtkb21VdGlscy5hZGRDbGFzcyhhLFwic2VsZWN0VGRDbGFzc1wiKX0pfSxiLmlzRW1wdHlCbG9jaz1mdW5jdGlvbihhKXt2YXIgYj1uZXcgUmVnRXhwKGRvbVV0aWxzLmZpbGxDaGFyLFwiZ1wiKTtpZihhW2Jyb3dzZXIuaWU/XCJpbm5lclRleHRcIjpcInRleHRDb250ZW50XCJdLnJlcGxhY2UoL15cXHMqJC8sXCJcIikucmVwbGFjZShiLFwiXCIpLmxlbmd0aD4wKXJldHVybiAwO2Zvcih2YXIgYyBpbiBkdGQuJGlzTm90RW1wdHkpaWYoZHRkLiRpc05vdEVtcHR5Lmhhc093blByb3BlcnR5KGMpJiZhLmdldEVsZW1lbnRzQnlUYWdOYW1lKGMpLmxlbmd0aClyZXR1cm4gMDtyZXR1cm4gMX0sYi5nZXRXaWR0aD1mdW5jdGlvbihhKXtyZXR1cm4gYT9wYXJzZUludChkb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGEsXCJ3aWR0aFwiKSwxMCk6MH0sYi5nZXRUYWJsZUNlbGxBbGlnblN0YXRlPWZ1bmN0aW9uKGEpeyF1dGlscy5pc0FycmF5KGEpJiYoYT1bYV0pO3ZhciBiPXt9LGM9W1wiYWxpZ25cIixcInZhbGlnblwiXSxkPW51bGwsZT0hMDtyZXR1cm4gdXRpbHMuZWFjaChhLGZ1bmN0aW9uKGEpe3JldHVybiB1dGlscy5lYWNoKGMsZnVuY3Rpb24oYyl7aWYoZD1hLmdldEF0dHJpYnV0ZShjKSwhYltjXSYmZCliW2NdPWQ7ZWxzZSBpZighYltjXXx8ZCE9PWJbY10pcmV0dXJuIGU9ITEsITF9KSxlfSksZT9iOm51bGx9LGIuZ2V0VGFibGVJdGVtc0J5UmFuZ2U9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zZWxlY3Rpb24uZ2V0U3RhcnQoKTtiJiZiLmlkJiYwPT09Yi5pZC5pbmRleE9mKFwiX2JhaWR1X2Jvb2ttYXJrX3N0YXJ0X1wiKSYmYi5uZXh0U2libGluZyYmKGI9Yi5uZXh0U2libGluZyk7dmFyIGM9YiYmZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShiLFtcInRkXCIsXCJ0aFwiXSwhMCksZD1jJiZjLnBhcmVudE5vZGUsZT1iJiZkb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGIsXCJjYXB0aW9uXCIsITApLGY9ZT9lLnBhcmVudE5vZGU6ZCYmZC5wYXJlbnROb2RlLnBhcmVudE5vZGU7cmV0dXJue2NlbGw6Yyx0cjpkLHRhYmxlOmYsY2FwdGlvbjplfX0sYi5nZXRVRVRhYmxlQnlTZWxlY3RlZD1mdW5jdGlvbihhKXt2YXIgYz1iLmdldFRhYmxlSXRlbXNCeVJhbmdlKGEpLnRhYmxlO3JldHVybiBjJiZjLnVlVGFibGUmJmMudWVUYWJsZS5zZWxlY3RlZFRkcy5sZW5ndGg/Yy51ZVRhYmxlOm51bGx9LGIuZ2V0RGVmYXVsdFZhbHVlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz17dGhpbjpcIjBweFwiLG1lZGl1bTpcIjFweFwiLHRoaWNrOlwiMnB4XCJ9O2lmKGIpcmV0dXJuIGg9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpWzBdLGY9ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShiLFwiYm9yZGVyLWxlZnQtd2lkdGhcIiksYz1wYXJzZUludChnW2ZdfHxmLDEwKSxmPWRvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoaCxcInBhZGRpbmctbGVmdFwiKSxkPXBhcnNlSW50KGdbZl18fGYsMTApLGY9ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShoLFwiYm9yZGVyLWxlZnQtd2lkdGhcIiksZT1wYXJzZUludChnW2ZdfHxmLDEwKSx7dGFibGVCb3JkZXI6Yyx0ZFBhZGRpbmc6ZCx0ZEJvcmRlcjplfTtiPWEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpLGIuaW5zZXJ0Um93KDApLmluc2VydENlbGwoMCkuaW5uZXJIVE1MPVwieHh4XCIsYS5ib2R5LmFwcGVuZENoaWxkKGIpO3ZhciBoPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZFwiKVswXTtyZXR1cm4gZj1kb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGIsXCJib3JkZXItbGVmdC13aWR0aFwiKSxjPXBhcnNlSW50KGdbZl18fGYsMTApLGY9ZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShoLFwicGFkZGluZy1sZWZ0XCIpLGQ9cGFyc2VJbnQoZ1tmXXx8ZiwxMCksZj1kb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGgsXCJib3JkZXItbGVmdC13aWR0aFwiKSxlPXBhcnNlSW50KGdbZl18fGYsMTApLGRvbVV0aWxzLnJlbW92ZShiKSx7dGFibGVCb3JkZXI6Yyx0ZFBhZGRpbmc6ZCx0ZEJvcmRlcjplfX0sYi5nZXRVRVRhYmxlPWZ1bmN0aW9uKGEpe3ZhciBjPWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiBhPVwidGRcIj09Y3x8XCJ0aFwiPT1jfHxcImNhcHRpb25cIj09Yz9kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGEsXCJ0YWJsZVwiLCEwKTphLGEudWVUYWJsZXx8KGEudWVUYWJsZT1uZXcgYihhKSksYS51ZVRhYmxlfSxiLmNsb25lQ2VsbD1mdW5jdGlvbihhLGIsYyl7aWYoIWF8fHV0aWxzLmlzU3RyaW5nKGEpKXJldHVybiB0aGlzLnRhYmxlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChhfHxcInRkXCIpO3ZhciBkPWRvbVV0aWxzLmhhc0NsYXNzKGEsXCJzZWxlY3RUZENsYXNzXCIpO2QmJmRvbVV0aWxzLnJlbW92ZUNsYXNzZXMoYSxcInNlbGVjdFRkQ2xhc3NcIik7dmFyIGU9YS5jbG9uZU5vZGUoITApO3JldHVybiBiJiYoZS5yb3dTcGFuPWUuY29sU3Bhbj0xKSwhYyYmZG9tVXRpbHMucmVtb3ZlQXR0cmlidXRlcyhlLFwid2lkdGggaGVpZ2h0XCIpLCFjJiZkb21VdGlscy5yZW1vdmVBdHRyaWJ1dGVzKGUsXCJzdHlsZVwiKSxlLnN0eWxlLmJvcmRlckxlZnRTdHlsZT1cIlwiLGUuc3R5bGUuYm9yZGVyVG9wU3R5bGU9XCJcIixlLnN0eWxlLmJvcmRlckxlZnRDb2xvcj1hLnN0eWxlLmJvcmRlclJpZ2h0Q29sb3IsZS5zdHlsZS5ib3JkZXJMZWZ0V2lkdGg9YS5zdHlsZS5ib3JkZXJSaWdodFdpZHRoLGUuc3R5bGUuYm9yZGVyVG9wQ29sb3I9YS5zdHlsZS5ib3JkZXJCb3R0b21Db2xvcixlLnN0eWxlLmJvcmRlclRvcFdpZHRoPWEuc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgsZCYmZG9tVXRpbHMuYWRkQ2xhc3MoYSxcInNlbGVjdFRkQ2xhc3NcIiksZX0sYi5wcm90b3R5cGU9e2dldE1heFJvd3M6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj10aGlzLnRhYmxlLnJvd3MsYz0xLGQ9MDthPWJbZF07ZCsrKXtmb3IodmFyIGUsZj0xLGc9MDtlPWEuY2VsbHNbZysrXTspZj1NYXRoLm1heChlLnJvd1NwYW58fDEsZik7Yz1NYXRoLm1heChmK2QsYyl9cmV0dXJuIGN9LGdldE1heENvbHM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj10aGlzLnRhYmxlLnJvd3MsYz0wLGQ9e30sZT0wO2E9YltlXTtlKyspe2Zvcih2YXIgZixnPTAsaD0wO2Y9YS5jZWxsc1toKytdOylpZihnKz1mLmNvbFNwYW58fDEsZi5yb3dTcGFuJiZmLnJvd1NwYW4+MSlmb3IodmFyIGk9MTtpPGYucm93U3BhbjtpKyspZFtcInJvd19cIisoZStpKV0/ZFtcInJvd19cIisoZStpKV0rKzpkW1wicm93X1wiKyhlK2kpXT1mLmNvbFNwYW58fDE7Zys9ZFtcInJvd19cIitlXXx8MCxjPU1hdGgubWF4KGcsYyl9cmV0dXJuIGN9LGdldENlbGxDb2xJbmRleDpmdW5jdGlvbihhKXt9LGdldEhTaWRlQ2VsbDpmdW5jdGlvbihiLGMpe3RyeXt2YXIgZCxlLGY9dGhpcy5nZXRDZWxsSW5mbyhiKSxnPXRoaXMuc2VsZWN0ZWRUZHMubGVuZ3RoLGg9dGhpcy5jZWxsc1JhbmdlO3JldHVybiFjJiYoZz8haC5iZWdpbkNvbEluZGV4OiFmLmNvbEluZGV4KXx8YyYmKGc/aC5lbmRDb2xJbmRleD09dGhpcy5jb2xzTnVtLTE6Zi5jb2xJbmRleD09dGhpcy5jb2xzTnVtLTEpP251bGw6KGQ9Zz9oLmJlZ2luUm93SW5kZXg6Zi5yb3dJbmRleCxlPWM/Zz9oLmVuZENvbEluZGV4KzE6Zi5jb2xJbmRleCsxOmc/aC5iZWdpbkNvbEluZGV4LTE6Zi5jb2xJbmRleDwxPzA6Zi5jb2xJbmRleC0xLHRoaXMuZ2V0Q2VsbCh0aGlzLmluZGV4VGFibGVbZF1bZV0ucm93SW5kZXgsdGhpcy5pbmRleFRhYmxlW2RdW2VdLmNlbGxJbmRleCkpfWNhdGNoKGkpe2EoaSl9fSxnZXRUYWJOZXh0Q2VsbDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5nZXRDZWxsSW5mbyhhKSxlPWJ8fGQucm93SW5kZXgsZj1kLmNvbEluZGV4KzErKGQuY29sU3Bhbi0xKTt0cnl7Yz10aGlzLmdldENlbGwodGhpcy5pbmRleFRhYmxlW2VdW2ZdLnJvd0luZGV4LHRoaXMuaW5kZXhUYWJsZVtlXVtmXS5jZWxsSW5kZXgpfWNhdGNoKGcpe3RyeXtlPTEqZSsxLGY9MCxjPXRoaXMuZ2V0Q2VsbCh0aGlzLmluZGV4VGFibGVbZV1bZl0ucm93SW5kZXgsdGhpcy5pbmRleFRhYmxlW2VdW2ZdLmNlbGxJbmRleCl9Y2F0Y2goZyl7fX1yZXR1cm4gY30sZ2V0VlNpZGVDZWxsOmZ1bmN0aW9uKGIsYyxkKXt0cnl7dmFyIGUsZixnPXRoaXMuZ2V0Q2VsbEluZm8oYiksaD10aGlzLnNlbGVjdGVkVGRzLmxlbmd0aCYmIWQsaT10aGlzLmNlbGxzUmFuZ2U7cmV0dXJuIWMmJjA9PWcucm93SW5kZXh8fGMmJihoP2kuZW5kUm93SW5kZXg9PXRoaXMucm93c051bS0xOmcucm93SW5kZXgrZy5yb3dTcGFuPnRoaXMucm93c051bS0xKT9udWxsOihlPWM/aD9pLmVuZFJvd0luZGV4KzE6Zy5yb3dJbmRleCtnLnJvd1NwYW46aD9pLmJlZ2luUm93SW5kZXgtMTpnLnJvd0luZGV4LTEsZj1oP2kuYmVnaW5Db2xJbmRleDpnLmNvbEluZGV4LHRoaXMuZ2V0Q2VsbCh0aGlzLmluZGV4VGFibGVbZV1bZl0ucm93SW5kZXgsdGhpcy5pbmRleFRhYmxlW2VdW2ZdLmNlbGxJbmRleCkpfWNhdGNoKGope2Eoail9fSxnZXRTYW1lRW5kUG9zQ2VsbHM6ZnVuY3Rpb24oYixjKXt0cnl7Zm9yKHZhciBkPVwieFwiPT09Yy50b0xvd2VyQ2FzZSgpLGU9ZG9tVXRpbHMuZ2V0WFkoYilbZD9cInhcIjpcInlcIl0rYltcIm9mZnNldFwiKyhkP1wiV2lkdGhcIjpcIkhlaWdodFwiKV0sZj10aGlzLnRhYmxlLnJvd3MsZz1udWxsLGg9W10saT0wO2k8dGhpcy5yb3dzTnVtO2krKyl7Zz1mW2ldLmNlbGxzO2Zvcih2YXIgaixrPTA7aj1nW2srK107KXt2YXIgbD1kb21VdGlscy5nZXRYWShqKVtkP1wieFwiOlwieVwiXStqW1wib2Zmc2V0XCIrKGQ/XCJXaWR0aFwiOlwiSGVpZ2h0XCIpXTtpZihsPmUmJmQpYnJlYWs7aWYoKGI9PWp8fGU9PWwpJiYoMT09altkP1wiY29sU3BhblwiOlwicm93U3BhblwiXSYmaC5wdXNoKGopLGQpKWJyZWFrfX1yZXR1cm4gaH1jYXRjaChtKXthKG0pfX0sc2V0Q2VsbENvbnRlbnQ6ZnVuY3Rpb24oYSxiKXthLmlubmVySFRNTD1ifHwoYnJvd3Nlci5pZT9kb21VdGlscy5maWxsQ2hhcjpcIjxiciAvPlwiKX0sY2xvbmVDZWxsOmIuY2xvbmVDZWxsLGdldFNhbWVTdGFydFBvc1hDZWxsczpmdW5jdGlvbihiKXt0cnl7Zm9yKHZhciBjLGQ9ZG9tVXRpbHMuZ2V0WFkoYikueCtiLm9mZnNldFdpZHRoLGU9dGhpcy50YWJsZS5yb3dzLGY9W10sZz0wO2c8dGhpcy5yb3dzTnVtO2crKyl7Yz1lW2ddLmNlbGxzO2Zvcih2YXIgaCxpPTA7aD1jW2krK107KXt2YXIgaj1kb21VdGlscy5nZXRYWShoKS54O2lmKGo+ZClicmVhaztpZihqPT1kJiYxPT1oLmNvbFNwYW4pe2YucHVzaChoKTticmVha319fXJldHVybiBmfWNhdGNoKGspe2Eoayl9fSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy50YWJsZT1hfHx0aGlzLnRhYmxlLHRoaXMuc2VsZWN0ZWRUZHM9W10sdGhpcy5jZWxsc1JhbmdlPXt9LHRoaXMuaW5kZXhUYWJsZT1bXTtmb3IodmFyIGI9dGhpcy50YWJsZS5yb3dzLGM9dGhpcy5nZXRNYXhSb3dzKCksZD1jLWIubGVuZ3RoLGU9dGhpcy5nZXRNYXhDb2xzKCk7ZC0tOyl0aGlzLnRhYmxlLmluc2VydFJvdyhiLmxlbmd0aCk7dGhpcy5yb3dzTnVtPWMsdGhpcy5jb2xzTnVtPWU7Zm9yKHZhciBmPTAsZz1iLmxlbmd0aDtmPGc7ZisrKXRoaXMuaW5kZXhUYWJsZVtmXT1uZXcgQXJyYXkoZSk7Zm9yKHZhciBoLGk9MDtoPWJbaV07aSsrKWZvcih2YXIgaixrPTAsbD1oLmNlbGxzO2o9bFtrXTtrKyspe2oucm93U3Bhbj5jJiYoai5yb3dTcGFuPWMpO2Zvcih2YXIgbT1rLG49ai5yb3dTcGFufHwxLG89ai5jb2xTcGFufHwxO3RoaXMuaW5kZXhUYWJsZVtpXVttXTspbSsrO2Zvcih2YXIgcD0wO3A8bjtwKyspZm9yKHZhciBxPTA7cTxvO3ErKyl0aGlzLmluZGV4VGFibGVbaStwXVttK3FdPXtyb3dJbmRleDppLGNlbGxJbmRleDprLGNvbEluZGV4Om0scm93U3BhbjpuLGNvbFNwYW46b319Zm9yKHA9MDtwPGM7cCsrKWZvcihxPTA7cTxlO3ErKyl2b2lkIDA9PT10aGlzLmluZGV4VGFibGVbcF1bcV0mJihoPWJbcF0saj1oLmNlbGxzW2guY2VsbHMubGVuZ3RoLTFdLGo9aj9qLmNsb25lTm9kZSghMCk6dGhpcy50YWJsZS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKSx0aGlzLnNldENlbGxDb250ZW50KGopLDEhPT1qLmNvbFNwYW4mJihqLmNvbFNwYW49MSksMSE9PWoucm93U3BhbiYmKGoucm93U3Bhbj0xKSxoLmFwcGVuZENoaWxkKGopLHRoaXMuaW5kZXhUYWJsZVtwXVtxXT17cm93SW5kZXg6cCxjZWxsSW5kZXg6ai5jZWxsSW5kZXgsY29sSW5kZXg6cSxyb3dTcGFuOjEsY29sU3BhbjoxfSk7dmFyIHI9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGhpcy50YWJsZSxcInRkXCIpLHM9W107aWYodXRpbHMuZWFjaChyLGZ1bmN0aW9uKGEpe2RvbVV0aWxzLmhhc0NsYXNzKGEsXCJzZWxlY3RUZENsYXNzXCIpJiZzLnB1c2goYSl9KSxzLmxlbmd0aCl7dmFyIHQ9c1swXSx1PXNbcy5sZW5ndGgtMV0sdj10aGlzLmdldENlbGxJbmZvKHQpLHc9dGhpcy5nZXRDZWxsSW5mbyh1KTt0aGlzLnNlbGVjdGVkVGRzPXMsdGhpcy5jZWxsc1JhbmdlPXtiZWdpblJvd0luZGV4OnYucm93SW5kZXgsYmVnaW5Db2xJbmRleDp2LmNvbEluZGV4LGVuZFJvd0luZGV4Oncucm93SW5kZXgrdy5yb3dTcGFuLTEsZW5kQ29sSW5kZXg6dy5jb2xJbmRleCt3LmNvbFNwYW4tMX19aWYoIWRvbVV0aWxzLmhhc0NsYXNzKHRoaXMudGFibGUucm93c1swXSxcImZpcnN0Um93XCIpKXtkb21VdGlscy5hZGRDbGFzcyh0aGlzLnRhYmxlLnJvd3NbMF0sXCJmaXJzdFJvd1wiKTtmb3IodmFyIGY9MTtmPHRoaXMudGFibGUucm93cy5sZW5ndGg7ZisrKWRvbVV0aWxzLnJlbW92ZUNsYXNzZXModGhpcy50YWJsZS5yb3dzW2ZdLFwiZmlyc3RSb3dcIil9fSxnZXRDZWxsSW5mbzpmdW5jdGlvbihhKXtpZihhKWZvcih2YXIgYj1hLmNlbGxJbmRleCxjPWEucGFyZW50Tm9kZS5yb3dJbmRleCxkPXRoaXMuaW5kZXhUYWJsZVtjXSxlPXRoaXMuY29sc051bSxmPWI7ZjxlO2YrKyl7dmFyIGc9ZFtmXTtpZihnLnJvd0luZGV4PT09YyYmZy5jZWxsSW5kZXg9PT1iKXJldHVybiBnfX0sZ2V0Q2VsbDpmdW5jdGlvbihhLGIpe3JldHVybiBhPHRoaXMucm93c051bSYmdGhpcy50YWJsZS5yb3dzW2FdLmNlbGxzW2JdfHxudWxsfSxkZWxldGVDZWxsOmZ1bmN0aW9uKGEsYil7Yj1cIm51bWJlclwiPT10eXBlb2YgYj9iOmEucGFyZW50Tm9kZS5yb3dJbmRleDt2YXIgYz10aGlzLnRhYmxlLnJvd3NbYl07Yy5kZWxldGVDZWxsKGEuY2VsbEluZGV4KX0sZ2V0Q2VsbHNSYW5nZTpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiLGUsZil7dmFyIGcsaCxpLGo9YSxrPWIsbD1lLG09ZjtpZihhPjApZm9yKGg9YjtoPGY7aCsrKWc9ZC5pbmRleFRhYmxlW2FdW2hdLGk9Zy5yb3dJbmRleCxpPGEmJihqPU1hdGgubWluKGksaikpO2lmKGY8ZC5jb2xzTnVtKWZvcihpPWE7aTxlO2krKylnPWQuaW5kZXhUYWJsZVtpXVtmXSxoPWcuY29sSW5kZXgrZy5jb2xTcGFuLTEsaD5mJiYobT1NYXRoLm1heChoLG0pKTtpZihlPGQucm93c051bSlmb3IoaD1iO2g8ZjtoKyspZz1kLmluZGV4VGFibGVbZV1baF0saT1nLnJvd0luZGV4K2cucm93U3Bhbi0xLGk+ZSYmKGw9TWF0aC5tYXgoaSxsKSk7aWYoYj4wKWZvcihpPWE7aTxlO2krKylnPWQuaW5kZXhUYWJsZVtpXVtiXSxoPWcuY29sSW5kZXgsaDxiJiYoaz1NYXRoLm1pbihnLmNvbEluZGV4LGspKTtyZXR1cm4gaiE9YXx8ayE9Ynx8bCE9ZXx8bSE9Zj9jKGosayxsLG0pOntiZWdpblJvd0luZGV4OmEsYmVnaW5Db2xJbmRleDpiLGVuZFJvd0luZGV4OmUsZW5kQ29sSW5kZXg6Zn19dHJ5e3ZhciBkPXRoaXMsZT1kLmdldENlbGxJbmZvKGEpO2lmKGE9PT1iKXJldHVybntiZWdpblJvd0luZGV4OmUucm93SW5kZXgsYmVnaW5Db2xJbmRleDplLmNvbEluZGV4LGVuZFJvd0luZGV4OmUucm93SW5kZXgrZS5yb3dTcGFuLTEsZW5kQ29sSW5kZXg6ZS5jb2xJbmRleCtlLmNvbFNwYW4tMX07dmFyIGY9ZC5nZXRDZWxsSW5mbyhiKSxnPU1hdGgubWluKGUucm93SW5kZXgsZi5yb3dJbmRleCksaD1NYXRoLm1pbihlLmNvbEluZGV4LGYuY29sSW5kZXgpLGk9TWF0aC5tYXgoZS5yb3dJbmRleCtlLnJvd1NwYW4tMSxmLnJvd0luZGV4K2Yucm93U3Bhbi0xKSxqPU1hdGgubWF4KGUuY29sSW5kZXgrZS5jb2xTcGFuLTEsZi5jb2xJbmRleCtmLmNvbFNwYW4tMSk7cmV0dXJuIGMoZyxoLGksail9Y2F0Y2goayl7fX0sZ2V0Q2VsbHM6ZnVuY3Rpb24oYSl7dGhpcy5jbGVhclNlbGVjdGVkKCk7Zm9yKHZhciBiLGMsZCxlPWEuYmVnaW5Sb3dJbmRleCxmPWEuYmVnaW5Db2xJbmRleCxnPWEuZW5kUm93SW5kZXgsaD1hLmVuZENvbEluZGV4LGk9e30saj1bXSxrPWU7azw9ZztrKyspZm9yKHZhciBsPWY7bDw9aDtsKyspe2I9dGhpcy5pbmRleFRhYmxlW2tdW2xdLGM9Yi5yb3dJbmRleCxkPWIuY29sSW5kZXg7dmFyIG09YytcInxcIitkO2lmKCFpW21dKXtpZihpW21dPTEsYzxrfHxkPGx8fGMrYi5yb3dTcGFuLTE+Z3x8ZCtiLmNvbFNwYW4tMT5oKXJldHVybiBudWxsO2oucHVzaCh0aGlzLmdldENlbGwoYyxiLmNlbGxJbmRleCkpfX1yZXR1cm4gan0sY2xlYXJTZWxlY3RlZDpmdW5jdGlvbigpe2IucmVtb3ZlU2VsZWN0ZWRDbGFzcyh0aGlzLnNlbGVjdGVkVGRzKSx0aGlzLnNlbGVjdGVkVGRzPVtdLHRoaXMuY2VsbHNSYW5nZT17fX0sc2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5nZXRDZWxscyhhKTtiLmFkZFNlbGVjdGVkQ2xhc3MoYyksdGhpcy5zZWxlY3RlZFRkcz1jLHRoaXMuY2VsbHNSYW5nZT1hfSxpc0Z1bGxSb3c6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNlbGxzUmFuZ2U7cmV0dXJuIGEuZW5kQ29sSW5kZXgtYS5iZWdpbkNvbEluZGV4KzE9PXRoaXMuY29sc051bX0saXNGdWxsQ29sOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jZWxsc1JhbmdlLGI9dGhpcy50YWJsZSxjPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0aFwiKSxkPWEuZW5kUm93SW5kZXgtYS5iZWdpblJvd0luZGV4KzE7cmV0dXJuIGMubGVuZ3RoP2Q9PXRoaXMucm93c051bXx8ZD09dGhpcy5yb3dzTnVtLTE6ZD09dGhpcy5yb3dzTnVtfSxnZXROZXh0Q2VsbDpmdW5jdGlvbihiLGMsZCl7dHJ5e3ZhciBlLGYsZz10aGlzLmdldENlbGxJbmZvKGIpLGg9dGhpcy5zZWxlY3RlZFRkcy5sZW5ndGgmJiFkLGk9dGhpcy5jZWxsc1JhbmdlO3JldHVybiFjJiYwPT1nLnJvd0luZGV4fHxjJiYoaD9pLmVuZFJvd0luZGV4PT10aGlzLnJvd3NOdW0tMTpnLnJvd0luZGV4K2cucm93U3Bhbj50aGlzLnJvd3NOdW0tMSk/bnVsbDooZT1jP2g/aS5lbmRSb3dJbmRleCsxOmcucm93SW5kZXgrZy5yb3dTcGFuOmg/aS5iZWdpblJvd0luZGV4LTE6Zy5yb3dJbmRleC0xLGY9aD9pLmJlZ2luQ29sSW5kZXg6Zy5jb2xJbmRleCx0aGlzLmdldENlbGwodGhpcy5pbmRleFRhYmxlW2VdW2ZdLnJvd0luZGV4LHRoaXMuaW5kZXhUYWJsZVtlXVtmXS5jZWxsSW5kZXgpKX1jYXRjaChqKXthKGopfX0sZ2V0UHJldmlld0NlbGw6ZnVuY3Rpb24oYixjKXt0cnl7dmFyIGQsZSxmPXRoaXMuZ2V0Q2VsbEluZm8oYiksZz10aGlzLnNlbGVjdGVkVGRzLmxlbmd0aCxoPXRoaXMuY2VsbHNSYW5nZTtyZXR1cm4hYyYmKGc/IWguYmVnaW5Db2xJbmRleDohZi5jb2xJbmRleCl8fGMmJihnP2guZW5kQ29sSW5kZXg9PXRoaXMuY29sc051bS0xOmYucm93SW5kZXg+dGhpcy5jb2xzTnVtLTEpP251bGw6KGQ9Yz9nP2guYmVnaW5Sb3dJbmRleDpmLnJvd0luZGV4PDE/MDpmLnJvd0luZGV4LTE6Zz9oLmJlZ2luUm93SW5kZXg6Zi5yb3dJbmRleCxlPWM/Zz9oLmVuZENvbEluZGV4KzE6Zi5jb2xJbmRleDpnP2guYmVnaW5Db2xJbmRleC0xOmYuY29sSW5kZXg8MT8wOmYuY29sSW5kZXgtMSx0aGlzLmdldENlbGwodGhpcy5pbmRleFRhYmxlW2RdW2VdLnJvd0luZGV4LHRoaXMuaW5kZXhUYWJsZVtkXVtlXS5jZWxsSW5kZXgpKX1jYXRjaChpKXthKGkpfX0sbW92ZUNvbnRlbnQ6ZnVuY3Rpb24oYSxjKXtpZighYi5pc0VtcHR5QmxvY2soYykpe2lmKGIuaXNFbXB0eUJsb2NrKGEpKXJldHVybiB2b2lkKGEuaW5uZXJIVE1MPWMuaW5uZXJIVE1MKTt2YXIgZD1hLmxhc3RDaGlsZDtmb3IoMyE9ZC5ub2RlVHlwZSYmZHRkLiRibG9ja1tkLnRhZ05hbWVdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO2Q9Yy5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKGQpfX0sbWVyZ2VSaWdodDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldENlbGxJbmZvKGEpLGM9Yi5jb2xJbmRleCtiLmNvbFNwYW4sZD10aGlzLmluZGV4VGFibGVbYi5yb3dJbmRleF1bY10sZT10aGlzLmdldENlbGwoZC5yb3dJbmRleCxkLmNlbGxJbmRleCk7YS5jb2xTcGFuPWIuY29sU3BhbitkLmNvbFNwYW4sYS5yZW1vdmVBdHRyaWJ1dGUoXCJ3aWR0aFwiKSx0aGlzLm1vdmVDb250ZW50KGEsZSksdGhpcy5kZWxldGVDZWxsKGUsZC5yb3dJbmRleCksdGhpcy51cGRhdGUoKX0sbWVyZ2VEb3duOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Q2VsbEluZm8oYSksYz1iLnJvd0luZGV4K2Iucm93U3BhbixkPXRoaXMuaW5kZXhUYWJsZVtjXVtiLmNvbEluZGV4XSxlPXRoaXMuZ2V0Q2VsbChkLnJvd0luZGV4LGQuY2VsbEluZGV4KTthLnJvd1NwYW49Yi5yb3dTcGFuK2Qucm93U3BhbixhLnJlbW92ZUF0dHJpYnV0ZShcImhlaWdodFwiKSx0aGlzLm1vdmVDb250ZW50KGEsZSksdGhpcy5kZWxldGVDZWxsKGUsZC5yb3dJbmRleCksdGhpcy51cGRhdGUoKX0sbWVyZ2VSYW5nZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2VsbHNSYW5nZSxiPXRoaXMuZ2V0Q2VsbChhLmJlZ2luUm93SW5kZXgsdGhpcy5pbmRleFRhYmxlW2EuYmVnaW5Sb3dJbmRleF1bYS5iZWdpbkNvbEluZGV4XS5jZWxsSW5kZXgpO2lmKFwiVEhcIj09Yi50YWdOYW1lJiZhLmVuZFJvd0luZGV4IT09YS5iZWdpblJvd0luZGV4KXt2YXIgYz10aGlzLmluZGV4VGFibGUsZD10aGlzLmdldENlbGxJbmZvKGIpO2I9dGhpcy5nZXRDZWxsKDEsY1sxXVtkLmNvbEluZGV4XS5jZWxsSW5kZXgpLGE9dGhpcy5nZXRDZWxsc1JhbmdlKGIsdGhpcy5nZXRDZWxsKGNbdGhpcy5yb3dzTnVtLTFdW2QuY29sSW5kZXhdLnJvd0luZGV4LGNbdGhpcy5yb3dzTnVtLTFdW2QuY29sSW5kZXhdLmNlbGxJbmRleCkpfWZvcih2YXIgZSxmPXRoaXMuZ2V0Q2VsbHMoYSksZz0wO2U9ZltnKytdOyllIT09YiYmKHRoaXMubW92ZUNvbnRlbnQoYixlKSx0aGlzLmRlbGV0ZUNlbGwoZSkpO2lmKGIucm93U3Bhbj1hLmVuZFJvd0luZGV4LWEuYmVnaW5Sb3dJbmRleCsxLGIucm93U3Bhbj4xJiZiLnJlbW92ZUF0dHJpYnV0ZShcImhlaWdodFwiKSxiLmNvbFNwYW49YS5lbmRDb2xJbmRleC1hLmJlZ2luQ29sSW5kZXgrMSxiLmNvbFNwYW4+MSYmYi5yZW1vdmVBdHRyaWJ1dGUoXCJ3aWR0aFwiKSxiLnJvd1NwYW49PXRoaXMucm93c051bSYmMSE9Yi5jb2xTcGFuJiYoYi5jb2xTcGFuPTEpLGIuY29sU3Bhbj09dGhpcy5jb2xzTnVtJiYxIT1iLnJvd1NwYW4pe3ZhciBoPWIucGFyZW50Tm9kZS5yb3dJbmRleDtpZih0aGlzLnRhYmxlLmRlbGV0ZVJvdylmb3IodmFyIGc9aCsxLGk9aCsxLGo9Yi5yb3dTcGFuO2c8ajtnKyspdGhpcy50YWJsZS5kZWxldGVSb3coaSk7ZWxzZSBmb3IodmFyIGc9MCxqPWIucm93U3Bhbi0xO2c8ajtnKyspe3ZhciBrPXRoaXMudGFibGUucm93c1toKzFdO2sucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChrKX1iLnJvd1NwYW49MX10aGlzLnVwZGF0ZSgpfSxpbnNlcnRSb3c6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYixjKXtpZigwPT1hKXt2YXIgZD1jLm5leHRTaWJsaW5nfHxjLnByZXZpb3VzU2libGluZyxlPWQuY2VsbHNbYV07XCJUSFwiPT1lLnRhZ05hbWUmJihlPWIub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIiksZS5hcHBlbmRDaGlsZChiLmZpcnN0Q2hpbGQpLGMuaW5zZXJ0QmVmb3JlKGUsYiksZG9tVXRpbHMucmVtb3ZlKGIpKX1lbHNlIGlmKFwiVEhcIj09Yi50YWdOYW1lKXt2YXIgZj1iLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO2YuYXBwZW5kQ2hpbGQoYi5maXJzdENoaWxkKSxjLmluc2VydEJlZm9yZShmLGIpLGRvbVV0aWxzLnJlbW92ZShiKX19dmFyIGQsZT10aGlzLmNvbHNOdW0sZj10aGlzLnRhYmxlLGc9Zi5pbnNlcnRSb3coYSksaD1cInN0cmluZ1wiPT10eXBlb2YgYiYmXCJUSFwiPT1iLnRvVXBwZXJDYXNlKCk7aWYoMD09YXx8YT09dGhpcy5yb3dzTnVtKWZvcih2YXIgaT0wO2k8ZTtpKyspZD10aGlzLmNsb25lQ2VsbChiLCEwKSx0aGlzLnNldENlbGxDb250ZW50KGQpLGQuZ2V0QXR0cmlidXRlKFwidkFsaWduXCIpJiZkLnNldEF0dHJpYnV0ZShcInZBbGlnblwiLGQuZ2V0QXR0cmlidXRlKFwidkFsaWduXCIpKSxnLmFwcGVuZENoaWxkKGQpLGh8fGMoaSxkLGcpO2Vsc2V7dmFyIGo9dGhpcy5pbmRleFRhYmxlW2FdO2ZvcihpPTA7aTxlO2krKyl7dmFyIGs9altpXTtrLnJvd0luZGV4PGE/KGQ9dGhpcy5nZXRDZWxsKGsucm93SW5kZXgsay5jZWxsSW5kZXgpLGQucm93U3Bhbj1rLnJvd1NwYW4rMSk6KGQ9dGhpcy5jbG9uZUNlbGwoYiwhMCksdGhpcy5zZXRDZWxsQ29udGVudChkKSxnLmFwcGVuZENoaWxkKGQpKSxofHxjKGksZCxnKX19cmV0dXJuIHRoaXMudXBkYXRlKCksZ30sZGVsZXRlUm93OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnRhYmxlLnJvd3NbYV0sYz10aGlzLmluZGV4VGFibGVbYV0sZD10aGlzLmNvbHNOdW0sZT0wLGY9MDtmPGQ7KXt2YXIgZz1jW2ZdLGg9dGhpcy5nZXRDZWxsKGcucm93SW5kZXgsZy5jZWxsSW5kZXgpO2lmKGgucm93U3Bhbj4xJiZnLnJvd0luZGV4PT1hKXt2YXIgaT1oLmNsb25lTm9kZSghMCk7aS5yb3dTcGFuPWgucm93U3Bhbi0xLGkuaW5uZXJIVE1MPVwiXCIsaC5yb3dTcGFuPTE7dmFyIGosaz1hKzEsbD10aGlzLnRhYmxlLnJvd3Nba10sbT10aGlzLmdldFByZXZpZXdNZXJnZWRDZWxsc051bShrLGYpLWU7bTxmPyhqPWYtbS0xLGRvbVV0aWxzLmluc2VydEFmdGVyKGwuY2VsbHNbal0saSkpOmwuY2VsbHMubGVuZ3RoJiZsLmluc2VydEJlZm9yZShpLGwuY2VsbHNbMF0pLGUrPTF9Zis9aC5jb2xTcGFufHwxfXZhciBuPVtdLG89e307Zm9yKGY9MDtmPGQ7ZisrKXt2YXIgcD1jW2ZdLnJvd0luZGV4LHE9Y1tmXS5jZWxsSW5kZXgscj1wK1wiX1wiK3E7b1tyXXx8KG9bcl09MSxoPXRoaXMuZ2V0Q2VsbChwLHEpLG4ucHVzaChoKSl9dmFyIHM9W107dXRpbHMuZWFjaChuLGZ1bmN0aW9uKGEpezE9PWEucm93U3Bhbj9hLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk6cy5wdXNoKGEpfSksdXRpbHMuZWFjaChzLGZ1bmN0aW9uKGEpe2Eucm93U3Bhbi0tfSksYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLHRoaXMudXBkYXRlKCl9LGluc2VydENvbDpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIsYyl7aWYoMD09YSl7dmFyIGQ9Yi5uZXh0U2libGluZ3x8Yi5wcmV2aW91c1NpYmxpbmc7XCJUSFwiPT1kLnRhZ05hbWUmJihkPWIub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIiksZC5hcHBlbmRDaGlsZChiLmZpcnN0Q2hpbGQpLGMuaW5zZXJ0QmVmb3JlKGQsYiksZG9tVXRpbHMucmVtb3ZlKGIpKX1lbHNlIGlmKFwiVEhcIj09Yi50YWdOYW1lKXt2YXIgZT1iLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO2UuYXBwZW5kQ2hpbGQoYi5maXJzdENoaWxkKSxjLmluc2VydEJlZm9yZShlLGIpLGRvbVV0aWxzLnJlbW92ZShiKX19dmFyIGUsZixnLGg9dGhpcy5yb3dzTnVtLGk9MCxqPXBhcnNlSW50KCh0aGlzLnRhYmxlLm9mZnNldFdpZHRoLTIwKih0aGlzLmNvbHNOdW0rMSktKHRoaXMuY29sc051bSsxKSkvKHRoaXMuY29sc051bSsxKSwxMCksaz1cInN0cmluZ1wiPT10eXBlb2YgYiYmXCJUSFwiPT1iLnRvVXBwZXJDYXNlKCk7aWYoMD09YXx8YT09dGhpcy5jb2xzTnVtKWZvcig7aTxoO2krKyllPXRoaXMudGFibGUucm93c1tpXSxnPWUuY2VsbHNbMD09YT9hOmUuY2VsbHMubGVuZ3RoXSxmPXRoaXMuY2xvbmVDZWxsKGIsITApLHRoaXMuc2V0Q2VsbENvbnRlbnQoZiksZi5zZXRBdHRyaWJ1dGUoXCJ2QWxpZ25cIixmLmdldEF0dHJpYnV0ZShcInZBbGlnblwiKSksZyYmZi5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGcuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikpLGE/ZG9tVXRpbHMuaW5zZXJ0QWZ0ZXIoZS5jZWxsc1tlLmNlbGxzLmxlbmd0aC0xXSxmKTplLmluc2VydEJlZm9yZShmLGUuY2VsbHNbMF0pLGt8fGQoaSxmLGUpO2Vsc2UgZm9yKDtpPGg7aSsrKXt2YXIgbD10aGlzLmluZGV4VGFibGVbaV1bYV07bC5jb2xJbmRleDxhPyhmPXRoaXMuZ2V0Q2VsbChsLnJvd0luZGV4LGwuY2VsbEluZGV4KSxmLmNvbFNwYW49bC5jb2xTcGFuKzEpOihlPXRoaXMudGFibGUucm93c1tpXSxnPWUuY2VsbHNbbC5jZWxsSW5kZXhdLGY9dGhpcy5jbG9uZUNlbGwoYiwhMCksdGhpcy5zZXRDZWxsQ29udGVudChmKSxmLnNldEF0dHJpYnV0ZShcInZBbGlnblwiLGYuZ2V0QXR0cmlidXRlKFwidkFsaWduXCIpKSxnJiZmLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsZy5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSksZz9lLmluc2VydEJlZm9yZShmLGcpOmUuYXBwZW5kQ2hpbGQoZikpLGt8fGQoaSxmLGUpfXRoaXMudXBkYXRlKCksdGhpcy51cGRhdGVXaWR0aChqLGN8fHt0ZFBhZGRpbmc6MTAsdGRCb3JkZXI6MX0pfSx1cGRhdGVXaWR0aDpmdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMudGFibGUsZT1iLmdldFdpZHRoKGQpLTIqYy50ZFBhZGRpbmctYy50ZEJvcmRlcithO2lmKGU8ZC5vd25lckRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgpcmV0dXJuIHZvaWQgZC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGUpO3ZhciBmPWRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRoaXMudGFibGUsXCJ0ZCB0aFwiKTt1dGlscy5lYWNoKGYsZnVuY3Rpb24oYil7Yi5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGEpfSl9LGRlbGV0ZUNvbDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5pbmRleFRhYmxlLGM9dGhpcy50YWJsZS5yb3dzLGQ9dGhpcy50YWJsZS5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSxlPTAsZj10aGlzLnJvd3NOdW0sZz17fSxoPTA7aDxmOyl7dmFyIGk9YltoXSxqPWlbYV0saz1qLnJvd0luZGV4K1wiX1wiK2ouY29sSW5kZXg7aWYoIWdba10pe2dba109MTt2YXIgbD10aGlzLmdldENlbGwoai5yb3dJbmRleCxqLmNlbGxJbmRleCk7ZXx8KGU9bCYmcGFyc2VJbnQobC5vZmZzZXRXaWR0aC9sLmNvbFNwYW4sMTApLnRvRml4ZWQoMCkpLGwuY29sU3Bhbj4xP2wuY29sU3Bhbi0tOmNbaF0uZGVsZXRlQ2VsbChqLmNlbGxJbmRleCksaCs9ai5yb3dTcGFufHwxfX10aGlzLnRhYmxlLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsZC1lKSx0aGlzLnVwZGF0ZSgpfSxzcGxpdFRvQ2VsbHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPXRoaXMuc3BsaXRUb1Jvd3MoYSk7dXRpbHMuZWFjaChjLGZ1bmN0aW9uKGEpe2Iuc3BsaXRUb0NvbHMoYSl9KX0sc3BsaXRUb1Jvd3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRDZWxsSW5mbyhhKSxjPWIucm93SW5kZXgsZD1iLmNvbEluZGV4LGU9W107YS5yb3dTcGFuPTEsZS5wdXNoKGEpO2Zvcih2YXIgZj1jLGc9YytiLnJvd1NwYW47ZjxnO2YrKylpZihmIT1jKXt2YXIgaD10aGlzLnRhYmxlLnJvd3NbZl0saT1oLmluc2VydENlbGwoZC10aGlzLmdldFByZXZpZXdNZXJnZWRDZWxsc051bShmLGQpKTtpLmNvbFNwYW49Yi5jb2xTcGFuLHRoaXMuc2V0Q2VsbENvbnRlbnQoaSksaS5zZXRBdHRyaWJ1dGUoXCJ2QWxpZ25cIixhLmdldEF0dHJpYnV0ZShcInZBbGlnblwiKSksaS5zZXRBdHRyaWJ1dGUoXCJhbGlnblwiLGEuZ2V0QXR0cmlidXRlKFwiYWxpZ25cIikpLGEuc3R5bGUuY3NzVGV4dCYmKGkuc3R5bGUuY3NzVGV4dD1hLnN0eWxlLmNzc1RleHQpLGUucHVzaChpKX1yZXR1cm4gdGhpcy51cGRhdGUoKSxlfSxnZXRQcmV2aWV3TWVyZ2VkQ2VsbHNOdW06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5pbmRleFRhYmxlW2FdLGQ9MCxlPTA7ZTxiOyl7dmFyIGY9Y1tlXS5jb2xTcGFuLGc9Y1tlXS5yb3dJbmRleDtkKz1mLShnPT1hPzE6MCksZSs9Zn1yZXR1cm4gZH0sc3BsaXRUb0NvbHM6ZnVuY3Rpb24oYSl7dmFyIGI9KGEub2Zmc2V0V2lkdGgvYS5jb2xTcGFuLTIyKS50b0ZpeGVkKDApLGM9dGhpcy5nZXRDZWxsSW5mbyhhKSxkPWMucm93SW5kZXgsZT1jLmNvbEluZGV4LGY9W107YS5jb2xTcGFuPTEsYS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGIpLGYucHVzaChhKTtmb3IodmFyIGc9ZSxoPWUrYy5jb2xTcGFuO2c8aDtnKyspaWYoZyE9ZSl7dmFyIGk9dGhpcy50YWJsZS5yb3dzW2RdLGo9aS5pbnNlcnRDZWxsKHRoaXMuaW5kZXhUYWJsZVtkXVtnXS5jZWxsSW5kZXgrMSk7aWYoai5yb3dTcGFuPWMucm93U3Bhbix0aGlzLnNldENlbGxDb250ZW50KGopLGouc2V0QXR0cmlidXRlKFwidkFsaWduXCIsYS5nZXRBdHRyaWJ1dGUoXCJ2QWxpZ25cIikpLGouc2V0QXR0cmlidXRlKFwiYWxpZ25cIixhLmdldEF0dHJpYnV0ZShcImFsaWduXCIpKSxqLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsYiksYS5zdHlsZS5jc3NUZXh0JiYoai5zdHlsZS5jc3NUZXh0PWEuc3R5bGUuY3NzVGV4dCksXCJUSFwiPT1hLnRhZ05hbWUpe3ZhciBrPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7ay5hcHBlbmRDaGlsZChqLmZpcnN0Q2hpbGQpLGsuc2V0QXR0cmlidXRlKFwidkFsaWduXCIsYS5nZXRBdHRyaWJ1dGUoXCJ2QWxpZ25cIikpLGsucm93U3Bhbj1qLnJvd1NwYW4saS5pbnNlcnRCZWZvcmUoayxqKSxkb21VdGlscy5yZW1vdmUoail9Zi5wdXNoKGopfXJldHVybiB0aGlzLnVwZGF0ZSgpLGZ9LGlzTGFzdENlbGw6ZnVuY3Rpb24oYSxiLGMpe2I9Ynx8dGhpcy5yb3dzTnVtLGM9Y3x8dGhpcy5jb2xzTnVtO3ZhciBkPXRoaXMuZ2V0Q2VsbEluZm8oYSk7cmV0dXJuIGQucm93SW5kZXgrZC5yb3dTcGFuPT1iJiZkLmNvbEluZGV4K2QuY29sU3Bhbj09Y30sZ2V0TGFzdENlbGw6ZnVuY3Rpb24oYSl7YT1hfHx0aGlzLnRhYmxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGRcIik7dmFyIGIsYz0odGhpcy5nZXRDZWxsSW5mbyhhWzBdKSx0aGlzKSxkPWFbMF0sZT1kLnBhcmVudE5vZGUsZj0wLGc9MDtyZXR1cm4gdXRpbHMuZWFjaChhLGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZT09ZSYmKGcrPWEuY29sU3Bhbnx8MSksZis9YS5yb3dTcGFuKmEuY29sU3Bhbnx8MX0pLGI9Zi9nLHV0aWxzLmVhY2goYSxmdW5jdGlvbihhKXtpZihjLmlzTGFzdENlbGwoYSxiLGcpKXJldHVybiBkPWEsITF9KSxkfSxzZWxlY3RSb3c6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbmRleFRhYmxlW2FdLGM9dGhpcy5nZXRDZWxsKGJbMF0ucm93SW5kZXgsYlswXS5jZWxsSW5kZXgpLGQ9dGhpcy5nZXRDZWxsKGJbdGhpcy5jb2xzTnVtLTFdLnJvd0luZGV4LGJbdGhpcy5jb2xzTnVtLTFdLmNlbGxJbmRleCksZT10aGlzLmdldENlbGxzUmFuZ2UoYyxkKTt0aGlzLnNldFNlbGVjdGVkKGUpfSxzZWxlY3RUYWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMudGFibGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZFwiKSxiPXRoaXMuZ2V0Q2VsbHNSYW5nZShhWzBdLGFbYS5sZW5ndGgtMV0pO3RoaXMuc2V0U2VsZWN0ZWQoYil9LHNldEJhY2tncm91bmQ6ZnVuY3Rpb24oYSxiKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYil1dGlscy5lYWNoKGEsZnVuY3Rpb24oYSl7YS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9Yn0pO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGIpe2I9dXRpbHMuZXh0ZW5kKHtyZXBlYXQ6ITAsY29sb3JMaXN0OltcIiNkZGRcIixcIiNmZmZcIl19LGIpO2Zvcih2YXIgYyxkPXRoaXMuZ2V0Q2VsbEluZm8oYVswXSkucm93SW5kZXgsZT0wLGY9Yi5jb2xvckxpc3QsZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGFbYl0/YVtiXTpjP2FbYiVhLmxlbmd0aF06XCJcIn0saD0wO2M9YVtoKytdOyl7dmFyIGk9dGhpcy5nZXRDZWxsSW5mbyhjKTtjLnN0eWxlLmJhY2tncm91bmRDb2xvcj1nKGYsZCtlPT1pLnJvd0luZGV4P2U6KytlLGIucmVwZWF0KX19fSxyZW1vdmVCYWNrZ3JvdW5kOmZ1bmN0aW9uKGEpe3V0aWxzLmVhY2goYSxmdW5jdGlvbihhKXthLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIlwifSl9fX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxjKXt2YXIgZD1kb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShhLFwidGQgdGhcIik7dXRpbHMuZWFjaChkLGZ1bmN0aW9uKGEpe2EucmVtb3ZlQXR0cmlidXRlKFwid2lkdGhcIil9KSxhLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsYihjLCEwLGcoYyxhKSkpO3ZhciBlPVtdO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt1dGlscy5lYWNoKGQsZnVuY3Rpb24oYSl7MT09YS5jb2xTcGFuJiZlLnB1c2goYS5vZmZzZXRXaWR0aCl9KSx1dGlscy5lYWNoKGQsZnVuY3Rpb24oYSxiKXsxPT1hLmNvbFNwYW4mJmEuc2V0QXR0cmlidXRlKFwid2lkdGhcIixlW2JdK1wiXCIpfSl9LDApfWZ1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPWEuYm9keTtyZXR1cm4gZC5vZmZzZXRXaWR0aC0oYj8yKnBhcnNlSW50KGRvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoZCxcIm1hcmdpbi1sZWZ0XCIpLDEwKTowKS0yKmMudGFibGVCb3JkZXItKGEub3B0aW9ucy5vZmZzZXRXaWR0aHx8MCl9ZnVuY3Rpb24gYyhhKXt2YXIgYj1lKGEpLmNlbGw7aWYoYil7dmFyIGM9aChiKTtyZXR1cm4gYy5zZWxlY3RlZFRkcy5sZW5ndGg/Yy5zZWxlY3RlZFRkczpbYl19cmV0dXJuW119dmFyIGQ9VUUuVUVUYWJsZSxlPWZ1bmN0aW9uKGEpe3JldHVybiBkLmdldFRhYmxlSXRlbXNCeVJhbmdlKGEpfSxmPWZ1bmN0aW9uKGEpe3JldHVybiBkLmdldFVFVGFibGVCeVNlbGVjdGVkKGEpfSxnPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGQuZ2V0RGVmYXVsdFZhbHVlKGEsYil9LGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGQuZ2V0VUVUYWJsZShhKX07VUUuY29tbWFuZHMuaW5zZXJ0dGFibGU9e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykudGFibGU/LTE6MH0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7Zm9yKHZhciBjPVtdLGQ9YS5udW1Sb3dzLGU9YS5udW1Db2xzLGY9MDtmPGQ7ZisrKXtjLnB1c2goXCI8dHJcIisoMD09Zj8nIGNsYXNzPVwiZmlyc3RSb3dcIic6XCJcIikrXCI+XCIpO2Zvcih2YXIgZz0wO2c8ZTtnKyspYy5wdXNoKCc8dGQgd2lkdGg9XCInK2IrJ1wiICB2QWxpZ249XCInK2EudGR2YWxpZ24rJ1wiID4nKyhicm93c2VyLmllJiZicm93c2VyLnZlcnNpb248MTE/ZG9tVXRpbHMuZmlsbENoYXI6XCI8YnIvPlwiKStcIjwvdGQ+XCIpO2MucHVzaChcIjwvdHI+XCIpfXJldHVyblwiPHRhYmxlPjx0Ym9keT5cIitjLmpvaW4oXCJcIikrXCI8L3Rib2R5PjwvdGFibGU+XCJ9Ynx8KGI9dXRpbHMuZXh0ZW5kKHt9LHtudW1Db2xzOnRoaXMub3B0aW9ucy5kZWZhdWx0Q29scyxudW1Sb3dzOnRoaXMub3B0aW9ucy5kZWZhdWx0Um93cyx0ZHZhbGlnbjp0aGlzLm9wdGlvbnMudGR2YWxpZ259KSk7dmFyIGQ9dGhpcyxlPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksZj1lLnN0YXJ0Q29udGFpbmVyLGg9ZG9tVXRpbHMuZmluZFBhcmVudChmLGZ1bmN0aW9uKGEpe3JldHVybiBkb21VdGlscy5pc0Jsb2NrRWxtKGEpfSwhMCl8fGQuYm9keSxpPWcoZCksaj1oLm9mZnNldFdpZHRoLGs9TWF0aC5mbG9vcihqL2IubnVtQ29scy0yKmkudGRQYWRkaW5nLWkudGRCb3JkZXIpOyFiLnRkdmFsaWduJiYoYi50ZHZhbGlnbj1kLm9wdGlvbnMudGR2YWxpZ24pLGQuZXhlY0NvbW1hbmQoXCJpbnNlcnRodG1sXCIsYyhiLGspKX19LFVFLmNvbW1hbmRzLmluc2VydHBhcmFncmFwaGJlZm9yZXRhYmxlPXtxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLmNlbGw/MDotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLnRhYmxlO2lmKGEpe3ZhciBiPXRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7Yi5pbm5lckhUTUw9YnJvd3Nlci5pZT9cIiZuYnNwO1wiOlwiPGJyIC8+XCIsYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpLHRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCkuc2V0U3RhcnQoYiwwKS5zZXRDdXJzb3IoKX19fSxVRS5jb21tYW5kcy5kZWxldGV0YWJsZT17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO3JldHVybiBkb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGEuc3RhcnRDb250YWluZXIsXCJ0YWJsZVwiLCEwKT8wOi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7aWYoYj1ifHxkb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGMuc3RhcnRDb250YWluZXIsXCJ0YWJsZVwiLCEwKSl7dmFyIGQ9Yi5uZXh0U2libGluZztkfHwoZD1kb21VdGlscy5jcmVhdGVFbGVtZW50KHRoaXMuZG9jdW1lbnQsXCJwXCIse2lubmVySFRNTDpicm93c2VyLmllP2RvbVV0aWxzLmZpbGxDaGFyOlwiPGJyLz5cIn0pLGIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZCxiKSksZG9tVXRpbHMucmVtb3ZlKGIpLGM9dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSwzPT1kLm5vZGVUeXBlP2Muc2V0U3RhcnRCZWZvcmUoZCk6Yy5zZXRTdGFydChkLDApLGMuc2V0Q3Vyc29yKCExLCEwKSx0aGlzLmZpcmVFdmVudChcInRhYmxlaGFzZGVsZXRlZFwiKX19fSxVRS5jb21tYW5kcy5jZWxsYWxpZ249e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGModGhpcykubGVuZ3RoPzA6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7dmFyIGQ9Yyh0aGlzKTtpZihkLmxlbmd0aClmb3IodmFyIGUsZj0wO2U9ZFtmKytdOyllLnNldEF0dHJpYnV0ZShcImFsaWduXCIsYil9fSxVRS5jb21tYW5kcy5jZWxsdmFsaWduPXtxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjKHRoaXMpLmxlbmd0aD8wOi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIpe3ZhciBkPWModGhpcyk7aWYoZC5sZW5ndGgpZm9yKHZhciBlLGY9MDtlPWRbZisrXTspZS5zZXRBdHRyaWJ1dGUoXCJ2QWxpZ25cIixiKX19LFVFLmNvbW1hbmRzLmluc2VydGNhcHRpb249e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ZSh0aGlzKS50YWJsZTtyZXR1cm4gYSYmMD09YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNhcHRpb25cIikubGVuZ3RoPzE6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKCl7dmFyIGE9ZSh0aGlzKS50YWJsZTtpZihhKXt2YXIgYj10aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYXB0aW9uXCIpO2IuaW5uZXJIVE1MPWJyb3dzZXIuaWU/ZG9tVXRpbHMuZmlsbENoYXI6XCI8YnIvPlwiLGEuaW5zZXJ0QmVmb3JlKGIsYS5maXJzdENoaWxkKTt2YXIgYz10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2Muc2V0U3RhcnQoYiwwKS5zZXRDdXJzb3IoKX19fSxVRS5jb21tYW5kcy5kZWxldGVjYXB0aW9uPXtxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksYj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGEuc3RhcnRDb250YWluZXIsXCJ0YWJsZVwiKTtyZXR1cm4gYj8wPT1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY2FwdGlvblwiKS5sZW5ndGg/LTE6MTotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGI9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShhLnN0YXJ0Q29udGFpbmVyLFwidGFibGVcIik7aWYoYil7ZG9tVXRpbHMucmVtb3ZlKGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJjYXB0aW9uXCIpWzBdKTt2YXIgYz10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2Muc2V0U3RhcnQoYi5yb3dzWzBdLmNlbGxzWzBdLDApLnNldEN1cnNvcigpfX19LFVFLmNvbW1hbmRzLmluc2VydHRpdGxlPXtxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPWUodGhpcykudGFibGU7aWYoYSl7dmFyIGI9YS5yb3dzWzBdO3JldHVyblwidGhcIiE9Yi5jZWxsc1tiLmNlbGxzLmxlbmd0aC0xXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk/MDotMX1yZXR1cm4tMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLnRhYmxlO2EmJmgoYSkuaW5zZXJ0Um93KDAsXCJ0aFwiKTt2YXIgYj1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGhcIilbMF07dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5zZXRTdGFydChiLDApLnNldEN1cnNvcighMSwhMCl9fSxVRS5jb21tYW5kcy5kZWxldGV0aXRsZT17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLnRhYmxlO2lmKGEpe3ZhciBiPWEucm93c1swXTtyZXR1cm5cInRoXCI9PWIuY2VsbHNbYi5jZWxscy5sZW5ndGgtMV0udGFnTmFtZS50b0xvd2VyQ2FzZSgpPzA6LTF9cmV0dXJuLTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKCl7dmFyIGE9ZSh0aGlzKS50YWJsZTthJiZkb21VdGlscy5yZW1vdmUoYS5yb3dzWzBdKTt2YXIgYj1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGRcIilbMF07dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5zZXRTdGFydChiLDApLnNldEN1cnNvcighMSwhMCl9fSxVRS5jb21tYW5kcy5pbnNlcnR0aXRsZWNvbD17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLnRhYmxlO2lmKGEpe3ZhciBiPWEucm93c1thLnJvd3MubGVuZ3RoLTFdO3JldHVybiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGhcIikubGVuZ3RoPy0xOjB9cmV0dXJuLTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGIpe3ZhciBjPWUodGhpcykudGFibGU7YyYmaChjKS5pbnNlcnRDb2woMCxcInRoXCIpLGEoYyx0aGlzKTt2YXIgZD1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGhcIilbMF07dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5zZXRTdGFydChkLDApLnNldEN1cnNvcighMSwhMCl9fSxVRS5jb21tYW5kcy5kZWxldGV0aXRsZWNvbD17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLnRhYmxlO2lmKGEpe3ZhciBiPWEucm93c1thLnJvd3MubGVuZ3RoLTFdO3JldHVybiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGhcIikubGVuZ3RoPzA6LTF9cmV0dXJuLTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKCl7dmFyIGI9ZSh0aGlzKS50YWJsZTtpZihiKWZvcih2YXIgYz0wO2M8Yi5yb3dzLmxlbmd0aDtjKyspZG9tVXRpbHMucmVtb3ZlKGIucm93c1tjXS5jaGlsZHJlblswXSk7YShiLHRoaXMpO3ZhciBkPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZFwiKVswXTt0aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLnNldFN0YXJ0KGQsMCkuc2V0Q3Vyc29yKCExLCEwKX19LFVFLmNvbW1hbmRzLm1lcmdlcmlnaHQ9e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPWUodGhpcyksYz1iLnRhYmxlLGQ9Yi5jZWxsO2lmKCFjfHwhZClyZXR1cm4tMTt2YXIgZj1oKGMpO2lmKGYuc2VsZWN0ZWRUZHMubGVuZ3RoKXJldHVybi0xO3ZhciBnPWYuZ2V0Q2VsbEluZm8oZCksaT1nLmNvbEluZGV4K2cuY29sU3BhbjtpZihpPj1mLmNvbHNOdW0pcmV0dXJuLTE7dmFyIGo9Zi5pbmRleFRhYmxlW2cucm93SW5kZXhdW2ldLGs9Yy5yb3dzW2oucm93SW5kZXhdLmNlbGxzW2ouY2VsbEluZGV4XTtyZXR1cm4gayYmZC50YWdOYW1lPT1rLnRhZ05hbWUmJmoucm93SW5kZXg9PWcucm93SW5kZXgmJmoucm93U3Bhbj09Zy5yb3dTcGFuPzA6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksYz1iLmNyZWF0ZUJvb2ttYXJrKCEwKSxkPWUodGhpcykuY2VsbCxmPWgoZCk7Zi5tZXJnZVJpZ2h0KGQpLGIubW92ZVRvQm9va21hcmsoYykuc2VsZWN0KCl9fSxVRS5jb21tYW5kcy5tZXJnZWRvd249e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPWUodGhpcyksYz1iLnRhYmxlLGQ9Yi5jZWxsO2lmKCFjfHwhZClyZXR1cm4tMTt2YXIgZj1oKGMpO2lmKGYuc2VsZWN0ZWRUZHMubGVuZ3RoKXJldHVybi0xO3ZhciBnPWYuZ2V0Q2VsbEluZm8oZCksaT1nLnJvd0luZGV4K2cucm93U3BhbjtpZihpPj1mLnJvd3NOdW0pcmV0dXJuLTE7dmFyIGo9Zi5pbmRleFRhYmxlW2ldW2cuY29sSW5kZXhdLGs9Yy5yb3dzW2oucm93SW5kZXhdLmNlbGxzW2ouY2VsbEluZGV4XTtyZXR1cm4gayYmZC50YWdOYW1lPT1rLnRhZ05hbWUmJmouY29sSW5kZXg9PWcuY29sSW5kZXgmJmouY29sU3Bhbj09Zy5jb2xTcGFuPzA6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxiPWEuY3JlYXRlQm9va21hcmsoITApLGM9ZSh0aGlzKS5jZWxsLGQ9aChjKTtkLm1lcmdlRG93bihjKSxhLm1vdmVUb0Jvb2ttYXJrKGIpLnNlbGVjdCgpfX0sVUUuY29tbWFuZHMubWVyZ2VjZWxscz17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzKT8wOi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbigpe3ZhciBhPWYodGhpcyk7aWYoYSYmYS5zZWxlY3RlZFRkcy5sZW5ndGgpe3ZhciBiPWEuc2VsZWN0ZWRUZHNbMF07YS5tZXJnZVJhbmdlKCk7dmFyIGM9dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtkb21VdGlscy5pc0VtcHR5QmxvY2soYik/Yy5zZXRTdGFydChiLDApLmNvbGxhcHNlKCEwKTpjLnNlbGVjdE5vZGVDb250ZW50cyhiKSxjLnNlbGVjdCgpfX19LFVFLmNvbW1hbmRzLmluc2VydHJvdz17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLGI9YS5jZWxsO3JldHVybiBiJiYoXCJURFwiPT1iLnRhZ05hbWV8fFwiVEhcIj09Yi50YWdOYW1lJiZhLnRyIT09YS50YWJsZS5yb3dzWzBdKSYmaChhLnRhYmxlKS5yb3dzTnVtPHRoaXMub3B0aW9ucy5tYXhSb3dOdW0/MDotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGI9YS5jcmVhdGVCb29rbWFyayghMCksYz1lKHRoaXMpLGQ9Yy5jZWxsLGY9Yy50YWJsZSxnPWgoZiksaT1nLmdldENlbGxJbmZvKGQpO2lmKGcuc2VsZWN0ZWRUZHMubGVuZ3RoKWZvcih2YXIgaj1nLmNlbGxzUmFuZ2Usaz0wLGw9ai5lbmRSb3dJbmRleC1qLmJlZ2luUm93SW5kZXgrMTtrPGw7aysrKWcuaW5zZXJ0Um93KGouYmVnaW5Sb3dJbmRleCxkKTtlbHNlIGcuaW5zZXJ0Um93KGkucm93SW5kZXgsZCk7YS5tb3ZlVG9Cb29rbWFyayhiKS5zZWxlY3QoKSxcImVuYWJsZWRcIj09PWYuZ2V0QXR0cmlidXRlKFwiaW50ZXJsYWNlZFwiKSYmdGhpcy5maXJlRXZlbnQoXCJpbnRlcmxhY2V0YWJsZVwiLGYpfX0sVUUuY29tbWFuZHMuaW5zZXJ0cm93bmV4dD17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLGI9YS5jZWxsO3JldHVybiBiJiZcIlREXCI9PWIudGFnTmFtZSYmaChhLnRhYmxlKS5yb3dzTnVtPHRoaXMub3B0aW9ucy5tYXhSb3dOdW0/MDotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGI9YS5jcmVhdGVCb29rbWFyayghMCksYz1lKHRoaXMpLGQ9Yy5jZWxsLGY9Yy50YWJsZSxnPWgoZiksaT1nLmdldENlbGxJbmZvKGQpO2lmKGcuc2VsZWN0ZWRUZHMubGVuZ3RoKWZvcih2YXIgaj1nLmNlbGxzUmFuZ2Usaz0wLGw9ai5lbmRSb3dJbmRleC1qLmJlZ2luUm93SW5kZXgrMTtrPGw7aysrKWcuaW5zZXJ0Um93KGouZW5kUm93SW5kZXgrMSxkKTtlbHNlIGcuaW5zZXJ0Um93KGkucm93SW5kZXgraS5yb3dTcGFuLGQpO2EubW92ZVRvQm9va21hcmsoYikuc2VsZWN0KCksXCJlbmFibGVkXCI9PT1mLmdldEF0dHJpYnV0ZShcImludGVybGFjZWRcIikmJnRoaXMuZmlyZUV2ZW50KFwiaW50ZXJsYWNldGFibGVcIixmKX19LFVFLmNvbW1hbmRzLmRlbGV0ZXJvdz17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpO3JldHVybiBhLmNlbGw/MDotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLmNlbGwsYj1oKGEpLGM9Yi5jZWxsc1JhbmdlLGQ9Yi5nZXRDZWxsSW5mbyhhKSxmPWIuZ2V0VlNpZGVDZWxsKGEpLGc9Yi5nZXRWU2lkZUNlbGwoYSwhMCksaT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKHV0aWxzLmlzRW1wdHlPYmplY3QoYykpYi5kZWxldGVSb3coZC5yb3dJbmRleCk7ZWxzZSBmb3IodmFyIGo9Yy5iZWdpblJvd0luZGV4O2o8Yy5lbmRSb3dJbmRleCsxO2orKyliLmRlbGV0ZVJvdyhjLmJlZ2luUm93SW5kZXgpO3ZhciBrPWIudGFibGU7aWYoay5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpLmxlbmd0aClpZigxPT1kLnJvd1NwYW58fGQucm93U3Bhbj09Yy5lbmRSb3dJbmRleC1jLmJlZ2luUm93SW5kZXgrMSkoZ3x8ZikmJmkuc2VsZWN0Tm9kZUNvbnRlbnRzKGd8fGYpLnNldEN1cnNvcighMSwhMCk7ZWxzZXt2YXIgbD1iLmdldENlbGwoZC5yb3dJbmRleCxiLmluZGV4VGFibGVbZC5yb3dJbmRleF1bZC5jb2xJbmRleF0uY2VsbEluZGV4KTtsJiZpLnNlbGVjdE5vZGVDb250ZW50cyhsKS5zZXRDdXJzb3IoITEsITApfWVsc2V7dmFyIG09ay5uZXh0U2libGluZztkb21VdGlscy5yZW1vdmUoayksbSYmaS5zZXRTdGFydChtLDApLnNldEN1cnNvcighMSwhMCl9XCJlbmFibGVkXCI9PT1rLmdldEF0dHJpYnV0ZShcImludGVybGFjZWRcIikmJnRoaXMuZmlyZUV2ZW50KFwiaW50ZXJsYWNldGFibGVcIixrKX19LFVFLmNvbW1hbmRzLmluc2VydGNvbD17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9ZSh0aGlzKSxjPWIuY2VsbDtyZXR1cm4gYyYmKFwiVERcIj09Yy50YWdOYW1lfHxcIlRIXCI9PWMudGFnTmFtZSYmYyE9PWIudHIuY2VsbHNbMF0pJiZoKGIudGFibGUpLmNvbHNOdW08dGhpcy5vcHRpb25zLm1heENvbE51bT8wOi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGM9Yi5jcmVhdGVCb29rbWFyayghMCk7aWYodGhpcy5xdWVyeUNvbW1hbmRTdGF0ZShhKSE9LTEpe3ZhciBkPWUodGhpcykuY2VsbCxmPWgoZCksZz1mLmdldENlbGxJbmZvKGQpO2lmKGYuc2VsZWN0ZWRUZHMubGVuZ3RoKWZvcih2YXIgaT1mLmNlbGxzUmFuZ2Usaj0wLGs9aS5lbmRDb2xJbmRleC1pLmJlZ2luQ29sSW5kZXgrMTtqPGs7aisrKWYuaW5zZXJ0Q29sKGkuYmVnaW5Db2xJbmRleCxkKTtlbHNlIGYuaW5zZXJ0Q29sKGcuY29sSW5kZXgsZCk7Yi5tb3ZlVG9Cb29rbWFyayhjKS5zZWxlY3QoITApfX19LFVFLmNvbW1hbmRzLmluc2VydGNvbG5leHQ9e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ZSh0aGlzKSxiPWEuY2VsbDtyZXR1cm4gYiYmaChhLnRhYmxlKS5jb2xzTnVtPHRoaXMub3B0aW9ucy5tYXhDb2xOdW0/MDotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGI9YS5jcmVhdGVCb29rbWFyayghMCksYz1lKHRoaXMpLmNlbGwsZD1oKGMpLGY9ZC5nZXRDZWxsSW5mbyhjKTtcbmlmKGQuc2VsZWN0ZWRUZHMubGVuZ3RoKWZvcih2YXIgZz1kLmNlbGxzUmFuZ2UsaT0wLGo9Zy5lbmRDb2xJbmRleC1nLmJlZ2luQ29sSW5kZXgrMTtpPGo7aSsrKWQuaW5zZXJ0Q29sKGcuZW5kQ29sSW5kZXgrMSxjKTtlbHNlIGQuaW5zZXJ0Q29sKGYuY29sSW5kZXgrZi5jb2xTcGFuLGMpO2EubW92ZVRvQm9va21hcmsoYikuc2VsZWN0KCl9fSxVRS5jb21tYW5kcy5kZWxldGVjb2w9e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ZSh0aGlzKTtyZXR1cm4gYS5jZWxsPzA6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKCl7dmFyIGE9ZSh0aGlzKS5jZWxsLGI9aChhKSxjPWIuY2VsbHNSYW5nZSxkPWIuZ2V0Q2VsbEluZm8oYSksZj1iLmdldEhTaWRlQ2VsbChhKSxnPWIuZ2V0SFNpZGVDZWxsKGEsITApO2lmKHV0aWxzLmlzRW1wdHlPYmplY3QoYykpYi5kZWxldGVDb2woZC5jb2xJbmRleCk7ZWxzZSBmb3IodmFyIGk9Yy5iZWdpbkNvbEluZGV4O2k8Yy5lbmRDb2xJbmRleCsxO2krKyliLmRlbGV0ZUNvbChjLmJlZ2luQ29sSW5kZXgpO3ZhciBqPWIudGFibGUsaz10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKGouZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZFwiKS5sZW5ndGgpZG9tVXRpbHMuaW5Eb2MoYSx0aGlzLmRvY3VtZW50KT9rLnNldFN0YXJ0KGEsMCkuc2V0Q3Vyc29yKCExLCEwKTpnJiZkb21VdGlscy5pbkRvYyhnLHRoaXMuZG9jdW1lbnQpP2suc2VsZWN0Tm9kZUNvbnRlbnRzKGcpLnNldEN1cnNvcighMSwhMCk6ZiYmZG9tVXRpbHMuaW5Eb2MoZix0aGlzLmRvY3VtZW50KSYmay5zZWxlY3ROb2RlQ29udGVudHMoZikuc2V0Q3Vyc29yKCEwLCEwKTtlbHNle3ZhciBsPWoubmV4dFNpYmxpbmc7ZG9tVXRpbHMucmVtb3ZlKGopLGwmJmsuc2V0U3RhcnQobCwwKS5zZXRDdXJzb3IoITEsITApfX19LFVFLmNvbW1hbmRzLnNwbGl0dG9jZWxscz17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLGI9YS5jZWxsO2lmKCFiKXJldHVybi0xO3ZhciBjPWgoYS50YWJsZSk7cmV0dXJuIGMuc2VsZWN0ZWRUZHMubGVuZ3RoPjA/LTE6YiYmKGIuY29sU3Bhbj4xfHxiLnJvd1NwYW4+MSk/MDotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGI9YS5jcmVhdGVCb29rbWFyayghMCksYz1lKHRoaXMpLmNlbGwsZD1oKGMpO2Quc3BsaXRUb0NlbGxzKGMpLGEubW92ZVRvQm9va21hcmsoYikuc2VsZWN0KCl9fSxVRS5jb21tYW5kcy5zcGxpdHRvcm93cz17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT1lKHRoaXMpLGI9YS5jZWxsO2lmKCFiKXJldHVybi0xO3ZhciBjPWgoYS50YWJsZSk7cmV0dXJuIGMuc2VsZWN0ZWRUZHMubGVuZ3RoPjA/LTE6YiYmYi5yb3dTcGFuPjE/MDotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGI9YS5jcmVhdGVCb29rbWFyayghMCksYz1lKHRoaXMpLmNlbGwsZD1oKGMpO2Quc3BsaXRUb1Jvd3MoYyksYS5tb3ZlVG9Cb29rbWFyayhiKS5zZWxlY3QoKX19LFVFLmNvbW1hbmRzLnNwbGl0dG9jb2xzPXtxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPWUodGhpcyksYj1hLmNlbGw7aWYoIWIpcmV0dXJuLTE7dmFyIGM9aChhLnRhYmxlKTtyZXR1cm4gYy5zZWxlY3RlZFRkcy5sZW5ndGg+MD8tMTpiJiZiLmNvbFNwYW4+MT8wOi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksYj1hLmNyZWF0ZUJvb2ttYXJrKCEwKSxjPWUodGhpcykuY2VsbCxkPWgoYyk7ZC5zcGxpdFRvQ29scyhjKSxhLm1vdmVUb0Jvb2ttYXJrKGIpLnNlbGVjdCgpfX0sVUUuY29tbWFuZHMuYWRhcHRieXRleHQ9VUUuY29tbWFuZHMuYWRhcHRieXdpbmRvdz17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS50YWJsZT8wOi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbihiKXt2YXIgYz1lKHRoaXMpLGQ9Yy50YWJsZTtpZihkKWlmKFwiYWRhcHRieXdpbmRvd1wiPT1iKWEoZCx0aGlzKTtlbHNle3ZhciBmPWRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGQsXCJ0ZCB0aFwiKTt1dGlscy5lYWNoKGYsZnVuY3Rpb24oYSl7YS5yZW1vdmVBdHRyaWJ1dGUoXCJ3aWR0aFwiKX0pLGQucmVtb3ZlQXR0cmlidXRlKFwid2lkdGhcIil9fX0sVUUuY29tbWFuZHMuYXZlcmFnZWRpc3RyaWJ1dGVjb2w9e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9Zih0aGlzKTtyZXR1cm4gYSYmKGEuaXNGdWxsUm93KCl8fGEuaXNGdWxsQ29sKCkpPzA6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYSxiPWUudGFibGUsYz0wLGY9MCxoPWcoZCxiKTtpZihlLmlzRnVsbFJvdygpKWM9Yi5vZmZzZXRXaWR0aCxmPWUuY29sc051bTtlbHNlIGZvcih2YXIgaSxqPWUuY2VsbHNSYW5nZS5iZWdpbkNvbEluZGV4LGs9ZS5jZWxsc1JhbmdlLmVuZENvbEluZGV4LGw9ajtsPD1rOylpPWUuc2VsZWN0ZWRUZHNbbF0sYys9aS5vZmZzZXRXaWR0aCxsKz1pLmNvbFNwYW4sZis9MTtyZXR1cm4gYT1NYXRoLmNlaWwoYy9mKS0yKmgudGRCb3JkZXItMipoLnRkUGFkZGluZ31mdW5jdGlvbiBjKGEpe3V0aWxzLmVhY2goZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZS50YWJsZSxcInRoXCIpLGZ1bmN0aW9uKGEpe2Euc2V0QXR0cmlidXRlKFwid2lkdGhcIixcIlwiKX0pO3ZhciBiPWUuaXNGdWxsUm93KCk/ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZS50YWJsZSxcInRkXCIpOmUuc2VsZWN0ZWRUZHM7dXRpbHMuZWFjaChiLGZ1bmN0aW9uKGIpezE9PWIuY29sU3BhbiYmYi5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGEpfSl9dmFyIGQ9dGhpcyxlPWYoZCk7ZSYmZS5zZWxlY3RlZFRkcy5sZW5ndGgmJmMoYigpKX19LFVFLmNvbW1hbmRzLmF2ZXJhZ2VkaXN0cmlidXRlcm93PXtxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPWYodGhpcyk7cmV0dXJuIGE/YS5zZWxlY3RlZFRkcyYmL3RoL2dpLnRlc3QoYS5zZWxlY3RlZFRkc1swXS50YWdOYW1lKT8tMTphLmlzRnVsbFJvdygpfHxhLmlzRnVsbENvbCgpPzA6LTE6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYSxiLGM9MCxmPWUudGFibGUsaD1nKGQsZiksaT1wYXJzZUludChkb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZFwiKVswXSxcInBhZGRpbmctdG9wXCIpKTtpZihlLmlzRnVsbENvbCgpKXt2YXIgaixrLGw9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZixcImNhcHRpb25cIiksbT1kb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShmLFwidGhcIik7bC5sZW5ndGg+MCYmKGo9bFswXS5vZmZzZXRIZWlnaHQpLG0ubGVuZ3RoPjAmJihrPW1bMF0ub2Zmc2V0SGVpZ2h0KSxjPWYub2Zmc2V0SGVpZ2h0LShqfHwwKS0oa3x8MCksYj0wPT1tLmxlbmd0aD9lLnJvd3NOdW06ZS5yb3dzTnVtLTF9ZWxzZXtmb3IodmFyIG49ZS5jZWxsc1JhbmdlLmJlZ2luUm93SW5kZXgsbz1lLmNlbGxzUmFuZ2UuZW5kUm93SW5kZXgscD0wLHE9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZixcInRyXCIpLHI9bjtyPD1vO3IrKyljKz1xW3JdLm9mZnNldEhlaWdodCxwKz0xO2I9cH1yZXR1cm4gYT1icm93c2VyLmllJiZicm93c2VyLnZlcnNpb248OT9NYXRoLmNlaWwoYy9iKTpNYXRoLmNlaWwoYy9iKS0yKmgudGRCb3JkZXItMippfWZ1bmN0aW9uIGMoYSl7dmFyIGI9ZS5pc0Z1bGxDb2woKT9kb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShlLnRhYmxlLFwidGRcIik6ZS5zZWxlY3RlZFRkczt1dGlscy5lYWNoKGIsZnVuY3Rpb24oYil7MT09Yi5yb3dTcGFuJiZiLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGEpfSl9dmFyIGQ9dGhpcyxlPWYoZCk7ZSYmZS5zZWxlY3RlZFRkcy5sZW5ndGgmJmMoYigpKX19LFVFLmNvbW1hbmRzLmNlbGxhbGlnbm1lbnQ9e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykudGFibGU/MDotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9ZihjKTtpZihkKXV0aWxzLmVhY2goZC5zZWxlY3RlZFRkcyxmdW5jdGlvbihhKXtkb21VdGlscy5zZXRBdHRyaWJ1dGVzKGEsYil9KTtlbHNle3ZhciBlPWMuc2VsZWN0aW9uLmdldFN0YXJ0KCksZz1lJiZkb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGUsW1widGRcIixcInRoXCIsXCJjYXB0aW9uXCJdLCEwKTsvY2FwdGlvbi9naS50ZXN0KGcudGFnTmFtZSk/KGcuc3R5bGUudGV4dEFsaWduPWIuYWxpZ24sZy5zdHlsZS52ZXJ0aWNhbEFsaWduPWIudkFsaWduKTpkb21VdGlscy5zZXRBdHRyaWJ1dGVzKGcsYiksYy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5zZXRDdXJzb3IoITApfX0scXVlcnlDb21tYW5kVmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI9ZSh0aGlzKS5jZWxsO2lmKGJ8fChiPWModGhpcylbMF0pLGIpe3ZhciBkPVVFLlVFVGFibGUuZ2V0VUVUYWJsZShiKS5zZWxlY3RlZFRkcztyZXR1cm4hZC5sZW5ndGgmJihkPWIpLFVFLlVFVGFibGUuZ2V0VGFibGVDZWxsQWxpZ25TdGF0ZShkKX1yZXR1cm4gbnVsbH19LFVFLmNvbW1hbmRzLnRhYmxlYWxpZ25tZW50PXtxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBicm93c2VyLmllJiZicm93c2VyLnZlcnNpb248OD8tMTplKHRoaXMpLnRhYmxlPzA6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuc2VsZWN0aW9uLmdldFN0YXJ0KCksZT1kJiZkb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGQsW1widGFibGVcIl0sITApO2UmJmUuc2V0QXR0cmlidXRlKFwiYWxpZ25cIixiKX19LFVFLmNvbW1hbmRzLmVkaXR0YWJsZT17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS50YWJsZT8wOi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksZD1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGMuc3RhcnRDb250YWluZXIsXCJ0YWJsZVwiKTtpZihkKXt2YXIgZT1kb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShkLFwidGRcIikuY29uY2F0KGRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGQsXCJ0aFwiKSxkb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShkLFwiY2FwdGlvblwiKSk7dXRpbHMuZWFjaChlLGZ1bmN0aW9uKGEpe2Euc3R5bGUuYm9yZGVyQ29sb3I9Yn0pfX19LFVFLmNvbW1hbmRzLmVkaXR0ZD17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS50YWJsZT8wOi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1mKGMpO2lmKGQpdXRpbHMuZWFjaChkLnNlbGVjdGVkVGRzLGZ1bmN0aW9uKGEpe2Euc3R5bGUuYmFja2dyb3VuZENvbG9yPWJ9KTtlbHNle3ZhciBlPWMuc2VsZWN0aW9uLmdldFN0YXJ0KCksZz1lJiZkb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGUsW1widGRcIixcInRoXCIsXCJjYXB0aW9uXCJdLCEwKTtnJiYoZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9Yil9fX0sVUUuY29tbWFuZHMuc2V0dGFibGViYWNrZ3JvdW5kPXtxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjKHRoaXMpLmxlbmd0aD4xPzA6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7dmFyIGQsZTtkPWModGhpcyksZT1oKGRbMF0pLGUuc2V0QmFja2dyb3VuZChkLGIpfX0sVUUuY29tbWFuZHMuY2xlYXJ0YWJsZWJhY2tncm91bmQ9e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9Yyh0aGlzKTtpZighYS5sZW5ndGgpcmV0dXJuLTE7Zm9yKHZhciBiLGQ9MDtiPWFbZCsrXTspaWYoXCJcIiE9PWIuc3R5bGUuYmFja2dyb3VuZENvbG9yKXJldHVybiAwO3JldHVybi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbigpe3ZhciBhPWModGhpcyksYj1oKGFbMF0pO2IucmVtb3ZlQmFja2dyb3VuZChhKX19LFVFLmNvbW1hbmRzLmludGVybGFjZXRhYmxlPVVFLmNvbW1hbmRzLnVuaW50ZXJsYWNldGFibGU9e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPWUodGhpcykudGFibGU7aWYoIWIpcmV0dXJuLTE7dmFyIGM9Yi5nZXRBdHRyaWJ1dGUoXCJpbnRlcmxhY2VkXCIpO3JldHVyblwiaW50ZXJsYWNldGFibGVcIj09YT9cImVuYWJsZWRcIj09PWM/LTE6MDpjJiZcImRpc2FibGVkXCIhPT1jPzA6LTF9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZSh0aGlzKS50YWJsZTtcImludGVybGFjZXRhYmxlXCI9PWE/KGMuc2V0QXR0cmlidXRlKFwiaW50ZXJsYWNlZFwiLFwiZW5hYmxlZFwiKSx0aGlzLmZpcmVFdmVudChcImludGVybGFjZXRhYmxlXCIsYyxiKSk6KGMuc2V0QXR0cmlidXRlKFwiaW50ZXJsYWNlZFwiLFwiZGlzYWJsZWRcIiksdGhpcy5maXJlRXZlbnQoXCJ1bmludGVybGFjZXRhYmxlXCIsYykpfX0sVUUuY29tbWFuZHMuc2V0Ym9yZGVydmlzaWJsZT17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9ZSh0aGlzKS50YWJsZTtyZXR1cm4gYj8wOi0xfSxleGVjQ29tbWFuZDpmdW5jdGlvbigpe3ZhciBhPWUodGhpcykudGFibGU7dXRpbHMuZWFjaChkb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShhLFwidGRcIiksZnVuY3Rpb24oYSl7YS5zdHlsZS5ib3JkZXJXaWR0aD1cIjFweFwiLGEuc3R5bGUuYm9yZGVyU3R5bGU9XCJzb2xpZFwifSl9fX0oKSxVRS5wbHVnaW5zLnRhYmxlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt9ZnVuY3Rpb24gYihhLGIpe2MoYSxcIndpZHRoXCIsITApLGMoYSxcImhlaWdodFwiLCEwKX1mdW5jdGlvbiBjKGEsYixjKXthLnN0eWxlW2JdJiYoYyYmYS5zZXRBdHRyaWJ1dGUoYixwYXJzZUludChhLnN0eWxlW2JdLDEwKSksYS5zdHlsZVtiXT1cIlwiKX1mdW5jdGlvbiBkKGEpe2lmKFwiVERcIj09YS50YWdOYW1lfHxcIlRIXCI9PWEudGFnTmFtZSlyZXR1cm4gYTt2YXIgYjtyZXR1cm4oYj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGEsXCJ0ZFwiLCEwKXx8ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShhLFwidGhcIiwhMCkpP2I6bnVsbH1mdW5jdGlvbiBlKGEpe3ZhciBiPW5ldyBSZWdFeHAoZG9tVXRpbHMuZmlsbENoYXIsXCJnXCIpO2lmKGFbYnJvd3Nlci5pZT9cImlubmVyVGV4dFwiOlwidGV4dENvbnRlbnRcIl0ucmVwbGFjZSgvXlxccyokLyxcIlwiKS5yZXBsYWNlKGIsXCJcIikubGVuZ3RoPjApcmV0dXJuIDA7Zm9yKHZhciBjIGluIGR0ZC4kaXNOb3RFbXB0eSlpZihhLmdldEVsZW1lbnRzQnlUYWdOYW1lKGMpLmxlbmd0aClyZXR1cm4gMDtyZXR1cm4gMX1mdW5jdGlvbiBmKGEpe3JldHVybiBhLnBhZ2VYfHxhLnBhZ2VZP3t4OmEucGFnZVgseTphLnBhZ2VZfTp7eDphLmNsaWVudFgrTi5kb2N1bWVudC5ib2R5LnNjcm9sbExlZnQtTi5kb2N1bWVudC5ib2R5LmNsaWVudExlZnQseTphLmNsaWVudFkrTi5kb2N1bWVudC5ib2R5LnNjcm9sbFRvcC1OLmRvY3VtZW50LmJvZHkuY2xpZW50VG9wfX1mdW5jdGlvbiBnKGIpe2lmKCFBKCkpdHJ5e3ZhciBjLGU9ZChiLnRhcmdldHx8Yi5zcmNFbGVtZW50KTtpZihSJiYoTi5ib2R5LnN0eWxlLndlYmtpdFVzZXJTZWxlY3Q9XCJub25lXCIsKE1hdGguYWJzKFYueC1iLmNsaWVudFgpPlR8fE1hdGguYWJzKFYueS1iLmNsaWVudFkpPlQpJiYodCgpLFI9ITEsVT0wLHYoYikpKSxjYSYmaGEpcmV0dXJuIFU9MCxOLmJvZHkuc3R5bGUud2Via2l0VXNlclNlbGVjdD1cIm5vbmVcIixOLnNlbGVjdGlvbi5nZXROYXRpdmUoKVticm93c2VyLmllOWJlbG93P1wiZW1wdHlcIjpcInJlbW92ZUFsbFJhbmdlc1wiXSgpLGM9ZihiKSxtKE4sITAsY2EsYyxlKSx2b2lkKFwiaFwiPT1jYT9nYS5zdHlsZS5sZWZ0PWsoaGEsYikrXCJweFwiOlwidlwiPT1jYSYmKGdhLnN0eWxlLnRvcD1sKGhhLGIpK1wicHhcIikpO2lmKGUpe2lmKE4uZmlyZUV2ZW50KFwiZXhjbHVkZXRhYmxlXCIsZSk9PT0hMClyZXR1cm47Yz1mKGIpO3ZhciBnPW4oZSxjKSxpPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZSxcInRhYmxlXCIsITApO2lmKGooaSxlLGIsITApKXtpZihOLmZpcmVFdmVudChcImV4Y2x1ZGV0YWJsZVwiLGkpPT09ITApcmV0dXJuO04uYm9keS5zdHlsZS5jdXJzb3I9XCJ1cmwoXCIrTi5vcHRpb25zLmN1cnNvcnBhdGgrXCJoLnBuZykscG9pbnRlclwifWVsc2UgaWYoaihpLGUsYikpe2lmKE4uZmlyZUV2ZW50KFwiZXhjbHVkZXRhYmxlXCIsaSk9PT0hMClyZXR1cm47Ti5ib2R5LnN0eWxlLmN1cnNvcj1cInVybChcIitOLm9wdGlvbnMuY3Vyc29ycGF0aCtcInYucG5nKSxwb2ludGVyXCJ9ZWxzZXtOLmJvZHkuc3R5bGUuY3Vyc29yPVwidGV4dFwiOy9cXGQvLnRlc3QoZykmJihnPWcucmVwbGFjZSgvXFxkLyxcIlwiKSxlPVkoZSkuZ2V0UHJldmlld0NlbGwoZSxcInZcIj09ZykpLG0oTiwhIWUmJiEhZyxlP2c6XCJcIixjLGUpfX1lbHNlIGgoITEsaSxOKX1jYXRjaChvKXthKG8pfX1mdW5jdGlvbiBoKGEsYixjKXtpZihhKWkoYixjKTtlbHNle2lmKGZhKXJldHVybjtsYT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IWZhJiZlYSYmZWEucGFyZW50Tm9kZSYmZWEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlYSl9LDJlMyl9fWZ1bmN0aW9uIGkoYSxiKXtmdW5jdGlvbiBjKGMsZCl7Y2xlYXJUaW1lb3V0KGcpLGc9c2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZUV2ZW50KFwidGFibGVDbGlja2VkXCIsYSxkKX0sMzAwKX1mdW5jdGlvbiBkKGMpe2NsZWFyVGltZW91dChnKTt2YXIgZD1ZKGEpLGU9YS5yb3dzWzBdLmNlbGxzWzBdLGY9ZC5nZXRMYXN0Q2VsbCgpLGg9ZC5nZXRDZWxsc1JhbmdlKGUsZik7Yi5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5zZXRTdGFydChlLDApLnNldEN1cnNvcighMSwhMCksZC5zZXRTZWxlY3RlZChoKX12YXIgZT1kb21VdGlscy5nZXRYWShhKSxmPWEub3duZXJEb2N1bWVudDtpZihlYSYmZWEucGFyZW50Tm9kZSlyZXR1cm4gZWE7ZWE9Zi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGVhLmNvbnRlbnRFZGl0YWJsZT0hMSxlYS5pbm5lckhUTUw9XCJcIixlYS5zdHlsZS5jc3NUZXh0PVwid2lkdGg6MTVweDtoZWlnaHQ6MTVweDtiYWNrZ3JvdW5kLWltYWdlOnVybChcIitiLm9wdGlvbnMuVUVESVRPUl9IT01FX1VSTCtcImRpYWxvZ3MvdGFibGUvZHJhZ2ljb24ucG5nKTtwb3NpdGlvbjogYWJzb2x1dGU7Y3Vyc29yOm1vdmU7dG9wOlwiKyhlLnktMTUpK1wicHg7bGVmdDpcIitlLngrXCJweDtcIixkb21VdGlscy51blNlbGVjdGFibGUoZWEpLGVhLm9ubW91c2VvdmVyPWZ1bmN0aW9uKGEpe2ZhPSEwfSxlYS5vbm1vdXNlb3V0PWZ1bmN0aW9uKGEpe2ZhPSExfSxkb21VdGlscy5vbihlYSxcImNsaWNrXCIsZnVuY3Rpb24oYSxiKXtjKGIsdGhpcyl9KSxkb21VdGlscy5vbihlYSxcImRibGNsaWNrXCIsZnVuY3Rpb24oYSxiKXtkKGIpfSksZG9tVXRpbHMub24oZWEsXCJkcmFnc3RhcnRcIixmdW5jdGlvbihhLGIpe2RvbVV0aWxzLnByZXZlbnREZWZhdWx0KGIpfSk7dmFyIGc7Zi5ib2R5LmFwcGVuZENoaWxkKGVhKX1mdW5jdGlvbiBqKGEsYixjLGQpe3ZhciBlPWYoYyksZz1uKGIsZSk7aWYoZCl7dmFyIGg9YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNhcHRpb25cIilbMF0saT1oP2gub2Zmc2V0SGVpZ2h0OjA7cmV0dXJuXCJ2MVwiPT1nJiZlLnktZG9tVXRpbHMuZ2V0WFkoYSkueS1pPDh9cmV0dXJuXCJoMVwiPT1nJiZlLngtZG9tVXRpbHMuZ2V0WFkoYSkueDw4fWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz1ZKGEpO2lmKGMpe3ZhciBkPWMuZ2V0U2FtZUVuZFBvc0NlbGxzKGEsXCJ4XCIpWzBdLGU9Yy5nZXRTYW1lU3RhcnRQb3NYQ2VsbHMoYSlbMF0sZz1mKGIpLngsaD0oZD9kb21VdGlscy5nZXRYWShkKS54OmRvbVV0aWxzLmdldFhZKGMudGFibGUpLngpKzIwLGk9ZT9kb21VdGlscy5nZXRYWShlKS54K2Uub2Zmc2V0V2lkdGgtMjA6Ti5ib2R5Lm9mZnNldFdpZHRoKzV8fHBhcnNlSW50KGRvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoTi5ib2R5LFwid2lkdGhcIiksMTApO3JldHVybiBoKz1RLGktPVEsZzxoP2g6Zz5pP2k6Z319ZnVuY3Rpb24gbChiLGMpe3RyeXt2YXIgZD1kb21VdGlscy5nZXRYWShiKS55LGU9ZihjKS55O3JldHVybiBlPGQ/ZDplfWNhdGNoKGcpe2EoZyl9fWZ1bmN0aW9uIG0oYixjLGQsZSxmKXt0cnl7Yi5ib2R5LnN0eWxlLmN1cnNvcj1cImhcIj09ZD9cImNvbC1yZXNpemVcIjpcInZcIj09ZD9cInJvdy1yZXNpemVcIjpcInRleHRcIixicm93c2VyLmllJiYoIWR8fGlhfHxaKGIpP0koYik6KEgoYixiLmRvY3VtZW50KSxKKGQsZikpKSxkYT1jfWNhdGNoKGcpe2EoZyl9fWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz1kb21VdGlscy5nZXRYWShhKTtyZXR1cm4gYz9jLngrYS5vZmZzZXRXaWR0aC1iLng8Uz9cImhcIjpiLngtYy54PFM/XCJoMVwiOmMueSthLm9mZnNldEhlaWdodC1iLnk8Uz9cInZcIjpiLnktYy55PFM/XCJ2MVwiOlwiXCI6XCJcIn1mdW5jdGlvbiBvKGEsYil7aWYoIUEoKSlpZihWPXt4OmIuY2xpZW50WCx5OmIuY2xpZW50WX0sMj09Yi5idXR0b24pe3ZhciBjPVooTiksZD0hMTtpZihjKXt2YXIgZT1NKE4sYik7dXRpbHMuZWFjaChjLnNlbGVjdGVkVGRzLGZ1bmN0aW9uKGEpe2E9PT1lJiYoZD0hMCl9KSxkPyhlPWMuc2VsZWN0ZWRUZHNbMF0sc2V0VGltZW91dChmdW5jdGlvbigpe04uc2VsZWN0aW9uLmdldFJhbmdlKCkuc2V0U3RhcnQoZSwwKS5zZXRDdXJzb3IoITEsITApfSwwKSk6KF8oZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoTi5ib2R5LFwidGggdGRcIikpLGMuY2xlYXJTZWxlY3RlZCgpKX19ZWxzZSBxKGIpfWZ1bmN0aW9uIHAoYSl7VT0wLGE9YXx8Ti53aW5kb3cuZXZlbnQ7dmFyIGI9ZChhLnRhcmdldHx8YS5zcmNFbGVtZW50KTtpZihiKXt2YXIgYztpZihjPW4oYixmKGEpKSl7aWYoSShOKSxcImgxXCI9PWMpaWYoYz1cImhcIixqKGRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoYixcInRhYmxlXCIpLGIsYSkpTi5leGVjQ29tbWFuZChcImFkYXB0Ynl3aW5kb3dcIik7ZWxzZSBpZihiPVkoYikuZ2V0UHJldmlld0NlbGwoYikpe3ZhciBlPU4uc2VsZWN0aW9uLmdldFJhbmdlKCk7ZS5zZWxlY3ROb2RlQ29udGVudHMoYikuc2V0Q3Vyc29yKCEwLCEwKX1pZihcImhcIj09Yyl7dmFyIGc9WShiKSxoPWcudGFibGUsaT1DKGIsaCwhMCk7aT1zKGksXCJsZWZ0XCIpLGcud2lkdGg9Zy5vZmZzZXRXaWR0aDt2YXIgaz1bXSxsPVtdO3V0aWxzLmVhY2goaSxmdW5jdGlvbihhKXtrLnB1c2goYS5vZmZzZXRXaWR0aCl9KSx1dGlscy5lYWNoKGksZnVuY3Rpb24oYSl7YS5yZW1vdmVBdHRyaWJ1dGUoXCJ3aWR0aFwiKX0pLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGE9ITA7dXRpbHMuZWFjaChpLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9Yi5vZmZzZXRXaWR0aDtyZXR1cm4gZD5rW2NdPyhhPSExLCExKTp2b2lkIGwucHVzaChkKX0pO3ZhciBiPWE/bDprO3V0aWxzLmVhY2goaSxmdW5jdGlvbihhLGMpe2Eud2lkdGg9YltjXS1HKCl9KX0sMCl9fX19ZnVuY3Rpb24gcShhKXtpZihfKGRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKE4uYm9keSxcInRkIHRoXCIpKSx1dGlscy5lYWNoKE4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0YWJsZVwiKSxmdW5jdGlvbihhKXthLnVlVGFibGU9bnVsbH0pLGFhPU0oTixhKSl7dmFyIGI9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShhYSxcInRhYmxlXCIsITApO3V0PVkoYiksdXQmJnV0LmNsZWFyU2VsZWN0ZWQoKSxkYT9yKGEpOihOLmRvY3VtZW50LmJvZHkuc3R5bGUud2Via2l0VXNlclNlbGVjdD1cIlwiLGlhPSEwLE4uYWRkTGlzdGVuZXIoXCJtb3VzZW92ZXJcIix4KSl9fWZ1bmN0aW9uIHIoYSl7YnJvd3Nlci5pZSYmKGE9dShhKSksdCgpLFI9ITAsTz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dihhKX0sVyl9ZnVuY3Rpb24gcyhhLGIpe2Zvcih2YXIgYz1bXSxkPW51bGwsZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKylkPWFbZV1bYl0sZCYmYy5wdXNoKGQpO3JldHVybiBjfWZ1bmN0aW9uIHQoKXtPJiZjbGVhclRpbWVvdXQoTyksTz1udWxsfWZ1bmN0aW9uIHUoYSl7dmFyIGI9W1wicGFnZVhcIixcInBhZ2VZXCIsXCJjbGllbnRYXCIsXCJjbGllbnRZXCIsXCJzcmNFbGVtZW50XCIsXCJ0YXJnZXRcIl0sYz17fTtpZihhKWZvcih2YXIgZCxlLGY9MDtkPWJbZl07ZisrKWU9YVtkXSxlJiYoY1tkXT1lKTtyZXR1cm4gY31mdW5jdGlvbiB2KGEpe2lmKFI9ITEsYWE9YS50YXJnZXR8fGEuc3JjRWxlbWVudCl7dmFyIGI9bihhYSxmKGEpKTsvXFxkLy50ZXN0KGIpJiYoYj1iLnJlcGxhY2UoL1xcZC8sXCJcIiksYWE9WShhYSkuZ2V0UHJldmlld0NlbGwoYWEsXCJ2XCI9PWIpKSxJKE4pLEgoTixOLmRvY3VtZW50KSxOLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKSxKKGIsYWEpLGlhPSEwLGNhPWIsaGE9YWF9fWZ1bmN0aW9uIHcoYSxiKXtpZighQSgpKXtpZih0KCksUj0hMSxkYSYmKFU9KytVJTMsVj17eDpiLmNsaWVudFgseTpiLmNsaWVudFl9LFA9c2V0VGltZW91dChmdW5jdGlvbigpe1U+MCYmVS0tfSxXKSwyPT09VSkpcmV0dXJuIFU9MCx2b2lkIHAoYik7aWYoMiE9Yi5idXR0b24pe3ZhciBjPXRoaXMsZD1jLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGU9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShkLnN0YXJ0Q29udGFpbmVyLFwidGFibGVcIiwhMCksZj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGQuZW5kQ29udGFpbmVyLFwidGFibGVcIiwhMCk7aWYoKGV8fGYpJiYoZT09PWY/KGU9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShkLnN0YXJ0Q29udGFpbmVyLFtcInRkXCIsXCJ0aFwiLFwiY2FwdGlvblwiXSwhMCksZj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGQuZW5kQ29udGFpbmVyLFtcInRkXCIsXCJ0aFwiLFwiY2FwdGlvblwiXSwhMCksZSE9PWYmJmMuc2VsZWN0aW9uLmNsZWFyUmFuZ2UoKSk6Yy5zZWxlY3Rpb24uY2xlYXJSYW5nZSgpKSxpYT0hMSxjLmRvY3VtZW50LmJvZHkuc3R5bGUud2Via2l0VXNlclNlbGVjdD1cIlwiLGNhJiZoYSYmKGMuc2VsZWN0aW9uLmdldE5hdGl2ZSgpW2Jyb3dzZXIuaWU5YmVsb3c/XCJlbXB0eVwiOlwicmVtb3ZlQWxsUmFuZ2VzXCJdKCksVT0wLGdhPWMuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1ZV90YWJsZURyYWdMaW5lXCIpKSl7dmFyIGc9ZG9tVXRpbHMuZ2V0WFkoaGEpLGg9ZG9tVXRpbHMuZ2V0WFkoZ2EpO3N3aXRjaChjYSl7Y2FzZVwiaFwiOnooaGEsaC54LWcueCk7YnJlYWs7Y2FzZVwidlwiOkIoaGEsaC55LWcueS1oYS5vZmZzZXRIZWlnaHQpfXJldHVybiBjYT1cIlwiLGhhPW51bGwsSShjKSx2b2lkIGMuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpfWlmKGFhKXt2YXIgaT1ZKGFhKSxqPWk/aS5zZWxlY3RlZFRkc1swXTpudWxsO2lmKGopZD1uZXcgZG9tLlJhbmdlKGMuZG9jdW1lbnQpLGRvbVV0aWxzLmlzRW1wdHlCbG9jayhqKT9kLnNldFN0YXJ0KGosMCkuc2V0Q3Vyc29yKCExLCEwKTpkLnNlbGVjdE5vZGVDb250ZW50cyhqKS5zaHJpbmtCb3VuZGFyeSgpLnNldEN1cnNvcighMSwhMCk7ZWxzZSBpZihkPWMuc2VsZWN0aW9uLmdldFJhbmdlKCkuc2hyaW5rQm91bmRhcnkoKSwhZC5jb2xsYXBzZWQpe3ZhciBlPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoZC5zdGFydENvbnRhaW5lcixbXCJ0ZFwiLFwidGhcIl0sITApLGY9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShkLmVuZENvbnRhaW5lcixbXCJ0ZFwiLFwidGhcIl0sITApOyhlJiYhZnx8IWUmJmZ8fGUmJmYmJmUhPT1mKSYmZC5zZXRDdXJzb3IoITEsITApfWFhPW51bGwsYy5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLHgpfWVsc2V7dmFyIGs9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShiLnRhcmdldHx8Yi5zcmNFbGVtZW50LFwidGRcIiwhMCk7aWYoa3x8KGs9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShiLnRhcmdldHx8Yi5zcmNFbGVtZW50LFwidGhcIiwhMCkpLGsmJihcIlREXCI9PWsudGFnTmFtZXx8XCJUSFwiPT1rLnRhZ05hbWUpKXtpZihjLmZpcmVFdmVudChcImV4Y2x1ZGV0YWJsZVwiLGspPT09ITApcmV0dXJuO2Q9bmV3IGRvbS5SYW5nZShjLmRvY3VtZW50KSxkLnNldFN0YXJ0KGssMCkuc2V0Q3Vyc29yKCExLCEwKX19Yy5fc2VsZWN0aW9uQ2hhbmdlKDI1MCxiKX19fWZ1bmN0aW9uIHgoYSxiKXtpZighQSgpKXt2YXIgYz10aGlzLGQ9Yi50YXJnZXR8fGIuc3JjRWxlbWVudDtpZihiYT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGQsXCJ0ZFwiLCEwKXx8ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShkLFwidGhcIiwhMCksYWEmJmJhJiYoXCJURFwiPT1hYS50YWdOYW1lJiZcIlREXCI9PWJhLnRhZ05hbWV8fFwiVEhcIj09YWEudGFnTmFtZSYmXCJUSFwiPT1iYS50YWdOYW1lKSYmZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShhYSxcInRhYmxlXCIpPT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGJhLFwidGFibGVcIikpe3ZhciBlPVkoYmEpO2lmKGFhIT1iYSl7Yy5kb2N1bWVudC5ib2R5LnN0eWxlLndlYmtpdFVzZXJTZWxlY3Q9XCJub25lXCIsYy5zZWxlY3Rpb24uZ2V0TmF0aXZlKClbYnJvd3Nlci5pZTliZWxvdz9cImVtcHR5XCI6XCJyZW1vdmVBbGxSYW5nZXNcIl0oKTt2YXIgZj1lLmdldENlbGxzUmFuZ2UoYWEsYmEpO2Uuc2V0U2VsZWN0ZWQoZil9ZWxzZSBjLmRvY3VtZW50LmJvZHkuc3R5bGUud2Via2l0VXNlclNlbGVjdD1cIlwiLGUuY2xlYXJTZWxlY3RlZCgpfWIucHJldmVudERlZmF1bHQ/Yi5wcmV2ZW50RGVmYXVsdCgpOmIucmV0dXJuVmFsdWU9ITF9fWZ1bmN0aW9uIHkoYSxiLGMpe3ZhciBkPXBhcnNlSW50KGRvbVV0aWxzLmdldENvbXB1dGVkU3R5bGUoYSxcImxpbmUtaGVpZ2h0XCIpLDEwKSxlPWMrYjtiPWU8ZD9kOmUsYS5zdHlsZS5oZWlnaHQmJihhLnN0eWxlLmhlaWdodD1cIlwiKSwxPT1hLnJvd1NwYW4/YS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixiKTphLnJlbW92ZUF0dHJpYnV0ZSYmYS5yZW1vdmVBdHRyaWJ1dGUoXCJoZWlnaHRcIil9ZnVuY3Rpb24geihhLGIpe3ZhciBjPVkoYSk7aWYoYyl7dmFyIGQ9Yy50YWJsZSxlPUMoYSxkKTtpZihkLnN0eWxlLndpZHRoPVwiXCIsZC5yZW1vdmVBdHRyaWJ1dGUoXCJ3aWR0aFwiKSxiPUQoYixhLGUpLGEubmV4dFNpYmxpbmcpe3V0aWxzLmVhY2goZSxmdW5jdGlvbihhKXthLmxlZnQud2lkdGg9K2EubGVmdC53aWR0aCtiLGEucmlnaHQmJihhLnJpZ2h0LndpZHRoPSthLnJpZ2h0LndpZHRoLWIpfSl9ZWxzZSB1dGlscy5lYWNoKGUsZnVuY3Rpb24oYSl7YS5sZWZ0LndpZHRoLT0tYn0pfX1mdW5jdGlvbiBBKCl7cmV0dXJuXCJmYWxzZVwiPT09Ti5ib2R5LmNvbnRlbnRFZGl0YWJsZX1mdW5jdGlvbiBCKGEsYil7aWYoIShNYXRoLmFicyhiKTwxMCkpe3ZhciBjPVkoYSk7aWYoYylmb3IodmFyIGQsZT1jLmdldFNhbWVFbmRQb3NDZWxscyhhLFwieVwiKSxmPWVbMF0/ZVswXS5vZmZzZXRIZWlnaHQ6MCxnPTA7ZD1lW2crK107KXkoZCxiLGYpfX1mdW5jdGlvbiBDKGEsYixjKXtpZihifHwoYj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGEsXCJ0YWJsZVwiKSksIWIpcmV0dXJuIG51bGw7Zm9yKHZhciBkPShkb21VdGlscy5nZXROb2RlSW5kZXgoYSksYSksZT1iLnJvd3MsZj0wO2Q7KTE9PT1kLm5vZGVUeXBlJiYoZis9ZC5jb2xTcGFufHwxKSxkPWQucHJldmlvdXNTaWJsaW5nO2Q9bnVsbDt2YXIgZz1bXTtyZXR1cm4gdXRpbHMuZWFjaChlLGZ1bmN0aW9uKGEpe3ZhciBiPWEuY2VsbHMsZD0wO3V0aWxzLmVhY2goYixmdW5jdGlvbihhKXtyZXR1cm4gZCs9YS5jb2xTcGFufHwxLGQ9PT1mPyhnLnB1c2goe2xlZnQ6YSxyaWdodDphLm5leHRTaWJsaW5nfHxudWxsfSksITEpOmQ+Zj8oYyYmZy5wdXNoKHtsZWZ0OmF9KSwhMSk6dm9pZCAwfSl9KSxnfWZ1bmN0aW9uIEQoYSxiLGMpe2lmKGEtPUcoKSxhPDApcmV0dXJuIDA7YS09RShiKTt2YXIgZD1hPDA/XCJsZWZ0XCI6XCJyaWdodFwiO3JldHVybiBhPU1hdGguYWJzKGEpLHV0aWxzLmVhY2goYyxmdW5jdGlvbihiKXt2YXIgYz1iW2RdO2MmJihhPU1hdGgubWluKGEsRShjKS1RKSl9KSxhPWE8MD8wOmEsXCJsZWZ0XCI9PT1kPy1hOmF9ZnVuY3Rpb24gRShhKXt2YXIgYj0wLGI9YS5vZmZzZXRXaWR0aC1HKCk7YS5uZXh0U2libGluZ3x8KGItPUYoYSkpLGI9YjwwPzA6Yjt0cnl7YS53aWR0aD1ifWNhdGNoKGMpe31yZXR1cm4gYn1mdW5jdGlvbiBGKGEpe2lmKHRhYj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGEsXCJ0YWJsZVwiLCExKSx2b2lkIDA9PT10YWIub2Zmc2V0VmFsKXt2YXIgYj1hLnByZXZpb3VzU2libGluZztiP3RhYi5vZmZzZXRWYWw9YS5vZmZzZXRXaWR0aC1iLm9mZnNldFdpZHRoPT09WC5ib3JkZXJXaWR0aD9YLmJvcmRlcldpZHRoOjA6dGFiLm9mZnNldFZhbD0wfXJldHVybiB0YWIub2Zmc2V0VmFsfWZ1bmN0aW9uIEcoKXtpZih2b2lkIDA9PT1YLnRhYmNlbGxTcGFjZSl7dmFyIGE9Ti5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIiksYj1OLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSxjPU4uZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpLGQ9Ti5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIiksZT1udWxsO2Quc3R5bGUuY3NzVGV4dD1cImJvcmRlcjogMDtcIixkLndpZHRoPTEsYy5hcHBlbmRDaGlsZChkKSxjLmFwcGVuZENoaWxkKGU9ZC5jbG9uZU5vZGUoITEpKSxiLmFwcGVuZENoaWxkKGMpLGEuYXBwZW5kQ2hpbGQoYiksYS5zdHlsZS5jc3NUZXh0PVwidmlzaWJpbGl0eTogaGlkZGVuO1wiLE4uYm9keS5hcHBlbmRDaGlsZChhKSxYLnBhZGRpbmdTcGFjZT1kLm9mZnNldFdpZHRoLTE7dmFyIGY9YS5vZmZzZXRXaWR0aDtkLnN0eWxlLmNzc1RleHQ9XCJcIixlLnN0eWxlLmNzc1RleHQ9XCJcIixYLmJvcmRlcldpZHRoPShhLm9mZnNldFdpZHRoLWYpLzMsWC50YWJjZWxsU3BhY2U9WC5wYWRkaW5nU3BhY2UrWC5ib3JkZXJXaWR0aCxOLmJvZHkucmVtb3ZlQ2hpbGQoYSl9cmV0dXJuIEc9ZnVuY3Rpb24oKXtyZXR1cm4gWC50YWJjZWxsU3BhY2V9LFgudGFiY2VsbFNwYWNlfWZ1bmN0aW9uIEgoYSxiKXtpYXx8KGdhPWEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkb21VdGlscy5zZXRBdHRyaWJ1dGVzKGdhLHtpZDpcInVlX3RhYmxlRHJhZ0xpbmVcIix1bnNlbGVjdGFibGU6XCJvblwiLGNvbnRlbnRlZGl0YWJsZTohMSxvbnJlc2l6ZXN0YXJ0OlwicmV0dXJuIGZhbHNlXCIsb25kcmFnc3RhcnQ6XCJyZXR1cm4gZmFsc2VcIixvbnNlbGVjdHN0YXJ0OlwicmV0dXJuIGZhbHNlXCIsc3R5bGU6XCJiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7cG9zaXRpb246YWJzb2x1dGU7cGFkZGluZzowO21hcmdpbjowO2JhY2tncm91bmQtaW1hZ2U6bm9uZTtib3JkZXI6MHB4IG5vbmU7b3BhY2l0eTowO2ZpbHRlcjphbHBoYShvcGFjaXR5PTApXCJ9KSxhLmJvZHkuYXBwZW5kQ2hpbGQoZ2EpKX1mdW5jdGlvbiBJKGEpe2lmKCFpYSlmb3IodmFyIGI7Yj1hLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidWVfdGFibGVEcmFnTGluZVwiKTspZG9tVXRpbHMucmVtb3ZlKGIpfWZ1bmN0aW9uIEooYSxiKXtpZihiKXt2YXIgYyxkPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUoYixcInRhYmxlXCIpLGU9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNhcHRpb25cIiksZj1kLm9mZnNldFdpZHRoLGc9ZC5vZmZzZXRIZWlnaHQtKGUubGVuZ3RoPjA/ZVswXS5vZmZzZXRIZWlnaHQ6MCksaD1kb21VdGlscy5nZXRYWShkKSxpPWRvbVV0aWxzLmdldFhZKGIpO3N3aXRjaChhKXtjYXNlXCJoXCI6Yz1cImhlaWdodDpcIitnK1wicHg7dG9wOlwiKyhoLnkrKGUubGVuZ3RoPjA/ZVswXS5vZmZzZXRIZWlnaHQ6MCkpK1wicHg7bGVmdDpcIisoaS54K2Iub2Zmc2V0V2lkdGgpLGdhLnN0eWxlLmNzc1RleHQ9YytcInB4O3Bvc2l0aW9uOiBhYnNvbHV0ZTtkaXNwbGF5OmJsb2NrO2JhY2tncm91bmQtY29sb3I6Ymx1ZTt3aWR0aDoxcHg7Ym9yZGVyOjA7IGNvbG9yOmJsdWU7b3BhY2l0eTouMztmaWx0ZXI6YWxwaGEob3BhY2l0eT0zMClcIjticmVhaztjYXNlXCJ2XCI6Yz1cIndpZHRoOlwiK2YrXCJweDtsZWZ0OlwiK2gueCtcInB4O3RvcDpcIisoaS55K2Iub2Zmc2V0SGVpZ2h0KSxnYS5zdHlsZS5jc3NUZXh0PWMrXCJweDtvdmVyZmxvdzpoaWRkZW47cG9zaXRpb246IGFic29sdXRlO2Rpc3BsYXk6YmxvY2s7YmFja2dyb3VuZC1jb2xvcjpibHVlO2hlaWdodDoxcHg7Ym9yZGVyOjA7Y29sb3I6Ymx1ZTtvcGFjaXR5Oi4yO2ZpbHRlcjphbHBoYShvcGFjaXR5PTIwKVwifX19ZnVuY3Rpb24gSyhhLGIpe2Zvcih2YXIgYyxkLGU9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYS5ib2R5LFwidGFibGVcIiksZj0wO2Q9ZVtmKytdOyl7dmFyIGc9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZCxcInRkXCIpO2dbMF0mJihiPyhjPWdbMF0uc3R5bGUuYm9yZGVyQ29sb3IucmVwbGFjZSgvXFxzL2csXCJcIiksLygjZmZmZmZmKXwocmdiXFwoMjU1LDI1NSwyNTVcXCkpL2dpLnRlc3QoYykmJmRvbVV0aWxzLmFkZENsYXNzKGQsXCJub0JvcmRlclRhYmxlXCIpKTpkb21VdGlscy5yZW1vdmVDbGFzc2VzKGQsXCJub0JvcmRlclRhYmxlXCIpKX19ZnVuY3Rpb24gTChhLGIsYyl7dmFyIGQ9YS5ib2R5O3JldHVybiBkLm9mZnNldFdpZHRoLShiPzIqcGFyc2VJbnQoZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShkLFwibWFyZ2luLWxlZnRcIiksMTApOjApLTIqYy50YWJsZUJvcmRlci0oYS5vcHRpb25zLm9mZnNldFdpZHRofHwwKX1mdW5jdGlvbiBNKGEsYil7dmFyIGM9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShiLnRhcmdldHx8Yi5zcmNFbGVtZW50LFtcInRkXCIsXCJ0aFwiXSwhMCksZD1udWxsO2lmKCFjKXJldHVybiBudWxsO2lmKGQ9bihjLGYoYikpLCFjKXJldHVybiBudWxsO2lmKFwiaDFcIj09PWQmJmMucHJldmlvdXNTaWJsaW5nKXt2YXIgZT1kb21VdGlscy5nZXRYWShjKSxnPWMub2Zmc2V0V2lkdGg7TWF0aC5hYnMoZS54K2ctYi5jbGllbnRYKT5nLzMmJihjPWMucHJldmlvdXNTaWJsaW5nKX1lbHNlIGlmKFwidjFcIj09PWQmJmMucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmcpe3ZhciBlPWRvbVV0aWxzLmdldFhZKGMpLGg9Yy5vZmZzZXRIZWlnaHQ7TWF0aC5hYnMoZS55K2gtYi5jbGllbnRZKT5oLzMmJihjPWMucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmcuZmlyc3RDaGlsZCl9cmV0dXJuIGMmJmEuZmlyZUV2ZW50KFwiZXhjbHVkZXRhYmxlXCIsYykhPT0hMD9jOm51bGx9dmFyIE49dGhpcyxPPW51bGwsUD1udWxsLFE9NSxSPSExLFM9NSxUPTEwLFU9MCxWPW51bGwsVz0zNjAsWD1VRS5VRVRhYmxlLFk9ZnVuY3Rpb24oYSl7cmV0dXJuIFguZ2V0VUVUYWJsZShhKX0sWj1mdW5jdGlvbihhKXtyZXR1cm4gWC5nZXRVRVRhYmxlQnlTZWxlY3RlZChhKX0sJD1mdW5jdGlvbihhLGIpe3JldHVybiBYLmdldERlZmF1bHRWYWx1ZShhLGIpfSxfPWZ1bmN0aW9uKGEpe3JldHVybiBYLnJlbW92ZVNlbGVjdGVkQ2xhc3MoYSl9O04ucmVhZHkoZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5zZWxlY3Rpb24uZ2V0VGV4dDthLnNlbGVjdGlvbi5nZXRUZXh0PWZ1bmN0aW9uKCl7dmFyIGM9WihhKTtpZihjKXt2YXIgZD1cIlwiO3JldHVybiB1dGlscy5lYWNoKGMuc2VsZWN0ZWRUZHMsZnVuY3Rpb24oYSl7ZCs9YVticm93c2VyLmllP1wiaW5uZXJUZXh0XCI6XCJ0ZXh0Q29udGVudFwiXX0pLGR9cmV0dXJuIGIuY2FsbChhLnNlbGVjdGlvbil9fSk7dmFyIGFhPW51bGwsYmE9bnVsbCxjYT1cIlwiLGRhPSExLGVhPW51bGwsZmE9ITEsZ2E9bnVsbCxoYT1udWxsLGlhPSExLGphPSEwO04uc2V0T3B0KHttYXhDb2xOdW06MjAsbWF4Um93TnVtOjEwMCxkZWZhdWx0Q29sczo1LGRlZmF1bHRSb3dzOjUsdGR2YWxpZ246XCJ0b3BcIixjdXJzb3JwYXRoOk4ub3B0aW9ucy5VRURJVE9SX0hPTUVfVVJMK1widGhlbWVzL2RlZmF1bHQvaW1hZ2VzL2N1cnNvcl9cIix0YWJsZURyYWdhYmxlOiExLGNsYXNzTGlzdDpbXCJ1ZS10YWJsZS1pbnRlcmxhY2UtY29sb3Itc2luZ2xlXCIsXCJ1ZS10YWJsZS1pbnRlcmxhY2UtY29sb3ItZG91YmxlXCJdfSksTi5nZXRVRVRhYmxlPVk7dmFyIGthPXtkZWxldGV0YWJsZToxLGluc2VydHRhYmxlOjEsY2VsbHZhbGlnbjoxLGluc2VydGNhcHRpb246MSxkZWxldGVjYXB0aW9uOjEsaW5zZXJ0dGl0bGU6MSxkZWxldGV0aXRsZToxLG1lcmdlcmlnaHQ6MSxtZXJnZWRvd246MSxtZXJnZWNlbGxzOjEsaW5zZXJ0cm93OjEsaW5zZXJ0cm93bmV4dDoxLGRlbGV0ZXJvdzoxLGluc2VydGNvbDoxLGluc2VydGNvbG5leHQ6MSxkZWxldGVjb2w6MSxzcGxpdHRvY2VsbHM6MSxzcGxpdHRvcm93czoxLHNwbGl0dG9jb2xzOjEsYWRhcHRieXRleHQ6MSxhZGFwdGJ5d2luZG93OjEsYWRhcHRieWN1c3RvbWVyOjEsaW5zZXJ0cGFyYWdyYXBoOjEsaW5zZXJ0cGFyYWdyYXBoYmVmb3JldGFibGU6MSxhdmVyYWdlZGlzdHJpYnV0ZWNvbDoxLGF2ZXJhZ2VkaXN0cmlidXRlcm93OjF9O04ucmVhZHkoZnVuY3Rpb24oKXt1dGlscy5jc3NSdWxlKFwidGFibGVcIixcIi5zZWxlY3RUZENsYXNze2JhY2tncm91bmQtY29sb3I6I2VkZjVmYSAhaW1wb3J0YW50fXRhYmxlLm5vQm9yZGVyVGFibGUgdGQsdGFibGUubm9Cb3JkZXJUYWJsZSB0aCx0YWJsZS5ub0JvcmRlclRhYmxlIGNhcHRpb257Ym9yZGVyOjFweCBkYXNoZWQgI2RkZCAhaW1wb3J0YW50fXRhYmxle21hcmdpbi1ib3R0b206MTBweDtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7ZGlzcGxheTp0YWJsZTt9dGQsdGh7cGFkZGluZzogNXB4IDEwcHg7Ym9yZGVyOiAxcHggc29saWQgI0RERDt9Y2FwdGlvbntib3JkZXI6MXB4IGRhc2hlZCAjREREO2JvcmRlci1ib3R0b206MDtwYWRkaW5nOjNweDt0ZXh0LWFsaWduOmNlbnRlcjt9dGh7Ym9yZGVyLXRvcDoxcHggc29saWQgI0JCQjtiYWNrZ3JvdW5kLWNvbG9yOiNGN0Y3Rjc7fXRhYmxlIHRyLmZpcnN0Um93IHRoe2JvcmRlci10b3Atd2lkdGg6MnB4O30udWUtdGFibGUtaW50ZXJsYWNlLWNvbG9yLXNpbmdsZXsgYmFja2dyb3VuZC1jb2xvcjogI2ZjZmNmYzsgfSAudWUtdGFibGUtaW50ZXJsYWNlLWNvbG9yLWRvdWJsZXsgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZmFmZjsgfXRkIHB7bWFyZ2luOjA7cGFkZGluZzowO31cIixOLmRvY3VtZW50KTt2YXIgYSxjLGY7Ti5hZGRMaXN0ZW5lcihcImtleWRvd25cIixmdW5jdGlvbihiLGQpe3ZhciBnPXRoaXMsaD1kLmtleUNvZGV8fGQud2hpY2g7aWYoOD09aCl7dmFyIGk9WihnKTtpJiZpLnNlbGVjdGVkVGRzLmxlbmd0aCYmKGkuaXNGdWxsQ29sKCk/Zy5leGVjQ29tbWFuZChcImRlbGV0ZWNvbFwiKTppLmlzRnVsbFJvdygpP2cuZXhlY0NvbW1hbmQoXCJkZWxldGVyb3dcIik6Zy5maXJlRXZlbnQoXCJkZWxjZWxsc1wiKSxkb21VdGlscy5wcmV2ZW50RGVmYXVsdChkKSk7dmFyIGo9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShnLnNlbGVjdGlvbi5nZXRTdGFydCgpLFwiY2FwdGlvblwiLCEwKSxrPWcuc2VsZWN0aW9uLmdldFJhbmdlKCk7aWYoay5jb2xsYXBzZWQmJmomJmUoaikpe2cuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpO3ZhciBsPWoucGFyZW50Tm9kZTtkb21VdGlscy5yZW1vdmUoaiksbCYmay5zZXRTdGFydChsLnJvd3NbMF0uY2VsbHNbMF0sMCkuc2V0Q3Vyc29yKCExLCEwKSxnLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKX19aWYoNDY9PWgmJihpPVooZykpKXtnLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKTtmb3IodmFyIG0sbj0wO209aS5zZWxlY3RlZFRkc1tuKytdOylkb21VdGlscy5maWxsTm9kZShnLmRvY3VtZW50LG0pO2cuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpLGRvbVV0aWxzLnByZXZlbnREZWZhdWx0KGQpfWlmKDEzPT1oKXt2YXIgbz1nLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGo9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShvLnN0YXJ0Q29udGFpbmVyLFwiY2FwdGlvblwiLCEwKTtpZihqKXt2YXIgbD1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGosXCJ0YWJsZVwiKTtyZXR1cm4gby5jb2xsYXBzZWQ/aiYmby5zZXRTdGFydChsLnJvd3NbMF0uY2VsbHNbMF0sMCkuc2V0Q3Vyc29yKCExLCEwKTooby5kZWxldGVDb250ZW50cygpLGcuZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpKSx2b2lkIGRvbVV0aWxzLnByZXZlbnREZWZhdWx0KGQpfWlmKG8uY29sbGFwc2VkKXt2YXIgbD1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKG8uc3RhcnRDb250YWluZXIsXCJ0YWJsZVwiKTtpZihsKXt2YXIgcD1sLnJvd3NbMF0uY2VsbHNbMF0scT1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGcuc2VsZWN0aW9uLmdldFN0YXJ0KCksW1widGRcIixcInRoXCJdLCEwKSxyPWwucHJldmlvdXNTaWJsaW5nO2lmKHA9PT1xJiYoIXJ8fDE9PXIubm9kZVR5cGUmJlwiVEFCTEVcIj09ci50YWdOYW1lKSYmZG9tVXRpbHMuaXNTdGFydEluYmxvY2sobykpe3ZhciBzPWRvbVV0aWxzLmZpbmRQYXJlbnQoZy5zZWxlY3Rpb24uZ2V0U3RhcnQoKSxmdW5jdGlvbihhKXtyZXR1cm4gZG9tVXRpbHMuaXNCbG9ja0VsbShhKX0sITApO3MmJigvdChofGQpL2kudGVzdChzLnRhZ05hbWUpfHxzPT09cS5maXJzdENoaWxkKSYmKGcuZXhlY0NvbW1hbmQoXCJpbnNlcnRwYXJhZ3JhcGhiZWZvcmV0YWJsZVwiKSxkb21VdGlscy5wcmV2ZW50RGVmYXVsdChkKSl9fX19aWYoKGQuY3RybEtleXx8ZC5tZXRhS2V5KSYmXCI2N1wiPT1kLmtleUNvZGUpe2E9bnVsbDt2YXIgaT1aKGcpO2lmKGkpe3ZhciB0PWkuc2VsZWN0ZWRUZHM7Yz1pLmlzRnVsbENvbCgpLGY9aS5pc0Z1bGxSb3coKSxhPVtbaS5jbG9uZUNlbGwodFswXSxudWxsLCEwKV1dO2Zvcih2YXIgbSxuPTE7bT10W25dO24rKyltLnBhcmVudE5vZGUhPT10W24tMV0ucGFyZW50Tm9kZT9hLnB1c2goW2kuY2xvbmVDZWxsKG0sbnVsbCwhMCldKTphW2EubGVuZ3RoLTFdLnB1c2goaS5jbG9uZUNlbGwobSxudWxsLCEwKSl9fX0pLE4uYWRkTGlzdGVuZXIoXCJ0YWJsZWhhc2RlbGV0ZWRcIixmdW5jdGlvbigpe20odGhpcywhMSxcIlwiLG51bGwpLGVhJiZkb21VdGlscy5yZW1vdmUoZWEpfSksTi5hZGRMaXN0ZW5lcihcImJlZm9yZXBhc3RlXCIsZnVuY3Rpb24oZCxnKXt2YXIgaD10aGlzLGk9aC5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtpZihkb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGkuc3RhcnRDb250YWluZXIsXCJjYXB0aW9uXCIsITApKXt2YXIgaj1oLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIGouaW5uZXJIVE1MPWcuaHRtbCx2b2lkKGcuaHRtbD1qW2Jyb3dzZXIuaWU5YmVsb3c/XCJpbm5lclRleHRcIjpcInRleHRDb250ZW50XCJdKX12YXIgaz1aKGgpO2lmKGEpe2guZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpO3ZhciBsLG0saT1oLnNlbGVjdGlvbi5nZXRSYW5nZSgpLG49ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShpLnN0YXJ0Q29udGFpbmVyLFtcInRkXCIsXCJ0aFwiXSwhMCk7aWYobil7dmFyIG89WShuKTtpZihmKXt2YXIgcD1vLmdldENlbGxJbmZvKG4pLnJvd0luZGV4O1wiVEhcIj09bi50YWdOYW1lJiZwKys7Zm9yKHZhciBxLHI9MDtxPWFbcisrXTspe2Zvcih2YXIgcyx0PW8uaW5zZXJ0Um93KHArKyxcInRkXCIpLHU9MDtzPXFbdV07dSsrKXt2YXIgdj10LmNlbGxzW3VdO3Z8fCh2PXQuaW5zZXJ0Q2VsbCh1KSksdi5pbm5lckhUTUw9cy5pbm5lckhUTUwscy5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSYmdi5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHMuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikpLHMuZ2V0QXR0cmlidXRlKFwidkFsaWduXCIpJiZ2LnNldEF0dHJpYnV0ZShcInZBbGlnblwiLHMuZ2V0QXR0cmlidXRlKFwidkFsaWduXCIpKSxzLmdldEF0dHJpYnV0ZShcImFsaWduXCIpJiZ2LnNldEF0dHJpYnV0ZShcImFsaWduXCIscy5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKSkscy5zdHlsZS5jc3NUZXh0JiYodi5zdHlsZS5jc3NUZXh0PXMuc3R5bGUuY3NzVGV4dCl9Zm9yKHZhciBzLHU9MDsocz10LmNlbGxzW3VdKSYmcVt1XTt1Kyspcy5pbm5lckhUTUw9cVt1XS5pbm5lckhUTUwscVt1XS5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSYmcy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHFbdV0uZ2V0QXR0cmlidXRlKFwid2lkdGhcIikpLHFbdV0uZ2V0QXR0cmlidXRlKFwidkFsaWduXCIpJiZzLnNldEF0dHJpYnV0ZShcInZBbGlnblwiLHFbdV0uZ2V0QXR0cmlidXRlKFwidkFsaWduXCIpKSxxW3VdLmdldEF0dHJpYnV0ZShcImFsaWduXCIpJiZzLnNldEF0dHJpYnV0ZShcImFsaWduXCIscVt1XS5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKSkscVt1XS5zdHlsZS5jc3NUZXh0JiYocy5zdHlsZS5jc3NUZXh0PXFbdV0uc3R5bGUuY3NzVGV4dCl9fWVsc2V7aWYoYyl7eT1vLmdldENlbGxJbmZvKG4pO2Zvcih2YXIgcyx3PTAsdT0wLHE9YVswXTtzPXFbdSsrXTspdys9cy5jb2xTcGFufHwxO2ZvcihoLl9faGFzRW50ZXJFeGVjQ29tbWFuZD0hMCxyPTA7cjx3O3IrKyloLmV4ZWNDb21tYW5kKFwiaW5zZXJ0Y29sXCIpO2guX19oYXNFbnRlckV4ZWNDb21tYW5kPSExLG49by50YWJsZS5yb3dzWzBdLmNlbGxzW3kuY2VsbEluZGV4XSxcIlRIXCI9PW4udGFnTmFtZSYmKG49by50YWJsZS5yb3dzWzFdLmNlbGxzW3kuY2VsbEluZGV4XSl9Zm9yKHZhciBxLHI9MDtxPWFbcisrXTspe2w9bjtmb3IodmFyIHMsdT0wO3M9cVt1KytdOylpZihuKW4uaW5uZXJIVE1MPXMuaW5uZXJIVE1MLHMuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikmJm4uc2V0QXR0cmlidXRlKFwid2lkdGhcIixzLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpKSxzLmdldEF0dHJpYnV0ZShcInZBbGlnblwiKSYmbi5zZXRBdHRyaWJ1dGUoXCJ2QWxpZ25cIixzLmdldEF0dHJpYnV0ZShcInZBbGlnblwiKSkscy5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKSYmbi5zZXRBdHRyaWJ1dGUoXCJhbGlnblwiLHMuZ2V0QXR0cmlidXRlKFwiYWxpZ25cIikpLHMuc3R5bGUuY3NzVGV4dCYmKG4uc3R5bGUuY3NzVGV4dD1zLnN0eWxlLmNzc1RleHQpLG09bixuPW4ubmV4dFNpYmxpbmc7ZWxzZXt2YXIgeD1zLmNsb25lTm9kZSghMCk7ZG9tVXRpbHMucmVtb3ZlQXR0cmlidXRlcyh4LFtcImNsYXNzXCIsXCJyb3dTcGFuXCIsXCJjb2xTcGFuXCJdKSxtLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoeCl9aWYobj1vLmdldE5leHRDZWxsKGwsITAsITApLCFhW3JdKWJyZWFrO2lmKCFuKXt2YXIgeT1vLmdldENlbGxJbmZvKGwpO28udGFibGUuaW5zZXJ0Um93KG8udGFibGUucm93cy5sZW5ndGgpLG8udXBkYXRlKCksbj1vLmdldFZTaWRlQ2VsbChsLCEwKX19fW8udXBkYXRlKCl9ZWxzZXtrPWguZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO2Zvcih2YXIgcSxyPTA7cT1hW3IrK107KXtmb3IodmFyIHMsdD1rLmluc2VydFJvdyhrLnJvd3MubGVuZ3RoKSx1PTA7cz1xW3UrK107KXg9WC5jbG9uZUNlbGwocyxudWxsLCEwKSxkb21VdGlscy5yZW1vdmVBdHRyaWJ1dGVzKHgsW1wiY2xhc3NcIl0pLHQuYXBwZW5kQ2hpbGQoeCk7Mj09dSYmeC5yb3dTcGFuPjEmJih4LnJvd1NwYW49MSl9dmFyIHo9JChoKSxBPWguYm9keS5vZmZzZXRXaWR0aC0oamE/MipwYXJzZUludChkb21VdGlscy5nZXRDb21wdXRlZFN0eWxlKGguYm9keSxcIm1hcmdpbi1sZWZ0XCIpLDEwKTowKS0yKnoudGFibGVCb3JkZXItKGgub3B0aW9ucy5vZmZzZXRXaWR0aHx8MCk7aC5leGVjQ29tbWFuZChcImluc2VydEhUTUxcIixcIjx0YWJsZSAgXCIrKGMmJmY/J3dpZHRoPVwiJytBKydcIic6XCJcIikrXCI+XCIray5pbm5lckhUTUwucmVwbGFjZSgvPlxccyo8L2csXCI+PFwiKS5yZXBsYWNlKC9cXGJ0aFxcYi9naSxcInRkXCIpK1wiPC90YWJsZT5cIil9cmV0dXJuIGguZmlyZUV2ZW50KFwiY29udGVudGNoYW5nZVwiKSxoLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKSxnLmh0bWw9XCJcIiwhMH12YXIgQixqPWguZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtqLmlubmVySFRNTD1nLmh0bWwsQj1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGFibGVcIiksZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShoLnNlbGVjdGlvbi5nZXRTdGFydCgpLFwidGFibGVcIik/KHV0aWxzLmVhY2goQixmdW5jdGlvbihhKXtkb21VdGlscy5yZW1vdmUoYSl9KSxkb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGguc2VsZWN0aW9uLmdldFN0YXJ0KCksXCJjYXB0aW9uXCIsITApJiYoai5pbm5lckhUTUw9alticm93c2VyLmllP1wiaW5uZXJUZXh0XCI6XCJ0ZXh0Q29udGVudFwiXSkpOnV0aWxzLmVhY2goQixmdW5jdGlvbihhKXtiKGEsITApLGRvbVV0aWxzLnJlbW92ZUF0dHJpYnV0ZXMoYSxbXCJzdHlsZVwiLFwiYm9yZGVyXCJdKSx1dGlscy5lYWNoKGRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEsXCJ0ZFwiKSxmdW5jdGlvbihhKXtlKGEpJiZkb21VdGlscy5maWxsTm9kZShoLmRvY3VtZW50LGEpLGIoYSwhMCl9KX0pLGcuaHRtbD1qLmlubmVySFRNTH0pLE4uYWRkTGlzdGVuZXIoXCJhZnRlcnBhc3RlXCIsZnVuY3Rpb24oKXt1dGlscy5lYWNoKGRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKE4uYm9keSxcInRhYmxlXCIpLGZ1bmN0aW9uKGEpe2lmKGEub2Zmc2V0V2lkdGg+Ti5ib2R5Lm9mZnNldFdpZHRoKXt2YXIgYj0kKE4sYSk7YS5zdHlsZS53aWR0aD1OLmJvZHkub2Zmc2V0V2lkdGgtKGphPzIqcGFyc2VJbnQoZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShOLmJvZHksXCJtYXJnaW4tbGVmdFwiKSwxMCk6MCktMipiLnRhYmxlQm9yZGVyLShOLm9wdGlvbnMub2Zmc2V0V2lkdGh8fDApK1wicHhcIn19KX0pLE4uYWRkTGlzdGVuZXIoXCJibHVyXCIsZnVuY3Rpb24oKXthPW51bGx9KTt2YXIgaTtOLmFkZExpc3RlbmVyKFwia2V5ZG93blwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGkpLGk9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPU4uc2VsZWN0aW9uLmdldFJhbmdlKCksYj1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGEuc3RhcnRDb250YWluZXIsW1widGhcIixcInRkXCJdLCEwKTtpZihiKXt2YXIgYz1iLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlO2Mub2Zmc2V0V2lkdGg+Yy5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSYmKGIuc3R5bGUud29yZEJyZWFrPVwiYnJlYWstYWxsXCIpfX0sMTAwKX0pLE4uYWRkTGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbigpe20oTiwhMSxcIlwiLG51bGwpfSksTi5hZGRMaXN0ZW5lcihcImNvbnRlbnRjaGFuZ2VcIixmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoSShhKSwhWihhKSl7dmFyIGI9YS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxjPWIuc3RhcnRDb250YWluZXI7Yz1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGMsW1widGRcIixcInRoXCJdLCEwKSx1dGlscy5lYWNoKGRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEuZG9jdW1lbnQsXCJ0YWJsZVwiKSxmdW5jdGlvbihiKXthLmZpcmVFdmVudChcImV4Y2x1ZGV0YWJsZVwiLGIpIT09ITAmJihiLnVlVGFibGU9bmV3IFgoYiksYi5vbm1vdXNlb3Zlcj1mdW5jdGlvbigpe2EuZmlyZUV2ZW50KFwidGFibGVtb3VzZW92ZXJcIixiKX0sYi5vbm1vdXNlbW92ZT1mdW5jdGlvbigpe2EuZmlyZUV2ZW50KFwidGFibGVtb3VzZW1vdmVcIixiKSxhLm9wdGlvbnMudGFibGVEcmFnYWJsZSYmaCghMCx0aGlzLGEpLHV0aWxzLmRlZmVyKGZ1bmN0aW9uKCl7YS5maXJlRXZlbnQoXCJjb250ZW50Y2hhbmdlXCIsNTApfSwhMCl9LGIub25tb3VzZW91dD1mdW5jdGlvbigpe2EuZmlyZUV2ZW50KFwidGFibGVtb3VzZW91dFwiLGIpLG0oYSwhMSxcIlwiLG51bGwpLEkoYSl9LGIub25jbGljaz1mdW5jdGlvbihiKXtiPWEud2luZG93LmV2ZW50fHxiO3ZhciBjPWQoYi50YXJnZXR8fGIuc3JjRWxlbWVudCk7aWYoYyl7dmFyIGUsZj1ZKGMpLGc9Zi50YWJsZSxoPWYuZ2V0Q2VsbEluZm8oYyksaT1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKGooZyxjLGIsITApKXt2YXIgaz1mLmdldENlbGwoZi5pbmRleFRhYmxlW2Yucm93c051bS0xXVtoLmNvbEluZGV4XS5yb3dJbmRleCxmLmluZGV4VGFibGVbZi5yb3dzTnVtLTFdW2guY29sSW5kZXhdLmNlbGxJbmRleCk7cmV0dXJuIHZvaWQoYi5zaGlmdEtleSYmZi5zZWxlY3RlZFRkcy5sZW5ndGg/Zi5zZWxlY3RlZFRkc1swXSE9PWs/KGU9Zi5nZXRDZWxsc1JhbmdlKGYuc2VsZWN0ZWRUZHNbMF0sayksZi5zZXRTZWxlY3RlZChlKSk6aSYmaS5zZWxlY3ROb2RlQ29udGVudHMoaykuc2VsZWN0KCk6YyE9PWs/KGU9Zi5nZXRDZWxsc1JhbmdlKGMsayksZi5zZXRTZWxlY3RlZChlKSk6aSYmaS5zZWxlY3ROb2RlQ29udGVudHMoaykuc2VsZWN0KCkpfWlmKGooZyxjLGIpKXt2YXIgbD1mLmdldENlbGwoZi5pbmRleFRhYmxlW2gucm93SW5kZXhdW2YuY29sc051bS0xXS5yb3dJbmRleCxmLmluZGV4VGFibGVbaC5yb3dJbmRleF1bZi5jb2xzTnVtLTFdLmNlbGxJbmRleCk7Yi5zaGlmdEtleSYmZi5zZWxlY3RlZFRkcy5sZW5ndGg/Zi5zZWxlY3RlZFRkc1swXSE9PWw/KGU9Zi5nZXRDZWxsc1JhbmdlKGYuc2VsZWN0ZWRUZHNbMF0sbCksZi5zZXRTZWxlY3RlZChlKSk6aSYmaS5zZWxlY3ROb2RlQ29udGVudHMobCkuc2VsZWN0KCk6YyE9PWw/KGU9Zi5nZXRDZWxsc1JhbmdlKGMsbCksZi5zZXRTZWxlY3RlZChlKSk6aSYmaS5zZWxlY3ROb2RlQ29udGVudHMobCkuc2VsZWN0KCl9fX0pfSksSyhhLCEwKX19KSxkb21VdGlscy5vbihOLmRvY3VtZW50LFwibW91c2Vtb3ZlXCIsZyksZG9tVXRpbHMub24oTi5kb2N1bWVudCxcIm1vdXNlb3V0XCIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXR8fGEuc3JjRWxlbWVudDtcIlRBQkxFXCI9PWIudGFnTmFtZSYmbShOLCExLFwiXCIsbnVsbCl9KSxOLmFkZExpc3RlbmVyKFwiaW50ZXJsYWNldGFibGVcIixmdW5jdGlvbihhLGIsYyl7aWYoYilmb3IodmFyIGQ9dGhpcyxlPWIucm93cyxmPWUubGVuZ3RoLGc9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhW2JdP2FbYl06Yz9hW2IlYS5sZW5ndGhdOlwiXCJ9LGg9MDtoPGY7aCsrKWVbaF0uY2xhc3NOYW1lPWcoY3x8ZC5vcHRpb25zLmNsYXNzTGlzdCxoLCEwKX0pLE4uYWRkTGlzdGVuZXIoXCJ1bmludGVybGFjZXRhYmxlXCIsZnVuY3Rpb24oYSxiKXtpZihiKWZvcih2YXIgYz10aGlzLGQ9Yi5yb3dzLGU9Yy5vcHRpb25zLmNsYXNzTGlzdCxmPWQubGVuZ3RoLGc9MDtnPGY7ZysrKWRvbVV0aWxzLnJlbW92ZUNsYXNzZXMoZFtnXSxlKX0pLE4uYWRkTGlzdGVuZXIoXCJtb3VzZWRvd25cIixvKSxOLmFkZExpc3RlbmVyKFwibW91c2V1cFwiLHcpLGRvbVV0aWxzLm9uKE4uYm9keSxcImRyYWdzdGFydFwiLGZ1bmN0aW9uKGEpe3cuY2FsbChOLFwiZHJhZ3N0YXJ0XCIsYSl9KSxOLmFkZE91dHB1dFJ1bGUoZnVuY3Rpb24oYSl7dXRpbHMuZWFjaChhLmdldE5vZGVzQnlUYWdOYW1lKFwiZGl2XCIpLGZ1bmN0aW9uKGEpe1widWVfdGFibGVEcmFnTGluZVwiPT1hLmdldEF0dHIoXCJpZFwiKSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSl9KTt2YXIgaz0wO04uYWRkTGlzdGVuZXIoXCJtb3VzZWRvd25cIixmdW5jdGlvbigpe2s9MH0pLE4uYWRkTGlzdGVuZXIoXCJ0YWJrZXlkb3duXCIsZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGI9YS5nZXRDb21tb25BbmNlc3RvcighMCwhMCksYz1kb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGIsXCJ0YWJsZVwiKTtpZihjKXtpZihkb21VdGlscy5maW5kUGFyZW50QnlUYWdOYW1lKGIsXCJjYXB0aW9uXCIsITApKXt2YXIgZD1kb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShjLFwidGggdGRcIik7ZCYmZC5sZW5ndGgmJmEuc2V0U3RhcnQoZFswXSwwKS5zZXRDdXJzb3IoITEsITApfWVsc2V7dmFyIGQ9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZShiLFtcInRkXCIsXCJ0aFwiXSwhMCksZj1ZKGQpO2s9ZC5yb3dTcGFuPjE/azpmLmdldENlbGxJbmZvKGQpLnJvd0luZGV4O3ZhciBnPWYuZ2V0VGFiTmV4dENlbGwoZCxrKTtnP2UoZyk/YS5zZXRTdGFydChnLDApLnNldEN1cnNvcighMSwhMCk6YS5zZWxlY3ROb2RlQ29udGVudHMoZykuc2VsZWN0KCk6KE4uZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpLE4uX19oYXNFbnRlckV4ZWNDb21tYW5kPSEwLHRoaXMuZXhlY0NvbW1hbmQoXCJpbnNlcnRyb3duZXh0XCIpLE4uX19oYXNFbnRlckV4ZWNDb21tYW5kPSExLGE9dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxhLnNldFN0YXJ0KGMucm93c1tjLnJvd3MubGVuZ3RoLTFdLmNlbGxzWzBdLDApLnNldEN1cnNvcigpLE4uZmlyZUV2ZW50KFwic2F2ZVNjZW5lXCIpKX1yZXR1cm4hMH19KSxicm93c2VyLmllJiZOLmFkZExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsZnVuY3Rpb24oKXttKHRoaXMsITEsXCJcIixudWxsKX0pLE4uYWRkTGlzdGVuZXIoXCJrZXlkb3duXCIsZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yi5rZXlDb2RlfHxiLndoaWNoO2lmKDghPWQmJjQ2IT1kKXt2YXIgZT0hKGIuY3RybEtleXx8Yi5tZXRhS2V5fHxiLnNoaWZ0S2V5fHxiLmFsdEtleSk7ZSYmXyhkb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZShjLmJvZHksXCJ0ZFwiKSk7dmFyIGY9WihjKTtmJiZlJiZmLmNsZWFyU2VsZWN0ZWQoKX19KSxOLmFkZExpc3RlbmVyKFwiYmVmb3JlZ2V0Y29udGVudFwiLGZ1bmN0aW9uKCl7Syh0aGlzLCExKSxicm93c2VyLmllJiZ1dGlscy5lYWNoKHRoaXMuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJjYXB0aW9uXCIpLGZ1bmN0aW9uKGEpe2RvbVV0aWxzLmlzRW1wdHlOb2RlKGEpJiYoYS5pbm5lckhUTUw9XCImbmJzcDtcIil9KX0pLE4uYWRkTGlzdGVuZXIoXCJhZnRlcmdldGNvbnRlbnRcIixmdW5jdGlvbigpe0sodGhpcywhMCl9KSxOLmFkZExpc3RlbmVyKFwiZ2V0QWxsSHRtbFwiLGZ1bmN0aW9uKCl7XyhOLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGRcIikpfSksTi5hZGRMaXN0ZW5lcihcImZ1bGxzY3JlZW5jaGFuZ2VkXCIsZnVuY3Rpb24oYSxiKXtpZighYil7dmFyIGM9dGhpcy5ib2R5Lm9mZnNldFdpZHRoL2RvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgsZD1kb21VdGlscy5nZXRFbGVtZW50c0J5VGFnTmFtZSh0aGlzLmJvZHksXCJ0YWJsZVwiKTt1dGlscy5lYWNoKGQsZnVuY3Rpb24oYSl7aWYoYS5vZmZzZXRXaWR0aDxOLmJvZHkub2Zmc2V0V2lkdGgpcmV0dXJuITE7dmFyIGI9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSxcInRkXCIpLGQ9W107dXRpbHMuZWFjaChiLGZ1bmN0aW9uKGEpe2QucHVzaChhLm9mZnNldFdpZHRoKX0pO2Zvcih2YXIgZSxmPTA7ZT1iW2ZdO2YrKyllLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsTWF0aC5mbG9vcihkW2ZdKmMpKTthLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsTWF0aC5mbG9vcihMKE4samEsJChOKSkpKX0pfX0pO3ZhciBsPU4uZXhlY0NvbW1hbmQ7Ti5leGVjQ29tbWFuZD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7YT1hLnRvTG93ZXJDYXNlKCk7dmFyIGQsZixnPVooYyksaD1uZXcgZG9tLlJhbmdlKGMuZG9jdW1lbnQpLGk9Yy5jb21tYW5kc1thXXx8VUUuY29tbWFuZHNbYV07aWYoaSl7aWYoIWd8fGthW2FdfHxpLm5vdE5lZWRVbmRvfHxjLl9faGFzRW50ZXJFeGVjQ29tbWFuZClmPWwuYXBwbHkoYyxhcmd1bWVudHMpO2Vsc2V7Yy5fX2hhc0VudGVyRXhlY0NvbW1hbmQ9ITAsYy5maXJlRXZlbnQoXCJiZWZvcmVleGVjY29tbWFuZFwiLGEpLGQ9Zy5zZWxlY3RlZFRkcztmb3IodmFyIGosayxtLG49LTIsbz0tMixwPTA7bT1kW3BdO3ArKyllKG0pP2guc2V0U3RhcnQobSwwKS5zZXRDdXJzb3IoITEsITApOmguc2VsZWN0Tm9kZShtKS5zZWxlY3QoITApLGs9Yy5xdWVyeUNvbW1hbmRTdGF0ZShhKSxqPWMucXVlcnlDb21tYW5kVmFsdWUoYSksayE9LTEmJihuPT09ayYmbz09PWp8fChjLl9pZ25vcmVDb250ZW50Q2hhbmdlPSEwLGY9bC5hcHBseShjLGFyZ3VtZW50cyksYy5faWdub3JlQ29udGVudENoYW5nZT0hMSksbj1jLnF1ZXJ5Q29tbWFuZFN0YXRlKGEpLG89Yy5xdWVyeUNvbW1hbmRWYWx1ZShhKSxkb21VdGlscy5pc0VtcHR5QmxvY2sobSkmJmRvbVV0aWxzLmZpbGxOb2RlKGMuZG9jdW1lbnQsbSkpO2guc2V0U3RhcnQoZFswXSwwKS5zaHJpbmtCb3VuZGFyeSghMCkuc2V0Q3Vyc29yKCExLCEwKSxjLmZpcmVFdmVudChcImNvbnRlbnRjaGFuZ2VcIiksYy5maXJlRXZlbnQoXCJhZnRlcmV4ZWNjb21tYW5kXCIsYSksYy5fX2hhc0VudGVyRXhlY0NvbW1hbmQ9ITEsYy5fc2VsZWN0aW9uQ2hhbmdlKCl9cmV0dXJuIGZ9fX0pO3ZhciBsYX0sVUUuVUVUYWJsZS5wcm90b3R5cGUuc29ydFRhYmxlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy50YWJsZSxkPWMucm93cyxlPVtdLGY9XCJUSFwiPT09ZFswXS5jZWxsc1swXS50YWdOYW1lLGc9MDtpZih0aGlzLnNlbGVjdGVkVGRzLmxlbmd0aCl7Zm9yKHZhciBoPXRoaXMuY2VsbHNSYW5nZSxpPWguZW5kUm93SW5kZXgrMSxqPWguYmVnaW5Sb3dJbmRleDtqPGk7aisrKWVbal09ZFtqXTtlLnNwbGljZSgwLGguYmVnaW5Sb3dJbmRleCksZz1oLmVuZFJvd0luZGV4KzE9PT10aGlzLnJvd3NOdW0/MDpoLmVuZFJvd0luZGV4KzE7XG59ZWxzZSBmb3IodmFyIGo9MCxpPWQubGVuZ3RoO2o8aTtqKyspZVtqXT1kW2pdO3ZhciBrPXtyZXZlcnNlY3VycmVudDpmdW5jdGlvbihhLGIpe3JldHVybiAxfSxvcmRlcmJ5YXNjOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5pbm5lclRleHR8fGEudGV4dENvbnRlbnQsZD1iLmlubmVyVGV4dHx8Yi50ZXh0Q29udGVudDtyZXR1cm4gYy5sb2NhbGVDb21wYXJlKGQpfSxyZXZlcnNlYnlhc2M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmlubmVySFRNTCxkPWIuaW5uZXJIVE1MO3JldHVybiBkLmxvY2FsZUNvbXBhcmUoYyl9LG9yZGVyYnludW06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hW2Jyb3dzZXIuaWU/XCJpbm5lclRleHRcIjpcInRleHRDb250ZW50XCJdLm1hdGNoKC9cXGQrLyksZD1iW2Jyb3dzZXIuaWU/XCJpbm5lclRleHRcIjpcInRleHRDb250ZW50XCJdLm1hdGNoKC9cXGQrLyk7cmV0dXJuIGMmJihjPStjWzBdKSxkJiYoZD0rZFswXSksKGN8fDApLShkfHwwKX0scmV2ZXJzZWJ5bnVtOmZ1bmN0aW9uKGEsYil7dmFyIGM9YVticm93c2VyLmllP1wiaW5uZXJUZXh0XCI6XCJ0ZXh0Q29udGVudFwiXS5tYXRjaCgvXFxkKy8pLGQ9Ylticm93c2VyLmllP1wiaW5uZXJUZXh0XCI6XCJ0ZXh0Q29udGVudFwiXS5tYXRjaCgvXFxkKy8pO3JldHVybiBjJiYoYz0rY1swXSksZCYmKGQ9K2RbMF0pLChkfHwwKS0oY3x8MCl9fTtjLnNldEF0dHJpYnV0ZShcImRhdGEtc29ydC10eXBlXCIsYiYmXCJzdHJpbmdcIj09dHlwZW9mIGImJmtbYl0/YjpcIlwiKSxmJiZlLnNwbGljZSgwLDEpLGU9dXRpbHMuc29ydChlLGZ1bmN0aW9uKGMsZCl7dmFyIGU7cmV0dXJuIGU9YiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYj9iLmNhbGwodGhpcyxjLmNlbGxzW2FdLGQuY2VsbHNbYV0pOmImJlwibnVtYmVyXCI9PXR5cGVvZiBiPzE6YiYmXCJzdHJpbmdcIj09dHlwZW9mIGImJmtbYl0/a1tiXS5jYWxsKHRoaXMsYy5jZWxsc1thXSxkLmNlbGxzW2FdKTprLm9yZGVyYnlhc2MuY2FsbCh0aGlzLGMuY2VsbHNbYV0sZC5jZWxsc1thXSl9KTtmb3IodmFyIGw9Yy5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPTAsaT1lLmxlbmd0aDttPGk7bSsrKWwuYXBwZW5kQ2hpbGQoZVttXSk7dmFyIG49Yy5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpWzBdO2c/bi5pbnNlcnRCZWZvcmUobCxkW2ctaC5lbmRSb3dJbmRleCtoLmJlZ2luUm93SW5kZXgtMV0pOm4uYXBwZW5kQ2hpbGQobCl9LFVFLnBsdWdpbnMudGFibGVzb3J0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPVVFLlVFVGFibGUsYz1mdW5jdGlvbihhKXtyZXR1cm4gYi5nZXRVRVRhYmxlKGEpfSxkPWZ1bmN0aW9uKGEpe3JldHVybiBiLmdldFRhYmxlSXRlbXNCeVJhbmdlKGEpfTthLnJlYWR5KGZ1bmN0aW9uKCl7dXRpbHMuY3NzUnVsZShcInRhYmxlc29ydFwiLFwidGFibGUuc29ydEVuYWJsZWQgdHIuZmlyc3RSb3cgdGgsdGFibGUuc29ydEVuYWJsZWQgdHIuZmlyc3RSb3cgdGR7cGFkZGluZy1yaWdodDoyMHB4O2JhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIHJpZ2h0OyAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKFwiK2Eub3B0aW9ucy50aGVtZVBhdGgrYS5vcHRpb25zLnRoZW1lK1wiL2ltYWdlcy9zb3J0YWJsZS5wbmcpO31cIixhLmRvY3VtZW50KSxhLmFkZExpc3RlbmVyKFwiYWZ0ZXJleGVjY29tbWFuZFwiLGZ1bmN0aW9uKGEsYil7XCJtZXJnZXJpZ2h0XCIhPWImJlwibWVyZ2Vkb3duXCIhPWImJlwibWVyZ2VjZWxsc1wiIT1ifHx0aGlzLmV4ZWNDb21tYW5kKFwiZGlzYWJsZXNvcnRcIil9KX0pLFVFLmNvbW1hbmRzLnNvcnR0YWJsZT17cXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9ZChhKTtpZighYi5jZWxsKXJldHVybi0xO2Zvcih2YXIgYyxlPWIudGFibGUsZj1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGRcIiksZz0wO2M9ZltnKytdOylpZigxIT1jLnJvd1NwYW58fDEhPWMuY29sU3BhbilyZXR1cm4tMTtyZXR1cm4gMH0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgZT10aGlzLGY9ZS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxnPWYuY3JlYXRlQm9va21hcmsoITApLGg9ZChlKSxpPWguY2VsbCxqPWMoaC50YWJsZSksaz1qLmdldENlbGxJbmZvKGkpO2ouc29ydFRhYmxlKGsuY2VsbEluZGV4LGIpLGYubW92ZVRvQm9va21hcmsoZyk7dHJ5e2Yuc2VsZWN0KCl9Y2F0Y2gobCl7fX19LFVFLmNvbW1hbmRzLmVuYWJsZXNvcnQ9VUUuY29tbWFuZHMuZGlzYWJsZXNvcnQ9e3F1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPWQodGhpcykudGFibGU7aWYoYiYmXCJlbmFibGVzb3J0XCI9PWEpZm9yKHZhciBjPWRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIsXCJ0aCB0ZFwiKSxlPTA7ZTxjLmxlbmd0aDtlKyspaWYoY1tlXS5nZXRBdHRyaWJ1dGUoXCJjb2xzcGFuXCIpPjF8fGNbZV0uZ2V0QXR0cmlidXRlKFwicm93c3BhblwiKT4xKXJldHVybi0xO3JldHVybiBiP1wiZW5hYmxlc29ydFwiPT1hXlwic29ydEVuYWJsZWRcIiE9Yi5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIik/LTE6MDotMX0sZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSl7dmFyIGI9ZCh0aGlzKS50YWJsZTtiLnNldEF0dHJpYnV0ZShcImRhdGEtc29ydFwiLFwiZW5hYmxlc29ydFwiPT1hP1wic29ydEVuYWJsZWRcIjpcInNvcnREaXNhYmxlZFwiKSxcImVuYWJsZXNvcnRcIj09YT9kb21VdGlscy5hZGRDbGFzcyhiLFwic29ydEVuYWJsZWRcIik6ZG9tVXRpbHMucmVtb3ZlQ2xhc3NlcyhiLFwic29ydEVuYWJsZWRcIil9fX0sVUUucGx1Z2lucy5jb250ZXh0bWVudT1mdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5zZXRPcHQoXCJlbmFibGVDb250ZXh0TWVudVwiLCEwKSxhLmdldE9wdChcImVuYWJsZUNvbnRleHRNZW51XCIpIT09ITEpe3ZhciBiLGM9YS5nZXRMYW5nKFwiY29udGV4dE1lbnVcIiksZD1hLm9wdGlvbnMuY29udGV4dE1lbnV8fFt7bGFiZWw6Yy5zZWxlY3RhbGwsY21kTmFtZTpcInNlbGVjdGFsbFwifSx7bGFiZWw6Yy5jbGVhcmRvYyxjbWROYW1lOlwiY2xlYXJkb2NcIixleGVjOmZ1bmN0aW9uKCl7Y29uZmlybShjLmNvbmZpcm1jbGVhcikmJnRoaXMuZXhlY0NvbW1hbmQoXCJjbGVhcmRvY1wiKX19LFwiLVwiLHtsYWJlbDpjLnVubGluayxjbWROYW1lOlwidW5saW5rXCJ9LFwiLVwiLHtncm91cDpjLnBhcmFncmFwaCxpY29uOlwianVzdGlmeWp1c3RpZnlcIixzdWJNZW51Olt7bGFiZWw6Yy5qdXN0aWZ5bGVmdCxjbWROYW1lOlwianVzdGlmeVwiLHZhbHVlOlwibGVmdFwifSx7bGFiZWw6Yy5qdXN0aWZ5cmlnaHQsY21kTmFtZTpcImp1c3RpZnlcIix2YWx1ZTpcInJpZ2h0XCJ9LHtsYWJlbDpjLmp1c3RpZnljZW50ZXIsY21kTmFtZTpcImp1c3RpZnlcIix2YWx1ZTpcImNlbnRlclwifSx7bGFiZWw6Yy5qdXN0aWZ5anVzdGlmeSxjbWROYW1lOlwianVzdGlmeVwiLHZhbHVlOlwianVzdGlmeVwifV19LFwiLVwiLHtncm91cDpjLnRhYmxlLGljb246XCJ0YWJsZVwiLHN1Yk1lbnU6W3tsYWJlbDpjLmluc2VydHRhYmxlLGNtZE5hbWU6XCJpbnNlcnR0YWJsZVwifSx7bGFiZWw6Yy5kZWxldGV0YWJsZSxjbWROYW1lOlwiZGVsZXRldGFibGVcIn0sXCItXCIse2xhYmVsOmMuZGVsZXRlcm93LGNtZE5hbWU6XCJkZWxldGVyb3dcIn0se2xhYmVsOmMuZGVsZXRlY29sLGNtZE5hbWU6XCJkZWxldGVjb2xcIn0se2xhYmVsOmMuaW5zZXJ0Y29sLGNtZE5hbWU6XCJpbnNlcnRjb2xcIn0se2xhYmVsOmMuaW5zZXJ0Y29sbmV4dCxjbWROYW1lOlwiaW5zZXJ0Y29sbmV4dFwifSx7bGFiZWw6Yy5pbnNlcnRyb3csY21kTmFtZTpcImluc2VydHJvd1wifSx7bGFiZWw6Yy5pbnNlcnRyb3duZXh0LGNtZE5hbWU6XCJpbnNlcnRyb3duZXh0XCJ9LFwiLVwiLHtsYWJlbDpjLmluc2VydGNhcHRpb24sY21kTmFtZTpcImluc2VydGNhcHRpb25cIn0se2xhYmVsOmMuZGVsZXRlY2FwdGlvbixjbWROYW1lOlwiZGVsZXRlY2FwdGlvblwifSx7bGFiZWw6Yy5pbnNlcnR0aXRsZSxjbWROYW1lOlwiaW5zZXJ0dGl0bGVcIn0se2xhYmVsOmMuZGVsZXRldGl0bGUsY21kTmFtZTpcImRlbGV0ZXRpdGxlXCJ9LHtsYWJlbDpjLmluc2VydHRpdGxlY29sLGNtZE5hbWU6XCJpbnNlcnR0aXRsZWNvbFwifSx7bGFiZWw6Yy5kZWxldGV0aXRsZWNvbCxjbWROYW1lOlwiZGVsZXRldGl0bGVjb2xcIn0sXCItXCIse2xhYmVsOmMubWVyZ2VjZWxscyxjbWROYW1lOlwibWVyZ2VjZWxsc1wifSx7bGFiZWw6Yy5tZXJnZXJpZ2h0LGNtZE5hbWU6XCJtZXJnZXJpZ2h0XCJ9LHtsYWJlbDpjLm1lcmdlZG93bixjbWROYW1lOlwibWVyZ2Vkb3duXCJ9LFwiLVwiLHtsYWJlbDpjLnNwbGl0dG9yb3dzLGNtZE5hbWU6XCJzcGxpdHRvcm93c1wifSx7bGFiZWw6Yy5zcGxpdHRvY29scyxjbWROYW1lOlwic3BsaXR0b2NvbHNcIn0se2xhYmVsOmMuc3BsaXR0b2NlbGxzLGNtZE5hbWU6XCJzcGxpdHRvY2VsbHNcIn0sXCItXCIse2xhYmVsOmMuYXZlcmFnZURpc2VSb3csY21kTmFtZTpcImF2ZXJhZ2VkaXN0cmlidXRlcm93XCJ9LHtsYWJlbDpjLmF2ZXJhZ2VEaXNDb2wsY21kTmFtZTpcImF2ZXJhZ2VkaXN0cmlidXRlY29sXCJ9LFwiLVwiLHtsYWJlbDpjLmVkaXR0ZCxjbWROYW1lOlwiZWRpdHRkXCIsZXhlYzpmdW5jdGlvbigpe1VFLnVpLmVkaXR0ZCYmbmV3IFVFLnVpLmVkaXR0ZCh0aGlzKSx0aGlzLmdldERpYWxvZyhcImVkaXR0ZFwiKS5vcGVuKCl9fSx7bGFiZWw6Yy5lZGl0dGFibGUsY21kTmFtZTpcImVkaXR0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oKXtVRS51aS5lZGl0dGFibGUmJm5ldyBVRS51aS5lZGl0dGFibGUodGhpcyksdGhpcy5nZXREaWFsb2coXCJlZGl0dGFibGVcIikub3BlbigpfX0se2xhYmVsOmMuc2V0Ym9yZGVydmlzaWJsZSxjbWROYW1lOlwic2V0Ym9yZGVydmlzaWJsZVwifV19LHtncm91cDpjLnRhYmxlc29ydCxpY29uOlwidGFibGVzb3J0XCIsc3ViTWVudTpbe2xhYmVsOmMuZW5hYmxlc29ydCxjbWROYW1lOlwiZW5hYmxlc29ydFwifSx7bGFiZWw6Yy5kaXNhYmxlc29ydCxjbWROYW1lOlwiZGlzYWJsZXNvcnRcIn0sXCItXCIse2xhYmVsOmMucmV2ZXJzZWN1cnJlbnQsY21kTmFtZTpcInNvcnR0YWJsZVwiLHZhbHVlOlwicmV2ZXJzZWN1cnJlbnRcIn0se2xhYmVsOmMub3JkZXJieWFzYyxjbWROYW1lOlwic29ydHRhYmxlXCIsdmFsdWU6XCJvcmRlcmJ5YXNjXCJ9LHtsYWJlbDpjLnJldmVyc2VieWFzYyxjbWROYW1lOlwic29ydHRhYmxlXCIsdmFsdWU6XCJyZXZlcnNlYnlhc2NcIn0se2xhYmVsOmMub3JkZXJieW51bSxjbWROYW1lOlwic29ydHRhYmxlXCIsdmFsdWU6XCJvcmRlcmJ5bnVtXCJ9LHtsYWJlbDpjLnJldmVyc2VieW51bSxjbWROYW1lOlwic29ydHRhYmxlXCIsdmFsdWU6XCJyZXZlcnNlYnludW1cIn1dfSx7Z3JvdXA6Yy5ib3JkZXJiayxpY29uOlwiYm9yZGVyQmFja1wiLHN1Yk1lbnU6W3tsYWJlbDpjLnNldGNvbG9yLGNtZE5hbWU6XCJpbnRlcmxhY2V0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oKXt0aGlzLmV4ZWNDb21tYW5kKFwiaW50ZXJsYWNldGFibGVcIil9fSx7bGFiZWw6Yy51bnNldGNvbG9yLGNtZE5hbWU6XCJ1bmludGVybGFjZXRhYmxlXCIsZXhlYzpmdW5jdGlvbigpe3RoaXMuZXhlY0NvbW1hbmQoXCJ1bmludGVybGFjZXRhYmxlXCIpfX0se2xhYmVsOmMuc2V0YmFja2dyb3VuZCxjbWROYW1lOlwic2V0dGFibGViYWNrZ3JvdW5kXCIsZXhlYzpmdW5jdGlvbigpe3RoaXMuZXhlY0NvbW1hbmQoXCJzZXR0YWJsZWJhY2tncm91bmRcIix7cmVwZWF0OiEwLGNvbG9yTGlzdDpbXCIjYmJiXCIsXCIjY2NjXCJdfSl9fSx7bGFiZWw6Yy51bnNldGJhY2tncm91bmQsY21kTmFtZTpcImNsZWFydGFibGViYWNrZ3JvdW5kXCIsZXhlYzpmdW5jdGlvbigpe3RoaXMuZXhlY0NvbW1hbmQoXCJjbGVhcnRhYmxlYmFja2dyb3VuZFwiKX19LHtsYWJlbDpjLnJlZGFuZGJsdWUsY21kTmFtZTpcInNldHRhYmxlYmFja2dyb3VuZFwiLGV4ZWM6ZnVuY3Rpb24oKXt0aGlzLmV4ZWNDb21tYW5kKFwic2V0dGFibGViYWNrZ3JvdW5kXCIse3JlcGVhdDohMCxjb2xvckxpc3Q6W1wicmVkXCIsXCJibHVlXCJdfSl9fSx7bGFiZWw6Yy50aHJlZWNvbG9yZ3JhZGllbnQsY21kTmFtZTpcInNldHRhYmxlYmFja2dyb3VuZFwiLGV4ZWM6ZnVuY3Rpb24oKXt0aGlzLmV4ZWNDb21tYW5kKFwic2V0dGFibGViYWNrZ3JvdW5kXCIse3JlcGVhdDohMCxjb2xvckxpc3Q6W1wiI2FhYVwiLFwiI2JiYlwiLFwiI2NjY1wiXX0pfX1dfSx7Z3JvdXA6Yy5hbGlnbnRkLGljb246XCJhbGlnbnRkXCIsc3ViTWVudTpbe2NtZE5hbWU6XCJjZWxsYWxpZ25tZW50XCIsdmFsdWU6e2FsaWduOlwibGVmdFwiLHZBbGlnbjpcInRvcFwifX0se2NtZE5hbWU6XCJjZWxsYWxpZ25tZW50XCIsdmFsdWU6e2FsaWduOlwiY2VudGVyXCIsdkFsaWduOlwidG9wXCJ9fSx7Y21kTmFtZTpcImNlbGxhbGlnbm1lbnRcIix2YWx1ZTp7YWxpZ246XCJyaWdodFwiLHZBbGlnbjpcInRvcFwifX0se2NtZE5hbWU6XCJjZWxsYWxpZ25tZW50XCIsdmFsdWU6e2FsaWduOlwibGVmdFwiLHZBbGlnbjpcIm1pZGRsZVwifX0se2NtZE5hbWU6XCJjZWxsYWxpZ25tZW50XCIsdmFsdWU6e2FsaWduOlwiY2VudGVyXCIsdkFsaWduOlwibWlkZGxlXCJ9fSx7Y21kTmFtZTpcImNlbGxhbGlnbm1lbnRcIix2YWx1ZTp7YWxpZ246XCJyaWdodFwiLHZBbGlnbjpcIm1pZGRsZVwifX0se2NtZE5hbWU6XCJjZWxsYWxpZ25tZW50XCIsdmFsdWU6e2FsaWduOlwibGVmdFwiLHZBbGlnbjpcImJvdHRvbVwifX0se2NtZE5hbWU6XCJjZWxsYWxpZ25tZW50XCIsdmFsdWU6e2FsaWduOlwiY2VudGVyXCIsdkFsaWduOlwiYm90dG9tXCJ9fSx7Y21kTmFtZTpcImNlbGxhbGlnbm1lbnRcIix2YWx1ZTp7YWxpZ246XCJyaWdodFwiLHZBbGlnbjpcImJvdHRvbVwifX1dfSx7Z3JvdXA6Yy5hbGlnbnRhYmxlLGljb246XCJhbGlnbnRhYmxlXCIsc3ViTWVudTpbe2NtZE5hbWU6XCJ0YWJsZWFsaWdubWVudFwiLGNsYXNzTmFtZTpcImxlZnRcIixsYWJlbDpjLnRhYmxlbGVmdCx2YWx1ZTpcImxlZnRcIn0se2NtZE5hbWU6XCJ0YWJsZWFsaWdubWVudFwiLGNsYXNzTmFtZTpcImNlbnRlclwiLGxhYmVsOmMudGFibGVjZW50ZXIsdmFsdWU6XCJjZW50ZXJcIn0se2NtZE5hbWU6XCJ0YWJsZWFsaWdubWVudFwiLGNsYXNzTmFtZTpcInJpZ2h0XCIsbGFiZWw6Yy50YWJsZXJpZ2h0LHZhbHVlOlwicmlnaHRcIn1dfSxcIi1cIix7bGFiZWw6Yy5pbnNlcnRwYXJhZ3JhcGhiZWZvcmUsY21kTmFtZTpcImluc2VydHBhcmFncmFwaFwiLHZhbHVlOiEwfSx7bGFiZWw6Yy5pbnNlcnRwYXJhZ3JhcGhhZnRlcixjbWROYW1lOlwiaW5zZXJ0cGFyYWdyYXBoXCJ9LHtsYWJlbDpjLmNvcHksY21kTmFtZTpcImNvcHlcIn0se2xhYmVsOmMucGFzdGUsY21kTmFtZTpcInBhc3RlXCJ9XTtpZihkLmxlbmd0aCl7dmFyIGU9VUUudWkudWlVdGlsczthLmFkZExpc3RlbmVyKFwiY29udGV4dG1lbnVcIixmdW5jdGlvbihmLGcpe3ZhciBoPWUuZ2V0Vmlld3BvcnRPZmZzZXRCeUV2ZW50KGcpO2EuZmlyZUV2ZW50KFwiYmVmb3Jlc2VsZWN0aW9uY2hhbmdlXCIpLGImJmIuZGVzdHJveSgpO2Zvcih2YXIgaSxqPTAsaz1bXTtpPWRbal07aisrKXt2YXIgbDshZnVuY3Rpb24oYil7ZnVuY3Rpb24gZCgpe3N3aXRjaChiLmljb24pe2Nhc2VcInRhYmxlXCI6cmV0dXJuIGEuZ2V0TGFuZyhcImNvbnRleHRNZW51LnRhYmxlXCIpO2Nhc2VcImp1c3RpZnlqdXN0aWZ5XCI6cmV0dXJuIGEuZ2V0TGFuZyhcImNvbnRleHRNZW51LnBhcmFncmFwaFwiKTtjYXNlXCJhbGlnbnRkXCI6cmV0dXJuIGEuZ2V0TGFuZyhcImNvbnRleHRNZW51LmFsaWdudGRcIik7Y2FzZVwiYWxpZ250YWJsZVwiOnJldHVybiBhLmdldExhbmcoXCJjb250ZXh0TWVudS5hbGlnbnRhYmxlXCIpO2Nhc2VcInRhYmxlc29ydFwiOnJldHVybiBjLnRhYmxlc29ydDtjYXNlXCJib3JkZXJCYWNrXCI6cmV0dXJuIGMuYm9yZGVyYms7ZGVmYXVsdDpyZXR1cm5cIlwifX1pZihcIi1cIj09YikobD1rW2subGVuZ3RoLTFdKSYmXCItXCIhPT1sJiZrLnB1c2goXCItXCIpO2Vsc2UgaWYoYi5oYXNPd25Qcm9wZXJ0eShcImdyb3VwXCIpKXtmb3IodmFyIGUsZj0wLGc9W107ZT1iLnN1Yk1lbnVbZl07ZisrKSFmdW5jdGlvbihiKXtcIi1cIj09Yj8obD1nW2cubGVuZ3RoLTFdKSYmXCItXCIhPT1sP2cucHVzaChcIi1cIik6Zy5zcGxpY2UoZy5sZW5ndGgtMSk6KGEuY29tbWFuZHNbYi5jbWROYW1lXXx8VUUuY29tbWFuZHNbYi5jbWROYW1lXXx8Yi5xdWVyeSkmJihiLnF1ZXJ5P2IucXVlcnkoKTphLnF1ZXJ5Q29tbWFuZFN0YXRlKGIuY21kTmFtZSkpPi0xJiZnLnB1c2goe2xhYmVsOmIubGFiZWx8fGEuZ2V0TGFuZyhcImNvbnRleHRNZW51LlwiK2IuY21kTmFtZSsoYi52YWx1ZXx8XCJcIikpfHxcIlwiLGNsYXNzTmFtZTpcImVkdWktZm9yLVwiK2IuY21kTmFtZSsoYi5jbGFzc05hbWU/XCIgZWR1aS1mb3ItXCIrYi5jbWROYW1lK1wiLVwiK2IuY2xhc3NOYW1lOlwiXCIpLG9uY2xpY2s6Yi5leGVjP2Z1bmN0aW9uKCl7Yi5leGVjLmNhbGwoYSl9OmZ1bmN0aW9uKCl7YS5leGVjQ29tbWFuZChiLmNtZE5hbWUsYi52YWx1ZSl9fSl9KGUpO2cubGVuZ3RoJiZrLnB1c2goe2xhYmVsOmQoKSxjbGFzc05hbWU6XCJlZHVpLWZvci1cIitiLmljb24sc3ViTWVudTp7aXRlbXM6ZyxlZGl0b3I6YX19KX1lbHNlKGEuY29tbWFuZHNbYi5jbWROYW1lXXx8VUUuY29tbWFuZHNbYi5jbWROYW1lXXx8Yi5xdWVyeSkmJihiLnF1ZXJ5P2IucXVlcnkuY2FsbChhKTphLnF1ZXJ5Q29tbWFuZFN0YXRlKGIuY21kTmFtZSkpPi0xJiZrLnB1c2goe2xhYmVsOmIubGFiZWx8fGEuZ2V0TGFuZyhcImNvbnRleHRNZW51LlwiK2IuY21kTmFtZSksY2xhc3NOYW1lOlwiZWR1aS1mb3ItXCIrKGIuaWNvbj9iLmljb246Yi5jbWROYW1lKyhiLnZhbHVlfHxcIlwiKSksb25jbGljazpiLmV4ZWM/ZnVuY3Rpb24oKXtiLmV4ZWMuY2FsbChhKX06ZnVuY3Rpb24oKXthLmV4ZWNDb21tYW5kKGIuY21kTmFtZSxiLnZhbHVlKX19KX0oaSl9aWYoXCItXCI9PWtbay5sZW5ndGgtMV0mJmsucG9wKCksYj1uZXcgVUUudWkuTWVudSh7aXRlbXM6ayxjbGFzc05hbWU6XCJlZHVpLWNvbnRleHRtZW51XCIsZWRpdG9yOmF9KSxiLnJlbmRlcigpLGIuc2hvd0F0KGgpLGEuZmlyZUV2ZW50KFwiYWZ0ZXJzaG93Y29udGV4dG1lbnVcIixiKSxkb21VdGlscy5wcmV2ZW50RGVmYXVsdChnKSxicm93c2VyLmllKXt2YXIgbTt0cnl7bT1hLnNlbGVjdGlvbi5nZXROYXRpdmUoKS5jcmVhdGVSYW5nZSgpfWNhdGNoKG4pe3JldHVybn1pZihtLml0ZW0pe3ZhciBvPW5ldyBkb20uUmFuZ2UoYS5kb2N1bWVudCk7by5zZWxlY3ROb2RlKG0uaXRlbSgwKSkuc2VsZWN0KCEwLCEwKX19fSksYS5hZGRMaXN0ZW5lcihcImFmdGVyc2hvd2NvbnRleHRtZW51XCIsZnVuY3Rpb24oYixjKXtpZihhLnplcm9jbGlwYm9hcmQpe3ZhciBkPWMuaXRlbXM7Zm9yKHZhciBlIGluIGQpXCJlZHVpLWZvci1jb3B5XCI9PWRbZV0uY2xhc3NOYW1lJiZhLnplcm9jbGlwYm9hcmQuY2xpcChkW2VdLmdldERvbSgpKX19KX19fSxVRS5wbHVnaW5zLnNob3J0Y3V0bWVudT1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcyxjPWIub3B0aW9ucy5zaG9ydGN1dE1lbnV8fFtdO2MubGVuZ3RoJiYoYi5hZGRMaXN0ZW5lcihcImNvbnRleHRtZW51IG1vdXNldXBcIixmdW5jdGlvbihiLGQpe3ZhciBlPXRoaXMsZj17dHlwZTpiLHRhcmdldDpkLnRhcmdldHx8ZC5zcmNFbGVtZW50LHNjcmVlblg6ZC5zY3JlZW5YLHNjcmVlblk6ZC5zY3JlZW5ZLGNsaWVudFg6ZC5jbGllbnRYLGNsaWVudFk6ZC5jbGllbnRZfTtpZihzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGQ9ZS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtkLmNvbGxhcHNlZCE9PSExJiZcImNvbnRleHRtZW51XCIhPWJ8fChhfHwoYT1uZXcgYmFpZHUuZWRpdG9yLnVpLlNob3J0Q3V0TWVudSh7ZWRpdG9yOmUsaXRlbXM6Yyx0aGVtZTplLm9wdGlvbnMudGhlbWUsY2xhc3NOYW1lOlwiZWR1aS1zaG9ydGN1dG1lbnVcIn0pLGEucmVuZGVyKCksZS5maXJlRXZlbnQoXCJhZnRlcnJlbmRlcnNob3J0Y3V0bWVudVwiLGEpKSxhLnNob3coZiwhIVVFLnBsdWdpbnMuY29udGV4dG1lbnUpKX0pLFwiY29udGV4dG1lbnVcIj09YiYmKGRvbVV0aWxzLnByZXZlbnREZWZhdWx0KGQpLGJyb3dzZXIuaWU5YmVsb3cpKXt2YXIgZzt0cnl7Zz1lLnNlbGVjdGlvbi5nZXROYXRpdmUoKS5jcmVhdGVSYW5nZSgpfWNhdGNoKGQpe3JldHVybn1pZihnLml0ZW0pe3ZhciBoPW5ldyBkb20uUmFuZ2UoZS5kb2N1bWVudCk7aC5zZWxlY3ROb2RlKGcuaXRlbSgwKSkuc2VsZWN0KCEwLCEwKX19fSksYi5hZGRMaXN0ZW5lcihcImtleWRvd25cIixmdW5jdGlvbihiKXtcImtleWRvd25cIj09YiYmYSYmIWEuaXNIaWRkZW4mJmEuaGlkZSgpfSkpfSxVRS5wbHVnaW5zLmJhc2VzdHlsZT1mdW5jdGlvbigpe3ZhciBhPXtib2xkOltcInN0cm9uZ1wiLFwiYlwiXSxpdGFsaWM6W1wiZW1cIixcImlcIl0sc3Vic2NyaXB0OltcInN1YlwiXSxzdXBlcnNjcmlwdDpbXCJzdXBcIl19LGI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZG9tVXRpbHMuZmlsdGVyTm9kZUxpc3QoYS5zZWxlY3Rpb24uZ2V0U3RhcnRFbGVtZW50UGF0aCgpLGIpfSxjPXRoaXM7Yy5hZGRzaG9ydGN1dGtleSh7Qm9sZDpcImN0cmwrNjZcIixJdGFsaWM6XCJjdHJsKzczXCIsVW5kZXJsaW5lOlwiY3RybCs4NVwifSksYy5hZGRJbnB1dFJ1bGUoZnVuY3Rpb24oYSl7dXRpbHMuZWFjaChhLmdldE5vZGVzQnlUYWdOYW1lKFwiYiBpXCIpLGZ1bmN0aW9uKGEpe3N3aXRjaChhLnRhZ05hbWUpe2Nhc2VcImJcIjphLnRhZ05hbWU9XCJzdHJvbmdcIjticmVhaztjYXNlXCJpXCI6YS50YWdOYW1lPVwiZW1cIn19KX0pO2Zvcih2YXIgZCBpbiBhKSFmdW5jdGlvbihhLGQpe2MuY29tbWFuZHNbYV09e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe3ZhciBlPWMuc2VsZWN0aW9uLmdldFJhbmdlKCksZj1iKHRoaXMsZCk7aWYoZS5jb2xsYXBzZWQpe2lmKGYpe3ZhciBnPWMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7ZS5pbnNlcnROb2RlKGcpLnJlbW92ZUlubGluZVN0eWxlKGQpLGUuc2V0U3RhcnRCZWZvcmUoZyksZG9tVXRpbHMucmVtb3ZlKGcpfWVsc2V7dmFyIGg9ZS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGRbMF0pO1wic3VwZXJzY3JpcHRcIiE9YSYmXCJzdWJzY3JpcHRcIiE9YXx8KGc9Yy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKSxlLmluc2VydE5vZGUoZykucmVtb3ZlSW5saW5lU3R5bGUoW1wic3ViXCIsXCJzdXBcIl0pLnNldFN0YXJ0QmVmb3JlKGcpLmNvbGxhcHNlKCEwKSksZS5pbnNlcnROb2RlKGgpLnNldFN0YXJ0KGgsMCl9ZS5jb2xsYXBzZSghMCl9ZWxzZVwic3VwZXJzY3JpcHRcIiE9YSYmXCJzdWJzY3JpcHRcIiE9YXx8ZiYmZi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PWF8fGUucmVtb3ZlSW5saW5lU3R5bGUoW1wic3ViXCIsXCJzdXBcIl0pLGY/ZS5yZW1vdmVJbmxpbmVTdHlsZShkKTplLmFwcGx5SW5saW5lU3R5bGUoZFswXSk7ZS5zZWxlY3QoKX0scXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gYih0aGlzLGQpPzE6MH19fShkLGFbZF0pfSxVRS5wbHVnaW5zLmVsZW1lbnRwYXRoPWZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXM7Yy5zZXRPcHQoXCJlbGVtZW50UGF0aEVuYWJsZWRcIiwhMCksYy5vcHRpb25zLmVsZW1lbnRQYXRoRW5hYmxlZCYmKGMuY29tbWFuZHMuZWxlbWVudHBhdGg9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGQsZSl7dmFyIGY9YltlXSxnPWMuc2VsZWN0aW9uLmdldFJhbmdlKCk7YT0xKmUsZy5zZWxlY3ROb2RlKGYpLnNlbGVjdCgpfSxxdWVyeUNvbW1hbmRWYWx1ZTpmdW5jdGlvbigpe3ZhciBjPVtdLmNvbmNhdCh0aGlzLnNlbGVjdGlvbi5nZXRTdGFydEVsZW1lbnRQYXRoKCkpLnJldmVyc2UoKSxkPVtdO2I9Yztmb3IodmFyIGUsZj0wO2U9Y1tmXTtmKyspaWYoMyE9ZS5ub2RlVHlwZSl7dmFyIGc9ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aWYoXCJpbWdcIj09ZyYmZS5nZXRBdHRyaWJ1dGUoXCJhbmNob3JuYW1lXCIpJiYoZz1cImFuY2hvclwiKSxkW2ZdPWcsYT09Zil7YT0tMTticmVha319cmV0dXJuIGR9fSl9LFVFLnBsdWdpbnMuZm9ybWF0bWF0Y2g9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGYsZyl7ZnVuY3Rpb24gaChhKXtyZXR1cm4gbSYmYS5zZWxlY3ROb2RlKG0pLGEuYXBwbHlJbmxpbmVTdHlsZShkW2QubGVuZ3RoLTFdLnRhZ05hbWUsbnVsbCxkKX1pZihicm93c2VyLndlYmtpdCl2YXIgaT1cIklNR1wiPT1nLnRhcmdldC50YWdOYW1lP2cudGFyZ2V0Om51bGw7Yy51bmRvTWFuZ2VyJiZjLnVuZG9NYW5nZXIuc2F2ZSgpO3ZhciBqPWMuc2VsZWN0aW9uLmdldFJhbmdlKCksaz1pfHxqLmdldENsb3NlZE5vZGUoKTtpZihiJiZrJiZcIklNR1wiPT1rLnRhZ05hbWUpay5zdHlsZS5jc3NUZXh0Kz1cIjtmbG9hdDpcIisoYi5zdHlsZS5jc3NGbG9hdHx8Yi5zdHlsZS5zdHlsZUZsb2F0fHxcIm5vbmVcIikrXCI7ZGlzcGxheTpcIisoYi5zdHlsZS5kaXNwbGF5fHxcImlubGluZVwiKSxiPW51bGw7ZWxzZSBpZighYil7dmFyIGw9ai5jb2xsYXBzZWQ7aWYobCl7dmFyIG09Yy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIm1hdGNoXCIpO2ouaW5zZXJ0Tm9kZShtKS5zZWxlY3QoKX1jLl9faGFzRW50ZXJFeGVjQ29tbWFuZD0hMDt2YXIgbj1jLm9wdGlvbnMucmVtb3ZlRm9ybWF0QXR0cmlidXRlcztjLm9wdGlvbnMucmVtb3ZlRm9ybWF0QXR0cmlidXRlcz1cIlwiLGMuZXhlY0NvbW1hbmQoXCJyZW1vdmVmb3JtYXRcIiksYy5vcHRpb25zLnJlbW92ZUZvcm1hdEF0dHJpYnV0ZXM9bixjLl9faGFzRW50ZXJFeGVjQ29tbWFuZD0hMSxqPWMuc2VsZWN0aW9uLmdldFJhbmdlKCksZC5sZW5ndGgmJmgoaiksbSYmai5zZXRTdGFydEJlZm9yZShtKS5jb2xsYXBzZSghMCksai5zZWxlY3QoKSxtJiZkb21VdGlscy5yZW1vdmUobSl9Yy51bmRvTWFuZ2VyJiZjLnVuZG9NYW5nZXIuc2F2ZSgpLGMucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYSksZT0wfXZhciBiLGM9dGhpcyxkPVtdLGU9MDtjLmFkZExpc3RlbmVyKFwicmVzZXRcIixmdW5jdGlvbigpe2Q9W10sZT0wfSksYy5jb21tYW5kcy5mb3JtYXRtYXRjaD17ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oZil7aWYoZSlyZXR1cm4gZT0wLGQ9W10sdm9pZCBjLnJlbW92ZUxpc3RlbmVyKFwibW91c2V1cFwiLGEpO3ZhciBnPWMuc2VsZWN0aW9uLmdldFJhbmdlKCk7aWYoYj1nLmdldENsb3NlZE5vZGUoKSwhYnx8XCJJTUdcIiE9Yi50YWdOYW1lKXtnLmNvbGxhcHNlKCEwKS5zaHJpbmtCb3VuZGFyeSgpO3ZhciBoPWcuc3RhcnRDb250YWluZXI7ZD1kb21VdGlscy5maW5kUGFyZW50cyhoLCEwLGZ1bmN0aW9uKGEpe3JldHVybiFkb21VdGlscy5pc0Jsb2NrRWxtKGEpJiYxPT1hLm5vZGVUeXBlfSk7Zm9yKHZhciBpLGo9MDtpPWRbal07aisrKWlmKFwiQVwiPT1pLnRhZ05hbWUpe2Quc3BsaWNlKGosMSk7YnJlYWt9fWMuYWRkTGlzdGVuZXIoXCJtb3VzZXVwXCIsYSksZT0xfSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBlfSxub3ROZWVkVW5kbzoxfX0sVUUucGx1Z2luLnJlZ2lzdGVyKFwic2VhcmNocmVwbGFjZVwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7dmFyIGQ9Yi5zZWFyY2hTdHI7Yi5kaXI9PS0xJiYoYT1hLnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpLGQ9ZC5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKSxjPWEubGVuZ3RoLWMpO2Zvcih2YXIgZSxmPW5ldyBSZWdFeHAoZCxcImdcIisoYi5jYXNlc2Vuc2l0aXZlP1wiXCI6XCJpXCIpKTtlPWYuZXhlYyhhKTspaWYoZS5pbmRleD49YylyZXR1cm4gYi5kaXI9PS0xP2EubGVuZ3RoLWUuaW5kZXgtYi5zZWFyY2hTdHIubGVuZ3RoOmUuaW5kZXg7cmV0dXJuLTF9ZnVuY3Rpb24gYihiLGMsZCl7dmFyIGUsZixoPWQuYWxsfHwxPT1kLmRpcj9cImdldE5leHREb21Ob2RlXCI6XCJnZXRQcmVEb21Ob2RlXCI7ZG9tVXRpbHMuaXNCb2R5KGIpJiYoYj1iLmZpcnN0Q2hpbGQpO2Zvcih2YXIgaT0xO2I7KXtpZihlPTM9PWIubm9kZVR5cGU/Yi5ub2RlVmFsdWU6Ylticm93c2VyLmllP1wiaW5uZXJUZXh0XCI6XCJ0ZXh0Q29udGVudFwiXSxmPWEoZSxkLGMpLGk9MCxmIT0tMSlyZXR1cm57bm9kZTpiLGluZGV4OmZ9O2ZvcihiPWRvbVV0aWxzW2hdKGIpO2ImJmdbYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTspYj1kb21VdGlsc1toXShiLCEwKTtiJiYoYz1kLmRpcj09LTE/KDM9PWIubm9kZVR5cGU/Yi5ub2RlVmFsdWU6Ylticm93c2VyLmllP1wiaW5uZXJUZXh0XCI6XCJ0ZXh0Q29udGVudFwiXSkubGVuZ3RoOjApfX1mdW5jdGlvbiBjKGEsYixkKXtmb3IodmFyIGUsZj0wLGc9YS5maXJzdENoaWxkLGg9MDtnOyl7aWYoMz09Zy5ub2RlVHlwZSl7aWYoaD1nLm5vZGVWYWx1ZS5yZXBsYWNlKC8oXltcXHRcXHJcXG5dKyl8KFtcXHRcXHJcXG5dKyQpLyxcIlwiKS5sZW5ndGgsZis9aCxmPj1iKXJldHVybntub2RlOmcsaW5kZXg6aC0oZi1iKX19ZWxzZSBpZighZHRkLiRlbXB0eVtnLnRhZ05hbWVdJiYoaD1nW2Jyb3dzZXIuaWU/XCJpbm5lclRleHRcIjpcInRleHRDb250ZW50XCJdLnJlcGxhY2UoLyheW1xcdFxcclxcbl0rKXwoW1xcdFxcclxcbl0rJCkvLFwiXCIpLmxlbmd0aCxmKz1oLGY+PWImJihlPWMoZyxoLShmLWIpLGQpKSkpcmV0dXJuIGU7Zz1kb21VdGlscy5nZXROZXh0RG9tTm9kZShnKX19ZnVuY3Rpb24gZChhLGQpe3ZhciBmLGc9YS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxoPWQuc2VhcmNoU3RyLGk9YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtpZihpLmlubmVySFRNTD1cIiQkdWVkaXRvcl9zZWFyY2hyZXBsYWNlX2tleSQkXCIsZy5zaHJpbmtCb3VuZGFyeSghMCksIWcuY29sbGFwc2VkKXtnLnNlbGVjdCgpO3ZhciBqPWEuc2VsZWN0aW9uLmdldFRleHQoKTtpZihuZXcgUmVnRXhwKFwiXlwiK2Quc2VhcmNoU3RyK1wiJFwiLGQuY2FzZXNlbnNpdGl2ZT9cIlwiOlwiaVwiKS50ZXN0KGopKXtpZih2b2lkIDAhPWQucmVwbGFjZVN0cilyZXR1cm4gZShnLGQucmVwbGFjZVN0ciksZy5zZWxlY3QoKSwhMDtnLmNvbGxhcHNlKGQuZGlyPT0tMSl9fWcuaW5zZXJ0Tm9kZShpKSxnLmVubGFyZ2VUb0Jsb2NrRWxtKCEwKSxmPWcuc3RhcnRDb250YWluZXI7dmFyIGs9Zlticm93c2VyLmllP1wiaW5uZXJUZXh0XCI6XCJ0ZXh0Q29udGVudFwiXS5pbmRleE9mKFwiJCR1ZWRpdG9yX3NlYXJjaHJlcGxhY2Vfa2V5JCRcIik7Zy5zZXRTdGFydEJlZm9yZShpKSxkb21VdGlscy5yZW1vdmUoaSk7dmFyIGw9YihmLGssZCk7aWYobCl7dmFyIG09YyhsLm5vZGUsbC5pbmRleCxoKSxuPWMobC5ub2RlLGwuaW5kZXgraC5sZW5ndGgsaCk7cmV0dXJuIGcuc2V0U3RhcnQobS5ub2RlLG0uaW5kZXgpLnNldEVuZChuLm5vZGUsbi5pbmRleCksdm9pZCAwIT09ZC5yZXBsYWNlU3RyJiZlKGcsZC5yZXBsYWNlU3RyKSxnLnNlbGVjdCgpLCEwfWcuc2V0Q3Vyc29yKCl9ZnVuY3Rpb24gZShhLGIpe2I9Zi5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShiKSxhLmRlbGV0ZUNvbnRlbnRzKCkuaW5zZXJ0Tm9kZShiKX12YXIgZj10aGlzLGc9e3RhYmxlOjEsdGJvZHk6MSx0cjoxLG9sOjEsdWw6MX07cmV0dXJue2NvbW1hbmRzOntzZWFyY2hyZXBsYWNlOntleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIpe3V0aWxzLmV4dGVuZChiLHthbGw6ITEsY2FzZXNlbnNpdGl2ZTohMSxkaXI6MX0sITApO3ZhciBjPTA7aWYoYi5hbGwpe3ZhciBlPWYuc2VsZWN0aW9uLmdldFJhbmdlKCksZz1mLmJvZHkuZmlyc3RDaGlsZDtmb3IoZyYmMT09Zy5ub2RlVHlwZT8oZS5zZXRTdGFydChnLDApLGUuc2hyaW5rQm91bmRhcnkoITApKTozPT1nLm5vZGVUeXBlJiZlLnNldFN0YXJ0QmVmb3JlKGcpLGUuY29sbGFwc2UoITApLnNlbGVjdCghMCksdm9pZCAwIT09Yi5yZXBsYWNlU3RyJiZmLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKTtkKHRoaXMsYik7KWMrKztjJiZmLmZpcmVFdmVudChcInNhdmVTY2VuZVwiKX1lbHNlIHZvaWQgMCE9PWIucmVwbGFjZVN0ciYmZi5maXJlRXZlbnQoXCJzYXZlU2NlbmVcIiksZCh0aGlzLGIpJiZjKyssYyYmZi5maXJlRXZlbnQoXCJzYXZlU2NlbmVcIik7cmV0dXJuIGN9LG5vdE5lZWRVbmRvOjF9fX19KSxVRS5wbHVnaW5zLmN1c3RvbXN0eWxlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnNldE9wdCh7Y3VzdG9tc3R5bGU6W3t0YWc6XCJoMVwiLG5hbWU6XCJ0Y1wiLHN0eWxlOlwiZm9udC1zaXplOjMycHg7Zm9udC13ZWlnaHQ6Ym9sZDtib3JkZXItYm90dG9tOiNjY2MgMnB4IHNvbGlkO3BhZGRpbmc6MCA0cHggMCAwO3RleHQtYWxpZ246Y2VudGVyO21hcmdpbjowIDAgMjBweCAwO1wifSx7dGFnOlwiaDFcIixuYW1lOlwidGxcIixzdHlsZTpcImZvbnQtc2l6ZTozMnB4O2ZvbnQtd2VpZ2h0OmJvbGQ7Ym9yZGVyLWJvdHRvbTojY2NjIDJweCBzb2xpZDtwYWRkaW5nOjAgNHB4IDAgMDt0ZXh0LWFsaWduOmxlZnQ7bWFyZ2luOjAgMCAxMHB4IDA7XCJ9LHt0YWc6XCJzcGFuXCIsbmFtZTpcImltXCIsc3R5bGU6XCJmb250LXNpemU6MTZweDtmb250LXN0eWxlOml0YWxpYztmb250LXdlaWdodDpib2xkO2xpbmUtaGVpZ2h0OjE4cHg7XCJ9LHt0YWc6XCJzcGFuXCIsbmFtZTpcImhpXCIsc3R5bGU6XCJmb250LXNpemU6MTZweDtmb250LXN0eWxlOml0YWxpYztmb250LXdlaWdodDpib2xkO2NvbG9yOnJnYig1MSwgMTUzLCAyMDQpO2xpbmUtaGVpZ2h0OjE4cHg7XCJ9XX0pLGEuY29tbWFuZHMuY3VzdG9tc3R5bGU9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPXRoaXMsZj1iLnRhZyxnPWRvbVV0aWxzLmZpbmRQYXJlbnQoZS5zZWxlY3Rpb24uZ2V0U3RhcnQoKSxmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJsYWJlbFwiKX0sITApLGg9e307Zm9yKHZhciBpIGluIGIpdm9pZCAwIT09YltpXSYmKGhbaV09YltpXSk7aWYoZGVsZXRlIGgudGFnLGcmJmcuZ2V0QXR0cmlidXRlKFwibGFiZWxcIik9PWIubGFiZWwpe2lmKGM9dGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSxkPWMuY3JlYXRlQm9va21hcmsoKSxjLmNvbGxhcHNlZClpZihkdGQuJGJsb2NrW2cudGFnTmFtZV0pe3ZhciBqPWUuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7ZG9tVXRpbHMubW92ZUNoaWxkKGcsaiksZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqLGcpLGRvbVV0aWxzLnJlbW92ZShnKX1lbHNlIGRvbVV0aWxzLnJlbW92ZShnLCEwKTtlbHNle3ZhciBrPWRvbVV0aWxzLmdldENvbW1vbkFuY2VzdG9yKGQuc3RhcnQsZC5lbmQpLGw9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoayxmKTtuZXcgUmVnRXhwKGYsXCJpXCIpLnRlc3Qoay50YWdOYW1lKSYmbC5wdXNoKGspO2Zvcih2YXIgbSxuPTA7bT1sW24rK107KWlmKG0uZ2V0QXR0cmlidXRlKFwibGFiZWxcIik9PWIubGFiZWwpe3ZhciBvPWRvbVV0aWxzLmdldFBvc2l0aW9uKG0sZC5zdGFydCkscD1kb21VdGlscy5nZXRQb3NpdGlvbihtLGQuZW5kKTtpZigobyZkb21VdGlscy5QT1NJVElPTl9GT0xMT1dJTkd8fG8mZG9tVXRpbHMuUE9TSVRJT05fQ09OVEFJTlMpJiYocCZkb21VdGlscy5QT1NJVElPTl9QUkVDRURJTkd8fHAmZG9tVXRpbHMuUE9TSVRJT05fQ09OVEFJTlMpJiZkdGQuJGJsb2NrW2ZdKXt2YXIgaj1lLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO2RvbVV0aWxzLm1vdmVDaGlsZChtLGopLG0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaixtKX1kb21VdGlscy5yZW1vdmUobSwhMCl9Zz1kb21VdGlscy5maW5kUGFyZW50KGssZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwibGFiZWxcIik9PWIubGFiZWx9LCEwKSxnJiZkb21VdGlscy5yZW1vdmUoZywhMCl9Yy5tb3ZlVG9Cb29rbWFyayhkKS5zZWxlY3QoKX1lbHNlIGlmKGR0ZC4kYmxvY2tbZl0pe2lmKHRoaXMuZXhlY0NvbW1hbmQoXCJwYXJhZ3JhcGhcIixmLGgsXCJjdXN0b21zdHlsZVwiKSxjPWUuc2VsZWN0aW9uLmdldFJhbmdlKCksIWMuY29sbGFwc2VkKXtjLmNvbGxhcHNlKCksZz1kb21VdGlscy5maW5kUGFyZW50KGUuc2VsZWN0aW9uLmdldFN0YXJ0KCksZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwibGFiZWxcIik9PWIubGFiZWx9LCEwKTt2YXIgcT1lLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO2RvbVV0aWxzLmluc2VydEFmdGVyKGcscSksZG9tVXRpbHMuZmlsbE5vZGUoZS5kb2N1bWVudCxxKSxjLnNldFN0YXJ0KHEsMCkuc2V0Q3Vyc29yKCl9fWVsc2V7aWYoYz1lLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGMuY29sbGFwc2VkKXJldHVybiBnPWUuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChmKSxkb21VdGlscy5zZXRBdHRyaWJ1dGVzKGcsaCksdm9pZCBjLmluc2VydE5vZGUoZykuc2V0U3RhcnQoZywwKS5zZXRDdXJzb3IoKTtkPWMuY3JlYXRlQm9va21hcmsoKSxjLmFwcGx5SW5saW5lU3R5bGUoZixoKS5tb3ZlVG9Cb29rbWFyayhkKS5zZWxlY3QoKX19LHF1ZXJ5Q29tbWFuZFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9ZG9tVXRpbHMuZmlsdGVyTm9kZUxpc3QodGhpcy5zZWxlY3Rpb24uZ2V0U3RhcnRFbGVtZW50UGF0aCgpLGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcImxhYmVsXCIpfSk7cmV0dXJuIGE/YS5nZXRBdHRyaWJ1dGUoXCJsYWJlbFwiKTpcIlwifX0sYS5hZGRMaXN0ZW5lcihcImtleXVwXCIsZnVuY3Rpb24oYixjKXt2YXIgZD1jLmtleUNvZGV8fGMud2hpY2g7aWYoMzI9PWR8fDEzPT1kKXt2YXIgZT1hLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2lmKGUuY29sbGFwc2VkKXt2YXIgZj1kb21VdGlscy5maW5kUGFyZW50KGEuc2VsZWN0aW9uLmdldFN0YXJ0KCksZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwibGFiZWxcIil9LCEwKTtpZihmJiZkdGQuJGJsb2NrW2YudGFnTmFtZV0mJmRvbVV0aWxzLmlzRW1wdHlOb2RlKGYpKXt2YXIgZz1hLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO2RvbVV0aWxzLmluc2VydEFmdGVyKGYsZyksZG9tVXRpbHMuZmlsbE5vZGUoYS5kb2N1bWVudCxnKSxkb21VdGlscy5yZW1vdmUoZiksZS5zZXRTdGFydChnLDApLnNldEN1cnNvcigpfX19fSl9LFVFLnBsdWdpbnMuY2F0Y2hyZW1vdGVpbWFnZT1mdW5jdGlvbigpe3ZhciBtZT10aGlzLGFqYXg9VUUuYWpheDttZS5vcHRpb25zLmNhdGNoUmVtb3RlSW1hZ2VFbmFibGUhPT0hMSYmKG1lLnNldE9wdCh7Y2F0Y2hSZW1vdGVJbWFnZUVuYWJsZTohMX0pLG1lLmFkZExpc3RlbmVyKFwiYWZ0ZXJwYXN0ZVwiLGZ1bmN0aW9uKCl7bWUuZmlyZUV2ZW50KFwiY2F0Y2hSZW1vdGVJbWFnZVwiKX0pLG1lLmFkZExpc3RlbmVyKFwiY2F0Y2hSZW1vdGVJbWFnZVwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gY2F0Y2hyZW1vdGVpbWFnZShhLGIpe3ZhciBjPXV0aWxzLnNlcmlhbGl6ZVBhcmFtKG1lLnF1ZXJ5Q29tbWFuZFZhbHVlKFwic2VydmVycGFyYW1cIikpfHxcIlwiLGQ9dXRpbHMuZm9ybWF0VXJsKGNhdGNoZXJBY3Rpb25VcmwrKGNhdGNoZXJBY3Rpb25VcmwuaW5kZXhPZihcIj9cIik9PS0xP1wiP1wiOlwiJlwiKStjKSxlPXV0aWxzLmlzQ3Jvc3NEb21haW5VcmwoZCksZj17bWV0aG9kOlwiUE9TVFwiLGRhdGFUeXBlOmU/XCJqc29ucFwiOlwiXCIsdGltZW91dDo2ZTQsb25zdWNjZXNzOmIuc3VjY2VzcyxvbmVycm9yOmIuZXJyb3J9O2ZbY2F0Y2hlckZpZWxkTmFtZV09YSxhamF4LnJlcXVlc3QoZCxmKX1mb3IodmFyIGNhdGNoZXJMb2NhbERvbWFpbj1tZS5nZXRPcHQoXCJjYXRjaGVyTG9jYWxEb21haW5cIiksY2F0Y2hlckFjdGlvblVybD1tZS5nZXRBY3Rpb25VcmwobWUuZ2V0T3B0KFwiY2F0Y2hlckFjdGlvbk5hbWVcIikpLGNhdGNoZXJVcmxQcmVmaXg9bWUuZ2V0T3B0KFwiY2F0Y2hlclVybFByZWZpeFwiKSxjYXRjaGVyRmllbGROYW1lPW1lLmdldE9wdChcImNhdGNoZXJGaWVsZE5hbWVcIikscmVtb3RlSW1hZ2VzPVtdLGltZ3M9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUobWUuZG9jdW1lbnQsXCJpbWdcIiksdGVzdD1mdW5jdGlvbihhLGIpe2lmKGEuaW5kZXhPZihsb2NhdGlvbi5ob3N0KSE9LTF8fC8oXlxcLil8KF5cXC8pLy50ZXN0KGEpKXJldHVybiEwO2lmKGIpZm9yKHZhciBjLGQ9MDtjPWJbZCsrXTspaWYoYS5pbmRleE9mKGMpIT09LTEpcmV0dXJuITA7cmV0dXJuITF9LGk9MCxjaTtjaT1pbWdzW2krK107KWlmKCFjaS5nZXRBdHRyaWJ1dGUoXCJ3b3JkX2ltZ1wiKSl7dmFyIHNyYz1jaS5nZXRBdHRyaWJ1dGUoXCJfc3JjXCIpfHxjaS5zcmN8fFwiXCI7L14oaHR0cHM/fGZ0cCk6L2kudGVzdChzcmMpJiYhdGVzdChzcmMsY2F0Y2hlckxvY2FsRG9tYWluKSYmcmVtb3RlSW1hZ2VzLnB1c2goc3JjKX1yZW1vdGVJbWFnZXMubGVuZ3RoJiZjYXRjaHJlbW90ZWltYWdlKHJlbW90ZUltYWdlcyx7c3VjY2VzczpmdW5jdGlvbihyKXt0cnl7dmFyIGluZm89dm9pZCAwIT09ci5zdGF0ZT9yOmV2YWwoXCIoXCIrci5yZXNwb25zZVRleHQrXCIpXCIpfWNhdGNoKGUpe3JldHVybn12YXIgaSxqLGNpLGNqLG9sZFNyYyxuZXdTcmMsbGlzdD1pbmZvLmxpc3Q7Zm9yKGk9MDtjaT1pbWdzW2krK107KWZvcihvbGRTcmM9Y2kuZ2V0QXR0cmlidXRlKFwiX3NyY1wiKXx8Y2kuc3JjfHxcIlwiLGo9MDtjaj1saXN0W2orK107KWlmKG9sZFNyYz09Y2ouc291cmNlJiZcIlNVQ0NFU1NcIj09Y2ouc3RhdGUpe25ld1NyYz1jYXRjaGVyVXJsUHJlZml4K2NqLnVybCxkb21VdGlscy5zZXRBdHRyaWJ1dGVzKGNpLHtzcmM6bmV3U3JjLF9zcmM6bmV3U3JjfSk7YnJlYWt9bWUuZmlyZUV2ZW50KFwiY2F0Y2hyZW1vdGVzdWNjZXNzXCIpfSxlcnJvcjpmdW5jdGlvbigpe21lLmZpcmVFdmVudChcImNhdGNocmVtb3RlZXJyb3JcIil9fSl9KSl9LFVFLnBsdWdpbi5yZWdpc3RlcihcInNuYXBzY3JlZW5cIixmdW5jdGlvbigpe2Z1bmN0aW9uIGdldExvY2F0aW9uKGEpe3ZhciBiLGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksZD11dGlscy5zZXJpYWxpemVQYXJhbShtZS5xdWVyeUNvbW1hbmRWYWx1ZShcInNlcnZlcnBhcmFtXCIpKXx8XCJcIjtyZXR1cm4gYy5ocmVmPWEsYnJvd3Nlci5pZSYmKGMuaHJlZj1jLmhyZWYpLGI9Yy5zZWFyY2gsZCYmKGI9YisoYi5pbmRleE9mKFwiP1wiKT09LTE/XCI/XCI6XCImXCIpK2QsYj1iLnJlcGxhY2UoL1smXSsvZ2ksXCImXCIpKSx7cG9ydDpjLnBvcnQsaG9zdG5hbWU6Yy5ob3N0bmFtZSxwYXRoOmMucGF0aG5hbWUrYnx8K2MuaGFzaH19dmFyIG1lPXRoaXMsc25hcHBsdWdpbjtyZXR1cm57Y29tbWFuZHM6e3NuYXBzY3JlZW46e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGNtZCl7ZnVuY3Rpb24gb25TdWNjZXNzKHJzKXt0cnl7aWYocnM9ZXZhbChcIihcIitycytcIilcIiksXCJTVUNDRVNTXCI9PXJzLnN0YXRlKXt2YXIgb3B0PW1lLm9wdGlvbnM7bWUuZXhlY0NvbW1hbmQoXCJpbnNlcnRpbWFnZVwiLHtzcmM6b3B0LnNuYXBzY3JlZW5VcmxQcmVmaXgrcnMudXJsLF9zcmM6b3B0LnNuYXBzY3JlZW5VcmxQcmVmaXgrcnMudXJsLGFsdDpycy50aXRsZXx8XCJcIixmbG9hdFN0eWxlOm9wdC5zbmFwc2NyZWVuSW1nQWxpZ259KX1lbHNlIGFsZXJ0KHJzLnN0YXRlKX1jYXRjaChlKXthbGVydChsYW5nLmNhbGxCYWNrRXJyb3JNc2cpfX12YXIgdXJsLGxvY2FsLHJlcyxsYW5nPW1lLmdldExhbmcoXCJzbmFwU2NyZWVuX3BsdWdpblwiKTtpZighc25hcHBsdWdpbil7dmFyIGNvbnRhaW5lcj1tZS5jb250YWluZXIsZG9jPW1lLmNvbnRhaW5lci5vd25lckRvY3VtZW50fHxtZS5jb250YWluZXIuZG9jdW1lbnQ7c25hcHBsdWdpbj1kb2MuY3JlYXRlRWxlbWVudChcIm9iamVjdFwiKTt0cnl7c25hcHBsdWdpbi50eXBlPVwiYXBwbGljYXRpb24veC1wbHVnaW5iYWlkdXNuYXBcIn1jYXRjaChlKXtyZXR1cm59c25hcHBsdWdpbi5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotOTk5OXB4O3dpZHRoOjA7aGVpZ2h0OjA7XCIsc25hcHBsdWdpbi5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLFwiMFwiKSxzbmFwcGx1Z2luLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLFwiMFwiKSxjb250YWluZXIuYXBwZW5kQ2hpbGQoc25hcHBsdWdpbil9dXJsPW1lLmdldEFjdGlvblVybChtZS5nZXRPcHQoXCJzbmFwc2NyZWVuQWN0aW9uTmFtZVwiKSksbG9jYWw9Z2V0TG9jYXRpb24odXJsKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dHJ5e3Jlcz1zbmFwcGx1Z2luLnNhdmVTbmFwc2hvdChsb2NhbC5ob3N0bmFtZSxsb2NhbC5wYXRoLGxvY2FsLnBvcnQpfWNhdGNoKGEpe3JldHVybiB2b2lkIG1lLnVpLl9kaWFsb2dzLnNuYXBzY3JlZW5EaWFsb2cub3BlbigpfW9uU3VjY2VzcyhyZXMpfSw1MCl9LHF1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIldpbmRvd3NcIiwwKSE9LTE/MDotMX19fX19KSxVRS5jb21tYW5kcy5pbnNlcnRwYXJhZ3JhcGg9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9dGhpcyxlPWQuc2VsZWN0aW9uLmdldFJhbmdlKCksZj1lLnN0YXJ0Q29udGFpbmVyO2YmJiFkb21VdGlscy5pc0JvZHkoZik7KWM9ZixmPWYucGFyZW50Tm9kZTtpZihjKXt2YXIgZz1kLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO2I/Yy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnLGMpOmMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZyxjLm5leHRTaWJsaW5nKSxkb21VdGlscy5maWxsTm9kZShkLmRvY3VtZW50LGcpLGUuc2V0U3RhcnQoZywwKS5zZXRDdXJzb3IoITEsITApfX19LFVFLnBsdWdpbi5yZWdpc3RlcihcIndlYmFwcFwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMpe3JldHVybiBjPyc8aWZyYW1lIGNsYXNzPVwiZWR1aS1mYWtlZC13ZWJhcHBcIiB0aXRsZT1cIicrYS50aXRsZSsnXCIgJysoYS5hbGlnbiYmIWEuY3NzZmxvYXQ/J2FsaWduPVwiJythLmFsaWduKydcIic6XCJcIikrKGEuY3NzZmxvYXQ/J3N0eWxlPVwiZmxvYXQ6JythLmNzc2Zsb2F0KydcIic6XCJcIikrJ3dpZHRoPVwiJythLndpZHRoKydcIiBoZWlnaHQ9XCInK2EuaGVpZ2h0KydcIiAgc2Nyb2xsaW5nPVwibm9cIiBmcmFtZWJvcmRlcj1cIjBcIiBzcmM9XCInK2EudXJsKydcIiBsb2dvX3VybCA9IFwiJythLmxvZ28rJ1wiPjwvaWZyYW1lPic6JzxpbWcgdGl0bGU9XCInK2EudGl0bGUrJ1wiIHdpZHRoPVwiJythLndpZHRoKydcIiBoZWlnaHQ9XCInK2EuaGVpZ2h0KydcIiBzcmM9XCInK2Iub3B0aW9ucy5VRURJVE9SX0hPTUVfVVJMKyd0aGVtZXMvZGVmYXVsdC9pbWFnZXMvc3BhY2VyLmdpZlwiIF9sb2dvX3VybD1cIicrYS5sb2dvKydcIiBzdHlsZT1cImJhY2tncm91bmQ6dXJsKCcrYS5sb2dvKycpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyOyBib3JkZXI6MXB4IHNvbGlkIGdyYXk7XCIgY2xhc3M9XCJlZHVpLWZha2VkLXdlYmFwcFwiIF91cmw9XCInK2EudXJsKydcIiAnKyhhLmFsaWduJiYhYS5jc3NmbG9hdD8nYWxpZ249XCInK2EuYWxpZ24rJ1wiJzpcIlwiKSsoYS5jc3NmbG9hdD8nc3R5bGU9XCJmbG9hdDonK2EuY3NzZmxvYXQrJ1wiJzpcIlwiKStcIi8+XCJ9dmFyIGI9dGhpcztyZXR1cm57b3V0cHV0UnVsZTpmdW5jdGlvbihiKXt1dGlscy5lYWNoKGIuZ2V0Tm9kZXNCeVRhZ05hbWUoXCJpbWdcIiksZnVuY3Rpb24oYil7dmFyIGM7aWYoXCJlZHVpLWZha2VkLXdlYmFwcFwiPT1iLmdldEF0dHIoXCJjbGFzc1wiKSl7Yz1hKHt0aXRsZTpiLmdldEF0dHIoXCJ0aXRsZVwiKSx3aWR0aDpiLmdldEF0dHIoXCJ3aWR0aFwiKSxoZWlnaHQ6Yi5nZXRBdHRyKFwiaGVpZ2h0XCIpLGFsaWduOmIuZ2V0QXR0cihcImFsaWduXCIpLGNzc2Zsb2F0OmIuZ2V0U3R5bGUoXCJmbG9hdFwiKSx1cmw6Yi5nZXRBdHRyKFwiX3VybFwiKSxsb2dvOmIuZ2V0QXR0cihcIl9sb2dvX3VybFwiKX0sITApO3ZhciBkPVVFLnVOb2RlLmNyZWF0ZUVsZW1lbnQoYyk7Yi5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkLGIpfX0pfSxpbnB1dFJ1bGU6ZnVuY3Rpb24oYil7dXRpbHMuZWFjaChiLmdldE5vZGVzQnlUYWdOYW1lKFwiaWZyYW1lXCIpLGZ1bmN0aW9uKGIpe2lmKFwiZWR1aS1mYWtlZC13ZWJhcHBcIj09Yi5nZXRBdHRyKFwiY2xhc3NcIikpe3ZhciBjPVVFLnVOb2RlLmNyZWF0ZUVsZW1lbnQoYSh7dGl0bGU6Yi5nZXRBdHRyKFwidGl0bGVcIiksd2lkdGg6Yi5nZXRBdHRyKFwid2lkdGhcIiksaGVpZ2h0OmIuZ2V0QXR0cihcImhlaWdodFwiKSxhbGlnbjpiLmdldEF0dHIoXCJhbGlnblwiKSxjc3NmbG9hdDpiLmdldFN0eWxlKFwiZmxvYXRcIiksdXJsOmIuZ2V0QXR0cihcInNyY1wiKSxsb2dvOmIuZ2V0QXR0cihcImxvZ29fdXJsXCIpfSkpO2IucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoYyxiKX19KX0sY29tbWFuZHM6e3dlYmFwcDp7ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLGU9YSh1dGlscy5leHRlbmQoYyx7YWxpZ246XCJub25lXCJ9KSwhMSk7ZC5leGVjQ29tbWFuZChcImluc2VydGh0bWxcIixlKX0scXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5nZXRDbG9zZWROb2RlKCksYz1iJiZcImVkdWktZmFrZWQtd2ViYXBwXCI9PWIuY2xhc3NOYW1lO3JldHVybiBjPzE6MH19fX19KSxVRS5wbHVnaW5zLnRlbXBsYXRlPWZ1bmN0aW9uKCl7VUUuY29tbWFuZHMudGVtcGxhdGU9e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7Yi5odG1sJiZ0aGlzLmV4ZWNDb21tYW5kKFwiaW5zZXJ0aHRtbFwiLGIuaHRtbCl9fSx0aGlzLmFkZExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbihhLGIpe3ZhciBjPWIudGFyZ2V0fHxiLnNyY0VsZW1lbnQsZD10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGU9ZG9tVXRpbHMuZmluZFBhcmVudChjLGZ1bmN0aW9uKGEpe2lmKGEuY2xhc3NOYW1lJiZkb21VdGlscy5oYXNDbGFzcyhhLFwidWVfdFwiKSlyZXR1cm4gYX0sITApO2UmJmQuc2VsZWN0Tm9kZShlKS5zaHJpbmtCb3VuZGFyeSgpLnNlbGVjdCgpfSksdGhpcy5hZGRMaXN0ZW5lcihcImtleWRvd25cIixmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7aWYoIWMuY29sbGFwc2VkJiYhKGIuY3RybEtleXx8Yi5tZXRhS2V5fHxiLnNoaWZ0S2V5fHxiLmFsdEtleSkpe3ZhciBkPWRvbVV0aWxzLmZpbmRQYXJlbnQoYy5zdGFydENvbnRhaW5lcixmdW5jdGlvbihhKXtpZihhLmNsYXNzTmFtZSYmZG9tVXRpbHMuaGFzQ2xhc3MoYSxcInVlX3RcIikpcmV0dXJuIGF9LCEwKTtkJiZkb21VdGlscy5yZW1vdmVDbGFzc2VzKGQsW1widWVfdFwiXSl9fSl9LFVFLnBsdWdpbi5yZWdpc3RlcihcIm11c2ljXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYyxkLGUsZixnKXtyZXR1cm4gZz8nPGVtYmVkIHR5cGU9XCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiIGNsYXNzPVwiZWR1aS1mYWtlZC1tdXNpY1wiIHBsdWdpbnNwYWdlPVwiaHR0cDovL3d3dy5tYWNyb21lZGlhLmNvbS9nby9nZXRmbGFzaHBsYXllclwiIHNyYz1cIicrYSsnXCIgd2lkdGg9XCInK2MrJ1wiIGhlaWdodD1cIicrZCsnXCIgJysoZSYmIWY/J2FsaWduPVwiJytlKydcIic6XCJcIikrKGY/J3N0eWxlPVwiZmxvYXQ6JytmKydcIic6XCJcIikrJyB3bW9kZT1cInRyYW5zcGFyZW50XCIgcGxheT1cInRydWVcIiBsb29wPVwiZmFsc2VcIiBtZW51PVwiZmFsc2VcIiBhbGxvd3NjcmlwdGFjY2Vzcz1cIm5ldmVyXCIgYWxsb3dmdWxsc2NyZWVuPVwidHJ1ZVwiID4nOlwiPGltZyBcIisoZSYmIWY/J2FsaWduPVwiJytlKydcIic6XCJcIikrKGY/J3N0eWxlPVwiZmxvYXQ6JytmKydcIic6XCJcIikrJyB3aWR0aD1cIicrYysnXCIgaGVpZ2h0PVwiJytkKydcIiBfdXJsPVwiJythKydcIiBjbGFzcz1cImVkdWktZmFrZWQtbXVzaWNcIiBzcmM9XCInK2Iub3B0aW9ucy5sYW5nUGF0aCtiLm9wdGlvbnMubGFuZysnL2ltYWdlcy9tdXNpYy5wbmdcIiAvPid9dmFyIGI9dGhpcztyZXR1cm57b3V0cHV0UnVsZTpmdW5jdGlvbihiKXt1dGlscy5lYWNoKGIuZ2V0Tm9kZXNCeVRhZ05hbWUoXCJpbWdcIiksZnVuY3Rpb24oYil7dmFyIGM7aWYoXCJlZHVpLWZha2VkLW11c2ljXCI9PWIuZ2V0QXR0cihcImNsYXNzXCIpKXt2YXIgZD1iLmdldFN0eWxlKFwiZmxvYXRcIiksZT1iLmdldEF0dHIoXCJhbGlnblwiKTtjPWEoYi5nZXRBdHRyKFwiX3VybFwiKSxiLmdldEF0dHIoXCJ3aWR0aFwiKSxiLmdldEF0dHIoXCJoZWlnaHRcIiksZSxkLCEwKTt2YXIgZj1VRS51Tm9kZS5jcmVhdGVFbGVtZW50KGMpO2IucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZixiKX19KX0saW5wdXRSdWxlOmZ1bmN0aW9uKGIpe3V0aWxzLmVhY2goYi5nZXROb2Rlc0J5VGFnTmFtZShcImVtYmVkXCIpLGZ1bmN0aW9uKGIpe2lmKFwiZWR1aS1mYWtlZC1tdXNpY1wiPT1iLmdldEF0dHIoXCJjbGFzc1wiKSl7dmFyIGM9Yi5nZXRTdHlsZShcImZsb2F0XCIpLGQ9Yi5nZXRBdHRyKFwiYWxpZ25cIik7aHRtbD1hKGIuZ2V0QXR0cihcInNyY1wiKSxiLmdldEF0dHIoXCJ3aWR0aFwiKSxiLmdldEF0dHIoXCJoZWlnaHRcIiksZCxjLCExKTt2YXIgZT1VRS51Tm9kZS5jcmVhdGVFbGVtZW50KGh0bWwpO2IucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZSxiKX19KX0sY29tbWFuZHM6e211c2ljOntleGVjQ29tbWFuZDpmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMsZT1hKGMudXJsLGMud2lkdGh8fDQwMCxjLmhlaWdodHx8OTUsXCJub25lXCIsITEpO2QuZXhlY0NvbW1hbmQoXCJpbnNlcnRodG1sXCIsZSl9LHF1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuc2VsZWN0aW9uLmdldFJhbmdlKCkuZ2V0Q2xvc2VkTm9kZSgpLGM9YiYmXCJlZHVpLWZha2VkLW11c2ljXCI9PWIuY2xhc3NOYW1lO3JldHVybiBjPzE6MH19fX19KSxVRS5wbHVnaW4ucmVnaXN0ZXIoXCJhdXRvdXBsb2FkXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksaixrPWIsbD0vaW1hZ2VcXC9cXHcrL2kudGVzdChhLnR5cGUpP1wiaW1hZ2VcIjpcImZpbGVcIixtPVwibG9hZGluZ19cIisoK25ldyBEYXRlKS50b1N0cmluZygzNik7aWYoYz1rLmdldE9wdChsK1wiRmllbGROYW1lXCIpLGQ9ay5nZXRPcHQobCtcIlVybFByZWZpeFwiKSxlPWsuZ2V0T3B0KGwrXCJNYXhTaXplXCIpLGY9ay5nZXRPcHQobCtcIkFsbG93RmlsZXNcIiksZz1rLmdldEFjdGlvblVybChrLmdldE9wdChsK1wiQWN0aW9uTmFtZVwiKSksaT1mdW5jdGlvbihhKXt2YXIgYj1rLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG0pO2ImJmRvbVV0aWxzLnJlbW92ZShiKSxrLmZpcmVFdmVudChcInNob3dtZXNzYWdlXCIse2lkOm0sY29udGVudDphLHR5cGU6XCJlcnJvclwiLHRpbWVvdXQ6NGUzfSl9LFwiaW1hZ2VcIj09bD8oaD0nPGltZyBjbGFzcz1cImxvYWRpbmdjbGFzc1wiIGlkPVwiJyttKydcIiBzcmM9XCInK2sub3B0aW9ucy50aGVtZVBhdGgray5vcHRpb25zLnRoZW1lKycvaW1hZ2VzL3NwYWNlci5naWZcIiB0aXRsZT1cIicrKGsuZ2V0TGFuZyhcImF1dG91cGxvYWQubG9hZGluZ1wiKXx8XCJcIikrJ1wiID4nLGo9ZnVuY3Rpb24oYSl7dmFyIGI9ZCthLnVybCxjPWsuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobSk7YyYmKGMuc2V0QXR0cmlidXRlKFwic3JjXCIsYiksYy5zZXRBdHRyaWJ1dGUoXCJfc3JjXCIsYiksYy5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLGEudGl0bGV8fFwiXCIpLGMuc2V0QXR0cmlidXRlKFwiYWx0XCIsYS5vcmlnaW5hbHx8XCJcIiksYy5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKSxkb21VdGlscy5yZW1vdmVDbGFzc2VzKGMsXCJsb2FkaW5nY2xhc3NcIikpfSk6KGg9JzxwPjxpbWcgY2xhc3M9XCJsb2FkaW5nY2xhc3NcIiBpZD1cIicrbSsnXCIgc3JjPVwiJytrLm9wdGlvbnMudGhlbWVQYXRoK2sub3B0aW9ucy50aGVtZSsnL2ltYWdlcy9zcGFjZXIuZ2lmXCIgdGl0bGU9XCInKyhrLmdldExhbmcoXCJhdXRvdXBsb2FkLmxvYWRpbmdcIil8fFwiXCIpKydcIiA+PC9wPicsaj1mdW5jdGlvbihhKXt2YXIgYj1kK2EudXJsLGM9ay5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChtKSxlPWsuc2VsZWN0aW9uLmdldFJhbmdlKCksZj1lLmNyZWF0ZUJvb2ttYXJrKCk7ZS5zZWxlY3ROb2RlKGMpLnNlbGVjdCgpLGsuZXhlY0NvbW1hbmQoXCJpbnNlcnRmaWxlXCIse3VybDpifSksZS5tb3ZlVG9Cb29rbWFyayhmKS5zZWxlY3QoKX0pLGsuZXhlY0NvbW1hbmQoXCJpbnNlcnRodG1sXCIsaCksIWsuZ2V0T3B0KGwrXCJBY3Rpb25OYW1lXCIpKXJldHVybiB2b2lkIGkoay5nZXRMYW5nKFwiYXV0b3VwbG9hZC5lcnJvckxvYWRDb25maWdcIikpO2lmKGEuc2l6ZT5lKXJldHVybiB2b2lkIGkoay5nZXRMYW5nKFwiYXV0b3VwbG9hZC5leGNlZWRTaXplRXJyb3JcIikpO3ZhciBuPWEubmFtZT9hLm5hbWUuc3Vic3RyKGEubmFtZS5sYXN0SW5kZXhPZihcIi5cIikpOlwiXCI7aWYobiYmXCJpbWFnZVwiIT1sfHxmJiYoZi5qb2luKFwiXCIpK1wiLlwiKS5pbmRleE9mKG4udG9Mb3dlckNhc2UoKStcIi5cIik9PS0xKXJldHVybiB2b2lkIGkoay5nZXRMYW5nKFwiYXV0b3VwbG9hZC5leGNlZWRUeXBlRXJyb3JcIikpO3ZhciBvPW5ldyBYTUxIdHRwUmVxdWVzdCxwPW5ldyBGb3JtRGF0YSxxPXV0aWxzLnNlcmlhbGl6ZVBhcmFtKGsucXVlcnlDb21tYW5kVmFsdWUoXCJzZXJ2ZXJwYXJhbVwiKSl8fFwiXCIscj11dGlscy5mb3JtYXRVcmwoZysoZy5pbmRleE9mKFwiP1wiKT09LTE/XCI/XCI6XCImXCIpK3EpO3AuYXBwZW5kKGMsYSxhLm5hbWV8fFwiYmxvYi5cIithLnR5cGUuc3Vic3RyKFwiaW1hZ2UvXCIubGVuZ3RoKSkscC5hcHBlbmQoXCJ0eXBlXCIsXCJhamF4XCIpLG8ub3BlbihcInBvc3RcIixyLCEwKSxvLnNldFJlcXVlc3RIZWFkZXIoXCJYLVJlcXVlc3RlZC1XaXRoXCIsXCJYTUxIdHRwUmVxdWVzdFwiKSxvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oYSl7dHJ5e3ZhciBiPW5ldyBGdW5jdGlvbihcInJldHVybiBcIit1dGlscy50cmltKGEudGFyZ2V0LnJlc3BvbnNlKSkoKTtcIlNVQ0NFU1NcIj09Yi5zdGF0ZSYmYi51cmw/aihiKTppKGIuc3RhdGUpfWNhdGNoKGMpe2koay5nZXRMYW5nKFwiYXV0b3VwbG9hZC5sb2FkRXJyb3JcIikpfX0pLG8uc2VuZChwKX1mdW5jdGlvbiBiKGEpe3JldHVybiBhLmNsaXBib2FyZERhdGEmJmEuY2xpcGJvYXJkRGF0YS5pdGVtcyYmMT09YS5jbGlwYm9hcmREYXRhLml0ZW1zLmxlbmd0aCYmL15pbWFnZVxcLy8udGVzdChhLmNsaXBib2FyZERhdGEuaXRlbXNbMF0udHlwZSk/YS5jbGlwYm9hcmREYXRhLml0ZW1zOm51bGx9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5kYXRhVHJhbnNmZXImJmEuZGF0YVRyYW5zZmVyLmZpbGVzP2EuZGF0YVRyYW5zZmVyLmZpbGVzOm51bGx9cmV0dXJue291dHB1dFJ1bGU6ZnVuY3Rpb24oYSl7dXRpbHMuZWFjaChhLmdldE5vZGVzQnlUYWdOYW1lKFwiaW1nXCIpLGZ1bmN0aW9uKGEpey9cXGIobG9hZGVycm9yY2xhc3MpfChibG9hZGVycm9yY2xhc3MpXFxiLy50ZXN0KGEuZ2V0QXR0cihcImNsYXNzXCIpKSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSksdXRpbHMuZWFjaChhLmdldE5vZGVzQnlUYWdOYW1lKFwicFwiKSxmdW5jdGlvbihhKXsvXFxibG9hZHBhcmFcXGIvLnRlc3QoYS5nZXRBdHRyKFwiY2xhc3NcIikpJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9KX0sYmluZEV2ZW50czp7cmVhZHk6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpczt3aW5kb3cuRm9ybURhdGEmJndpbmRvdy5GaWxlUmVhZGVyJiYoZG9tVXRpbHMub24oZS5ib2R5LFwicGFzdGUgZHJvcFwiLGZ1bmN0aW9uKGQpe3ZhciBmLGc9ITE7aWYoZj1cInBhc3RlXCI9PWQudHlwZT9iKGQpOmMoZCkpe2Zvcih2YXIgaCxpPWYubGVuZ3RoO2ktLTspaD1mW2ldLGguZ2V0QXNGaWxlJiYoaD1oLmdldEFzRmlsZSgpKSxoJiZoLnNpemU+MCYmKGEoaCxlKSxnPSEwKTtnJiZkLnByZXZlbnREZWZhdWx0KCl9fSksZG9tVXRpbHMub24oZS5ib2R5LFwiZHJhZ292ZXJcIixmdW5jdGlvbihhKXtcIkZpbGVzXCI9PWEuZGF0YVRyYW5zZmVyLnR5cGVzWzBdJiZhLnByZXZlbnREZWZhdWx0KCl9KSx1dGlscy5jc3NSdWxlKFwibG9hZGluZ1wiLFwiLmxvYWRpbmdjbGFzc3tkaXNwbGF5OmlubGluZS1ibG9jaztjdXJzb3I6ZGVmYXVsdDtiYWNrZ3JvdW5kOiB1cmwoJ1wiK3RoaXMub3B0aW9ucy50aGVtZVBhdGgrdGhpcy5vcHRpb25zLnRoZW1lK1wiL2ltYWdlcy9sb2FkaW5nLmdpZicpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyIHRyYW5zcGFyZW50O2JvcmRlcjoxcHggc29saWQgI2NjY2NjYzttYXJnaW4tbGVmdDoxcHg7aGVpZ2h0OiAyMnB4O3dpZHRoOiAyMnB4O31cXG4ubG9hZGVycm9yY2xhc3N7ZGlzcGxheTppbmxpbmUtYmxvY2s7Y3Vyc29yOmRlZmF1bHQ7YmFja2dyb3VuZDogdXJsKCdcIit0aGlzLm9wdGlvbnMudGhlbWVQYXRoK3RoaXMub3B0aW9ucy50aGVtZStcIi9pbWFnZXMvbG9hZGVycm9yLnBuZycpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyIHRyYW5zcGFyZW50O2JvcmRlcjoxcHggc29saWQgI2NjY2NjYzttYXJnaW4tcmlnaHQ6MXB4O2hlaWdodDogMjJweDt3aWR0aDogMjJweDt9XCIsdGhpcy5kb2N1bWVudCkpfX19fSksVUUucGx1Z2luLnJlZ2lzdGVyKFwiYXV0b3NhdmVcIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGY7aWYoIShuZXcgRGF0ZS1jPGQpKXtpZighYS5oYXNDb250ZW50cygpKXJldHVybiB2b2lkKGUmJmIucmVtb3ZlUHJlZmVyZW5jZXMoZSkpO2M9bmV3IERhdGUsYS5fc2F2ZUZsYWc9bnVsbCxmPWIuYm9keS5pbm5lckhUTUwsYS5maXJlRXZlbnQoXCJiZWZvcmVhdXRvc2F2ZVwiLHtjb250ZW50OmZ9KSE9PSExJiYoYi5zZXRQcmVmZXJlbmNlcyhlLGYpLGEuZmlyZUV2ZW50KFwiYWZ0ZXJhdXRvc2F2ZVwiLHtjb250ZW50OmZ9KSl9fXZhciBiPXRoaXMsYz1uZXcgRGF0ZSxkPTIwLGU9bnVsbDtyZXR1cm57ZGVmYXVsdE9wdGlvbnM6e3NhdmVJbnRlcnZhbDo1MDB9LGJpbmRFdmVudHM6e3JlYWR5OmZ1bmN0aW9uKCl7dmFyIGE9XCItZHJhZnRzLWRhdGFcIixjPW51bGw7Yz1iLmtleT9iLmtleSthOihiLmNvbnRhaW5lci5wYXJlbnROb2RlLmlkfHxcInVlLWNvbW1vblwiKSthLGU9KGxvY2F0aW9uLnByb3RvY29sK2xvY2F0aW9uLmhvc3QrbG9jYXRpb24ucGF0aG5hbWUpLnJlcGxhY2UoL1suOlxcL10vZyxcIl9cIikrY30sY29udGVudGNoYW5nZTpmdW5jdGlvbigpe2UmJihiLl9zYXZlRmxhZyYmd2luZG93LmNsZWFyVGltZW91dChiLl9zYXZlRmxhZyksYi5vcHRpb25zLnNhdmVJbnRlcnZhbD4wP2IuX3NhdmVGbGFnPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShiKX0sYi5vcHRpb25zLnNhdmVJbnRlcnZhbCk6YShiKSl9fSxjb21tYW5kczp7Y2xlYXJsb2NhbGRhdGE6e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYyl7ZSYmYi5nZXRQcmVmZXJlbmNlcyhlKSYmYi5yZW1vdmVQcmVmZXJlbmNlcyhlKX0sbm90TmVlZFVuZG86ITAsaWdub3JlQ29udGVudENoYW5nZTohMH0sZ2V0bG9jYWxkYXRhOntleGVjQ29tbWFuZDpmdW5jdGlvbihhLGMpe3JldHVybiBlP2IuZ2V0UHJlZmVyZW5jZXMoZSl8fFwiXCI6XCJcIn0sbm90TmVlZFVuZG86ITAsaWdub3JlQ29udGVudENoYW5nZTohMH0sZHJhZnRzOntleGVjQ29tbWFuZDpmdW5jdGlvbihhLGMpe2UmJihiLmJvZHkuaW5uZXJIVE1MPWIuZ2V0UHJlZmVyZW5jZXMoZSl8fFwiPHA+XCIrZG9tVXRpbHMuZmlsbEh0bWwrXCI8L3A+XCIsYi5mb2N1cyghMCkpfSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBlP251bGw9PT1iLmdldFByZWZlcmVuY2VzKGUpPy0xOjA6LTF9LG5vdE5lZWRVbmRvOiEwLGlnbm9yZUNvbnRlbnRDaGFuZ2U6ITB9fX19KSxVRS5wbHVnaW4ucmVnaXN0ZXIoXCJjaGFydHNcIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9bnVsbCxjPTA7aWYoYS5yb3dzLmxlbmd0aDwyKXJldHVybiExO2lmKGEucm93c1swXS5jZWxscy5sZW5ndGg8MilyZXR1cm4hMTtiPWEucm93c1swXS5jZWxscyxjPWIubGVuZ3RoO2Zvcih2YXIgZCxlPTA7ZD1iW2VdO2UrKylpZihcInRoXCIhPT1kLnRhZ05hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4hMTtmb3IodmFyIGYsZT0xO2Y9YS5yb3dzW2VdO2UrKyl7aWYoZi5jZWxscy5sZW5ndGghPWMpcmV0dXJuITE7aWYoXCJ0aFwiIT09Zi5jZWxsc1swXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuITE7Zm9yKHZhciBkLGc9MTtkPWYuY2VsbHNbZ107ZysrKXt2YXIgaD11dGlscy50cmltKGQuaW5uZXJUZXh0fHxkLnRleHRDb250ZW50fHxcIlwiKTtpZihoPWgucmVwbGFjZShuZXcgUmVnRXhwKFVFLmRvbS5kb21VdGlscy5maWxsQ2hhcixcImdcIiksXCJcIikucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKSwhL15cXGQqXFwuP1xcZCskLy50ZXN0KGgpKXJldHVybiExfX1yZXR1cm4hMH12YXIgYj10aGlzO3JldHVybntiaW5kRXZlbnRzOntjaGFydHNlcnJvcjpmdW5jdGlvbigpe319LGNvbW1hbmRzOntjaGFydHM6e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGU9ZG9tVXRpbHMuZmluZFBhcmVudEJ5VGFnTmFtZSh0aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLnN0YXJ0Q29udGFpbmVyLFwidGFibGVcIiwhMCksZj1bXSxnPXt9O2lmKCFlKXJldHVybiExO2lmKCFhKGUpKXJldHVybiBiLmZpcmVFdmVudChcImNoYXJ0c2Vycm9yXCIpLCExO2cudGl0bGU9ZC50aXRsZXx8XCJcIixnLnN1YlRpdGxlPWQuc3ViVGl0bGV8fFwiXCIsZy54VGl0bGU9ZC54VGl0bGV8fFwiXCIsZy55VGl0bGU9ZC55VGl0bGV8fFwiXCIsZy5zdWZmaXg9ZC5zdWZmaXh8fFwiXCIsZy50aXA9ZC50aXB8fFwiXCIsZy5kYXRhRm9ybWF0PWQudGFibGVEYXRhRm9ybWF0fHxcIlwiLGcuY2hhcnRUeXBlPWQuY2hhcnRUeXBlfHwwO2Zvcih2YXIgaCBpbiBnKWcuaGFzT3duUHJvcGVydHkoaCkmJmYucHVzaChoK1wiOlwiK2dbaF0pO2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1jaGFydFwiLGYuam9pbihcIjtcIikpLGRvbVV0aWxzLmFkZENsYXNzKGUsXCJlZHVpLWNoYXJ0cy10YWJsZVwiKX0scXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oYixjKXtcbnZhciBkPWRvbVV0aWxzLmZpbmRQYXJlbnRCeVRhZ05hbWUodGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5zdGFydENvbnRhaW5lcixcInRhYmxlXCIsITApO3JldHVybiBkJiZhKGQpPzA6LTF9fX0saW5wdXRSdWxlOmZ1bmN0aW9uKGEpe3V0aWxzLmVhY2goYS5nZXROb2Rlc0J5VGFnTmFtZShcInRhYmxlXCIpLGZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEuZ2V0QXR0cihcImRhdGEtY2hhcnRcIikmJmEuc2V0QXR0cihcInN0eWxlXCIpfSl9LG91dHB1dFJ1bGU6ZnVuY3Rpb24oYSl7dXRpbHMuZWFjaChhLmdldE5vZGVzQnlUYWdOYW1lKFwidGFibGVcIiksZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5nZXRBdHRyKFwiZGF0YS1jaGFydFwiKSYmYS5zZXRBdHRyKFwic3R5bGVcIixcImRpc3BsYXk6IG5vbmU7XCIpfSl9fX0pLFVFLnBsdWdpbi5yZWdpc3RlcihcInNlY3Rpb25cIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dGhpcy50YWc9XCJcIix0aGlzLmxldmVsPS0xLHRoaXMuZG9tPW51bGwsdGhpcy5uZXh0U2VjdGlvbj1udWxsLHRoaXMucHJldmlvdXNTZWN0aW9uPW51bGwsdGhpcy5wYXJlbnRTZWN0aW9uPW51bGwsdGhpcy5zdGFydEFkZHJlc3M9W10sdGhpcy5lbmRBZGRyZXNzPVtdLHRoaXMuY2hpbGRyZW49W119ZnVuY3Rpb24gYihiKXt2YXIgYz1uZXcgYTtyZXR1cm4gdXRpbHMuZXh0ZW5kKGMsYil9ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgYz1iLGQ9MDtkPGEubGVuZ3RoO2QrKyl7aWYoIWMuY2hpbGROb2RlcylyZXR1cm4gbnVsbDtjPWMuY2hpbGROb2Rlc1thW2RdXX1yZXR1cm4gY312YXIgZD10aGlzO3JldHVybntiaW5kTXVsdGlFdmVudHM6e3R5cGU6XCJhZnRlcnNldGNvbnRlbnQgYWZ0ZXJzY2VuY2VyZXN0b3JlXCIsaGFuZGxlcjpmdW5jdGlvbigpe2QuZmlyZUV2ZW50KFwidXBkYXRlU2VjdGlvbnNcIil9fSxiaW5kRXZlbnRzOntyZWFkeTpmdW5jdGlvbigpe2QuZmlyZUV2ZW50KFwidXBkYXRlU2VjdGlvbnNcIiksZG9tVXRpbHMub24oZC5ib2R5LFwiZHJvcCBwYXN0ZVwiLGZ1bmN0aW9uKCl7ZC5maXJlRXZlbnQoXCJ1cGRhdGVTZWN0aW9uc1wiKX0pfSxhZnRlcmV4ZWNjb21tYW5kOmZ1bmN0aW9uKGEsYil7XCJwYXJhZ3JhcGhcIj09YiYmZC5maXJlRXZlbnQoXCJ1cGRhdGVTZWN0aW9uc1wiKX0sa2V5dXA6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtpZigxIT1kLmNvbGxhcHNlZCljLmZpcmVFdmVudChcInVwZGF0ZVNlY3Rpb25zXCIpO2Vsc2V7dmFyIGU9Yi5rZXlDb2RlfHxiLndoaWNoOzEzIT1lJiY4IT1lJiY0NiE9ZXx8Yy5maXJlRXZlbnQoXCJ1cGRhdGVTZWN0aW9uc1wiKX19fSxjb21tYW5kczp7Z2V0c2VjdGlvbnM6e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYyl7ZnVuY3Rpb24gZChhKXtmb3IodmFyIGI9MDtiPGYubGVuZ3RoO2IrKylpZihmW2JdKGEpKXJldHVybiBiO3JldHVybi0xfWZ1bmN0aW9uIGUoYSxjKXtmb3IodmFyIGYsZyxpLGs9bnVsbCxsPWEuY2hpbGROb2RlcyxtPTAsbj1sLmxlbmd0aDttPG47bSsrKWlmKGk9bFttXSxmPWQoaSksZj49MCl7dmFyIG89aC5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5zZWxlY3ROb2RlKGkpLmNyZWF0ZUFkZHJlc3MoITApLnN0YXJ0QWRkcmVzcyxwPWIoe3RhZzppLnRhZ05hbWUsdGl0bGU6aS5pbm5lclRleHR8fGkudGV4dENvbnRlbnR8fFwiXCIsbGV2ZWw6Zixkb206aSxzdGFydEFkZHJlc3M6dXRpbHMuY2xvbmUobyxbXSksZW5kQWRkcmVzczp1dGlscy5jbG9uZShvLFtdKSxjaGlsZHJlbjpbXX0pO2ZvcihqLm5leHRTZWN0aW9uPXAscC5wcmV2aW91c1NlY3Rpb249aixnPWo7Zjw9Zy5sZXZlbDspZz1nLnBhcmVudFNlY3Rpb247cC5wYXJlbnRTZWN0aW9uPWcsZy5jaGlsZHJlbi5wdXNoKHApLGs9aj1wfWVsc2UgMT09PWkubm9kZVR5cGUmJmUoaSxjKSxrJiZrLmVuZEFkZHJlc3Nbay5lbmRBZGRyZXNzLmxlbmd0aC0xXSsrfWZvcih2YXIgZj1jfHxbXCJoMVwiLFwiaDJcIixcImgzXCIsXCJoNFwiLFwiaDVcIixcImg2XCJdLGc9MDtnPGYubGVuZ3RoO2crKylcInN0cmluZ1wiPT10eXBlb2YgZltnXT9mW2ddPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYi50YWdOYW1lPT1hLnRvVXBwZXJDYXNlKCl9fShmW2ddKTpcImZ1bmN0aW9uXCIhPXR5cGVvZiBmW2ddJiYoZltnXT1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbH0pO3ZhciBoPXRoaXMsaT1iKHtsZXZlbDotMSx0aXRsZTpcInJvb3RcIn0pLGo9aTtyZXR1cm4gZShoLmJvZHksaSksaX0sbm90TmVlZFVuZG86ITB9LG1vdmVzZWN0aW9uOntleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIsZCxlKXtmdW5jdGlvbiBmKGEsYixjKXtmb3IodmFyIGQ9ITEsZT0hMSxmPTA7ZjxhLmxlbmd0aCYmIShmPj1jLmxlbmd0aCk7ZisrKXtpZihjW2ZdPmFbZl0pe2Q9ITA7YnJlYWt9aWYoY1tmXTxhW2ZdKWJyZWFrfWZvcih2YXIgZj0wO2Y8Yi5sZW5ndGgmJiEoZj49Yy5sZW5ndGgpO2YrKyl7aWYoY1tmXTxhW2ZdKXtlPSEwO2JyZWFrfWlmKGNbZl0+YVtmXSlicmVha31yZXR1cm4gZCYmZX12YXIgZyxoLGk9dGhpcztpZihiJiZkJiZkLmxldmVsIT0tMSYmKGc9ZT9kLmVuZEFkZHJlc3M6ZC5zdGFydEFkZHJlc3MsaD1jKGcsaS5ib2R5KSxnJiZoJiYhZihiLnN0YXJ0QWRkcmVzcyxiLmVuZEFkZHJlc3MsZykpKXt2YXIgaixrLGw9YyhiLnN0YXJ0QWRkcmVzcyxpLmJvZHkpLG09YyhiLmVuZEFkZHJlc3MsaS5ib2R5KTtpZihlKWZvcihqPW07aiYmIShkb21VdGlscy5nZXRQb3NpdGlvbihsLGopJmRvbVV0aWxzLlBPU0lUSU9OX0ZPTExPV0lORykmJihrPWoucHJldmlvdXNTaWJsaW5nLGRvbVV0aWxzLmluc2VydEFmdGVyKGgsaiksaiE9bCk7KWo9aztlbHNlIGZvcihqPWw7aiYmIShkb21VdGlscy5nZXRQb3NpdGlvbihqLG0pJmRvbVV0aWxzLlBPU0lUSU9OX0ZPTExPV0lORykmJihrPWoubmV4dFNpYmxpbmcsaC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqLGgpLGohPW0pOylqPWs7aS5maXJlRXZlbnQoXCJ1cGRhdGVTZWN0aW9uc1wiKX19fSxkZWxldGVzZWN0aW9uOntleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtmb3IodmFyIGI9ZS5ib2R5LGM9MDtjPGEubGVuZ3RoO2MrKyl7aWYoIWIuY2hpbGROb2RlcylyZXR1cm4gbnVsbDtiPWIuY2hpbGROb2Rlc1thW2NdXX1yZXR1cm4gYn12YXIgZT10aGlzO2lmKGIpe3ZhciBmLGc9ZChiLnN0YXJ0QWRkcmVzcyksaD1kKGIuZW5kQWRkcmVzcyksaT1nO2lmKGMpZG9tVXRpbHMucmVtb3ZlKGkpO2Vsc2UgZm9yKDtpJiZkb21VdGlscy5pbkRvYyhoLGUuZG9jdW1lbnQpJiYhKGRvbVV0aWxzLmdldFBvc2l0aW9uKGksaCkmZG9tVXRpbHMuUE9TSVRJT05fRk9MTE9XSU5HKTspZj1pLm5leHRTaWJsaW5nLGRvbVV0aWxzLnJlbW92ZShpKSxpPWY7ZS5maXJlRXZlbnQoXCJ1cGRhdGVTZWN0aW9uc1wiKX19fSxzZWxlY3RzZWN0aW9uOntleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIpe2lmKCFiJiYhYi5kb20pcmV0dXJuITE7dmFyIGM9dGhpcyxkPWMuc2VsZWN0aW9uLmdldFJhbmdlKCksZT17c3RhcnRBZGRyZXNzOnV0aWxzLmNsb25lKGIuc3RhcnRBZGRyZXNzLFtdKSxlbmRBZGRyZXNzOnV0aWxzLmNsb25lKGIuZW5kQWRkcmVzcyxbXSl9O3JldHVybiBlLmVuZEFkZHJlc3NbZS5lbmRBZGRyZXNzLmxlbmd0aC0xXSsrLGQubW92ZVRvQWRkcmVzcyhlKS5zZWxlY3QoKS5zY3JvbGxUb1ZpZXcoKSwhMH0sbm90TmVlZFVuZG86ITB9LHNjcm9sbHRvc2VjdGlvbjp7ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYSxiKXtpZighYiYmIWIuZG9tKXJldHVybiExO3ZhciBjPXRoaXMsZD1jLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGU9e3N0YXJ0QWRkcmVzczpiLnN0YXJ0QWRkcmVzcyxlbmRBZGRyZXNzOmIuZW5kQWRkcmVzc307cmV0dXJuIGUuZW5kQWRkcmVzc1tlLmVuZEFkZHJlc3MubGVuZ3RoLTFdKyssZC5tb3ZlVG9BZGRyZXNzKGUpLnNjcm9sbFRvVmlldygpLCEwfSxub3ROZWVkVW5kbzohMH19fX0pLFVFLnBsdWdpbi5yZWdpc3RlcihcInNpbXBsZXVwbG9hZFwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3ZhciBhPWIub2Zmc2V0V2lkdGh8fDIwLGU9Yi5vZmZzZXRIZWlnaHR8fDIwLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKSxnPVwiZGlzcGxheTpibG9jazt3aWR0aDpcIithK1wicHg7aGVpZ2h0OlwiK2UrXCJweDtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyOjA7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDtmaWx0ZXI6YWxwaGEob3BhY2l0eT0wKTstbW96LW9wYWNpdHk6MDsta2h0bWwtb3BhY2l0eTogMDtvcGFjaXR5OiAwO2N1cnNvcjpwb2ludGVyO1wiO2RvbVV0aWxzLm9uKGYsXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgYixoLGksaj0oK25ldyBEYXRlKS50b1N0cmluZygzNik7aD1mLmNvbnRlbnREb2N1bWVudHx8Zi5jb250ZW50V2luZG93LmRvY3VtZW50LGk9aC5ib2R5LGI9aC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGIuaW5uZXJIVE1MPSc8Zm9ybSBpZD1cImVkdWlfZm9ybV8nK2orJ1wiIHRhcmdldD1cImVkdWlfaWZyYW1lXycraisnXCIgbWV0aG9kPVwiUE9TVFwiIGVuY3R5cGU9XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIgYWN0aW9uPVwiJytjLmdldE9wdChcInNlcnZlclVybFwiKSsnXCIgc3R5bGU9XCInK2crJ1wiPjxpbnB1dCBpZD1cImVkdWlfaW5wdXRfJytqKydcIiB0eXBlPVwiZmlsZVwiIGFjY2VwdD1cImltYWdlLypcIiBuYW1lPVwiJytjLm9wdGlvbnMuaW1hZ2VGaWVsZE5hbWUrJ1wiIHN0eWxlPVwiJytnKydcIj48L2Zvcm0+PGlmcmFtZSBpZD1cImVkdWlfaWZyYW1lXycraisnXCIgbmFtZT1cImVkdWlfaWZyYW1lXycraisnXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7d2lkdGg6MDtoZWlnaHQ6MDtib3JkZXI6MDttYXJnaW46MDtwYWRkaW5nOjA7cG9zaXRpb246YWJzb2x1dGU7XCI+PC9pZnJhbWU+JyxiLmNsYXNzTmFtZT1cImVkdWktXCIrYy5vcHRpb25zLnRoZW1lLGIuaWQ9Yy51aS5pZCtcIl9pZnJhbWV1cGxvYWRcIixpLnN0eWxlLmNzc1RleHQ9ZyxpLnN0eWxlLndpZHRoPWErXCJweFwiLGkuc3R5bGUuaGVpZ2h0PWUrXCJweFwiLGkuYXBwZW5kQ2hpbGQoYiksaS5wYXJlbnROb2RlJiYoaS5wYXJlbnROb2RlLnN0eWxlLndpZHRoPWErXCJweFwiLGkucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQ9YStcInB4XCIpO3ZhciBrPWguZ2V0RWxlbWVudEJ5SWQoXCJlZHVpX2Zvcm1fXCIraiksbD1oLmdldEVsZW1lbnRCeUlkKFwiZWR1aV9pbnB1dF9cIitqKSxtPWguZ2V0RWxlbWVudEJ5SWQoXCJlZHVpX2lmcmFtZV9cIitqKTtkb21VdGlscy5vbihsLFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dHJ5e3ZhciBlLGYsZyxoPShtLmNvbnRlbnREb2N1bWVudHx8bS5jb250ZW50V2luZG93LmRvY3VtZW50KS5ib2R5LGk9aC5pbm5lclRleHR8fGgudGV4dENvbnRlbnR8fFwiXCI7Zj1uZXcgRnVuY3Rpb24oXCJyZXR1cm4gXCIraSkoKSxlPWMub3B0aW9ucy5pbWFnZVVybFByZWZpeCtmLnVybCxcIlNVQ0NFU1NcIj09Zi5zdGF0ZSYmZi51cmw/KGc9Yy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChkKSxnLnNldEF0dHJpYnV0ZShcInNyY1wiLGUpLGcuc2V0QXR0cmlidXRlKFwiX3NyY1wiLGUpLGcuc2V0QXR0cmlidXRlKFwidGl0bGVcIixmLnRpdGxlfHxcIlwiKSxnLnNldEF0dHJpYnV0ZShcImFsdFwiLGYub3JpZ2luYWx8fFwiXCIpLGcucmVtb3ZlQXR0cmlidXRlKFwiaWRcIiksZG9tVXRpbHMucmVtb3ZlQ2xhc3NlcyhnLFwibG9hZGluZ2NsYXNzXCIpKTpiJiZiKGYuc3RhdGUpfWNhdGNoKGope2ImJmIoYy5nZXRMYW5nKFwic2ltcGxldXBsb2FkLmxvYWRFcnJvclwiKSl9ay5yZXNldCgpLGRvbVV0aWxzLnVuKG0sXCJsb2FkXCIsYSl9ZnVuY3Rpb24gYihhKXtpZihkKXt2YXIgYj1jLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGQpO2ImJmRvbVV0aWxzLnJlbW92ZShiKSxjLmZpcmVFdmVudChcInNob3dtZXNzYWdlXCIse2lkOmQsY29udGVudDphLHR5cGU6XCJlcnJvclwiLHRpbWVvdXQ6NGUzfSl9fWlmKGwudmFsdWUpe3ZhciBkPVwibG9hZGluZ19cIisoK25ldyBEYXRlKS50b1N0cmluZygzNiksZT11dGlscy5zZXJpYWxpemVQYXJhbShjLnF1ZXJ5Q29tbWFuZFZhbHVlKFwic2VydmVycGFyYW1cIikpfHxcIlwiLGY9Yy5nZXRBY3Rpb25VcmwoYy5nZXRPcHQoXCJpbWFnZUFjdGlvbk5hbWVcIikpLGc9Yy5nZXRPcHQoXCJpbWFnZUFsbG93RmlsZXNcIik7aWYoYy5mb2N1cygpLGMuZXhlY0NvbW1hbmQoXCJpbnNlcnRodG1sXCIsJzxpbWcgY2xhc3M9XCJsb2FkaW5nY2xhc3NcIiBpZD1cIicrZCsnXCIgc3JjPVwiJytjLm9wdGlvbnMudGhlbWVQYXRoK2Mub3B0aW9ucy50aGVtZSsnL2ltYWdlcy9zcGFjZXIuZ2lmXCIgdGl0bGU9XCInKyhjLmdldExhbmcoXCJzaW1wbGV1cGxvYWQubG9hZGluZ1wiKXx8XCJcIikrJ1wiID4nKSwhYy5nZXRPcHQoXCJpbWFnZUFjdGlvbk5hbWVcIikpcmV0dXJuIHZvaWQgZXJyb3JIYW5kbGVyKGMuZ2V0TGFuZyhcImF1dG91cGxvYWQuZXJyb3JMb2FkQ29uZmlnXCIpKTt2YXIgaD1sLnZhbHVlLGk9aD9oLnN1YnN0cihoLmxhc3RJbmRleE9mKFwiLlwiKSk6XCJcIjtpZighaXx8ZyYmKGcuam9pbihcIlwiKStcIi5cIikuaW5kZXhPZihpLnRvTG93ZXJDYXNlKCkrXCIuXCIpPT0tMSlyZXR1cm4gdm9pZCBiKGMuZ2V0TGFuZyhcInNpbXBsZXVwbG9hZC5leGNlZWRUeXBlRXJyb3JcIikpO2RvbVV0aWxzLm9uKG0sXCJsb2FkXCIsYSksay5hY3Rpb249dXRpbHMuZm9ybWF0VXJsKGYrKGYuaW5kZXhPZihcIj9cIik9PS0xP1wiP1wiOlwiJlwiKStlKSxrLnN1Ym1pdCgpfX0pO3ZhciBuO2MuYWRkTGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbigpe2NsZWFyVGltZW91dChuKSxuPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYT1jLnF1ZXJ5Q29tbWFuZFN0YXRlKFwic2ltcGxldXBsb2FkXCIpO2E9PS0xP2wuZGlzYWJsZWQ9XCJkaXNhYmxlZFwiOmwuZGlzYWJsZWQ9ITF9LDQwMCl9KSxkPSEwfSksZi5zdHlsZS5jc3NUZXh0PWcsYi5hcHBlbmRDaGlsZChmKX12YXIgYixjPXRoaXMsZD0hMTtyZXR1cm57YmluZEV2ZW50czp7cmVhZHk6ZnVuY3Rpb24oKXt1dGlscy5jc3NSdWxlKFwibG9hZGluZ1wiLFwiLmxvYWRpbmdjbGFzc3tkaXNwbGF5OmlubGluZS1ibG9jaztjdXJzb3I6ZGVmYXVsdDtiYWNrZ3JvdW5kOiB1cmwoJ1wiK3RoaXMub3B0aW9ucy50aGVtZVBhdGgrdGhpcy5vcHRpb25zLnRoZW1lK1wiL2ltYWdlcy9sb2FkaW5nLmdpZicpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyIHRyYW5zcGFyZW50O2JvcmRlcjoxcHggc29saWQgI2NjY2NjYzttYXJnaW4tcmlnaHQ6MXB4O2hlaWdodDogMjJweDt3aWR0aDogMjJweDt9XFxuLmxvYWRlcnJvcmNsYXNze2Rpc3BsYXk6aW5saW5lLWJsb2NrO2N1cnNvcjpkZWZhdWx0O2JhY2tncm91bmQ6IHVybCgnXCIrdGhpcy5vcHRpb25zLnRoZW1lUGF0aCt0aGlzLm9wdGlvbnMudGhlbWUrXCIvaW1hZ2VzL2xvYWRlcnJvci5wbmcnKSBuby1yZXBlYXQgY2VudGVyIGNlbnRlciB0cmFuc3BhcmVudDtib3JkZXI6MXB4IHNvbGlkICNjY2NjY2M7bWFyZ2luLXJpZ2h0OjFweDtoZWlnaHQ6IDIycHg7d2lkdGg6IDIycHg7fVwiLHRoaXMuZG9jdW1lbnQpfSxzaW1wbGV1cGxvYWRidG5yZWFkeTpmdW5jdGlvbihkLGUpe2I9ZSxjLmFmdGVyQ29uZmlnUmVhZHkoYSl9fSxvdXRwdXRSdWxlOmZ1bmN0aW9uKGEpe3V0aWxzLmVhY2goYS5nZXROb2Rlc0J5VGFnTmFtZShcImltZ1wiKSxmdW5jdGlvbihhKXsvXFxiKGxvYWRlcnJvcmNsYXNzKXwoYmxvYWRlcnJvcmNsYXNzKVxcYi8udGVzdChhLmdldEF0dHIoXCJjbGFzc1wiKSkmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pfSxjb21tYW5kczp7c2ltcGxldXBsb2FkOntxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBkPzA6LTF9fX19fSksVUUucGx1Z2luLnJlZ2lzdGVyKFwic2VydmVycGFyYW1cIixmdW5jdGlvbigpe3ZhciBhPXt9O3JldHVybntjb21tYW5kczp7c2VydmVycGFyYW06e2V4ZWNDb21tYW5kOmZ1bmN0aW9uKGIsYyxkKXt2b2lkIDA9PT1jfHxudWxsPT09Yz9hPXt9OnV0aWxzLmlzU3RyaW5nKGMpP3ZvaWQgMD09PWR8fG51bGw9PT1kP2RlbGV0ZSBhW2NdOmFbY109ZDp1dGlscy5pc09iamVjdChjKT91dGlscy5leHRlbmQoYSxjLCEwKTp1dGlscy5pc0Z1bmN0aW9uKGMpJiZ1dGlscy5leHRlbmQoYSxjKCksITApfSxxdWVyeUNvbW1hbmRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiBhfHx7fX19fX19KSxVRS5wbHVnaW4ucmVnaXN0ZXIoXCJpbnNlcnRmaWxlXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBiPWEuc3Vic3RyKGEubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCksYz17cmFyOlwiaWNvbl9yYXIuZ2lmXCIsemlwOlwiaWNvbl9yYXIuZ2lmXCIsdGFyOlwiaWNvbl9yYXIuZ2lmXCIsZ3o6XCJpY29uX3Jhci5naWZcIixiejI6XCJpY29uX3Jhci5naWZcIixkb2M6XCJpY29uX2RvYy5naWZcIixkb2N4OlwiaWNvbl9kb2MuZ2lmXCIscGRmOlwiaWNvbl9wZGYuZ2lmXCIsbXAzOlwiaWNvbl9tcDMuZ2lmXCIseGxzOlwiaWNvbl94bHMuZ2lmXCIsY2htOlwiaWNvbl9jaG0uZ2lmXCIscHB0OlwiaWNvbl9wcHQuZ2lmXCIscHB0eDpcImljb25fcHB0LmdpZlwiLGF2aTpcImljb25fbXYuZ2lmXCIscm12YjpcImljb25fbXYuZ2lmXCIsd212OlwiaWNvbl9tdi5naWZcIixmbHY6XCJpY29uX212LmdpZlwiLHN3ZjpcImljb25fbXYuZ2lmXCIscm06XCJpY29uX212LmdpZlwiLGV4ZTpcImljb25fZXhlLmdpZlwiLHBzZDpcImljb25fcHNkLmdpZlwiLHR4dDpcImljb25fdHh0LmdpZlwiLGpwZzpcImljb25fanBnLmdpZlwiLHBuZzpcImljb25fanBnLmdpZlwiLGpwZWc6XCJpY29uX2pwZy5naWZcIixnaWY6XCJpY29uX2pwZy5naWZcIixpY286XCJpY29uX2pwZy5naWZcIixibXA6XCJpY29uX2pwZy5naWZcIn07cmV0dXJuIGNbYl0/Y1tiXTpjLnR4dH12YXIgYj10aGlzO3JldHVybntjb21tYW5kczp7aW5zZXJ0ZmlsZTp7ZXhlY0NvbW1hbmQ6ZnVuY3Rpb24oYyxkKXtkPXV0aWxzLmlzQXJyYXkoZCk/ZDpbZF07dmFyIGUsZixnLGgsaT1cIlwiLGo9Yi5nZXRPcHQoXCJVRURJVE9SX0hPTUVfVVJMXCIpLGs9aisoXCIvXCI9PWouc3Vic3RyKGoubGVuZ3RoLTEpP1wiXCI6XCIvXCIpK1wiZGlhbG9ncy9hdHRhY2htZW50L2ZpbGVUeXBlSW1hZ2VzL1wiO2ZvcihlPTA7ZTxkLmxlbmd0aDtlKyspZj1kW2VdLGc9aythKGYudXJsKSxoPWYudGl0bGV8fGYudXJsLnN1YnN0cihmLnVybC5sYXN0SW5kZXhPZihcIi9cIikrMSksaSs9JzxwIHN0eWxlPVwibGluZS1oZWlnaHQ6IDE2cHg7XCI+PGltZyBzdHlsZT1cInZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IG1hcmdpbi1yaWdodDogMnB4O1wiIHNyYz1cIicrZysnXCIgX3NyYz1cIicrZysnXCIgLz48YSBzdHlsZT1cImZvbnQtc2l6ZToxMnB4OyBjb2xvcjojMDA2NmNjO1wiIGhyZWY9XCInK2YudXJsKydcIiB0aXRsZT1cIicraCsnXCI+JytoK1wiPC9hPjwvcD5cIjtiLmV4ZWNDb21tYW5kKFwiaW5zZXJ0SHRtbFwiLGkpfX19fX0pLFVFLnBsdWdpbnMueHNzRmlsdGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2YXIgYj1hLnRhZ05hbWUsZD1hLmF0dHJzO3JldHVybiBjLmhhc093blByb3BlcnR5KGIpP3ZvaWQgVUUudXRpbHMuZWFjaChkLGZ1bmN0aW9uKGQsZSl7Y1tiXS5pbmRleE9mKGUpPT09LTEmJmEuc2V0QXR0cihlKX0pOihhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksITEpfXZhciBiPVVFRElUT1JfQ09ORklHLGM9Yi53aGl0TGlzdDtjJiZiLnhzc0ZpbHRlclJ1bGVzJiYodGhpcy5vcHRpb25zLmZpbHRlclJ1bGVzPWZ1bmN0aW9uKCl7dmFyIGI9e307cmV0dXJuIFVFLnV0aWxzLmVhY2goYyxmdW5jdGlvbihjLGQpe2JbZF09ZnVuY3Rpb24oYil7cmV0dXJuIGEoYil9fSksYn0oKSk7dmFyIGQ9W107VUUudXRpbHMuZWFjaChjLGZ1bmN0aW9uKGEsYil7ZC5wdXNoKGIpfSksYyYmYi5pbnB1dFhzc0ZpbHRlciYmdGhpcy5hZGRJbnB1dFJ1bGUoZnVuY3Rpb24oYil7Yi50cmF2ZXJzYWwoZnVuY3Rpb24oYil7cmV0dXJuXCJlbGVtZW50XCI9PT1iLnR5cGUmJnZvaWQgYShiKX0pfSksYyYmYi5vdXRwdXRYc3NGaWx0ZXImJnRoaXMuYWRkT3V0cHV0UnVsZShmdW5jdGlvbihiKXtiLnRyYXZlcnNhbChmdW5jdGlvbihiKXtyZXR1cm5cImVsZW1lbnRcIj09PWIudHlwZSYmdm9pZCBhKGIpfSl9KX07dmFyIGJhaWR1PWJhaWR1fHx7fTtiYWlkdS5lZGl0b3I9YmFpZHUuZWRpdG9yfHx7fSxVRS51aT1iYWlkdS5lZGl0b3IudWk9e30sZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZHVpX2ZpeGVkbGF5ZXJcIik7aS5zZXRWaWV3cG9ydE9mZnNldChhLHtsZWZ0OjAsdG9wOjB9KX1mdW5jdGlvbiBiKGIpe2Qub24od2luZG93LFwic2Nyb2xsXCIsYSksZC5vbih3aW5kb3csXCJyZXNpemVcIixiYWlkdS5lZGl0b3IudXRpbHMuZGVmZXIoYSwwLCEwKSl9dmFyIGM9YmFpZHUuZWRpdG9yLmJyb3dzZXIsZD1iYWlkdS5lZGl0b3IuZG9tLmRvbVV0aWxzLGU9XCIkRURJVE9SVUlcIixmPXdpbmRvd1tlXT17fSxnPVwiSURcIitlLGg9MCxpPWJhaWR1LmVkaXRvci51aS51aVV0aWxzPXt1aWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YVtnXXx8KGFbZ109KytoKTorK2h9LGhvb2s6ZnVuY3Rpb24oYSxiKXt2YXIgYztyZXR1cm4gYSYmYS5fY2FsbGJhY2tzP2M9YTooYz1mdW5jdGlvbigpe3ZhciBiO2EmJihiPWEuYXBwbHkodGhpcyxhcmd1bWVudHMpKTtmb3IodmFyIGQ9Yy5fY2FsbGJhY2tzLGU9ZC5sZW5ndGg7ZS0tOyl7dmFyIGY9ZFtlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dm9pZCAwPT09YiYmKGI9Zil9cmV0dXJuIGJ9LGMuX2NhbGxiYWNrcz1bXSksYy5fY2FsbGJhY2tzLnB1c2goYiksY30sY3JlYXRlRWxlbWVudEJ5SHRtbDpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBiLmlubmVySFRNTD1hLGI9Yi5maXJzdENoaWxkLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxifSxnZXRWaWV3cG9ydEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5pZSYmYy5xdWlya3M/ZG9jdW1lbnQuYm9keTpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LGdldENsaWVudFJlY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7dHJ5e2I9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1jYXRjaChjKXtiPXtsZWZ0OjAsdG9wOjAsaGVpZ2h0OjAsd2lkdGg6MH19Zm9yKHZhciBlLGY9e2xlZnQ6TWF0aC5yb3VuZChiLmxlZnQpLHRvcDpNYXRoLnJvdW5kKGIudG9wKSxoZWlnaHQ6TWF0aC5yb3VuZChiLmJvdHRvbS1iLnRvcCksd2lkdGg6TWF0aC5yb3VuZChiLnJpZ2h0LWIubGVmdCl9OyhlPWEub3duZXJEb2N1bWVudCkhPT1kb2N1bWVudCYmKGE9ZC5nZXRXaW5kb3coZSkuZnJhbWVFbGVtZW50KTspYj1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGYubGVmdCs9Yi5sZWZ0LGYudG9wKz1iLnRvcDtyZXR1cm4gZi5ib3R0b209Zi50b3ArZi5oZWlnaHQsZi5yaWdodD1mLmxlZnQrZi53aWR0aCxmfSxnZXRWaWV3cG9ydFJlY3Q6ZnVuY3Rpb24oKXt2YXIgYT1pLmdldFZpZXdwb3J0RWxlbWVudCgpLGI9MHwod2luZG93LmlubmVyV2lkdGh8fGEuY2xpZW50V2lkdGgpLGM9MHwod2luZG93LmlubmVySGVpZ2h0fHxhLmNsaWVudEhlaWdodCk7cmV0dXJue2xlZnQ6MCx0b3A6MCxoZWlnaHQ6Yyx3aWR0aDpiLGJvdHRvbTpjLHJpZ2h0OmJ9fSxzZXRWaWV3cG9ydE9mZnNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWkuZ2V0Rml4ZWRMYXllcigpO2EucGFyZW50Tm9kZT09PWM/KGEuc3R5bGUubGVmdD1iLmxlZnQrXCJweFwiLGEuc3R5bGUudG9wPWIudG9wK1wicHhcIik6ZC5zZXRWaWV3cG9ydE9mZnNldChhLGIpfSxnZXRFdmVudE9mZnNldDpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldHx8YS5zcmNFbGVtZW50LGM9aS5nZXRDbGllbnRSZWN0KGIpLGQ9aS5nZXRWaWV3cG9ydE9mZnNldEJ5RXZlbnQoYSk7cmV0dXJue2xlZnQ6ZC5sZWZ0LWMubGVmdCx0b3A6ZC50b3AtYy50b3B9fSxnZXRWaWV3cG9ydE9mZnNldEJ5RXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXR8fGEuc3JjRWxlbWVudCxjPWQuZ2V0V2luZG93KGIpLmZyYW1lRWxlbWVudCxlPXtsZWZ0OmEuY2xpZW50WCx0b3A6YS5jbGllbnRZfTtpZihjJiZiLm93bmVyRG9jdW1lbnQhPT1kb2N1bWVudCl7dmFyIGY9aS5nZXRDbGllbnRSZWN0KGMpO2UubGVmdCs9Zi5sZWZ0LGUudG9wKz1mLnRvcH1yZXR1cm4gZX0sc2V0R2xvYmFsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZbYV09YixlKydbXCInK2ErJ1wiXSd9LHVuc2V0R2xvYmFsOmZ1bmN0aW9uKGEpe2RlbGV0ZSBmW2FdfSxjb3B5QXR0cmlidXRlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZT1iLmF0dHJpYnV0ZXMsZj1lLmxlbmd0aDtmLS07KXt2YXIgZz1lW2ZdO1wic3R5bGVcIj09Zy5ub2RlTmFtZXx8XCJjbGFzc1wiPT1nLm5vZGVOYW1lfHxjLmllJiYhZy5zcGVjaWZpZWR8fGEuc2V0QXR0cmlidXRlKGcubm9kZU5hbWUsZy5ub2RlVmFsdWUpfWIuY2xhc3NOYW1lJiZkLmFkZENsYXNzKGEsYi5jbGFzc05hbWUpLGIuc3R5bGUuY3NzVGV4dCYmKGEuc3R5bGUuY3NzVGV4dCs9XCI7XCIrYi5zdHlsZS5jc3NUZXh0KX0scmVtb3ZlU3R5bGU6ZnVuY3Rpb24oYSxiKXtpZihhLnN0eWxlLnJlbW92ZVByb3BlcnR5KWEuc3R5bGUucmVtb3ZlUHJvcGVydHkoYik7ZWxzZXtpZighYS5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUpdGhyb3dcIlwiO2Euc3R5bGUucmVtb3ZlQXR0cmlidXRlKGIpfX0sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSYmYiYmYSE9PWImJihhLmNvbnRhaW5zP2EuY29udGFpbnMoYik6MTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKSl9LHN0YXJ0RHJhZzpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXt2YXIgYz1hLmNsaWVudFgtZyxkPWEuY2xpZW50WS1oO2Iub25kcmFnbW92ZShjLGQsYSksYS5zdG9wUHJvcGFnYXRpb24/YS5zdG9wUHJvcGFnYXRpb24oKTphLmNhbmNlbEJ1YmJsZT0hMH1mdW5jdGlvbiBlKGEpe2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGQsITApLGMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixlLCEwKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixlLCEwKSxiLm9uZHJhZ3N0b3AoKX1mdW5jdGlvbiBmKCl7aS5yZWxlYXNlQ2FwdHVyZSgpLGkuZGV0YWNoRXZlbnQoXCJvbm1vdXNlbW92ZVwiLGQpLGkuZGV0YWNoRXZlbnQoXCJvbm1vdXNldXBcIixmKSxpLmRldGFjaEV2ZW50KFwib25sb3NlY2FwdHJ1ZVwiLGYpLGIub25kcmFnc3RvcCgpfXZhciBjPWN8fGRvY3VtZW50LGc9YS5jbGllbnRYLGg9YS5jbGllbnRZO2lmKGMuYWRkRXZlbnRMaXN0ZW5lciljLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixkLCEwKSxjLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsZSwhMCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsZSwhMCksYS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2V7dmFyIGk9YS5zcmNFbGVtZW50O2kuc2V0Q2FwdHVyZSgpLGkuYXR0YWNoRXZlbnQoXCJvbm1vdXNlbW92ZVwiLGQpLGkuYXR0YWNoRXZlbnQoXCJvbm1vdXNldXBcIixmKSxpLmF0dGFjaEV2ZW50KFwib25sb3NlY2FwdHJ1ZVwiLGYpLGEucmV0dXJuVmFsdWU9ITF9Yi5vbmRyYWdzdGFydCgpfSxnZXRGaXhlZExheWVyOmZ1bmN0aW9uKCl7dmFyIGQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZHVpX2ZpeGVkbGF5ZXJcIik7cmV0dXJuIG51bGw9PWQmJihkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZC5pZD1cImVkdWlfZml4ZWRsYXllclwiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZCksYy5pZSYmYy52ZXJzaW9uPD04PyhkLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixiKCksc2V0VGltZW91dChhKSk6ZC5zdHlsZS5wb3NpdGlvbj1cImZpeGVkXCIsZC5zdHlsZS5sZWZ0PVwiMFwiLGQuc3R5bGUudG9wPVwiMFwiLGQuc3R5bGUud2lkdGg9XCIwXCIsZC5zdHlsZS5oZWlnaHQ9XCIwXCIpLGR9LG1ha2VVbnNlbGVjdGFibGU6ZnVuY3Rpb24oYSl7aWYoYy5vcGVyYXx8Yy5pZSYmYy52ZXJzaW9uPDkpe2lmKGEudW5zZWxlY3RhYmxlPVwib25cIixhLmhhc0NoaWxkTm9kZXMoKSlmb3IodmFyIGI9MDtiPGEuY2hpbGROb2Rlcy5sZW5ndGg7YisrKTE9PWEuY2hpbGROb2Rlc1tiXS5ub2RlVHlwZSYmaS5tYWtlVW5zZWxlY3RhYmxlKGEuY2hpbGROb2Rlc1tiXSl9ZWxzZSB2b2lkIDAhPT1hLnN0eWxlLk1velVzZXJTZWxlY3Q/YS5zdHlsZS5Nb3pVc2VyU2VsZWN0PVwibm9uZVwiOnZvaWQgMCE9PWEuc3R5bGUuV2Via2l0VXNlclNlbGVjdD9hLnN0eWxlLldlYmtpdFVzZXJTZWxlY3Q9XCJub25lXCI6dm9pZCAwIT09YS5zdHlsZS5LaHRtbFVzZXJTZWxlY3QmJihhLnN0eWxlLktodG1sVXNlclNlbGVjdD1cIm5vbmVcIil9fX0oKSxmdW5jdGlvbigpe3ZhciBhPWJhaWR1LmVkaXRvci51dGlscyxiPWJhaWR1LmVkaXRvci51aS51aVV0aWxzLGM9YmFpZHUuZWRpdG9yLkV2ZW50QmFzZSxkPWJhaWR1LmVkaXRvci51aS5VSUJhc2U9ZnVuY3Rpb24oKXt9O2QucHJvdG90eXBlPXtjbGFzc05hbWU6XCJcIix1aU5hbWU6XCJcIixpbml0T3B0aW9uczpmdW5jdGlvbihhKXt2YXIgYz10aGlzO2Zvcih2YXIgZCBpbiBhKWNbZF09YVtkXTt0aGlzLmlkPXRoaXMuaWR8fFwiZWR1aVwiK2IudWlkKCl9LGluaXRVSUJhc2U6ZnVuY3Rpb24oKXt0aGlzLl9nbG9iYWxLZXk9YS51bmh0bWwoYi5zZXRHbG9iYWwodGhpcy5pZCx0aGlzKSl9LHJlbmRlcjpmdW5jdGlvbihhKXtmb3IodmFyIGMsZD10aGlzLnJlbmRlckh0bWwoKSxlPWIuY3JlYXRlRWxlbWVudEJ5SHRtbChkKSxmPWRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGUsXCIqXCIpLGc9XCJlZHVpLVwiKyh0aGlzLnRoZW1lfHx0aGlzLmVkaXRvci5vcHRpb25zLnRoZW1lKSxoPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWR1aV9maXhlZGxheWVyXCIpLGk9MDtjPWZbaSsrXTspZG9tVXRpbHMuYWRkQ2xhc3MoYyxnKTtkb21VdGlscy5hZGRDbGFzcyhlLGcpLGgmJihoLmNsYXNzTmFtZT1cIlwiLGRvbVV0aWxzLmFkZENsYXNzKGgsZykpO3ZhciBqPXRoaXMuZ2V0RG9tKCk7bnVsbCE9aj8oai5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlLGopLGIuY29weUF0dHJpYnV0ZXMoZSxqKSk6KFwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSksYT1hfHxiLmdldEZpeGVkTGF5ZXIoKSxkb21VdGlscy5hZGRDbGFzcyhhLGcpLGEuYXBwZW5kQ2hpbGQoZSkpLHRoaXMucG9zdFJlbmRlcigpfSxnZXREb206ZnVuY3Rpb24oYSl7cmV0dXJuIGE/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCtcIl9cIithKTpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKX0scG9zdFJlbmRlcjpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KFwicG9zdHJlbmRlclwiKX0sZ2V0SHRtbFRwbDpmdW5jdGlvbigpe3JldHVyblwiXCJ9LGZvcm1hdEh0bWw6ZnVuY3Rpb24oYSl7dmFyIGI9XCJlZHVpLVwiK3RoaXMudWlOYW1lO3JldHVybiBhLnJlcGxhY2UoLyMjL2csdGhpcy5pZCkucmVwbGFjZSgvJSUtL2csdGhpcy51aU5hbWU/YitcIi1cIjpcIlwiKS5yZXBsYWNlKC8lJS9nLCh0aGlzLnVpTmFtZT9iOlwiXCIpK1wiIFwiK3RoaXMuY2xhc3NOYW1lKS5yZXBsYWNlKC9cXCRcXCQvZyx0aGlzLl9nbG9iYWxLZXkpfSxyZW5kZXJIdG1sOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9ybWF0SHRtbCh0aGlzLmdldEh0bWxUcGwoKSl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldERvbSgpO2EmJmJhaWR1LmVkaXRvci5kb20uZG9tVXRpbHMucmVtb3ZlKGEpLGIudW5zZXRHbG9iYWwodGhpcy5pZCl9fSxhLmluaGVyaXRzKGQsYyl9KCksZnVuY3Rpb24oKXt2YXIgYT1iYWlkdS5lZGl0b3IudXRpbHMsYj1iYWlkdS5lZGl0b3IudWkuVUlCYXNlLGM9YmFpZHUuZWRpdG9yLnVpLlNlcGFyYXRvcj1mdW5jdGlvbihhKXt0aGlzLmluaXRPcHRpb25zKGEpLHRoaXMuaW5pdFNlcGFyYXRvcigpfTtjLnByb3RvdHlwZT17dWlOYW1lOlwic2VwYXJhdG9yXCIsaW5pdFNlcGFyYXRvcjpmdW5jdGlvbigpe3RoaXMuaW5pdFVJQmFzZSgpfSxnZXRIdG1sVHBsOmZ1bmN0aW9uKCl7cmV0dXJuJzxkaXYgaWQ9XCIjI1wiIGNsYXNzPVwiZWR1aS1ib3ggJSVcIj48L2Rpdj4nfX0sYS5pbmhlcml0cyhjLGIpfSgpLGZ1bmN0aW9uKCl7dmFyIGE9YmFpZHUuZWRpdG9yLnV0aWxzLGI9YmFpZHUuZWRpdG9yLmRvbS5kb21VdGlscyxjPWJhaWR1LmVkaXRvci51aS5VSUJhc2UsZD1iYWlkdS5lZGl0b3IudWkudWlVdGlscyxlPWJhaWR1LmVkaXRvci51aS5NYXNrPWZ1bmN0aW9uKGEpe3RoaXMuaW5pdE9wdGlvbnMoYSksdGhpcy5pbml0VUlCYXNlKCl9O2UucHJvdG90eXBlPXtnZXRIdG1sVHBsOmZ1bmN0aW9uKCl7cmV0dXJuJzxkaXYgaWQ9XCIjI1wiIGNsYXNzPVwiZWR1aS1tYXNrICUlXCIgb25jbGljaz1cInJldHVybiAkJC5fb25DbGljayhldmVudCwgdGhpcyk7XCIgb25tb3VzZWRvd249XCJyZXR1cm4gJCQuX29uTW91c2VEb3duKGV2ZW50LCB0aGlzKTtcIj48L2Rpdj4nfSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztiLm9uKHdpbmRvdyxcInJlc2l6ZVwiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2EuaXNIaWRkZW4oKXx8YS5fZmlsbCgpfSl9KX0sc2hvdzpmdW5jdGlvbihhKXt0aGlzLl9maWxsKCksdGhpcy5nZXREb20oKS5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5nZXREb20oKS5zdHlsZS56SW5kZXg9YX0saGlkZTpmdW5jdGlvbigpe3RoaXMuZ2V0RG9tKCkuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLmdldERvbSgpLnN0eWxlLnpJbmRleD1cIlwifSxpc0hpZGRlbjpmdW5jdGlvbigpe3JldHVyblwibm9uZVwiPT10aGlzLmdldERvbSgpLnN0eWxlLmRpc3BsYXl9LF9vbk1vdXNlRG93bjpmdW5jdGlvbigpe3JldHVybiExfSxfb25DbGljazpmdW5jdGlvbihhLGIpe3RoaXMuZmlyZUV2ZW50KFwiY2xpY2tcIixhLGIpfSxfZmlsbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RG9tKCksYj1kLmdldFZpZXdwb3J0UmVjdCgpO2Euc3R5bGUud2lkdGg9Yi53aWR0aCtcInB4XCIsYS5zdHlsZS5oZWlnaHQ9Yi5oZWlnaHQrXCJweFwifX0sYS5pbmhlcml0cyhlLGMpfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe2Zvcih2YXIgYz0wO2M8Zy5sZW5ndGg7YysrKXt2YXIgZD1nW2NdO2lmKCFkLmlzSGlkZGVuKCkmJmQucXVlcnlBdXRvSGlkZShiKSE9PSExKXtpZihhJiYvc2Nyb2xsL2dpLnRlc3QoYS50eXBlKSYmXCJlZHVpLXdvcmRwYXN0ZXBvcFwiPT1kLmNsYXNzTmFtZSlyZXR1cm47ZC5oaWRlKCl9fWcubGVuZ3RoJiZkLmVkaXRvci5maXJlRXZlbnQoXCJhZnRlcmhpZGVwb3BcIil9dmFyIGI9YmFpZHUuZWRpdG9yLnV0aWxzLGM9YmFpZHUuZWRpdG9yLnVpLnVpVXRpbHMsZD1iYWlkdS5lZGl0b3IuZG9tLmRvbVV0aWxzLGU9YmFpZHUuZWRpdG9yLnVpLlVJQmFzZSxmPWJhaWR1LmVkaXRvci51aS5Qb3B1cD1mdW5jdGlvbihhKXt0aGlzLmluaXRPcHRpb25zKGEpLHRoaXMuaW5pdFBvcHVwKCl9LGc9W107Zi5wb3N0SGlkZT1hO3ZhciBoPVtcImVkdWktYW5jaG9yLXRvcGxlZnRcIixcImVkdWktYW5jaG9yLXRvcHJpZ2h0XCIsXCJlZHVpLWFuY2hvci1ib3R0b21sZWZ0XCIsXCJlZHVpLWFuY2hvci1ib3R0b21yaWdodFwiXTtmLnByb3RvdHlwZT17U0hBRE9XX1JBRElVUzo1LGNvbnRlbnQ6bnVsbCxfaGlkZGVuOiExLGF1dG9SZW5kZXI6ITAsY2FuU2lkZUxlZnQ6ITAsY2FuU2lkZVVwOiEwLGluaXRQb3B1cDpmdW5jdGlvbigpe3RoaXMuaW5pdFVJQmFzZSgpLGcucHVzaCh0aGlzKX0sZ2V0SHRtbFRwbDpmdW5jdGlvbigpe3JldHVybic8ZGl2IGlkPVwiIyNcIiBjbGFzcz1cImVkdWktcG9wdXAgJSVcIiBvbm1vdXNlZG93bj1cInJldHVybiBmYWxzZTtcIj4gPGRpdiBpZD1cIiMjX2JvZHlcIiBjbGFzcz1cImVkdWktcG9wdXAtYm9keVwiPiA8aWZyYW1lIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDotMTtsZWZ0OjA7dG9wOjA7YmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XCIgZnJhbWVib3JkZXI9XCIwXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHNyYz1cImFib3V0OmJsYW5rXCI+PC9pZnJhbWU+IDxkaXYgY2xhc3M9XCJlZHVpLXNoYWRvd1wiPjwvZGl2PiA8ZGl2IGlkPVwiIyNfY29udGVudFwiIGNsYXNzPVwiZWR1aS1wb3B1cC1jb250ZW50XCI+Jyt0aGlzLmdldENvbnRlbnRIdG1sVHBsKCkrXCIgIDwvZGl2PiA8L2Rpdj48L2Rpdj5cIn0sZ2V0Q29udGVudEh0bWxUcGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50P1wic3RyaW5nXCI9PXR5cGVvZiB0aGlzLmNvbnRlbnQ/dGhpcy5jb250ZW50OnRoaXMuY29udGVudC5yZW5kZXJIdG1sKCk6XCJcIn0sX1VJQmFzZV9wb3N0UmVuZGVyOmUucHJvdG90eXBlLnBvc3RSZW5kZXIscG9zdFJlbmRlcjpmdW5jdGlvbigpe2lmKHRoaXMuY29udGVudCBpbnN0YW5jZW9mIGUmJnRoaXMuY29udGVudC5wb3N0UmVuZGVyKCksdGhpcy5jYXB0dXJlV2hlZWwmJiF0aGlzLmNhcHR1cmVkKXt0aGlzLmNhcHR1cmVkPSEwO3ZhciBhPShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0fHxkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCktODAsYj10aGlzLmdldERvbSgpLm9mZnNldEhlaWdodCxmPWMuZ2V0Q2xpZW50UmVjdCh0aGlzLmNvbWJveC5nZXREb20oKSkudG9wLGc9dGhpcy5nZXREb20oXCJjb250ZW50XCIpLGg9dGhpcy5nZXREb20oXCJib2R5XCIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaWZyYW1lXCIpLGk9dGhpcztmb3IoaC5sZW5ndGgmJihoPWhbMF0pO2YrYj5hOyliLT0zMDtnLnN0eWxlLmhlaWdodD1iK1wicHhcIixoJiYoaC5zdHlsZS5oZWlnaHQ9YitcInB4XCIpLHdpbmRvdy5YTUxIdHRwUmVxdWVzdD9kLm9uKGcsXCJvbm1vdXNld2hlZWxcImluIGRvY3VtZW50LmJvZHk/XCJtb3VzZXdoZWVsXCI6XCJET01Nb3VzZVNjcm9sbFwiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEsYS53aGVlbERlbHRhP2cuc2Nyb2xsVG9wLT1hLndoZWVsRGVsdGEvMTIwKjYwOmcuc2Nyb2xsVG9wLT1hLmRldGFpbC8tMyo2MH0pOmQub24odGhpcy5nZXREb20oKSxcIm1vdXNld2hlZWxcIixmdW5jdGlvbihhKXthLnJldHVyblZhbHVlPSExLGkuZ2V0RG9tKFwiY29udGVudFwiKS5zY3JvbGxUb3AtPWEud2hlZWxEZWx0YS8xMjAqNjB9KX10aGlzLmZpcmVFdmVudChcInBvc3RSZW5kZXJBZnRlclwiKSx0aGlzLmhpZGUoITApLHRoaXMuX1VJQmFzZV9wb3N0UmVuZGVyKCl9LF9kb0F1dG9SZW5kZXI6ZnVuY3Rpb24oKXshdGhpcy5nZXREb20oKSYmdGhpcy5hdXRvUmVuZGVyJiZ0aGlzLnJlbmRlcigpfSxtZXN1cmVTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXREb20oXCJjb250ZW50XCIpO3JldHVybiBjLmdldENsaWVudFJlY3QoYSl9LGZpdFNpemU6ZnVuY3Rpb24oKXtpZih0aGlzLmNhcHR1cmVXaGVlbCYmdGhpcy5zaXplZClyZXR1cm4gdGhpcy5fX3NpemU7dGhpcy5zaXplZD0hMDt2YXIgYT10aGlzLmdldERvbShcImJvZHlcIik7YS5zdHlsZS53aWR0aD1cIlwiLGEuc3R5bGUuaGVpZ2h0PVwiXCI7dmFyIGI9dGhpcy5tZXN1cmVTaXplKCk7aWYodGhpcy5jYXB0dXJlV2hlZWwpe2Euc3R5bGUud2lkdGg9LSgtMjAtYi53aWR0aCkrXCJweFwiO3ZhciBjPXBhcnNlSW50KHRoaXMuZ2V0RG9tKFwiY29udGVudFwiKS5zdHlsZS5oZWlnaHQsMTApOyF3aW5kb3cuaXNOYU4oYykmJihiLmhlaWdodD1jKX1lbHNlIGEuc3R5bGUud2lkdGg9Yi53aWR0aCtcInB4XCI7cmV0dXJuIGEuc3R5bGUuaGVpZ2h0PWIuaGVpZ2h0K1wicHhcIix0aGlzLl9fc2l6ZT1iLHRoaXMuY2FwdHVyZVdoZWVsJiYodGhpcy5nZXREb20oXCJjb250ZW50XCIpLnN0eWxlLm92ZXJmbG93PVwiYXV0b1wiKSxifSxzaG93QW5jaG9yOmZ1bmN0aW9uKGEsYil7dGhpcy5zaG93QW5jaG9yUmVjdChjLmdldENsaWVudFJlY3QoYSksYil9LHNob3dBbmNob3JSZWN0OmZ1bmN0aW9uKGEsYixlKXt0aGlzLl9kb0F1dG9SZW5kZXIoKTt2YXIgZj1jLmdldFZpZXdwb3J0UmVjdCgpO3RoaXMuZ2V0RG9tKCkuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLHRoaXMuX3Nob3coKTt2YXIgZyxpLGosayxsPXRoaXMuZml0U2l6ZSgpO2I/KGc9dGhpcy5jYW5TaWRlTGVmdCYmYS5yaWdodCtsLndpZHRoPmYucmlnaHQmJmEubGVmdD5sLndpZHRoLGk9dGhpcy5jYW5TaWRlVXAmJmEudG9wK2wuaGVpZ2h0PmYuYm90dG9tJiZhLmJvdHRvbT5sLmhlaWdodCxqPWc/YS5sZWZ0LWwud2lkdGg6YS5yaWdodCxrPWk/YS5ib3R0b20tbC5oZWlnaHQ6YS50b3ApOihnPXRoaXMuY2FuU2lkZUxlZnQmJmEucmlnaHQrbC53aWR0aD5mLnJpZ2h0JiZhLmxlZnQ+bC53aWR0aCxpPXRoaXMuY2FuU2lkZVVwJiZhLnRvcCtsLmhlaWdodD5mLmJvdHRvbSYmYS5ib3R0b20+bC5oZWlnaHQsaj1nP2EucmlnaHQtbC53aWR0aDphLmxlZnQsaz1pP2EudG9wLWwuaGVpZ2h0OmEuYm90dG9tKTt2YXIgbT10aGlzLmdldERvbSgpO2Muc2V0Vmlld3BvcnRPZmZzZXQobSx7bGVmdDpqLHRvcDprfSksZC5yZW1vdmVDbGFzc2VzKG0saCksbS5jbGFzc05hbWUrPVwiIFwiK2hbMiooaT8xOjApKyhnPzE6MCldLHRoaXMuZWRpdG9yJiYobS5zdHlsZS56SW5kZXg9MSp0aGlzLmVkaXRvci5jb250YWluZXIuc3R5bGUuekluZGV4KzEwLGJhaWR1LmVkaXRvci51aS51aVV0aWxzLmdldEZpeGVkTGF5ZXIoKS5zdHlsZS56SW5kZXg9bS5zdHlsZS56SW5kZXgtMSksdGhpcy5nZXREb20oKS5zdHlsZS52aXNpYmlsaXR5PVwidmlzaWJsZVwifSxzaG93QXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5sZWZ0LGM9YS50b3AsZD17bGVmdDpiLHRvcDpjLHJpZ2h0OmIsYm90dG9tOmMsaGVpZ2h0OjAsd2lkdGg6MH07dGhpcy5zaG93QW5jaG9yUmVjdChkLCExLCEwKX0sX3Nob3c6ZnVuY3Rpb24oKXtpZih0aGlzLl9oaWRkZW4pe3ZhciBhPXRoaXMuZ2V0RG9tKCk7YS5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5faGlkZGVuPSExLHRoaXMuZmlyZUV2ZW50KFwic2hvd1wiKX19LGlzSGlkZGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hpZGRlbn0sc2hvdzpmdW5jdGlvbigpe3RoaXMuX2RvQXV0b1JlbmRlcigpLHRoaXMuX3Nob3coKX0saGlkZTpmdW5jdGlvbihhKXshdGhpcy5faGlkZGVuJiZ0aGlzLmdldERvbSgpJiYodGhpcy5nZXREb20oKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuX2hpZGRlbj0hMCxhfHx0aGlzLmZpcmVFdmVudChcImhpZGVcIikpfSxxdWVyeUF1dG9IaWRlOmZ1bmN0aW9uKGEpe3JldHVybiFhfHwhYy5jb250YWlucyh0aGlzLmdldERvbSgpLGEpfX0sYi5pbmhlcml0cyhmLGUpLGQub24oZG9jdW1lbnQsXCJtb3VzZWRvd25cIixmdW5jdGlvbihiKXt2YXIgYz1iLnRhcmdldHx8Yi5zcmNFbGVtZW50O2EoYixjKX0pLGQub24od2luZG93LFwic2Nyb2xsXCIsZnVuY3Rpb24oYixjKXthKGIsYyl9KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXtmb3IodmFyIGM9JzxkaXYgaWQ9XCIjI1wiIGNsYXNzPVwiZWR1aS1jb2xvcnBpY2tlciAlJVwiPjxkaXYgY2xhc3M9XCJlZHVpLWNvbG9ycGlja2VyLXRvcGJhciBlZHVpLWNsZWFyZml4XCI+PGRpdiB1bnNlbGVjdGFibGU9XCJvblwiIGlkPVwiIyNfcHJldmlld1wiIGNsYXNzPVwiZWR1aS1jb2xvcnBpY2tlci1wcmV2aWV3XCI+PC9kaXY+PGRpdiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiZWR1aS1jb2xvcnBpY2tlci1ub2NvbG9yXCIgb25jbGljaz1cIiQkLl9vblBpY2tOb0NvbG9yKGV2ZW50LCB0aGlzKTtcIj4nK2ErJzwvZGl2PjwvZGl2Pjx0YWJsZSAgY2xhc3M9XCJlZHVpLWJveFwiIHN0eWxlPVwiYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcIiBvbm1vdXNlb3Zlcj1cIiQkLl9vblRhYmxlT3ZlcihldmVudCwgdGhpcyk7XCIgb25tb3VzZW91dD1cIiQkLl9vblRhYmxlT3V0KGV2ZW50LCB0aGlzKTtcIiBvbmNsaWNrPVwicmV0dXJuICQkLl9vblRhYmxlQ2xpY2soZXZlbnQsIHRoaXMpO1wiIGNlbGxzcGFjaW5nPVwiMFwiIGNlbGxwYWRkaW5nPVwiMFwiPjx0ciBzdHlsZT1cImJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO2ZvbnQtc2l6ZTogMTNweDtsaW5lLWhlaWdodDogMjVweDtjb2xvcjojMzlDO3BhZGRpbmctdG9wOiAycHhcIj48dGQgY29sc3Bhbj1cIjEwXCI+JytiLmdldExhbmcoXCJ0aGVtZUNvbG9yXCIpKyc8L3RkPiA8L3RyPjx0ciBjbGFzcz1cImVkdWktY29sb3JwaWNrZXItdGFibGVmaXJzdHJvd1wiID4nLGQ9MDtkPGUubGVuZ3RoO2QrKylkJiZkJTEwPT09MCYmKGMrPVwiPC90cj5cIisoNjA9PWQ/Jzx0ciBzdHlsZT1cImJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO2ZvbnQtc2l6ZTogMTNweDtsaW5lLWhlaWdodDogMjVweDtjb2xvcjojMzlDO1wiPjx0ZCBjb2xzcGFuPVwiMTBcIj4nK2IuZ2V0TGFuZyhcInN0YW5kYXJkQ29sb3JcIikrXCI8L3RkPjwvdHI+XCI6XCJcIikrXCI8dHJcIisoNjA9PWQ/JyBjbGFzcz1cImVkdWktY29sb3JwaWNrZXItdGFibGVmaXJzdHJvd1wiJzpcIlwiKStcIj5cIiksYys9ZDw3MD8nPHRkIHN0eWxlPVwicGFkZGluZzogMCAycHg7XCI+PGEgaGlkZWZvY3VzIHRpdGxlPVwiJytlW2RdKydcIiBvbmNsaWNrPVwicmV0dXJuIGZhbHNlO1wiIGhyZWY9XCJqYXZhc2NyaXB0OlwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJlZHVpLWJveCBlZHVpLWNvbG9ycGlja2VyLWNvbG9yY2VsbFwiIGRhdGEtY29sb3I9XCIjJytlW2RdKydcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IycrZVtkXStcIjtib3JkZXI6c29saWQgI2NjYztcIisoZDwxMHx8ZD49NjA/XCJib3JkZXItd2lkdGg6MXB4O1wiOmQ+PTEwJiZkPDIwP1wiYm9yZGVyLXdpZHRoOjFweCAxcHggMCAxcHg7XCI6XCJib3JkZXItd2lkdGg6MCAxcHggMCAxcHg7XCIpKydcIj48L2E+PC90ZD4nOlwiXCI7cmV0dXJuIGMrPVwiPC90cj48L3RhYmxlPjwvZGl2PlwifXZhciBiPWJhaWR1LmVkaXRvci51dGlscyxjPWJhaWR1LmVkaXRvci51aS5VSUJhc2UsZD1iYWlkdS5lZGl0b3IudWkuQ29sb3JQaWNrZXI9ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLm5vQ29sb3JUZXh0PXRoaXMubm9Db2xvclRleHR8fHRoaXMuZWRpdG9yLmdldExhbmcoXCJjbGVhckNvbG9yXCIpLHRoaXMuaW5pdFVJQmFzZSgpfTtkLnByb3RvdHlwZT17Z2V0SHRtbFRwbDpmdW5jdGlvbigpe3JldHVybiBhKHRoaXMubm9Db2xvclRleHQsdGhpcy5lZGl0b3IpfSxfb25UYWJsZUNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQsYz1iLmdldEF0dHJpYnV0ZShcImRhdGEtY29sb3JcIik7YyYmdGhpcy5maXJlRXZlbnQoXCJwaWNrY29sb3JcIixjKX0sX29uVGFibGVPdmVyOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQsYz1iLmdldEF0dHJpYnV0ZShcImRhdGEtY29sb3JcIik7YyYmKHRoaXMuZ2V0RG9tKFwicHJldmlld1wiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9Yyl9LF9vblRhYmxlT3V0OmZ1bmN0aW9uKCl7dGhpcy5nZXREb20oXCJwcmV2aWV3XCIpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIlwifSxfb25QaWNrTm9Db2xvcjpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KFwicGlja25vY29sb3JcIil9fSxiLmluaGVyaXRzKGQsYyk7dmFyIGU9XCJmZmZmZmYsMDAwMDAwLGVlZWNlMSwxZjQ5N2QsNGY4MWJkLGMwNTA0ZCw5YmJiNTksODA2NGEyLDRiYWNjNixmNzk2NDYsZjJmMmYyLDdmN2Y3ZixkZGQ5YzMsYzZkOWYwLGRiZTVmMSxmMmRjZGIsZWJmMWRkLGU1ZTBlYyxkYmVlZjMsZmRlYWRhLGQ4ZDhkOCw1OTU5NTksYzRiZDk3LDhkYjNlMixiOGNjZTQsZTViOWI3LGQ3ZTNiYyxjY2MxZDksYjdkZGU4LGZiZDViNSxiZmJmYmYsM2YzZjNmLDkzODk1Myw1NDhkZDQsOTViM2Q3LGQ5OTY5NCxjM2Q2OWIsYjJhMmM3LDkyY2RkYyxmYWMwOGYsYTVhNWE1LDI2MjYyNiw0OTQ0MjksMTczNjVkLDM2NjA5Miw5NTM3MzQsNzY5MjNjLDVmNDk3YSwzMTg1OWIsZTM2YzA5LDdmN2Y3ZiwwYzBjMGMsMWQxYjEwLDBmMjQzZSwyNDQwNjEsNjMyNDIzLDRmNjEyOCwzZjMxNTEsMjA1ODY3LDk3NDgwNixjMDAwMDAsZmYwMDAwLGZmYzAwMCxmZmZmMDAsOTJkMDUwLDAwYjA1MCwwMGIwZjAsMDA3MGMwLDAwMjA2MCw3MDMwYTAsXCIuc3BsaXQoXCIsXCIpfSgpLGZ1bmN0aW9uKCl7dmFyIGE9YmFpZHUuZWRpdG9yLnV0aWxzLGI9YmFpZHUuZWRpdG9yLnVpLnVpVXRpbHMsYz1iYWlkdS5lZGl0b3IudWkuVUlCYXNlLGQ9YmFpZHUuZWRpdG9yLnVpLlRhYmxlUGlja2VyPWZ1bmN0aW9uKGEpe3RoaXMuaW5pdE9wdGlvbnMoYSksdGhpcy5pbml0VGFibGVQaWNrZXIoKX07ZC5wcm90b3R5cGU9e2RlZmF1bHROdW1Sb3dzOjEwLGRlZmF1bHROdW1Db2xzOjEwLG1heE51bVJvd3M6MjAsbWF4TnVtQ29sczoyMCxudW1Sb3dzOjEwLG51bUNvbHM6MTAsbGVuZ3RoT2ZDZWxsU2lkZToyMixpbml0VGFibGVQaWNrZXI6ZnVuY3Rpb24oKXt0aGlzLmluaXRVSUJhc2UoKX0sZ2V0SHRtbFRwbDpmdW5jdGlvbigpe3JldHVybic8ZGl2IGlkPVwiIyNcIiBjbGFzcz1cImVkdWktdGFibGVwaWNrZXIgJSVcIj48ZGl2IGNsYXNzPVwiZWR1aS10YWJsZXBpY2tlci1ib2R5XCI+PGRpdiBjbGFzcz1cImVkdWktaW5mb2FyZWFcIj48c3BhbiBpZD1cIiMjX2xhYmVsXCIgY2xhc3M9XCJlZHVpLWxhYmVsXCI+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJlZHVpLXBpY2thcmVhXCIgb25tb3VzZW1vdmU9XCIkJC5fb25Nb3VzZU1vdmUoZXZlbnQsIHRoaXMpO1wiIG9ubW91c2VvdmVyPVwiJCQuX29uTW91c2VPdmVyKGV2ZW50LCB0aGlzKTtcIiBvbm1vdXNlb3V0PVwiJCQuX29uTW91c2VPdXQoZXZlbnQsIHRoaXMpO1wiIG9uY2xpY2s9XCIkJC5fb25DbGljayhldmVudCwgdGhpcyk7XCI+PGRpdiBpZD1cIiMjX292ZXJsYXlcIiBjbGFzcz1cImVkdWktb3ZlcmxheVwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Pid9LF9VSUJhc2VfcmVuZGVyOmMucHJvdG90eXBlLnJlbmRlcixyZW5kZXI6ZnVuY3Rpb24oYSl7dGhpcy5fVUlCYXNlX3JlbmRlcihhKSx0aGlzLmdldERvbShcImxhYmVsXCIpLmlubmVySFRNTD1cIjBcIit0aGlzLmVkaXRvci5nZXRMYW5nKFwidF9yb3dcIikrXCIgeCAwXCIrdGhpcy5lZGl0b3IuZ2V0TGFuZyhcInRfY29sXCIpfSxfdHJhY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldERvbShcIm92ZXJsYXlcIikuc3R5bGUsZD10aGlzLmxlbmd0aE9mQ2VsbFNpZGU7Yy53aWR0aD1hKmQrXCJweFwiLGMuaGVpZ2h0PWIqZCtcInB4XCI7dmFyIGU9dGhpcy5nZXREb20oXCJsYWJlbFwiKTtlLmlubmVySFRNTD1hK3RoaXMuZWRpdG9yLmdldExhbmcoXCJ0X2NvbFwiKStcIiB4IFwiK2IrdGhpcy5lZGl0b3IuZ2V0TGFuZyhcInRfcm93XCIpLHRoaXMubnVtQ29scz1hLHRoaXMubnVtUm93cz1ifSxfb25Nb3VzZU92ZXI6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hLnJlbGF0ZWRUYXJnZXR8fGEuZnJvbUVsZW1lbnQ7Yi5jb250YWlucyhjLGQpfHxjPT09ZHx8KHRoaXMuZ2V0RG9tKFwibGFiZWxcIikuaW5uZXJIVE1MPVwiMFwiK3RoaXMuZWRpdG9yLmdldExhbmcoXCJ0X2NvbFwiKStcIiB4IDBcIit0aGlzLmVkaXRvci5nZXRMYW5nKFwidF9yb3dcIiksdGhpcy5nZXREb20oXCJvdmVybGF5XCIpLnN0eWxlLnZpc2liaWxpdHk9XCJcIil9LF9vbk1vdXNlT3V0OmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YS5yZWxhdGVkVGFyZ2V0fHxhLnRvRWxlbWVudDtiLmNvbnRhaW5zKGMsZCl8fGM9PT1kfHwodGhpcy5nZXREb20oXCJsYWJlbFwiKS5pbm5lckhUTUw9XCIwXCIrdGhpcy5lZGl0b3IuZ2V0TGFuZyhcInRfY29sXCIpK1wiIHggMFwiK3RoaXMuZWRpdG9yLmdldExhbmcoXCJ0X3Jvd1wiKSx0aGlzLmdldERvbShcIm92ZXJsYXlcIikuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiKX0sX29uTW91c2VNb3ZlOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9KHRoaXMuZ2V0RG9tKFwib3ZlcmxheVwiKS5zdHlsZSxiLmdldEV2ZW50T2Zmc2V0KGEpKSxlPXRoaXMubGVuZ3RoT2ZDZWxsU2lkZSxmPU1hdGguY2VpbChkLmxlZnQvZSksZz1NYXRoLmNlaWwoZC50b3AvZSk7dGhpcy5fdHJhY2soZixnKX0sX29uQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudChcInBpY2t0YWJsZVwiLHRoaXMubnVtQ29scyx0aGlzLm51bVJvd3MpfX0sYS5pbmhlcml0cyhkLGMpfSgpLGZ1bmN0aW9uKCl7dmFyIGE9YmFpZHUuZWRpdG9yLmJyb3dzZXIsYj1iYWlkdS5lZGl0b3IuZG9tLmRvbVV0aWxzLGM9YmFpZHUuZWRpdG9yLnVpLnVpVXRpbHMsZD0nb25tb3VzZWRvd249XCIkJC5TdGF0ZWZ1bF9vbk1vdXNlRG93bihldmVudCwgdGhpcyk7XCIgb25tb3VzZXVwPVwiJCQuU3RhdGVmdWxfb25Nb3VzZVVwKGV2ZW50LCB0aGlzKTtcIicrKGEuaWU/JyBvbm1vdXNlZW50ZXI9XCIkJC5TdGF0ZWZ1bF9vbk1vdXNlRW50ZXIoZXZlbnQsIHRoaXMpO1wiIG9ubW91c2VsZWF2ZT1cIiQkLlN0YXRlZnVsX29uTW91c2VMZWF2ZShldmVudCwgdGhpcyk7XCInOicgb25tb3VzZW92ZXI9XCIkJC5TdGF0ZWZ1bF9vbk1vdXNlT3ZlcihldmVudCwgdGhpcyk7XCIgb25tb3VzZW91dD1cIiQkLlN0YXRlZnVsX29uTW91c2VPdXQoZXZlbnQsIHRoaXMpO1wiJyk7YmFpZHUuZWRpdG9yLnVpLlN0YXRlZnVsPXthbHdhbHlzSG92ZXJhYmxlOiExLHRhcmdldDpudWxsLFN0YXRlZnVsX2luaXQ6ZnVuY3Rpb24oKXt0aGlzLl9TdGF0ZWZ1bF9kR2V0SHRtbFRwbD10aGlzLmdldEh0bWxUcGwsdGhpcy5nZXRIdG1sVHBsPXRoaXMuU3RhdGVmdWxfZ2V0SHRtbFRwbH0sU3RhdGVmdWxfZ2V0SHRtbFRwbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX1N0YXRlZnVsX2RHZXRIdG1sVHBsKCk7cmV0dXJuIGEucmVwbGFjZSgvc3RhdGVmdWwvZyxmdW5jdGlvbigpe3JldHVybiBkfSl9LFN0YXRlZnVsX29uTW91c2VFbnRlcjpmdW5jdGlvbihhLGIpe3RoaXMudGFyZ2V0PWIsdGhpcy5pc0Rpc2FibGVkKCkmJiF0aGlzLmFsd2FseXNIb3ZlcmFibGV8fCh0aGlzLmFkZFN0YXRlKFwiaG92ZXJcIiksdGhpcy5maXJlRXZlbnQoXCJvdmVyXCIpKX0sU3RhdGVmdWxfb25Nb3VzZUxlYXZlOmZ1bmN0aW9uKGEsYil7dGhpcy5pc0Rpc2FibGVkKCkmJiF0aGlzLmFsd2FseXNIb3ZlcmFibGV8fCh0aGlzLnJlbW92ZVN0YXRlKFwiaG92ZXJcIiksdGhpcy5yZW1vdmVTdGF0ZShcImFjdGl2ZVwiKSx0aGlzLmZpcmVFdmVudChcIm91dFwiKSl9LFN0YXRlZnVsX29uTW91c2VPdmVyOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YS5yZWxhdGVkVGFyZ2V0O2MuY29udGFpbnMoYixkKXx8Yj09PWR8fHRoaXMuU3RhdGVmdWxfb25Nb3VzZUVudGVyKGEsYil9LFN0YXRlZnVsX29uTW91c2VPdXQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hLnJlbGF0ZWRUYXJnZXQ7Yy5jb250YWlucyhiLGQpfHxiPT09ZHx8dGhpcy5TdGF0ZWZ1bF9vbk1vdXNlTGVhdmUoYSxiKX0sU3RhdGVmdWxfb25Nb3VzZURvd246ZnVuY3Rpb24oYSxiKXt0aGlzLmlzRGlzYWJsZWQoKXx8dGhpcy5hZGRTdGF0ZShcImFjdGl2ZVwiKX0sU3RhdGVmdWxfb25Nb3VzZVVwOmZ1bmN0aW9uKGEsYil7dGhpcy5pc0Rpc2FibGVkKCl8fHRoaXMucmVtb3ZlU3RhdGUoXCJhY3RpdmVcIil9LFN0YXRlZnVsX3Bvc3RSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkJiYhdGhpcy5oYXNTdGF0ZShcImRpc2FibGVkXCIpJiZ0aGlzLmFkZFN0YXRlKFwiZGlzYWJsZWRcIil9LGhhc1N0YXRlOmZ1bmN0aW9uKGEpe3JldHVybiBiLmhhc0NsYXNzKHRoaXMuZ2V0U3RhdGVEb20oKSxcImVkdWktc3RhdGUtXCIrYSl9LGFkZFN0YXRlOmZ1bmN0aW9uKGEpe3RoaXMuaGFzU3RhdGUoYSl8fCh0aGlzLmdldFN0YXRlRG9tKCkuY2xhc3NOYW1lKz1cIiBlZHVpLXN0YXRlLVwiK2EpfSxyZW1vdmVTdGF0ZTpmdW5jdGlvbihhKXt0aGlzLmhhc1N0YXRlKGEpJiZiLnJlbW92ZUNsYXNzZXModGhpcy5nZXRTdGF0ZURvbSgpLFtcImVkdWktc3RhdGUtXCIrYV0pfSxnZXRTdGF0ZURvbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldERvbShcInN0YXRlXCIpfSxpc0NoZWNrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNTdGF0ZShcImNoZWNrZWRcIil9LHNldENoZWNrZWQ6ZnVuY3Rpb24oYSl7IXRoaXMuaXNEaXNhYmxlZCgpJiZhP3RoaXMuYWRkU3RhdGUoXCJjaGVja2VkXCIpOnRoaXMucmVtb3ZlU3RhdGUoXCJjaGVja2VkXCIpfSxpc0Rpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzU3RhdGUoXCJkaXNhYmxlZFwiKX0sc2V0RGlzYWJsZWQ6ZnVuY3Rpb24oYSl7YT8odGhpcy5yZW1vdmVTdGF0ZShcImhvdmVyXCIpLHRoaXMucmVtb3ZlU3RhdGUoXCJjaGVja2VkXCIpLHRoaXMucmVtb3ZlU3RhdGUoXCJhY3RpdmVcIiksdGhpcy5hZGRTdGF0ZShcImRpc2FibGVkXCIpKTp0aGlzLnJlbW92ZVN0YXRlKFwiZGlzYWJsZWRcIil9fX0oKSxmdW5jdGlvbigpe3ZhciBhPWJhaWR1LmVkaXRvci51dGlscyxiPWJhaWR1LmVkaXRvci51aS5VSUJhc2UsYz1iYWlkdS5lZGl0b3IudWkuU3RhdGVmdWwsZD1iYWlkdS5lZGl0b3IudWkuQnV0dG9uPWZ1bmN0aW9uKGEpe2lmKGEubmFtZSl7dmFyIGI9YS5uYW1lLGM9YS5jc3NSdWxlczthLmNsYXNzTmFtZXx8KGEuY2xhc3NOYW1lPVwiZWR1aS1mb3ItXCIrYiksYS5jc3NSdWxlcz1cIi5lZHVpLWRlZmF1bHQgIC5lZHVpLWZvci1cIitiK1wiIC5lZHVpLWljb24ge1wiK2MrXCJ9XCJ9dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRCdXR0b24oKX07ZC5wcm90b3R5cGU9e3VpTmFtZTpcImJ1dHRvblwiLGxhYmVsOlwiXCIsdGl0bGU6XCJcIixzaG93SWNvbjohMCxzaG93VGV4dDohMCxjc3NSdWxlczpcIlwiLGluaXRCdXR0b246ZnVuY3Rpb24oKXt0aGlzLmluaXRVSUJhc2UoKSx0aGlzLlN0YXRlZnVsX2luaXQoKSx0aGlzLmNzc1J1bGVzJiZhLmNzc1J1bGUoXCJlZHVpLWN1c3RvbWl6ZS1cIit0aGlzLm5hbWUrXCItc3R5bGVcIix0aGlzLmNzc1J1bGVzKX0sZ2V0SHRtbFRwbDpmdW5jdGlvbigpe3JldHVybic8ZGl2IGlkPVwiIyNcIiBjbGFzcz1cImVkdWktYm94ICUlXCI+PGRpdiBpZD1cIiMjX3N0YXRlXCIgc3RhdGVmdWw+PGRpdiBjbGFzcz1cIiUlLXdyYXBcIj48ZGl2IGlkPVwiIyNfYm9keVwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgJysodGhpcy50aXRsZT8ndGl0bGU9XCInK3RoaXMudGl0bGUrJ1wiJzpcIlwiKSsnIGNsYXNzPVwiJSUtYm9keVwiIG9ubW91c2Vkb3duPVwicmV0dXJuICQkLl9vbk1vdXNlRG93bihldmVudCwgdGhpcyk7XCIgb25jbGljaz1cInJldHVybiAkJC5fb25DbGljayhldmVudCwgdGhpcyk7XCI+JysodGhpcy5zaG93SWNvbj8nPGRpdiBjbGFzcz1cImVkdWktYm94IGVkdWktaWNvblwiPjwvZGl2Pic6XCJcIikrKHRoaXMuc2hvd1RleHQ/JzxkaXYgY2xhc3M9XCJlZHVpLWJveCBlZHVpLWxhYmVsXCI+Jyt0aGlzLmxhYmVsK1wiPC9kaXY+XCI6XCJcIikrXCI8L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5cIn0scG9zdFJlbmRlcjpmdW5jdGlvbigpe3RoaXMuU3RhdGVmdWxfcG9zdFJlbmRlcigpLHRoaXMuc2V0RGlzYWJsZWQodGhpcy5kaXNhYmxlZCl9LF9vbk1vdXNlRG93bjpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldHx8YS5zcmNFbGVtZW50LGM9YiYmYi50YWdOYW1lJiZiLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtpZihcImlucHV0XCI9PWN8fFwib2JqZWN0XCI9PWN8fFwib2JqZWN0XCI9PWMpcmV0dXJuITF9LF9vbkNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5pc0Rpc2FibGVkKCl8fHRoaXMuZmlyZUV2ZW50KFwiY2xpY2tcIil9LHNldFRpdGxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RG9tKFwibGFiZWxcIik7Yi5pbm5lckhUTUw9YX19LGEuaW5oZXJpdHMoZCxiKSxhLmV4dGVuZChkLnByb3RvdHlwZSxjKX0oKSxmdW5jdGlvbigpe3ZhciBhPWJhaWR1LmVkaXRvci51dGlscyxiPWJhaWR1LmVkaXRvci51aS51aVV0aWxzLGM9KGJhaWR1LmVkaXRvci5kb20uZG9tVXRpbHMsYmFpZHUuZWRpdG9yLnVpLlVJQmFzZSksZD1iYWlkdS5lZGl0b3IudWkuU3RhdGVmdWwsZT1iYWlkdS5lZGl0b3IudWkuU3BsaXRCdXR0b249ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRTcGxpdEJ1dHRvbigpfTtlLnByb3RvdHlwZT17cG9wdXA6bnVsbCx1aU5hbWU6XCJzcGxpdGJ1dHRvblwiLHRpdGxlOlwiXCIsaW5pdFNwbGl0QnV0dG9uOmZ1bmN0aW9uKCl7dGhpcy5pbml0VUlCYXNlKCksdGhpcy5TdGF0ZWZ1bF9pbml0KCk7aWYobnVsbCE9dGhpcy5wb3B1cCl7dmFyIGE9dGhpcy5wb3B1cDt0aGlzLnBvcHVwPW51bGwsdGhpcy5zZXRQb3B1cChhKX19LF9VSUJhc2VfcG9zdFJlbmRlcjpjLnByb3RvdHlwZS5wb3N0UmVuZGVyLHBvc3RSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLlN0YXRlZnVsX3Bvc3RSZW5kZXIoKSx0aGlzLl9VSUJhc2VfcG9zdFJlbmRlcigpfSxzZXRQb3B1cDpmdW5jdGlvbihjKXt0aGlzLnBvcHVwIT09YyYmKG51bGwhPXRoaXMucG9wdXAmJnRoaXMucG9wdXAuZGlzcG9zZSgpLGMuYWRkTGlzdGVuZXIoXCJzaG93XCIsYS5iaW5kKHRoaXMuX29uUG9wdXBTaG93LHRoaXMpKSxjLmFkZExpc3RlbmVyKFwiaGlkZVwiLGEuYmluZCh0aGlzLl9vblBvcHVwSGlkZSx0aGlzKSksYy5hZGRMaXN0ZW5lcihcInBvc3RyZW5kZXJcIixhLmJpbmQoZnVuY3Rpb24oKXtjLmdldERvbShcImJvZHlcIikuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50QnlIdG1sKCc8ZGl2IGlkPVwiJyt0aGlzLnBvcHVwLmlkKydfYm9yZGVyZXJhc2VyXCIgY2xhc3M9XCJlZHVpLWJvcmRlcmVyYXNlciBlZHVpLWJhY2tncm91bmRcIiBzdHlsZT1cIndpZHRoOicrKGIuZ2V0Q2xpZW50UmVjdCh0aGlzLmdldERvbSgpKS53aWR0aCsyMCkrJ3B4XCI+PC9kaXY+JykpLGMuZ2V0RG9tKCkuY2xhc3NOYW1lKz1cIiBcIit0aGlzLmNsYXNzTmFtZX0sdGhpcykpLHRoaXMucG9wdXA9Yyl9LF9vblBvcHVwU2hvdzpmdW5jdGlvbigpe3RoaXMuYWRkU3RhdGUoXCJvcGVuZWRcIil9LF9vblBvcHVwSGlkZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlU3RhdGUoXCJvcGVuZWRcIil9LGdldEh0bWxUcGw6ZnVuY3Rpb24oKXtyZXR1cm4nPGRpdiBpZD1cIiMjXCIgY2xhc3M9XCJlZHVpLWJveCAlJVwiPjxkaXYgJysodGhpcy50aXRsZT8ndGl0bGU9XCInK3RoaXMudGl0bGUrJ1wiJzpcIlwiKSsnIGlkPVwiIyNfc3RhdGVcIiBzdGF0ZWZ1bD48ZGl2IGNsYXNzPVwiJSUtYm9keVwiPjxkaXYgaWQ9XCIjI19idXR0b25fYm9keVwiIGNsYXNzPVwiZWR1aS1ib3ggZWR1aS1idXR0b24tYm9keVwiIG9uY2xpY2s9XCIkJC5fb25CdXR0b25DbGljayhldmVudCwgdGhpcyk7XCI+PGRpdiBjbGFzcz1cImVkdWktYm94IGVkdWktaWNvblwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJlZHVpLWJveCBlZHVpLXNwbGl0Ym9yZGVyXCI+PC9kaXY+PGRpdiBjbGFzcz1cImVkdWktYm94IGVkdWktYXJyb3dcIiBvbmNsaWNrPVwiJCQuX29uQXJyb3dDbGljaygpO1wiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Pid9LHNob3dQb3B1cDpmdW5jdGlvbigpe3ZhciBhPWIuZ2V0Q2xpZW50UmVjdCh0aGlzLmdldERvbSgpKTthLnRvcC09dGhpcy5wb3B1cC5TSEFET1dfUkFESVVTLGEuaGVpZ2h0Kz10aGlzLnBvcHVwLlNIQURPV19SQURJVVMsdGhpcy5wb3B1cC5zaG93QW5jaG9yUmVjdChhKX0sX29uQXJyb3dDbGljazpmdW5jdGlvbihhLGIpe3RoaXMuaXNEaXNhYmxlZCgpfHx0aGlzLnNob3dQb3B1cCgpfSxfb25CdXR0b25DbGljazpmdW5jdGlvbigpe3RoaXMuaXNEaXNhYmxlZCgpfHx0aGlzLmZpcmVFdmVudChcImJ1dHRvbmNsaWNrXCIpfX0sYS5pbmhlcml0cyhlLGMpLGEuZXh0ZW5kKGUucHJvdG90eXBlLGQsITApfSgpLGZ1bmN0aW9uKCl7dmFyIGE9YmFpZHUuZWRpdG9yLnV0aWxzLGI9YmFpZHUuZWRpdG9yLnVpLnVpVXRpbHMsYz1iYWlkdS5lZGl0b3IudWkuQ29sb3JQaWNrZXIsZD1iYWlkdS5lZGl0b3IudWkuUG9wdXAsZT1iYWlkdS5lZGl0b3IudWkuU3BsaXRCdXR0b24sZj1iYWlkdS5lZGl0b3IudWkuQ29sb3JCdXR0b249ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRDb2xvckJ1dHRvbigpfTtmLnByb3RvdHlwZT17aW5pdENvbG9yQnV0dG9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLnBvcHVwPW5ldyBkKHtjb250ZW50Om5ldyBjKHtub0NvbG9yVGV4dDphLmVkaXRvci5nZXRMYW5nKFwiY2xlYXJDb2xvclwiKSxlZGl0b3I6YS5lZGl0b3Isb25waWNrY29sb3I6ZnVuY3Rpb24oYixjKXthLl9vblBpY2tDb2xvcihjKX0sb25waWNrbm9jb2xvcjpmdW5jdGlvbihiLGMpe2EuX29uUGlja05vQ29sb3IoYyl9fSksZWRpdG9yOmEuZWRpdG9yfSksdGhpcy5pbml0U3BsaXRCdXR0b24oKX0sX1NwbGl0QnV0dG9uX3Bvc3RSZW5kZXI6ZS5wcm90b3R5cGUucG9zdFJlbmRlcixwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5fU3BsaXRCdXR0b25fcG9zdFJlbmRlcigpLHRoaXMuZ2V0RG9tKFwiYnV0dG9uX2JvZHlcIikuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50QnlIdG1sKCc8ZGl2IGlkPVwiJyt0aGlzLmlkKydfY29sb3JsdW1wXCIgY2xhc3M9XCJlZHVpLWNvbG9ybHVtcFwiPjwvZGl2PicpKSx0aGlzLmdldERvbSgpLmNsYXNzTmFtZSs9XCIgZWR1aS1jb2xvcmJ1dHRvblwiO1xufSxzZXRDb2xvcjpmdW5jdGlvbihhKXt0aGlzLmdldERvbShcImNvbG9ybHVtcFwiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9YSx0aGlzLmNvbG9yPWF9LF9vblBpY2tDb2xvcjpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudChcInBpY2tjb2xvclwiLGEpIT09ITEmJih0aGlzLnNldENvbG9yKGEpLHRoaXMucG9wdXAuaGlkZSgpKX0sX29uUGlja05vQ29sb3I6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoXCJwaWNrbm9jb2xvclwiKSE9PSExJiZ0aGlzLnBvcHVwLmhpZGUoKX19LGEuaW5oZXJpdHMoZixlKX0oKSxmdW5jdGlvbigpe3ZhciBhPWJhaWR1LmVkaXRvci51dGlscyxiPWJhaWR1LmVkaXRvci51aS5Qb3B1cCxjPWJhaWR1LmVkaXRvci51aS5UYWJsZVBpY2tlcixkPWJhaWR1LmVkaXRvci51aS5TcGxpdEJ1dHRvbixlPWJhaWR1LmVkaXRvci51aS5UYWJsZUJ1dHRvbj1mdW5jdGlvbihhKXt0aGlzLmluaXRPcHRpb25zKGEpLHRoaXMuaW5pdFRhYmxlQnV0dG9uKCl9O2UucHJvdG90eXBlPXtpbml0VGFibGVCdXR0b246ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMucG9wdXA9bmV3IGIoe2NvbnRlbnQ6bmV3IGMoe2VkaXRvcjphLmVkaXRvcixvbnBpY2t0YWJsZTpmdW5jdGlvbihiLGMsZCl7YS5fb25QaWNrVGFibGUoYyxkKX19KSxlZGl0b3I6YS5lZGl0b3J9KSx0aGlzLmluaXRTcGxpdEJ1dHRvbigpfSxfb25QaWNrVGFibGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmZpcmVFdmVudChcInBpY2t0YWJsZVwiLGEsYikhPT0hMSYmdGhpcy5wb3B1cC5oaWRlKCl9fSxhLmluaGVyaXRzKGUsZCl9KCksZnVuY3Rpb24oKXt2YXIgYT1iYWlkdS5lZGl0b3IudXRpbHMsYj1iYWlkdS5lZGl0b3IudWkuVUlCYXNlLGM9YmFpZHUuZWRpdG9yLnVpLkF1dG9UeXBlU2V0UGlja2VyPWZ1bmN0aW9uKGEpe3RoaXMuaW5pdE9wdGlvbnMoYSksdGhpcy5pbml0QXV0b1R5cGVTZXRQaWNrZXIoKX07Yy5wcm90b3R5cGU9e2luaXRBdXRvVHlwZVNldFBpY2tlcjpmdW5jdGlvbigpe3RoaXMuaW5pdFVJQmFzZSgpfSxnZXRIdG1sVHBsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lZGl0b3IsYj1hLm9wdGlvbnMuYXV0b3R5cGVzZXQsYz1hLmdldExhbmcoXCJhdXRvVHlwZVNldFwiKSxkPVwidGV4dEFsaWduVmFsdWVcIithLnVpZCxlPVwiaW1hZ2VCbG9ja0xpbmVWYWx1ZVwiK2EudWlkLGY9XCJzeW1ib2xDb252ZXJWYWx1ZVwiK2EudWlkO3JldHVybic8ZGl2IGlkPVwiIyNcIiBjbGFzcz1cImVkdWktYXV0b3R5cGVzZXRwaWNrZXIgJSVcIj48ZGl2IGNsYXNzPVwiZWR1aS1hdXRvdHlwZXNldHBpY2tlci1ib2R5XCI+PHRhYmxlID48dHI+PHRkIG5vd3JhcD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cIm1lcmdlRW1wdHlsaW5lXCIgJysoYi5tZXJnZUVtcHR5bGluZT9cImNoZWNrZWRcIjpcIlwiKStcIj5cIitjLm1lcmdlTGluZSsnPC90ZD48dGQgY29sc3Bhbj1cIjJcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInJlbW92ZUVtcHR5bGluZVwiICcrKGIucmVtb3ZlRW1wdHlsaW5lP1wiY2hlY2tlZFwiOlwiXCIpK1wiPlwiK2MuZGVsTGluZSsnPC90ZD48L3RyPjx0cj48dGQgbm93cmFwPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwicmVtb3ZlQ2xhc3NcIiAnKyhiLnJlbW92ZUNsYXNzP1wiY2hlY2tlZFwiOlwiXCIpK1wiPlwiK2MucmVtb3ZlRm9ybWF0Kyc8L3RkPjx0ZCBjb2xzcGFuPVwiMlwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiaW5kZW50XCIgJysoYi5pbmRlbnQ/XCJjaGVja2VkXCI6XCJcIikrXCI+XCIrYy5pbmRlbnQrJzwvdGQ+PC90cj48dHI+PHRkIG5vd3JhcD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInRleHRBbGlnblwiICcrKGIudGV4dEFsaWduP1wiY2hlY2tlZFwiOlwiXCIpK1wiPlwiK2MuYWxpZ25tZW50Kyc8L3RkPjx0ZCBjb2xzcGFuPVwiMlwiIGlkPVwiJytkKydcIj48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cIicrZCsnXCIgdmFsdWU9XCJsZWZ0XCIgJysoYi50ZXh0QWxpZ24mJlwibGVmdFwiPT1iLnRleHRBbGlnbj9cImNoZWNrZWRcIjpcIlwiKStcIj5cIithLmdldExhbmcoXCJqdXN0aWZ5bGVmdFwiKSsnPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCInK2QrJ1wiIHZhbHVlPVwiY2VudGVyXCIgJysoYi50ZXh0QWxpZ24mJlwiY2VudGVyXCI9PWIudGV4dEFsaWduP1wiY2hlY2tlZFwiOlwiXCIpK1wiPlwiK2EuZ2V0TGFuZyhcImp1c3RpZnljZW50ZXJcIikrJzxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiJytkKydcIiB2YWx1ZT1cInJpZ2h0XCIgJysoYi50ZXh0QWxpZ24mJlwicmlnaHRcIj09Yi50ZXh0QWxpZ24/XCJjaGVja2VkXCI6XCJcIikrXCI+XCIrYS5nZXRMYW5nKFwianVzdGlmeXJpZ2h0XCIpKyc8L3RkPjwvdHI+PHRyPjx0ZCBub3dyYXA+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJpbWFnZUJsb2NrTGluZVwiICcrKGIuaW1hZ2VCbG9ja0xpbmU/XCJjaGVja2VkXCI6XCJcIikrXCI+XCIrYy5pbWFnZUZsb2F0Kyc8L3RkPjx0ZCBub3dyYXAgaWQ9XCInK2UrJ1wiPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiJytlKydcIiB2YWx1ZT1cIm5vbmVcIiAnKyhiLmltYWdlQmxvY2tMaW5lJiZcIm5vbmVcIj09Yi5pbWFnZUJsb2NrTGluZT9cImNoZWNrZWRcIjpcIlwiKStcIj5cIithLmdldExhbmcoXCJkZWZhdWx0XCIpKyc8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cIicrZSsnXCIgdmFsdWU9XCJsZWZ0XCIgJysoYi5pbWFnZUJsb2NrTGluZSYmXCJsZWZ0XCI9PWIuaW1hZ2VCbG9ja0xpbmU/XCJjaGVja2VkXCI6XCJcIikrXCI+XCIrYS5nZXRMYW5nKFwianVzdGlmeWxlZnRcIikrJzxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiJytlKydcIiB2YWx1ZT1cImNlbnRlclwiICcrKGIuaW1hZ2VCbG9ja0xpbmUmJlwiY2VudGVyXCI9PWIuaW1hZ2VCbG9ja0xpbmU/XCJjaGVja2VkXCI6XCJcIikrXCI+XCIrYS5nZXRMYW5nKFwianVzdGlmeWNlbnRlclwiKSsnPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCInK2UrJ1wiIHZhbHVlPVwicmlnaHRcIiAnKyhiLmltYWdlQmxvY2tMaW5lJiZcInJpZ2h0XCI9PWIuaW1hZ2VCbG9ja0xpbmU/XCJjaGVja2VkXCI6XCJcIikrXCI+XCIrYS5nZXRMYW5nKFwianVzdGlmeXJpZ2h0XCIpKyc8L3RkPjwvdHI+PHRyPjx0ZCBub3dyYXA+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJjbGVhckZvbnRTaXplXCIgJysoYi5jbGVhckZvbnRTaXplP1wiY2hlY2tlZFwiOlwiXCIpK1wiPlwiK2MucmVtb3ZlRm9udHNpemUrJzwvdGQ+PHRkIGNvbHNwYW49XCIyXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJjbGVhckZvbnRGYW1pbHlcIiAnKyhiLmNsZWFyRm9udEZhbWlseT9cImNoZWNrZWRcIjpcIlwiKStcIj5cIitjLnJlbW92ZUZvbnRGYW1pbHkrJzwvdGQ+PC90cj48dHI+PHRkIG5vd3JhcCBjb2xzcGFuPVwiM1wiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwicmVtb3ZlRW1wdHlOb2RlXCIgJysoYi5yZW1vdmVFbXB0eU5vZGU/XCJjaGVja2VkXCI6XCJcIikrXCI+XCIrYy5yZW1vdmVIdG1sKyc8L3RkPjwvdHI+PHRyPjx0ZCBub3dyYXAgY29sc3Bhbj1cIjNcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInBhc3RlRmlsdGVyXCIgJysoYi5wYXN0ZUZpbHRlcj9cImNoZWNrZWRcIjpcIlwiKStcIj5cIitjLnBhc3RlRmlsdGVyKyc8L3RkPjwvdHI+PHRyPjx0ZCBub3dyYXA+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJzeW1ib2xDb252ZXJcIiAnKyhiLmJkYzJzYnx8Yi50b2JkYz9cImNoZWNrZWRcIjpcIlwiKStcIj5cIitjLnN5bWJvbCsnPC90ZD48dGQgaWQ9XCInK2YrJ1wiPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiYmRjXCIgdmFsdWU9XCJiZGMyc2JcIiAnKyhiLmJkYzJzYj9cImNoZWNrZWRcIjpcIlwiKStcIj5cIitjLmJkYzJzYisnPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJiZGNcIiB2YWx1ZT1cInRvYmRjXCIgJysoYi50b2JkYz9cImNoZWNrZWRcIjpcIlwiKStcIj5cIitjLnRvYmRjKyc8L3RkPjx0ZCBub3dyYXAgYWxpZ249XCJyaWdodFwiPjxidXR0b24gPicrYy5ydW4rXCI8L2J1dHRvbj48L3RkPjwvdHI+PC90YWJsZT48L2Rpdj48L2Rpdj5cIn0sX1VJQmFzZV9yZW5kZXI6Yi5wcm90b3R5cGUucmVuZGVyfSxhLmluaGVyaXRzKGMsYil9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2Zvcih2YXIgYyxkPXt9LGU9YS5nZXREb20oKSxmPWEuZWRpdG9yLnVpZCxnPW51bGwsaD1udWxsLGk9ZG9tVXRpbHMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSxcImlucHV0XCIpLGo9aS5sZW5ndGgtMTtjPWlbai0tXTspaWYoZz1jLmdldEF0dHJpYnV0ZShcInR5cGVcIiksXCJjaGVja2JveFwiPT1nKWlmKGg9Yy5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLGRbaF0mJmRlbGV0ZSBkW2hdLGMuY2hlY2tlZCl7dmFyIGs9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaCtcIlZhbHVlXCIrZik7aWYoayl7aWYoL2lucHV0L2dpLnRlc3Qoay50YWdOYW1lKSlkW2hdPWsudmFsdWU7ZWxzZSBmb3IodmFyIGwsbT1rLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIiksbj1tLmxlbmd0aC0xO2w9bVtuLS1dOylpZihsLmNoZWNrZWQpe2RbaF09bC52YWx1ZTticmVha319ZWxzZSBkW2hdPSEwfWVsc2UgZFtoXT0hMTtlbHNlIGRbYy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKV09Yy5jaGVja2VkO2Zvcih2YXIgbyxwPWRvbVV0aWxzLmdldEVsZW1lbnRzQnlUYWdOYW1lKGUsXCJzZWxlY3RcIiksaj0wO289cFtqKytdOyl7dmFyIHE9by5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO2RbcV09ZFtxXT9vLnZhbHVlOlwiXCJ9Yi5leHRlbmQoYS5lZGl0b3Iub3B0aW9ucy5hdXRvdHlwZXNldCxkKSxhLmVkaXRvci5zZXRQcmVmZXJlbmNlcyhcImF1dG90eXBlc2V0XCIsZCl9dmFyIGI9YmFpZHUuZWRpdG9yLnV0aWxzLGM9YmFpZHUuZWRpdG9yLnVpLlBvcHVwLGQ9YmFpZHUuZWRpdG9yLnVpLkF1dG9UeXBlU2V0UGlja2VyLGU9YmFpZHUuZWRpdG9yLnVpLlNwbGl0QnV0dG9uLGY9YmFpZHUuZWRpdG9yLnVpLkF1dG9UeXBlU2V0QnV0dG9uPWZ1bmN0aW9uKGEpe3RoaXMuaW5pdE9wdGlvbnMoYSksdGhpcy5pbml0QXV0b1R5cGVTZXRCdXR0b24oKX07Zi5wcm90b3R5cGU9e2luaXRBdXRvVHlwZVNldEJ1dHRvbjpmdW5jdGlvbigpe3ZhciBiPXRoaXM7dGhpcy5wb3B1cD1uZXcgYyh7Y29udGVudDpuZXcgZCh7ZWRpdG9yOmIuZWRpdG9yfSksZWRpdG9yOmIuZWRpdG9yLGhpZGU6ZnVuY3Rpb24oKXshdGhpcy5faGlkZGVuJiZ0aGlzLmdldERvbSgpJiYoYSh0aGlzKSx0aGlzLmdldERvbSgpLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5faGlkZGVuPSEwLHRoaXMuZmlyZUV2ZW50KFwiaGlkZVwiKSl9fSk7dmFyIGU9MDt0aGlzLnBvcHVwLmFkZExpc3RlbmVyKFwicG9zdFJlbmRlckFmdGVyXCIsZnVuY3Rpb24oKXt2YXIgYz10aGlzO2lmKCFlKXt2YXIgZD10aGlzLmdldERvbSgpLGY9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJ1dHRvblwiKVswXTtmLm9uY2xpY2s9ZnVuY3Rpb24oKXthKGMpLGIuZWRpdG9yLmV4ZWNDb21tYW5kKFwiYXV0b3R5cGVzZXRcIiksYy5oaWRlKCl9LGRvbVV0aWxzLm9uKGQsXCJjbGlja1wiLGZ1bmN0aW9uKGQpe3ZhciBlPWQudGFyZ2V0fHxkLnNyY0VsZW1lbnQsZj1iLmVkaXRvci51aWQ7aWYoZSYmXCJJTlBVVFwiPT1lLnRhZ05hbWUpe2lmKFwiaW1hZ2VCbG9ja0xpbmVcIj09ZS5uYW1lfHxcInRleHRBbGlnblwiPT1lLm5hbWV8fFwic3ltYm9sQ29udmVyXCI9PWUubmFtZSlmb3IodmFyIGc9ZS5jaGVja2VkLGg9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZS5uYW1lK1wiVmFsdWVcIitmKSxpPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKSxqPXtpbWFnZUJsb2NrTGluZTpcIm5vbmVcIix0ZXh0QWxpZ246XCJsZWZ0XCIsc3ltYm9sQ29udmVyOlwidG9iZGNcIn0saz0wO2s8aS5sZW5ndGg7aysrKWc/aVtrXS52YWx1ZT09altlLm5hbWVdJiYoaVtrXS5jaGVja2VkPVwiY2hlY2tlZFwiKTppW2tdLmNoZWNrZWQ9ITE7aWYoZS5uYW1lPT1cImltYWdlQmxvY2tMaW5lVmFsdWVcIitmfHxlLm5hbWU9PVwidGV4dEFsaWduVmFsdWVcIitmfHxcImJkY1wiPT1lLm5hbWUpe3ZhciBsPWUucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKTtsJiYobFswXS5jaGVja2VkPSEwKX1hKGMpfX0pLGU9MX19KSx0aGlzLmluaXRTcGxpdEJ1dHRvbigpfX0sYi5pbmhlcml0cyhmLGUpfSgpLGZ1bmN0aW9uKCl7dmFyIGE9YmFpZHUuZWRpdG9yLnV0aWxzLGI9YmFpZHUuZWRpdG9yLnVpLlBvcHVwLGM9YmFpZHUuZWRpdG9yLnVpLlN0YXRlZnVsLGQ9YmFpZHUuZWRpdG9yLnVpLlVJQmFzZSxlPWJhaWR1LmVkaXRvci51aS5DZWxsQWxpZ25QaWNrZXI9ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRTZWxlY3RlZCgpLHRoaXMuaW5pdENlbGxBbGlnblBpY2tlcigpfTtlLnByb3RvdHlwZT17aW5pdFNlbGVjdGVkOmZ1bmN0aW9uKCl7dmFyIGE9e3ZhbGlnbjp7dG9wOjAsbWlkZGxlOjEsYm90dG9tOjJ9LGFsaWduOntsZWZ0OjAsY2VudGVyOjEscmlnaHQ6Mn0sY291bnQ6M307dGhpcy5zZWxlY3RlZCYmKHRoaXMuc2VsZWN0ZWRJbmRleD1hLnZhbGlnblt0aGlzLnNlbGVjdGVkLnZhbGlnbl0qYS5jb3VudCthLmFsaWduW3RoaXMuc2VsZWN0ZWQuYWxpZ25dKX0saW5pdENlbGxBbGlnblBpY2tlcjpmdW5jdGlvbigpe3RoaXMuaW5pdFVJQmFzZSgpLHRoaXMuU3RhdGVmdWxfaW5pdCgpfSxnZXRIdG1sVHBsOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtcImxlZnRcIixcImNlbnRlclwiLFwicmlnaHRcIl0sYj05LGM9bnVsbCxkPS0xLGU9W10sZj0wO2Y8YjtmKyspYz10aGlzLnNlbGVjdGVkSW5kZXg9PT1mPycgY2xhc3M9XCJlZHVpLWNlbGxhbGlnbi1zZWxlY3RlZFwiICc6XCJcIixkPWYlMywwPT09ZCYmZS5wdXNoKFwiPHRyPlwiKSxlLnB1c2goJzx0ZCBpbmRleD1cIicrZisnXCIgJytjKycgc3RhdGVmdWw+PGRpdiBjbGFzcz1cImVkdWktaWNvbiBlZHVpLScrYVtkXSsnXCI+PC9kaXY+PC90ZD4nKSwyPT09ZCYmZS5wdXNoKFwiPC90cj5cIik7cmV0dXJuJzxkaXYgaWQ9XCIjI1wiIGNsYXNzPVwiZWR1aS1jZWxsYWxpZ25waWNrZXIgJSVcIj48ZGl2IGNsYXNzPVwiZWR1aS1jZWxsYWxpZ25waWNrZXItYm9keVwiPjx0YWJsZSBvbmNsaWNrPVwiJCQuX29uQ2xpY2soZXZlbnQpO1wiPicrZS5qb2luKFwiXCIpK1wiPC90YWJsZT48L2Rpdj48L2Rpdj5cIn0sZ2V0U3RhdGVEb206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YXJnZXR9LF9vbkNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBjPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7L2ljb24vLnRlc3QoYy5jbGFzc05hbWUpJiYodGhpcy5pdGVtc1tjLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwiaW5kZXhcIildLm9uY2xpY2soKSxiLnBvc3RIaWRlKGEpKX0sX1VJQmFzZV9yZW5kZXI6ZC5wcm90b3R5cGUucmVuZGVyfSxhLmluaGVyaXRzKGUsZCksYS5leHRlbmQoZS5wcm90b3R5cGUsYywhMCl9KCksZnVuY3Rpb24oKXt2YXIgYT1iYWlkdS5lZGl0b3IudXRpbHMsYj1iYWlkdS5lZGl0b3IudWkuU3RhdGVmdWwsYz1iYWlkdS5lZGl0b3IudWkudWlVdGlscyxkPWJhaWR1LmVkaXRvci51aS5VSUJhc2UsZT1iYWlkdS5lZGl0b3IudWkuUGFzdGVQaWNrZXI9ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRQYXN0ZVBpY2tlcigpfTtlLnByb3RvdHlwZT17aW5pdFBhc3RlUGlja2VyOmZ1bmN0aW9uKCl7dGhpcy5pbml0VUlCYXNlKCksdGhpcy5TdGF0ZWZ1bF9pbml0KCl9LGdldEh0bWxUcGw6ZnVuY3Rpb24oKXtyZXR1cm4nPGRpdiBjbGFzcz1cImVkdWktcGFzdGVpY29uXCIgb25jbGljaz1cIiQkLl9vbkNsaWNrKHRoaXMpXCI+PC9kaXY+PGRpdiBjbGFzcz1cImVkdWktcGFzdGVjb250YWluZXJcIj48ZGl2IGNsYXNzPVwiZWR1aS10aXRsZVwiPicrdGhpcy5lZGl0b3IuZ2V0TGFuZyhcInBhc3RlT3B0XCIpKyc8L2Rpdj48ZGl2IGNsYXNzPVwiZWR1aS1idXR0b25cIj48ZGl2IHRpdGxlPVwiJyt0aGlzLmVkaXRvci5nZXRMYW5nKFwicGFzdGVTb3VyY2VGb3JtYXRcIikrJ1wiIG9uY2xpY2s9XCIkJC5mb3JtYXQoZmFsc2UpXCIgc3RhdGVmdWw+PGRpdiBjbGFzcz1cImVkdWktcmljaHR4dGljb25cIj48L2Rpdj48L2Rpdj48ZGl2IHRpdGxlPVwiJyt0aGlzLmVkaXRvci5nZXRMYW5nKFwidGFnRm9ybWF0XCIpKydcIiBvbmNsaWNrPVwiJCQuZm9ybWF0KDIpXCIgc3RhdGVmdWw+PGRpdiBjbGFzcz1cImVkdWktdGFnaWNvblwiPjwvZGl2PjwvZGl2PjxkaXYgdGl0bGU9XCInK3RoaXMuZWRpdG9yLmdldExhbmcoXCJwYXN0ZVRleHRGb3JtYXRcIikrJ1wiIG9uY2xpY2s9XCIkJC5mb3JtYXQodHJ1ZSlcIiBzdGF0ZWZ1bD48ZGl2IGNsYXNzPVwiZWR1aS1wbGFpbnR4dGljb25cIj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nfSxnZXRTdGF0ZURvbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhcmdldH0sZm9ybWF0OmZ1bmN0aW9uKGEpe3RoaXMuZWRpdG9yLnVpLl9pc1RyYW5zZmVyPSEwLHRoaXMuZWRpdG9yLmZpcmVFdmVudChcInBhc3RlVHJhbnNmZXJcIixhKX0sX29uQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9ZG9tVXRpbHMuZ2V0TmV4dERvbU5vZGUoYSksZD1jLmdldFZpZXdwb3J0UmVjdCgpLmhlaWdodCxlPWMuZ2V0Q2xpZW50UmVjdChiKTtlLnRvcCtlLmhlaWdodD5kP2Iuc3R5bGUudG9wPS1lLmhlaWdodC1hLm9mZnNldEhlaWdodCtcInB4XCI6Yi5zdHlsZS50b3A9XCJcIiwvaGlkZGVuL2dpLnRlc3QoZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShiLFwidmlzaWJpbGl0eVwiKSk/KGIuc3R5bGUudmlzaWJpbGl0eT1cInZpc2libGVcIixkb21VdGlscy5hZGRDbGFzcyhhLFwiZWR1aS1zdGF0ZS1vcGVuZWRcIikpOihiLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixkb21VdGlscy5yZW1vdmVDbGFzc2VzKGEsXCJlZHVpLXN0YXRlLW9wZW5lZFwiKSl9LF9VSUJhc2VfcmVuZGVyOmQucHJvdG90eXBlLnJlbmRlcn0sYS5pbmhlcml0cyhlLGQpLGEuZXh0ZW5kKGUucHJvdG90eXBlLGIsITApfSgpLGZ1bmN0aW9uKCl7dmFyIGE9YmFpZHUuZWRpdG9yLnV0aWxzLGI9YmFpZHUuZWRpdG9yLnVpLnVpVXRpbHMsYz1iYWlkdS5lZGl0b3IudWkuVUlCYXNlLGQ9YmFpZHUuZWRpdG9yLnVpLlRvb2xiYXI9ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRUb29sYmFyKCl9O2QucHJvdG90eXBlPXtpdGVtczpudWxsLGluaXRUb29sYmFyOmZ1bmN0aW9uKCl7dGhpcy5pdGVtcz10aGlzLml0ZW1zfHxbXSx0aGlzLmluaXRVSUJhc2UoKX0sYWRkOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09Yj90aGlzLml0ZW1zLnB1c2goYSk6dGhpcy5pdGVtcy5zcGxpY2UoYiwwLGEpfSxnZXRIdG1sVHBsOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MDtiPHRoaXMuaXRlbXMubGVuZ3RoO2IrKylhW2JdPXRoaXMuaXRlbXNbYl0ucmVuZGVySHRtbCgpO3JldHVybic8ZGl2IGlkPVwiIyNcIiBjbGFzcz1cImVkdWktdG9vbGJhciAlJVwiIG9uc2VsZWN0c3RhcnQ9XCJyZXR1cm4gZmFsc2U7XCIgb25tb3VzZWRvd249XCJyZXR1cm4gJCQuX29uTW91c2VEb3duKGV2ZW50LCB0aGlzKTtcIj4nK2Euam9pbihcIlwiKStcIjwvZGl2PlwifSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZ2V0RG9tKCksYz0wO2M8dGhpcy5pdGVtcy5sZW5ndGg7YysrKXRoaXMuaXRlbXNbY10ucG9zdFJlbmRlcigpO2IubWFrZVVuc2VsZWN0YWJsZShhKX0sX29uTW91c2VEb3duOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQsYz1iJiZiLnRhZ05hbWUmJmIudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKFwiaW5wdXRcIj09Y3x8XCJvYmplY3RcIj09Y3x8XCJvYmplY3RcIj09YylyZXR1cm4hMX19LGEuaW5oZXJpdHMoZCxjKX0oKSxmdW5jdGlvbigpe3ZhciBhPWJhaWR1LmVkaXRvci51dGlscyxiPWJhaWR1LmVkaXRvci5kb20uZG9tVXRpbHMsYz1iYWlkdS5lZGl0b3IudWkudWlVdGlscyxkPWJhaWR1LmVkaXRvci51aS5VSUJhc2UsZT1iYWlkdS5lZGl0b3IudWkuUG9wdXAsZj1iYWlkdS5lZGl0b3IudWkuU3RhdGVmdWwsZz1iYWlkdS5lZGl0b3IudWkuQ2VsbEFsaWduUGlja2VyLGg9YmFpZHUuZWRpdG9yLnVpLk1lbnU9ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRNZW51KCl9LGk9e3JlbmRlckh0bWw6ZnVuY3Rpb24oKXtyZXR1cm4nPGRpdiBjbGFzcz1cImVkdWktbWVudWl0ZW0gZWR1aS1tZW51c2VwYXJhdG9yXCI+PGRpdiBjbGFzcz1cImVkdWktbWVudXNlcGFyYXRvci1pbm5lclwiPjwvZGl2PjwvZGl2Pid9LHBvc3RSZW5kZXI6ZnVuY3Rpb24oKXt9LHF1ZXJ5QXV0b0hpZGU6ZnVuY3Rpb24oKXtyZXR1cm4hMH19O2gucHJvdG90eXBlPXtpdGVtczpudWxsLHVpTmFtZTpcIm1lbnVcIixpbml0TWVudTpmdW5jdGlvbigpe3RoaXMuaXRlbXM9dGhpcy5pdGVtc3x8W10sdGhpcy5pbml0UG9wdXAoKSx0aGlzLmluaXRJdGVtcygpfSxpbml0SXRlbXM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMuaXRlbXMubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5pdGVtc1thXTtcIi1cIj09Yj90aGlzLml0ZW1zW2FdPXRoaXMuZ2V0U2VwYXJhdG9yKCk6YiBpbnN0YW5jZW9mIGp8fChiLmVkaXRvcj10aGlzLmVkaXRvcixiLnRoZW1lPXRoaXMuZWRpdG9yLm9wdGlvbnMudGhlbWUsdGhpcy5pdGVtc1thXT10aGlzLmNyZWF0ZUl0ZW0oYikpfX0sZ2V0U2VwYXJhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIGl9LGNyZWF0ZUl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWVudT10aGlzLG5ldyBqKGEpfSxfUG9wdXBfZ2V0Q29udGVudEh0bWxUcGw6ZS5wcm90b3R5cGUuZ2V0Q29udGVudEh0bWxUcGwsZ2V0Q29udGVudEh0bWxUcGw6ZnVuY3Rpb24oKXtpZigwPT10aGlzLml0ZW1zLmxlbmd0aClyZXR1cm4gdGhpcy5fUG9wdXBfZ2V0Q29udGVudEh0bWxUcGwoKTtmb3IodmFyIGE9W10sYj0wO2I8dGhpcy5pdGVtcy5sZW5ndGg7YisrKXt2YXIgYz10aGlzLml0ZW1zW2JdO2FbYl09Yy5yZW5kZXJIdG1sKCl9cmV0dXJuJzxkaXYgY2xhc3M9XCIlJS1ib2R5XCI+JythLmpvaW4oXCJcIikrXCI8L2Rpdj5cIn0sX1BvcHVwX3Bvc3RSZW5kZXI6ZS5wcm90b3R5cGUucG9zdFJlbmRlcixwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMsZD0wO2Q8dGhpcy5pdGVtcy5sZW5ndGg7ZCsrKXt2YXIgZT10aGlzLml0ZW1zW2RdO2Uub3duZXJNZW51PXRoaXMsZS5wb3N0UmVuZGVyKCl9Yi5vbih0aGlzLmdldERvbSgpLFwibW91c2VvdmVyXCIsZnVuY3Rpb24oYil7Yj1ifHxldmVudDt2YXIgZD1iLnJlbGF0ZWRUYXJnZXR8fGIuZnJvbUVsZW1lbnQsZT1hLmdldERvbSgpO2MuY29udGFpbnMoZSxkKXx8ZT09PWR8fGEuZmlyZUV2ZW50KFwib3ZlclwiKX0pLHRoaXMuX1BvcHVwX3Bvc3RSZW5kZXIoKX0scXVlcnlBdXRvSGlkZTpmdW5jdGlvbihhKXtpZihhKXtpZihjLmNvbnRhaW5zKHRoaXMuZ2V0RG9tKCksYSkpcmV0dXJuITE7Zm9yKHZhciBiPTA7Yjx0aGlzLml0ZW1zLmxlbmd0aDtiKyspe3ZhciBkPXRoaXMuaXRlbXNbYl07aWYoZC5xdWVyeUF1dG9IaWRlKGEpPT09ITEpcmV0dXJuITF9fX0sY2xlYXJJdGVtczpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy5pdGVtcy5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLml0ZW1zW2FdO2NsZWFyVGltZW91dChiLl9zaG93aW5nVGltZXIpLGNsZWFyVGltZW91dChiLl9jbG9zaW5nVGltZXIpLGIuc3ViTWVudSYmYi5zdWJNZW51LmRlc3Ryb3koKX10aGlzLml0ZW1zPVtdfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5nZXREb20oKSYmYi5yZW1vdmUodGhpcy5nZXREb20oKSksdGhpcy5jbGVhckl0ZW1zKCl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3koKX19LGEuaW5oZXJpdHMoaCxlKTt2YXIgaj1iYWlkdS5lZGl0b3IudWkuTWVudUl0ZW09ZnVuY3Rpb24oYSl7aWYodGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRVSUJhc2UoKSx0aGlzLlN0YXRlZnVsX2luaXQoKSx0aGlzLnN1Yk1lbnUmJiEodGhpcy5zdWJNZW51IGluc3RhbmNlb2YgaCkpaWYoYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lLmluZGV4T2YoXCJhbGlnbnRkXCIpIT0tMSl7dmFyIGM9dGhpczt0aGlzLnN1Yk1lbnUuc2VsZWN0ZWQ9dGhpcy5lZGl0b3IucXVlcnlDb21tYW5kVmFsdWUoXCJjZWxsYWxpZ25tZW50XCIpLHRoaXMuc3ViTWVudT1uZXcgZSh7Y29udGVudDpuZXcgZyh0aGlzLnN1Yk1lbnUpLHBhcmVudE1lbnU6YyxlZGl0b3I6Yy5lZGl0b3IsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZ2V0RG9tKCkmJmIucmVtb3ZlKHRoaXMuZ2V0RG9tKCkpfX0pLHRoaXMuc3ViTWVudS5hZGRMaXN0ZW5lcihcInBvc3RSZW5kZXJBZnRlclwiLGZ1bmN0aW9uKCl7Yi5vbih0aGlzLmdldERvbSgpLFwibW91c2VvdmVyXCIsZnVuY3Rpb24oKXtjLmFkZFN0YXRlKFwib3BlbmVkXCIpfSl9KX1lbHNlIHRoaXMuc3ViTWVudT1uZXcgaCh0aGlzLnN1Yk1lbnUpfTtqLnByb3RvdHlwZT17bGFiZWw6XCJcIixzdWJNZW51Om51bGwsb3duZXJNZW51Om51bGwsdWlOYW1lOlwibWVudWl0ZW1cIixhbHdhbHlzSG92ZXJhYmxlOiEwLGdldEh0bWxUcGw6ZnVuY3Rpb24oKXtyZXR1cm4nPGRpdiBpZD1cIiMjXCIgY2xhc3M9XCIlJVwiIHN0YXRlZnVsIG9uY2xpY2s9XCIkJC5fb25DbGljayhldmVudCwgdGhpcyk7XCI+PGRpdiBjbGFzcz1cIiUlLWJvZHlcIj4nK3RoaXMucmVuZGVyTGFiZWxIdG1sKCkrXCI8L2Rpdj48L2Rpdj5cIn0scG9zdFJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5hZGRMaXN0ZW5lcihcIm92ZXJcIixmdW5jdGlvbigpe2Eub3duZXJNZW51LmZpcmVFdmVudChcInN1Ym1lbnVvdmVyXCIsYSksYS5zdWJNZW51JiZhLmRlbGF5U2hvd1N1Yk1lbnUoKX0pLHRoaXMuc3ViTWVudSYmKHRoaXMuZ2V0RG9tKCkuY2xhc3NOYW1lKz1cIiBlZHVpLWhhc3N1Ym1lbnVcIix0aGlzLnN1Yk1lbnUucmVuZGVyKCksdGhpcy5hZGRMaXN0ZW5lcihcIm91dFwiLGZ1bmN0aW9uKCl7YS5kZWxheUhpZGVTdWJNZW51KCl9KSx0aGlzLnN1Yk1lbnUuYWRkTGlzdGVuZXIoXCJvdmVyXCIsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYS5fY2xvc2luZ1RpbWVyKSxhLl9jbG9zaW5nVGltZXI9bnVsbCxhLmFkZFN0YXRlKFwib3BlbmVkXCIpfSksdGhpcy5vd25lck1lbnUuYWRkTGlzdGVuZXIoXCJoaWRlXCIsZnVuY3Rpb24oKXthLmhpZGVTdWJNZW51KCl9KSx0aGlzLm93bmVyTWVudS5hZGRMaXN0ZW5lcihcInN1Ym1lbnVvdmVyXCIsZnVuY3Rpb24oYixjKXtjIT09YSYmYS5kZWxheUhpZGVTdWJNZW51KCl9KSx0aGlzLnN1Yk1lbnUuX2Jha1F1ZXJ5QXV0b0hpZGU9dGhpcy5zdWJNZW51LnF1ZXJ5QXV0b0hpZGUsdGhpcy5zdWJNZW51LnF1ZXJ5QXV0b0hpZGU9ZnVuY3Rpb24oYil7cmV0dXJuKCFifHwhYy5jb250YWlucyhhLmdldERvbSgpLGIpKSYmdGhpcy5fYmFrUXVlcnlBdXRvSGlkZShiKX0pLHRoaXMuZ2V0RG9tKCkuc3R5bGUudGFiSW5kZXg9XCItMVwiLGMubWFrZVVuc2VsZWN0YWJsZSh0aGlzLmdldERvbSgpKSx0aGlzLlN0YXRlZnVsX3Bvc3RSZW5kZXIoKX0sZGVsYXlTaG93U3ViTWVudTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5pc0Rpc2FibGVkKCl8fChhLmFkZFN0YXRlKFwib3BlbmVkXCIpLGNsZWFyVGltZW91dChhLl9zaG93aW5nVGltZXIpLGNsZWFyVGltZW91dChhLl9jbG9zaW5nVGltZXIpLGEuX2Nsb3NpbmdUaW1lcj1udWxsLGEuX3Nob3dpbmdUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5zaG93U3ViTWVudSgpfSwyNTApKX0sZGVsYXlIaWRlU3ViTWVudTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5pc0Rpc2FibGVkKCl8fChhLnJlbW92ZVN0YXRlKFwib3BlbmVkXCIpLGNsZWFyVGltZW91dChhLl9zaG93aW5nVGltZXIpLGEuX2Nsb3NpbmdUaW1lcnx8KGEuX2Nsb3NpbmdUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5oYXNTdGF0ZShcIm9wZW5lZFwiKXx8YS5oaWRlU3ViTWVudSgpLGEuX2Nsb3NpbmdUaW1lcj1udWxsfSw0MDApKSl9LHJlbmRlckxhYmVsSHRtbDpmdW5jdGlvbigpe3JldHVybic8ZGl2IGNsYXNzPVwiZWR1aS1hcnJvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJlZHVpLWJveCBlZHVpLWljb25cIj48L2Rpdj48ZGl2IGNsYXNzPVwiZWR1aS1ib3ggZWR1aS1sYWJlbCAlJS1sYWJlbFwiPicrKHRoaXMubGFiZWx8fFwiXCIpK1wiPC9kaXY+XCJ9LGdldFN0YXRlRG9tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RG9tKCl9LHF1ZXJ5QXV0b0hpZGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdWJNZW51JiZ0aGlzLmhhc1N0YXRlKFwib3BlbmVkXCIpKXJldHVybiB0aGlzLnN1Yk1lbnUucXVlcnlBdXRvSGlkZShhKX0sX29uQ2xpY2s6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhc1N0YXRlKFwiZGlzYWJsZWRcIil8fHRoaXMuZmlyZUV2ZW50KFwiY2xpY2tcIixhLGIpIT09ITEmJih0aGlzLnN1Yk1lbnU/dGhpcy5zaG93U3ViTWVudSgpOmUucG9zdEhpZGUoYSkpfSxzaG93U3ViTWVudTpmdW5jdGlvbigpe3ZhciBhPWMuZ2V0Q2xpZW50UmVjdCh0aGlzLmdldERvbSgpKTthLnJpZ2h0LT01LGEubGVmdCs9MixhLndpZHRoLT03LGEudG9wLT00LGEuYm90dG9tKz00LGEuaGVpZ2h0Kz04LHRoaXMuc3ViTWVudS5zaG93QW5jaG9yUmVjdChhLCEwLCEwKX0saGlkZVN1Yk1lbnU6ZnVuY3Rpb24oKXt0aGlzLnN1Yk1lbnUuaGlkZSgpfX0sYS5pbmhlcml0cyhqLGQpLGEuZXh0ZW5kKGoucHJvdG90eXBlLGYsITApfSgpLGZ1bmN0aW9uKCl7dmFyIGE9YmFpZHUuZWRpdG9yLnV0aWxzLGI9YmFpZHUuZWRpdG9yLnVpLnVpVXRpbHMsYz1iYWlkdS5lZGl0b3IudWkuTWVudSxkPWJhaWR1LmVkaXRvci51aS5TcGxpdEJ1dHRvbixlPWJhaWR1LmVkaXRvci51aS5Db21ib3g9ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRDb21ib3goKX07ZS5wcm90b3R5cGU9e3VpTmFtZTpcImNvbWJveFwiLG9uYnV0dG9uY2xpY2s6ZnVuY3Rpb24oKXt0aGlzLnNob3dQb3B1cCgpfSxpbml0Q29tYm94OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLml0ZW1zPXRoaXMuaXRlbXN8fFtdO2Zvcih2YXIgYj0wO2I8dGhpcy5pdGVtcy5sZW5ndGg7YisrKXt2YXIgZD10aGlzLml0ZW1zW2JdO2QudWlOYW1lPVwibGlzdGl0ZW1cIixkLmluZGV4PWIsZC5vbmNsaWNrPWZ1bmN0aW9uKCl7YS5zZWxlY3RCeUluZGV4KHRoaXMuaW5kZXgpfX10aGlzLnBvcHVwPW5ldyBjKHtpdGVtczp0aGlzLml0ZW1zLHVpTmFtZTpcImxpc3RcIixlZGl0b3I6dGhpcy5lZGl0b3IsY2FwdHVyZVdoZWVsOiEwLGNvbWJveDp0aGlzfSksdGhpcy5pbml0U3BsaXRCdXR0b24oKX0sX1NwbGl0QnV0dG9uX3Bvc3RSZW5kZXI6ZC5wcm90b3R5cGUucG9zdFJlbmRlcixwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5fU3BsaXRCdXR0b25fcG9zdFJlbmRlcigpLHRoaXMuc2V0TGFiZWwodGhpcy5sYWJlbHx8XCJcIiksdGhpcy5zZXRWYWx1ZSh0aGlzLmluaXRWYWx1ZXx8XCJcIil9LHNob3dQb3B1cDpmdW5jdGlvbigpe3ZhciBhPWIuZ2V0Q2xpZW50UmVjdCh0aGlzLmdldERvbSgpKTthLnRvcCs9MSxhLmJvdHRvbS09MSxhLmhlaWdodC09Mix0aGlzLnBvcHVwLnNob3dBbmNob3JSZWN0KGEpfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluZGV4QnlWYWx1ZShhKTtiIT0tMT8odGhpcy5zZWxlY3RlZEluZGV4PWIsdGhpcy5zZXRMYWJlbCh0aGlzLml0ZW1zW2JdLmxhYmVsKSx0aGlzLnZhbHVlPXRoaXMuaXRlbXNbYl0udmFsdWUpOih0aGlzLnNlbGVjdGVkSW5kZXg9LTEsdGhpcy5zZXRMYWJlbCh0aGlzLmdldExhYmVsRm9yVW5rbm93VmFsdWUoYSkpLHRoaXMudmFsdWU9YSl9LHNldExhYmVsOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0RG9tKFwiYnV0dG9uX2JvZHlcIikuaW5uZXJIVE1MPWEsdGhpcy5sYWJlbD1hfSxnZXRMYWJlbEZvclVua25vd1ZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxpbmRleEJ5VmFsdWU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7Yjx0aGlzLml0ZW1zLmxlbmd0aDtiKyspaWYoYT09dGhpcy5pdGVtc1tiXS52YWx1ZSlyZXR1cm4gYjtyZXR1cm4tMX0sZ2V0SXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pdGVtc1thXX0sc2VsZWN0QnlJbmRleDpmdW5jdGlvbihhKXthPHRoaXMuaXRlbXMubGVuZ3RoJiZ0aGlzLmZpcmVFdmVudChcInNlbGVjdFwiLGEpIT09ITEmJih0aGlzLnNlbGVjdGVkSW5kZXg9YSx0aGlzLnZhbHVlPXRoaXMuaXRlbXNbYV0udmFsdWUsdGhpcy5zZXRMYWJlbCh0aGlzLml0ZW1zW2FdLmxhYmVsKSl9fSxhLmluaGVyaXRzKGUsZCl9KCksZnVuY3Rpb24oKXt2YXIgYSxiLGMsZD1iYWlkdS5lZGl0b3IudXRpbHMsZT1iYWlkdS5lZGl0b3IuZG9tLmRvbVV0aWxzLGY9YmFpZHUuZWRpdG9yLnVpLnVpVXRpbHMsZz1iYWlkdS5lZGl0b3IudWkuTWFzayxoPWJhaWR1LmVkaXRvci51aS5VSUJhc2UsaT1iYWlkdS5lZGl0b3IudWkuQnV0dG9uLGo9YmFpZHUuZWRpdG9yLnVpLkRpYWxvZz1mdW5jdGlvbihhKXtpZihhLm5hbWUpe3ZhciBiPWEubmFtZSxjPWEuY3NzUnVsZXM7YS5jbGFzc05hbWV8fChhLmNsYXNzTmFtZT1cImVkdWktZm9yLVwiK2IpLGMmJihhLmNzc1J1bGVzPVwiLmVkdWktZGVmYXVsdCAuZWR1aS1mb3ItXCIrYitcIiAuZWR1aS1kaWFsb2ctY29udGVudCAge1wiK2MrXCJ9XCIpfXRoaXMuaW5pdE9wdGlvbnMoZC5leHRlbmQoe2F1dG9SZXNldDohMCxkcmFnZ2FibGU6ITAsb25vazpmdW5jdGlvbigpe30sb25jYW5jZWw6ZnVuY3Rpb24oKXt9LG9uY2xvc2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj90aGlzLm9ub2soKTp0aGlzLm9uY2FuY2VsKCl9LGhvbGRTY3JvbGw6ITF9LGEpKSx0aGlzLmluaXREaWFsb2coKX07ai5wcm90b3R5cGU9e2RyYWdnYWJsZTohMSx1aU5hbWU6XCJkaWFsb2dcIixpbml0RGlhbG9nOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxmPXRoaXMuZWRpdG9yLm9wdGlvbnMudGhlbWU7aWYodGhpcy5jc3NSdWxlcyYmZC5jc3NSdWxlKFwiZWR1aS1jdXN0b21pemUtXCIrdGhpcy5uYW1lK1wiLXN0eWxlXCIsdGhpcy5jc3NSdWxlcyksdGhpcy5pbml0VUlCYXNlKCksdGhpcy5tb2RhbE1hc2s9YXx8KGE9bmV3IGcoe2NsYXNzTmFtZTpcImVkdWktZGlhbG9nLW1vZGFsbWFza1wiLHRoZW1lOmYsb25jbGljazpmdW5jdGlvbigpe2MmJmMuY2xvc2UoITEpfX0pKSx0aGlzLmRyYWdNYXNrPWJ8fChiPW5ldyBnKHtjbGFzc05hbWU6XCJlZHVpLWRpYWxvZy1kcmFnbWFza1wiLHRoZW1lOmZ9KSksdGhpcy5jbG9zZUJ1dHRvbj1uZXcgaSh7Y2xhc3NOYW1lOlwiZWR1aS1kaWFsb2ctY2xvc2VidXR0b25cIix0aXRsZTplLmNsb3NlRGlhbG9nLHRoZW1lOmYsb25jbGljazpmdW5jdGlvbigpe2UuY2xvc2UoITEpfX0pLHRoaXMuZnVsbHNjcmVlbiYmdGhpcy5pbml0UmVzaXplRXZlbnQoKSx0aGlzLmJ1dHRvbnMpZm9yKHZhciBoPTA7aDx0aGlzLmJ1dHRvbnMubGVuZ3RoO2grKyl0aGlzLmJ1dHRvbnNbaF1pbnN0YW5jZW9mIGl8fCh0aGlzLmJ1dHRvbnNbaF09bmV3IGkoZC5leHRlbmQodGhpcy5idXR0b25zW2hdLHtlZGl0b3I6dGhpcy5lZGl0b3J9LCEwKSkpfSxpbml0UmVzaXplRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Uub24od2luZG93LFwicmVzaXplXCIsZnVuY3Rpb24oKXthLl9oaWRkZW58fHZvaWQgMD09PWEuX2hpZGRlbnx8KGEuX19yZXNpemVUaW1lciYmd2luZG93LmNsZWFyVGltZW91dChhLl9fcmVzaXplVGltZXIpLGEuX19yZXNpemVUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2EuX19yZXNpemVUaW1lcj1udWxsO3ZhciBiPWEuZ2V0RG9tKCksYz1hLmdldERvbShcImNvbnRlbnRcIiksZD1VRS51aS51aVV0aWxzLmdldENsaWVudFJlY3QoYiksZT1VRS51aS51aVV0aWxzLmdldENsaWVudFJlY3QoYyksZz1mLmdldFZpZXdwb3J0UmVjdCgpO2Muc3R5bGUud2lkdGg9Zy53aWR0aC1kLndpZHRoK2Uud2lkdGgrXCJweFwiLGMuc3R5bGUuaGVpZ2h0PWcuaGVpZ2h0LWQuaGVpZ2h0K2UuaGVpZ2h0K1wicHhcIixiLnN0eWxlLndpZHRoPWcud2lkdGgrXCJweFwiLGIuc3R5bGUuaGVpZ2h0PWcuaGVpZ2h0K1wicHhcIixhLmZpcmVFdmVudChcInJlc2l6ZVwiKX0sMTAwKSl9KX0sZml0U2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RG9tKFwiYm9keVwiKSxiPXRoaXMubWVzdXJlU2l6ZSgpO3JldHVybiBhLnN0eWxlLndpZHRoPWIud2lkdGgrXCJweFwiLGEuc3R5bGUuaGVpZ2h0PWIuaGVpZ2h0K1wicHhcIixifSxzYWZlU2V0T2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmdldERvbSgpLGQ9Zi5nZXRWaWV3cG9ydFJlY3QoKSxlPWYuZ2V0Q2xpZW50UmVjdChjKSxnPWEubGVmdDtnK2Uud2lkdGg+ZC5yaWdodCYmKGc9ZC5yaWdodC1lLndpZHRoKTt2YXIgaD1hLnRvcDtoK2UuaGVpZ2h0PmQuYm90dG9tJiYoaD1kLmJvdHRvbS1lLmhlaWdodCksYy5zdHlsZS5sZWZ0PU1hdGgubWF4KGcsMCkrXCJweFwiLGMuc3R5bGUudG9wPU1hdGgubWF4KGgsMCkrXCJweFwifSxzaG93QXRDZW50ZXI6ZnVuY3Rpb24oKXt2YXIgYT1mLmdldFZpZXdwb3J0UmVjdCgpO2lmKHRoaXMuZnVsbHNjcmVlbil7dmFyIGI9dGhpcy5nZXREb20oKSxjPXRoaXMuZ2V0RG9tKFwiY29udGVudFwiKTtiLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO3ZhciBkPVVFLnVpLnVpVXRpbHMuZ2V0Q2xpZW50UmVjdChiKSxnPVVFLnVpLnVpVXRpbHMuZ2V0Q2xpZW50UmVjdChjKTtiLnN0eWxlLmxlZnQ9XCItMTAwMDAwcHhcIixjLnN0eWxlLndpZHRoPWEud2lkdGgtZC53aWR0aCtnLndpZHRoK1wicHhcIixjLnN0eWxlLmhlaWdodD1hLmhlaWdodC1kLmhlaWdodCtnLmhlaWdodCtcInB4XCIsYi5zdHlsZS53aWR0aD1hLndpZHRoK1wicHhcIixiLnN0eWxlLmhlaWdodD1hLmhlaWdodCtcInB4XCIsYi5zdHlsZS5sZWZ0PTAsdGhpcy5fb3JpZ2luYWxDb250ZXh0PXtodG1sOntvdmVyZmxvd1g6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93WCxvdmVyZmxvd1k6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93WX0sYm9keTp7b3ZlcmZsb3dYOmRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3dYLG92ZXJmbG93WTpkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93WX19LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvd1g9XCJoaWRkZW5cIixkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3dZPVwiaGlkZGVuXCIsZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvd1g9XCJoaWRkZW5cIixkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93WT1cImhpZGRlblwifWVsc2V7dGhpcy5nZXREb20oKS5zdHlsZS5kaXNwbGF5PVwiXCI7dmFyIGg9dGhpcy5maXRTaXplKCksaT0wfHRoaXMuZ2V0RG9tKFwidGl0bGViYXJcIikub2Zmc2V0SGVpZ2h0LGo9YS53aWR0aC8yLWgud2lkdGgvMixrPWEuaGVpZ2h0LzItKGguaGVpZ2h0LWkpLzItaSxsPXRoaXMuZ2V0RG9tKCk7dGhpcy5zYWZlU2V0T2Zmc2V0KHtsZWZ0Ok1hdGgubWF4KDB8aiwwKSx0b3A6TWF0aC5tYXgoMHxrLDApfSksZS5oYXNDbGFzcyhsLFwiZWR1aS1zdGF0ZS1jZW50ZXJlZFwiKXx8KGwuY2xhc3NOYW1lKz1cIiBlZHVpLXN0YXRlLWNlbnRlcmVkXCIpfXRoaXMuX3Nob3coKX0sZ2V0Q29udGVudEh0bWw6ZnVuY3Rpb24oKXt2YXIgYT1cIlwiO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLmNvbnRlbnQ/YT10aGlzLmNvbnRlbnQ6dGhpcy5pZnJhbWVVcmwmJihhPSc8c3BhbiBpZD1cIicrdGhpcy5pZCsnX2NvbnRtYXNrXCIgY2xhc3M9XCJkaWFsb2djb250bWFza1wiPjwvc3Bhbj48aWZyYW1lIGlkPVwiJyt0aGlzLmlkKydfaWZyYW1lXCIgY2xhc3M9XCIlJS1pZnJhbWVcIiBoZWlnaHQ9XCIxMDAlXCIgd2lkdGg9XCIxMDAlXCIgZnJhbWVib3JkZXI9XCIwXCIgc3JjPVwiJyt0aGlzLmlmcmFtZVVybCsnXCI+PC9pZnJhbWU+JyksYX0sZ2V0SHRtbFRwbDpmdW5jdGlvbigpe3ZhciBhPVwiXCI7aWYodGhpcy5idXR0b25zKXtmb3IodmFyIGI9W10sYz0wO2M8dGhpcy5idXR0b25zLmxlbmd0aDtjKyspYltjXT10aGlzLmJ1dHRvbnNbY10ucmVuZGVySHRtbCgpO2E9JzxkaXYgY2xhc3M9XCIlJS1mb290XCI+PGRpdiBpZD1cIiMjX2J1dHRvbnNcIiBjbGFzcz1cIiUlLWJ1dHRvbnNcIj4nK2Iuam9pbihcIlwiKStcIjwvZGl2PjwvZGl2PlwifXJldHVybic8ZGl2IGlkPVwiIyNcIiBjbGFzcz1cIiUlXCI+PGRpdiAnKyh0aGlzLmZ1bGxzY3JlZW4/J2NsYXNzPVwiJSUtd3JhcCBlZHVpLWRpYWxvZy1mdWxsc2NyZWVuLWZsYWdcIic6J2NsYXNzPVwiJSVcIicpKyc+PGRpdiBpZD1cIiMjX2JvZHlcIiBjbGFzcz1cIiUlLWJvZHlcIj48ZGl2IGNsYXNzPVwiJSUtc2hhZG93XCI+PC9kaXY+PGRpdiBpZD1cIiMjX3RpdGxlYmFyXCIgY2xhc3M9XCIlJS10aXRsZWJhclwiPjxkaXYgY2xhc3M9XCIlJS1kcmFnaGFuZGxlXCIgb25tb3VzZWRvd249XCIkJC5fb25UaXRsZWJhck1vdXNlRG93bihldmVudCwgdGhpcyk7XCI+PHNwYW4gY2xhc3M9XCIlJS1jYXB0aW9uXCI+JysodGhpcy50aXRsZXx8XCJcIikrXCI8L3NwYW4+PC9kaXY+XCIrdGhpcy5jbG9zZUJ1dHRvbi5yZW5kZXJIdG1sKCkrJzwvZGl2PjxkaXYgaWQ9XCIjI19jb250ZW50XCIgY2xhc3M9XCIlJS1jb250ZW50XCI+JysodGhpcy5hdXRvUmVzZXQ/XCJcIjp0aGlzLmdldENvbnRlbnRIdG1sKCkpK1wiPC9kaXY+XCIrYStcIjwvZGl2PjwvZGl2PjwvZGl2PlwifSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5tb2RhbE1hc2suZ2V0RG9tKCl8fCh0aGlzLm1vZGFsTWFzay5yZW5kZXIoKSx0aGlzLm1vZGFsTWFzay5oaWRlKCkpLHRoaXMuZHJhZ01hc2suZ2V0RG9tKCl8fCh0aGlzLmRyYWdNYXNrLnJlbmRlcigpLHRoaXMuZHJhZ01hc2suaGlkZSgpKTt2YXIgYT10aGlzO2lmKHRoaXMuYWRkTGlzdGVuZXIoXCJzaG93XCIsZnVuY3Rpb24oKXthLm1vZGFsTWFzay5zaG93KHRoaXMuZ2V0RG9tKCkuc3R5bGUuekluZGV4LTIpfSksdGhpcy5hZGRMaXN0ZW5lcihcImhpZGVcIixmdW5jdGlvbigpe2EubW9kYWxNYXNrLmhpZGUoKX0pLHRoaXMuYnV0dG9ucylmb3IodmFyIGI9MDtiPHRoaXMuYnV0dG9ucy5sZW5ndGg7YisrKXRoaXMuYnV0dG9uc1tiXS5wb3N0UmVuZGVyKCk7ZS5vbih3aW5kb3csXCJyZXNpemVcIixmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLmlzSGlkZGVuKCl8fGEuc2FmZVNldE9mZnNldChmLmdldENsaWVudFJlY3QoYS5nZXREb20oKSkpfSl9KSx0aGlzLl9oaWRlKCl9LG1lc3VyZVNpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldERvbShcImJvZHlcIiksYj1mLmdldENsaWVudFJlY3QodGhpcy5nZXREb20oXCJjb250ZW50XCIpKS53aWR0aCxjPWEuc3R5bGU7cmV0dXJuIGMud2lkdGg9YixmLmdldENsaWVudFJlY3QoYSl9LF9vblRpdGxlYmFyTW91c2VEb3duOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5kcmFnZ2FibGUpe3ZhciBjLGQ9KGYuZ2V0Vmlld3BvcnRSZWN0KCksdGhpcyk7Zi5zdGFydERyYWcoYSx7b25kcmFnc3RhcnQ6ZnVuY3Rpb24oKXtjPWYuZ2V0Q2xpZW50UmVjdChkLmdldERvbSgpKSxkLmdldERvbShcImNvbnRtYXNrXCIpLnN0eWxlLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCIsZC5kcmFnTWFzay5zaG93KGQuZ2V0RG9tKCkuc3R5bGUuekluZGV4LTEpfSxvbmRyYWdtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGU9Yy5sZWZ0K2EsZj1jLnRvcCtiO2Quc2FmZVNldE9mZnNldCh7bGVmdDplLHRvcDpmfSl9LG9uZHJhZ3N0b3A6ZnVuY3Rpb24oKXtkLmdldERvbShcImNvbnRtYXNrXCIpLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixlLnJlbW92ZUNsYXNzZXMoZC5nZXREb20oKSxbXCJlZHVpLXN0YXRlLWNlbnRlcmVkXCJdKSxkLmRyYWdNYXNrLmhpZGUoKX19KX19LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5nZXREb20oXCJjb250ZW50XCIpLmlubmVySFRNTD10aGlzLmdldENvbnRlbnRIdG1sKCksdGhpcy5maXJlRXZlbnQoXCJkaWFsb2dhZnRlcnJlc2V0XCIpfSxfc2hvdzpmdW5jdGlvbigpe3RoaXMuX2hpZGRlbiYmKHRoaXMuZ2V0RG9tKCkuc3R5bGUuZGlzcGxheT1cIlwiLHRoaXMuZWRpdG9yLmNvbnRhaW5lci5zdHlsZS56SW5kZXgmJih0aGlzLmdldERvbSgpLnN0eWxlLnpJbmRleD0xKnRoaXMuZWRpdG9yLmNvbnRhaW5lci5zdHlsZS56SW5kZXgrMTApLHRoaXMuX2hpZGRlbj0hMSx0aGlzLmZpcmVFdmVudChcInNob3dcIiksYmFpZHUuZWRpdG9yLnVpLnVpVXRpbHMuZ2V0Rml4ZWRMYXllcigpLnN0eWxlLnpJbmRleD10aGlzLmdldERvbSgpLnN0eWxlLnpJbmRleC00KX0saXNIaWRkZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGlkZGVufSxfaGlkZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9oaWRkZW4pe3ZhciBhPXRoaXMuZ2V0RG9tKCk7YS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGEuc3R5bGUuekluZGV4PVwiXCIsYS5zdHlsZS53aWR0aD1cIlwiLGEuc3R5bGUuaGVpZ2h0PVwiXCIsdGhpcy5faGlkZGVuPSEwLHRoaXMuZmlyZUV2ZW50KFwiaGlkZVwiKX19LG9wZW46ZnVuY3Rpb24oKXtpZih0aGlzLmF1dG9SZXNldCl0cnl7dGhpcy5yZXNldCgpfWNhdGNoKGEpe3RoaXMucmVuZGVyKCksdGhpcy5vcGVuKCl9aWYodGhpcy5zaG93QXRDZW50ZXIoKSx0aGlzLmlmcmFtZVVybCl0cnl7dGhpcy5nZXREb20oXCJpZnJhbWVcIikuZm9jdXMoKX1jYXRjaChiKXt9Yz10aGlzfSxfb25DbG9zZUJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5jbG9zZSghMSl9LGNsb3NlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZmlyZUV2ZW50KFwiY2xvc2VcIixhKSE9PSExKXt0aGlzLmZ1bGxzY3JlZW4mJihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3dYPXRoaXMuX29yaWdpbmFsQ29udGV4dC5odG1sLm92ZXJmbG93WCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3dZPXRoaXMuX29yaWdpbmFsQ29udGV4dC5odG1sLm92ZXJmbG93WSxkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93WD10aGlzLl9vcmlnaW5hbENvbnRleHQuYm9keS5vdmVyZmxvd1gsZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvd1k9dGhpcy5fb3JpZ2luYWxDb250ZXh0LmJvZHkub3ZlcmZsb3dZLGRlbGV0ZSB0aGlzLl9vcmlnaW5hbENvbnRleHQpLHRoaXMuX2hpZGUoKTt2YXIgYj10aGlzLmdldERvbShcImNvbnRlbnRcIiksYz10aGlzLmdldERvbShcImlmcmFtZVwiKTtpZihiJiZjKXt2YXIgZD1jLmNvbnRlbnREb2N1bWVudHx8Yy5jb250ZW50V2luZG93LmRvY3VtZW50O2QmJihkLmJvZHkuaW5uZXJIVE1MPVwiXCIpLGUucmVtb3ZlKGIpfX19fSxkLmluaGVyaXRzKGosaCl9KCksZnVuY3Rpb24oKXt2YXIgYT1iYWlkdS5lZGl0b3IudXRpbHMsYj1iYWlkdS5lZGl0b3IudWkuTWVudSxjPWJhaWR1LmVkaXRvci51aS5TcGxpdEJ1dHRvbixkPWJhaWR1LmVkaXRvci51aS5NZW51QnV0dG9uPWZ1bmN0aW9uKGEpe3RoaXMuaW5pdE9wdGlvbnMoYSksdGhpcy5pbml0TWVudUJ1dHRvbigpfTtkLnByb3RvdHlwZT17aW5pdE1lbnVCdXR0b246ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMudWlOYW1lPVwibWVudWJ1dHRvblwiLHRoaXMucG9wdXA9bmV3IGIoe2l0ZW1zOmEuaXRlbXMsY2xhc3NOYW1lOmEuY2xhc3NOYW1lLGVkaXRvcjphLmVkaXRvcn0pLHRoaXMucG9wdXAuYWRkTGlzdGVuZXIoXCJzaG93XCIsZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcyxjPTA7YzxiLml0ZW1zLmxlbmd0aDtjKyspYi5pdGVtc1tjXS5yZW1vdmVTdGF0ZShcImNoZWNrZWRcIiksYi5pdGVtc1tjXS52YWx1ZT09YS5fdmFsdWUmJihiLml0ZW1zW2NdLmFkZFN0YXRlKFwiY2hlY2tlZFwiKSx0aGlzLnZhbHVlPWEuX3ZhbHVlKX0pLHRoaXMuaW5pdFNwbGl0QnV0dG9uKCl9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuX3ZhbHVlPWF9fSxhLmluaGVyaXRzKGQsYyl9KCksZnVuY3Rpb24oKXt2YXIgYT1iYWlkdS5lZGl0b3IudXRpbHMsYj1iYWlkdS5lZGl0b3IudWkuUG9wdXAsYz1iYWlkdS5lZGl0b3IudWkuU3BsaXRCdXR0b24sZD1iYWlkdS5lZGl0b3IudWkuTXVsdGlNZW51UG9wPWZ1bmN0aW9uKGEpe3RoaXMuaW5pdE9wdGlvbnMoYSksdGhpcy5pbml0TXVsdGlNZW51KCl9O2QucHJvdG90eXBlPXtpbml0TXVsdGlNZW51OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLnBvcHVwPW5ldyBiKHtjb250ZW50OlwiXCIsZWRpdG9yOmEuZWRpdG9yLGlmcmFtZV9yZW5kZXJlZDohMSxvbnNob3c6ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZV9yZW5kZXJlZHx8KHRoaXMuaWZyYW1lX3JlbmRlcmVkPSEwLHRoaXMuZ2V0RG9tKFwiY29udGVudFwiKS5pbm5lckhUTUw9JzxpZnJhbWUgaWQ9XCInK2EuaWQrJ19pZnJhbWVcIiBzcmM9XCInK2EuaWZyYW1lVXJsKydcIiBmcmFtZWJvcmRlcj1cIjBcIj48L2lmcmFtZT4nLGEuZWRpdG9yLmNvbnRhaW5lci5zdHlsZS56SW5kZXgmJih0aGlzLmdldERvbSgpLnN0eWxlLnpJbmRleD0xKmEuZWRpdG9yLmNvbnRhaW5lci5zdHlsZS56SW5kZXgrMSkpfX0pLHRoaXMub25idXR0b25jbGljaz1mdW5jdGlvbigpe3RoaXMuc2hvd1BvcHVwKCl9LHRoaXMuaW5pdFNwbGl0QnV0dG9uKCl9fSxhLmluaGVyaXRzKGQsYyl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBiPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQsYz1nLmZpbmRQYXJlbnQoYixmdW5jdGlvbihhKXtyZXR1cm4gZy5oYXNDbGFzcyhhLFwiZWR1aS1zaG9ydGN1dG1lbnVcIil8fGcuaGFzQ2xhc3MoYSxcImVkdWktcG9wdXBcIil9LCEwKTtpZighYylmb3IodmFyIGQsZT0wO2Q9aFtlKytdOylkLmhpZGUoKX12YXIgYixjPWJhaWR1LmVkaXRvci51aSxkPWMuVUlCYXNlLGU9Yy51aVV0aWxzLGY9YmFpZHUuZWRpdG9yLnV0aWxzLGc9YmFpZHUuZWRpdG9yLmRvbS5kb21VdGlscyxoPVtdLGk9ITEsaj1jLlNob3J0Q3V0TWVudT1mdW5jdGlvbihhKXt0aGlzLmluaXRPcHRpb25zKGEpLHRoaXMuaW5pdFNob3J0Q3V0TWVudSgpfTtqLnBvc3RIaWRlPWEsai5wcm90b3R5cGU9e2lzSGlkZGVuOiEwLFNQQUNFOjUsaW5pdFNob3J0Q3V0TWVudTpmdW5jdGlvbigpe3RoaXMuaXRlbXM9dGhpcy5pdGVtc3x8W10sdGhpcy5pbml0VUlCYXNlKCksdGhpcy5pbml0SXRlbXMoKSx0aGlzLmluaXRFdmVudCgpLGgucHVzaCh0aGlzKX0saW5pdEV2ZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxjPWEuZWRpdG9yLmRvY3VtZW50O2cub24oYyxcIm1vdXNlbW92ZVwiLGZ1bmN0aW9uKGMpe2lmKGEuaXNIaWRkZW49PT0hMSl7aWYoYS5nZXRTdWJNZW51TWFyaygpfHxcImNvbnRleHRtZW51XCI9PWEuZXZlbnRUeXBlKXJldHVybjt2YXIgZD0hMCxlPWEuZ2V0RG9tKCksZj1lLm9mZnNldFdpZHRoLGc9ZS5vZmZzZXRIZWlnaHQsaD1mLzIrYS5TUEFDRSxpPWcvMixqPU1hdGguYWJzKGMuc2NyZWVuWC1hLmxlZnQpLGs9TWF0aC5hYnMoYy5zY3JlZW5ZLWEudG9wKTtjbGVhclRpbWVvdXQoYiksYj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7az4wJiZrPGk/YS5zZXRPcGFjaXR5KGUsXCIxXCIpOms+aSYmazxpKzcwPyhhLnNldE9wYWNpdHkoZSxcIjAuNVwiKSxkPSExKTprPmkrNzAmJms8aSsxNDAmJmEuaGlkZSgpLGQmJmo+MCYmajxoP2Euc2V0T3BhY2l0eShlLFwiMVwiKTpqPmgmJmo8aCs3MD9hLnNldE9wYWNpdHkoZSxcIjAuNVwiKTpqPmgrNzAmJmo8aCsxNDAmJmEuaGlkZSgpfSl9fSksYnJvd3Nlci5jaHJvbWUmJmcub24oYyxcIm1vdXNlb3V0XCIsZnVuY3Rpb24oYil7dmFyIGM9Yi5yZWxhdGVkVGFyZ2V0fHxiLnRvRWxlbWVudDtudWxsIT1jJiZcIkhUTUxcIiE9Yy50YWdOYW1lfHxhLmhpZGUoKX0pLGEuZWRpdG9yLmFkZExpc3RlbmVyKFwiYWZ0ZXJoaWRlcG9wXCIsZnVuY3Rpb24oKXthLmlzSGlkZGVufHwoaT0hMCl9KX0saW5pdEl0ZW1zOmZ1bmN0aW9uKCl7aWYoZi5pc0FycmF5KHRoaXMuaXRlbXMpKWZvcih2YXIgYT0wLGI9dGhpcy5pdGVtcy5sZW5ndGg7YTxiO2ErKyl7dmFyIGQ9dGhpcy5pdGVtc1thXS50b0xvd2VyQ2FzZSgpO2NbZF0mJih0aGlzLml0ZW1zW2FdPW5ldyBjW2RdKHRoaXMuZWRpdG9yKSx0aGlzLml0ZW1zW2FdLmNsYXNzTmFtZSs9XCIgZWR1aS1zaG9ydGN1dHN1Ym1lbnUgXCIpfX0sc2V0T3BhY2l0eTpmdW5jdGlvbihhLGIpe2Jyb3dzZXIuaWUmJmJyb3dzZXIudmVyc2lvbjw5P2Euc3R5bGUuZmlsdGVyPVwiYWxwaGEob3BhY2l0eSA9IFwiKzEwMCpwYXJzZUZsb2F0KGIpK1wiKTtcIjphLnN0eWxlLm9wYWNpdHk9Yn0sZ2V0U3ViTWVudU1hcms6ZnVuY3Rpb24oKXtpPSExO2Zvcih2YXIgYSxiPWUuZ2V0Rml4ZWRMYXllcigpLGM9Zy5nZXRFbGVtZW50c0J5VGFnTmFtZShiLFwiZGl2XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGcuaGFzQ2xhc3MoYSxcImVkdWktc2hvcnRjdXRzdWJtZW51IGVkdWktcG9wdXBcIil9KSxkPTA7YT1jW2QrK107KVwibm9uZVwiIT1hLnN0eWxlLmRpc3BsYXkmJihpPSEwKTtyZXR1cm4gaX0sc2hvdzpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7YS5sZWZ0PDAmJihhLmxlZnQ9MCksYS50b3A8MCYmKGEudG9wPTApLGkuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6XCIrYS5sZWZ0K1wicHg7dG9wOlwiK2EudG9wK1wicHg7XCJ9ZnVuY3Rpb24gZChhKXthLnRhZ05hbWV8fChhPWEuZ2V0RG9tKCkpLGgubGVmdD1wYXJzZUludChhLnN0eWxlLmxlZnQpLGgudG9wPXBhcnNlSW50KGEuc3R5bGUudG9wKSxoLnRvcC09aS5vZmZzZXRIZWlnaHQrMTUsYyhoKX12YXIgZj10aGlzLGg9e30saT10aGlzLmdldERvbSgpLGo9ZS5nZXRGaXhlZExheWVyKCk7aWYoZi5ldmVudFR5cGU9YS50eXBlLGkuc3R5bGUuY3NzVGV4dD1cImRpc3BsYXk6YmxvY2s7bGVmdDotOTk5OXB4XCIsXCJjb250ZXh0bWVudVwiPT1hLnR5cGUmJmIpe3ZhciBrPWcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoaixcImRpdlwiLFwiZWR1aS1jb250ZXh0bWVudVwiKVswXTtrP2Qoayk6Zi5lZGl0b3IuYWRkTGlzdGVuZXIoXCJhZnRlcnNob3djb250ZXh0bWVudVwiLGZ1bmN0aW9uKGEsYil7ZChiKX0pfWVsc2UgaD1lLmdldFZpZXdwb3J0T2Zmc2V0QnlFdmVudChhKSxoLnRvcC09aS5vZmZzZXRIZWlnaHQrZi5TUEFDRSxoLmxlZnQrPWYuU1BBQ0UrMjAsYyhoKSxmLnNldE9wYWNpdHkoaSwuMik7Zi5pc0hpZGRlbj0hMSxmLmxlZnQ9YS5zY3JlZW5YK2kub2Zmc2V0V2lkdGgvMi1mLlNQQUNFLGYudG9wPWEuc2NyZWVuWS1pLm9mZnNldEhlaWdodC8yLWYuU1BBQ0UsZi5lZGl0b3ImJihpLnN0eWxlLnpJbmRleD0xKmYuZWRpdG9yLmNvbnRhaW5lci5zdHlsZS56SW5kZXgrMTAsai5zdHlsZS56SW5kZXg9aS5zdHlsZS56SW5kZXgtMSl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmdldERvbSgpJiYodGhpcy5nZXREb20oKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSx0aGlzLmlzSGlkZGVuPSEwfSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7aWYoZi5pc0FycmF5KHRoaXMuaXRlbXMpKWZvcih2YXIgYSxiPTA7YT10aGlzLml0ZW1zW2IrK107KWEucG9zdFJlbmRlcigpfSxnZXRIdG1sVHBsOmZ1bmN0aW9uKCl7dmFyIGE7aWYoZi5pc0FycmF5KHRoaXMuaXRlbXMpKXthPVtdO2Zvcih2YXIgYj0wO2I8dGhpcy5pdGVtcy5sZW5ndGg7YisrKWFbYl09dGhpcy5pdGVtc1tiXS5yZW5kZXJIdG1sKCk7YT1hLmpvaW4oXCJcIil9ZWxzZSBhPXRoaXMuaXRlbXM7cmV0dXJuJzxkaXYgaWQ9XCIjI1wiIGNsYXNzPVwiJSUgZWR1aS10b29sYmFyXCIgZGF0YS1zcmM9XCJzaG9ydGN1dG1lbnVcIiBvbm1vdXNlZG93bj1cInJldHVybiBmYWxzZTtcIiBvbnNlbGVjdHN0YXJ0PVwicmV0dXJuIGZhbHNlO1wiID4nK2ErXCI8L2Rpdj5cIn19LGYuaW5oZXJpdHMoaixkKSxnLm9uKGRvY3VtZW50LFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYil7YShiKX0pLGcub24od2luZG93LFwic2Nyb2xsXCIsZnVuY3Rpb24oYil7YShiKX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGE9YmFpZHUuZWRpdG9yLnV0aWxzLGI9YmFpZHUuZWRpdG9yLnVpLlVJQmFzZSxjPWJhaWR1LmVkaXRvci51aS5CcmVha2xpbmU9ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRTZXBhcmF0b3IoKX07Yy5wcm90b3R5cGU9e3VpTmFtZTpcIkJyZWFrbGluZVwiLGluaXRTZXBhcmF0b3I6ZnVuY3Rpb24oKXt0aGlzLmluaXRVSUJhc2UoKX0sZ2V0SHRtbFRwbDpmdW5jdGlvbigpe3JldHVyblwiPGJyLz5cIn19LGEuaW5oZXJpdHMoYyxiKX0oKSxmdW5jdGlvbigpe3ZhciBhPWJhaWR1LmVkaXRvci51dGlscyxiPWJhaWR1LmVkaXRvci5kb20uZG9tVXRpbHMsYz1iYWlkdS5lZGl0b3IudWkuVUlCYXNlLGQ9YmFpZHUuZWRpdG9yLnVpLk1lc3NhZ2U9ZnVuY3Rpb24oYSl7dGhpcy5pbml0T3B0aW9ucyhhKSx0aGlzLmluaXRNZXNzYWdlKCl9O2QucHJvdG90eXBlPXtpbml0TWVzc2FnZTpmdW5jdGlvbigpe3RoaXMuaW5pdFVJQmFzZSgpfSxnZXRIdG1sVHBsOmZ1bmN0aW9uKCl7cmV0dXJuJzxkaXYgaWQ9XCIjI1wiIGNsYXNzPVwiZWR1aS1tZXNzYWdlICUlXCI+IDxkaXYgaWQ9XCIjI19jbG9zZXJcIiBjbGFzcz1cImVkdWktbWVzc2FnZS1jbG9zZXJcIj7DlzwvZGl2PiA8ZGl2IGlkPVwiIyNfYm9keVwiIGNsYXNzPVwiZWR1aS1tZXNzYWdlLWJvZHkgZWR1aS1tZXNzYWdlLXR5cGUtaW5mb1wiPiA8aWZyYW1lIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDotMTtsZWZ0OjA7dG9wOjA7YmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XCIgZnJhbWVib3JkZXI9XCIwXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHNyYz1cImFib3V0OmJsYW5rXCI+PC9pZnJhbWU+IDxkaXYgY2xhc3M9XCJlZHVpLXNoYWRvd1wiPjwvZGl2PiA8ZGl2IGlkPVwiIyNfY29udGVudFwiIGNsYXNzPVwiZWR1aS1tZXNzYWdlLWNvbnRlbnRcIj4gIDwvZGl2PiA8L2Rpdj48L2Rpdj4nfSxyZXNldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2Eua2VlcHNob3d8fChjbGVhclRpbWVvdXQodGhpcy50aW1lciksYi50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5oaWRlKCl9LGEudGltZW91dHx8NGUzKSksdm9pZCAwIT09YS5jb250ZW50JiZiLnNldENvbnRlbnQoYS5jb250ZW50KSx2b2lkIDAhPT1hLnR5cGUmJmIuc2V0VHlwZShhLnR5cGUpLGIuc2hvdygpfSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxjPXRoaXMuZ2V0RG9tKFwiY2xvc2VyXCIpO2MmJmIub24oYyxcImNsaWNrXCIsZnVuY3Rpb24oKXthLmhpZGUoKX0pfSxzZXRDb250ZW50OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0RG9tKFwiY29udGVudFwiKS5pbm5lckhUTUw9YX0sc2V0VHlwZTpmdW5jdGlvbihhKXthPWF8fFwiaW5mb1wiO3ZhciBiPXRoaXMuZ2V0RG9tKFwiYm9keVwiKTtiLmNsYXNzTmFtZT1iLmNsYXNzTmFtZS5yZXBsYWNlKC9lZHVpLW1lc3NhZ2UtdHlwZS1bXFx3LV0rLyxcImVkdWktbWVzc2FnZS10eXBlLVwiK2EpfSxnZXRDb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RG9tKFwiY29udGVudFwiKS5pbm5lckhUTUx9LGdldFR5cGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldERvbShcImJvZHlcIikubWF0Y2goL2VkdWktbWVzc2FnZS10eXBlLShbXFx3LV0rKS8pO3JldHVybiBhP2FbMV06XCJcIn0sc2hvdzpmdW5jdGlvbigpe3RoaXMuZ2V0RG9tKCkuc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9LGhpZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldERvbSgpO2EmJihhLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSkpfX0sYS5pbmhlcml0cyhkLGMpfSgpLGZ1bmN0aW9uKCl7dmFyIGE9YmFpZHUuZWRpdG9yLnV0aWxzLGI9YmFpZHUuZWRpdG9yLnVpLGM9Yi5EaWFsb2c7Yi5idXR0b25zPXt9LGIuRGlhbG9nPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBjKGEpO3JldHVybiBiLmFkZExpc3RlbmVyKFwiaGlkZVwiLGZ1bmN0aW9uKCl7aWYoYi5lZGl0b3Ipe3ZhciBhPWIuZWRpdG9yO3RyeXtpZihicm93c2VyLmdlY2tvKXt2YXIgYz1hLndpbmRvdy5zY3JvbGxZLGQ9YS53aW5kb3cuc2Nyb2xsWDthLmJvZHkuZm9jdXMoKSxhLndpbmRvdy5zY3JvbGxUbyhkLGMpfWVsc2UgYS5mb2N1cygpfWNhdGNoKGUpe319fSksYn07Zm9yKHZhciBkLGU9e2FuY2hvcjpcIn4vZGlhbG9ncy9hbmNob3IvYW5jaG9yLmh0bWxcIixpbnNlcnRpbWFnZTpcIn4vZGlhbG9ncy9pbWFnZS9pbWFnZS5odG1sXCIsbGluazpcIn4vZGlhbG9ncy9saW5rL2xpbmsuaHRtbFwiLHNwZWNoYXJzOlwifi9kaWFsb2dzL3NwZWNoYXJzL3NwZWNoYXJzLmh0bWxcIixzZWFyY2hyZXBsYWNlOlwifi9kaWFsb2dzL3NlYXJjaHJlcGxhY2Uvc2VhcmNocmVwbGFjZS5odG1sXCIsbWFwOlwifi9kaWFsb2dzL21hcC9tYXAuaHRtbFwiLGdtYXA6XCJ+L2RpYWxvZ3MvZ21hcC9nbWFwLmh0bWxcIixpbnNlcnR2aWRlbzpcIn4vZGlhbG9ncy92aWRlby92aWRlby5odG1sXCIsaGVscDpcIn4vZGlhbG9ncy9oZWxwL2hlbHAuaHRtbFwiLHByZXZpZXc6XCJ+L2RpYWxvZ3MvcHJldmlldy9wcmV2aWV3Lmh0bWxcIixlbW90aW9uOlwifi9kaWFsb2dzL2Vtb3Rpb24vZW1vdGlvbi5odG1sXCIsd29yZGltYWdlOlwifi9kaWFsb2dzL3dvcmRpbWFnZS93b3JkaW1hZ2UuaHRtbFwiLGF0dGFjaG1lbnQ6XCJ+L2RpYWxvZ3MvYXR0YWNobWVudC9hdHRhY2htZW50Lmh0bWxcIixpbnNlcnRmcmFtZTpcIn4vZGlhbG9ncy9pbnNlcnRmcmFtZS9pbnNlcnRmcmFtZS5odG1sXCIsZWRpdHRpcDpcIn4vZGlhbG9ncy90YWJsZS9lZGl0dGlwLmh0bWxcIixlZGl0dGFibGU6XCJ+L2RpYWxvZ3MvdGFibGUvZWRpdHRhYmxlLmh0bWxcIixlZGl0dGQ6XCJ+L2RpYWxvZ3MvdGFibGUvZWRpdHRkLmh0bWxcIix3ZWJhcHA6XCJ+L2RpYWxvZ3Mvd2ViYXBwL3dlYmFwcC5odG1sXCIsc25hcHNjcmVlbjpcIn4vZGlhbG9ncy9zbmFwc2NyZWVuL3NuYXBzY3JlZW4uaHRtbFwiLHNjcmF3bDpcIn4vZGlhbG9ncy9zY3Jhd2wvc2NyYXdsLmh0bWxcIixtdXNpYzpcIn4vZGlhbG9ncy9tdXNpYy9tdXNpYy5odG1sXCIsdGVtcGxhdGU6XCJ+L2RpYWxvZ3MvdGVtcGxhdGUvdGVtcGxhdGUuaHRtbFwiLGJhY2tncm91bmQ6XCJ+L2RpYWxvZ3MvYmFja2dyb3VuZC9iYWNrZ3JvdW5kLmh0bWxcIixjaGFydHM6XCJ+L2RpYWxvZ3MvY2hhcnRzL2NoYXJ0cy5odG1sXCJ9LGY9W1widW5kb1wiLFwicmVkb1wiLFwiZm9ybWF0bWF0Y2hcIixcImJvbGRcIixcIml0YWxpY1wiLFwidW5kZXJsaW5lXCIsXCJmb250Ym9yZGVyXCIsXCJ0b3VwcGVyY2FzZVwiLFwidG9sb3dlcmNhc2VcIixcInN0cmlrZXRocm91Z2hcIixcInN1YnNjcmlwdFwiLFwic3VwZXJzY3JpcHRcIixcInNvdXJjZVwiLFwiaW5kZW50XCIsXCJvdXRkZW50XCIsXCJibG9ja3F1b3RlXCIsXCJwYXN0ZXBsYWluXCIsXCJwYWdlYnJlYWtcIixcInNlbGVjdGFsbFwiLFwicHJpbnRcIixcImhvcml6b250YWxcIixcInJlbW92ZWZvcm1hdFwiLFwidGltZVwiLFwiZGF0ZVwiLFwidW5saW5rXCIsXCJpbnNlcnRwYXJhZ3JhcGhiZWZvcmV0YWJsZVwiLFwiaW5zZXJ0cm93XCIsXCJpbnNlcnRjb2xcIixcIm1lcmdlcmlnaHRcIixcIm1lcmdlZG93blwiLFwiZGVsZXRlcm93XCIsXCJkZWxldGVjb2xcIixcInNwbGl0dG9yb3dzXCIsXCJzcGxpdHRvY29sc1wiLFwic3BsaXR0b2NlbGxzXCIsXCJtZXJnZWNlbGxzXCIsXCJkZWxldGV0YWJsZVwiLFwiZHJhZnRzXCJdLGc9MDtkPWZbZysrXTspZD1kLnRvTG93ZXJDYXNlKCksYltkXT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9bmV3IGIuQnV0dG9uKHtjbGFzc05hbWU6XCJlZHVpLWZvci1cIithLHRpdGxlOmMub3B0aW9ucy5sYWJlbE1hcFthXXx8Yy5nZXRMYW5nKFwibGFiZWxNYXAuXCIrYSl8fFwiXCIsb25jbGljazpmdW5jdGlvbigpe2MuZXhlY0NvbW1hbmQoYSl9LHRoZW1lOmMub3B0aW9ucy50aGVtZSxzaG93VGV4dDohMX0pO3JldHVybiBiLmJ1dHRvbnNbYV09ZCxjLmFkZExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsZnVuY3Rpb24oYixlLGYpe3ZhciBnPWMucXVlcnlDb21tYW5kU3RhdGUoYSk7Zz09LTE/KGQuc2V0RGlzYWJsZWQoITApLGQuc2V0Q2hlY2tlZCghMSkpOmZ8fChkLnNldERpc2FibGVkKCExKSxkLnNldENoZWNrZWQoZykpfSksZH19KGQpO2IuY2xlYXJkb2M9ZnVuY3Rpb24oYSl7dmFyIGM9bmV3IGIuQnV0dG9uKHtjbGFzc05hbWU6XCJlZHVpLWZvci1jbGVhcmRvY1wiLHRpdGxlOmEub3B0aW9ucy5sYWJlbE1hcC5jbGVhcmRvY3x8YS5nZXRMYW5nKFwibGFiZWxNYXAuY2xlYXJkb2NcIil8fFwiXCIsdGhlbWU6YS5vcHRpb25zLnRoZW1lLG9uY2xpY2s6ZnVuY3Rpb24oKXtjb25maXJtKGEuZ2V0TGFuZyhcImNvbmZpcm1DbGVhclwiKSkmJmEuZXhlY0NvbW1hbmQoXCJjbGVhcmRvY1wiKX19KTtyZXR1cm4gYi5idXR0b25zLmNsZWFyZG9jPWMsYS5hZGRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKCl7Yy5zZXREaXNhYmxlZChhLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiY2xlYXJkb2NcIik9PS0xKX0pLGN9O3ZhciBoPXtqdXN0aWZ5OltcImxlZnRcIixcInJpZ2h0XCIsXCJjZW50ZXJcIixcImp1c3RpZnlcIl0saW1hZ2VmbG9hdDpbXCJub25lXCIsXCJsZWZ0XCIsXCJjZW50ZXJcIixcInJpZ2h0XCJdLGRpcmVjdGlvbmFsaXR5OltcImx0clwiLFwicnRsXCJdfTtmb3IodmFyIGkgaW4gaCkhZnVuY3Rpb24oYSxjKXtmb3IodmFyIGQsZT0wO2Q9Y1tlKytdOykhZnVuY3Rpb24oYyl7YlthLnJlcGxhY2UoXCJmbG9hdFwiLFwiXCIpK2NdPWZ1bmN0aW9uKGQpe3ZhciBlPW5ldyBiLkJ1dHRvbih7XG5jbGFzc05hbWU6XCJlZHVpLWZvci1cIithLnJlcGxhY2UoXCJmbG9hdFwiLFwiXCIpK2MsdGl0bGU6ZC5vcHRpb25zLmxhYmVsTWFwW2EucmVwbGFjZShcImZsb2F0XCIsXCJcIikrY118fGQuZ2V0TGFuZyhcImxhYmVsTWFwLlwiK2EucmVwbGFjZShcImZsb2F0XCIsXCJcIikrYyl8fFwiXCIsdGhlbWU6ZC5vcHRpb25zLnRoZW1lLG9uY2xpY2s6ZnVuY3Rpb24oKXtkLmV4ZWNDb21tYW5kKGEsYyl9fSk7cmV0dXJuIGIuYnV0dG9uc1thXT1lLGQuYWRkTGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbihiLGYsZyl7ZS5zZXREaXNhYmxlZChkLnF1ZXJ5Q29tbWFuZFN0YXRlKGEpPT0tMSksZS5zZXRDaGVja2VkKGQucXVlcnlDb21tYW5kVmFsdWUoYSk9PWMmJiFnKX0pLGV9fShkKX0oaSxoW2ldKTtmb3IodmFyIGQsZz0wO2Q9W1wiYmFja2NvbG9yXCIsXCJmb3JlY29sb3JcIl1bZysrXTspYltkXT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9bmV3IGIuQ29sb3JCdXR0b24oe2NsYXNzTmFtZTpcImVkdWktZm9yLVwiK2EsY29sb3I6XCJkZWZhdWx0XCIsdGl0bGU6Yy5vcHRpb25zLmxhYmVsTWFwW2FdfHxjLmdldExhbmcoXCJsYWJlbE1hcC5cIithKXx8XCJcIixlZGl0b3I6YyxvbnBpY2tjb2xvcjpmdW5jdGlvbihiLGQpe2MuZXhlY0NvbW1hbmQoYSxkKX0sb25waWNrbm9jb2xvcjpmdW5jdGlvbigpe2MuZXhlY0NvbW1hbmQoYSxcImRlZmF1bHRcIiksdGhpcy5zZXRDb2xvcihcInRyYW5zcGFyZW50XCIpLHRoaXMuY29sb3I9XCJkZWZhdWx0XCJ9LG9uYnV0dG9uY2xpY2s6ZnVuY3Rpb24oKXtjLmV4ZWNDb21tYW5kKGEsdGhpcy5jb2xvcil9fSk7cmV0dXJuIGIuYnV0dG9uc1thXT1kLGMuYWRkTGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbigpe2Quc2V0RGlzYWJsZWQoYy5xdWVyeUNvbW1hbmRTdGF0ZShhKT09LTEpfSksZH19KGQpO3ZhciBqPXtub09rOltcInNlYXJjaHJlcGxhY2VcIixcImhlbHBcIixcInNwZWNoYXJzXCIsXCJ3ZWJhcHBcIixcInByZXZpZXdcIl0sb2s6W1wiYXR0YWNobWVudFwiLFwiYW5jaG9yXCIsXCJsaW5rXCIsXCJpbnNlcnRpbWFnZVwiLFwibWFwXCIsXCJnbWFwXCIsXCJpbnNlcnRmcmFtZVwiLFwid29yZGltYWdlXCIsXCJpbnNlcnR2aWRlb1wiLFwiaW5zZXJ0ZnJhbWVcIixcImVkaXR0aXBcIixcImVkaXR0YWJsZVwiLFwiZWRpdHRkXCIsXCJzY3Jhd2xcIixcInRlbXBsYXRlXCIsXCJtdXNpY1wiLFwiYmFja2dyb3VuZFwiLFwiY2hhcnRzXCJdfTtmb3IodmFyIGkgaW4gaikhZnVuY3Rpb24oYyxkKXtmb3IodmFyIGYsZz0wO2Y9ZFtnKytdOylicm93c2VyLm9wZXJhJiZcInNlYXJjaHJlcGxhY2VcIj09PWZ8fCFmdW5jdGlvbihkKXtiW2RdPWZ1bmN0aW9uKGYsZyxoKXtnPWd8fChmLm9wdGlvbnMuaWZyYW1lVXJsTWFwfHx7fSlbZF18fGVbZF0saD1mLm9wdGlvbnMubGFiZWxNYXBbZF18fGYuZ2V0TGFuZyhcImxhYmVsTWFwLlwiK2QpfHxcIlwiO3ZhciBpO2cmJihpPW5ldyBiLkRpYWxvZyhhLmV4dGVuZCh7aWZyYW1lVXJsOmYudWkubWFwVXJsKGcpLGVkaXRvcjpmLGNsYXNzTmFtZTpcImVkdWktZm9yLVwiK2QsdGl0bGU6aCxob2xkU2Nyb2xsOlwiaW5zZXJ0aW1hZ2VcIj09PWQsZnVsbHNjcmVlbjovY2hhcnRzfHByZXZpZXcvLnRlc3QoZCksY2xvc2VEaWFsb2c6Zi5nZXRMYW5nKFwiY2xvc2VEaWFsb2dcIil9LFwib2tcIj09Yz97YnV0dG9uczpbe2NsYXNzTmFtZTpcImVkdWktb2tidXR0b25cIixsYWJlbDpmLmdldExhbmcoXCJva1wiKSxlZGl0b3I6ZixvbmNsaWNrOmZ1bmN0aW9uKCl7aS5jbG9zZSghMCl9fSx7Y2xhc3NOYW1lOlwiZWR1aS1jYW5jZWxidXR0b25cIixsYWJlbDpmLmdldExhbmcoXCJjYW5jZWxcIiksZWRpdG9yOmYsb25jbGljazpmdW5jdGlvbigpe2kuY2xvc2UoITEpfX1dfTp7fSkpLGYudWkuX2RpYWxvZ3NbZCtcIkRpYWxvZ1wiXT1pKTt2YXIgaj1uZXcgYi5CdXR0b24oe2NsYXNzTmFtZTpcImVkdWktZm9yLVwiK2QsdGl0bGU6aCxvbmNsaWNrOmZ1bmN0aW9uKCl7aWYoaSlzd2l0Y2goZCl7Y2FzZVwid29yZGltYWdlXCI6dmFyIGE9Zi5leGVjQ29tbWFuZChcIndvcmRpbWFnZVwiKTthJiZhLmxlbmd0aCYmKGkucmVuZGVyKCksaS5vcGVuKCkpO2JyZWFrO2Nhc2VcInNjcmF3bFwiOmYucXVlcnlDb21tYW5kU3RhdGUoXCJzY3Jhd2xcIikhPS0xJiYoaS5yZW5kZXIoKSxpLm9wZW4oKSk7YnJlYWs7ZGVmYXVsdDppLnJlbmRlcigpLGkub3BlbigpfX0sdGhlbWU6Zi5vcHRpb25zLnRoZW1lLGRpc2FibGVkOlwic2NyYXdsXCI9PWQmJmYucXVlcnlDb21tYW5kU3RhdGUoXCJzY3Jhd2xcIik9PS0xfHxcImNoYXJ0c1wiPT1kfSk7cmV0dXJuIGIuYnV0dG9uc1tkXT1qLGYuYWRkTGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbigpe3ZhciBhPXtlZGl0dGFibGU6MX07aWYoIShkIGluIGEpKXt2YXIgYj1mLnF1ZXJ5Q29tbWFuZFN0YXRlKGQpO2ouZ2V0RG9tKCkmJihqLnNldERpc2FibGVkKGI9PS0xKSxqLnNldENoZWNrZWQoYikpfX0pLGp9fShmLnRvTG93ZXJDYXNlKCkpfShpLGpbaV0pO2Iuc25hcHNjcmVlbj1mdW5jdGlvbihhLGMsZCl7ZD1hLm9wdGlvbnMubGFiZWxNYXAuc25hcHNjcmVlbnx8YS5nZXRMYW5nKFwibGFiZWxNYXAuc25hcHNjcmVlblwiKXx8XCJcIjt2YXIgZj1uZXcgYi5CdXR0b24oe2NsYXNzTmFtZTpcImVkdWktZm9yLXNuYXBzY3JlZW5cIix0aXRsZTpkLG9uY2xpY2s6ZnVuY3Rpb24oKXthLmV4ZWNDb21tYW5kKFwic25hcHNjcmVlblwiKX0sdGhlbWU6YS5vcHRpb25zLnRoZW1lfSk7aWYoYi5idXR0b25zLnNuYXBzY3JlZW49ZixjPWN8fChhLm9wdGlvbnMuaWZyYW1lVXJsTWFwfHx7fSkuc25hcHNjcmVlbnx8ZS5zbmFwc2NyZWVuKXt2YXIgZz1uZXcgYi5EaWFsb2coe2lmcmFtZVVybDphLnVpLm1hcFVybChjKSxlZGl0b3I6YSxjbGFzc05hbWU6XCJlZHVpLWZvci1zbmFwc2NyZWVuXCIsdGl0bGU6ZCxidXR0b25zOlt7Y2xhc3NOYW1lOlwiZWR1aS1va2J1dHRvblwiLGxhYmVsOmEuZ2V0TGFuZyhcIm9rXCIpLGVkaXRvcjphLG9uY2xpY2s6ZnVuY3Rpb24oKXtnLmNsb3NlKCEwKX19LHtjbGFzc05hbWU6XCJlZHVpLWNhbmNlbGJ1dHRvblwiLGxhYmVsOmEuZ2V0TGFuZyhcImNhbmNlbFwiKSxlZGl0b3I6YSxvbmNsaWNrOmZ1bmN0aW9uKCl7Zy5jbG9zZSghMSl9fV19KTtnLnJlbmRlcigpLGEudWkuX2RpYWxvZ3Muc25hcHNjcmVlbkRpYWxvZz1nfXJldHVybiBhLmFkZExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsZnVuY3Rpb24oKXtmLnNldERpc2FibGVkKGEucXVlcnlDb21tYW5kU3RhdGUoXCJzbmFwc2NyZWVuXCIpPT0tMSl9KSxmfSxiLmluc2VydGNvZGU9ZnVuY3Rpb24oYyxkLGUpe2Q9Yy5vcHRpb25zLmluc2VydGNvZGV8fFtdLGU9Yy5vcHRpb25zLmxhYmVsTWFwLmluc2VydGNvZGV8fGMuZ2V0TGFuZyhcImxhYmVsTWFwLmluc2VydGNvZGVcIil8fFwiXCI7dmFyIGY9W107YS5lYWNoKGQsZnVuY3Rpb24oYSxiKXtmLnB1c2goe2xhYmVsOmEsdmFsdWU6Yix0aGVtZTpjLm9wdGlvbnMudGhlbWUscmVuZGVyTGFiZWxIdG1sOmZ1bmN0aW9uKCl7cmV0dXJuJzxkaXYgY2xhc3M9XCJlZHVpLWxhYmVsICUlLWxhYmVsXCIgPicrKHRoaXMubGFiZWx8fFwiXCIpK1wiPC9kaXY+XCJ9fSl9KTt2YXIgZz1uZXcgYi5Db21ib3goe2VkaXRvcjpjLGl0ZW1zOmYsb25zZWxlY3Q6ZnVuY3Rpb24oYSxiKXtjLmV4ZWNDb21tYW5kKFwiaW5zZXJ0Y29kZVwiLHRoaXMuaXRlbXNbYl0udmFsdWUpfSxvbmJ1dHRvbmNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5zaG93UG9wdXAoKX0sdGl0bGU6ZSxpbml0VmFsdWU6ZSxjbGFzc05hbWU6XCJlZHVpLWZvci1pbnNlcnRjb2RlXCIsaW5kZXhCeVZhbHVlOmZ1bmN0aW9uKGEpe2lmKGEpZm9yKHZhciBiLGM9MDtiPXRoaXMuaXRlbXNbY107YysrKWlmKGIudmFsdWUuaW5kZXhPZihhKSE9LTEpcmV0dXJuIGM7cmV0dXJuLTF9fSk7cmV0dXJuIGIuYnV0dG9ucy5pbnNlcnRjb2RlPWcsYy5hZGRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKGEsYixkKXtpZighZCl7dmFyIGY9Yy5xdWVyeUNvbW1hbmRTdGF0ZShcImluc2VydGNvZGVcIik7aWYoZj09LTEpZy5zZXREaXNhYmxlZCghMCk7ZWxzZXtnLnNldERpc2FibGVkKCExKTt2YXIgaD1jLnF1ZXJ5Q29tbWFuZFZhbHVlKFwiaW5zZXJ0Y29kZVwiKTtpZighaClyZXR1cm4gdm9pZCBnLnNldFZhbHVlKGUpO2gmJihoPWgucmVwbGFjZSgvWydcIl0vZyxcIlwiKS5zcGxpdChcIixcIilbMF0pLGcuc2V0VmFsdWUoaCl9fX0pLGd9LGIuZm9udGZhbWlseT1mdW5jdGlvbihjLGQsZSl7aWYoZD1jLm9wdGlvbnMuZm9udGZhbWlseXx8W10sZT1jLm9wdGlvbnMubGFiZWxNYXAuZm9udGZhbWlseXx8Yy5nZXRMYW5nKFwibGFiZWxNYXAuZm9udGZhbWlseVwiKXx8XCJcIixkLmxlbmd0aCl7Zm9yKHZhciBmLGc9MCxoPVtdO2Y9ZFtnXTtnKyspe3ZhciBpPWMuZ2V0TGFuZyhcImZvbnRmYW1pbHlcIilbZi5uYW1lXXx8XCJcIjshZnVuY3Rpb24oYixkKXtoLnB1c2goe2xhYmVsOmIsdmFsdWU6ZCx0aGVtZTpjLm9wdGlvbnMudGhlbWUscmVuZGVyTGFiZWxIdG1sOmZ1bmN0aW9uKCl7cmV0dXJuJzxkaXYgY2xhc3M9XCJlZHVpLWxhYmVsICUlLWxhYmVsXCIgc3R5bGU9XCJmb250LWZhbWlseTonK2EudW5odG1sKHRoaXMudmFsdWUpKydcIj4nKyh0aGlzLmxhYmVsfHxcIlwiKStcIjwvZGl2PlwifX0pfShmLmxhYmVsfHxpLGYudmFsKX12YXIgaj1uZXcgYi5Db21ib3goe2VkaXRvcjpjLGl0ZW1zOmgsb25zZWxlY3Q6ZnVuY3Rpb24oYSxiKXtjLmV4ZWNDb21tYW5kKFwiRm9udEZhbWlseVwiLHRoaXMuaXRlbXNbYl0udmFsdWUpfSxvbmJ1dHRvbmNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5zaG93UG9wdXAoKX0sdGl0bGU6ZSxpbml0VmFsdWU6ZSxjbGFzc05hbWU6XCJlZHVpLWZvci1mb250ZmFtaWx5XCIsaW5kZXhCeVZhbHVlOmZ1bmN0aW9uKGEpe2lmKGEpZm9yKHZhciBiLGM9MDtiPXRoaXMuaXRlbXNbY107YysrKWlmKGIudmFsdWUuaW5kZXhPZihhKSE9LTEpcmV0dXJuIGM7cmV0dXJuLTF9fSk7cmV0dXJuIGIuYnV0dG9ucy5mb250ZmFtaWx5PWosYy5hZGRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKGEsYixkKXtpZighZCl7dmFyIGU9Yy5xdWVyeUNvbW1hbmRTdGF0ZShcIkZvbnRGYW1pbHlcIik7aWYoZT09LTEpai5zZXREaXNhYmxlZCghMCk7ZWxzZXtqLnNldERpc2FibGVkKCExKTt2YXIgZj1jLnF1ZXJ5Q29tbWFuZFZhbHVlKFwiRm9udEZhbWlseVwiKTtmJiYoZj1mLnJlcGxhY2UoL1snXCJdL2csXCJcIikuc3BsaXQoXCIsXCIpWzBdKSxqLnNldFZhbHVlKGYpfX19KSxqfX0sYi5mb250c2l6ZT1mdW5jdGlvbihhLGMsZCl7aWYoZD1hLm9wdGlvbnMubGFiZWxNYXAuZm9udHNpemV8fGEuZ2V0TGFuZyhcImxhYmVsTWFwLmZvbnRzaXplXCIpfHxcIlwiLGM9Y3x8YS5vcHRpb25zLmZvbnRzaXplfHxbXSxjLmxlbmd0aCl7Zm9yKHZhciBlPVtdLGY9MDtmPGMubGVuZ3RoO2YrKyl7dmFyIGc9Y1tmXStcInB4XCI7ZS5wdXNoKHtsYWJlbDpnLHZhbHVlOmcsdGhlbWU6YS5vcHRpb25zLnRoZW1lLHJlbmRlckxhYmVsSHRtbDpmdW5jdGlvbigpe3JldHVybic8ZGl2IGNsYXNzPVwiZWR1aS1sYWJlbCAlJS1sYWJlbFwiIHN0eWxlPVwibGluZS1oZWlnaHQ6MTtmb250LXNpemU6Jyt0aGlzLnZhbHVlKydcIj4nKyh0aGlzLmxhYmVsfHxcIlwiKStcIjwvZGl2PlwifX0pfXZhciBoPW5ldyBiLkNvbWJveCh7ZWRpdG9yOmEsaXRlbXM6ZSx0aXRsZTpkLGluaXRWYWx1ZTpkLG9uc2VsZWN0OmZ1bmN0aW9uKGIsYyl7YS5leGVjQ29tbWFuZChcIkZvbnRTaXplXCIsdGhpcy5pdGVtc1tjXS52YWx1ZSl9LG9uYnV0dG9uY2xpY2s6ZnVuY3Rpb24oKXt0aGlzLnNob3dQb3B1cCgpfSxjbGFzc05hbWU6XCJlZHVpLWZvci1mb250c2l6ZVwifSk7cmV0dXJuIGIuYnV0dG9ucy5mb250c2l6ZT1oLGEuYWRkTGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbihiLGMsZCl7aWYoIWQpe3ZhciBlPWEucXVlcnlDb21tYW5kU3RhdGUoXCJGb250U2l6ZVwiKTtlPT0tMT9oLnNldERpc2FibGVkKCEwKTooaC5zZXREaXNhYmxlZCghMSksaC5zZXRWYWx1ZShhLnF1ZXJ5Q29tbWFuZFZhbHVlKFwiRm9udFNpemVcIikpKX19KSxofX0sYi5wYXJhZ3JhcGg9ZnVuY3Rpb24oYyxkLGUpe2lmKGU9Yy5vcHRpb25zLmxhYmVsTWFwLnBhcmFncmFwaHx8Yy5nZXRMYW5nKFwibGFiZWxNYXAucGFyYWdyYXBoXCIpfHxcIlwiLGQ9Yy5vcHRpb25zLnBhcmFncmFwaHx8W10sIWEuaXNFbXB0eU9iamVjdChkKSl7dmFyIGY9W107Zm9yKHZhciBnIGluIGQpZi5wdXNoKHt2YWx1ZTpnLGxhYmVsOmRbZ118fGMuZ2V0TGFuZyhcInBhcmFncmFwaFwiKVtnXSx0aGVtZTpjLm9wdGlvbnMudGhlbWUscmVuZGVyTGFiZWxIdG1sOmZ1bmN0aW9uKCl7cmV0dXJuJzxkaXYgY2xhc3M9XCJlZHVpLWxhYmVsICUlLWxhYmVsXCI+PHNwYW4gY2xhc3M9XCJlZHVpLWZvci0nK3RoaXMudmFsdWUrJ1wiPicrKHRoaXMubGFiZWx8fFwiXCIpK1wiPC9zcGFuPjwvZGl2PlwifX0pO3ZhciBoPW5ldyBiLkNvbWJveCh7ZWRpdG9yOmMsaXRlbXM6Zix0aXRsZTplLGluaXRWYWx1ZTplLGNsYXNzTmFtZTpcImVkdWktZm9yLXBhcmFncmFwaFwiLG9uc2VsZWN0OmZ1bmN0aW9uKGEsYil7Yy5leGVjQ29tbWFuZChcIlBhcmFncmFwaFwiLHRoaXMuaXRlbXNbYl0udmFsdWUpfSxvbmJ1dHRvbmNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5zaG93UG9wdXAoKX19KTtyZXR1cm4gYi5idXR0b25zLnBhcmFncmFwaD1oLGMuYWRkTGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbihhLGIsZCl7aWYoIWQpe3ZhciBlPWMucXVlcnlDb21tYW5kU3RhdGUoXCJQYXJhZ3JhcGhcIik7aWYoZT09LTEpaC5zZXREaXNhYmxlZCghMCk7ZWxzZXtoLnNldERpc2FibGVkKCExKTt2YXIgZj1jLnF1ZXJ5Q29tbWFuZFZhbHVlKFwiUGFyYWdyYXBoXCIpLGc9aC5pbmRleEJ5VmFsdWUoZik7ZyE9LTE/aC5zZXRWYWx1ZShmKTpoLnNldFZhbHVlKGguaW5pdFZhbHVlKX19fSksaH19LGIuY3VzdG9tc3R5bGU9ZnVuY3Rpb24oYSl7dmFyIGM9YS5vcHRpb25zLmN1c3RvbXN0eWxlfHxbXSxkPWEub3B0aW9ucy5sYWJlbE1hcC5jdXN0b21zdHlsZXx8YS5nZXRMYW5nKFwibGFiZWxNYXAuY3VzdG9tc3R5bGVcIil8fFwiXCI7aWYoYy5sZW5ndGgpe2Zvcih2YXIgZSxmPWEuZ2V0TGFuZyhcImN1c3RvbXN0eWxlXCIpLGc9MCxoPVtdO2U9Y1tnKytdOykhZnVuY3Rpb24oYil7dmFyIGM9e307Yy5sYWJlbD1iLmxhYmVsP2IubGFiZWw6ZltiLm5hbWVdLGMuc3R5bGU9Yi5zdHlsZSxjLmNsYXNzTmFtZT1iLmNsYXNzTmFtZSxjLnRhZz1iLnRhZyxoLnB1c2goe2xhYmVsOmMubGFiZWwsdmFsdWU6Yyx0aGVtZTphLm9wdGlvbnMudGhlbWUscmVuZGVyTGFiZWxIdG1sOmZ1bmN0aW9uKCl7cmV0dXJuJzxkaXYgY2xhc3M9XCJlZHVpLWxhYmVsICUlLWxhYmVsXCI+PCcrYy50YWcrXCIgXCIrKGMuY2xhc3NOYW1lPycgY2xhc3M9XCInK2MuY2xhc3NOYW1lKydcIic6XCJcIikrKGMuc3R5bGU/JyBzdHlsZT1cIicrYy5zdHlsZSsnXCInOlwiXCIpK1wiPlwiK2MubGFiZWwrXCI8L1wiK2MudGFnK1wiPjwvZGl2PlwifX0pfShlKTt2YXIgaT1uZXcgYi5Db21ib3goe2VkaXRvcjphLGl0ZW1zOmgsdGl0bGU6ZCxpbml0VmFsdWU6ZCxjbGFzc05hbWU6XCJlZHVpLWZvci1jdXN0b21zdHlsZVwiLG9uc2VsZWN0OmZ1bmN0aW9uKGIsYyl7YS5leGVjQ29tbWFuZChcImN1c3RvbXN0eWxlXCIsdGhpcy5pdGVtc1tjXS52YWx1ZSl9LG9uYnV0dG9uY2xpY2s6ZnVuY3Rpb24oKXt0aGlzLnNob3dQb3B1cCgpfSxpbmRleEJ5VmFsdWU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MDtiPXRoaXMuaXRlbXNbYysrXTspaWYoYi5sYWJlbD09YSlyZXR1cm4gYy0xO3JldHVybi0xfX0pO3JldHVybiBiLmJ1dHRvbnMuY3VzdG9tc3R5bGU9aSxhLmFkZExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsZnVuY3Rpb24oYixjLGQpe2lmKCFkKXt2YXIgZT1hLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiY3VzdG9tc3R5bGVcIik7aWYoZT09LTEpaS5zZXREaXNhYmxlZCghMCk7ZWxzZXtpLnNldERpc2FibGVkKCExKTt2YXIgZj1hLnF1ZXJ5Q29tbWFuZFZhbHVlKFwiY3VzdG9tc3R5bGVcIiksZz1pLmluZGV4QnlWYWx1ZShmKTtnIT0tMT9pLnNldFZhbHVlKGYpOmkuc2V0VmFsdWUoaS5pbml0VmFsdWUpfX19KSxpfX0sYi5pbnNlcnR0YWJsZT1mdW5jdGlvbihhLGMsZCl7ZD1hLm9wdGlvbnMubGFiZWxNYXAuaW5zZXJ0dGFibGV8fGEuZ2V0TGFuZyhcImxhYmVsTWFwLmluc2VydHRhYmxlXCIpfHxcIlwiO3ZhciBlPW5ldyBiLlRhYmxlQnV0dG9uKHtlZGl0b3I6YSx0aXRsZTpkLGNsYXNzTmFtZTpcImVkdWktZm9yLWluc2VydHRhYmxlXCIsb25waWNrdGFibGU6ZnVuY3Rpb24oYixjLGQpe2EuZXhlY0NvbW1hbmQoXCJJbnNlcnRUYWJsZVwiLHtudW1Sb3dzOmQsbnVtQ29sczpjLGJvcmRlcjoxfSl9LG9uYnV0dG9uY2xpY2s6ZnVuY3Rpb24oKXt0aGlzLnNob3dQb3B1cCgpfX0pO3JldHVybiBiLmJ1dHRvbnMuaW5zZXJ0dGFibGU9ZSxhLmFkZExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsZnVuY3Rpb24oKXtlLnNldERpc2FibGVkKGEucXVlcnlDb21tYW5kU3RhdGUoXCJpbnNlcnR0YWJsZVwiKT09LTEpfSksZX0sYi5saW5laGVpZ2h0PWZ1bmN0aW9uKGEpe3ZhciBjPWEub3B0aW9ucy5saW5laGVpZ2h0fHxbXTtpZihjLmxlbmd0aCl7Zm9yKHZhciBkLGU9MCxmPVtdO2Q9Y1tlKytdOylmLnB1c2goe2xhYmVsOmQsdmFsdWU6ZCx0aGVtZTphLm9wdGlvbnMudGhlbWUsb25jbGljazpmdW5jdGlvbigpe2EuZXhlY0NvbW1hbmQoXCJsaW5laGVpZ2h0XCIsdGhpcy52YWx1ZSl9fSk7dmFyIGc9bmV3IGIuTWVudUJ1dHRvbih7ZWRpdG9yOmEsY2xhc3NOYW1lOlwiZWR1aS1mb3ItbGluZWhlaWdodFwiLHRpdGxlOmEub3B0aW9ucy5sYWJlbE1hcC5saW5laGVpZ2h0fHxhLmdldExhbmcoXCJsYWJlbE1hcC5saW5laGVpZ2h0XCIpfHxcIlwiLGl0ZW1zOmYsb25idXR0b25jbGljazpmdW5jdGlvbigpe3ZhciBiPWEucXVlcnlDb21tYW5kVmFsdWUoXCJMaW5lSGVpZ2h0XCIpfHx0aGlzLnZhbHVlO2EuZXhlY0NvbW1hbmQoXCJMaW5lSGVpZ2h0XCIsYil9fSk7cmV0dXJuIGIuYnV0dG9ucy5saW5laGVpZ2h0PWcsYS5hZGRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKCl7dmFyIGI9YS5xdWVyeUNvbW1hbmRTdGF0ZShcIkxpbmVIZWlnaHRcIik7aWYoYj09LTEpZy5zZXREaXNhYmxlZCghMCk7ZWxzZXtnLnNldERpc2FibGVkKCExKTt2YXIgYz1hLnF1ZXJ5Q29tbWFuZFZhbHVlKFwiTGluZUhlaWdodFwiKTtjJiZnLnNldFZhbHVlKChjK1wiXCIpLnJlcGxhY2UoL2NtLyxcIlwiKSksZy5zZXRDaGVja2VkKGIpfX0pLGd9fTtmb3IodmFyIGssbD1bXCJ0b3BcIixcImJvdHRvbVwiXSxtPTA7az1sW20rK107KSFmdW5jdGlvbihhKXtiW1wicm93c3BhY2luZ1wiK2FdPWZ1bmN0aW9uKGMpe3ZhciBkPWMub3B0aW9uc1tcInJvd3NwYWNpbmdcIithXXx8W107aWYoIWQubGVuZ3RoKXJldHVybiBudWxsO2Zvcih2YXIgZSxmPTAsZz1bXTtlPWRbZisrXTspZy5wdXNoKHtsYWJlbDplLHZhbHVlOmUsdGhlbWU6Yy5vcHRpb25zLnRoZW1lLG9uY2xpY2s6ZnVuY3Rpb24oKXtjLmV4ZWNDb21tYW5kKFwicm93c3BhY2luZ1wiLHRoaXMudmFsdWUsYSl9fSk7dmFyIGg9bmV3IGIuTWVudUJ1dHRvbih7ZWRpdG9yOmMsY2xhc3NOYW1lOlwiZWR1aS1mb3Itcm93c3BhY2luZ1wiK2EsdGl0bGU6Yy5vcHRpb25zLmxhYmVsTWFwW1wicm93c3BhY2luZ1wiK2FdfHxjLmdldExhbmcoXCJsYWJlbE1hcC5yb3dzcGFjaW5nXCIrYSl8fFwiXCIsaXRlbXM6ZyxvbmJ1dHRvbmNsaWNrOmZ1bmN0aW9uKCl7dmFyIGI9Yy5xdWVyeUNvbW1hbmRWYWx1ZShcInJvd3NwYWNpbmdcIixhKXx8dGhpcy52YWx1ZTtjLmV4ZWNDb21tYW5kKFwicm93c3BhY2luZ1wiLGIsYSl9fSk7cmV0dXJuIGIuYnV0dG9uc1thXT1oLGMuYWRkTGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbigpe3ZhciBiPWMucXVlcnlDb21tYW5kU3RhdGUoXCJyb3dzcGFjaW5nXCIsYSk7aWYoYj09LTEpaC5zZXREaXNhYmxlZCghMCk7ZWxzZXtoLnNldERpc2FibGVkKCExKTt2YXIgZD1jLnF1ZXJ5Q29tbWFuZFZhbHVlKFwicm93c3BhY2luZ1wiLGEpO2QmJmguc2V0VmFsdWUoKGQrXCJcIikucmVwbGFjZSgvJS8sXCJcIikpLGguc2V0Q2hlY2tlZChiKX19KSxofX0oayk7Zm9yKHZhciBuLG89W1wiaW5zZXJ0b3JkZXJlZGxpc3RcIixcImluc2VydHVub3JkZXJlZGxpc3RcIl0scD0wO249b1twKytdOykhZnVuY3Rpb24oYSl7YlthXT1mdW5jdGlvbihjKXt2YXIgZD1jLm9wdGlvbnNbYV0sZT1mdW5jdGlvbigpe2MuZXhlY0NvbW1hbmQoYSx0aGlzLnZhbHVlKX0sZj1bXTtmb3IodmFyIGcgaW4gZClmLnB1c2goe2xhYmVsOmRbZ118fGMuZ2V0TGFuZygpW2FdW2ddfHxcIlwiLHZhbHVlOmcsdGhlbWU6Yy5vcHRpb25zLnRoZW1lLG9uY2xpY2s6ZX0pO3ZhciBoPW5ldyBiLk1lbnVCdXR0b24oe2VkaXRvcjpjLGNsYXNzTmFtZTpcImVkdWktZm9yLVwiK2EsdGl0bGU6Yy5nZXRMYW5nKFwibGFiZWxNYXAuXCIrYSl8fFwiXCIsaXRlbXM6ZixvbmJ1dHRvbmNsaWNrOmZ1bmN0aW9uKCl7dmFyIGI9Yy5xdWVyeUNvbW1hbmRWYWx1ZShhKXx8dGhpcy52YWx1ZTtjLmV4ZWNDb21tYW5kKGEsYil9fSk7cmV0dXJuIGIuYnV0dG9uc1thXT1oLGMuYWRkTGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbigpe3ZhciBiPWMucXVlcnlDb21tYW5kU3RhdGUoYSk7aWYoYj09LTEpaC5zZXREaXNhYmxlZCghMCk7ZWxzZXtoLnNldERpc2FibGVkKCExKTt2YXIgZD1jLnF1ZXJ5Q29tbWFuZFZhbHVlKGEpO2guc2V0VmFsdWUoZCksaC5zZXRDaGVja2VkKGIpfX0pLGh9fShuKTtiLmZ1bGxzY3JlZW49ZnVuY3Rpb24oYSxjKXtjPWEub3B0aW9ucy5sYWJlbE1hcC5mdWxsc2NyZWVufHxhLmdldExhbmcoXCJsYWJlbE1hcC5mdWxsc2NyZWVuXCIpfHxcIlwiO3ZhciBkPW5ldyBiLkJ1dHRvbih7Y2xhc3NOYW1lOlwiZWR1aS1mb3ItZnVsbHNjcmVlblwiLHRpdGxlOmMsdGhlbWU6YS5vcHRpb25zLnRoZW1lLG9uY2xpY2s6ZnVuY3Rpb24oKXthLnVpJiZhLnVpLnNldEZ1bGxTY3JlZW4oIWEudWkuaXNGdWxsU2NyZWVuKCkpLHRoaXMuc2V0Q2hlY2tlZChhLnVpLmlzRnVsbFNjcmVlbigpKX19KTtyZXR1cm4gYi5idXR0b25zLmZ1bGxzY3JlZW49ZCxhLmFkZExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsZnVuY3Rpb24oKXt2YXIgYj1hLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiZnVsbHNjcmVlblwiKTtkLnNldERpc2FibGVkKGI9PS0xKSxkLnNldENoZWNrZWQoYS51aS5pc0Z1bGxTY3JlZW4oKSl9KSxkfSxiLmVtb3Rpb249ZnVuY3Rpb24oYSxjKXt2YXIgZD1cImVtb3Rpb25cIixmPW5ldyBiLk11bHRpTWVudVBvcCh7dGl0bGU6YS5vcHRpb25zLmxhYmVsTWFwW2RdfHxhLmdldExhbmcoXCJsYWJlbE1hcC5cIitkKXx8XCJcIixlZGl0b3I6YSxjbGFzc05hbWU6XCJlZHVpLWZvci1cIitkLGlmcmFtZVVybDphLnVpLm1hcFVybChjfHwoYS5vcHRpb25zLmlmcmFtZVVybE1hcHx8e30pW2RdfHxlW2RdKX0pO3JldHVybiBiLmJ1dHRvbnNbZF09ZixhLmFkZExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsZnVuY3Rpb24oKXtmLnNldERpc2FibGVkKGEucXVlcnlDb21tYW5kU3RhdGUoZCk9PS0xKX0pLGZ9LGIuYXV0b3R5cGVzZXQ9ZnVuY3Rpb24oYSl7dmFyIGM9bmV3IGIuQXV0b1R5cGVTZXRCdXR0b24oe2VkaXRvcjphLHRpdGxlOmEub3B0aW9ucy5sYWJlbE1hcC5hdXRvdHlwZXNldHx8YS5nZXRMYW5nKFwibGFiZWxNYXAuYXV0b3R5cGVzZXRcIil8fFwiXCIsY2xhc3NOYW1lOlwiZWR1aS1mb3ItYXV0b3R5cGVzZXRcIixvbmJ1dHRvbmNsaWNrOmZ1bmN0aW9uKCl7YS5leGVjQ29tbWFuZChcImF1dG90eXBlc2V0XCIpfX0pO3JldHVybiBiLmJ1dHRvbnMuYXV0b3R5cGVzZXQ9YyxhLmFkZExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsZnVuY3Rpb24oKXtjLnNldERpc2FibGVkKGEucXVlcnlDb21tYW5kU3RhdGUoXCJhdXRvdHlwZXNldFwiKT09LTEpfSksY30sYi5zaW1wbGV1cGxvYWQ9ZnVuY3Rpb24oYSl7dmFyIGM9XCJzaW1wbGV1cGxvYWRcIixkPW5ldyBiLkJ1dHRvbih7Y2xhc3NOYW1lOlwiZWR1aS1mb3ItXCIrYyx0aXRsZTphLm9wdGlvbnMubGFiZWxNYXBbY118fGEuZ2V0TGFuZyhcImxhYmVsTWFwLlwiK2MpfHxcIlwiLG9uY2xpY2s6ZnVuY3Rpb24oKXt9LHRoZW1lOmEub3B0aW9ucy50aGVtZSxzaG93VGV4dDohMX0pO3JldHVybiBiLmJ1dHRvbnNbY109ZCxhLmFkZExpc3RlbmVyKFwicmVhZHlcIixmdW5jdGlvbigpe3ZhciBiPWQuZ2V0RG9tKFwiYm9keVwiKSxjPWIuY2hpbGRyZW5bMF07YS5maXJlRXZlbnQoXCJzaW1wbGV1cGxvYWRidG5yZWFkeVwiLGMpfSksYS5hZGRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKGIsZSxmKXt2YXIgZz1hLnF1ZXJ5Q29tbWFuZFN0YXRlKGMpO2c9PS0xPyhkLnNldERpc2FibGVkKCEwKSxkLnNldENoZWNrZWQoITEpKTpmfHwoZC5zZXREaXNhYmxlZCghMSksZC5zZXRDaGVja2VkKGcpKX0pLGR9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLmluaXRPcHRpb25zKGEpLHRoaXMuaW5pdEVkaXRvclVJKCl9dmFyIGI9YmFpZHUuZWRpdG9yLnV0aWxzLGM9YmFpZHUuZWRpdG9yLnVpLnVpVXRpbHMsZD1iYWlkdS5lZGl0b3IudWkuVUlCYXNlLGU9YmFpZHUuZWRpdG9yLmRvbS5kb21VdGlscyxmPVtdO2EucHJvdG90eXBlPXt1aU5hbWU6XCJlZGl0b3JcIixpbml0RWRpdG9yVUk6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7YS5zZXRPcHQoe3dvcmRDb3VudDohMCxtYXhpbXVtV29yZHM6MWU0LHdvcmRDb3VudE1zZzphLm9wdGlvbnMud29yZENvdW50TXNnfHxhLmdldExhbmcoXCJ3b3JkQ291bnRNc2dcIiksd29yZE92ZXJGbG93TXNnOmEub3B0aW9ucy53b3JkT3ZlckZsb3dNc2d8fGEuZ2V0TGFuZyhcIndvcmRPdmVyRmxvd01zZ1wiKX0pO3ZhciBjPWEub3B0aW9ucyxkPWMubWF4aW11bVdvcmRzLGU9Yy53b3JkQ291bnRNc2csZj1jLndvcmRPdmVyRmxvd01zZyxnPWIuZ2V0RG9tKFwid29yZGNvdW50XCIpO2lmKGMud29yZENvdW50KXt2YXIgaD1hLmdldENvbnRlbnRMZW5ndGgoITApO2g+ZD8oZy5pbm5lckhUTUw9ZixhLmZpcmVFdmVudChcIndvcmRjb3VudG92ZXJmbG93XCIpKTpnLmlubmVySFRNTD1lLnJlcGxhY2UoXCJ7I2xlYXZlfVwiLGQtaCkucmVwbGFjZShcInsjY291bnR9XCIsaCl9fXRoaXMuZWRpdG9yLnVpPXRoaXMsdGhpcy5fZGlhbG9ncz17fSx0aGlzLmluaXRVSUJhc2UoKSx0aGlzLl9pbml0VG9vbGJhcnMoKTt2YXIgYj10aGlzLmVkaXRvcixjPXRoaXM7Yi5hZGRMaXN0ZW5lcihcInJlYWR5XCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBkKCl7YShiLGMpLGUudW4oYi5kb2N1bWVudCxcImNsaWNrXCIsYXJndW1lbnRzLmNhbGxlZSl9Yi5nZXREaWFsb2c9ZnVuY3Rpb24oYSl7cmV0dXJuIGIudWkuX2RpYWxvZ3NbYStcIkRpYWxvZ1wiXX0sZS5vbihiLndpbmRvdyxcInNjcm9sbFwiLGZ1bmN0aW9uKGEpe2JhaWR1LmVkaXRvci51aS5Qb3B1cC5wb3N0SGlkZShhKX0pLGIudWkuX2FjdHVhbEZyYW1lV2lkdGg9Yi5vcHRpb25zLmluaXRpYWxGcmFtZVdpZHRoLFVFLmJyb3dzZXIuaWUmJjY9PT1VRS5icm93c2VyLnZlcnNpb24mJmIuY29udGFpbmVyLm93bmVyRG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJCYWNrZ3JvdW5kSW1hZ2VDYWNoZVwiLCExLCEwKSxiLm9wdGlvbnMuZWxlbWVudFBhdGhFbmFibGVkJiYoYi51aS5nZXREb20oXCJlbGVtZW50cGF0aFwiKS5pbm5lckhUTUw9JzxkaXYgY2xhc3M9XCJlZHVpLWVkaXRvci1icmVhZGNydW1iXCI+JytiLmdldExhbmcoXCJlbGVtZW50UGF0aFRpcFwiKStcIjo8L2Rpdj5cIiksYi5vcHRpb25zLndvcmRDb3VudCYmKGUub24oYi5kb2N1bWVudCxcImNsaWNrXCIsZCksYi51aS5nZXREb20oXCJ3b3JkY291bnRcIikuaW5uZXJIVE1MPWIuZ2V0TGFuZyhcIndvcmRDb3VudFRpcFwiKSksYi51aS5fc2NhbGUoKSxiLm9wdGlvbnMuc2NhbGVFbmFibGVkPyhiLmF1dG9IZWlnaHRFbmFibGVkJiZiLmRpc2FibGVBdXRvSGVpZ2h0KCksYy5lbmFibGVTY2FsZSgpKTpjLmRpc2FibGVTY2FsZSgpLGIub3B0aW9ucy5lbGVtZW50UGF0aEVuYWJsZWR8fGIub3B0aW9ucy53b3JkQ291bnR8fGIub3B0aW9ucy5zY2FsZUVuYWJsZWR8fChiLnVpLmdldERvbShcImVsZW1lbnRwYXRoXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsYi51aS5nZXREb20oXCJ3b3JkY291bnRcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixiLnVpLmdldERvbShcInNjYWxlXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLGIuc2VsZWN0aW9uLmlzRm9jdXMoKSYmYi5maXJlRXZlbnQoXCJzZWxlY3Rpb25jaGFuZ2VcIiwhMSwhMCl9KSxiLmFkZExpc3RlbmVyKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSxiKXt2YXIgYz1iLnRhcmdldHx8Yi5zcmNFbGVtZW50O2JhaWR1LmVkaXRvci51aS5Qb3B1cC5wb3N0SGlkZShiLGMpLGJhaWR1LmVkaXRvci51aS5TaG9ydEN1dE1lbnUucG9zdEhpZGUoYil9KSxiLmFkZExpc3RlbmVyKFwiZGVsY2VsbHNcIixmdW5jdGlvbigpe1VFLnVpLmVkaXR0aXAmJm5ldyBVRS51aS5lZGl0dGlwKGIpLGIuZ2V0RGlhbG9nKFwiZWRpdHRpcFwiKS5vcGVuKCl9KTt2YXIgZCxmLGc9ITE7Yi5hZGRMaXN0ZW5lcihcImFmdGVycGFzdGVcIixmdW5jdGlvbigpe2IucXVlcnlDb21tYW5kU3RhdGUoXCJwYXN0ZXBsYWluXCIpfHwoYmFpZHUuZWRpdG9yLnVpLlBhc3RlUGlja2VyJiYoZD1uZXcgYmFpZHUuZWRpdG9yLnVpLlBvcHVwKHtjb250ZW50Om5ldyBiYWlkdS5lZGl0b3IudWkuUGFzdGVQaWNrZXIoe2VkaXRvcjpifSksZWRpdG9yOmIsY2xhc3NOYW1lOlwiZWR1aS13b3JkcGFzdGVwb3BcIn0pLGQucmVuZGVyKCkpLGc9ITApfSksYi5hZGRMaXN0ZW5lcihcImFmdGVyaW5zZXJ0aHRtbFwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGYpLGY9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQmJihnfHxiLnVpLl9pc1RyYW5zZmVyKSl7aWYoZC5pc0hpZGRlbigpKXt2YXIgYT1lLmNyZWF0ZUVsZW1lbnQoYi5kb2N1bWVudCxcInNwYW5cIix7c3R5bGU6XCJsaW5lLWhlaWdodDowcHg7XCIsaW5uZXJIVE1MOlwiXFx1ZmVmZlwifSksYz1iLnNlbGVjdGlvbi5nZXRSYW5nZSgpO2MuaW5zZXJ0Tm9kZShhKTt2YXIgZj1nZXREb21Ob2RlKGEsXCJmaXJzdENoaWxkXCIsXCJwcmV2aW91c1NpYmxpbmdcIik7ZiYmZC5zaG93QW5jaG9yKDM9PWYubm9kZVR5cGU/Zi5wYXJlbnROb2RlOmYpLGUucmVtb3ZlKGEpfWVsc2UgZC5zaG93KCk7ZGVsZXRlIGIudWkuX2lzVHJhbnNmZXIsZz0hMX19LDIwMCl9KSxiLmFkZExpc3RlbmVyKFwiY29udGV4dG1lbnVcIixmdW5jdGlvbihhLGIpe2JhaWR1LmVkaXRvci51aS5Qb3B1cC5wb3N0SGlkZShiKX0pLGIuYWRkTGlzdGVuZXIoXCJrZXlkb3duXCIsZnVuY3Rpb24oYSxiKXtkJiZkLmRpc3Bvc2UoYik7dmFyIGM9Yi5rZXlDb2RlfHxiLndoaWNoO2IuYWx0S2V5JiY5MD09YyYmVUUudWkuYnV0dG9ucy5mdWxsc2NyZWVuLm9uY2xpY2soKX0pLGIuYWRkTGlzdGVuZXIoXCJ3b3JkY291bnRcIixmdW5jdGlvbihiKXthKHRoaXMsYyl9KSxiLmFkZExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsZnVuY3Rpb24oKXtiLm9wdGlvbnMuZWxlbWVudFBhdGhFbmFibGVkJiZjWyhiLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiZWxlbWVudHBhdGhcIik9PS0xP1wiZGlzXCI6XCJlblwiKStcImFibGVFbGVtZW50UGF0aFwiXSgpLGIub3B0aW9ucy5zY2FsZUVuYWJsZWQmJmNbKGIucXVlcnlDb21tYW5kU3RhdGUoXCJzY2FsZVwiKT09LTE/XCJkaXNcIjpcImVuXCIpK1wiYWJsZVNjYWxlXCJdKCl9KTt2YXIgaD1uZXcgYmFpZHUuZWRpdG9yLnVpLlBvcHVwKHtlZGl0b3I6Yixjb250ZW50OlwiXCIsY2xhc3NOYW1lOlwiZWR1aS1idWJibGVcIixfb25FZGl0QnV0dG9uQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmhpZGUoKSxiLnVpLl9kaWFsb2dzLmxpbmtEaWFsb2cub3BlbigpfSxfb25JbWdFZGl0QnV0dG9uQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5oaWRlKCksYi51aS5fZGlhbG9nc1thXSYmYi51aS5fZGlhbG9nc1thXS5vcGVuKCl9LF9vbkltZ1NldEZsb2F0OmZ1bmN0aW9uKGEpe3RoaXMuaGlkZSgpLGIuZXhlY0NvbW1hbmQoXCJpbWFnZWZsb2F0XCIsYSl9LF9zZXRJZnJhbWVBbGlnbjpmdW5jdGlvbihhKXt2YXIgYj1oLmFuY2hvckVsLGM9Yi5jbG9uZU5vZGUoITApO3N3aXRjaChhKXtjYXNlLTI6Yy5zZXRBdHRyaWJ1dGUoXCJhbGlnblwiLFwiXCIpO2JyZWFrO2Nhc2UtMTpjLnNldEF0dHJpYnV0ZShcImFsaWduXCIsXCJsZWZ0XCIpO2JyZWFrO2Nhc2UgMTpjLnNldEF0dHJpYnV0ZShcImFsaWduXCIsXCJyaWdodFwiKX1iLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGMsYiksZS5yZW1vdmUoYiksaC5hbmNob3JFbD1jLGguc2hvd0FuY2hvcihoLmFuY2hvckVsKX0sX3VwZGF0ZUlmcmFtZTpmdW5jdGlvbigpe3ZhciBhPWIuX2lmcmFtZT1oLmFuY2hvckVsO2UuaGFzQ2xhc3MoYSxcInVlZGl0b3JfYmFpZHVtYXBcIik/KGIuc2VsZWN0aW9uLmdldFJhbmdlKCkuc2VsZWN0Tm9kZShhKS5zZWxlY3QoKSxiLnVpLl9kaWFsb2dzLm1hcERpYWxvZy5vcGVuKCksaC5oaWRlKCkpOihiLnVpLl9kaWFsb2dzLmluc2VydGZyYW1lRGlhbG9nLm9wZW4oKSxoLmhpZGUoKSl9LF9vblJlbW92ZUJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe2IuZXhlY0NvbW1hbmQoYSksdGhpcy5oaWRlKCl9LHF1ZXJ5QXV0b0hpZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEub3duZXJEb2N1bWVudD09Yi5kb2N1bWVudCYmKFwiaW1nXCI9PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxlLmZpbmRQYXJlbnRCeVRhZ05hbWUoYSxcImFcIiwhMCkpP2EhPT1oLmFuY2hvckVsOmJhaWR1LmVkaXRvci51aS5Qb3B1cC5wcm90b3R5cGUucXVlcnlBdXRvSGlkZS5jYWxsKHRoaXMsYSl9fSk7aC5yZW5kZXIoKSxiLm9wdGlvbnMuaW1hZ2VQb3B1cCYmKGIuYWRkTGlzdGVuZXIoXCJtb3VzZW92ZXJcIixmdW5jdGlvbihhLGMpe2M9Y3x8d2luZG93LmV2ZW50O3ZhciBkPWMudGFyZ2V0fHxjLnNyY0VsZW1lbnQ7aWYoYi51aS5fZGlhbG9ncy5pbnNlcnRmcmFtZURpYWxvZyYmL2lmcmFtZS9naS50ZXN0KGQudGFnTmFtZSkpe3ZhciBlPWguZm9ybWF0SHRtbChcIjxub2JyPlwiK2IuZ2V0TGFuZyhcInByb3BlcnR5XCIpKyc6IDxzcGFuIG9uY2xpY2s9JCQuX3NldElmcmFtZUFsaWduKC0yKSBjbGFzcz1cImVkdWktY2xpY2thYmxlXCI+JytiLmdldExhbmcoXCJkZWZhdWx0XCIpKyc8L3NwYW4+Jm5ic3A7Jm5ic3A7PHNwYW4gb25jbGljaz0kJC5fc2V0SWZyYW1lQWxpZ24oLTEpIGNsYXNzPVwiZWR1aS1jbGlja2FibGVcIj4nK2IuZ2V0TGFuZyhcImp1c3RpZnlsZWZ0XCIpKyc8L3NwYW4+Jm5ic3A7Jm5ic3A7PHNwYW4gb25jbGljaz0kJC5fc2V0SWZyYW1lQWxpZ24oMSkgY2xhc3M9XCJlZHVpLWNsaWNrYWJsZVwiPicrYi5nZXRMYW5nKFwianVzdGlmeXJpZ2h0XCIpKyc8L3NwYW4+Jm5ic3A7Jm5ic3A7IDxzcGFuIG9uY2xpY2s9XCIkJC5fdXBkYXRlSWZyYW1lKCB0aGlzKTtcIiBjbGFzcz1cImVkdWktY2xpY2thYmxlXCI+JytiLmdldExhbmcoXCJtb2RpZnlcIikrXCI8L3NwYW4+PC9ub2JyPlwiKTtlPyhoLmdldERvbShcImNvbnRlbnRcIikuaW5uZXJIVE1MPWUsaC5hbmNob3JFbD1kLGguc2hvd0FuY2hvcihoLmFuY2hvckVsKSk6aC5oaWRlKCl9fSksYi5hZGRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKGEsYyl7aWYoYyl7dmFyIGQ9XCJcIixmPVwiXCIsZz1iLnNlbGVjdGlvbi5nZXRSYW5nZSgpLmdldENsb3NlZE5vZGUoKSxpPWIudWkuX2RpYWxvZ3M7aWYoZyYmXCJJTUdcIj09Zy50YWdOYW1lKXt2YXIgaj1cImluc2VydGltYWdlRGlhbG9nXCI7aWYoZy5jbGFzc05hbWUuaW5kZXhPZihcImVkdWktZmFrZWQtdmlkZW9cIik9PS0xJiZnLmNsYXNzTmFtZS5pbmRleE9mKFwiZWR1aS11cGxvYWQtdmlkZW9cIik9PS0xfHwoaj1cImluc2VydHZpZGVvRGlhbG9nXCIpLGcuY2xhc3NOYW1lLmluZGV4T2YoXCJlZHVpLWZha2VkLXdlYmFwcFwiKSE9LTEmJihqPVwid2ViYXBwRGlhbG9nXCIpLGcuc3JjLmluZGV4T2YoXCJodHRwOi8vYXBpLm1hcC5iYWlkdS5jb21cIikhPS0xJiYoaj1cIm1hcERpYWxvZ1wiKSxnLmNsYXNzTmFtZS5pbmRleE9mKFwiZWR1aS1mYWtlZC1tdXNpY1wiKSE9LTEmJihqPVwibXVzaWNEaWFsb2dcIiksZy5zcmMuaW5kZXhPZihcImh0dHA6Ly9tYXBzLmdvb2dsZS5jb20vbWFwcy9hcGkvc3RhdGljbWFwXCIpIT0tMSYmKGo9XCJnbWFwRGlhbG9nXCIpLGcuZ2V0QXR0cmlidXRlKFwiYW5jaG9ybmFtZVwiKSYmKGo9XCJhbmNob3JEaWFsb2dcIixkPWguZm9ybWF0SHRtbChcIjxub2JyPlwiK2IuZ2V0TGFuZyhcInByb3BlcnR5XCIpKyc6IDxzcGFuIG9uY2xpY2s9JCQuX29uSW1nRWRpdEJ1dHRvbkNsaWNrKFwiYW5jaG9yRGlhbG9nXCIpIGNsYXNzPVwiZWR1aS1jbGlja2FibGVcIj4nK2IuZ2V0TGFuZyhcIm1vZGlmeVwiKStcIjwvc3Bhbj4mbmJzcDsmbmJzcDs8c3BhbiBvbmNsaWNrPSQkLl9vblJlbW92ZUJ1dHRvbkNsaWNrKCdhbmNob3InKSBjbGFzcz1cXFwiZWR1aS1jbGlja2FibGVcXFwiPlwiK2IuZ2V0TGFuZyhcImRlbGV0ZVwiKStcIjwvc3Bhbj48L25vYnI+XCIpKSxnLmdldEF0dHJpYnV0ZShcIndvcmRfaW1nXCIpJiYoYi53b3JkX2ltZz1bZy5nZXRBdHRyaWJ1dGUoXCJ3b3JkX2ltZ1wiKV0saj1cIndvcmRpbWFnZURpYWxvZ1wiKSwoZS5oYXNDbGFzcyhnLFwibG9hZGluZ2NsYXNzXCIpfHxlLmhhc0NsYXNzKGcsXCJsb2FkZXJyb3JjbGFzc1wiKSkmJihqPVwiXCIpLCFpW2pdKXJldHVybjtmPVwiPG5vYnI+XCIrYi5nZXRMYW5nKFwicHJvcGVydHlcIikrJzogPHNwYW4gb25jbGljaz0kJC5fb25JbWdTZXRGbG9hdChcIm5vbmVcIikgY2xhc3M9XCJlZHVpLWNsaWNrYWJsZVwiPicrYi5nZXRMYW5nKFwiZGVmYXVsdFwiKSsnPC9zcGFuPiZuYnNwOyZuYnNwOzxzcGFuIG9uY2xpY2s9JCQuX29uSW1nU2V0RmxvYXQoXCJsZWZ0XCIpIGNsYXNzPVwiZWR1aS1jbGlja2FibGVcIj4nK2IuZ2V0TGFuZyhcImp1c3RpZnlsZWZ0XCIpKyc8L3NwYW4+Jm5ic3A7Jm5ic3A7PHNwYW4gb25jbGljaz0kJC5fb25JbWdTZXRGbG9hdChcInJpZ2h0XCIpIGNsYXNzPVwiZWR1aS1jbGlja2FibGVcIj4nK2IuZ2V0TGFuZyhcImp1c3RpZnlyaWdodFwiKSsnPC9zcGFuPiZuYnNwOyZuYnNwOzxzcGFuIG9uY2xpY2s9JCQuX29uSW1nU2V0RmxvYXQoXCJjZW50ZXJcIikgY2xhc3M9XCJlZHVpLWNsaWNrYWJsZVwiPicrYi5nZXRMYW5nKFwianVzdGlmeWNlbnRlclwiKStcIjwvc3Bhbj4mbmJzcDsmbmJzcDs8c3BhbiBvbmNsaWNrPVxcXCIkJC5fb25JbWdFZGl0QnV0dG9uQ2xpY2soJ1wiK2orJ1xcJyk7XCIgY2xhc3M9XCJlZHVpLWNsaWNrYWJsZVwiPicrYi5nZXRMYW5nKFwibW9kaWZ5XCIpK1wiPC9zcGFuPjwvbm9icj5cIiwhZCYmKGQ9aC5mb3JtYXRIdG1sKGYpKX1pZihiLnVpLl9kaWFsb2dzLmxpbmtEaWFsb2cpe3ZhciBrLGw9Yi5xdWVyeUNvbW1hbmRWYWx1ZShcImxpbmtcIik7aWYobCYmKGs9bC5nZXRBdHRyaWJ1dGUoXCJfaHJlZlwiKXx8bC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIsMikpKXt2YXIgbT1rO2subGVuZ3RoPjMwJiYobT1rLnN1YnN0cmluZygwLDIwKStcIi4uLlwiKSxkJiYoZCs9JzxkaXYgc3R5bGU9XCJoZWlnaHQ6NXB4O1wiPjwvZGl2PicpLGQrPWguZm9ybWF0SHRtbChcIjxub2JyPlwiK2IuZ2V0TGFuZyhcImFudGhvck1zZ1wiKSsnOiA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJytrKydcIiB0aXRsZT1cIicraysnXCIgPicrbSsnPC9hPiA8c3BhbiBjbGFzcz1cImVkdWktY2xpY2thYmxlXCIgb25jbGljaz1cIiQkLl9vbkVkaXRCdXR0b25DbGljaygpO1wiPicrYi5nZXRMYW5nKFwibW9kaWZ5XCIpKyc8L3NwYW4+IDxzcGFuIGNsYXNzPVwiZWR1aS1jbGlja2FibGVcIiBvbmNsaWNrPVwiJCQuX29uUmVtb3ZlQnV0dG9uQ2xpY2soXFwndW5saW5rXFwnKTtcIj4gJytiLmdldExhbmcoXCJjbGVhclwiKStcIjwvc3Bhbj48L25vYnI+XCIpLGguc2hvd0FuY2hvcihsKX19ZD8oaC5nZXREb20oXCJjb250ZW50XCIpLmlubmVySFRNTD1kLGguYW5jaG9yRWw9Z3x8bCxoLnNob3dBbmNob3IoaC5hbmNob3JFbCkpOmguaGlkZSgpfX0pKX0sX2luaXRUb29sYmFyczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmVkaXRvcixjPXRoaXMudG9vbGJhcnN8fFtdLGQ9W10sZT0wO2U8Yy5sZW5ndGg7ZSsrKXtmb3IodmFyIGY9Y1tlXSxnPW5ldyBiYWlkdS5lZGl0b3IudWkuVG9vbGJhcih7dGhlbWU6YS5vcHRpb25zLnRoZW1lfSksaD0wO2g8Zi5sZW5ndGg7aCsrKXt2YXIgaT1mW2hdLGo9bnVsbDtpZihcInN0cmluZ1wiPT10eXBlb2YgaSl7aWYoaT1pLnRvTG93ZXJDYXNlKCksXCJ8XCI9PWkmJihpPVwiU2VwYXJhdG9yXCIpLFwifHxcIj09aSYmKGk9XCJCcmVha2xpbmVcIiksYmFpZHUuZWRpdG9yLnVpW2ldJiYoaj1uZXcgYmFpZHUuZWRpdG9yLnVpW2ldKGEpKSxcImZ1bGxzY3JlZW5cIj09aSl7ZCYmZFswXT9kWzBdLml0ZW1zLnNwbGljZSgwLDAsaik6aiYmZy5pdGVtcy5zcGxpY2UoMCwwLGopO2NvbnRpbnVlfX1lbHNlIGo9aTtqJiZqLmlkJiZnLmFkZChqKX1kW2VdPWd9Yi5lYWNoKFVFLl9jdXN0b21pemVVSSxmdW5jdGlvbihiLGMpe3ZhciBkLGU7cmV0dXJuKCFiLmlkfHxiLmlkPT1hLmtleSkmJihkPWIuZXhlY0ZuLmNhbGwoYSxhLGMpLHZvaWQoZCYmKGU9Yi5pbmRleCx2b2lkIDA9PT1lJiYoZT1nLml0ZW1zLmxlbmd0aCksZy5hZGQoZCxlKSkpKX0pLHRoaXMudG9vbGJhcnM9ZH0sZ2V0SHRtbFRwbDpmdW5jdGlvbigpe3JldHVybic8ZGl2IGlkPVwiIyNcIiBjbGFzcz1cIiUlXCI+PGRpdiBpZD1cIiMjX3Rvb2xiYXJib3hcIiBjbGFzcz1cIiUlLXRvb2xiYXJib3hcIj4nKyh0aGlzLnRvb2xiYXJzLmxlbmd0aD8nPGRpdiBpZD1cIiMjX3Rvb2xiYXJib3hvdXRlclwiIGNsYXNzPVwiJSUtdG9vbGJhcmJveG91dGVyXCI+PGRpdiBjbGFzcz1cIiUlLXRvb2xiYXJib3hpbm5lclwiPicrdGhpcy5yZW5kZXJUb29sYmFyQm94SHRtbCgpK1wiPC9kaXY+PC9kaXY+XCI6XCJcIikrJzxkaXYgaWQ9XCIjI190b29sYmFybXNnXCIgY2xhc3M9XCIlJS10b29sYmFybXNnXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+PGRpdiBpZCA9IFwiIyNfdXBsb2FkX2RpYWxvZ1wiIGNsYXNzPVwiJSUtdG9vbGJhcm1zZy11cGxvYWRcIiBvbmNsaWNrPVwiJCQuc2hvd1dvcmRJbWFnZURpYWxvZygpO1wiPicrdGhpcy5lZGl0b3IuZ2V0TGFuZyhcImNsaWNrVG9VcGxvYWRcIikrJzwvZGl2PjxkaXYgY2xhc3M9XCIlJS10b29sYmFybXNnLWNsb3NlXCIgb25jbGljaz1cIiQkLmhpZGVUb29sYmFyTXNnKCk7XCI+eDwvZGl2PjxkaXYgaWQ9XCIjI190b29sYmFybXNnX2xhYmVsXCIgY2xhc3M9XCIlJS10b29sYmFybXNnLWxhYmVsXCI+PC9kaXY+PGRpdiBzdHlsZT1cImhlaWdodDowO292ZXJmbG93OmhpZGRlbjtjbGVhcjpib3RoO1wiPjwvZGl2PjwvZGl2PjxkaXYgaWQ9XCIjI19tZXNzYWdlX2hvbGRlclwiIGNsYXNzPVwiJSUtbWVzc2FnZWhvbGRlclwiPjwvZGl2PjwvZGl2PjxkaXYgaWQ9XCIjI19pZnJhbWVob2xkZXJcIiBjbGFzcz1cIiUlLWlmcmFtZWhvbGRlclwiPjwvZGl2PjxkaXYgaWQ9XCIjI19ib3R0b21iYXJcIiBjbGFzcz1cIiUlLWJvdHRvbUNvbnRhaW5lclwiPjx0YWJsZT48dHI+PHRkIGlkPVwiIyNfZWxlbWVudHBhdGhcIiBjbGFzcz1cIiUlLWJvdHRvbWJhclwiPjwvdGQ+PHRkIGlkPVwiIyNfd29yZGNvdW50XCIgY2xhc3M9XCIlJS13b3JkY291bnRcIj48L3RkPjx0ZCBpZD1cIiMjX3NjYWxlXCIgY2xhc3M9XCIlJS1zY2FsZVwiPjxkaXYgY2xhc3M9XCIlJS1pY29uXCI+PC9kaXY+PC90ZD48L3RyPjwvdGFibGU+PC9kaXY+PGRpdiBpZD1cIiMjX3NjYWxlbGF5ZXJcIj48L2Rpdj48L2Rpdj4nfSxzaG93V29yZEltYWdlRGlhbG9nOmZ1bmN0aW9uKCl7dGhpcy5fZGlhbG9ncy53b3JkaW1hZ2VEaWFsb2cub3BlbigpfSxyZW5kZXJUb29sYmFyQm94SHRtbDpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLnRvb2xiYXJzLmxlbmd0aDtiKyspYS5wdXNoKHRoaXMudG9vbGJhcnNbYl0ucmVuZGVySHRtbCgpKTtyZXR1cm4gYS5qb2luKFwiXCIpfSxzZXRGdWxsU2NyZWVuOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWRpdG9yLGM9Yi5jb250YWluZXIucGFyZW50Tm9kZS5wYXJlbnROb2RlO2lmKHRoaXMuX2Z1bGxzY3JlZW4hPWEpe2lmKHRoaXMuX2Z1bGxzY3JlZW49YSx0aGlzLmVkaXRvci5maXJlRXZlbnQoXCJiZWZvcmVmdWxsc2NyZWVuY2hhbmdlXCIsYSksYmFpZHUuZWRpdG9yLmJyb3dzZXIuZ2Vja28pdmFyIGQ9Yi5zZWxlY3Rpb24uZ2V0UmFuZ2UoKS5jcmVhdGVCb29rbWFyaygpO2lmKGEpe2Zvcig7XCJCT0RZXCIhPWMudGFnTmFtZTspe3ZhciBlPWJhaWR1LmVkaXRvci5kb20uZG9tVXRpbHMuZ2V0Q29tcHV0ZWRTdHlsZShjLFwicG9zaXRpb25cIik7Zi5wdXNoKGUpLGMuc3R5bGUucG9zaXRpb249XCJzdGF0aWNcIixjPWMucGFyZW50Tm9kZX10aGlzLl9iYWtIdG1sT3ZlcmZsb3c9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93LHRoaXMuX2Jha0JvZHlPdmVyZmxvdz1kb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93LHRoaXMuX2Jha0F1dG9IZWlnaHQ9dGhpcy5lZGl0b3IuYXV0b0hlaWdodEVuYWJsZWQsdGhpcy5fYmFrU2Nyb2xsVG9wPU1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApLHRoaXMuX2Jha0VkaXRvckNvbnRhbmluZXJXaWR0aD1iLmlmcmFtZS5wYXJlbnROb2RlLm9mZnNldFdpZHRoLHRoaXMuX2Jha0F1dG9IZWlnaHQmJihiLmF1dG9IZWlnaHRFbmFibGVkPSExLHRoaXMuZWRpdG9yLmRpc2FibGVBdXRvSGVpZ2h0KCkpLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLHdpbmRvdy5zY3JvbGxUbygwLHdpbmRvdy5zY3JvbGxZKSx0aGlzLl9iYWtDc3NUZXh0PXRoaXMuZ2V0RG9tKCkuc3R5bGUuY3NzVGV4dCx0aGlzLl9iYWtDc3NUZXh0MT10aGlzLmdldERvbShcImlmcmFtZWhvbGRlclwiKS5zdHlsZS5jc3NUZXh0LGIuaWZyYW1lLnBhcmVudE5vZGUuc3R5bGUud2lkdGg9XCJcIix0aGlzLl91cGRhdGVGdWxsU2NyZWVuKCl9ZWxzZXtmb3IoO1wiQk9EWVwiIT1jLnRhZ05hbWU7KWMuc3R5bGUucG9zaXRpb249Zi5zaGlmdCgpLGM9Yy5wYXJlbnROb2RlO3RoaXMuZ2V0RG9tKCkuc3R5bGUuY3NzVGV4dD10aGlzLl9iYWtDc3NUZXh0LHRoaXMuZ2V0RG9tKFwiaWZyYW1laG9sZGVyXCIpLnN0eWxlLmNzc1RleHQ9dGhpcy5fYmFrQ3NzVGV4dDEsdGhpcy5fYmFrQXV0b0hlaWdodCYmKGIuYXV0b0hlaWdodEVuYWJsZWQ9ITAsdGhpcy5lZGl0b3IuZW5hYmxlQXV0b0hlaWdodCgpKSxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3c9dGhpcy5fYmFrSHRtbE92ZXJmbG93LGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9dGhpcy5fYmFrQm9keU92ZXJmbG93LGIuaWZyYW1lLnBhcmVudE5vZGUuc3R5bGUud2lkdGg9dGhpcy5fYmFrRWRpdG9yQ29udGFuaW5lcldpZHRoK1wicHhcIix3aW5kb3cuc2Nyb2xsVG8oMCx0aGlzLl9iYWtTY3JvbGxUb3ApfWlmKGJyb3dzZXIuZ2Vja28mJlwidHJ1ZVwiPT09Yi5ib2R5LmNvbnRlbnRFZGl0YWJsZSl7dmFyIGc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZyksYi5ib2R5LmNvbnRlbnRFZGl0YWJsZT0hMSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zy5mb2N1cygpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmJvZHkuY29udGVudEVkaXRhYmxlPSEwLGIuZmlyZUV2ZW50KFwiZnVsbHNjcmVlbmNoYW5nZWRcIixhKSxiLnNlbGVjdGlvbi5nZXRSYW5nZSgpLm1vdmVUb0Jvb2ttYXJrKGQpLnNlbGVjdCghMCksYmFpZHUuZWRpdG9yLmRvbS5kb21VdGlscy5yZW1vdmUoZyksYSYmd2luZG93LnNjcm9sbCgwLDApfSwwKX0sMCl9XCJ0cnVlXCI9PT1iLmJvZHkuY29udGVudEVkaXRhYmxlJiYodGhpcy5lZGl0b3IuZmlyZUV2ZW50KFwiZnVsbHNjcmVlbmNoYW5nZWRcIixhKSx0aGlzLnRyaWdnZXJMYXlvdXQoKSl9fSxfdXBkYXRlRnVsbFNjcmVlbjpmdW5jdGlvbigpe2lmKHRoaXMuX2Z1bGxzY3JlZW4pe3ZhciBhPWMuZ2V0Vmlld3BvcnRSZWN0KCk7aWYodGhpcy5nZXREb20oKS5zdHlsZS5jc3NUZXh0PVwiYm9yZGVyOjA7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDpcIisodGhpcy5lZGl0b3Iub3B0aW9ucy50b3BPZmZzZXR8fDApK1wicHg7d2lkdGg6XCIrYS53aWR0aCtcInB4O2hlaWdodDpcIithLmhlaWdodCtcInB4O3otaW5kZXg6XCIrKDEqdGhpcy5nZXREb20oKS5zdHlsZS56SW5kZXgrMTAwKSxjLnNldFZpZXdwb3J0T2Zmc2V0KHRoaXMuZ2V0RG9tKCkse2xlZnQ6MCx0b3A6dGhpcy5lZGl0b3Iub3B0aW9ucy50b3BPZmZzZXR8fDB9KSx0aGlzLmVkaXRvci5zZXRIZWlnaHQoYS5oZWlnaHQtdGhpcy5nZXREb20oXCJ0b29sYmFyYm94XCIpLm9mZnNldEhlaWdodC10aGlzLmdldERvbShcImJvdHRvbWJhclwiKS5vZmZzZXRIZWlnaHQtKHRoaXMuZWRpdG9yLm9wdGlvbnMudG9wT2Zmc2V0fHwwKSwhMCksYnJvd3Nlci5nZWNrbyl0cnl7d2luZG93Lm9ucmVzaXplKCl9Y2F0Y2goYil7fX19LF91cGRhdGVFbGVtZW50UGF0aDpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5nZXREb20oXCJlbGVtZW50cGF0aFwiKTtpZih0aGlzLmVsZW1lbnRQYXRoRW5hYmxlZCYmKGE9dGhpcy5lZGl0b3IucXVlcnlDb21tYW5kVmFsdWUoXCJlbGVtZW50cGF0aFwiKSkpe2Zvcih2YXIgYyxkPVtdLGU9MDtjPWFbZV07ZSsrKWRbZV09dGhpcy5mb3JtYXRIdG1sKCc8c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIG9uY2xpY2s9XCIkJC5lZGl0b3IuZXhlY0NvbW1hbmQoJnF1b3Q7ZWxlbWVudHBhdGgmcXVvdDssICZxdW90OycrZSsnJnF1b3Q7KTtcIj4nK2MrXCI8L3NwYW4+XCIpO2IuaW5uZXJIVE1MPSc8ZGl2IGNsYXNzPVwiZWR1aS1lZGl0b3ItYnJlYWRjcnVtYlwiIG9ubW91c2Vkb3duPVwicmV0dXJuIGZhbHNlO1wiPicrdGhpcy5lZGl0b3IuZ2V0TGFuZyhcImVsZW1lbnRQYXRoVGlwXCIpK1wiOiBcIitkLmpvaW4oXCIgJmd0OyBcIikrXCI8L2Rpdj5cIn1lbHNlIGIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn0sZGlzYWJsZUVsZW1lbnRQYXRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXREb20oXCJlbGVtZW50cGF0aFwiKTthLmlubmVySFRNTD1cIlwiLGEuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLmVsZW1lbnRQYXRoRW5hYmxlZD0hMX0sZW5hYmxlRWxlbWVudFBhdGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldERvbShcImVsZW1lbnRwYXRoXCIpO2Euc3R5bGUuZGlzcGxheT1cIlwiLHRoaXMuZWxlbWVudFBhdGhFbmFibGVkPSEwLHRoaXMuX3VwZGF0ZUVsZW1lbnRQYXRoKCl9LF9zY2FsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtvPWUuZ2V0WFkoaCkscHx8KHA9Zy5vcHRpb25zLm1pbkZyYW1lSGVpZ2h0K2oub2Zmc2V0SGVpZ2h0K2sub2Zmc2V0SGVpZ2h0KSxtLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7ZGlzcGxheTo7dG9wOjA7YmFja2dyb3VuZC1jb2xvcjojNDFBQkZGO29wYWNpdHk6MC40O2ZpbHRlcjogQWxwaGEob3BhY2l0eT00MCk7d2lkdGg6XCIraC5vZmZzZXRXaWR0aCtcInB4O2hlaWdodDpcIitoLm9mZnNldEhlaWdodCtcInB4O3otaW5kZXg6XCIrKGcub3B0aW9ucy56SW5kZXgrMSksZS5vbihmLFwibW91c2Vtb3ZlXCIsYiksZS5vbihpLFwibW91c2V1cFwiLGMpLGUub24oZixcIm1vdXNldXBcIixjKX1mdW5jdGlvbiBiKGEpe2QoKTt2YXIgYj1hfHx3aW5kb3cuZXZlbnQ7cj1iLnBhZ2VYfHxmLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0K2IuY2xpZW50WCxzPWIucGFnZVl8fGYuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCtiLmNsaWVudFksdD1yLW8ueCx1PXMtby55LHQ+PXEmJihuPSEwLG0uc3R5bGUud2lkdGg9dCtcInB4XCIpLHU+PXAmJihuPSEwLG0uc3R5bGUuaGVpZ2h0PXUrXCJweFwiKX1mdW5jdGlvbiBjKCl7biYmKG49ITEsZy51aS5fYWN0dWFsRnJhbWVXaWR0aD1tLm9mZnNldFdpZHRoLTIsaC5zdHlsZS53aWR0aD1nLnVpLl9hY3R1YWxGcmFtZVdpZHRoK1wicHhcIixnLnNldEhlaWdodChtLm9mZnNldEhlaWdodC1rLm9mZnNldEhlaWdodC1qLm9mZnNldEhlaWdodC0yLCEwKSksbSYmKG0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksZCgpLGUudW4oZixcIm1vdXNlbW92ZVwiLGIpLGUudW4oaSxcIm1vdXNldXBcIixjKSxlLnVuKGYsXCJtb3VzZXVwXCIsYyl9ZnVuY3Rpb24gZCgpe2Jyb3dzZXIuaWU/Zi5zZWxlY3Rpb24uY2xlYXIoKTp3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCl9dmFyIGY9ZG9jdW1lbnQsZz10aGlzLmVkaXRvcixoPWcuY29udGFpbmVyLGk9Zy5kb2N1bWVudCxqPXRoaXMuZ2V0RG9tKFwidG9vbGJhcmJveFwiKSxrPXRoaXMuZ2V0RG9tKFwiYm90dG9tYmFyXCIpLGw9dGhpcy5nZXREb20oXCJzY2FsZVwiKSxtPXRoaXMuZ2V0RG9tKFwic2NhbGVsYXllclwiKSxuPSExLG89bnVsbCxwPTAscT1nLm9wdGlvbnMubWluRnJhbWVXaWR0aCxyPTAscz0wLHQ9MCx1PTAsdj10aGlzO3RoaXMuZWRpdG9yLmFkZExpc3RlbmVyKFwiZnVsbHNjcmVlbmNoYW5nZWRcIixmdW5jdGlvbihhLGIpe2lmKGIpdi5kaXNhYmxlU2NhbGUoKTtlbHNlIGlmKHYuZWRpdG9yLm9wdGlvbnMuc2NhbGVFbmFibGVkKXt2LmVuYWJsZVNjYWxlKCk7dmFyIGM9di5lZGl0b3IuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7di5lZGl0b3IuYm9keS5hcHBlbmRDaGlsZChjKSx2LmVkaXRvci5ib2R5LnN0eWxlLmhlaWdodD1NYXRoLm1heChlLmdldFhZKGMpLnksdi5lZGl0b3IuaWZyYW1lLm9mZnNldEhlaWdodC0yMCkrXCJweFwiLGUucmVtb3ZlKGMpfX0pLHRoaXMuZW5hYmxlU2NhbGU9ZnVuY3Rpb24oKXsxIT1nLnF1ZXJ5Q29tbWFuZFN0YXRlKFwic291cmNlXCIpJiYobC5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5zY2FsZUVuYWJsZWQ9ITAsZS5vbihsLFwibW91c2Vkb3duXCIsYSkpfSx0aGlzLmRpc2FibGVTY2FsZT1mdW5jdGlvbigpe2wuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnNjYWxlRW5hYmxlZD0hMSxlLnVuKGwsXCJtb3VzZWRvd25cIixhKX19LGlzRnVsbFNjcmVlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mdWxsc2NyZWVufSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7ZC5wcm90b3R5cGUucG9zdFJlbmRlci5jYWxsKHRoaXMpO2Zvcih2YXIgYT0wO2E8dGhpcy50b29sYmFycy5sZW5ndGg7YSsrKXRoaXMudG9vbGJhcnNbYV0ucG9zdFJlbmRlcigpO3ZhciBiLGM9dGhpcyxlPWJhaWR1LmVkaXRvci5kb20uZG9tVXRpbHMsZj1mdW5jdGlvbigpe2NsZWFyVGltZW91dChiKSxiPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLl91cGRhdGVGdWxsU2NyZWVuKCl9KX07ZS5vbih3aW5kb3csXCJyZXNpemVcIixmKSxjLmFkZExpc3RlbmVyKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZS51bih3aW5kb3csXCJyZXNpemVcIixmKSxjbGVhclRpbWVvdXQoYil9KX0sc2hvd1Rvb2xiYXJNc2c6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmdldERvbShcInRvb2xiYXJtc2dfbGFiZWxcIikuaW5uZXJIVE1MPWEsdGhpcy5nZXREb20oXCJ0b29sYmFybXNnXCIpLnN0eWxlLmRpc3BsYXk9XCJcIiwhYil7dmFyIGM9dGhpcy5nZXREb20oXCJ1cGxvYWRfZGlhbG9nXCIpO2Muc3R5bGUuZGlzcGxheT1cIm5vbmVcIn19LGhpZGVUb29sYmFyTXNnOmZ1bmN0aW9uKCl7dGhpcy5nZXREb20oXCJ0b29sYmFybXNnXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9LG1hcFVybDpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnJlcGxhY2UoXCJ+L1wiLHRoaXMuZWRpdG9yLm9wdGlvbnMuVUVESVRPUl9IT01FX1VSTHx8XCJcIik6XCJcIn0sdHJpZ2dlckxheW91dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RG9tKCk7XCIxXCI9PWEuc3R5bGUuem9vbT9hLnN0eWxlLnpvb209XCIxMDAlXCI6YS5zdHlsZS56b29tPVwiMVwifX0sYi5pbmhlcml0cyhhLGJhaWR1LmVkaXRvci51aS5VSUJhc2UpO3ZhciBnPXt9O1VFLnVpLkVkaXRvcj1mdW5jdGlvbihjKXt2YXIgZD1uZXcgVUUuRWRpdG9yKGMpO2Qub3B0aW9ucy5lZGl0b3I9ZCxiLmxvYWRGaWxlKGRvY3VtZW50LHtocmVmOmQub3B0aW9ucy50aGVtZVBhdGgrZC5vcHRpb25zLnRoZW1lK1wiL2Nzcy91ZWRpdG9yLmNzc1wiLHRhZzpcImxpbmtcIix0eXBlOlwidGV4dC9jc3NcIixyZWw6XCJzdHlsZXNoZWV0XCJ9KTt2YXIgZj1kLnJlbmRlcjtyZXR1cm4gZC5yZW5kZXI9ZnVuY3Rpb24oYyl7Yy5jb25zdHJ1Y3Rvcj09PVN0cmluZyYmKGQua2V5PWMsZ1tjXT1kKSxiLmRvbVJlYWR5KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2lmKGQuc2V0T3B0KHtsYWJlbE1hcDpkLm9wdGlvbnMubGFiZWxNYXB8fGQuZ2V0TGFuZyhcImxhYmVsTWFwXCIpfSksbmV3IGEoZC5vcHRpb25zKSxjJiYoYy5jb25zdHJ1Y3Rvcj09PVN0cmluZyYmKGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYykpLGMmJmMuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSYmKGQub3B0aW9ucy50ZXh0YXJlYT1jLmdldEF0dHJpYnV0ZShcIm5hbWVcIikpLGMmJi9zY3JpcHR8dGV4dGFyZWEvZ2kudGVzdChjLnRhZ05hbWUpKSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYyk7dmFyIGc9Yy52YWx1ZXx8Yy5pbm5lckhUTUw7ZC5vcHRpb25zLmluaXRpYWxDb250ZW50PS9eW1xcdFxcclxcbiBdKiQvLnRlc3QoZyk/ZC5vcHRpb25zLmluaXRpYWxDb250ZW50OmcucmVwbGFjZSgvPltcXG5cXHJcXHRdKyhbIF17NH0pKy9nLFwiPlwiKS5yZXBsYWNlKC9bXFxuXFxyXFx0XSsoWyBdezR9KSs8L2csXCI8XCIpLnJlcGxhY2UoLz5bXFxuXFxyXFx0XSs8L2csXCI+PFwiKSxjLmNsYXNzTmFtZSYmKGIuY2xhc3NOYW1lPWMuY2xhc3NOYW1lKSxjLnN0eWxlLmNzc1RleHQmJihiLnN0eWxlLmNzc1RleHQ9Yy5zdHlsZS5jc3NUZXh0KSwvdGV4dGFyZWEvaS50ZXN0KGMudGFnTmFtZSk/KGQudGV4dGFyZWE9YyxkLnRleHRhcmVhLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpOmMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSxjLmlkJiYoYi5pZD1jLmlkLGUucmVtb3ZlQXR0cmlidXRlcyhjLFwiaWRcIikpLGM9YixjLmlubmVySFRNTD1cIlwifWUuYWRkQ2xhc3MoYyxcImVkdWktXCIrZC5vcHRpb25zLnRoZW1lKSxkLnVpLnJlbmRlcihjKTt2YXIgaD1kLm9wdGlvbnM7ZC5jb250YWluZXI9ZC51aS5nZXREb20oKTtmb3IodmFyIGksaj1lLmZpbmRQYXJlbnRzKGMsITApLGs9W10sbD0wO2k9altsXTtsKyspa1tsXT1pLnN0eWxlLmRpc3BsYXksaS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtpZihoLmluaXRpYWxGcmFtZVdpZHRoKWgubWluRnJhbWVXaWR0aD1oLmluaXRpYWxGcmFtZVdpZHRoO2Vsc2V7aC5taW5GcmFtZVdpZHRoPWguaW5pdGlhbEZyYW1lV2lkdGg9Yy5vZmZzZXRXaWR0aDt2YXIgbT1jLnN0eWxlLndpZHRoOy8lJC8udGVzdChtKSYmKGguaW5pdGlhbEZyYW1lV2lkdGg9bSl9aC5pbml0aWFsRnJhbWVIZWlnaHQ/aC5taW5GcmFtZUhlaWdodD1oLmluaXRpYWxGcmFtZUhlaWdodDpoLmluaXRpYWxGcmFtZUhlaWdodD1oLm1pbkZyYW1lSGVpZ2h0PWMub2Zmc2V0SGVpZ2h0O2Zvcih2YXIgaSxsPTA7aT1qW2xdO2wrKylpLnN0eWxlLmRpc3BsYXk9a1tsXTtjLnN0eWxlLmhlaWdodCYmKGMuc3R5bGUuaGVpZ2h0PVwiXCIpLGQuY29udGFpbmVyLnN0eWxlLndpZHRoPWguaW5pdGlhbEZyYW1lV2lkdGgrKC8lJC8udGVzdChoLmluaXRpYWxGcmFtZVdpZHRoKT9cIlwiOlwicHhcIiksZC5jb250YWluZXIuc3R5bGUuekluZGV4PWguekluZGV4LGYuY2FsbChkLGQudWkuZ2V0RG9tKFwiaWZyYW1laG9sZGVyXCIpKSxkLmZpcmVFdmVudChcImFmdGVydWlyZWFkeVwiKX1kLmxhbmdJc1JlYWR5P2IoKTpkLmFkZExpc3RlbmVyKFwibGFuZ1JlYWR5XCIsYil9KX0sZH0sVUUuZ2V0RWRpdG9yPWZ1bmN0aW9uKGEsYil7dmFyIGM9Z1thXTtyZXR1cm4gY3x8KGM9Z1thXT1uZXcgVUUudWkuRWRpdG9yKGIpLGMucmVuZGVyKGEpKSxjfSxVRS5kZWxFZGl0b3I9ZnVuY3Rpb24oYSl7dmFyIGI7KGI9Z1thXSkmJihiLmtleSYmYi5kZXN0cm95KCksZGVsZXRlIGdbYV0pfSxVRS5yZWdpc3RlclVJPWZ1bmN0aW9uKGEsYyxkLGUpe2IuZWFjaChhLnNwbGl0KC9cXHMrLyksZnVuY3Rpb24oYSl7VUUuX2N1c3RvbWl6ZVVJW2FdPXtpZDplLGV4ZWNGbjpjLGluZGV4OmR9fSl9fSgpLFVFLnJlZ2lzdGVyVUkoXCJtZXNzYWdlXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3ZhciBhPWcudWkuZ2V0RG9tKFwidG9vbGJhcmJveFwiKTthJiYoYy5zdHlsZS50b3A9YS5vZmZzZXRIZWlnaHQrMytcInB4XCIpLGMuc3R5bGUuekluZGV4PU1hdGgubWF4KGcub3B0aW9ucy56SW5kZXgsZy5pZnJhbWUuc3R5bGUuekluZGV4KSsxfXZhciBjLGQ9YmFpZHUuZWRpdG9yLnVpLGU9ZC5NZXNzYWdlLGY9W10sZz1hO2cuYWRkTGlzdGVuZXIoXCJyZWFkeVwiLGZ1bmN0aW9uKCl7Yz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChnLnVpLmlkK1wiX21lc3NhZ2VfaG9sZGVyXCIpLGIoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YigpfSw1MDApfSksZy5hZGRMaXN0ZW5lcihcInNob3dtZXNzYWdlXCIsZnVuY3Rpb24oYSxkKXtkPXV0aWxzLmlzU3RyaW5nKGQpP3tjb250ZW50OmR9OmQ7dmFyIGg9bmV3IGUoe3RpbWVvdXQ6ZC50aW1lb3V0LHR5cGU6ZC50eXBlLGNvbnRlbnQ6ZC5jb250ZW50LGtlZXBzaG93OmQua2VlcHNob3csZWRpdG9yOmd9KSxpPWQuaWR8fFwibXNnX1wiKygrbmV3IERhdGUpLnRvU3RyaW5nKDM2KTtyZXR1cm4gaC5yZW5kZXIoYyksZltpXT1oLGgucmVzZXQoZCksYigpLGl9KSxnLmFkZExpc3RlbmVyKFwidXBkYXRlbWVzc2FnZVwiLGZ1bmN0aW9uKGEsYixkKXtkPXV0aWxzLmlzU3RyaW5nKGQpP3tjb250ZW50OmR9OmQ7dmFyIGU9ZltiXTtlLnJlbmRlcihjKSxlJiZlLnJlc2V0KGQpfSksZy5hZGRMaXN0ZW5lcihcImhpZGVtZXNzYWdlXCIsZnVuY3Rpb24oYSxiKXt2YXIgYz1mW2JdO2MmJmMuaGlkZSgpfSl9KSxVRS5yZWdpc3RlclVJKFwiYXV0b3NhdmVcIixmdW5jdGlvbihhKXt2YXIgYj1udWxsLGM9bnVsbDthLm9uKFwiYWZ0ZXJhdXRvc2F2ZVwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGIpLGI9c2V0VGltZW91dChmdW5jdGlvbigpe2MmJmEudHJpZ2dlcihcImhpZGVtZXNzYWdlXCIsYyksYz1hLnRyaWdnZXIoXCJzaG93bWVzc2FnZVwiLHtjb250ZW50OmEuZ2V0TGFuZyhcImF1dG9zYXZlLnN1Y2Nlc3NcIiksdGltZW91dDoyZTN9KX0sMmUzKX0pfSl9KCk7Il0sImZpbGUiOiJwbHVnaW5zL3VlZGl0b3IvdWVkaXRvci5hbGwubWluLmpzIn0=
